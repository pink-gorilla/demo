(function(){
shadow$provide[502]=function(Pa,da,gb,oa){oa.__esModule=!0;oa.default=function(f=k,h=k){const l=Object.keys(f),u=Object.keys(h);return f===h||l.length===u.length&&l.every(q=>f[q]===h[q])};const k={}};
shadow$provide[503]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa):"function"===typeof define&&define.amd?define(["exports"],f):(k="undefined"!==typeof globalThis?globalThis:k||self,f(k.vega={}))})(this,function(k){function f(Ra,la,ma){Ra.fields=la||[];Ra.fname=ma;return Ra}function h(Ra){return null==Ra?null:Ra.fields}function l(Ra){return 1===Ra.length?T(Ra[0]):z(Ra)}function u(Ra){throw Error(Ra);}function q(Ra){function la(){ma.push(Ea+Ra.substring(kb,
cb));Ea="";kb=cb+1}const ma=[],Aa=Ra.length;let Da=null,Qa=0,Ea="",kb,cb,Mb;Ra+="";for(kb=cb=0;cb<Aa;++cb)(Mb=Ra[cb],"\\"===Mb)?(Ea+=Ra.substring(kb,cb),Ea+=Ra.substring(++cb,++cb),kb=cb):Mb===Da?(la(),Da=null,Qa=-1):Da||(kb===Qa&&'"'===Mb?(kb=cb+1,Da=Mb):kb===Qa&&"'"===Mb?(kb=cb+1,Da=Mb):"."!==Mb||Qa?"["===Mb?(cb>kb&&la(),Qa=kb=cb+1):"]"===Mb&&(Qa||u("Access path missing open bracket: "+Ra),0<Qa&&la(),Qa=0,kb=cb+1):cb>kb?la():kb=cb+1);Qa&&u("Access path missing closing bracket: "+Ra);Da&&u("Access path missing closing quote: "+
Ra);cb>kb&&(cb++,la());return ma}function D(Ra,la,ma){const Aa=q(Ra);Ra=1===Aa.length?Aa[0]:Ra;return f((ma&&ma.get||l)(Aa),[Ra],la||Ra)}function U(Ra,la,ma){la=[la].concat([].slice.call(ma));console[Ra].apply(console,la)}function aa(Ra){return Ra===Object(Ra)}function X(Ra,la,ma,Aa){if("__proto__"!==la){var Da;if(aa(ma)&&!C(ma))for(Da in Ra=aa(Ra[la])?Ra[la]:Ra[la]={},ma)Aa&&(!0===Aa||Aa[Da])?X(Ra,Da,ma[Da]):"__proto__"!==Da&&(Ra[Da]=ma[Da]);else Ra[la]=ma}}function S(Ra,la){function ma(Qa){Aa[Qa.name]||
(Aa[Qa.name]=1,Da.push(Qa))}if(null==Ra)return la;const Aa={},Da=[];la.forEach(ma);Ra.forEach(ma);return Da}function V(Ra){return Ra[Ra.length-1]}function F(Ra){return null==Ra||""===Ra?null:+Ra}function t(Ra,la,ma,Aa){const Da=ma(Ra[0]);Ra=ma(V(Ra));la*=Ra-Da;return[Aa(Da-la),Aa(Ra-la)]}function w(Ra,la,ma,Aa,Da){const Qa=Aa(Ra[0]);Ra=Aa(V(Ra));la=null!=la?Aa(la):(Qa+Ra)/2;return[Da(la+(Qa-la)*ma),Da(la+(Ra-la)*ma)]}function x(Ra){return null!=Ra?C(Ra)?Ra:[Ra]:[]}function I(Ra){return"function"===
typeof Ra}function R(Ra){for(let la,ma,Aa=1,Da=arguments.length;Aa<Da;++Aa)for(ma in la=arguments[Aa],la)Ra[ma]=la[ma];return Ra}function B(Ra,la){return eb.call(Ra,la)}function v(Ra){return"[object Date]"===Object.prototype.toString.call(Ra)}function O(Ra){return"number"===typeof Ra}function N(Ra){return"string"===typeof Ra}function A(Ra,la){let ma="";for(;0<=--la;)ma+=Ra;return ma}function J(Ra){return C(Ra)?"["+Ra.map(J)+"]":aa(Ra)||N(Ra)?JSON.stringify(Ra).replace("\u2028","\\u2028").replace("\u2029",
"\\u2029"):Ra}const T=Ra=>function(la){return la[Ra]},z=Ra=>{const la=Ra.length;return function(ma){for(let Aa=0;Aa<la;++Aa)ma=ma[Ra[Aa]];return ma}},ba=D("id"),K=f(Ra=>Ra,[],"identity"),r=f(()=>0,[],"zero"),Y=f(()=>1,[],"one"),Z=f(()=>!0,[],"true"),E=f(()=>!1,[],"false");var C=Array.isArray;const W=Ra=>la=>Ra*Math.exp(la),fa=Ra=>la=>Math.log(Ra*la),ja=Ra=>la=>Math.sign(la)*Math.log1p(Math.abs(la/Ra)),Ba=Ra=>la=>Math.sign(la)*Math.expm1(Math.abs(la))*Ra,Ga=Ra=>la=>0>la?-Math.pow(-la,Ra):Math.pow(la,
Ra),ua=(Ra,la)=>(Ra<la||null==Ra)&&null!=la?-1:(Ra>la||null==la)&&null!=Ra?1:(la=la instanceof Date?+la:la,Ra=Ra instanceof Date?+Ra:Ra)!==Ra&&la===la?-1:la!==la&&Ra===Ra?1:0,Fa=(Ra,la)=>1===Ra.length?Xa(Ra[0],la[0]):Sa(Ra,la,Ra.length),Xa=(Ra,la)=>function(ma,Aa){return ua(Ra(ma),Ra(Aa))*la},Sa=(Ra,la,ma)=>{la.push(0);return function(Aa,Da){var Qa=0;let Ea=-1;for(;0===Qa&&++Ea<ma;)Qa=Ra[Ea],Qa=ua(Qa(Aa),Qa(Da));return Qa*la[Ea]}},eb=Object.prototype.hasOwnProperty,Va={},La=Ra=>O(Ra)?Ra:v(Ra)?Ra:
Date.parse(Ra);k.Debug=4;k.Error=1;k.Info=3;k.None=0;k.Warn=2;k.accessor=f;k.accessorFields=h;k.accessorName=function(Ra){return null==Ra?null:Ra.fname};k.array=x;k.ascending=ua;k.clampRange=function(Ra,la,ma){let Aa=Ra[0];Ra=Ra[1];let Da;Ra<Aa&&(Da=Ra,Ra=Aa,Aa=Da);Da=Ra-Aa;return Da>=ma-la?[la,ma]:[Aa=Math.min(Math.max(Aa,la),ma-Da),Aa+Da]};k.compare=function(Ra,la,ma){ma=ma||{};la=x(la)||[];const Aa=[],Da=[],Qa={},Ea=ma.comparator||Fa;x(Ra).forEach((kb,cb)=>{null!=kb&&(Aa.push("descending"===la[cb]?
-1:1),Da.push(kb=I(kb)?kb:D(kb,null,ma)),(h(kb)||[]).forEach(Mb=>Qa[Mb]=1))});return 0===Da.length?null:f(Ea(Da,Aa),Object.keys(Qa))};k.constant=function(Ra){return I(Ra)?Ra:()=>Ra};k.debounce=function(Ra,la){let ma;return Aa=>{ma&&clearTimeout(ma);ma=setTimeout(()=>(la(Aa),ma=null),Ra)}};k.error=u;k.extend=R;k.extent=function(Ra,la){let ma=0,Aa,Da,Qa,Ea;if(Ra&&(Aa=Ra.length))if(null==la){for(Da=Ra[ma];ma<Aa&&(null==Da||Da!==Da);Da=Ra[++ma]);for(Qa=Ea=Da;ma<Aa;++ma)Da=Ra[ma],null!=Da&&(Da<Qa&&(Qa=
Da),Da>Ea&&(Ea=Da))}else{for(Da=la(Ra[ma]);ma<Aa&&(null==Da||Da!==Da);Da=la(Ra[++ma]));for(Qa=Ea=Da;ma<Aa;++ma)Da=la(Ra[ma]),null!=Da&&(Da<Qa&&(Qa=Da),Da>Ea&&(Ea=Da))}return[Qa,Ea]};k.extentIndex=function(Ra,la){const ma=Ra.length;let Aa=-1,Da,Qa,Ea,kb,cb;if(null==la){for(;++Aa<ma;)if(Qa=Ra[Aa],null!=Qa&&Qa>=Qa){Da=Ea=Qa;break}if(Aa===ma)return[-1,-1];for(kb=cb=Aa;++Aa<ma;)Qa=Ra[Aa],null!=Qa&&(Da>Qa&&(Da=Qa,kb=Aa),Ea<Qa&&(Ea=Qa,cb=Aa))}else{for(;++Aa<ma;)if(Qa=la(Ra[Aa],Aa,Ra),null!=Qa&&Qa>=Qa){Da=
Ea=Qa;break}if(Aa===ma)return[-1,-1];for(kb=cb=Aa;++Aa<ma;)Qa=la(Ra[Aa],Aa,Ra),null!=Qa&&(Da>Qa&&(Da=Qa,kb=Aa),Ea<Qa&&(Ea=Qa,cb=Aa))}return[kb,cb]};k.falsy=E;k.fastmap=function(Ra){function la(Qa){return B(ma,Qa)&&ma[Qa]!==Va}let ma={},Aa;const Da={size:0,empty:0,object:ma,has:la,get(Qa){return la(Qa)?ma[Qa]:void 0},set(Qa,Ea){la(Qa)||(++Da.size,ma[Qa]===Va&&--Da.empty);ma[Qa]=Ea;return this},delete(Qa){la(Qa)&&(--Da.size,++Da.empty,ma[Qa]=Va);return this},clear(){Da.size=Da.empty=0;Da.object=ma=
{}},test(Qa){return arguments.length?(Aa=Qa,Da):Aa},clean(){const Qa={};let Ea=0;for(const kb in ma){const cb=ma[kb];cb===Va||Aa&&Aa(cb)||(Qa[kb]=cb,++Ea)}Da.size=Ea;Da.empty=0;Da.object=ma=Qa}};Ra&&Object.keys(Ra).forEach(Qa=>{Da.set(Qa,Ra[Qa])});return Da};k.field=D;k.flush=function(Ra,la,ma,Aa,Da,Qa){if(!ma&&0!==ma)return Qa;ma=+ma;let Ea=Ra[0],kb=V(Ra);kb<Ea&&(Ra=Ea,Ea=kb,kb=Ra);Ra=Math.abs(la-Ea);la=Math.abs(kb-la);return Ra<la&&Ra<=ma?Aa:la<=ma?Da:Qa};k.hasOwnProperty=B;k.id=ba;k.identity=K;
k.inherits=function(Ra,la,ma){la=Ra.prototype=Object.create(la.prototype);Object.defineProperty(la,"constructor",{value:Ra,writable:!0,enumerable:!0,configurable:!0});return R(la,ma)};k.inrange=function(Ra,la,ma,Aa){let Da=la[0];la=la[la.length-1];let Qa;Da>la&&(Qa=Da,Da=la,la=Qa);return(void 0===ma||ma?Da<=Ra:Da<Ra)&&(void 0===Aa||Aa?Ra<=la:Ra<la)};k.isArray=C;k.isBoolean=function(Ra){return"boolean"===typeof Ra};k.isDate=v;k.isFunction=I;k.isIterable=function(Ra){return Ra&&I(Ra[Symbol.iterator])};
k.isNumber=O;k.isObject=aa;k.isRegExp=function(Ra){return"[object RegExp]"===Object.prototype.toString.call(Ra)};k.isString=N;k.key=function(Ra,la,ma){Ra&&(Ra=la?x(Ra).map(Qa=>Qa.replace(/\\(.)/g,"$1")):x(Ra));const Aa=Ra&&Ra.length,Da=ma&&ma.get||l;ma=Qa=>Da(la?[Qa]:q(Qa));if(Aa)if(1===Aa){const Qa=ma(Ra[0]);ma=function(Ea){return""+Qa(Ea)}}else{const Qa=Ra.map(ma);ma=function(Ea){let kb=""+Qa[0](Ea),cb=0;for(;++cb<Aa;)kb+="|"+Qa[cb](Ea);return kb}}else ma=function(){return""};return f(ma,Ra,"key")};
k.lerp=function(Ra,la){const ma=Ra[0];Ra=V(Ra);return(la=+la)?1===la?Ra:ma+la*(Ra-ma):ma};k.logger=function(Ra,la,ma=U){let Aa=Ra||0;return{level(Da){return arguments.length?(Aa=+Da,this):Aa},error(){1<=Aa&&ma(la||"error","ERROR",arguments);return this},warn(){2<=Aa&&ma(la||"warn","WARN",arguments);return this},info(){3<=Aa&&ma(la||"log","INFO",arguments);return this},debug(){4<=Aa&&ma(la||"log","DEBUG",arguments);return this}}};k.lruCache=function(Ra){Ra=+Ra||1E4;let la,ma,Aa;const Da=()=>{la={};
ma={};Aa=0},Qa=(Ea,kb)=>{++Aa>Ra&&(ma=la,la={},Aa=1);return la[Ea]=kb};Da();return{clear:Da,has:Ea=>B(la,Ea)||B(ma,Ea),get:Ea=>B(la,Ea)?la[Ea]:B(ma,Ea)?Qa(Ea,ma[Ea]):void 0,set:(Ea,kb)=>B(la,Ea)?la[Ea]=kb:Qa(Ea,kb)}};k.merge=function(Ra,la,ma,Aa){const Da=la.length,Qa=ma.length;if(!Qa)return la;if(!Da)return ma;Aa=Aa||new la.constructor(Da+Qa);let Ea=0,kb=0,cb=0;for(;Ea<Da&&kb<Qa;++cb)Aa[cb]=0<Ra(la[Ea],ma[kb])?ma[kb++]:la[Ea++];for(;Ea<Da;++Ea,++cb)Aa[cb]=la[Ea];for(;kb<Qa;++kb,++cb)Aa[cb]=ma[kb];
return Aa};k.mergeConfig=function(...Ra){return Ra.reduce((la,ma)=>{for(const Aa in ma)"signals"===Aa?la.signals=S(la.signals,ma.signals):X(la,Aa,ma[Aa],"legend"===Aa?{layout:1}:"style"===Aa?!0:null);return la},{})};k.one=Y;k.pad=function(Ra,la,ma,Aa){ma=ma||" ";Ra+="";la-=Ra.length;return 0>=la?Ra:"left"===Aa?A(ma,la)+Ra:"center"===Aa?A(ma,~~(la/2))+Ra+A(ma,Math.ceil(la/2)):Ra+A(ma,la)};k.panLinear=function(Ra,la){return t(Ra,la,F,K)};k.panLog=function(Ra,la){var ma=Math.sign(Ra[0]);return t(Ra,
la,fa(ma),W(ma))};k.panPow=function(Ra,la,ma){return t(Ra,la,Ga(ma),Ga(1/ma))};k.panSymlog=function(Ra,la,ma){return t(Ra,la,ja(ma),Ba(ma))};k.peek=V;k.quarter=function(Ra){return 1+~~((new Date(Ra)).getMonth()/3)};k.repeat=A;k.span=function(Ra){return Ra&&V(Ra)-Ra[0]||0};k.splitAccessPath=q;k.stringValue=J;k.toBoolean=function(Ra){return null==Ra||""===Ra?null:Ra&&"false"!==Ra&&"0"!==Ra?!!Ra:!1};k.toDate=function(Ra,la){la=la||La;return null==Ra||""===Ra?null:la(Ra)};k.toNumber=F;k.toSet=function(Ra){const la=
{},ma=Ra.length;for(let Aa=0;Aa<ma;++Aa)la[Ra[Aa]]=!0;return la};k.toString=function(Ra){return null==Ra||""===Ra?null:Ra+""};k.truncate=function(Ra,la,ma,Aa){Aa=null!=Aa?Aa:"â€¦";Ra+="";const Da=Ra.length,Qa=Math.max(0,la-Aa.length);return Da<=la?Ra:"left"===ma?Aa+Ra.slice(Da-Qa):"center"===ma?Ra.slice(0,Math.ceil(Qa/2))+Aa+Ra.slice(Da-~~(Qa/2)):Ra.slice(0,Qa)+Aa};k.truthy=Z;k.utcquarter=function(Ra){return 1+~~((new Date(Ra)).getUTCMonth()/3)};k.visitArray=function(Ra,la,ma){if(Ra)if(la){const Aa=
Ra.length;for(let Da=0;Da<Aa;++Da){const Qa=la(Ra[Da]);Qa&&ma(Qa,Da,Ra)}}else Ra.forEach(ma)};k.writeConfig=X;k.zero=r;k.zoomLinear=function(Ra,la,ma){return w(Ra,la,ma,F,K)};k.zoomLog=function(Ra,la,ma){const Aa=Math.sign(Ra[0]);return w(Ra,la,ma,fa(Aa),W(Aa))};k.zoomPow=function(Ra,la,ma,Aa){return w(Ra,la,ma,Ga(Aa),Ga(1/Aa))};k.zoomSymlog=function(Ra,la,ma,Aa){return w(Ra,la,ma,ja(Aa),Ba(Aa))};Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[504]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa):"function"===typeof define&&define.amd?define(["exports"],f):(k=k||self,f(k.d3=k.d3||{}))})(this,function(k){function f(J){return new Function("d","return {"+J.map(function(T,z){return JSON.stringify(T)+": d["+z+'] || ""'}).join(",")+"}")}function h(J,T){var z=f(J);return function(ba,K){return T(z(ba),K,J)}}function l(J){var T=Object.create(null),z=[];J.forEach(function(ba){for(var K in ba)K in
T||z.push(T[K]=K)});return z}function u(J,T){J+="";var z=J.length;return z<T?Array(T-z+1).join(0)+J:J}function q(J){function T(Z,E){function C(){if(ua)return U;if(Fa)return Fa=!1,D;var Sa,eb=ja,Va;if(34===Z.charCodeAt(eb)){for(;ja++<fa&&34!==Z.charCodeAt(ja)||34===Z.charCodeAt(++ja););(Sa=ja)>=fa?ua=!0:10===(Va=Z.charCodeAt(ja++))?Fa=!0:13===Va&&(Fa=!0,10===Z.charCodeAt(ja)&&++ja);return Z.slice(eb+1,Sa-1).replace(/""/g,'"')}for(;ja<fa;){if(10===(Va=Z.charCodeAt(Sa=ja++)))Fa=!0;else if(13===Va)Fa=
!0,10===Z.charCodeAt(ja)&&++ja;else if(Va!==Y)continue;return Z.slice(eb,Sa)}return ua=!0,Z.slice(eb,fa)}var W=[],fa=Z.length,ja=0,Ba=0,Ga,ua=0>=fa,Fa=!1;10===Z.charCodeAt(fa-1)&&--fa;for(13===Z.charCodeAt(fa-1)&&--fa;(Ga=C())!==U;){for(var Xa=[];Ga!==D&&Ga!==U;)Xa.push(Ga),Ga=C();E&&null==(Xa=E(Xa,Ba++))||W.push(Xa)}return W}function z(Z,E){return Z.map(function(C){return E.map(function(W){return K(C[W])}).join(J)})}function ba(Z){return Z.map(K).join(J)}function K(Z){if(null==Z)Z="";else{if(Z instanceof
Date){var E=Z.getUTCHours();var C=Z.getUTCMinutes(),W=Z.getUTCSeconds(),fa=Z.getUTCMilliseconds();if(isNaN(Z))Z="Invalid Date";else{var ja=Z.getUTCFullYear();Z=(0>ja?"-"+u(-ja,6):9999<ja?"+"+u(ja,6):u(ja,4))+"-"+u(Z.getUTCMonth()+1,2)+"-"+u(Z.getUTCDate(),2)+(fa?"T"+u(E,2)+":"+u(C,2)+":"+u(W,2)+"."+u(fa,3)+"Z":W?"T"+u(E,2)+":"+u(C,2)+":"+u(W,2)+"Z":C||E?"T"+u(E,2)+":"+u(C,2)+"Z":"")}E=Z}else E=r.test(Z+="")?'"'+Z.replace(/"/g,'""')+'"':Z;Z=E}return Z}var r=new RegExp('["'+J+"\n\r]"),Y=J.charCodeAt(0);
return{parse:function(Z,E){var C,W;Z=T(Z,function(fa,ja){if(C)return C(fa,ja-1);W=fa;C=E?h(fa,E):f(fa)});Z.columns=W||[];return Z},parseRows:T,format:function(Z,E){null==E&&(E=l(Z));return[E.map(K).join(J)].concat(z(Z,E)).join("\n")},formatBody:function(Z,E){null==E&&(E=l(Z));return z(Z,E).join("\n")},formatRows:function(Z){return Z.map(ba).join("\n")},formatRow:ba,formatValue:K}}var D={},U={},aa=q(","),X=aa.parse,S=aa.parseRows,V=aa.format,F=aa.formatBody,t=aa.formatRows,w=aa.formatRow;aa=aa.formatValue;
var x=q("\t"),I=x.parse,R=x.parseRows,B=x.format,v=x.formatBody,O=x.formatRows,N=x.formatRow;x=x.formatValue;const A=(new Date("2019-01-01T00:00")).getHours()||(new Date("2019-07-01T00:00")).getHours();k.autoType=function(J){for(var T in J){var z=J[T].trim(),ba;if(z)if("true"===z)z=!0;else if("false"===z)z=!1;else if("NaN"===z)z=NaN;else if(isNaN(ba=+z))if(ba=z.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/))A&&ba[4]&&!ba[7]&&(z=z.replace(/-/g,
"/").replace(/T/," ")),z=new Date(z);else continue;else z=ba;else z=null;J[T]=z}return J};k.csvFormat=V;k.csvFormatBody=F;k.csvFormatRow=w;k.csvFormatRows=t;k.csvFormatValue=aa;k.csvParse=X;k.csvParseRows=S;k.dsvFormat=q;k.tsvFormat=B;k.tsvFormatBody=v;k.tsvFormatRow=N;k.tsvFormatRows=O;k.tsvFormatValue=x;k.tsvParse=I;k.tsvParseRows=R;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[505]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa):"function"===typeof define&&define.amd?define(["exports"],f):(k=k||self,f(k.topojson=k.topojson||{}))})(this,function(k){function f(F){return F}function h(F){if(null==F)return f;var t,w,x=F.scale[0],I=F.scale[1],R=F.translate[0],B=F.translate[1];return function(v,O){O||(t=w=0);O=2;var N=v.length,A=Array(N);A[0]=(t+=v[0])*x+R;for(A[1]=(w+=v[1])*I+B;O<N;)A[O]=v[O],++O;return A}}function l(F){function t(N){N=
x(N);N[0]<R&&(R=N[0]);N[0]>v&&(v=N[0]);N[1]<B&&(B=N[1]);N[1]>O&&(O=N[1])}function w(N){switch(N.type){case "GeometryCollection":N.geometries.forEach(w);break;case "Point":t(N.coordinates);break;case "MultiPoint":N.coordinates.forEach(t)}}var x=h(F.transform),I,R=Infinity,B=R,v=-R,O=-R;F.arcs.forEach(function(N){for(var A=-1,J=N.length,T;++A<J;)T=x(N[A],A),T[0]<R&&(R=T[0]),T[0]>v&&(v=T[0]),T[1]<B&&(B=T[1]),T[1]>O&&(O=T[1])});for(I in F.objects)w(F.objects[I]);return[R,B,v,O]}function u(F,t){var w=
t.id,x=t.bbox,I=null==t.properties?{}:t.properties;F=q(F,t);return null==w&&null==x?{type:"Feature",properties:I,geometry:F}:null==x?{type:"Feature",id:w,properties:I,geometry:F}:{type:"Feature",id:w,bbox:x,properties:I,geometry:F}}function q(F,t){function w(N){return v(N)}function x(N){for(var A=[],J=0,T=N.length;J<T;++J){var z=N[J],ba=A;ba.length&&ba.pop();for(var K=O[0>z?~z:z],r=0,Y=K.length;r<Y;++r)ba.push(v(K[r],r));if(0>z)for(z=ba,ba=z.length,K=ba-Y;K<--ba;)Y=z[K],z[K++]=z[ba],z[ba]=Y}2>A.length&&
A.push(A[0]);return A}function I(N){for(N=x(N);4>N.length;)N.push(N[0]);return N}function R(N){return N.map(I)}function B(N){var A=N.type;switch(A){case "GeometryCollection":return{type:A,geometries:N.geometries.map(B)};case "Point":N=v(N.coordinates);break;case "MultiPoint":N=N.coordinates.map(w);break;case "LineString":N=x(N.arcs);break;case "MultiLineString":N=N.arcs.map(x);break;case "Polygon":N=R(N.arcs);break;case "MultiPolygon":N=N.arcs.map(R);break;default:return null}return{type:A,coordinates:N}}
var v=h(F.transform),O=F.arcs;return B(t)}function D(F,t){function w(N){var A=F.arcs[0>N?~N:N],J=A[0];if(F.transform){var T=[0,0];A.forEach(function(z){T[0]+=z[0];T[1]+=z[1]})}else T=A[A.length-1];return 0>N?[T,J]:[J,T]}function x(N,A){for(var J in N){var T=N[J];delete A[T.start];delete T.start;delete T.end;T.forEach(function(z){I[0>z?~z:z]=1});v.push(T)}}var I={},R={},B={},v=[],O=-1;t.forEach(function(N,A){var J=F.arcs[0>N?~N:N];3>J.length&&!J[1][0]&&!J[1][1]&&(J=t[++O],t[O]=N,t[A]=J)});t.forEach(function(N){var A=
w(N),J=A[0],T=A[1];(A=B[J])?(delete B[A.end],A.push(N),A.end=T,(N=R[T])?(delete R[N.start],J=N===A?A:A.concat(N),R[J.start=A.start]=B[J.end=N.end]=J):R[A.start]=B[A.end]=A):(A=R[T])?(delete R[A.start],A.unshift(N),A.start=J,(N=B[J])?(delete B[N.end],J=N===A?A:N.concat(A),R[J.start=N.start]=B[J.end=A.end]=J):R[A.start]=B[A.end]=A):(A=[N],R[A.start=J]=B[A.end=T]=A)});x(B,R);x(R,B);t.forEach(function(N){I[0>N?~N:N]||v.push([N])});return v}function U(F,t,w){var x;if(1<arguments.length)var I=aa(F,t,w);
else{var R=0;for(I=Array(x=F.arcs.length);R<x;++R)I[R]=R}return{type:"MultiLineString",arcs:D(F,I)}}function aa(F,t,w){function x(A){var J=0>A?~A:A;(O[J]||(O[J]=[])).push({i:A,g:N})}function I(A){A.forEach(x)}function R(A){A.forEach(I)}function B(A){switch(N=A,A.type){case "GeometryCollection":A.geometries.forEach(B);break;case "LineString":I(A.arcs);break;case "MultiLineString":case "Polygon":R(A.arcs);break;case "MultiPolygon":A.arcs.forEach(R)}}var v=[],O=[],N;B(t);O.forEach(null==w?function(A){v.push(A[0].i)}:
function(A){w(A[0].g,A[A.length-1].g)&&v.push(A[0].i)});return v}function X(F,t){function w(O){switch(O.type){case "GeometryCollection":O.geometries.forEach(w);break;case "Polygon":x(O.arcs);break;case "MultiPolygon":O.arcs.forEach(x)}}function x(O){O.forEach(function(N){N.forEach(function(A){(R[A=0>A?~A:A]||(R[A]=[])).push(O)})});B.push(O)}function I(O){O=q(F,{type:"Polygon",arcs:[O]}).coordinates[0];for(var N=-1,A=O.length,J,T=O[A-1],z=0;++N<A;)J=T,T=O[N],z+=J[0]*T[1]-J[1]*T[0];return Math.abs(z)}
var R={},B=[],v=[];t.forEach(w);B.forEach(function(O){if(!O._){var N=[],A=[O];O._=1;for(v.push(N);O=A.pop();)N.push(O),O.forEach(function(J){J.forEach(function(T){R[0>T?~T:T].forEach(function(z){z._||(z._=1,A.push(z))})})})}});B.forEach(function(O){delete O._});return{type:"MultiPolygon",arcs:v.map(function(O){var N=[];O.forEach(function(z){z.forEach(function(ba){ba.forEach(function(K){2>R[0>K?~K:K].length&&N.push(K)})})});N=D(F,N);if(1<(O=N.length))for(var A=1,J=I(N[0]),T;A<O;++A)(T=I(N[A]))>J&&
(J=N[0],N[0]=N[A],N[A]=J,J=T);return N}).filter(function(O){return 0<O.length})}}function S(F,t){for(var w=0,x=F.length;w<x;){var I=w+x>>>1;F[I]<t?w=I+1:x=I}return w}function V(F){if(null==F)return f;var t,w,x=F.scale[0],I=F.scale[1],R=F.translate[0],B=F.translate[1];return function(v,O){O||(t=w=0);O=2;var N=v.length,A=Array(N),J=Math.round((v[0]-R)/x),T=Math.round((v[1]-B)/I);A[0]=J-t;t=J;A[1]=T-w;for(w=T;O<N;)A[O]=v[O],++O;return A}}k.bbox=l;k.feature=function(F,t){"string"===typeof t&&(t=F.objects[t]);
return"GeometryCollection"===t.type?{type:"FeatureCollection",features:t.geometries.map(function(w){return u(F,w)})}:u(F,t)};k.merge=function(F){return q(F,X.apply(this,arguments))};k.mergeArcs=X;k.mesh=function(F){return q(F,U.apply(this,arguments))};k.meshArcs=U;k.neighbors=function(F){function t(ba,K){ba.forEach(function(r){0>r&&(r=~r);var Y=I[r];Y?Y.push(K):I[r]=[K]})}function w(ba,K){ba.forEach(function(r){t(r,K)})}function x(ba,K){if("GeometryCollection"===ba.type)ba.geometries.forEach(function(r){x(r,
K)});else if(ba.type in B)B[ba.type](ba.arcs,K)}var I={},R=F.map(function(){return[]}),B={LineString:t,MultiLineString:w,Polygon:w,MultiPolygon:function(ba,K){ba.forEach(function(r){w(r,K)})}};F.forEach(x);for(var v in I){F=I[v];for(var O=F.length,N=0;N<O;++N)for(var A=N+1;A<O;++A){var J=F[N],T=F[A],z;(z=R[J])[v=S(z,T)]!==T&&z.splice(v,0,T);(z=R[T])[v=S(z,J)]!==J&&z.splice(v,0,J)}}return R};k.quantize=function(F,t){function w(J){return N(J)}function x(J){switch(J.type){case "GeometryCollection":var T=
{type:"GeometryCollection",geometries:J.geometries.map(x)};break;case "Point":T={type:"Point",coordinates:N(J.coordinates)};break;case "MultiPoint":T={type:"MultiPoint",coordinates:J.coordinates.map(w)};break;default:return J}null!=J.id&&(T.id=J.id);null!=J.bbox&&(T.bbox=J.bbox);null!=J.properties&&(T.properties=J.properties);return T}if(F.transform)throw Error("already quantized");if(t&&t.scale)var I=F.bbox;else{if(!(2<=(O=Math.floor(t))))throw Error("n must be â‰¥2");I=F.bbox||l(F);t=I[0];var R=I[1],
B=I[2],v=I[3],O;t={scale:[B-t?(B-t)/(O-1):1,v-R?(v-R)/(O-1):1],translate:[t,R]}}var N=V(t),A;R=F.objects;B={};for(A in R)B[A]=x(R[A]);return{type:"Topology",bbox:I,transform:t,objects:B,arcs:F.arcs.map(function(J){var T=0,z=1,ba=J.length,K,r=Array(ba);for(r[0]=N(J[0],0);++T<ba;)if((K=N(J[T],T))[0]||K[1])r[z++]=K;1===z&&(r[z++]=[0,0]);r.length=z;return r})}};k.transform=h;k.untransform=V;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[506]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa):"function"===typeof define&&define.amd?define(["exports"],f):(k="undefined"!==typeof globalThis?globalThis:k||self,f(k.d3=k.d3||{}))})(this,function(k){function f(sa,ra){return sa<ra?-1:sa>ra?1:sa>=ra?0:NaN}function h(sa){function ra(bb,Hb,zb,mb){null==zb&&(zb=0);null==mb&&(mb=bb.length);for(;zb<mb;){const Jb=zb+mb>>>1;0>Ia(bb[Jb],Hb)?zb=Jb+1:mb=Jb}return zb}let xa=sa,Ia=sa;1===sa.length&&
(xa=(bb,Hb)=>sa(bb)-Hb,Ia=l(sa));return{left:ra,center:function(bb,Hb,zb,mb){null==zb&&(zb=0);null==mb&&(mb=bb.length);mb=ra(bb,Hb,zb,mb-1);return mb>zb&&xa(bb[mb-1],Hb)>-xa(bb[mb],Hb)?mb-1:mb},right:function(bb,Hb,zb,mb){null==zb&&(zb=0);null==mb&&(mb=bb.length);for(;zb<mb;){const Jb=zb+mb>>>1;0<Ia(bb[Jb],Hb)?mb=Jb:zb=Jb+1}return zb}}}function l(sa){return(ra,xa)=>f(sa(ra),xa)}function u(sa){return null===sa?NaN:+sa}function*q(sa,ra){if(void 0===ra)for(var xa of sa)null!=xa&&(xa=+xa)>=xa&&(yield xa);
else{xa=-1;for(let Ia of sa)null!=(Ia=ra(Ia,++xa,sa))&&(Ia=+Ia)>=Ia&&(yield Ia)}}function D(sa,ra){let xa=0;if(void 0===ra)for(var Ia of sa)null!=Ia&&(Ia=+Ia)>=Ia&&++xa;else{Ia=-1;for(let bb of sa)null!=(bb=ra(bb,++Ia,sa))&&(bb=+bb)>=bb&&++xa}return xa}function U(sa){return sa.length|0}function aa(sa){return!(0<sa)}function X(sa){return"object"!==typeof sa||"length"in sa?sa:Array.from(sa)}function S(sa){return ra=>sa(...ra)}function V(sa,ra){let xa=0,Ia,bb=0,Hb=0;if(void 0===ra)for(var zb of sa)null!=
zb&&(zb=+zb)>=zb&&(Ia=zb-bb,bb+=Ia/++xa,Hb+=Ia*(zb-bb));else{zb=-1;for(let mb of sa)null!=(mb=ra(mb,++zb,sa))&&(mb=+mb)>=mb&&(Ia=mb-bb,bb+=Ia/++xa,Hb+=Ia*(mb-bb))}if(1<xa)return Hb/(xa-1)}function F(sa,ra){return(sa=V(sa,ra))?Math.sqrt(sa):sa}function t(sa,ra){let xa,Ia;if(void 0===ra)for(var bb of sa)null!=bb&&(void 0===xa?bb>=bb&&(xa=Ia=bb):(xa>bb&&(xa=bb),Ia<bb&&(Ia=bb)));else{bb=-1;for(let Hb of sa)null!=(Hb=ra(Hb,++bb,sa))&&(void 0===xa?Hb>=Hb&&(xa=Ia=Hb):(xa>Hb&&(xa=Hb),Ia<Hb&&(Ia=Hb)))}return[xa,
Ia]}function w({_intern:sa,_key:ra},xa){ra=ra(xa);return sa.has(ra)?sa.get(ra):xa}function x({_intern:sa,_key:ra},xa){ra=ra(xa);if(sa.has(ra))return sa.get(ra);sa.set(ra,xa);return xa}function I({_intern:sa,_key:ra},xa){ra=ra(xa);sa.has(ra)&&(xa=sa.get(xa),sa.delete(ra));return xa}function R(sa){return null!==sa&&"object"===typeof sa?sa.valueOf():sa}function B(sa){return sa}function v(sa,...ra){return A(sa,B,B,ra)}function O(sa,ra,...xa){return A(sa,B,ra,xa)}function N(sa){if(1!==sa.length)throw Error("duplicate key");
return sa[0]}function A(sa,ra,xa,Ia){return function mb(Hb,zb){if(zb>=Ia.length)return xa(Hb);const Jb=new Qa,Eb=Ia[zb++];let Db=-1;for(const bc of Hb){const jc=Eb(bc,++Db,Hb),Tc=Jb.get(jc);Tc?Tc.push(bc):Jb.set(jc,[bc])}for(const [bc,jc]of Jb)Jb.set(bc,mb(jc,zb));return ra(Jb)}(sa,0)}function J(sa,ra){return Array.from(ra,xa=>sa[xa])}function T(sa,...ra){if("function"!==typeof sa[Symbol.iterator])throw new TypeError("values is not iterable");sa=Array.from(sa);let [xa=f]=ra;if(1===xa.length||1<ra.length){const Ia=
Uint32Array.from(sa,(bb,Hb)=>Hb);1<ra.length?(ra=ra.map(bb=>sa.map(bb)),Ia.sort((bb,Hb)=>{for(const zb of ra){const mb=f(zb[bb],zb[Hb]);if(mb)return mb}})):(xa=sa.map(xa),Ia.sort((bb,Hb)=>f(xa[bb],xa[Hb])));return J(sa,Ia)}return sa.sort(xa)}function z(sa){return function(){return sa}}function ba(sa,ra,xa){var Ia,bb=-1,Hb;ra=+ra;sa=+sa;xa=+xa;if(sa===ra&&0<xa)return[sa];if(Ia=ra<sa){var zb=sa;sa=ra;ra=zb}if(0===(Hb=K(sa,ra,xa))||!isFinite(Hb))return[];if(0<Hb)for(xa=Math.round(sa/Hb),zb=Math.round(ra/
Hb),xa*Hb<sa&&++xa,zb*Hb>ra&&--zb,sa=Array(zb=zb-xa+1);++bb<zb;)sa[bb]=(xa+bb)*Hb;else for(Hb=-Hb,xa=Math.round(sa*Hb),zb=Math.round(ra*Hb),xa/Hb<sa&&++xa,zb/Hb>ra&&--zb,sa=Array(zb=zb-xa+1);++bb<zb;)sa[bb]=(xa+bb)/Hb;Ia&&sa.reverse();return sa}function K(sa,ra,xa){ra=(ra-sa)/Math.max(0,xa);sa=Math.floor(Math.log(ra)/Math.LN10);ra/=Math.pow(10,sa);return 0<=sa?(ra>=cb?10:ra>=Mb?5:ra>=Gb?2:1)*Math.pow(10,sa):-Math.pow(10,-sa)/(ra>=cb?10:ra>=Mb?5:ra>=Gb?2:1)}function r(sa,ra,xa){let Ia;for(;;){const bb=
K(sa,ra,xa);if(bb===Ia||0===bb||!isFinite(bb))return[sa,ra];0<bb?(sa=Math.floor(sa/bb)*bb,ra=Math.ceil(ra/bb)*bb):0>bb&&(sa=Math.ceil(sa*bb)/bb,ra=Math.floor(ra*bb)/bb);Ia=bb}}function Y(sa){return Math.ceil(Math.log(D(sa))/Math.LN2)+1}function Z(){function sa(bb){Array.isArray(bb)||(bb=Array.from(bb));var Hb,zb=bb.length,mb=Array(zb);for(Hb=0;Hb<zb;++Hb)mb[Hb]=ra(bb[Hb],Hb,bb);var Jb=xa(mb),Eb=Jb[0];Jb=Jb[1];var Db=Ia(mb,Eb,Jb);if(!Array.isArray(Db)){Hb=Jb;var bc=+Db;xa===t&&([Eb,Jb]=r(Eb,Jb,bc));
Db=ba(Eb,Jb,bc);Db[Db.length-1]>=Jb&&(Hb>=Jb&&xa===t?(Hb=K(Eb,Jb,bc),isFinite(Hb)&&(0<Hb?Jb=(Math.floor(Jb/Hb)+1)*Hb:0>Hb&&(Jb=(Math.ceil(Jb*-Hb)+1)/-Hb))):Db.pop())}for(bc=Db.length;Db[0]<=Eb;)Db.shift(),--bc;for(;Db[bc-1]>Jb;)Db.pop(),--bc;var jc=Array(bc+1);for(Hb=0;Hb<=bc;++Hb){var Tc=jc[Hb]=[];Tc.x0=0<Hb?Db[Hb-1]:Eb;Tc.x1=Hb<bc?Db[Hb]:Jb}for(Hb=0;Hb<zb;++Hb)Tc=mb[Hb],Eb<=Tc&&Tc<=Jb&&jc[ma(Db,Tc,0,bc)].push(bb[Hb]);return jc}var ra=B,xa=t,Ia=Y;sa.value=function(bb){return arguments.length?(ra=
"function"===typeof bb?bb:z(bb),sa):ra};sa.domain=function(bb){return arguments.length?(xa="function"===typeof bb?bb:z([bb[0],bb[1]]),sa):xa};sa.thresholds=function(bb){return arguments.length?(Ia="function"===typeof bb?bb:Array.isArray(bb)?z(kb.call(bb)):z(bb),sa):Ia};return sa}function E(sa,ra){let xa;if(void 0===ra)for(var Ia of sa)null!=Ia&&(xa<Ia||void 0===xa&&Ia>=Ia)&&(xa=Ia);else{Ia=-1;for(let bb of sa)null!=(bb=ra(bb,++Ia,sa))&&(xa<bb||void 0===xa&&bb>=bb)&&(xa=bb)}return xa}function C(sa,
ra){let xa;if(void 0===ra)for(var Ia of sa)null!=Ia&&(xa>Ia||void 0===xa&&Ia>=Ia)&&(xa=Ia);else{Ia=-1;for(let bb of sa)null!=(bb=ra(bb,++Ia,sa))&&(xa>bb||void 0===xa&&bb>=bb)&&(xa=bb)}return xa}function W(sa,ra,xa=0,Ia=sa.length-1,bb=f){for(;Ia>xa;){if(600<Ia-xa){var Hb=Ia-xa+1,zb=ra-xa+1,mb=Math.log(Hb),Jb=.5*Math.exp(2*mb/3);mb=.5*Math.sqrt(mb*Jb*(Hb-Jb)/Hb)*(0>zb-Hb/2?-1:1);W(sa,ra,Math.max(xa,Math.floor(ra-zb*Jb/Hb+mb)),Math.min(Ia,Math.floor(ra+(Hb-zb)*Jb/Hb+mb)),bb)}Hb=sa[ra];zb=xa;Jb=Ia;fa(sa,
xa,ra);for(0<bb(sa[Ia],Hb)&&fa(sa,xa,Ia);zb<Jb;){fa(sa,zb,Jb);++zb;for(--Jb;0>bb(sa[zb],Hb);)++zb;for(;0<bb(sa[Jb],Hb);)--Jb}0===bb(sa[xa],Hb)?fa(sa,xa,Jb):(++Jb,fa(sa,Jb,Ia));Jb<=ra&&(xa=Jb+1);ra<=Jb&&(Ia=Jb-1)}return sa}function fa(sa,ra,xa){const Ia=sa[ra];sa[ra]=sa[xa];sa[xa]=Ia}function ja(sa,ra,xa){sa=Float64Array.from(q(sa,xa));if(xa=sa.length){if(0>=(ra=+ra)||2>xa)return C(sa);if(1<=ra)return E(sa);ra*=xa-1;xa=Math.floor(ra);var Ia=E(W(sa,xa).subarray(0,xa+1));sa=C(sa.subarray(xa+1));return Ia+
(sa-Ia)*(ra-xa)}}function Ba(sa,ra){let xa,Ia=-1,bb=-1;if(void 0===ra)for(const Hb of sa)++bb,null!=Hb&&(xa<Hb||void 0===xa&&Hb>=Hb)&&(xa=Hb,Ia=bb);else for(let Hb of sa)null!=(Hb=ra(Hb,++bb,sa))&&(xa<Hb||void 0===xa&&Hb>=Hb)&&(xa=Hb,Ia=bb);return Ia}function*Ga(sa){for(const ra of sa)yield*ra}function ua(sa,ra){let xa,Ia=-1,bb=-1;if(void 0===ra)for(const Hb of sa)++bb,null!=Hb&&(xa>Hb||void 0===xa&&Hb>=Hb)&&(xa=Hb,Ia=bb);else for(let Hb of sa)null!=(Hb=ra(Hb,++bb,sa))&&(xa>Hb||void 0===xa&&Hb>=Hb)&&
(xa=Hb,Ia=bb);return Ia}function Fa(sa,ra){return[sa,ra]}function Xa(sa,ra=f){if(1===ra.length)return ua(sa,ra);let xa,Ia=-1,bb=-1;for(const Hb of sa)if(++bb,0>Ia?0===ra(Hb,Hb):0>ra(Hb,xa))xa=Hb,Ia=bb;return Ia}function Sa(sa){return function(ra,xa=0,Ia=ra.length){for(Ia-=xa=+xa;Ia;){const bb=sa()*Ia--|0,Hb=ra[Ia+xa];ra[Ia+xa]=ra[bb+xa];ra[bb+xa]=Hb}return ra}}function eb(sa){if(!(Hb=sa.length))return[];for(var ra=-1,xa=C(sa,Va),Ia=Array(xa);++ra<xa;)for(var bb=-1,Hb,zb=Ia[ra]=Array(Hb);++bb<Hb;)zb[bb]=
sa[bb][ra];return Ia}function Va(sa){return sa.length}function La(sa){return sa instanceof Set?sa:new Set(sa)}function Ra(sa,ra){sa=sa[Symbol.iterator]();const xa=new Set;for(const Ia of ra){if(xa.has(Ia))continue;let bb;for(;{value:ra,done:bb}=sa.next();){if(bb)return!1;xa.add(ra);if(Object.is(Ia,ra))break}}return!0}var la=h(f);const ma=la.right;la=la.left;const Aa=h(u).center;class Da{constructor(){this._partials=new Float64Array(32);this._n=0}add(sa){const ra=this._partials;let xa=0;for(let Ia=
0;Ia<this._n&&32>Ia;Ia++){const bb=ra[Ia],Hb=sa+bb;(sa=Math.abs(sa)<Math.abs(bb)?sa-(Hb-bb):bb-(Hb-sa))&&(ra[xa++]=sa);sa=Hb}ra[xa]=sa;this._n=xa+1;return this}valueOf(){const sa=this._partials;let ra=this._n;let xa,Ia=0;if(0<ra){for(Ia=sa[--ra];0<ra;){var bb=Ia;xa=sa[--ra];Ia=bb+xa;if(bb=xa-(Ia-bb))break}0<ra&&(0>bb&&0>sa[ra-1]||0<bb&&0<sa[ra-1])&&(xa=2*bb,bb=Ia+xa,xa==bb-Ia&&(Ia=bb))}return Ia}}class Qa extends Map{constructor(sa,ra=R){super();Object.defineProperties(this,{_intern:{value:new Map},
_key:{value:ra}});if(null!=sa)for(const [xa,Ia]of sa)this.set(xa,Ia)}get(sa){return super.get(w(this,sa))}has(sa){return super.has(w(this,sa))}set(sa,ra){return super.set(x(this,sa),ra)}delete(sa){return super.delete(I(this,sa))}}class Ea extends Set{constructor(sa,ra=R){super();Object.defineProperties(this,{_intern:{value:new Map},_key:{value:ra}});if(null!=sa)for(const xa of sa)this.add(xa)}has(sa){return super.has(w(this,sa))}add(sa){return super.add(x(this,sa))}delete(sa){return super.delete(I(this,
sa))}}var kb=Array.prototype.slice,cb=Math.sqrt(50),Mb=Math.sqrt(10),Gb=Math.sqrt(2),Wb=Sa(Math.random);k.Adder=Da;k.InternMap=Qa;k.InternSet=Ea;k.ascending=f;k.bin=Z;k.bisect=ma;k.bisectCenter=Aa;k.bisectLeft=la;k.bisectRight=ma;k.bisector=h;k.count=D;k.cross=function(...sa){const ra="function"===typeof sa[sa.length-1]&&S(sa.pop());sa=sa.map(X);const xa=sa.map(U),Ia=sa.length-1,bb=Array(Ia+1).fill(0),Hb=[];if(0>Ia||xa.some(aa))return Hb;for(;;){Hb.push(bb.map((mb,Jb)=>sa[Jb][mb]));let zb=Ia;for(;++bb[zb]===
xa[zb];){if(0===zb)return ra?Hb.map(ra):Hb;bb[zb--]=0}}};k.cumsum=function(sa,ra){var xa=0,Ia=0;return Float64Array.from(sa,void 0===ra?bb=>xa+=+bb||0:bb=>xa+=+ra(bb,Ia++,sa)||0)};k.descending=function(sa,ra){return ra<sa?-1:ra>sa?1:ra>=sa?0:NaN};k.deviation=F;k.difference=function(sa,...ra){sa=new Set(sa);for(const xa of ra)for(const Ia of xa)sa.delete(Ia);return sa};k.disjoint=function(sa,ra){ra=ra[Symbol.iterator]();const xa=new Set;for(const Ia of sa){if(xa.has(Ia))return!1;let bb;for(;({value:sa,
done:bb}=ra.next())&&!bb;){if(Object.is(Ia,sa))return!1;xa.add(sa)}}return!0};k.every=function(sa,ra){if("function"!==typeof ra)throw new TypeError("test is not a function");let xa=-1;for(const Ia of sa)if(!ra(Ia,++xa,sa))return!1;return!0};k.extent=t;k.fcumsum=function(sa,ra){const xa=new Da;let Ia=-1;return Float64Array.from(sa,void 0===ra?bb=>xa.add(+bb||0):bb=>xa.add(+ra(bb,++Ia,sa)||0))};k.filter=function(sa,ra){if("function"!==typeof ra)throw new TypeError("test is not a function");const xa=
[];let Ia=-1;for(const bb of sa)ra(bb,++Ia,sa)&&xa.push(bb);return xa};k.fsum=function(sa,ra){const xa=new Da;if(void 0===ra)for(var Ia of sa)(Ia=+Ia)&&xa.add(Ia);else{Ia=-1;for(let bb of sa)(bb=+ra(bb,++Ia,sa))&&xa.add(bb)}return+xa};k.greatest=function(sa,ra=f){let xa,Ia=!1;if(1===ra.length){let bb;for(const Hb of sa)if(sa=ra(Hb),Ia?0<f(sa,bb):0===f(sa,sa))xa=Hb,bb=sa,Ia=!0}else for(const bb of sa)if(Ia?0<ra(bb,xa):0===ra(bb,bb))xa=bb,Ia=!0;return xa};k.greatestIndex=function(sa,ra=f){if(1===ra.length)return Ba(sa,
ra);let xa,Ia=-1,bb=-1;for(const Hb of sa)if(++bb,0>Ia?0===ra(Hb,Hb):0<ra(Hb,xa))xa=Hb,Ia=bb;return Ia};k.group=v;k.groupSort=function(sa,ra,xa){return(1===ra.length?T(O(sa,ra,xa),([Ia,bb],[Hb,zb])=>f(bb,zb)||f(Ia,Hb)):T(v(sa,xa),([Ia,bb],[Hb,zb])=>ra(bb,zb)||f(Ia,Hb))).map(([Ia])=>Ia)};k.groups=function(sa,...ra){return A(sa,Array.from,B,ra)};k.histogram=Z;k.index=function(sa,...ra){return A(sa,B,N,ra)};k.indexes=function(sa,...ra){return A(sa,Array.from,N,ra)};k.intersection=function(sa,...ra){sa=
new Set(sa);ra=ra.map(La);a:for(const xa of sa)for(const Ia of ra)if(!Ia.has(xa)){sa.delete(xa);continue a}return sa};k.least=function(sa,ra=f){let xa,Ia=!1;if(1===ra.length){let bb;for(const Hb of sa)if(sa=ra(Hb),Ia?0>f(sa,bb):0===f(sa,sa))xa=Hb,bb=sa,Ia=!0}else for(const bb of sa)if(Ia?0>ra(bb,xa):0===ra(bb,bb))xa=bb,Ia=!0;return xa};k.leastIndex=Xa;k.map=function(sa,ra){if("function"!==typeof sa[Symbol.iterator])throw new TypeError("values is not iterable");if("function"!==typeof ra)throw new TypeError("mapper is not a function");
return Array.from(sa,(xa,Ia)=>ra(xa,Ia,sa))};k.max=E;k.maxIndex=Ba;k.mean=function(sa,ra){let xa=0,Ia=0;if(void 0===ra)for(var bb of sa)null!=bb&&(bb=+bb)>=bb&&(++xa,Ia+=bb);else{bb=-1;for(let Hb of sa)null!=(Hb=ra(Hb,++bb,sa))&&(Hb=+Hb)>=Hb&&(++xa,Ia+=Hb)}if(xa)return Ia/xa};k.median=function(sa,ra){return ja(sa,.5,ra)};k.merge=function(sa){return Array.from(Ga(sa))};k.min=C;k.minIndex=ua;k.nice=r;k.pairs=function(sa,ra=Fa){const xa=[];let Ia,bb=!1;for(const Hb of sa)bb&&xa.push(ra(Ia,Hb)),Ia=Hb,
bb=!0;return xa};k.permute=J;k.quantile=ja;k.quantileSorted=function(sa,ra,xa=u){if(Ia=sa.length){if(0>=(ra=+ra)||2>Ia)return+xa(sa[0],0,sa);if(1<=ra)return+xa(sa[Ia-1],Ia-1,sa);var Ia;ra*=Ia-1;Ia=Math.floor(ra);var bb=+xa(sa[Ia],Ia,sa);sa=+xa(sa[Ia+1],Ia+1,sa);return bb+(sa-bb)*(ra-Ia)}};k.quickselect=W;k.range=function(sa,ra,xa){sa=+sa;ra=+ra;xa=2>(bb=arguments.length)?(ra=sa,sa=0,1):3>bb?1:+xa;for(var Ia=-1,bb=Math.max(0,Math.ceil((ra-sa)/xa))|0,Hb=Array(bb);++Ia<bb;)Hb[Ia]=sa+Ia*xa;return Hb};
k.reduce=function(sa,ra,xa){if("function"!==typeof ra)throw new TypeError("reducer is not a function");const Ia=sa[Symbol.iterator]();let bb,Hb,zb=-1;if(3>arguments.length){({done:bb,value:xa}=Ia.next());if(bb)return;++zb}for(;{done:bb,value:Hb}=Ia.next(),!bb;)xa=ra(xa,Hb,++zb,sa);return xa};k.reverse=function(sa){if("function"!==typeof sa[Symbol.iterator])throw new TypeError("values is not iterable");return Array.from(sa).reverse()};k.rollup=O;k.rollups=function(sa,ra,...xa){return A(sa,Array.from,
ra,xa)};k.scan=function(sa,ra){sa=Xa(sa,ra);return 0>sa?void 0:sa};k.shuffle=Wb;k.shuffler=Sa;k.some=function(sa,ra){if("function"!==typeof ra)throw new TypeError("test is not a function");let xa=-1;for(const Ia of sa)if(ra(Ia,++xa,sa))return!0;return!1};k.sort=T;k.subset=function(sa,ra){return Ra(ra,sa)};k.sum=function(sa,ra){let xa=0;if(void 0===ra)for(var Ia of sa){if(Ia=+Ia)xa+=Ia}else{Ia=-1;for(let bb of sa)if(bb=+ra(bb,++Ia,sa))xa+=bb}return xa};k.superset=Ra;k.thresholdFreedmanDiaconis=function(sa,
ra,xa){return Math.ceil((xa-ra)/(2*(ja(sa,.75)-ja(sa,.25))*Math.pow(D(sa),-1/3)))};k.thresholdScott=function(sa,ra,xa){return Math.ceil((xa-ra)/(3.5*F(sa)*Math.pow(D(sa),-1/3)))};k.thresholdSturges=Y;k.tickIncrement=K;k.tickStep=function(sa,ra,xa){var Ia=Math.abs(ra-sa)/Math.max(0,xa);xa=Math.pow(10,Math.floor(Math.log(Ia)/Math.LN10));Ia/=xa;Ia>=cb?xa*=10:Ia>=Mb?xa*=5:Ia>=Gb&&(xa*=2);return ra<sa?-xa:xa};k.ticks=ba;k.transpose=eb;k.union=function(...sa){const ra=new Set;for(const xa of sa)for(const Ia of xa)ra.add(Ia);
return ra};k.variance=V;k.zip=function(){return eb(arguments)};Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[507]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa):"function"===typeof define&&define.amd?define(["exports"],f):(k="undefined"!==typeof globalThis?globalThis:k||self,f(k.d3=k.d3||{}))})(this,function(k){function f(R,B){if(0>(B=(R=B?R.toExponential(B-1):R.toExponential()).indexOf("e")))return null;var v=R.slice(0,B);return[1<v.length?v[0]+v.slice(2):v,+R.slice(B+1)]}function h(R){return R=f(Math.abs(R)),R?R[1]:NaN}function l(R,B){return function(v,
O){for(var N=v.length,A=[],J=0,T=R[0],z=0;0<N&&0<T;){z+T+1>O&&(T=Math.max(1,O-z));A.push(v.substring(N-=T,N+T));if((z+=T+1)>O)break;T=R[J=(J+1)%R.length]}return A.reverse().join(B)}}function u(R){return function(B){return B.replace(/[0-9]/g,function(v){return R[+v]})}}function q(R){if(!(B=V.exec(R)))throw Error("invalid format: "+R);var B;return new D({fill:B[1],align:B[2],sign:B[3],symbol:B[4],zero:B[5],width:B[6],comma:B[7],precision:B[8]&&B[8].slice(1),trim:B[9],type:B[10]})}function D(R){this.fill=
void 0===R.fill?" ":R.fill+"";this.align=void 0===R.align?"\x3e":R.align+"";this.sign=void 0===R.sign?"-":R.sign+"";this.symbol=void 0===R.symbol?"":R.symbol+"";this.zero=!!R.zero;this.width=void 0===R.width?void 0:+R.width;this.comma=!!R.comma;this.precision=void 0===R.precision?void 0:+R.precision;this.trim=!!R.trim;this.type=void 0===R.type?"":R.type+""}function U(R,B){B=f(R,B);if(!B)return R+"";R=B[0];B=B[1];return 0>B?"0."+Array(-B).join("0")+R:R.length>B+1?R.slice(0,B+1)+"."+R.slice(B+1):R+
Array(B-R.length+2).join("0")}function aa(R){return R}function X(R){function B(K){function r(Va){var La=Fa,Ra=Xa,la,ma;if("c"===ua)Ra=Sa(Va)+Ra,Va="";else{Va=+Va;var Aa=0>Va||0>1/Va;Va=isNaN(Va)?ba:Sa(Math.abs(Va),Ba);if(Ga){var Da=Va.length,Qa=1,Ea=-1;a:for(;Qa<Da;++Qa)switch(Va[Qa]){case ".":Ea=la=Qa;break;case "0":0===Ea&&(Ea=Qa);la=Qa;break;default:if(!+Va[Qa])break a;0<Ea&&(Ea=0)}Va=0<Ea?Va.slice(0,Ea)+Va.slice(la+1):Va}Aa&&0===+Va&&"+"!==E&&(Aa=!1);La=(Aa?"("===E?E:z:"-"===E||"("===E?"":E)+
La;Ra=("s"===ua?x[8+F/3]:"")+Ra+(Aa&&"("===E?")":"");if(eb)for(Aa=-1,la=Va.length;++Aa<la;)if(ma=Va.charCodeAt(Aa),48>ma||57<ma){Ra=(46===ma?A+Va.slice(Aa+1):Va.slice(Aa))+Ra;Va=Va.slice(0,Aa);break}}ja&&!W&&(Va=v(Va,Infinity));ma=La.length+Va.length+Ra.length;Aa=ma<fa?Array(fa-ma+1).join(Y):"";ja&&W&&(Va=v(Aa+Va,Aa.length?fa-Ra.length:Infinity),Aa="");switch(Z){case "\x3c":Va=La+Va+Ra+Aa;break;case "\x3d":Va=La+Aa+Va+Ra;break;case "^":Va=Aa.slice(0,ma=Aa.length>>1)+La+Va+Ra+Aa.slice(ma);break;default:Va=
Aa+La+Va+Ra}return J(Va)}K=q(K);var Y=K.fill,Z=K.align,E=K.sign,C=K.symbol,W=K.zero,fa=K.width,ja=K.comma,Ba=K.precision,Ga=K.trim,ua=K.type;"n"===ua?(ja=!0,ua="g"):t[ua]||(void 0===Ba&&(Ba=12),Ga=!0,ua="g");if(W||"0"===Y&&"\x3d"===Z)W=!0,Y="0",Z="\x3d";var Fa="$"===C?O:"#"===C&&/[boxX]/.test(ua)?"0"+ua.toLowerCase():"",Xa="$"===C?N:/[%p]/.test(ua)?T:"",Sa=t[ua],eb=/[defgprs%]/.test(ua);Ba=void 0===Ba?6:/[gprs]/.test(ua)?Math.max(1,Math.min(21,Ba)):Math.max(0,Math.min(20,Ba));r.toString=function(){return K+
""};return r}var v=void 0===R.grouping||void 0===R.thousands?aa:l(w.call(R.grouping,Number),R.thousands+""),O=void 0===R.currency?"":R.currency[0]+"",N=void 0===R.currency?"":R.currency[1]+"",A=void 0===R.decimal?".":R.decimal+"",J=void 0===R.numerals?aa:u(w.call(R.numerals,String)),T=void 0===R.percent?"%":R.percent+"",z=void 0===R.minus?"âˆ’":R.minus+"",ba=void 0===R.nan?"NaN":R.nan+"";return{format:B,formatPrefix:function(K,r){var Y=B((K=q(K),K.type="f",K));K=3*Math.max(-8,Math.min(8,Math.floor(h(r)/
3)));var Z=Math.pow(10,-K),E=x[8+K/3];return function(C){return Y(Z*C)+E}}}}function S(R){I=X(R);k.format=I.format;k.formatPrefix=I.formatPrefix;return I}var V=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;q.prototype=D.prototype;D.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,this.width|0))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,this.precision|0))+(this.trim?
"~":"")+this.type};var F,t={"%":(R,B)=>(100*R).toFixed(B),b:R=>Math.round(R).toString(2),c:R=>R+"",d:function(R){return 1E21<=Math.abs(R=Math.round(R))?R.toLocaleString("en").replace(/,/g,""):R.toString(10)},e:(R,B)=>R.toExponential(B),f:(R,B)=>R.toFixed(B),g:(R,B)=>R.toPrecision(B),o:R=>Math.round(R).toString(8),p:(R,B)=>U(100*R,B),r:U,s:function(R,B){var v=f(R,B);if(!v)return R+"";var O=v[0];v=v[1];v=v-(F=3*Math.max(-8,Math.min(8,Math.floor(v/3))))+1;var N=O.length;return v===N?O:v>N?O+Array(v-
N+1).join("0"):0<v?O.slice(0,v)+"."+O.slice(v):"0."+Array(1-v).join("0")+f(R,Math.max(0,B+v-1))[0]},X:R=>Math.round(R).toString(16).toUpperCase(),x:R=>Math.round(R).toString(16)},w=Array.prototype.map,x="y z a f p n Âµ m  k M G T P E Z Y".split(" "),I;S({thousands:",",grouping:[3],currency:["$",""]});k.FormatSpecifier=D;k.formatDefaultLocale=S;k.formatLocale=X;k.formatSpecifier=q;k.precisionFixed=function(R){return Math.max(0,-h(Math.abs(R)))};k.precisionPrefix=function(R,B){return Math.max(0,3*Math.max(-8,
Math.min(8,Math.floor(h(B)/3)))-h(Math.abs(R)))};k.precisionRound=function(R,B){R=Math.abs(R);B=Math.abs(B)-R;return Math.max(0,h(B)-h(R))+1};Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[508]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(506)):"function"===typeof define&&define.amd?define(["exports","d3-array"],f):(k="undefined"!==typeof globalThis?globalThis:k||self,f(k.d3=k.d3||{},k.d3))})(this,function(k,f){function h(Db,bc,jc,Tc){function ub(Rc){return Db(Rc=0===arguments.length?new Date:new Date(+Rc)),Rc}ub.floor=function(Rc){return Db(Rc=new Date(+Rc)),Rc};ub.ceil=function(Rc){return Db(Rc=new Date(Rc-1)),bc(Rc,1),
Db(Rc),Rc};ub.round=function(Rc){var Gd=ub(Rc),Kd=ub.ceil(Rc);return Rc-Gd<Kd-Rc?Gd:Kd};ub.offset=function(Rc,Gd){return bc(Rc=new Date(+Rc),null==Gd?1:Math.floor(Gd)),Rc};ub.range=function(Rc,Gd,Kd){var Vd=[],ze;Rc=ub.ceil(Rc);Kd=null==Kd?1:Math.floor(Kd);if(!(Rc<Gd&&0<Kd))return Vd;do Vd.push(ze=new Date(+Rc)),bc(Rc,Kd),Db(Rc);while(ze<Rc&&Rc<Gd);return Vd};ub.filter=function(Rc){return h(function(Gd){if(Gd>=Gd)for(;Db(Gd),!Rc(Gd);)Gd.setTime(Gd-1)},function(Gd,Kd){if(Gd>=Gd)if(0>Kd)for(;0>=++Kd;)for(;bc(Gd,
-1),!Rc(Gd););else for(;0<=--Kd;)for(;bc(Gd,1),!Rc(Gd););})};jc&&(ub.count=function(Rc,Gd){D.setTime(+Rc);U.setTime(+Gd);Db(D);Db(U);return Math.floor(jc(D,U))},ub.every=function(Rc){Rc=Math.floor(Rc);return isFinite(Rc)&&0<Rc?1<Rc?ub.filter(Tc?function(Gd){return 0===Tc(Gd)%Rc}:function(Gd){return 0===ub.count(0,Gd)%Rc}):ub:null});return ub}function l(Db){return h(function(bc){bc.setDate(bc.getDate()-(bc.getDay()+7-Db)%7);bc.setHours(0,0,0,0)},function(bc,jc){bc.setDate(bc.getDate()+7*jc)},function(bc,
jc){return(jc-bc-6E4*(jc.getTimezoneOffset()-bc.getTimezoneOffset()))/S})}function u(Db){return h(function(bc){bc.setUTCDate(bc.getUTCDate()-(bc.getUTCDay()+7-Db)%7);bc.setUTCHours(0,0,0,0)},function(bc,jc){bc.setUTCDate(bc.getUTCDate()+7*jc)},function(bc,jc){return(jc-bc)/S})}function q(Db,bc,jc,Tc,ub,Rc){function Gd(Vd,ze,ee){const bd=Math.abs(ze-Vd)/ee,Bd=f.bisector(([,,Ee])=>Ee).right(Kd,bd);if(Bd===Kd.length)return Db.every(f.tickStep(Vd/F,ze/F,ee));if(0===Bd)return aa.every(Math.max(f.tickStep(Vd,
ze,ee),1));const [Ld,fe]=Kd[bd/Kd[Bd-1][2]<Kd[Bd][2]/bd?Bd-1:Bd];return Ld.every(fe)}const Kd=[[t,1,1E3],[t,5,5E3],[t,15,15E3],[t,30,3E4],[Rc,1,6E4],[Rc,5,3E5],[Rc,15,9E5],[Rc,30,18E5],[ub,1,36E5],[ub,3,108E5],[ub,6,216E5],[ub,12,432E5],[Tc,1,864E5],[Tc,2,1728E5],[jc,1,S],[bc,1,V],[bc,3,3*V],[Db,1,F]];return[function(Vd,ze,ee){const bd=ze<Vd;bd&&([Vd,ze]=[ze,Vd]);Vd=(ee=ee&&"function"===typeof ee.range?ee:Gd(Vd,ze,ee))?ee.range(Vd,+ze+1):[];return bd?Vd.reverse():Vd},Gd]}var D=new Date,U=new Date,
aa=h(function(){},function(Db,bc){Db.setTime(+Db+bc)},function(Db,bc){return bc-Db});aa.every=function(Db){Db=Math.floor(Db);return isFinite(Db)&&0<Db?1<Db?h(function(bc){bc.setTime(Math.floor(bc/Db)*Db)},function(bc,jc){bc.setTime(+bc+jc*Db)},function(bc,jc){return(jc-bc)/Db}):aa:null};var X=aa.range;const S=6048E5,V=2592E6,F=31536E6;var t=h(function(Db){Db.setTime(Db-Db.getMilliseconds())},function(Db,bc){Db.setTime(+Db+1E3*bc)},function(Db,bc){return(bc-Db)/1E3},function(Db){return Db.getUTCSeconds()}),
w=t.range,x=h(function(Db){Db.setTime(Db-Db.getMilliseconds()-1E3*Db.getSeconds())},function(Db,bc){Db.setTime(+Db+6E4*bc)},function(Db,bc){return(bc-Db)/6E4},function(Db){return Db.getMinutes()}),I=x.range,R=h(function(Db){Db.setTime(Db-Db.getMilliseconds()-1E3*Db.getSeconds()-6E4*Db.getMinutes())},function(Db,bc){Db.setTime(+Db+36E5*bc)},function(Db,bc){return(bc-Db)/36E5},function(Db){return Db.getHours()}),B=R.range,v=h(Db=>Db.setHours(0,0,0,0),(Db,bc)=>Db.setDate(Db.getDate()+bc),(Db,bc)=>(bc-
Db-6E4*(bc.getTimezoneOffset()-Db.getTimezoneOffset()))/864E5,Db=>Db.getDate()-1),O=v.range,N=l(0),A=l(1),J=l(2),T=l(3),z=l(4),ba=l(5),K=l(6),r=N.range,Y=A.range,Z=J.range,E=T.range,C=z.range,W=ba.range,fa=K.range,ja=h(function(Db){Db.setDate(1);Db.setHours(0,0,0,0)},function(Db,bc){Db.setMonth(Db.getMonth()+bc)},function(Db,bc){return bc.getMonth()-Db.getMonth()+12*(bc.getFullYear()-Db.getFullYear())},function(Db){return Db.getMonth()}),Ba=ja.range,Ga=h(function(Db){Db.setMonth(0,1);Db.setHours(0,
0,0,0)},function(Db,bc){Db.setFullYear(Db.getFullYear()+bc)},function(Db,bc){return bc.getFullYear()-Db.getFullYear()},function(Db){return Db.getFullYear()});Ga.every=function(Db){return isFinite(Db=Math.floor(Db))&&0<Db?h(function(bc){bc.setFullYear(Math.floor(bc.getFullYear()/Db)*Db);bc.setMonth(0,1);bc.setHours(0,0,0,0)},function(bc,jc){bc.setFullYear(bc.getFullYear()+jc*Db)}):null};var ua=Ga.range,Fa=h(function(Db){Db.setUTCSeconds(0,0)},function(Db,bc){Db.setTime(+Db+6E4*bc)},function(Db,bc){return(bc-
Db)/6E4},function(Db){return Db.getUTCMinutes()}),Xa=Fa.range,Sa=h(function(Db){Db.setUTCMinutes(0,0,0)},function(Db,bc){Db.setTime(+Db+36E5*bc)},function(Db,bc){return(bc-Db)/36E5},function(Db){return Db.getUTCHours()}),eb=Sa.range,Va=h(function(Db){Db.setUTCHours(0,0,0,0)},function(Db,bc){Db.setUTCDate(Db.getUTCDate()+bc)},function(Db,bc){return(bc-Db)/864E5},function(Db){return Db.getUTCDate()-1}),La=Va.range,Ra=u(0),la=u(1),ma=u(2),Aa=u(3),Da=u(4),Qa=u(5),Ea=u(6),kb=Ra.range,cb=la.range,Mb=ma.range,
Gb=Aa.range,Wb=Da.range,sa=Qa.range,ra=Ea.range,xa=h(function(Db){Db.setUTCDate(1);Db.setUTCHours(0,0,0,0)},function(Db,bc){Db.setUTCMonth(Db.getUTCMonth()+bc)},function(Db,bc){return bc.getUTCMonth()-Db.getUTCMonth()+12*(bc.getUTCFullYear()-Db.getUTCFullYear())},function(Db){return Db.getUTCMonth()}),Ia=xa.range,bb=h(function(Db){Db.setUTCMonth(0,1);Db.setUTCHours(0,0,0,0)},function(Db,bc){Db.setUTCFullYear(Db.getUTCFullYear()+bc)},function(Db,bc){return bc.getUTCFullYear()-Db.getUTCFullYear()},
function(Db){return Db.getUTCFullYear()});bb.every=function(Db){return isFinite(Db=Math.floor(Db))&&0<Db?h(function(bc){bc.setUTCFullYear(Math.floor(bc.getUTCFullYear()/Db)*Db);bc.setUTCMonth(0,1);bc.setUTCHours(0,0,0,0)},function(bc,jc){bc.setUTCFullYear(bc.getUTCFullYear()+jc*Db)}):null};var Hb=bb.range;const [zb,mb]=q(bb,xa,Ra,Va,Sa,Fa),[Jb,Eb]=q(Ga,ja,N,v,R,x);k.timeDay=v;k.timeDays=O;k.timeFriday=ba;k.timeFridays=W;k.timeHour=R;k.timeHours=B;k.timeInterval=h;k.timeMillisecond=aa;k.timeMilliseconds=
X;k.timeMinute=x;k.timeMinutes=I;k.timeMonday=A;k.timeMondays=Y;k.timeMonth=ja;k.timeMonths=Ba;k.timeSaturday=K;k.timeSaturdays=fa;k.timeSecond=t;k.timeSeconds=w;k.timeSunday=N;k.timeSundays=r;k.timeThursday=z;k.timeThursdays=C;k.timeTickInterval=Eb;k.timeTicks=Jb;k.timeTuesday=J;k.timeTuesdays=Z;k.timeWednesday=T;k.timeWednesdays=E;k.timeWeek=N;k.timeWeeks=r;k.timeYear=Ga;k.timeYears=ua;k.utcDay=Va;k.utcDays=La;k.utcFriday=Qa;k.utcFridays=sa;k.utcHour=Sa;k.utcHours=eb;k.utcMillisecond=aa;k.utcMilliseconds=
X;k.utcMinute=Fa;k.utcMinutes=Xa;k.utcMonday=la;k.utcMondays=cb;k.utcMonth=xa;k.utcMonths=Ia;k.utcSaturday=Ea;k.utcSaturdays=ra;k.utcSecond=t;k.utcSeconds=w;k.utcSunday=Ra;k.utcSundays=kb;k.utcThursday=Da;k.utcThursdays=Wb;k.utcTickInterval=mb;k.utcTicks=zb;k.utcTuesday=ma;k.utcTuesdays=Mb;k.utcWednesday=Aa;k.utcWednesdays=Gb;k.utcWeek=Ra;k.utcWeeks=kb;k.utcYear=bb;k.utcYears=Hb;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[509]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(503),da(508),da(506)):"function"===typeof define&&define.amd?define(["exports","vega-util","d3-time","d3-array"],f):(k="undefined"!==typeof globalThis?globalThis:k||self,f(k.vega={},k.vega,k.d3,k.d3))})(this,function(k,f,h,l){function u(Ga){const ua=f.array(Ga).slice(),Fa={};ua.length||f.error("Missing time unit.");ua.forEach(Xa=>{f.hasOwnProperty(R,Xa)?Fa[Xa]=1:f.error(`Invalid time unit: ${Xa}.`)});
1<(Fa.week||Fa.day?1:0)+(Fa.quarter||Fa.month||Fa.date?1:0)+(Fa.dayofyear?1:0)&&f.error(`Incompatible time units: ${Ga}`);ua.sort((Xa,Sa)=>R[Xa]-R[Sa]);return ua}function q(Ga){v.setFullYear(Ga);v.setMonth(0);v.setDate(1);v.setHours(0,0,0,0);return v}function D(Ga){return h.timeDay.count(q(Ga.getFullYear())-1,Ga)}function U(Ga){return h.timeWeek.count(q(Ga.getFullYear())-1,Ga)}function aa(Ga,ua,Fa,Xa,Sa,eb,Va){return 0<=Ga&&100>Ga?(ua=new Date(-1,ua,Fa,Xa,Sa,eb,Va),ua.setFullYear(Ga),ua):new Date(Ga,
ua,Fa,Xa,Sa,eb,Va)}function X(Ga){const ua=Date.UTC(Ga.getUTCFullYear(),0,1);return h.utcDay.count(ua-1,Ga)}function S(Ga){const ua=Date.UTC(Ga.getUTCFullYear(),0,1);return h.utcWeek.count(ua-1,Ga)}function V(Ga){v.setTime(Date.UTC(Ga,0,1));return v.getUTCDay()}function F(Ga,ua,Fa,Xa,Sa,eb,Va){return 0<=Ga&&100>Ga?(Ga=new Date(Date.UTC(-1,ua,Fa,Xa,Sa,eb,Va)),Ga.setUTCFullYear(Fa.y),Ga):new Date(Date.UTC(Ga,ua,Fa,Xa,Sa,eb,Va))}function t(Ga,ua,Fa,Xa,Sa){const eb=ua||1,Va=f.peek(Ga);ua=(kb,cb,Mb)=>
{Mb=Mb||kb;return w(Fa[Mb],Xa[Mb],kb===Va&&eb,cb)};const La=new Date;Ga=f.toSet(Ga);const Ra=Ga.year?ua("year"):f.constant(2012),la=Ga.month?ua("month"):Ga.quarter?ua("quarter"):f.zero,ma=Ga.week&&Ga.day?ua("day",1,"weekday"):Ga.week?ua("week",1):Ga.day?ua("day",1):Ga.date?ua("date",1):Ga.dayofyear?ua("dayofyear",1):f.one,Aa=Ga.hours?ua("hours"):f.zero,Da=Ga.minutes?ua("minutes"):f.zero,Qa=Ga.seconds?ua("seconds"):f.zero,Ea=Ga.milliseconds?ua("milliseconds"):f.zero;return function(kb){La.setTime(+kb);
kb=Ra(La);return Sa(kb,la(La),ma(La,kb),Aa(La),Da(La),Qa(La),Ea(La))}}function w(Ga,ua,Fa,Xa){const Sa=1>=Fa?Ga:Xa?(eb,Va)=>Xa+Fa*Math.floor((Ga(eb,Va)-Xa)/Fa):(eb,Va)=>Fa*Math.floor(Ga(eb,Va)/Fa);return ua?(eb,Va)=>ua(Sa(eb,Va),Va):Sa}function x(Ga,ua,Fa){return ua+7*Ga-(Fa+6)%7}const I="year quarter month week date day dayofyear hours minutes seconds milliseconds".split(" "),R=I.reduce((Ga,ua,Fa)=>(Ga[ua]=1+Fa,Ga),{}),B={["year"]:"%Y ",["quarter"]:"Q%q ",["month"]:"%b ",["date"]:"%d ",["week"]:"W%U ",
["day"]:"%a ",["dayofyear"]:"%j ",["hours"]:"%H:00",["minutes"]:"00:%M",["seconds"]:":%S",["milliseconds"]:".%L",["year-month"]:"%Y-%m ",["year-month-date"]:"%Y-%m-%d ",["hours-minutes"]:"%H:%M"},v=new Date,O={["year"]:Ga=>Ga.getFullYear(),["quarter"]:Ga=>Math.floor(Ga.getMonth()/3),["month"]:Ga=>Ga.getMonth(),["date"]:Ga=>Ga.getDate(),["hours"]:Ga=>Ga.getHours(),["minutes"]:Ga=>Ga.getMinutes(),["seconds"]:Ga=>Ga.getSeconds(),["milliseconds"]:Ga=>Ga.getMilliseconds(),["dayofyear"]:Ga=>D(Ga),["week"]:Ga=>
U(Ga),["weekday"]:(Ga,ua)=>x(U(Ga),Ga.getDay(),q(ua).getDay()),["day"]:(Ga,ua)=>x(1,Ga.getDay(),q(ua).getDay())},N={["quarter"]:Ga=>3*Ga,["week"]:(Ga,ua)=>x(Ga,0,q(ua).getDay())},A={["year"]:Ga=>Ga.getUTCFullYear(),["quarter"]:Ga=>Math.floor(Ga.getUTCMonth()/3),["month"]:Ga=>Ga.getUTCMonth(),["date"]:Ga=>Ga.getUTCDate(),["hours"]:Ga=>Ga.getUTCHours(),["minutes"]:Ga=>Ga.getUTCMinutes(),["seconds"]:Ga=>Ga.getUTCSeconds(),["milliseconds"]:Ga=>Ga.getUTCMilliseconds(),["dayofyear"]:Ga=>X(Ga),["week"]:Ga=>
S(Ga),["day"]:(Ga,ua)=>x(1,Ga.getUTCDay(),V(ua)),["weekday"]:(Ga,ua)=>x(S(Ga),Ga.getUTCDay(),V(ua))},J={["quarter"]:Ga=>3*Ga,["week"]:(Ga,ua)=>x(Ga,0,V(ua))},T={["year"]:h.timeYear,["quarter"]:h.timeMonth.every(3),["month"]:h.timeMonth,["week"]:h.timeWeek,["date"]:h.timeDay,["day"]:h.timeDay,["dayofyear"]:h.timeDay,["hours"]:h.timeHour,["minutes"]:h.timeMinute,["seconds"]:h.timeSecond,["milliseconds"]:h.timeMillisecond},z={["year"]:h.utcYear,["quarter"]:h.utcMonth.every(3),["month"]:h.utcMonth,["week"]:h.utcWeek,
["date"]:h.utcDay,["day"]:h.utcDay,["dayofyear"]:h.utcDay,["hours"]:h.utcHour,["minutes"]:h.utcMinute,["seconds"]:h.utcSecond,["milliseconds"]:h.utcMillisecond},ba=6048E5,K=2592E6,r=31536E6,Y="year month date hours minutes seconds milliseconds".split(" "),Z=Y.slice(0,-1),E=Z.slice(0,-1),C=E.slice(0,-1),W=C.slice(0,-1),fa=["year","month"],ja=["year"],Ba=[[Z,1,1E3],[Z,5,5E3],[Z,15,15E3],[Z,30,3E4],[E,1,6E4],[E,5,3E5],[E,15,9E5],[E,30,18E5],[C,1,36E5],[C,3,108E5],[C,6,216E5],[C,12,432E5],[W,1,864E5],
[["year","week"],1,ba],[fa,1,K],[fa,3,3*K],[ja,1,r]];k.DATE="date";k.DAY="day";k.DAYOFYEAR="dayofyear";k.HOURS="hours";k.MILLISECONDS="milliseconds";k.MINUTES="minutes";k.MONTH="month";k.QUARTER="quarter";k.SECONDS="seconds";k.TIME_UNITS=I;k.WEEK="week";k.YEAR="year";k.dayofyear=function(Ga){return D(new Date(Ga))};k.timeBin=function(Ga){var ua=Ga.extent;Ga=Ga.maxbins||40;var Fa=Math.abs(f.span(ua))/Ga;let Xa=l.bisector(Sa=>Sa[2]).right(Ba,Fa);Xa===Ba.length?(Fa=ja,ua=l.tickStep(ua[0]/r,ua[1]/r,Ga)):
Xa?(Xa=Ba[Fa/Ba[Xa-1][2]<Ba[Xa][2]/Fa?Xa-1:Xa],Fa=Xa[0],ua=Xa[1]):(Fa=Y,ua=Math.max(l.tickStep(ua[0],ua[1],Ga),1));return{units:Fa,step:ua}};k.timeFloor=function(Ga,ua){return t(Ga,ua||1,O,N,aa)};k.timeInterval=function(Ga){return T[Ga]};k.timeOffset=function(Ga,ua,Fa){return(Ga=T[Ga])?Ga.offset(ua,Fa):void 0};k.timeSequence=function(Ga,ua,Fa,Xa){return(Ga=T[Ga])?Ga.range(ua,Fa,Xa):void 0};k.timeUnitSpecifier=function(Ga,ua){ua=f.extend({},B,ua);Ga=u(Ga);const Fa=Ga.length;let Xa="",Sa,eb,Va;for(Sa=
0;Sa<Fa;)for(eb=Ga.length;eb>Sa;--eb)if(Va=Ga.slice(Sa,eb).join("-"),null!=ua[Va]){Xa+=ua[Va];Sa=eb;break}return Xa.trim()};k.timeUnits=u;k.utcFloor=function(Ga,ua){return t(Ga,ua||1,A,J,F)};k.utcInterval=function(Ga){return z[Ga]};k.utcOffset=function(Ga,ua,Fa){return(Ga=z[Ga])?Ga.offset(ua,Fa):void 0};k.utcSequence=function(Ga,ua,Fa,Xa){return(Ga=z[Ga])?Ga.range(ua,Fa,Xa):void 0};k.utcdayofyear=function(Ga){return X(new Date(Ga))};k.utcweek=function(Ga){return S(new Date(Ga))};k.week=function(Ga){return U(new Date(Ga))};
Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[510]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(508)):"function"===typeof define&&define.amd?define(["exports","d3-time"],f):(k=k||self,f(k.d3=k.d3||{},k.d3))})(this,function(k,f){function h(dd){if(0<=dd.y&&100>dd.y){var nd=new Date(-1,dd.m,dd.d,dd.H,dd.M,dd.S,dd.L);nd.setFullYear(dd.y);return nd}return new Date(dd.y,dd.m,dd.d,dd.H,dd.M,dd.S,dd.L)}function l(dd){if(0<=dd.y&&100>dd.y){var nd=new Date(Date.UTC(-1,dd.m,dd.d,dd.H,dd.M,dd.S,
dd.L));nd.setUTCFullYear(dd.y);return nd}return new Date(Date.UTC(dd.y,dd.m,dd.d,dd.H,dd.M,dd.S,dd.L))}function u(dd,nd,Dc){return{y:dd,m:nd,d:Dc,H:0,M:0,S:0,L:0}}function q(dd){function nd(hd,ge){return function($d){var cd=[],Ie=-1,Je=0,Ad=hd.length,$e,qf;for($d instanceof Date||($d=new Date(+$d));++Ie<Ad;)if(37===hd.charCodeAt(Ie)){cd.push(hd.slice(Je,Ie));null!=(Je=ze[$e=hd.charAt(++Ie)])?$e=hd.charAt(++Ie):Je="e"===$e?" ":"0";if(qf=ge[$e])$e=qf($d,Je);cd.push($e);Je=Ie+1}cd.push(hd.slice(Je,Ie));
return cd.join("")}}function Dc(hd,ge){return function($d){var cd=u(1900,void 0,1);if(jd(cd,hd,$d+="",0)!=$d.length)return null;if("Q"in cd)return new Date(cd.Q);if("s"in cd)return new Date(1E3*cd.s+("L"in cd?cd.L:0));!ge||"Z"in cd||(cd.Z=0);"p"in cd&&(cd.H=cd.H%12+12*cd.p);void 0===cd.m&&(cd.m="q"in cd?cd.q:0);if("V"in cd){if(1>cd.V||53<cd.V)return null;"w"in cd||(cd.w=1);if("Z"in cd){$d=l(u(cd.y,0,1));var Ie=$d.getUTCDay();$d=4<Ie||0===Ie?f.utcMonday.ceil($d):f.utcMonday($d);$d=f.utcDay.offset($d,
7*(cd.V-1));cd.y=$d.getUTCFullYear();cd.m=$d.getUTCMonth();cd.d=$d.getUTCDate()+(cd.w+6)%7}else $d=h(u(cd.y,0,1)),Ie=$d.getDay(),$d=4<Ie||0===Ie?f.timeMonday.ceil($d):f.timeMonday($d),$d=f.timeDay.offset($d,7*(cd.V-1)),cd.y=$d.getFullYear(),cd.m=$d.getMonth(),cd.d=$d.getDate()+(cd.w+6)%7}else if("W"in cd||"U"in cd)"w"in cd||(cd.w="u"in cd?cd.u%7:"W"in cd?1:0),Ie="Z"in cd?l(u(cd.y,0,1)).getUTCDay():h(u(cd.y,0,1)).getDay(),cd.m=0,cd.d="W"in cd?(cd.w+6)%7+7*cd.W-(Ie+5)%7:cd.w+7*cd.U-(Ie+6)%7;return"Z"in
cd?(cd.H+=cd.Z/100|0,cd.M+=cd.Z%100,l(cd)):h(cd)}}function jd(hd,ge,$d,cd){for(var Ie=0,Je=ge.length,Ad=$d.length,$e;Ie<Je;){if(cd>=Ad)return-1;$e=ge.charCodeAt(Ie++);if(37===$e){if($e=ge.charAt(Ie++),$e=od[$e in ze?ge.charAt(Ie++):$e],!$e||0>(cd=$e(hd,$d,cd)))return-1}else if($e!=$d.charCodeAt(cd++))return-1}return cd}var Qd=dd.dateTime,ae=dd.date,te=dd.time,Bb=dd.periods,$b=dd.days,Gc=dd.shortDays,Jc=dd.months,ud=dd.shortMonths,Zc=aa(Bb),xd=X(Bb),Sd=aa($b),ie=X($b),Be=aa(Gc),uc=X(Gc),Oc=aa(Jc),
Nd=X(Jc),Od=aa(ud),pe=X(ud),ye={a:function(hd){return Gc[hd.getDay()]},A:function(hd){return $b[hd.getDay()]},b:function(hd){return ud[hd.getMonth()]},B:function(hd){return Jc[hd.getMonth()]},c:null,d:Z,e:Z,f:ja,g:la,G:Aa,H:E,I:C,j:W,L:fa,m:Ba,M:Ga,p:function(hd){return Bb[+(12<=hd.getHours())]},q:function(hd){return 1+~~(hd.getMonth()/3)},Q:ub,s:Rc,S:ua,u:Fa,U:Xa,V:eb,w:Va,W:La,x:null,X:null,y:Ra,Y:ma,Z:Da,"%":Tc},me={a:function(hd){return Gc[hd.getUTCDay()]},A:function(hd){return $b[hd.getUTCDay()]},
b:function(hd){return ud[hd.getUTCMonth()]},B:function(hd){return Jc[hd.getUTCMonth()]},c:null,d:Qa,e:Qa,f:Gb,g:Eb,G:bc,H:Ea,I:kb,j:cb,L:Mb,m:Wb,M:sa,p:function(hd){return Bb[+(12<=hd.getUTCHours())]},q:function(hd){return 1+~~(hd.getUTCMonth()/3)},Q:ub,s:Rc,S:ra,u:xa,U:Ia,V:Hb,w:zb,W:mb,x:null,X:null,y:Jb,Y:Db,Z:jc,"%":Tc},od={a:function(hd,ge,$d){return(ge=Be.exec(ge.slice($d)))?(hd.w=uc.get(ge[0].toLowerCase()),$d+ge[0].length):-1},A:function(hd,ge,$d){return(ge=Sd.exec(ge.slice($d)))?(hd.w=ie.get(ge[0].toLowerCase()),
$d+ge[0].length):-1},b:function(hd,ge,$d){return(ge=Od.exec(ge.slice($d)))?(hd.m=pe.get(ge[0].toLowerCase()),$d+ge[0].length):-1},B:function(hd,ge,$d){return(ge=Oc.exec(ge.slice($d)))?(hd.m=Nd.get(ge[0].toLowerCase()),$d+ge[0].length):-1},c:function(hd,ge,$d){return jd(hd,Qd,ge,$d)},d:O,e:O,f:ba,g:I,G:x,H:A,I:A,j:N,L:z,m:v,M:J,p:function(hd,ge,$d){return(ge=Zc.exec(ge.slice($d)))?(hd.p=xd.get(ge[0].toLowerCase()),$d+ge[0].length):-1},q:B,Q:r,s:Y,S:T,u:V,U:F,V:t,w:S,W:w,x:function(hd,ge,$d){return jd(hd,
ae,ge,$d)},X:function(hd,ge,$d){return jd(hd,te,ge,$d)},y:I,Y:x,Z:R,"%":K};ye.x=nd(ae,ye);ye.X=nd(te,ye);ye.c=nd(Qd,ye);me.x=nd(ae,me);me.X=nd(te,me);me.c=nd(Qd,me);return{format:function(hd){var ge=nd(hd+="",ye);ge.toString=function(){return hd};return ge},parse:function(hd){var ge=Dc(hd+="",!1);ge.toString=function(){return hd};return ge},utcFormat:function(hd){var ge=nd(hd+="",me);ge.toString=function(){return hd};return ge},utcParse:function(hd){var ge=Dc(hd+="",!0);ge.toString=function(){return hd};
return ge}}}function D(dd,nd,Dc){var jd=0>dd?"-":"";dd=(jd?-dd:dd)+"";var Qd=dd.length;return jd+(Qd<Dc?Array(Dc-Qd+1).join(nd)+dd:dd)}function U(dd){return dd.replace(Bd,"\\$\x26")}function aa(dd){return new RegExp("^(?:"+dd.map(U).join("|")+")","i")}function X(dd){return new Map(dd.map((nd,Dc)=>[nd.toLowerCase(),Dc]))}function S(dd,nd,Dc){return(nd=ee.exec(nd.slice(Dc,Dc+1)))?(dd.w=+nd[0],Dc+nd[0].length):-1}function V(dd,nd,Dc){return(nd=ee.exec(nd.slice(Dc,Dc+1)))?(dd.u=+nd[0],Dc+nd[0].length):
-1}function F(dd,nd,Dc){return(nd=ee.exec(nd.slice(Dc,Dc+2)))?(dd.U=+nd[0],Dc+nd[0].length):-1}function t(dd,nd,Dc){return(nd=ee.exec(nd.slice(Dc,Dc+2)))?(dd.V=+nd[0],Dc+nd[0].length):-1}function w(dd,nd,Dc){return(nd=ee.exec(nd.slice(Dc,Dc+2)))?(dd.W=+nd[0],Dc+nd[0].length):-1}function x(dd,nd,Dc){return(nd=ee.exec(nd.slice(Dc,Dc+4)))?(dd.y=+nd[0],Dc+nd[0].length):-1}function I(dd,nd,Dc){return(nd=ee.exec(nd.slice(Dc,Dc+2)))?(dd.y=+nd[0]+(68<+nd[0]?1900:2E3),Dc+nd[0].length):-1}function R(dd,nd,
Dc){return(nd=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(nd.slice(Dc,Dc+6)))?(dd.Z=nd[1]?0:-(nd[2]+(nd[3]||"00")),Dc+nd[0].length):-1}function B(dd,nd,Dc){return(nd=ee.exec(nd.slice(Dc,Dc+1)))?(dd.q=3*nd[0]-3,Dc+nd[0].length):-1}function v(dd,nd,Dc){return(nd=ee.exec(nd.slice(Dc,Dc+2)))?(dd.m=nd[0]-1,Dc+nd[0].length):-1}function O(dd,nd,Dc){return(nd=ee.exec(nd.slice(Dc,Dc+2)))?(dd.d=+nd[0],Dc+nd[0].length):-1}function N(dd,nd,Dc){return(nd=ee.exec(nd.slice(Dc,Dc+3)))?(dd.m=0,dd.d=+nd[0],Dc+nd[0].length):
-1}function A(dd,nd,Dc){return(nd=ee.exec(nd.slice(Dc,Dc+2)))?(dd.H=+nd[0],Dc+nd[0].length):-1}function J(dd,nd,Dc){return(nd=ee.exec(nd.slice(Dc,Dc+2)))?(dd.M=+nd[0],Dc+nd[0].length):-1}function T(dd,nd,Dc){return(nd=ee.exec(nd.slice(Dc,Dc+2)))?(dd.S=+nd[0],Dc+nd[0].length):-1}function z(dd,nd,Dc){return(nd=ee.exec(nd.slice(Dc,Dc+3)))?(dd.L=+nd[0],Dc+nd[0].length):-1}function ba(dd,nd,Dc){return(nd=ee.exec(nd.slice(Dc,Dc+6)))?(dd.L=Math.floor(nd[0]/1E3),Dc+nd[0].length):-1}function K(dd,nd,Dc){return(dd=
bd.exec(nd.slice(Dc,Dc+1)))?Dc+dd[0].length:-1}function r(dd,nd,Dc){return(nd=ee.exec(nd.slice(Dc)))?(dd.Q=+nd[0],Dc+nd[0].length):-1}function Y(dd,nd,Dc){return(nd=ee.exec(nd.slice(Dc)))?(dd.s=+nd[0],Dc+nd[0].length):-1}function Z(dd,nd){return D(dd.getDate(),nd,2)}function E(dd,nd){return D(dd.getHours(),nd,2)}function C(dd,nd){return D(dd.getHours()%12||12,nd,2)}function W(dd,nd){return D(1+f.timeDay.count(f.timeYear(dd),dd),nd,3)}function fa(dd,nd){return D(dd.getMilliseconds(),nd,3)}function ja(dd,
nd){return fa(dd,nd)+"000"}function Ba(dd,nd){return D(dd.getMonth()+1,nd,2)}function Ga(dd,nd){return D(dd.getMinutes(),nd,2)}function ua(dd,nd){return D(dd.getSeconds(),nd,2)}function Fa(dd){dd=dd.getDay();return 0===dd?7:dd}function Xa(dd,nd){return D(f.timeSunday.count(f.timeYear(dd)-1,dd),nd,2)}function Sa(dd){var nd=dd.getDay();return 4<=nd||0===nd?f.timeThursday(dd):f.timeThursday.ceil(dd)}function eb(dd,nd){dd=Sa(dd);return D(f.timeThursday.count(f.timeYear(dd),dd)+(4===f.timeYear(dd).getDay()),
nd,2)}function Va(dd){return dd.getDay()}function La(dd,nd){return D(f.timeMonday.count(f.timeYear(dd)-1,dd),nd,2)}function Ra(dd,nd){return D(dd.getFullYear()%100,nd,2)}function la(dd,nd){dd=Sa(dd);return D(dd.getFullYear()%100,nd,2)}function ma(dd,nd){return D(dd.getFullYear()%1E4,nd,4)}function Aa(dd,nd){var Dc=dd.getDay();dd=4<=Dc||0===Dc?f.timeThursday(dd):f.timeThursday.ceil(dd);return D(dd.getFullYear()%1E4,nd,4)}function Da(dd){dd=dd.getTimezoneOffset();return(0<dd?"-":(dd*=-1,"+"))+D(dd/
60|0,"0",2)+D(dd%60,"0",2)}function Qa(dd,nd){return D(dd.getUTCDate(),nd,2)}function Ea(dd,nd){return D(dd.getUTCHours(),nd,2)}function kb(dd,nd){return D(dd.getUTCHours()%12||12,nd,2)}function cb(dd,nd){return D(1+f.utcDay.count(f.utcYear(dd),dd),nd,3)}function Mb(dd,nd){return D(dd.getUTCMilliseconds(),nd,3)}function Gb(dd,nd){return Mb(dd,nd)+"000"}function Wb(dd,nd){return D(dd.getUTCMonth()+1,nd,2)}function sa(dd,nd){return D(dd.getUTCMinutes(),nd,2)}function ra(dd,nd){return D(dd.getUTCSeconds(),
nd,2)}function xa(dd){dd=dd.getUTCDay();return 0===dd?7:dd}function Ia(dd,nd){return D(f.utcSunday.count(f.utcYear(dd)-1,dd),nd,2)}function bb(dd){var nd=dd.getUTCDay();return 4<=nd||0===nd?f.utcThursday(dd):f.utcThursday.ceil(dd)}function Hb(dd,nd){dd=bb(dd);return D(f.utcThursday.count(f.utcYear(dd),dd)+(4===f.utcYear(dd).getUTCDay()),nd,2)}function zb(dd){return dd.getUTCDay()}function mb(dd,nd){return D(f.utcMonday.count(f.utcYear(dd)-1,dd),nd,2)}function Jb(dd,nd){return D(dd.getUTCFullYear()%
100,nd,2)}function Eb(dd,nd){dd=bb(dd);return D(dd.getUTCFullYear()%100,nd,2)}function Db(dd,nd){return D(dd.getUTCFullYear()%1E4,nd,4)}function bc(dd,nd){var Dc=dd.getUTCDay();dd=4<=Dc||0===Dc?f.utcThursday(dd):f.utcThursday.ceil(dd);return D(dd.getUTCFullYear()%1E4,nd,4)}function jc(){return"+0000"}function Tc(){return"%"}function ub(dd){return+dd}function Rc(dd){return Math.floor(+dd/1E3)}function Gd(dd){Ld=q(dd);k.timeFormat=Ld.format;k.timeParse=Ld.parse;k.utcFormat=Ld.utcFormat;k.utcParse=Ld.utcParse;
return Ld}function Kd(dd){return dd.toISOString()}function Vd(dd){dd=new Date(dd);return isNaN(dd)?null:dd}var ze={"-":"",_:" ",0:"0"},ee=/^\s*\d+/,bd=/^%/,Bd=/[\\^$*+?|[\]().{}]/g,Ld;Gd({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),shortDays:"Sun Mon Tue Wed Thu Fri Sat".split(" "),months:"January February March April May June July August September October November December".split(" "),shortMonths:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" ")});
var fe=Date.prototype.toISOString?Kd:k.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),Ee=+new Date("2000-01-01T00:00:00.000Z")?Vd:k.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");k.isoFormat=fe;k.isoParse=Ee;k.timeFormatDefaultLocale=Gd;k.timeFormatLocale=q;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[511]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(506),da(507),da(509),da(503),da(510)):"function"===typeof define&&define.amd?define("exports d3-array d3-format vega-time vega-util d3-time-format".split(" "),f):(k="undefined"!==typeof globalThis?globalThis:k||self,f(k.vega={},k.d3,k.d3,k.vega,k.vega,k.d3))})(this,function(k,f,h,l,u,q){function D(O){const N={};return A=>N[A]||(N[A]=O(A))}function U(O,N){return A=>{A=O(A);const J=A.indexOf(N);
if(0>J)return A;a:{var T=A.lastIndexOf("e");if(!(0<T)){for(T=A.length;--T>J;){var z=A.charCodeAt(T);if(48<=z&&57>=z){T+=1;break a}}T=void 0}}for(z=T<A.length?A.slice(T):"";--T>J;)if("0"!==A[T]){++T;break}return A.slice(0,T)+z}}function aa(O){const N=D(O.format),A=O.formatPrefix;return{format:N,formatPrefix:A,formatFloat(J){J=h.formatSpecifier(J||",");if(null==J.precision){J.precision=12;switch(J.type){case "%":J.precision-=2;break;case "e":--J.precision}return U(N(J),N(".1f")(1)[1])}return N(J)},
formatSpan(J,T,z,ba){ba=h.formatSpecifier(null==ba?",f":ba);z=f.tickStep(J,T,z);J=Math.max(Math.abs(J),Math.abs(T));if(null==ba.precision)switch(ba.type){case "s":return isNaN(T=h.precisionPrefix(z,J))||(ba.precision=T),A(ba,J);case "":case "e":case "g":case "p":case "r":isNaN(T=h.precisionRound(z,J))||(ba.precision=T-("e"===ba.type));break;case "f":case "%":isNaN(T=h.precisionFixed(z))||(ba.precision=T-2*("%"===ba.type))}return N(ba)}}}function X(){return B=aa({format:h.format,formatPrefix:h.formatPrefix})}
function S(O){return aa(h.formatLocale(O))}function V(O){return arguments.length?B=S(O):B}function F(O,N,A){A=A||{};u.isObject(A)||u.error(`Invalid time multi-format specifier: ${A}`);const J=N(l.SECONDS),T=N(l.MINUTES),z=N(l.HOURS),ba=N(l.DATE),K=N(l.WEEK),r=N(l.MONTH),Y=N(l.QUARTER),Z=N(l.YEAR),E=O(A[l.MILLISECONDS]||".%L"),C=O(A[l.SECONDS]||":%S"),W=O(A[l.MINUTES]||"%I:%M"),fa=O(A[l.HOURS]||"%I %p"),ja=O(A[l.DATE]||A[l.DAY]||"%a %d"),Ba=O(A[l.WEEK]||"%b %d"),Ga=O(A[l.MONTH]||"%B"),ua=O(A[l.QUARTER]||
"%B"),Fa=O(A[l.YEAR]||"%Y");return Xa=>(J(Xa)<Xa?E:T(Xa)<Xa?C:z(Xa)<Xa?W:ba(Xa)<Xa?fa:r(Xa)<Xa?K(Xa)<Xa?ja:Ba:Z(Xa)<Xa?Y(Xa)<Xa?Ga:ua:Fa)(Xa)}function t(O){const N=D(O.format),A=D(O.utcFormat);return{timeFormat:J=>u.isString(J)?N(J):F(N,l.timeInterval,J),utcFormat:J=>u.isString(J)?A(J):F(A,l.utcInterval,J),timeParse:D(O.parse),utcParse:D(O.utcParse)}}function w(){return v=t({format:q.timeFormat,parse:q.timeParse,utcFormat:q.utcFormat,utcParse:q.utcParse})}function x(O){return t(q.timeFormatLocale(O))}
function I(O){return arguments.length?v=x(O):v}function R(O,N){var A=arguments.length;A&&2!==A&&u.error("defaultLocale expects either zero or two arguments.");if(A){A=V(O);var J=I(N);A=u.extend({},A,J)}else A=V(),J=I(),A=u.extend({},A,J);return A}let B;X();let v;w();k.defaultLocale=R;k.locale=function(O,N){O=O?S(O):V();N=N?x(N):I();return u.extend({},O,N)};k.numberFormatDefaultLocale=V;k.numberFormatLocale=S;k.resetDefaultLocale=function(){X();w();return R()};k.resetNumberFormatDefaultLocale=X;k.resetTimeFormatDefaultLocale=
w;k.timeFormatDefaultLocale=I;k.timeFormatLocale=x;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[512]=function(Pa,da,gb,oa){function k(u){var q=u.length;if(0<q%4)throw Error("Invalid string. Length must be a multiple of 4");u=u.indexOf("\x3d");-1===u&&(u=q);return[u,u===q?0:4-u%4]}oa.byteLength=function(u){u=k(u);var q=u[1];return 3*(u[0]+q)/4-q};oa.toByteArray=function(u){var q=k(u);var D=q[0];q=q[1];var U=new l(3*(D+q)/4-q),aa=0,X=0<q?D-4:D,S;for(S=0;S<X;S+=4)D=h[u.charCodeAt(S)]<<18|h[u.charCodeAt(S+1)]<<12|h[u.charCodeAt(S+2)]<<6|h[u.charCodeAt(S+3)],U[aa++]=D>>16&255,U[aa++]=
D>>8&255,U[aa++]=D&255;2===q&&(D=h[u.charCodeAt(S)]<<2|h[u.charCodeAt(S+1)]>>4,U[aa++]=D&255);1===q&&(D=h[u.charCodeAt(S)]<<10|h[u.charCodeAt(S+1)]<<4|h[u.charCodeAt(S+2)]>>2,U[aa++]=D>>8&255,U[aa++]=D&255);return U};oa.fromByteArray=function(u){for(var q=u.length,D=q%3,U=[],aa=0,X=q-D;aa<X;aa+=16383){for(var S=U,V=S.push,F,t=u,w=aa+16383>X?X:aa+16383,x=[],I=aa;I<w;I+=3)F=(t[I]<<16&16711680)+(t[I+1]<<8&65280)+(t[I+2]&255),x.push(f[F>>18&63]+f[F>>12&63]+f[F>>6&63]+f[F&63]);F=x.join("");V.call(S,F)}1===
D?(u=u[q-1],U.push(f[u>>2]+f[u<<4&63]+"\x3d\x3d")):2===D&&(u=(u[q-2]<<8)+u[q-1],U.push(f[u>>10]+f[u>>4&63]+f[u<<2&63]+"\x3d"));return U.join("")};var f=[],h=[],l="undefined"!==typeof Uint8Array?Uint8Array:Array;for(Pa=0;64>Pa;++Pa)f[Pa]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[Pa],h["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(Pa)]=Pa;h[45]=62;h[95]=63};
shadow$provide[513]=function(Pa,da,gb,oa){oa.read=function(k,f,h,l,u){var q=8*u-l-1;var D=(1<<q)-1,U=D>>1,aa=-7;u=h?u-1:0;var X=h?-1:1,S=k[f+u];u+=X;h=S&(1<<-aa)-1;S>>=-aa;for(aa+=q;0<aa;h=256*h+k[f+u],u+=X,aa-=8);q=h&(1<<-aa)-1;h>>=-aa;for(aa+=l;0<aa;q=256*q+k[f+u],u+=X,aa-=8);if(0===h)h=1-U;else{if(h===D)return q?NaN:Infinity*(S?-1:1);q+=Math.pow(2,l);h-=U}return(S?-1:1)*q*Math.pow(2,h-l)};oa.write=function(k,f,h,l,u,q){var D,U=8*q-u-1,aa=(1<<U)-1,X=aa>>1,S=23===u?Math.pow(2,-24)-Math.pow(2,-77):
0;q=l?0:q-1;var V=l?1:-1,F=0>f||0===f&&0>1/f?1:0;f=Math.abs(f);isNaN(f)||Infinity===f?(f=isNaN(f)?1:0,l=aa):(l=Math.floor(Math.log(f)/Math.LN2),1>f*(D=Math.pow(2,-l))&&(l--,D*=2),f=1<=l+X?f+S/D:f+S*Math.pow(2,1-X),2<=f*D&&(l++,D/=2),l+X>=aa?(f=0,l=aa):1<=l+X?(f=(f*D-1)*Math.pow(2,u),l+=X):(f=f*Math.pow(2,X-1)*Math.pow(2,u),l=0));for(;8<=u;k[h+q]=f&255,q+=V,f/=256,u-=8);l=l<<u|f;for(U+=u;0<U;k[h+q]=l&255,q+=V,l/=256,U-=8);k[h+q-V]|=128*F}};
shadow$provide[514]=function(Pa,da,gb,oa){var k={}.toString;gb.exports=Array.isArray||function(f){return"[object Array]"==k.call(f)}};
shadow$provide[515]=function(Pa,da,gb,oa){function k(){try{var E=new Uint8Array(1);E.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}};return 42===E.foo()&&"function"===typeof E.subarray&&0===E.subarray(1,1).byteLength}catch(C){return!1}}function f(E,C){if((h.TYPED_ARRAY_SUPPORT?2147483647:1073741823)<C)throw new RangeError("Invalid typed array length");h.TYPED_ARRAY_SUPPORT?(E=new Uint8Array(C),E.__proto__=h.prototype):(null===E&&(E=new h(C)),E.length=C);return E}function h(E,
C,W){if(!(h.TYPED_ARRAY_SUPPORT||this instanceof h))return new h(E,C,W);if("number"===typeof E){if("string"===typeof C)throw Error("If encoding is specified then the first argument must be a string");return q(this,E)}return l(this,E,C,W)}function l(E,C,W,fa){if("number"===typeof C)throw new TypeError('"value" argument must not be a number');if("undefined"!==typeof ArrayBuffer&&C instanceof ArrayBuffer){C.byteLength;if(0>W||C.byteLength<W)throw new RangeError("'offset' is out of bounds");if(C.byteLength<
W+(fa||0))throw new RangeError("'length' is out of bounds");C=void 0===W&&void 0===fa?new Uint8Array(C):void 0===fa?new Uint8Array(C,W):new Uint8Array(C,W,fa);h.TYPED_ARRAY_SUPPORT?(E=C,E.__proto__=h.prototype):E=D(E,C);return E}if("string"===typeof C){fa=E;E=W;if("string"!==typeof E||""===E)E="utf8";if(!h.isEncoding(E))throw new TypeError('"encoding" must be a valid string encoding');W=X(C,E)|0;fa=f(fa,W);C=fa.write(C,E);C!==W&&(fa=fa.slice(0,C));return fa}return U(E,C)}function u(E){if("number"!==
typeof E)throw new TypeError('"size" argument must be a number');if(0>E)throw new RangeError('"size" argument must not be negative');}function q(E,C){u(C);E=f(E,0>C?0:aa(C)|0);if(!h.TYPED_ARRAY_SUPPORT)for(var W=0;W<C;++W)E[W]=0;return E}function D(E,C){var W=0>C.length?0:aa(C.length)|0;E=f(E,W);for(var fa=0;fa<W;fa+=1)E[fa]=C[fa]&255;return E}function U(E,C){if(h.isBuffer(C)){var W=aa(C.length)|0;E=f(E,W);if(0===E.length)return E;C.copy(E,0,0,W);return E}if(C){if("undefined"!==typeof ArrayBuffer&&
C.buffer instanceof ArrayBuffer||"length"in C)return(W="number"!==typeof C.length)||(W=C.length,W=W!==W),W?f(E,0):D(E,C);if("Buffer"===C.type&&r(C.data))return D(E,C.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.");}function aa(E){if(E>=(h.TYPED_ARRAY_SUPPORT?2147483647:1073741823))throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+(h.TYPED_ARRAY_SUPPORT?2147483647:1073741823).toString(16)+" bytes");return E|
0}function X(E,C){if(h.isBuffer(E))return E.length;if("undefined"!==typeof ArrayBuffer&&"function"===typeof ArrayBuffer.isView&&(ArrayBuffer.isView(E)||E instanceof ArrayBuffer))return E.byteLength;"string"!==typeof E&&(E=""+E);var W=E.length;if(0===W)return 0;for(var fa=!1;;)switch(C){case "ascii":case "latin1":case "binary":return W;case "utf8":case "utf-8":case void 0:return A(E).length;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return 2*W;case "hex":return W>>>1;case "base64":return T(E).length;
default:if(fa)return A(E).length;C=(""+C).toLowerCase();fa=!0}}function S(E,C,W){var fa=!1;if(void 0===C||0>C)C=0;if(C>this.length)return"";if(void 0===W||W>this.length)W=this.length;if(0>=W)return"";W>>>=0;C>>>=0;if(W<=C)return"";for(E||(E="utf8");;)switch(E){case "hex":E=C;C=W;W=this.length;if(!E||0>E)E=0;if(!C||0>C||C>W)C=W;fa="";for(W=E;W<C;++W)E=fa,fa=this[W],fa=16>fa?"0"+fa.toString(16):fa.toString(16),fa=E+fa;return fa;case "utf8":case "utf-8":return w(this,C,W);case "ascii":E="";for(W=Math.min(this.length,
W);C<W;++C)E+=String.fromCharCode(this[C]&127);return E;case "latin1":case "binary":E="";for(W=Math.min(this.length,W);C<W;++C)E+=String.fromCharCode(this[C]);return E;case "base64":return C=0===C&&W===this.length?ba.fromByteArray(this):ba.fromByteArray(this.slice(C,W)),C;case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":C=this.slice(C,W);W="";for(E=0;E<C.length;E+=2)W+=String.fromCharCode(C[E]+256*C[E+1]);return W;default:if(fa)throw new TypeError("Unknown encoding: "+E);E=(E+"").toLowerCase();
fa=!0}}function V(E,C,W){var fa=E[C];E[C]=E[W];E[W]=fa}function F(E,C,W,fa,ja){if(0===E.length)return-1;"string"===typeof W?(fa=W,W=0):2147483647<W?W=2147483647:-2147483648>W&&(W=-2147483648);W=+W;isNaN(W)&&(W=ja?0:E.length-1);0>W&&(W=E.length+W);if(W>=E.length){if(ja)return-1;W=E.length-1}else if(0>W)if(ja)W=0;else return-1;"string"===typeof C&&(C=h.from(C,fa));if(h.isBuffer(C))return 0===C.length?-1:t(E,C,W,fa,ja);if("number"===typeof C)return C&=255,h.TYPED_ARRAY_SUPPORT&&"function"===typeof Uint8Array.prototype.indexOf?
ja?Uint8Array.prototype.indexOf.call(E,C,W):Uint8Array.prototype.lastIndexOf.call(E,C,W):t(E,[C],W,fa,ja);throw new TypeError("val must be string, number or Buffer");}function t(E,C,W,fa,ja){function Ba(Xa,Sa){return 1===Ga?Xa[Sa]:Xa.readUInt16BE(Sa*Ga)}var Ga=1,ua=E.length,Fa=C.length;if(void 0!==fa&&(fa=String(fa).toLowerCase(),"ucs2"===fa||"ucs-2"===fa||"utf16le"===fa||"utf-16le"===fa)){if(2>E.length||2>C.length)return-1;Ga=2;ua/=2;Fa/=2;W/=2}if(ja)for(fa=-1;W<ua;W++)if(Ba(E,W)===Ba(C,-1===fa?
0:W-fa)){if(-1===fa&&(fa=W),W-fa+1===Fa)return fa*Ga}else-1!==fa&&(W-=W-fa),fa=-1;else for(W+Fa>ua&&(W=ua-Fa);0<=W;W--){ua=!0;for(fa=0;fa<Fa;fa++)if(Ba(E,W+fa)!==Ba(C,fa)){ua=!1;break}if(ua)return W}return-1}function w(E,C,W){W=Math.min(E.length,W);for(var fa=[];C<W;){var ja=E[C],Ba=null,Ga=239<ja?4:223<ja?3:191<ja?2:1;if(C+Ga<=W)switch(Ga){case 1:128>ja&&(Ba=ja);break;case 2:var ua=E[C+1];128===(ua&192)&&(ja=(ja&31)<<6|ua&63,127<ja&&(Ba=ja));break;case 3:ua=E[C+1];var Fa=E[C+2];128===(ua&192)&&128===
(Fa&192)&&(ja=(ja&15)<<12|(ua&63)<<6|Fa&63,2047<ja&&(55296>ja||57343<ja)&&(Ba=ja));break;case 4:ua=E[C+1];Fa=E[C+2];var Xa=E[C+3];128===(ua&192)&&128===(Fa&192)&&128===(Xa&192)&&(ja=(ja&15)<<18|(ua&63)<<12|(Fa&63)<<6|Xa&63,65535<ja&&1114112>ja&&(Ba=ja))}null===Ba?(Ba=65533,Ga=1):65535<Ba&&(Ba-=65536,fa.push(Ba>>>10&1023|55296),Ba=56320|Ba&1023);fa.push(Ba);C+=Ga}E=fa.length;if(E<=Y)fa=String.fromCharCode.apply(String,fa);else{W="";for(C=0;C<E;)W+=String.fromCharCode.apply(String,fa.slice(C,C+=Y));
fa=W}return fa}function x(E,C,W){if(0!==E%1||0>E)throw new RangeError("offset is not uint");if(E+C>W)throw new RangeError("Trying to access beyond buffer length");}function I(E,C,W,fa,ja,Ba){if(!h.isBuffer(E))throw new TypeError('"buffer" argument must be a Buffer instance');if(C>ja||C<Ba)throw new RangeError('"value" argument is out of bounds');if(W+fa>E.length)throw new RangeError("Index out of range");}function R(E,C,W,fa){0>C&&(C=65535+C+1);for(var ja=0,Ba=Math.min(E.length-W,2);ja<Ba;++ja)E[W+
ja]=(C&255<<8*(fa?ja:1-ja))>>>8*(fa?ja:1-ja)}function B(E,C,W,fa){0>C&&(C=4294967295+C+1);for(var ja=0,Ba=Math.min(E.length-W,4);ja<Ba;++ja)E[W+ja]=C>>>8*(fa?ja:3-ja)&255}function v(E,C,W,fa,ja,Ba){if(W+fa>E.length)throw new RangeError("Index out of range");if(0>W)throw new RangeError("Index out of range");}function O(E,C,W,fa,ja){ja||v(E,C,W,4,3.4028234663852886E38,-3.4028234663852886E38);K.write(E,C,W,fa,23,4);return W+4}function N(E,C,W,fa,ja){ja||v(E,C,W,8,1.7976931348623157E308,-1.7976931348623157E308);
K.write(E,C,W,fa,52,8);return W+8}function A(E,C){C=C||Infinity;for(var W,fa=E.length,ja=null,Ba=[],Ga=0;Ga<fa;++Ga){W=E.charCodeAt(Ga);if(55295<W&&57344>W){if(!ja){if(56319<W){-1<(C-=3)&&Ba.push(239,191,189);continue}else if(Ga+1===fa){-1<(C-=3)&&Ba.push(239,191,189);continue}ja=W;continue}if(56320>W){-1<(C-=3)&&Ba.push(239,191,189);ja=W;continue}W=(ja-55296<<10|W-56320)+65536}else ja&&-1<(C-=3)&&Ba.push(239,191,189);ja=null;if(128>W){if(0>--C)break;Ba.push(W)}else if(2048>W){if(0>(C-=2))break;Ba.push(W>>
6|192,W&63|128)}else if(65536>W){if(0>(C-=3))break;Ba.push(W>>12|224,W>>6&63|128,W&63|128)}else if(1114112>W){if(0>(C-=4))break;Ba.push(W>>18|240,W>>12&63|128,W>>6&63|128,W&63|128)}else throw Error("Invalid code point");}return Ba}function J(E){for(var C=[],W=0;W<E.length;++W)C.push(E.charCodeAt(W)&255);return C}function T(E){var C=ba,W=C.toByteArray;E=(E.trim?E.trim():E.replace(/^\s+|\s+$/g,"")).replace(Z,"");if(2>E.length)E="";else for(;0!==E.length%4;)E+="\x3d";return W.call(C,E)}function z(E,
C,W,fa){for(var ja=0;ja<fa&&!(ja+W>=C.length||ja>=E.length);++ja)C[ja+W]=E[ja];return ja}var ba=da(512),K=da(513),r=da(514);oa.Buffer=h;oa.SlowBuffer=function(E){+E!=E&&(E=0);return h.alloc(+E)};oa.INSPECT_MAX_BYTES=50;h.TYPED_ARRAY_SUPPORT=void 0!==Pa.TYPED_ARRAY_SUPPORT?Pa.TYPED_ARRAY_SUPPORT:k();oa.kMaxLength=h.TYPED_ARRAY_SUPPORT?2147483647:1073741823;h.poolSize=8192;h._augment=function(E){E.__proto__=h.prototype;return E};h.from=function(E,C,W){return l(null,E,C,W)};h.TYPED_ARRAY_SUPPORT&&(h.prototype.__proto__=
Uint8Array.prototype,h.__proto__=Uint8Array,"undefined"!==typeof Symbol&&Symbol.species&&h[Symbol.species]===h&&Object.defineProperty(h,Symbol.species,{value:null,configurable:!0}));h.alloc=function(E,C,W){u(E);E=0>=E?f(null,E):void 0!==C?"string"===typeof W?f(null,E).fill(C,W):f(null,E).fill(C):f(null,E);return E};h.allocUnsafe=function(E){return q(null,E)};h.allocUnsafeSlow=function(E){return q(null,E)};h.isBuffer=function(E){return!(null==E||!E._isBuffer)};h.compare=function(E,C){if(!h.isBuffer(E)||
!h.isBuffer(C))throw new TypeError("Arguments must be Buffers");if(E===C)return 0;for(var W=E.length,fa=C.length,ja=0,Ba=Math.min(W,fa);ja<Ba;++ja)if(E[ja]!==C[ja]){W=E[ja];fa=C[ja];break}return W<fa?-1:fa<W?1:0};h.isEncoding=function(E){switch(String(E).toLowerCase()){case "hex":case "utf8":case "utf-8":case "ascii":case "latin1":case "binary":case "base64":case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":return!0;default:return!1}};h.concat=function(E,C){if(!r(E))throw new TypeError('"list" argument must be an Array of Buffers');
if(0===E.length)return h.alloc(0);var W;if(void 0===C)for(W=C=0;W<E.length;++W)C+=E[W].length;C=h.allocUnsafe(C);var fa=0;for(W=0;W<E.length;++W){var ja=E[W];if(!h.isBuffer(ja))throw new TypeError('"list" argument must be an Array of Buffers');ja.copy(C,fa);fa+=ja.length}return C};h.byteLength=X;h.prototype._isBuffer=!0;h.prototype.swap16=function(){var E=this.length;if(0!==E%2)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var C=0;C<E;C+=2)V(this,C,C+1);return this};h.prototype.swap32=
function(){var E=this.length;if(0!==E%4)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var C=0;C<E;C+=4)V(this,C,C+3),V(this,C+1,C+2);return this};h.prototype.swap64=function(){var E=this.length;if(0!==E%8)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var C=0;C<E;C+=8)V(this,C,C+7),V(this,C+1,C+6),V(this,C+2,C+5),V(this,C+3,C+4);return this};h.prototype.toString=function(){var E=this.length|0;return 0===E?"":0===arguments.length?w(this,0,E):S.apply(this,
arguments)};h.prototype.equals=function(E){if(!h.isBuffer(E))throw new TypeError("Argument must be a Buffer");return this===E?!0:0===h.compare(this,E)};h.prototype.inspect=function(){var E="",C=oa.INSPECT_MAX_BYTES;0<this.length&&(E=this.toString("hex",0,C).match(/.{2}/g).join(" "),this.length>C&&(E+=" ... "));return"\x3cBuffer "+E+"\x3e"};h.prototype.compare=function(E,C,W,fa,ja){if(!h.isBuffer(E))throw new TypeError("Argument must be a Buffer");void 0===C&&(C=0);void 0===W&&(W=E?E.length:0);void 0===
fa&&(fa=0);void 0===ja&&(ja=this.length);if(0>C||W>E.length||0>fa||ja>this.length)throw new RangeError("out of range index");if(fa>=ja&&C>=W)return 0;if(fa>=ja)return-1;if(C>=W)return 1;C>>>=0;W>>>=0;fa>>>=0;ja>>>=0;if(this===E)return 0;var Ba=ja-fa,Ga=W-C,ua=Math.min(Ba,Ga);fa=this.slice(fa,ja);E=E.slice(C,W);for(C=0;C<ua;++C)if(fa[C]!==E[C]){Ba=fa[C];Ga=E[C];break}return Ba<Ga?-1:Ga<Ba?1:0};h.prototype.includes=function(E,C,W){return-1!==this.indexOf(E,C,W)};h.prototype.indexOf=function(E,C,W){return F(this,
E,C,W,!0)};h.prototype.lastIndexOf=function(E,C,W){return F(this,E,C,W,!1)};h.prototype.write=function(E,C,W,fa){if(void 0===C)fa="utf8",W=this.length,C=0;else if(void 0===W&&"string"===typeof C)fa=C,W=this.length,C=0;else if(isFinite(C))C|=0,isFinite(W)?(W|=0,void 0===fa&&(fa="utf8")):(fa=W,W=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var ja=this.length-C;if(void 0===W||W>ja)W=ja;if(0<E.length&&(0>W||0>C)||C>this.length)throw new RangeError("Attempt to write outside buffer bounds");
fa||(fa="utf8");for(ja=!1;;)switch(fa){case "hex":a:{C=Number(C)||0;fa=this.length-C;W?(W=Number(W),W>fa&&(W=fa)):W=fa;fa=E.length;if(0!==fa%2)throw new TypeError("Invalid hex string");W>fa/2&&(W=fa/2);for(fa=0;fa<W;++fa){ja=parseInt(E.substr(2*fa,2),16);if(isNaN(ja)){E=fa;break a}this[C+fa]=ja}E=fa}return E;case "utf8":case "utf-8":return z(A(E,this.length-C),this,C,W);case "ascii":return z(J(E),this,C,W);case "latin1":case "binary":return z(J(E),this,C,W);case "base64":return z(T(E),this,C,W);case "ucs2":case "ucs-2":case "utf16le":case "utf-16le":fa=
E;ja=this.length-C;for(var Ba=[],Ga=0;Ga<fa.length&&!(0>(ja-=2));++Ga){var ua=fa.charCodeAt(Ga);E=ua>>8;ua%=256;Ba.push(ua);Ba.push(E)}return z(Ba,this,C,W);default:if(ja)throw new TypeError("Unknown encoding: "+fa);fa=(""+fa).toLowerCase();ja=!0}};h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Y=4096;h.prototype.slice=function(E,C){var W=this.length;E=~~E;C=void 0===C?W:~~C;0>E?(E+=W,0>E&&(E=0)):E>W&&(E=W);0>C?(C+=W,0>C&&(C=0)):C>W&&(C=
W);C<E&&(C=E);if(h.TYPED_ARRAY_SUPPORT)C=this.subarray(E,C),C.__proto__=h.prototype;else{W=C-E;C=new h(W,void 0);for(var fa=0;fa<W;++fa)C[fa]=this[fa+E]}return C};h.prototype.readUIntLE=function(E,C,W){E|=0;C|=0;W||x(E,C,this.length);W=this[E];for(var fa=1,ja=0;++ja<C&&(fa*=256);)W+=this[E+ja]*fa;return W};h.prototype.readUIntBE=function(E,C,W){E|=0;C|=0;W||x(E,C,this.length);W=this[E+--C];for(var fa=1;0<C&&(fa*=256);)W+=this[E+--C]*fa;return W};h.prototype.readUInt8=function(E,C){C||x(E,1,this.length);
return this[E]};h.prototype.readUInt16LE=function(E,C){C||x(E,2,this.length);return this[E]|this[E+1]<<8};h.prototype.readUInt16BE=function(E,C){C||x(E,2,this.length);return this[E]<<8|this[E+1]};h.prototype.readUInt32LE=function(E,C){C||x(E,4,this.length);return(this[E]|this[E+1]<<8|this[E+2]<<16)+16777216*this[E+3]};h.prototype.readUInt32BE=function(E,C){C||x(E,4,this.length);return 16777216*this[E]+(this[E+1]<<16|this[E+2]<<8|this[E+3])};h.prototype.readIntLE=function(E,C,W){E|=0;C|=0;W||x(E,C,
this.length);W=this[E];for(var fa=1,ja=0;++ja<C&&(fa*=256);)W+=this[E+ja]*fa;W>=128*fa&&(W-=Math.pow(2,8*C));return W};h.prototype.readIntBE=function(E,C,W){E|=0;C|=0;W||x(E,C,this.length);W=C;for(var fa=1,ja=this[E+--W];0<W&&(fa*=256);)ja+=this[E+--W]*fa;ja>=128*fa&&(ja-=Math.pow(2,8*C));return ja};h.prototype.readInt8=function(E,C){C||x(E,1,this.length);return this[E]&128?-1*(255-this[E]+1):this[E]};h.prototype.readInt16LE=function(E,C){C||x(E,2,this.length);E=this[E]|this[E+1]<<8;return E&32768?
E|4294901760:E};h.prototype.readInt16BE=function(E,C){C||x(E,2,this.length);E=this[E+1]|this[E]<<8;return E&32768?E|4294901760:E};h.prototype.readInt32LE=function(E,C){C||x(E,4,this.length);return this[E]|this[E+1]<<8|this[E+2]<<16|this[E+3]<<24};h.prototype.readInt32BE=function(E,C){C||x(E,4,this.length);return this[E]<<24|this[E+1]<<16|this[E+2]<<8|this[E+3]};h.prototype.readFloatLE=function(E,C){C||x(E,4,this.length);return K.read(this,E,!0,23,4)};h.prototype.readFloatBE=function(E,C){C||x(E,4,
this.length);return K.read(this,E,!1,23,4)};h.prototype.readDoubleLE=function(E,C){C||x(E,8,this.length);return K.read(this,E,!0,52,8)};h.prototype.readDoubleBE=function(E,C){C||x(E,8,this.length);return K.read(this,E,!1,52,8)};h.prototype.writeUIntLE=function(E,C,W,fa){E=+E;C|=0;W|=0;fa||I(this,E,C,W,Math.pow(2,8*W)-1,0);fa=1;var ja=0;for(this[C]=E&255;++ja<W&&(fa*=256);)this[C+ja]=E/fa&255;return C+W};h.prototype.writeUIntBE=function(E,C,W,fa){E=+E;C|=0;W|=0;fa||I(this,E,C,W,Math.pow(2,8*W)-1,0);
fa=W-1;var ja=1;for(this[C+fa]=E&255;0<=--fa&&(ja*=256);)this[C+fa]=E/ja&255;return C+W};h.prototype.writeUInt8=function(E,C,W){E=+E;C|=0;W||I(this,E,C,1,255,0);h.TYPED_ARRAY_SUPPORT||(E=Math.floor(E));this[C]=E&255;return C+1};h.prototype.writeUInt16LE=function(E,C,W){E=+E;C|=0;W||I(this,E,C,2,65535,0);h.TYPED_ARRAY_SUPPORT?(this[C]=E&255,this[C+1]=E>>>8):R(this,E,C,!0);return C+2};h.prototype.writeUInt16BE=function(E,C,W){E=+E;C|=0;W||I(this,E,C,2,65535,0);h.TYPED_ARRAY_SUPPORT?(this[C]=E>>>8,this[C+
1]=E&255):R(this,E,C,!1);return C+2};h.prototype.writeUInt32LE=function(E,C,W){E=+E;C|=0;W||I(this,E,C,4,4294967295,0);h.TYPED_ARRAY_SUPPORT?(this[C+3]=E>>>24,this[C+2]=E>>>16,this[C+1]=E>>>8,this[C]=E&255):B(this,E,C,!0);return C+4};h.prototype.writeUInt32BE=function(E,C,W){E=+E;C|=0;W||I(this,E,C,4,4294967295,0);h.TYPED_ARRAY_SUPPORT?(this[C]=E>>>24,this[C+1]=E>>>16,this[C+2]=E>>>8,this[C+3]=E&255):B(this,E,C,!1);return C+4};h.prototype.writeIntLE=function(E,C,W,fa){E=+E;C|=0;fa||(fa=Math.pow(2,
8*W-1),I(this,E,C,W,fa-1,-fa));fa=0;var ja=1,Ba=0;for(this[C]=E&255;++fa<W&&(ja*=256);)0>E&&0===Ba&&0!==this[C+fa-1]&&(Ba=1),this[C+fa]=(E/ja>>0)-Ba&255;return C+W};h.prototype.writeIntBE=function(E,C,W,fa){E=+E;C|=0;fa||(fa=Math.pow(2,8*W-1),I(this,E,C,W,fa-1,-fa));fa=W-1;var ja=1,Ba=0;for(this[C+fa]=E&255;0<=--fa&&(ja*=256);)0>E&&0===Ba&&0!==this[C+fa+1]&&(Ba=1),this[C+fa]=(E/ja>>0)-Ba&255;return C+W};h.prototype.writeInt8=function(E,C,W){E=+E;C|=0;W||I(this,E,C,1,127,-128);h.TYPED_ARRAY_SUPPORT||
(E=Math.floor(E));0>E&&(E=255+E+1);this[C]=E&255;return C+1};h.prototype.writeInt16LE=function(E,C,W){E=+E;C|=0;W||I(this,E,C,2,32767,-32768);h.TYPED_ARRAY_SUPPORT?(this[C]=E&255,this[C+1]=E>>>8):R(this,E,C,!0);return C+2};h.prototype.writeInt16BE=function(E,C,W){E=+E;C|=0;W||I(this,E,C,2,32767,-32768);h.TYPED_ARRAY_SUPPORT?(this[C]=E>>>8,this[C+1]=E&255):R(this,E,C,!1);return C+2};h.prototype.writeInt32LE=function(E,C,W){E=+E;C|=0;W||I(this,E,C,4,2147483647,-2147483648);h.TYPED_ARRAY_SUPPORT?(this[C]=
E&255,this[C+1]=E>>>8,this[C+2]=E>>>16,this[C+3]=E>>>24):B(this,E,C,!0);return C+4};h.prototype.writeInt32BE=function(E,C,W){E=+E;C|=0;W||I(this,E,C,4,2147483647,-2147483648);0>E&&(E=4294967295+E+1);h.TYPED_ARRAY_SUPPORT?(this[C]=E>>>24,this[C+1]=E>>>16,this[C+2]=E>>>8,this[C+3]=E&255):B(this,E,C,!1);return C+4};h.prototype.writeFloatLE=function(E,C,W){return O(this,E,C,!0,W)};h.prototype.writeFloatBE=function(E,C,W){return O(this,E,C,!1,W)};h.prototype.writeDoubleLE=function(E,C,W){return N(this,
E,C,!0,W)};h.prototype.writeDoubleBE=function(E,C,W){return N(this,E,C,!1,W)};h.prototype.copy=function(E,C,W,fa){W||(W=0);fa||0===fa||(fa=this.length);C>=E.length&&(C=E.length);C||(C=0);0<fa&&fa<W&&(fa=W);if(fa===W||0===E.length||0===this.length)return 0;if(0>C)throw new RangeError("targetStart out of bounds");if(0>W||W>=this.length)throw new RangeError("sourceStart out of bounds");if(0>fa)throw new RangeError("sourceEnd out of bounds");fa>this.length&&(fa=this.length);E.length-C<fa-W&&(fa=E.length-
C+W);var ja=fa-W;if(this===E&&W<C&&C<fa)for(fa=ja-1;0<=fa;--fa)E[fa+C]=this[fa+W];else if(1E3>ja||!h.TYPED_ARRAY_SUPPORT)for(fa=0;fa<ja;++fa)E[fa+C]=this[fa+W];else Uint8Array.prototype.set.call(E,this.subarray(W,W+ja),C);return ja};h.prototype.fill=function(E,C,W,fa){if("string"===typeof E){"string"===typeof C?(fa=C,C=0,W=this.length):"string"===typeof W&&(fa=W,W=this.length);if(1===E.length){var ja=E.charCodeAt(0);256>ja&&(E=ja)}if(void 0!==fa&&"string"!==typeof fa)throw new TypeError("encoding must be a string");
if("string"===typeof fa&&!h.isEncoding(fa))throw new TypeError("Unknown encoding: "+fa);}else"number"===typeof E&&(E&=255);if(0>C||this.length<C||this.length<W)throw new RangeError("Out of range index");if(W<=C)return this;C>>>=0;W=void 0===W?this.length:W>>>0;E||(E=0);if("number"===typeof E)for(fa=C;fa<W;++fa)this[fa]=E;else for(E=h.isBuffer(E)?E:A((new h(E,fa)).toString()),ja=E.length,fa=0;fa<W-C;++fa)this[fa+C]=E[fa%ja];return this};var Z=/[^+\/0-9A-Za-z-_]/g};
shadow$provide[516]=function(Pa,da,gb,oa){var k=da(515).Buffer;(function(f,h){"object"===typeof oa&&"undefined"!==typeof gb?h(oa,da(503),da(504),da(505),da(511)):"function"===typeof define&&define.amd?define(["exports","vega-util","d3-dsv","topojson-client","vega-format"],h):(f="undefined"!==typeof globalThis?globalThis:f||self,h(f.vega={},f.vega,f.d3,f.topojson,f.vega))})(this,function(f,h,l,u,q){async function D(Z,E){Z=await this.sanitize(Z,E);const C=Z.href;return Z.localFile?this.file(C):this.http(C,
E)}async function U(Z,E){E=h.extend({},this.options,E);var C=this.fileAccess;const W={href:null};var fa=N.test(Z.replace(A,""));null!=Z&&"string"===typeof Z&&fa||h.error("Sanitize failure, invalid URI: "+h.stringValue(Z));const ja=O.test(Z);(fa=E.baseURL)&&!ja&&(Z.startsWith("/")||fa.endsWith("/")||(Z="/"+Z),Z=fa+Z);C=(fa=Z.startsWith("file://"))||"file"===E.mode||"http"!==E.mode&&!ja&&C;fa?Z=Z.slice(7):Z.startsWith("//")&&("file"===E.defaultProtocol?(Z=Z.slice(2),C=!0):Z=(E.defaultProtocol||"http")+
":"+Z);Object.defineProperty(W,"localFile",{value:!!C});W.href=Z;E.target&&(W.target=E.target+"");E.rel&&(W.rel=E.rel+"");"image"===E.context&&E.crossOrigin&&(W.crossOrigin=E.crossOrigin+"");return W}function aa(Z){return Z?E=>new Promise((C,W)=>{Z.readFile(E,(fa,ja)=>{fa?W(fa):C(ja)})}):X}async function X(){h.error("No file system access.")}function S(Z){return Z?async function(E,C){const W=h.extend({},this.options.http,C);C=C&&C.response;E=await Z(E,W);return E.ok?h.isFunction(E[C])?E[C]():E.text():
h.error(E.status+""+E.statusText)}:V}async function V(){h.error("No HTTP fetch method available.")}function F(Z,E){if(!Z||!Z.length)return"unknown";const C=Z.length,W=z.length,fa=z.map((ja,Ba)=>Ba+1);for(let ja=0,Ba=0,Ga,ua;ja<C;++ja)for(ua=E?Z[ja][E]:Z[ja],Ga=0;Ga<W;++Ga)if(fa[Ga]&&null!=ua&&ua===ua&&!z[Ga](ua)&&(fa[Ga]=0,++Ba,Ba===z.length))return"string";return ba[fa.reduce((ja,Ba)=>0===ja?Ba:ja,0)-1]}function t(Z,E){return E.reduce((C,W)=>{C[W]=F(Z,W);return C},{})}function w(Z){const E=function(C,
W){const fa={delimiter:Z};return x(C,W?h.extend(W,fa):fa)};E.responseType="text";return E}function x(Z,E){E.header&&(Z=E.header.map(h.stringValue).join(E.delimiter)+"\n"+Z);return l.dsvFormat(E.delimiter).parse(Z+"")}function I(Z,E){const C=E&&E.property?h.field(E.property):h.identity;var W;if(W=h.isObject(Z))W=!("function"===typeof k&&h.isFunction(k.isBuffer)&&k.isBuffer(Z));W?(Z=C(Z),!h.isArray(Z)&&h.isIterable(Z)&&(Z=[...Z]),E=E&&E.copy?JSON.parse(JSON.stringify(Z)):Z):E=C(JSON.parse(Z));return E}
function R(Z,E){let C,W,fa,ja;Z=I(Z,E);E&&E.feature?(C=u.feature,fa=E.feature):E&&E.mesh?(C=u.mesh,fa=E.mesh,ja=K[E.filter]):h.error("Missing TopoJSON feature or mesh parameter.");return(W=(W=Z.objects[fa])?C(Z,W,ja):h.error("Invalid TopoJSON object: "+fa))&&W.features||[W]}function B(Z,E){return 1<arguments.length?(r[Z]=E,this):h.hasOwnProperty(r,Z)?r[Z]:null}function v(Z,E,C,W){if(Z.length){var fa=q.timeFormatDefaultLocale();C=C||fa.timeParse;W=W||fa.utcParse;fa=Z.columns||Object.keys(Z[0]);var ja,
Ba;"auto"===E&&(E=t(Z,fa));fa=Object.keys(E);var Ga=fa.map(eb=>{var Va=E[eb];if(Va&&(Va.startsWith("date:")||Va.startsWith("utc:"))){eb=Va.split(/:(.+)?/,2);Va=eb[1];if("'"===Va[0]&&"'"===Va[Va.length-1]||'"'===Va[0]&&'"'===Va[Va.length-1])Va=Va.slice(1,-1);return("utc"===eb[0]?W:C)(Va)}if(!T[Va])throw Error("Illegal format pattern: "+eb+":"+Va);return T[Va]});var ua=0;var Fa=Z.length;for(Ba=fa.length;ua<Fa;++ua){var Xa=Z[ua];for(ja=0;ja<Ba;++ja){var Sa=fa[ja];Xa[Sa]=Ga[ja](Xa[Sa])}}}}const O=/^(data:|([A-Za-z]+:)?\/\/)/,
N=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,A=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,J=Z=>!Number.isNaN(+Z)&&!(Z instanceof Date),T={boolean:h.toBoolean,integer:h.toNumber,number:h.toNumber,date:h.toDate,string:h.toString,unknown:h.identity},z=[Z=>"true"===Z||"false"===Z||!0===Z||!1===Z,Z=>J(Z)&&Number.isInteger(+Z),J,Z=>!Number.isNaN(Date.parse(Z))],ba=["boolean","integer","number","date"];x.responseType="text";I.responseType=
"json";const K={interior:(Z,E)=>Z!==E,exterior:(Z,E)=>Z===E};R.responseType="json";const r={dsv:x,csv:w(","),tsv:w("\t"),json:I,topojson:R},Y=function(Z,E){return C=>({options:C||{},sanitize:U,load:D,fileAccess:!!E,file:aa(E),http:S(Z)})}("undefined"!==typeof fetch&&fetch,null);f.format=r;f.formats=B;f.inferType=F;f.inferTypes=t;f.loader=Y;f.read=function(Z,E,C,W){E=E||{};const fa=B(E.type||"json");fa||h.error("Unknown data format type: "+E.type);Z=fa(Z,E);E.parse&&v(Z,E.parse,C,W);h.hasOwnProperty(Z,
"columns")&&delete Z.columns;return Z};f.responseType=function(Z){return(Z=B(Z))&&Z.responseType||"text"};f.typeParsers=T;Object.defineProperty(f,"__esModule",{value:!0})})};
shadow$provide[517]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(503),da(516),da(511)):"function"===typeof define&&define.amd?define(["exports","vega-util","vega-loader","vega-format"],f):(k="undefined"!==typeof globalThis?globalThis:k||self,f(k.vega={},k.vega,k.vega,k.vega))})(this,function(k,f,h,l){function u(Sa){const eb=Sa||f.identity,Va=[],La={};Va.add=Ra=>{const la=eb(Ra);La[la]||(La[la]=1,Va.push(Ra));return Va};Va.remove=Ra=>{const la=eb(Ra);La[la]&&
(La[la]=0,Ra=Va.indexOf(Ra),0<=Ra&&Va.splice(Ra,1));return Va};return Va}async function q(Sa,eb){try{await eb(Sa)}catch(Va){Sa.error(Va)}}function D(Sa){Sa=Sa===Object(Sa)?Sa:{data:Sa};if(!Sa[C]){var eb=W++;Sa[C]=eb}return Sa}function U(Sa,eb){for(const Va in Sa)eb[Va]=Sa[Va];return eb}function aa(Sa){return Sa&&Sa.constructor===X}function X(){const Sa=[],eb=[],Va=[],La=[],Ra=[];let la=null,ma=!1;return{constructor:X,insert(Aa){Aa=f.array(Aa);const Da=Aa.length;for(let Qa=0;Qa<Da;++Qa)Sa.push(Aa[Qa]);
return this},remove(Aa){const Da=f.isFunction(Aa)?La:eb;Aa=f.array(Aa);const Qa=Aa.length;for(let Ea=0;Ea<Qa;++Ea)Da.push(Aa[Ea]);return this},modify(Aa,Da,Qa){Da={field:Da,value:f.constant(Qa)};f.isFunction(Aa)?(Da.filter=Aa,Ra.push(Da)):(Da.tuple=Aa,Va.push(Da));return this},encode(Aa,Da){f.isFunction(Aa)?Ra.push({filter:Aa,field:Da}):Va.push({tuple:Aa,field:Da});return this},clean(Aa){la=Aa;return this},reflow(){ma=!0;return this},pulse(Aa,Da){function Qa(xa,Ia,bb){bb?xa[Ia]=bb(xa):Aa.encode=Ia;
ma||(kb[xa[C]]=xa)}const Ea={},kb={};let cb,Mb,Gb,Wb,sa,ra;cb=0;for(Mb=Da.length;cb<Mb;++cb)Ea[Da[cb][C]]=1;cb=0;for(Mb=eb.length;cb<Mb;++cb)sa=eb[cb],Ea[sa[C]]=-1;cb=0;for(Mb=La.length;cb<Mb;++cb)Wb=La[cb],Da.forEach(xa=>{Wb(xa)&&(Ea[xa[C]]=-1)});cb=0;for(Mb=Sa.length;cb<Mb;++cb)sa=Sa[cb],ra=sa[C],Ea[ra]?Ea[ra]=1:Aa.add.push(D(Sa[cb]));cb=0;for(Mb=Da.length;cb<Mb;++cb)sa=Da[cb],0>Ea[sa[C]]&&Aa.rem.push(sa);cb=0;for(Mb=Va.length;cb<Mb;++cb)Gb=Va[cb],sa=Gb.tuple,Wb=Gb.field,ra=Ea[sa[C]],0<ra&&(Qa(sa,
Wb,Gb.value),Aa.modifies(Wb));cb=0;for(Mb=Ra.length;cb<Mb;++cb)Gb=Ra[cb],Wb=Gb.filter,Da.forEach(xa=>{Wb(xa)&&0<Ea[xa[C]]&&Qa(xa,Gb.field,Gb.value)}),Aa.modifies(Gb.field);if(ma)Aa.mod=eb.length||La.length?Da.filter(xa=>0<Ea[xa[C]]):Da.slice();else for(ra in kb)Aa.mod.push(kb[ra]);(la||null==la&&(eb.length||La.length))&&Aa.clean(!0);return Aa}}}function S(){Object.defineProperty(this,"_:mod:_",{writable:!0,value:{}})}function V(Sa,eb,Va,La){this.id=++fa;this.value=Sa;this.qrank=this.rank=this.stamp=
-1;this.flags=0;eb&&(this._update=eb);Va&&this.parameters(Va,La)}function F(Sa){return function(eb){const Va=this.flags;if(0===arguments.length)return!!(Va&Sa);this.flags=eb?Va|Sa:Va&~Sa;return this}}function t(Sa,eb,Va){this.id=++Ba;this.value=null;Va&&(this.receive=Va);Sa&&(this._filter=Sa);eb&&(this._apply=eb)}function w(Sa,eb,Va){return new t(Sa,eb,Va)}function x(Sa){let eb;const Va=new Promise(La=>eb=La);Va.requests=0;Va.done=()=>{0===--Va.requests&&(Sa._pending=null,eb(Sa))};return Sa._pending=
Va}function I(Sa,eb,Va,La,Ra,la){const ma=f.extend({},la,Ga);let Aa;f.isFunction(Va)||(Va=f.constant(Va));void 0===La?Ra=Da=>Sa.touch(Va(Da)):f.isFunction(La)?(Aa=new V(null,La,Ra,!1),Ra=Da=>{Aa.evaluate(Da);Da=Va(Da);const Qa=Aa.value;aa(Qa)?Sa.pulse(Da,Qa,la):Sa.update(Da,Qa,ma)}):Ra=Da=>Sa.update(Va(Da),La,ma);eb.apply(Ra)}function R(Sa,eb,Va,La,Ra,la){void 0===La?eb.targets().add(Va):(la=la||{},La=new V(null,B(Va,La),Ra,!1),La.modified(la.force),La.rank=eb.rank,eb.targets().add(La),Va&&(La.skip(!0),
La.value=Va.value,La.targets().add(Va),Sa.connect(Va,[La])))}function B(Sa,eb){eb=f.isFunction(eb)?eb:f.constant(eb);return Sa?function(Va,La){Va=eb(Va,La);Sa.skip()||(Sa.skip(Va!==this.value).value=Va);return Va}:eb}function v(Sa,eb,Va){this.dataflow=Sa;this.stamp=null==eb?-1:eb;this.add=[];this.rem=[];this.mod=[];this.fields=null;this.encode=Va||null}function O(Sa,eb){const Va=[];f.visitArray(Sa,eb,La=>Va.push(La));return Va}function N(Sa,eb){const Va={};Sa.visit(eb,La=>{Va[La[C]]=1});return La=>
Va[La[C]]?null:La}function A(Sa,eb){return Sa?(Va,La)=>Sa(Va,La)&&eb(Va,La):eb}function J(Sa,eb,Va,La){const Ra=Va.length;let la=0;this.dataflow=Sa;this.stamp=eb;this.fields=null;this.encode=La||null;this.pulses=Va;for(Sa=0;Sa<Ra;++Sa)if(La=Va[Sa],La.stamp===eb){if(La.fields){const ma=this.fields||(this.fields={});for(const Aa in La.fields)ma[Aa]=1}La.changed(this.ADD)&&(la|=this.ADD);La.changed(this.REM)&&(la|=this.REM);La.changed(this.MOD)&&(la|=this.MOD)}this.changes=la}function T(Sa){Sa.error("Dataflow already running. Use runAsync() to chain invocations.");
return Sa}function z(Sa,eb){if(eb&&eb.stamp===Sa.stamp)return eb;Sa=Sa.fork();eb&&eb!==ua&&(Sa.source=eb.source);return Sa}function ba(Sa){let eb=[];return{clear:()=>eb=[],size:()=>eb.length,peek:()=>eb[0],push:Va=>{eb.push(Va);return K(eb,0,eb.length-1,Sa)},pop:()=>{var Va=eb.pop();let La;if(eb.length){La=eb[0];eb[0]=Va;Va=eb;var Ra=0;const la=Ra,ma=Va.length,Aa=Va[Ra];let Da=(Ra<<1)+1,Qa;for(;Da<ma;)Qa=Da+1,Qa<ma&&0<=Sa(Va[Da],Va[Qa])&&(Da=Qa),Va[Ra]=Va[Da],Ra=Da,Da=(Ra<<1)+1;Va[Ra]=Aa;K(Va,la,
Ra,Sa)}else La=Va;return La}}}function K(Sa,eb,Va,La){let Ra,la;const ma=Sa[Va];for(;Va>eb;)if(la=Va-1>>1,Ra=Sa[la],0>La(ma,Ra))Sa[Va]=Ra,Va=la;else break;return Sa[Va]=ma}function r(){this.logger(f.logger());this.logLevel(f.Error);this._rank=this._clock=0;this._locale=l.defaultLocale();try{this._loader=h.loader()}catch(Sa){}this._touched=u(f.id);this._input={};this._pulse=null;this._heap=ba((Sa,eb)=>Sa.qrank-eb.qrank);this._postrun=[]}function Y(Sa){return function(){return this._log[Sa].apply(this,
arguments)}}function Z(Sa,eb){V.call(this,Sa,null,eb)}function E(Sa){Sa=Sa&&Sa.toLowerCase();return f.hasOwnProperty(Xa,Sa)?Xa[Sa]:null}const C=Symbol("vega_id");let W=1;S.prototype={set(Sa,eb,Va,La){const Ra=this[Sa],la=this["_:mod:_"];if(null!=eb&&0<=eb){if(Ra[eb]!==Va||La)Ra[eb]=Va,la[eb+":"+Sa]=-1,la[Sa]=-1}else if(Ra!==Va||La)this[Sa]=Va,la[Sa]=f.isArray(Va)?1+Va.length:-1;return this},modified(Sa,eb){const Va=this["_:mod:_"];if(!arguments.length){for(var La in Va)if(Va[La])return!0;return!1}if(f.isArray(Sa)){for(La=
0;La<Sa.length;++La)if(Va[Sa[La]])return!0;return!1}return null!=eb&&0<=eb?eb+1<Va[Sa]||!!Va[eb+":"+Sa]:!!Va[Sa]},clear(){this["_:mod:_"]={};return this}};let fa=0;const ja=new S;V.prototype={targets(){return this._targets||(this._targets=u(f.id))},set(Sa){return this.value!==Sa?(this.value=Sa,1):0},skip:F(1),modified:F(2),parameters(Sa,eb,Va){eb=!1!==eb;const La=this._argval=this._argval||new S,Ra=this._argops=this._argops||[],la=[];let ma,Aa,Da,Qa;const Ea=(kb,cb,Mb)=>{Mb instanceof V?(Mb!==this&&
(eb&&Mb.targets().add(this),la.push(Mb)),Ra.push({op:Mb,name:kb,index:cb})):La.set(kb,cb,Mb)};for(ma in Sa)if(Aa=Sa[ma],"pulse"===ma)f.array(Aa).forEach(kb=>{kb instanceof V?kb!==this&&(kb.targets().add(this),la.push(kb)):f.error("Pulse parameters must be operator instances.")}),this.source=Aa;else if(f.isArray(Aa))for(La.set(ma,-1,Array(Da=Aa.length)),Qa=0;Qa<Da;++Qa)Ea(ma,Qa,Aa[Qa]);else Ea(ma,-1,Aa);this.marshall().clear();Va&&(Ra.initonly=!0);return la},marshall(Sa){const eb=this._argval||ja,
Va=this._argops;let La,Ra,la,ma;if(Va){const Aa=Va.length;for(Ra=0;Ra<Aa;++Ra)La=Va[Ra],la=La.op,ma=la.modified()&&la.stamp===Sa,eb.set(La.name,La.index,la.value,ma);if(Va.initonly){for(Ra=0;Ra<Aa;++Ra)La=Va[Ra],La.op.targets().remove(this);this._update=this._argops=null}}return eb},detach(){const Sa=this._argops;let eb,Va;if(Sa)for(eb=0,Va=Sa.length;eb<Va;++eb){var La=Sa[eb];La=La.op;La._targets&&La._targets.remove(this)}this.source=this.pulse=null},evaluate(Sa){var eb=this._update;if(eb){const Va=
this.marshall(Sa.stamp);eb=eb.call(this,Va,Sa);Va.clear();if(eb!==this.value)this.value=eb;else if(!this.modified())return Sa.StopPropagation}},run(Sa){if(Sa.stamp<this.stamp)return Sa.StopPropagation;let eb;this.skip()?(this.skip(!1),eb=0):eb=this.evaluate(Sa);return this.pulse=eb||Sa}};let Ba=0;t.prototype={_filter:f.truthy,_apply:f.identity,targets(){return this._targets||(this._targets=u(f.id))},consume(Sa){if(!arguments.length)return!!this._consume;this._consume=!!Sa;return this},receive(Sa){if(this._filter(Sa)){const eb=
this.value=this._apply(Sa),Va=this._targets,La=Va?Va.length:0;for(let Ra=0;Ra<La;++Ra)Va[Ra].receive(eb);this._consume&&(Sa.preventDefault(),Sa.stopPropagation())}},filter(Sa){Sa=w(Sa);this.targets().add(Sa);return Sa},apply(Sa){Sa=w(null,Sa);this.targets().add(Sa);return Sa},merge(){const Sa=w();this.targets().add(Sa);for(let eb=0,Va=arguments.length;eb<Va;++eb)arguments[eb].targets().add(Sa);return Sa},throttle(Sa){let eb=-1;return this.filter(()=>{const Va=Date.now();return Va-eb>Sa?(eb=Va,1):
0})},debounce(Sa){const eb=w();this.targets().add(w(null,null,f.debounce(Sa,Va=>{const La=Va.dataflow;eb.receive(Va);La&&La.run&&La.run()})));return eb},between(Sa,eb){let Va=!1;Sa.targets().add(w(null,null,()=>Va=!0));eb.targets().add(w(null,null,()=>Va=!1));return this.filter(()=>Va)},detach(){this._filter=f.truthy;this._targets=null}};const Ga={skip:!0},ua={};v.prototype={StopPropagation:ua,ADD:1,REM:2,MOD:4,ADD_REM:3,ADD_MOD:5,ALL:7,REFLOW:8,SOURCE:16,NO_SOURCE:32,NO_FIELDS:64,fork(Sa){return(new v(this.dataflow)).init(this,
Sa)},clone(){const Sa=this.fork(7);Sa.add=Sa.add.slice();Sa.rem=Sa.rem.slice();Sa.mod=Sa.mod.slice();Sa.source&&(Sa.source=Sa.source.slice());return Sa.materialize(23)},addAll(){let Sa=this;Sa.source&&Sa.add!==Sa.rem&&(Sa.rem.length||Sa.source.length!==Sa.add.length)&&(Sa=(new v(this.dataflow)).init(this),Sa.add=Sa.source,Sa.rem=[]);return Sa},init(Sa,eb){this.stamp=Sa.stamp;this.encode=Sa.encode;!Sa.fields||eb&64||(this.fields=Sa.fields);eb&1?(this.addF=Sa.addF,this.add=Sa.add):(this.addF=null,this.add=
[]);eb&2?(this.remF=Sa.remF,this.rem=Sa.rem):(this.remF=null,this.rem=[]);eb&4?(this.modF=Sa.modF,this.mod=Sa.mod):(this.modF=null,this.mod=[]);eb&32?this.source=this.srcF=null:(this.srcF=Sa.srcF,this.source=Sa.source,Sa.cleans&&(this.cleans=Sa.cleans));return this},runAfter(Sa){this.dataflow.runAfter(Sa)},changed(Sa){Sa=Sa||7;return Sa&1&&this.add.length||Sa&2&&this.rem.length||Sa&4&&this.mod.length},reflow(Sa){if(Sa)return this.fork(7).reflow();Sa=this.add.length;const eb=this.source&&this.source.length;
eb&&eb!==Sa&&(this.mod=this.source,Sa&&this.filter(4,N(this,1)));return this},clean(Sa){return arguments.length?(this.cleans=!!Sa,this):this.cleans},modifies(Sa){const eb=this.fields||(this.fields={});f.isArray(Sa)?Sa.forEach(Va=>eb[Va]=!0):eb[Sa]=!0;return this},modified(Sa,eb){const Va=this.fields;return(eb||this.mod.length)&&Va?arguments.length?f.isArray(Sa)?Sa.some(La=>Va[La]):Va[Sa]:!!Va:!1},filter(Sa,eb){Sa&1&&(this.addF=A(this.addF,eb));Sa&2&&(this.remF=A(this.remF,eb));Sa&4&&(this.modF=A(this.modF,
eb));Sa&16&&(this.srcF=A(this.srcF,eb));return this},materialize(Sa){Sa=Sa||7;Sa&1&&this.addF&&(this.add=O(this.add,this.addF),this.addF=null);Sa&2&&this.remF&&(this.rem=O(this.rem,this.remF),this.remF=null);Sa&4&&this.modF&&(this.mod=O(this.mod,this.modF),this.modF=null);Sa&16&&this.srcF&&(this.source=this.source.filter(this.srcF),this.srcF=null);return this},visit(Sa,eb){if(Sa&16)return f.visitArray(this.source,this.srcF,eb),this;Sa&1&&f.visitArray(this.add,this.addF,eb);Sa&2&&f.visitArray(this.rem,
this.remF,eb);Sa&4&&f.visitArray(this.mod,this.modF,eb);const Va=this.source;Sa&8&&Va&&(Sa=this.add.length+this.mod.length,Sa!==Va.length&&(Sa?f.visitArray(Va,N(this,5),eb):f.visitArray(Va,this.srcF,eb)));return this}};f.inherits(J,v,{fork(Sa){const eb=(new v(this.dataflow)).init(this,Sa&this.NO_FIELDS);void 0!==Sa&&(Sa&eb.ADD&&this.visit(eb.ADD,Va=>eb.add.push(Va)),Sa&eb.REM&&this.visit(eb.REM,Va=>eb.rem.push(Va)),Sa&eb.MOD&&this.visit(eb.MOD,Va=>eb.mod.push(Va)));return eb},changed(Sa){return this.changes&
Sa},modified(Sa){const eb=this.fields;return eb&&this.changes&this.MOD?f.isArray(Sa)?Sa.some(Va=>eb[Va]):eb[Sa]:0},filter(){f.error("MultiPulse does not support filtering.")},materialize(){f.error("MultiPulse does not support materialization.")},visit(Sa,eb){const Va=this.pulses,La=Va.length;let Ra=0;if(Sa&this.SOURCE)for(;Ra<La;++Ra)Va[Ra].visit(Sa,eb);else for(;Ra<La;++Ra)Va[Ra].stamp===this.stamp&&Va[Ra].visit(Sa,eb);return this}});const Fa={skip:!1,force:!1};r.prototype={stamp(){return this._clock},
loader(Sa){return arguments.length?(this._loader=Sa,this):this._loader},locale(Sa){return arguments.length?(this._locale=Sa,this):this._locale},logger(Sa){return arguments.length?(this._log=Sa,this):this._log},error:Y("error"),warn:Y("warn"),info:Y("info"),debug:Y("debug"),logLevel:Y("level"),cleanThreshold:1E4,add:function(Sa,eb,Va,La){let Ra=1;Sa instanceof V||(Sa&&Sa.prototype instanceof V?Sa=new Sa:f.isFunction(Sa)?Sa=new V(null,Sa):(Ra=0,Sa=new V(Sa,eb)));this.rank(Sa);Ra&&(La=Va,Va=eb);Va&&
this.connect(Sa,Sa.parameters(Va,La));this.touch(Sa);return Sa},connect:function(Sa,eb){const Va=Sa.rank,La=eb.length;for(let Ra=0;Ra<La;++Ra)if(Va<eb[Ra].rank){this.rerank(Sa);break}},rank:function(Sa){Sa.rank=++this._rank},rerank:function(Sa){const eb=[Sa];let Va,La,Ra;for(;eb.length;)if(this.rank(Va=eb.pop()),La=Va._targets)for(Ra=La.length;0<=--Ra;)eb.push(Va=La[Ra]),Va===Sa&&f.error("Cycle detected in dataflow graph.")},pulse:function(Sa,eb,Va){this.touch(Sa,Va||Fa);Va=new v(this,this._clock+
(this._pulse?0:1));const La=Sa.pulse&&Sa.pulse.source||[];Va.target=Sa;this._input[Sa.id]=eb.pulse(Va,La);return this},touch:function(Sa,eb){eb=eb||Fa;this._pulse?this._enqueue(Sa):this._touched.add(Sa);eb.skip&&Sa.skip(!0);return this},update:function(Sa,eb,Va){Va=Va||Fa;(Sa.set(eb)||Va.force)&&this.touch(Sa,Va);return this},changeset:X,ingest:function(Sa,eb,Va){eb=this.parse(eb,Va);return this.pulse(Sa,this.changeset().insert(eb))},parse:function(Sa,eb){const Va=this.locale();return h.read(Sa,eb,
Va.timeParse,Va.utcParse)},preload:async function(Sa,eb,Va){const La=this._pending||x(this);La.requests+=1;eb=await this.request(eb,Va);this.pulse(Sa,this.changeset().remove(f.truthy).insert(eb.data||[]));La.done();return eb},request:async function(Sa,eb){let Va=0,La;try{La=await this.loader().load(Sa,{context:"dataflow",response:h.responseType(eb&&eb.type)});try{La=this.parse(La,eb)}catch(Ra){Va=-2,this.warn("Data ingestion failed",Sa,Ra)}}catch(Ra){Va=-1,this.warn("Loading failed",Sa,Ra)}return{data:La,
status:Va}},events:function(Sa,eb,Va,La){const Ra=this,la=w(Va,La);Va=function(ma){ma.dataflow=Ra;try{la.receive(ma)}catch(Aa){Ra.error(Aa)}finally{Ra.run()}};Sa="string"===typeof Sa&&"undefined"!==typeof document?document.querySelectorAll(Sa):f.array(Sa);La=Sa.length;for(let ma=0;ma<La;++ma)Sa[ma].addEventListener(eb,Va);return la},on:function(Sa,eb,Va,La,Ra){(Sa instanceof V?R:I)(this,Sa,eb,Va,La,Ra);return this},evaluate:async function(Sa,eb,Va){const La=this,Ra=[];if(La._pulse)return T(La);La._pending&&
await La._pending;eb&&await q(La,eb);if(!La._touched.length)return La.debug("Dataflow invoked, but nothing to do."),La;eb=++La._clock;La._pulse=new v(La,eb,Sa);La._touched.forEach(Qa=>La._enqueue(Qa,!0));La._touched=u(f.id);let la=0;let ma,Aa;try{for(;0<La._heap.size();){var Da=La._heap.pop();Da.rank!==Da.qrank?La._enqueue(Da,!0):(ma=Da.run(La._getPulse(Da,Sa)),ma.then?ma=await ma:ma.async&&(Ra.push(ma.async),ma=ua),ma!==ua&&Da._targets&&Da._targets.forEach(Qa=>La._enqueue(Qa)),++la)}}catch(Qa){La._heap.clear(),
Aa=Qa}La._input={};La._pulse=null;La.debug(`Pulse ${eb}: ${la} operators`);Aa&&(La._postrun=[],La.error(Aa));if(La._postrun.length)for(Sa=La._postrun.sort((Qa,Ea)=>Ea.priority-Qa.priority),La._postrun=[],Da=0;Da<Sa.length;++Da)await q(La,Sa[Da].callback);Va&&await q(La,Va);Ra.length&&Promise.all(Ra).then(Qa=>La.runAsync(null,()=>{Qa.forEach(Ea=>{try{Ea(La)}catch(kb){La.error(kb)}})}));return La},run:function(Sa,eb,Va){return this._pulse?T(this):(this.evaluate(Sa,eb,Va),this)},runAsync:async function(Sa,
eb,Va){for(;this._running;)await this._running;const La=()=>this._running=null;(this._running=this.evaluate(Sa,eb,Va)).then(La,La);return this._running},runAfter:function(Sa,eb,Va){if(this._pulse||eb)this._postrun.push({priority:Va||0,callback:Sa});else try{Sa(this)}catch(La){this.error(La)}},_enqueue:function(Sa,eb){const Va=Sa.stamp<this._clock;Va&&(Sa.stamp=this._clock);if(Va||eb)Sa.qrank=Sa.rank,this._heap.push(Sa)},_getPulse:function(Sa,eb){const Va=Sa.source,La=this._clock;return Va&&f.isArray(Va)?
new J(this,La,Va.map(Ra=>Ra.pulse),eb):this._input[Sa.id]||z(this._pulse,Va&&Va.pulse)}};f.inherits(Z,V,{run(Sa){if(Sa.stamp<this.stamp)return Sa.StopPropagation;let eb;this.skip()?this.skip(!1):eb=this.evaluate(Sa);eb=eb||Sa;eb.then?eb=eb.then(Va=>this.pulse=Va):eb!==Sa.StopPropagation&&(this.pulse=eb);return eb},evaluate(Sa){const eb=this.marshall(Sa.stamp);Sa=this.transform(eb,Sa);eb.clear();return Sa},transform(){}});const Xa={};k.Dataflow=r;k.EventStream=t;k.MultiPulse=J;k.Operator=V;k.Parameters=
S;k.Pulse=v;k.Transform=Z;k.UniqueList=u;k.asyncCallback=q;k.changeset=X;k.definition=function(Sa){return(Sa=E(Sa))&&Sa.Definition||null};k.derive=function(Sa){return U(Sa,D({}))};k.ingest=D;k.isChangeSet=aa;k.isTuple=function(Sa){return!(!Sa||!Sa[C])};k.rederive=U;k.replace=function(Sa,eb){eb[C]=Sa[C];return eb};k.stableCompare=function(Sa,eb){return Sa?eb?(Va,La)=>Sa(Va,La)||eb(Va)[C]-eb(La)[C]:(Va,La)=>Sa(Va,La)||Va[C]-La[C]:null};k.transform=E;k.transforms=Xa;k.tupleid=function(Sa){return Sa[C]};
Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[518]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(506)):"function"===typeof define&&define.amd?define(["exports","d3-array"],f):(k="undefined"!==typeof globalThis?globalThis:k||self,f(k.vega={},k.d3))})(this,function(k,f){function*h(C,W){if(null==W)for(var fa of C)null!=fa&&""!==fa&&(fa=+fa)>=fa&&(yield fa);else{fa=-1;for(let ja of C)ja=W(ja,++fa,C),null!=ja&&""!==ja&&(ja=+ja)>=ja&&(yield ja)}}function l(C,W,fa){const ja=Float64Array.from(h(C,
fa));ja.sort(f.ascending);return W.map(Ba=>f.quantileSorted(ja,Ba))}function u(C,W){return l(C,[.25,.5,.75],W)}function q(C,W){const fa=C.length,ja=f.deviation(C,W);C=u(C,W);return 1.06*(Math.min(ja,(C[2]-C[0])/1.34)||ja||Math.abs(C[0])||1)*Math.pow(fa,-.2)}function D(C,W){const fa=C.length;let ja=0,Ba=1,Ga,ua;for(;C[ja]===C[Ba];)++Ba;for(;Ba<fa;){for(Ga=Ba+1;C[Ba]===C[Ga];)++Ga;if(C[Ba]-C[Ba-1]<W){for(ua=Ba+(ja+Ga-Ba-Ba>>1);ua<Ba;)C[ua++]=C[Ba];for(;ua>Ba;)C[ua--]=C[ja]}ja=Ba;Ba=Ga}return C}function U(C,
W){C=C||0;W=null==W?1:W;let fa,ja;if(Z===Z)fa=Z,Z=NaN;else{do{fa=2*k.random()-1;ja=2*k.random()-1;var Ba=fa*fa+ja*ja}while(0===Ba||1<Ba);Ba=Math.sqrt(-2*Math.log(Ba)/Ba);fa*=Ba;Z=ja*Ba}return C+fa*W}function aa(C,W,fa){fa=null==fa?1:fa;C=(C-(W||0))/fa;return Math.exp(-.5*C*C)/(fa*r)}function X(C,W,fa){C=(C-(W||0))/(null==fa?1:fa);W=Math.abs(C);37<W?fa=0:(fa=Math.exp(-W*W/2),7.07106781186547>W?(fa*=(((((.0352624965998911*W+.700383064443688)*W+6.37396220353165)*W+33.912866078383)*W+112.079291497871)*
W+221.213596169931)*W+220.206867912376,fa/=((((((.0883883476483184*W+1.75566716318264)*W+16.064177579207)*W+86.7807322029461)*W+296.564248779674)*W+637.333633378831)*W+793.826512519948)*W+440.413735824752):fa=fa/(W+1/(W+2/(W+3/(W+4/(W+.65)))))/2.506628274631);return 0<C?1-fa:fa}function S(C,W,fa){if(0>C||1<C)return NaN;C=2*C-1;var ja=-Math.log((1-C)*(1+C));6.25>ja?(ja-=3.125,ja=1.6536545626831027+(.24015818242558962+(-.006033670871430149+(-7.40702534166267E-4+(1.8673420803405714E-4+(-1.3882523362786469E-5+
(-1.3654692000834679E-6+(4.2347877827932404E-7+(-2.9070369957882005E-8+(-4.112633980346984E-9+(1.0512122733215323E-9+(-5.415412054294628E-11+(-1.2975133253453532E-11+(2.6335093153082323E-12+(-8.151934197605472E-14+(-4.054566272975207E-14+(6.637638134358324E-15+(2.0972767875968562E-17+(-1.333171662854621E-16+(1.1157877678025181E-17+(1.28584807152564E-18+(-1.6850591381820166E-19+-3.64441206401782E-21*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja):16>ja?(ja=Math.sqrt(ja)-
3.25,ja=3.0838856104922208+(1.0052589676941592+(.005370914553590064+(-.003751208507569241+(.002491442096107851+(-.0016882755560235047+(9.532893797373805E-4+(-3.550375203628475E-4+(2.4031110387097894E-5+(6.828485145957318E-5+(-4.7318229009055734E-5+(1.2475304481671779E-5+(2.9234449089955446E-6+(-4.013867526981546E-6+(1.5027403968909828E-6+(1.8239629214389228E-8+(-2.7517406297064545E-7+(9.075656193888539E-8+2.2137376921775787E-9*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja):
Number.isFinite(ja)?(ja=Math.sqrt(ja)-5,ja=4.849906401408584+(1.0103004648645344+(-1.3871931833623122E-4+(-2.1503011930044477E-4+(7.599527703001776E-5+(-1.968177810553167E-5+(4.526062597223154E-6+(-9.9298272942317E-7+(2.2900482228026655E-7+(-6.771199775845234E-8+(2.914795345090108E-8+(-1.496002662714924E-8+(7.61570120807834E-9+(-3.789465440126737E-9+(1.5076572693500548E-9+(-2.555641816996525E-10+-2.7109920616438573E-11*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja)*ja):ja=Infinity;return(W||
0)+(null==fa?1:fa)*Y*ja*C}function V(C,W){let fa,ja;const Ba={mean(Ga){return arguments.length?(fa=Ga||0,Ba):fa},stdev(Ga){return arguments.length?(ja=null==Ga?1:Ga,Ba):ja},sample:()=>U(fa,ja),pdf:Ga=>aa(Ga,fa,ja),cdf:Ga=>X(Ga,fa,ja),icdf:Ga=>S(Ga,fa,ja)};return Ba.mean(C).stdev(W)}function F(C,W){W=null==W?1:W;return Math.exp((C||0)+U()*W)}function t(C,W,fa){if(0>=C)return 0;fa=null==fa?1:fa;W=(Math.log(C)-(W||0))/fa;return Math.exp(-.5*W*W)/(fa*r*C)}function w(C,W,fa){return X(Math.log(C),W,fa)}
function x(C,W,fa){return Math.exp(S(C,W,fa))}function I(C,W){null==W&&(W=null==C?1:C,C=0);return C+(W-C)*k.random()}function R(C,W,fa){null==fa&&(fa=null==W?1:W,W=0);return C>=W&&C<=fa?1/(fa-W):0}function B(C,W,fa){null==fa&&(fa=null==W?1:W,W=0);return C<W?0:C>fa?1:(C-W)/(fa-W)}function v(C,W,fa){null==fa&&(fa=null==W?1:W,W=0);return 0<=C&&1>=C?W+C*(fa-W):NaN}function O(C,W,fa,ja){ja-=C*C;fa=1E-24>Math.abs(ja)?0:(fa-C*W)/ja;return[W-fa*C,fa]}function N(C,W,fa,ja){C=C.filter(Va=>{let La=W(Va);Va=
fa(Va);return null!=La&&(La=+La)>=La&&null!=Va&&(Va=+Va)>=Va});ja&&C.sort((Va,La)=>W(Va)-W(La));ja=C.length;const Ba=new Float64Array(ja),Ga=new Float64Array(ja);let ua=0,Fa=0,Xa=0,Sa,eb;for(eb of C)Ba[ua]=C=+W(eb),Ga[ua]=Sa=+fa(eb),++ua,Fa+=(C-Fa)/ua,Xa+=(Sa-Xa)/ua;for(ua=0;ua<ja;++ua)Ba[ua]-=Fa,Ga[ua]-=Xa;return[Ba,Ga,Fa,Xa]}function A(C,W,fa,ja){let Ba=-1,Ga;for(const ua of C)C=W(ua),Ga=fa(ua),null!=C&&(C=+C)>=C&&null!=Ga&&(Ga=+Ga)>=Ga&&ja(C,Ga,++Ba)}function J(C,W,fa,ja,Ba){let Ga=0,ua=0;A(C,
W,fa,(Fa,Xa)=>{Fa=Xa-Ba(Fa);Xa-=ja;Ga+=Fa*Fa;ua+=Xa*Xa});return 1-Ga/ua}function T(C,W,fa){let ja=0,Ba=0,Ga=0,ua=0,Fa=0;A(C,W,fa,(eb,Va)=>{++Fa;ja+=(eb-ja)/Fa;Ba+=(Va-Ba)/Fa;Ga+=(eb*Va-Ga)/Fa;ua+=(eb*eb-ua)/Fa});const Xa=O(ja,Ba,Ga,ua),Sa=eb=>Xa[0]+Xa[1]*eb;return{coef:Xa,predict:Sa,rSquared:J(C,W,fa,Ba,Sa)}}function z(C,W,fa){const [ja,Ba,Ga,ua]=N(C,W,fa);var Fa=ja.length,Xa=0;let Sa=0;var eb=0;let Va=0,La=0,Ra,la,ma,Aa;for(Ra=0;Ra<Fa;)la=ja[Ra],ma=Ba[Ra++],Aa=la*la,Xa+=(Aa-Xa)/Ra,Sa+=(Aa*la-Sa)/
Ra,eb+=(Aa*Aa-eb)/Ra,Va+=(la*ma-Va)/Ra,La+=(Aa*ma-La)/Ra;Fa=eb-Xa*Xa;eb=Xa*Fa-Sa*Sa;const Da=(La*Xa-Va*Sa)/eb,Qa=(Va*Fa-La*Sa)/eb,Ea=-Da*Xa;Xa=kb=>{kb-=Ga;return Da*kb*kb+Qa*kb+Ea+ua};return{coef:[Ea-Qa*Ga+Da*Ga*Ga+ua,Qa-2*Da*Ga,Da],predict:Xa,rSquared:J(C,W,fa,ua,Xa)}}function ba(C,W,fa,ja){const Ba=Array(C);let Ga,ua,Fa;for(Ga=0;Ga<C;++Ga)Ba[Ga]=0;for(Ga=C-1;0<=Ga;--Ga)for(ua=W[Ga],Fa=1,Ba[Ga]+=ua,C=1;C<=Ga;++C)Fa*=(Ga+1-C)/C,Ba[Ga-C]+=ua*Math.pow(fa,C)*Fa;Ba[0]+=ja;return Ba}function K(C){const W=
C.length-1,fa=[];let ja,Ba,Ga,ua,Fa;for(ja=0;ja<W;++ja){ua=ja;for(Ba=ja+1;Ba<W;++Ba)Math.abs(C[ja][Ba])>Math.abs(C[ja][ua])&&(ua=Ba);for(Ga=ja;Ga<W+1;++Ga)Fa=C[Ga][ja],C[Ga][ja]=C[Ga][ua],C[Ga][ua]=Fa;for(Ba=ja+1;Ba<W;++Ba)for(Ga=W;Ga>=ja;Ga--)C[Ga][Ba]-=C[Ga][ja]*C[ja][Ba]/C[ja][ja]}for(Ba=W-1;0<=Ba;--Ba){Fa=0;for(Ga=Ba+1;Ga<W;++Ga)Fa+=C[Ga][Ba]*fa[Ga];fa[Ba]=(C[W][Ba]-Fa)/C[Ba][Ba]}return fa}k.random=Math.random;const r=Math.sqrt(2*Math.PI),Y=Math.SQRT2;let Z=NaN;const E=.5*Math.PI/180;k.bandwidthNRD=
q;k.bin=function(C){var W=C.maxbins||20;const fa=C.base||10,ja=Math.log(fa),Ba=C.divide||[5,2];let Ga=C.extent[0],ua=C.extent[1];let Fa,Xa,Sa,eb;const Va=C.span||ua-Ga||Math.abs(Ga)||1;if(C.step)var La=C.step;else if(C.steps){Xa=Va/W;Sa=0;for(eb=C.steps.length;Sa<eb&&C.steps[Sa]<Xa;++Sa);La=C.steps[Math.max(0,Sa-1)]}else{La=Math.ceil(Math.log(W)/ja);Fa=C.minstep||0;for(La=Math.max(Fa,Math.pow(fa,Math.round(Math.log(Va)/ja)-La));Math.ceil(Va/La)>W;)La*=fa;Sa=0;for(eb=Ba.length;Sa<eb;++Sa)Xa=La/Ba[Sa],
Xa>=Fa&&Va/Xa<=W&&(La=Xa)}Xa=Math.log(La);W=Math.pow(fa,-(0<=Xa?0:~~(-Xa/ja)+1)-1);if(C.nice||void 0===C.nice)Xa=Math.floor(Ga/La+W)*La,Ga=Ga<Xa?Xa-La:Xa,ua=Math.ceil(ua/La)*La;return{start:Ga,stop:ua===Ga?Ga+La:ua,step:La}};k.bootstrapCI=function(C,W,fa,ja){if(!C.length)return[void 0,void 0];C=Float64Array.from(h(C,ja));ja=C.length;let Ba,Ga,ua,Fa;ua=0;for(Fa=Array(W);ua<W;++ua){for(Ga=Ba=0;Ga<ja;++Ga)Ba+=C[~~(k.random()*ja)];Fa[ua]=Ba/ja}Fa.sort(f.ascending);return[f.quantile(Fa,fa/2),f.quantile(Fa,
1-fa/2)]};k.cumulativeLogNormal=w;k.cumulativeNormal=X;k.cumulativeUniform=B;k.densityLogNormal=t;k.densityNormal=aa;k.densityUniform=R;k.dotbin=function(C,W,fa,ja){ja=ja||(La=>La);const Ba=C.length,Ga=new Float64Array(Ba);let ua=0,Fa=1,Xa=ja(C[0]),Sa=Xa,eb=Xa+W,Va;for(;Fa<Ba;++Fa){Va=ja(C[Fa]);if(Va>=eb){for(Sa=(Xa+Sa)/2;ua<Fa;++ua)Ga[ua]=Sa;eb=Va+W;Xa=Va}Sa=Va}for(Sa=(Xa+Sa)/2;ua<Fa;++ua)Ga[ua]=Sa;return fa?D(Ga,W+W/4):Ga};k.quantileLogNormal=x;k.quantileNormal=S;k.quantileUniform=v;k.quantiles=
l;k.quartiles=u;k.randomInteger=function(C,W){null==W&&(W=C,C=0);let fa,ja,Ba;const Ga={min(ua){return arguments.length?(fa=ua||0,Ba=ja-fa,Ga):fa},max(ua){return arguments.length?(ja=ua||0,Ba=ja-fa,Ga):ja},sample(){return fa+Math.floor(Ba*k.random())},pdf(ua){return ua===Math.floor(ua)&&ua>=fa&&ua<ja?1/Ba:0},cdf(ua){ua=Math.floor(ua);return ua<fa?0:ua>=ja?1:(ua-fa+1)/Ba},icdf(ua){return 0<=ua&&1>=ua?fa-1+Math.floor(ua*Ba):NaN}};return Ga.min(C).max(W)};k.randomKDE=function(C,W){const fa=V();let ja=
0;const Ba={data(Ga){return arguments.length?(ja=(C=Ga)?Ga.length:0,Ba.bandwidth(W)):C},bandwidth(Ga){if(!arguments.length)return W;W=Ga;!W&&C&&(W=q(C));return Ba},sample(){return C[~~(k.random()*ja)]+W*fa.sample()},pdf(Ga){let ua=0,Fa=0;for(;Fa<ja;++Fa)ua+=fa.pdf((Ga-C[Fa])/W);return ua/W/ja},cdf(Ga){let ua=0,Fa=0;for(;Fa<ja;++Fa)ua+=fa.cdf((Ga-C[Fa])/W);return ua/ja},icdf(){throw Error("KDE icdf not supported.");}};return Ba.data(C)};k.randomLCG=function(C){return function(){C=(1103515245*C+12345)%
2147483647;return C/2147483647}};k.randomLogNormal=function(C,W){let fa,ja;const Ba={mean(Ga){return arguments.length?(fa=Ga||0,Ba):fa},stdev(Ga){return arguments.length?(ja=null==Ga?1:Ga,Ba):ja},sample:()=>F(fa,ja),pdf:Ga=>t(Ga,fa,ja),cdf:Ga=>w(Ga,fa,ja),icdf:Ga=>x(Ga,fa,ja)};return Ba.mean(C).stdev(W)};k.randomMixture=function(C,W){let fa=0,ja;const Ba={weights(Ga){if(arguments.length){var ua=W=Ga||[];const Fa=[];let Xa=0,Sa;for(Sa=0;Sa<fa;++Sa)Xa+=Fa[Sa]=null==ua[Sa]?1:+ua[Sa];for(Sa=0;Sa<fa;++Sa)Fa[Sa]/=
Xa;ja=Fa;return Ba}return W},distributions(Ga){return arguments.length?(Ga?(fa=Ga.length,C=Ga):(fa=0,C=[]),Ba.weights(W)):C},sample(){const Ga=k.random();let ua=C[fa-1],Fa=ja[0],Xa=0;for(;Xa<fa-1;Fa+=ja[++Xa])if(Ga<Fa){ua=C[Xa];break}return ua.sample()},pdf(Ga){let ua=0,Fa=0;for(;Fa<fa;++Fa)ua+=ja[Fa]*C[Fa].pdf(Ga);return ua},cdf(Ga){let ua=0,Fa=0;for(;Fa<fa;++Fa)ua+=ja[Fa]*C[Fa].cdf(Ga);return ua},icdf(){throw Error("Mixture icdf not supported.");}};return Ba.distributions(C).weights(W)};k.randomNormal=
V;k.randomUniform=function(C,W){let fa,ja;const Ba={min(Ga){return arguments.length?(fa=Ga||0,Ba):fa},max(Ga){return arguments.length?(ja=null==Ga?1:Ga,Ba):ja},sample:()=>I(fa,ja),pdf:Ga=>R(Ga,fa,ja),cdf:Ga=>B(Ga,fa,ja),icdf:Ga=>v(Ga,fa,ja)};null==W&&(W=null==C?1:C,C=0);return Ba.min(C).max(W)};k.regressionExp=function(C,W,fa){const [ja,,Ba,Ga]=N(C,W,fa);let ua=0,Fa=0,Xa=0,Sa=0,eb=0,Va,La,Ra;A(C,W,fa,(Da,Qa)=>{Va=ja[eb++];La=Math.log(Qa);Ra=Va*Qa;ua+=(Qa*La-ua)/eb;Fa+=(Ra-Fa)/eb;Xa+=(Ra*La-Xa)/eb;
Sa+=(Va*Ra-Sa)/eb});const [la,ma]=O(Fa/Ga,ua/Ga,Xa/Ga,Sa/Ga),Aa=Da=>Math.exp(la+ma*(Da-Ba));return{coef:[Math.exp(la-ma*Ba),ma],predict:Aa,rSquared:J(C,W,fa,Ga,Aa)}};k.regressionLinear=T;k.regressionLoess=function(C,W,fa,ja){const [Ba,Ga,ua,Fa]=N(C,W,fa,!0);C=Ba.length;W=Math.max(2,~~(ja*C));ja=new Float64Array(C);fa=new Float64Array(C);var Xa=(new Float64Array(C)).fill(1);for(var Sa=-1;2>=++Sa;){var eb=[0,W-1];for(let Ea=0;Ea<C;++Ea){var Va=Ba[Ea],La=eb[0],Ra=eb[1],la=0,ma=0,Aa=0,Da=0;let kb=0;const cb=
1/Math.abs(Ba[Va-Ba[La]>Ba[Ra]-Va?La:Ra]-Va||1);for(;La<=Ra;++La){const Wb=Ba[La],sa=Ga[La];var Qa=Math.abs(Va-Wb)*cb;const ra=(Qa=1-Qa*Qa*Qa)*Qa*Qa*Xa[La];Qa=Wb*ra;la+=ra;ma+=Qa;Aa+=sa*ra;Da+=sa*Qa;kb+=Wb*Qa}const [Mb,Gb]=O(ma/la,Aa/la,Da/la,kb/la);ja[Ea]=Mb+Gb*Va;fa[Ea]=Math.abs(Ga[Ea]-ja[Ea]);Va=Ba;Ra=Ea+1;la=eb;ma=Va[Ra];Aa=la[0];Da=la[1]+1;if(!(Da>=Va.length))for(;Ra>Aa&&Va[Da]-ma<=ma-Va[Aa];)la[0]=++Aa,la[1]=Da,++Da}if(2===Sa)break;eb=f.median(fa);if(1E-12>Math.abs(eb))break;for(let Ea=0,kb,
cb;Ea<C;++Ea)kb=fa[Ea]/(6*eb),Xa[Ea]=1<=kb?1E-12:(cb=1-kb*kb)*cb}C=Ba.length;W=[];Xa=fa=0;for(Sa=[];fa<C;++fa)eb=Ba[fa]+ua,Sa[0]===eb?Sa[1]+=(ja[fa]-Sa[1])/++Xa:(Xa=0,Sa[1]+=Fa,Sa=[eb,ja[fa]],W.push(Sa));Sa[1]+=Fa;return W};k.regressionLog=function(C,W,fa){let ja=0,Ba=0,Ga=0,ua=0,Fa=0;A(C,W,fa,(eb,Va)=>{++Fa;eb=Math.log(eb);ja+=(eb-ja)/Fa;Ba+=(Va-Ba)/Fa;Ga+=(eb*Va-Ga)/Fa;ua+=(eb*eb-ua)/Fa});const Xa=O(ja,Ba,Ga,ua),Sa=eb=>Xa[0]+Xa[1]*Math.log(eb);return{coef:Xa,predict:Sa,rSquared:J(C,W,fa,Ba,Sa)}};
k.regressionPoly=function(C,W,fa,ja){if(1===ja)return T(C,W,fa);if(2===ja)return z(C,W,fa);const [Ba,Ga,ua,Fa]=N(C,W,fa);var Xa=Ba.length;const Sa=[],eb=[],Va=ja+1;let La,Ra,la,ma;for(La=0;La<Va;++La){for(la=Ra=0;Ra<Xa;++Ra)la+=Math.pow(Ba[Ra],La)*Ga[Ra];Sa.push(la);ma=new Float64Array(Va);for(ja=0;ja<Va;++ja){for(la=Ra=0;Ra<Xa;++Ra)la+=Math.pow(Ba[Ra],La+ja);ma[ja]=la}eb.push(ma)}eb.push(Sa);const Aa=K(eb);Xa=Da=>{Da-=ua;let Qa=Fa+Aa[0]+Aa[1]*Da+Aa[2]*Da*Da;for(La=3;La<Va;++La)Qa+=Aa[La]*Math.pow(Da,
La);return Qa};return{coef:ba(Va,Aa,-ua,Fa),predict:Xa,rSquared:J(C,W,fa,Fa,Xa)}};k.regressionPow=function(C,W,fa){let ja=0,Ba=0,Ga=0,ua=0,Fa=0,Xa=0;A(C,W,fa,(Va,La)=>{Va=Math.log(Va);const Ra=Math.log(La);++Xa;ja+=(Va-ja)/Xa;Ba+=(Ra-Ba)/Xa;Ga+=(Va*Ra-Ga)/Xa;ua+=(Va*Va-ua)/Xa;Fa+=(La-Fa)/Xa});const Sa=O(ja,Ba,Ga,ua),eb=Va=>Sa[0]*Math.pow(Va,Sa[1]);Sa[0]=Math.exp(Sa[0]);return{coef:Sa,predict:eb,rSquared:J(C,W,fa,Fa,eb)}};k.regressionQuad=z;k.sampleCurve=function(C,W,fa,ja){fa=fa||25;ja=Math.max(fa,
ja||200);var Ba=W[0],Ga=W[1],ua=Ga-Ba,Fa=ua/ja;W=[[Ba,C(Ba)]];var Xa=[];if(fa===ja){for(var Sa=1;Sa<ja;++Sa){Fa=W;Xa=Fa.push;var eb=Ba+Sa/fa*ua;eb=[eb,C(eb)];Xa.call(Fa,eb)}W.push([Ga,C(Ga)]);return W}Xa.push([Ga,C(Ga)]);for(Sa=fa;0<--Sa;)ja=Xa,Ga=ja.push,eb=Ba+Sa/fa*ua,eb=[eb,C(eb)],Ga.call(ja,eb);fa=W[0];Ba=Xa[Xa.length-1];ua=1/ua;ja=Ga=fa[1];Sa=Xa.length;for(eb=0;eb<Sa;++eb){const Va=Xa[eb][1];Va<ja&&(ja=Va);Va>Ga&&(Ga=Va)}for(ja=1/(Ga-ja);Ba;)Ga=(fa[0]+Ba[0])/2,Ga=[Ga,C(Ga)],Ga[0]-fa[0]>=Fa&&
Math.abs(Math.atan2(ja*(Ba[1]-fa[1]),ua*(Ba[0]-fa[0]))-Math.atan2(ja*(Ga[1]-fa[1]),ua*(Ga[0]-fa[0])))>E?Xa.push(Ga):(fa=Ba,W.push(Ba),Xa.pop()),Ba=Xa[Xa.length-1];return W};k.sampleLogNormal=F;k.sampleNormal=U;k.sampleUniform=I;k.setRandom=function(C){k.random=C};Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[519]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(503),da(517),da(518),da(506),da(509)):"function"===typeof define&&define.amd?define("exports vega-util vega-dataflow vega-statistics d3-array vega-time".split(" "),f):(k="undefined"!==typeof globalThis?globalThis:k||self,f(k.vega={},k.vega,k.vega,k.vega,k.d3,k.vega))})(this,function(k,f,h,l,u,q){function D(Bb){return $b=>{const Gc=Bb.length;let Jc=1,ud=String(Bb[0]($b));for(;Jc<Gc;++Jc)ud+=
"|"+Bb[Jc]($b);return ud}}function U(Bb){return Bb&&Bb.length?1===Bb.length?Bb[0]:D(Bb):function(){return""}}function aa(Bb,$b){return Gc=>f.extend({name:Bb,out:Gc||Bb},fe,$b)}function X(Bb,$b){return Bb.idx-$b.idx}function S(Bb){const $b={};Bb.forEach(Jc=>$b[Jc.name]=Jc);const Gc=Jc=>{Jc.req&&Jc.req.forEach(ud=>{$b[ud]||Gc($b[ud]=Ee[ud]())})};Bb.forEach(Gc);return Object.values($b).sort(X)}function V(){this.missing=this.valid=0;this._ops.forEach(Bb=>Bb.init(this))}function F(Bb,$b){null==Bb||""===
Bb?++this.missing:Bb===Bb&&(++this.valid,this._ops.forEach(Gc=>Gc.add(this,Bb,$b)))}function t(Bb,$b){null==Bb||""===Bb?--this.missing:Bb===Bb&&(--this.valid,this._ops.forEach(Gc=>Gc.rem(this,Bb,$b)))}function w(Bb){this._out.forEach($b=>Bb[$b.out]=$b.value(this));return Bb}function x(Bb,$b){function Gc(Zc){this._ops=Jc;this._out=ud;this.cell=Zc;this.init()}$b=$b||f.identity;const Jc=S(Bb),ud=Bb.slice().sort(X);Gc.prototype.init=V;Gc.prototype.add=F;Gc.prototype.rem=t;Gc.prototype.set=w;Gc.prototype.get=
$b;Gc.fields=Bb.map(Zc=>Zc.out);return Gc}function I(Bb){this._key=Bb?f.field(Bb):h.tupleid;this.reset()}function R(Bb){h.Transform.call(this,null,Bb);this._adds=[];this._mods=[];this._mlen=this._alen=0;this._drop=!0;this._cross=!1;this._dims=[];this._dnames=[];this._measures=[];this._countOnly=!1;this._outputs=this._inputs=this._prev=this._counts=null}function B(Bb){h.Transform.call(this,null,Bb)}function v(Bb,$b,Gc){let Jc=$b||[],ud=Gc||[],Zc={},xd=0;return{add:Sd=>ud.push(Sd),remove:Sd=>Zc[Bb(Sd)]=
++xd,size:()=>Jc.length,data:(Sd,ie)=>{xd&&(Jc=Jc.filter(Be=>!Zc[Bb(Be)]),Zc={},xd=0);ie&&Sd&&Jc.sort(Sd);ud.length&&(Jc=Sd?f.merge(Sd,Jc,ud.sort(Sd)):Jc.concat(ud),ud=[]);return Jc}}}function O(Bb){h.Transform.call(this,[],Bb)}function N(Bb){h.Operator.call(this,null,A,Bb)}function A(Bb){return this.value&&!Bb.modified()?this.value:f.compare(Bb.fields,Bb.orders)}function J(Bb){h.Transform.call(this,null,Bb)}function T(Bb){h.Transform.call(this,null,Bb)}function z(Bb,$b){var Gc=Bb["function"];f.hasOwnProperty(nd,
Gc)||f.error("Unknown distribution function: "+Gc);Gc=nd[Gc]();for(const Jc in Bb)if("field"===Jc)Gc.data((Bb.from||$b()).map(Bb[Jc]));else if("distributions"===Jc)Gc[Jc](Bb[Jc].map(ud=>z(ud,$b)));else if("function"===typeof Gc[Jc])Gc[Jc](Bb[Jc]);return Gc}function ba(Bb){h.Transform.call(this,null,Bb)}function K(Bb){return()=>Bb.materialize(Bb.SOURCE).source}function r(Bb,$b){return Bb?Bb.map((Gc,Jc)=>$b[Jc]||f.accessorName(Gc)):null}function Y(Bb,$b,Gc){const Jc=[],ud=Oc=>Oc(ie);let Zc,xd,Sd,ie,
Be,uc;if(null==$b)Jc.push(Bb.map(Gc));else for(Zc={},xd=0,Sd=Bb.length;xd<Sd;++xd)ie=Bb[xd],Be=$b.map(ud),uc=Zc[Be],uc||(Zc[Be]=uc=[],uc.dims=Be,Jc.push(uc)),uc.push(Gc(ie));return Jc}function Z(Bb){h.Transform.call(this,null,Bb)}function E(Bb){h.Operator.call(this,null,C,Bb);this.modified(!0)}function C(Bb){const $b=Bb.expr;return this.value&&!Bb.modified("expr")?this.value:f.accessor(Gc=>$b(Gc,Bb),f.accessorFields($b),f.accessorName($b))}function W(Bb){h.Transform.call(this,[void 0,void 0],Bb)}
function fa(Bb,$b){h.Operator.call(this,Bb);this.parent=$b;this.count=0}function ja(Bb){h.Transform.call(this,{},Bb);this._keys=f.fastmap();const $b=this._targets=[];$b.active=0;$b.forEach=Gc=>{for(let Jc=0,ud=$b.active;Jc<ud;++Jc)Gc($b[Jc],Jc,$b)}}function Ba(Bb){h.Operator.call(this,null,Ga,Bb)}function Ga(Bb){return this.value&&!Bb.modified()?this.value:f.isArray(Bb.name)?f.array(Bb.name).map($b=>f.field($b)):f.field(Bb.name,Bb.as)}function ua(Bb){h.Transform.call(this,f.fastmap(),Bb)}function Fa(Bb){h.Transform.call(this,
[],Bb)}function Xa(Bb){h.Transform.call(this,[],Bb)}function Sa(Bb){h.Transform.call(this,null,Bb)}function eb(Bb){h.Transform.call(this,[],Bb)}function Va(Bb){h.Transform.call(this,[],Bb)}function La(Bb){var $b=Bb.method||Dc.value;if(null==Dc[$b])f.error("Unrecognized imputation method: "+$b);else{if($b===Dc.value){var Gc=void 0!==Bb.value?Bb.value:0;return()=>Gc}return Dc[$b]}}function Ra(Bb){const $b=Bb.field;return Gc=>Gc?$b(Gc):NaN}function la(Bb,$b,Gc,Jc){var ud=ye=>ye(Oc),Zc=[];Jc=Jc?Jc.slice():
[];var xd={},Sd={},ie,Be;Jc.forEach((ye,me)=>xd[ye]=me+1);var uc=0;for(Be=Bb.length;uc<Be;++uc){var Oc=Bb[uc];var Nd=Gc(Oc);var Od=xd[Nd]||(xd[Nd]=Jc.push(Nd));var pe=(Nd=$b?$b.map(ud):jd)+"";(ie=Sd[pe])||(ie=Sd[pe]=[],Zc.push(ie),ie.values=Nd);ie[Od-1]=Oc}Zc.domain=Jc;return Zc}function ma(Bb){R.call(this,Bb)}function Aa(Bb){h.Transform.call(this,null,Bb)}function Da(Bb){h.Operator.call(this,null,Qa,Bb)}function Qa(Bb){return this.value&&!Bb.modified()?this.value:f.key(Bb.fields,Bb.flat)}function Ea(Bb){h.Transform.call(this,
[],Bb);this._pending=null}function kb(Bb){return Bb.modified("async")&&!(Bb.modified("values")||Bb.modified("url")||Bb.modified("format"))}function cb(Bb,$b,Gc){Gc.forEach(h.ingest);$b=$b.fork($b.NO_FIELDS&$b.NO_SOURCE);$b.rem=Bb.value;Bb.value=$b.source=$b.add=Gc;Bb._pending=null;$b.rem.length&&$b.clean(!0);return $b}function Mb(Bb){h.Transform.call(this,{},Bb)}function Gb(Bb){h.Operator.call(this,null,Wb,Bb)}function Wb(Bb){if(this.value&&!Bb.modified())return this.value;Bb=Bb.extents;const $b=
Bb.length;let Gc=Infinity,Jc=-Infinity,ud,Zc;for(ud=0;ud<$b;++ud)Zc=Bb[ud],Zc[0]<Gc&&(Gc=Zc[0]),Zc[1]>Jc&&(Jc=Zc[1]);return[Gc,Jc]}function sa(Bb){h.Operator.call(this,null,ra,Bb)}function ra(Bb){return this.value&&!Bb.modified()?this.value:Bb.values.reduce(($b,Gc)=>$b.concat(Gc),[])}function xa(Bb){h.Transform.call(this,null,Bb)}function Ia(Bb){R.call(this,Bb)}function bb(Bb,$b){const Gc=Bb.field,Jc=Bb.value,ud=("count"===Bb.op?"__count__":Bb.op)||"sum",Zc=f.accessorFields(Gc).concat(f.accessorFields(Jc)),
xd=zb(Gc,Bb.limit||0,$b);$b.changed()&&Bb.set("__pivot__",null,null,!0);return{key:Bb.key,groupby:Bb.groupby,ops:xd.map(()=>ud),fields:xd.map(Sd=>Hb(Sd,Gc,Jc,Zc)),as:xd.map(Sd=>Sd+""),modified:Bb.modified.bind(Bb)}}function Hb(Bb,$b,Gc,Jc){return f.accessor(ud=>$b(ud)===Bb?Gc(ud):NaN,Jc,Bb+"")}function zb(Bb,$b,Gc){const Jc={},ud=[];Gc.visit(Gc.SOURCE,Zc=>{Zc=Bb(Zc);Jc[Zc]||(Jc[Zc]=1,ud.push(Zc))});ud.sort(f.ascending);return $b?ud.slice(0,$b):ud}function mb(Bb){ja.call(this,Bb)}function Jb(Bb){h.Transform.call(this,
null,Bb)}function Eb(Bb){h.Transform.call(this,null,Bb)}function Db(Bb){h.Transform.call(this,null,Bb)}function bc(Bb){h.Transform.call(this,null,Bb)}function jc(Bb){h.Transform.call(this,[],Bb);this.count=0}function Tc(Bb){h.Transform.call(this,null,Bb)}function ub(Bb){h.Transform.call(this,null,Bb);this.modified(!0)}function Rc(Bb){h.Transform.call(this,null,Bb)}function Gd(Bb){h.Transform.call(this,f.fastmap(),Bb)}function Kd(Bb){h.Transform.call(this,null,Bb)}function Vd(Bb,$b,Gc,Jc){const ud=
ae[Bb]($b,Gc);return{init:ud.init||f.zero,update:function(Zc,xd){xd[Jc]=ud.next(Zc)}}}function ze(Bb){function $b(Od){f.array(f.accessorFields(Od)).forEach(pe=>ie[pe]=1)}const Gc=f.array(Bb.ops),Jc=f.array(Bb.fields),ud=f.array(Bb.params),Zc=f.array(Bb.as),xd=this.outputs=[],Sd=this.windows=[],ie={},Be={},uc=[],Oc=[];let Nd=!0;$b(Bb.sort);Gc.forEach((Od,pe)=>{const ye=Jc[pe],me=f.accessorName(ye),od=Zc[pe]||Od+(me?"_"+me:"");$b(ye);xd.push(od);f.hasOwnProperty(ae,Od)?Sd.push(Vd(Od,Jc[pe],ud[pe],od)):
(null==ye&&"count"!==Od&&f.error("Null aggregate field specified."),"count"===Od?uc.push(od):(Nd=!1,pe=Be[me],pe||(pe=Be[me]=[],pe.field=ye,Oc.push(pe)),pe.push(Ee[Od](od))))});if(uc.length||Oc.length)this.cell=ee(Oc,uc,Nd);this.inputs=Object.keys(ie)}function ee(Bb,$b,Gc){Bb=Bb.map(ie=>x(ie,ie.field));const Jc={num:0,agg:null,store:!1,count:$b};if(!Gc)for(var ud=Bb.length,Zc=Jc.agg=Array(ud),xd=0;xd<ud;++xd)Zc[xd]=new Bb[xd](Jc);if(Jc.store)var Sd=Jc.data=new I;Jc.add=function(ie){Jc.num+=1;if(!Gc){Sd&&
Sd.add(ie);for(let Be=0;Be<ud;++Be)Zc[Be].add(Zc[Be].get(ie),ie)}};Jc.rem=function(ie){--Jc.num;if(!Gc){Sd&&Sd.rem(ie);for(let Be=0;Be<ud;++Be)Zc[Be].rem(Zc[Be].get(ie),ie)}};Jc.set=function(ie){let Be,uc;Sd&&Sd.values();Be=0;for(uc=$b.length;Be<uc;++Be)ie[$b[Be]]=Jc.num;if(!Gc)for(Be=0,uc=Zc.length;Be<uc;++Be)Zc[Be].set(ie)};Jc.init=function(){Jc.num=0;Sd&&Sd.reset();for(let ie=0;ie<ud;++ie)Zc[ie].init()};return Jc}function bd(Bb){h.Transform.call(this,{},Bb);this._mlen=0;this._mods=[]}function Bd(Bb,
$b,Gc,Jc){var ud=Jc.sort;const Zc=ud&&!Jc.ignorePeers;Jc=Jc.frame||[null,0];Bb=Bb.data(Gc);Gc=Bb.length;const xd=Zc?u.bisector(ud):null;ud={i0:0,i1:0,p0:0,p1:0,index:0,data:Bb,compare:ud||f.constant(-1)};$b.init();for(let Oc=0;Oc<Gc;++Oc){var Sd=ud,ie=Jc,Be=Oc,uc=Gc;Sd.p0=Sd.i0;Sd.p1=Sd.i1;Sd.i0=null==ie[0]?0:Math.max(0,Be-Math.abs(ie[0]));Sd.i1=null==ie[1]?uc:Math.min(uc,Be+Math.abs(ie[1])+1);Sd.index=Be;if(Zc){Sd=ud;ie=xd;Be=Sd.i0;uc=Sd.i1-1;const Nd=Sd.compare,Od=Sd.data,pe=Od.length-1;0<Be&&!Nd(Od[Be],
Od[Be-1])&&(Sd.i0=ie.left(Od,Od[Be]));uc<pe&&!Nd(Od[uc],Od[uc+1])&&(Sd.i1=ie.right(Od,Od[uc]))}$b.update(ud,Bb[Oc])}}var Ld=()=>{};const fe={init:Ld,add:Ld,rem:Ld,idx:0},Ee={values:{init:Bb=>Bb.cell.store=!0,value:Bb=>Bb.cell.data.values(),idx:-1},count:{value:Bb=>Bb.cell.num},__count__:{value:Bb=>Bb.missing+Bb.valid},missing:{value:Bb=>Bb.missing},valid:{value:Bb=>Bb.valid},sum:{init:Bb=>Bb.sum=0,value:Bb=>Bb.sum,add:(Bb,$b)=>Bb.sum+=+$b,rem:(Bb,$b)=>Bb.sum-=$b},product:{init:Bb=>Bb.product=1,value:Bb=>
Bb.valid?Bb.product:void 0,add:(Bb,$b)=>Bb.product*=$b,rem:(Bb,$b)=>Bb.product/=$b},mean:{init:Bb=>Bb.mean=0,value:Bb=>Bb.valid?Bb.mean:void 0,add:(Bb,$b)=>(Bb.mean_d=$b-Bb.mean,Bb.mean+=Bb.mean_d/Bb.valid),rem:(Bb,$b)=>(Bb.mean_d=$b-Bb.mean,Bb.mean-=Bb.valid?Bb.mean_d/Bb.valid:Bb.mean)},average:{value:Bb=>Bb.valid?Bb.mean:void 0,req:["mean"],idx:1},variance:{init:Bb=>Bb.dev=0,value:Bb=>1<Bb.valid?Bb.dev/(Bb.valid-1):void 0,add:(Bb,$b)=>Bb.dev+=Bb.mean_d*($b-Bb.mean),rem:(Bb,$b)=>Bb.dev-=Bb.mean_d*
($b-Bb.mean),req:["mean"],idx:1},variancep:{value:Bb=>1<Bb.valid?Bb.dev/Bb.valid:void 0,req:["variance"],idx:2},stdev:{value:Bb=>1<Bb.valid?Math.sqrt(Bb.dev/(Bb.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:Bb=>1<Bb.valid?Math.sqrt(Bb.dev/Bb.valid):void 0,req:["variance"],idx:2},stderr:{value:Bb=>1<Bb.valid?Math.sqrt(Bb.dev/(Bb.valid*(Bb.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:Bb=>Bb.cell.data.distinct(Bb.get),req:["values"],idx:3},ci0:{value:Bb=>Bb.cell.data.ci0(Bb.get),
req:["values"],idx:3},ci1:{value:Bb=>Bb.cell.data.ci1(Bb.get),req:["values"],idx:3},median:{value:Bb=>Bb.cell.data.q2(Bb.get),req:["values"],idx:3},q1:{value:Bb=>Bb.cell.data.q1(Bb.get),req:["values"],idx:3},q3:{value:Bb=>Bb.cell.data.q3(Bb.get),req:["values"],idx:3},min:{init:Bb=>Bb.min=void 0,value:Bb=>Bb.min=Number.isNaN(Bb.min)?Bb.cell.data.min(Bb.get):Bb.min,add:(Bb,$b)=>{if($b<Bb.min||void 0===Bb.min)Bb.min=$b},rem:(Bb,$b)=>{$b<=Bb.min&&(Bb.min=NaN)},req:["values"],idx:4},max:{init:Bb=>Bb.max=
void 0,value:Bb=>Bb.max=Number.isNaN(Bb.max)?Bb.cell.data.max(Bb.get):Bb.max,add:(Bb,$b)=>{if($b>Bb.max||void 0===Bb.max)Bb.max=$b},rem:(Bb,$b)=>{$b>=Bb.max&&(Bb.max=NaN)},req:["values"],idx:4},argmin:{init:Bb=>Bb.argmin=void 0,value:Bb=>Bb.argmin||Bb.cell.data.argmin(Bb.get),add:(Bb,$b,Gc)=>{$b<Bb.min&&(Bb.argmin=Gc)},rem:(Bb,$b)=>{$b<=Bb.min&&(Bb.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:Bb=>Bb.argmax=void 0,value:Bb=>Bb.argmax||Bb.cell.data.argmax(Bb.get),add:(Bb,$b,Gc)=>{$b>Bb.max&&
(Bb.argmax=Gc)},rem:(Bb,$b)=>{$b>=Bb.max&&(Bb.argmax=void 0)},req:["max","values"],idx:3}};Ld=Object.keys(Ee);Ld.forEach(Bb=>{Ee[Bb]=aa(Bb,Ee[Bb])});var dd=I.prototype;dd.reset=function(){this._add=[];this._rem=[];this._q=this._get=this._ext=null};dd.add=function(Bb){this._add.push(Bb)};dd.rem=function(Bb){this._rem.push(Bb)};dd.values=function(){this._get=null;if(0===this._rem.length)return this._add;const Bb=this._add;var $b=this._rem;const Gc=this._key,Jc=Bb.length,ud=$b.length,Zc=Array(Jc-ud),
xd={};let Sd,ie;for(Sd=0;Sd<ud;++Sd)xd[Gc($b[Sd])]=1;for($b=Sd=0;Sd<Jc;++Sd)xd[Gc(ie=Bb[Sd])]?xd[Gc(ie)]=0:Zc[$b++]=ie;this._rem=[];return this._add=Zc};dd.distinct=function(Bb){const $b=this.values(),Gc={};let Jc=$b.length,ud=0,Zc;for(;0<=--Jc;)Zc=Bb($b[Jc])+"",f.hasOwnProperty(Gc,Zc)||(Gc[Zc]=1,++ud);return ud};dd.extent=function(Bb){if(this._get!==Bb||!this._ext){const $b=this.values(),Gc=f.extentIndex($b,Bb);this._ext=[$b[Gc[0]],$b[Gc[1]]];this._get=Bb}return this._ext};dd.argmin=function(Bb){return this.extent(Bb)[0]||
{}};dd.argmax=function(Bb){return this.extent(Bb)[1]||{}};dd.min=function(Bb){const $b=this.extent(Bb)[0];return null!=$b?Bb($b):void 0};dd.max=function(Bb){const $b=this.extent(Bb)[1];return null!=$b?Bb($b):void 0};dd.quartile=function(Bb){this._get===Bb&&this._q||(this._q=l.quartiles(this.values(),Bb),this._get=Bb);return this._q};dd.q1=function(Bb){return this.quartile(Bb)[0]};dd.q2=function(Bb){return this.quartile(Bb)[1]};dd.q3=function(Bb){return this.quartile(Bb)[2]};dd.ci=function(Bb){this._get===
Bb&&this._ci||(this._ci=l.bootstrapCI(this.values(),1E3,.05,Bb),this._get=Bb);return this._ci};dd.ci0=function(Bb){return this.ci(Bb)[0]};dd.ci1=function(Bb){return this.ci(Bb)[1]};R.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:Ld},{name:"fields",type:"field","null":!0,array:!0},{name:"as",type:"string","null":!0,array:!0},{name:"drop",type:"boolean","default":!0},{name:"cross",type:"boolean",
"default":!1},{name:"key",type:"field"}]};f.inherits(R,h.Transform,{transform(Bb,$b){const Gc=this,Jc=$b.fork($b.NO_SOURCE|$b.NO_FIELDS),ud=Bb.modified();Gc.stamp=Jc.stamp;Gc.value&&(ud||$b.modified(Gc._inputs,!0))?(Gc._prev=Gc.value,Gc.value=ud?Gc.init(Bb):{},$b.visit($b.SOURCE,Zc=>Gc.add(Zc))):(Gc.value=Gc.value||Gc.init(Bb),$b.visit($b.REM,Zc=>Gc.rem(Zc)),$b.visit($b.ADD,Zc=>Gc.add(Zc)));Jc.modifies(Gc._outputs);Gc._drop=!1!==Bb.drop;Bb.cross&&1<Gc._dims.length&&(Gc._drop=!1,Gc.cross());$b.clean()&&
Gc._drop&&Jc.clean(!0).runAfter(()=>this.clean());return Gc.changes(Jc)},cross(){function Bb(Sd){let ie,Be,uc,Oc;for(ie in Sd)for(uc=Sd[ie].tuple,Be=0;Be<xd;++Be)Zc[Be][Oc=uc[ud[Be]]]=Oc}function $b(Sd,ie,Be){const uc=ud[Be],Oc=Zc[Be++];for(const Nd in Oc){const Od=Sd?Sd+"|"+Nd:Nd;ie[uc]=Oc[Nd];Be<xd?$b(Od,ie,Be):Jc[Od]||Gc.cell(Od,ie)}}const Gc=this,Jc=Gc.value,ud=Gc._dnames,Zc=ud.map(()=>({})),xd=ud.length;Bb(Gc._prev);Bb(Jc);$b("",{},0)},init(Bb){function $b(ye){ye=f.array(f.accessorFields(ye));
const me=ye.length;let od=0,hd;for(;od<me;++od)ud[hd=ye[od]]||(ud[hd]=1,Gc.push(hd))}const Gc=this._inputs=[],Jc=this._outputs=[],ud={};this._dims=f.array(Bb.groupby);this._dnames=this._dims.map(ye=>{const me=f.accessorName(ye);$b(ye);Jc.push(me);return me});this.cellkey=Bb.key?Bb.key:U(this._dims);this._countOnly=!0;this._counts=[];this._measures=[];const Zc=Bb.fields||[null],xd=Bb.ops||["count"];Bb=Bb.as||[];const Sd=Zc.length,ie={};let Be,uc,Oc,Nd,Od,pe;Sd!==xd.length&&f.error("Unmatched number of fields and aggregate ops.");
for(pe=0;pe<Sd;++pe)Be=Zc[pe],uc=xd[pe],null==Be&&"count"!==uc&&f.error("Null aggregate field specified."),Nd=f.accessorName(Be),Od=Bb[pe]||uc+(Nd?"_"+Nd:""),Jc.push(Od),"count"===uc?this._counts.push(Od):(Oc=ie[Nd],Oc||($b(Be),Oc=ie[Nd]=[],Oc.field=Be,this._measures.push(Oc)),"count"!==uc&&(this._countOnly=!1),Oc.push(Ee[uc](Od)));this._measures=this._measures.map(ye=>x(ye,ye.field));return{}},cellkey:U(),cell(Bb,$b){let Gc=this.value[Bb];Gc?0===Gc.num&&this._drop&&Gc.stamp<this.stamp?(Gc.stamp=
this.stamp,this._adds[this._alen++]=Gc):Gc.stamp<this.stamp&&(Gc.stamp=this.stamp,this._mods[this._mlen++]=Gc):(Gc=this.value[Bb]=this.newcell(Bb,$b),this._adds[this._alen++]=Gc);return Gc},newcell(Bb,$b){Bb={key:Bb,num:0,agg:null,tuple:this.newtuple($b,this._prev&&this._prev[Bb]),stamp:this.stamp,store:!1};if(!this._countOnly){$b=this._measures;const Gc=$b.length;Bb.agg=Array(Gc);for(let Jc=0;Jc<Gc;++Jc)Bb.agg[Jc]=new $b[Jc](Bb)}Bb.store&&(Bb.data=new I);return Bb},newtuple(Bb,$b){const Gc=this._dnames,
Jc=this._dims,ud=Jc.length,Zc={};for(let xd=0;xd<ud;++xd)Zc[Gc[xd]]=Jc[xd](Bb);return $b?h.replace($b.tuple,Zc):h.ingest(Zc)},clean(){const Bb=this.value;for(const $b in Bb)0===Bb[$b].num&&delete Bb[$b]},add(Bb){var $b=this.cellkey(Bb);$b=this.cell($b,Bb);$b.num+=1;if(!this._countOnly){$b.store&&$b.data.add(Bb);$b=$b.agg;for(let Gc=0,Jc=$b.length;Gc<Jc;++Gc)$b[Gc].add($b[Gc].get(Bb),Bb)}},rem(Bb){var $b=this.cellkey(Bb);$b=this.cell($b,Bb);--$b.num;if(!this._countOnly){$b.store&&$b.data.rem(Bb);$b=
$b.agg;for(let Gc=0,Jc=$b.length;Gc<Jc;++Gc)$b[Gc].rem($b[Gc].get(Bb),Bb)}},celltuple(Bb){const $b=Bb.tuple,Gc=this._counts;Bb.store&&Bb.data.values();for(let Jc=0,ud=Gc.length;Jc<ud;++Jc)$b[Gc[Jc]]=Bb.num;if(!this._countOnly){Bb=Bb.agg;for(let Jc=0,ud=Bb.length;Jc<ud;++Jc)Bb[Jc].set($b)}return $b},changes(Bb){const $b=this._adds,Gc=this._mods;var Jc=this._prev;const ud=this._drop,Zc=Bb.add,xd=Bb.rem,Sd=Bb.mod;let ie;var Be;if(Jc)for(Be in Jc)ie=Jc[Be],ud&&!ie.num||xd.push(ie.tuple);Jc=0;for(Be=this._alen;Jc<
Be;++Jc)Zc.push(this.celltuple($b[Jc])),$b[Jc]=null;Jc=0;for(Be=this._mlen;Jc<Be;++Jc)ie=Gc[Jc],(0===ie.num&&ud?xd:Sd).push(this.celltuple(ie)),Gc[Jc]=null;this._alen=this._mlen=0;this._prev=null;return Bb}});B.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean","default":!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number","default":20},{name:"base",type:"number","default":10},{name:"divide",type:"number",array:!0,
"default":[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number","default":0},{name:"nice",type:"boolean","default":!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,"default":["bin0","bin1"]}]};f.inherits(B,h.Transform,{transform(Bb,$b){const Gc=!1!==Bb.interval,Jc=this._bins(Bb),ud=Jc.start,Zc=Jc.step,xd=Bb.as||["bin0","bin1"],Sd=xd[0],
ie=xd[1];Bb.modified()?($b=$b.reflow(!0),Bb=$b.SOURCE):Bb=$b.modified(f.accessorFields(Bb.field))?$b.ADD_MOD:$b.ADD;$b.visit(Bb,Gc?Be=>{const uc=Jc(Be);Be[Sd]=uc;Be[ie]=null==uc?null:ud+Zc*(1+(uc-ud)/Zc)}:Be=>Be[Sd]=Jc(Be));return $b.modifies(Gc?xd:Sd)},_bins(Bb){if(this.value&&!Bb.modified())return this.value;const $b=Bb.field,Gc=l.bin(Bb),Jc=Gc.step;let ud=Gc.start,Zc=ud+Math.ceil((Gc.stop-ud)/Jc)*Jc;var xd;null!=(xd=Bb.anchor)&&(xd-=ud+Jc*Math.floor((xd-ud)/Jc),ud+=xd,Zc+=xd);xd=function(Sd){Sd=
f.toNumber($b(Sd));return null==Sd?null:Sd<ud?-Infinity:Sd>Zc?Infinity:(Sd=Math.max(ud,Math.min(Sd,Zc-Jc)),ud+Jc*Math.floor(1E-14+(Sd-ud)/Jc))};xd.start=ud;xd.stop=Gc.stop;xd.step=Jc;return this.value=f.accessor(xd,f.accessorFields($b),Bb.name||"bin_"+f.accessorName($b))}});O.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};f.inherits(O,h.Transform,{transform(Bb,$b){const Gc=$b.fork($b.ALL),Jc=v(h.tupleid,this.value,Gc.materialize(Gc.ADD).add),ud=Bb.sort;Bb=$b.changed()||
ud&&(Bb.modified("sort")||$b.modified(ud.fields));Gc.visit(Gc.REM,Jc.remove);this.modified(Bb);this.value=Gc.source=Jc.data(h.stableCompare(ud),Bb);$b.source&&$b.source.root&&(this.value.root=$b.source.root);return Gc}});f.inherits(N,h.Operator);J.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],"default":"mixed"},{name:"pattern",type:"string","default":'[\\w"]+'},{name:"stopwords",
type:"string","default":""},{name:"as",type:"string",array:!0,length:2,"default":["text","count"]}]};f.inherits(J,h.Transform,{transform(Bb,$b){var Gc=uc=>Oc=>{Oc=Sd(Oc);var Nd=Zc;switch(Bb.case){case "upper":Oc=Oc.toUpperCase();break;case "lower":Oc=Oc.toLowerCase()}Oc=Oc.match(Nd)||[];var Od;Nd=0;for(var pe=Oc.length;Nd<pe;++Nd)xd.test(Od=Oc[Nd])||uc(Od)};const Jc=this._parameterCheck(Bb,$b),ud=this._counts,Zc=this._match,xd=this._stop,Sd=Bb.field,ie=Bb.as||["text","count"],Be=Gc(uc=>ud[uc]=1+(ud[uc]||
0));Gc=Gc(uc=>--ud[uc]);Jc?$b.visit($b.SOURCE,Be):($b.visit($b.ADD,Be),$b.visit($b.REM,Gc));return this._finish($b,ie)},_parameterCheck(Bb,$b){let Gc=!1;if(Bb.modified("stopwords")||!this._stop)this._stop=new RegExp("^"+(Bb.stopwords||"")+"$","i"),Gc=!0;if(Bb.modified("pattern")||!this._match)this._match=new RegExp(Bb.pattern||"[\\w']+","g"),Gc=!0;if(Bb.modified("field")||$b.modified(Bb.field.fields))Gc=!0;Gc&&(this._counts={});return Gc},_finish(Bb,$b){const Gc=this._counts,Jc=this._tuples||(this._tuples=
{}),ud=$b[0],Zc=$b[1];Bb=Bb.fork(Bb.NO_SOURCE|Bb.NO_FIELDS);let xd,Sd,ie;for(xd in Gc)Sd=Jc[xd],ie=Gc[xd]||0,!Sd&&ie?(Jc[xd]=Sd=h.ingest({}),Sd[ud]=xd,Sd[Zc]=ie,Bb.add.push(Sd)):0===ie?(Sd&&Bb.rem.push(Sd),Gc[xd]=null,Jc[xd]=null):Sd[Zc]!==ie&&(Sd[Zc]=ie,Bb.mod.push(Sd));return Bb.modifies($b)}});T.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,"default":["a","b"]}]};f.inherits(T,h.Transform,{transform(Bb,$b){const Gc=
$b.fork($b.NO_SOURCE),Jc=Bb.as||["a","b"],ud=Jc[0],Zc=Jc[1];var xd=!this.value||$b.changed($b.ADD_REM)||Bb.modified("as")||Bb.modified("filter"),Sd=this.value;if(xd){Sd&&(Gc.rem=Sd);$b=Sd=$b.materialize($b.SOURCE).source;Bb=Bb.filter||f.truthy;xd=[];Sd={};for(var ie=$b.length,Be=0,uc,Oc;Be<ie;++Be)for(Sd[ud]=Oc=$b[Be],uc=0;uc<ie;++uc)Sd[Zc]=$b[uc],Bb(Sd)&&(xd.push(h.ingest(Sd)),Sd={},Sd[ud]=Oc);Gc.add=this.value=xd}else Gc.mod=Sd;Gc.source=this.value;return Gc.modifies(Jc)}});const nd={kde:l.randomKDE,
mixture:l.randomMixture,normal:l.randomNormal,lognormal:l.randomLogNormal,uniform:l.randomUniform};dd=[{key:{"function":"normal"},params:[{name:"mean",type:"number","default":0},{name:"stdev",type:"number","default":1}]},{key:{"function":"lognormal"},params:[{name:"mean",type:"number","default":0},{name:"stdev",type:"number","default":1}]},{key:{"function":"uniform"},params:[{name:"min",type:"number","default":0},{name:"max",type:"number","default":1}]},{key:{"function":"kde"},params:[{name:"field",
type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number","default":0}]}];ba.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number","default":25},{name:"maxsteps",type:"number","default":200},{name:"method",type:"string","default":"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:dd.concat({key:{"function":"mixture"},params:[{name:"distributions",
type:"param",array:!0,params:dd},{name:"weights",type:"number",array:!0}]})},{name:"as",type:"string",array:!0,"default":["value","density"]}]};f.inherits(ba,h.Transform,{transform(Bb,$b){const Gc=$b.fork($b.NO_SOURCE|$b.NO_FIELDS);if(!this.value||$b.changed()||Bb.modified()){const Jc=z(Bb.distribution,K($b));$b=Bb.steps||Bb.minsteps||25;const ud=Bb.steps||Bb.maxsteps||200;let Zc=Bb.method||"pdf";"pdf"!==Zc&&"cdf"!==Zc&&f.error("Invalid density method: "+Zc);Bb.extent||Jc.data||f.error("Missing density extent parameter.");
Zc=Jc[Zc];const xd=Bb.as||["value","density"];Bb=Bb.extent||f.extent(Jc.data());Bb=l.sampleCurve(Zc,Bb,$b,ud).map(Sd=>{const ie={};ie[xd[0]]=Sd[0];ie[xd[1]]=Sd[1];return h.ingest(ie)});this.value&&(Gc.rem=this.value);this.value=Gc.add=Gc.source=Bb}return Gc}});Z.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean","default":!1},{name:"as",type:"string","default":"bin"}]};
f.inherits(Z,h.Transform,{transform(Bb,$b){if(this.value&&!Bb.modified()&&!$b.changed())return $b;var Gc=$b.materialize($b.SOURCE).source;const Jc=Y($b.source,Bb.groupby,f.identity),ud=Bb.smooth||!1,Zc=Bb.field;Gc=Bb.step||f.span(f.extent(Gc,Zc))/30;const xd=h.stableCompare((Nd,Od)=>Zc(Nd)-Zc(Od));Bb=Bb.as||"bin";const Sd=Jc.length;let ie=Infinity,Be=-Infinity,uc=0,Oc;for(;uc<Sd;++uc){const Nd=Jc[uc].sort(xd);Oc=-1;for(const Od of l.dotbin(Nd,Gc,ud,Zc))Od<ie&&(ie=Od),Od>Be&&(Be=Od),Nd[++Oc][Bb]=Od}this.value=
{start:ie,stop:Be,step:Gc};return $b.reflow(!0).modifies(Bb)}});f.inherits(E,h.Operator);W.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};f.inherits(W,h.Transform,{transform(Bb,$b){var Gc=this.value;const Jc=Bb.field;Bb=$b.changed()||$b.modified(Jc.fields)||Bb.modified("field");let ud=Gc[0],Zc=Gc[1];if(Bb||null==ud)ud=Infinity,Zc=-Infinity;$b.visit(Bb?$b.SOURCE:$b.ADD,xd=>{xd=f.toNumber(Jc(xd));null!=xd&&(xd<ud&&(ud=xd),xd>Zc&&(Zc=xd))});Number.isFinite(ud)&&
Number.isFinite(Zc)||((Gc=f.accessorName(Jc))&&(Gc=` for field "${Gc}"`),$b.dataflow.warn(`Infinite extent${Gc}: [${ud}, ${Zc}]`),ud=Zc=void 0);this.value=[ud,Zc]}});f.inherits(fa,h.Operator,{connect(Bb){this.detachSubflow=Bb.detachSubflow;this.targets().add(Bb);return Bb.source=this},add(Bb){this.count+=1;this.value.add.push(Bb)},rem(Bb){--this.count;this.value.rem.push(Bb)},mod(Bb){this.value.mod.push(Bb)},init(Bb){this.value.init(Bb,Bb.NO_SOURCE)},evaluate(){return this.value}});f.inherits(ja,
h.Transform,{activate(Bb){this._targets[this._targets.active++]=Bb},subflow(Bb,$b,Gc,Jc){const ud=this.value;let Zc=f.hasOwnProperty(ud,Bb)&&ud[Bb],xd;Zc?Zc.value.stamp<Gc.stamp&&(Zc.init(Gc),this.activate(Zc)):(xd=Jc||(xd=this._group[Bb])&&xd.tuple,Jc=Gc.dataflow,Zc=new fa(Gc.fork(Gc.NO_SOURCE),this),Jc.add(Zc).connect($b(Jc,Bb,xd)),ud[Bb]=Zc,this.activate(Zc));return Zc},clean(){var Bb=this.value;let $b=0;for(const Gc in Bb)if(0===Bb[Gc].count){const Jc=Bb[Gc].detachSubflow;Jc&&Jc();delete Bb[Gc];
++$b}$b&&(Bb=this._targets.filter(Gc=>Gc&&0<Gc.count),this.initTargets(Bb))},initTargets(Bb){const $b=this._targets,Gc=$b.length,Jc=Bb?Bb.length:0;let ud=0;for(;ud<Jc;++ud)$b[ud]=Bb[ud];for(;ud<Gc&&null!=$b[ud];++ud)$b[ud]=null;$b.active=Jc},transform(Bb,$b){const Gc=$b.dataflow,Jc=Bb.key,ud=Bb.subflow,Zc=this._keys,xd=Bb.modified("key"),Sd=ie=>this.subflow(ie,ud,$b);this._group=Bb.group||{};this.initTargets();$b.visit($b.REM,ie=>{const Be=h.tupleid(ie),uc=Zc.get(Be);void 0!==uc&&(Zc.delete(Be),Sd(uc).rem(ie))});
$b.visit($b.ADD,ie=>{const Be=Jc(ie);Zc.set(h.tupleid(ie),Be);Sd(Be).add(ie)});xd||$b.modified(Jc.fields)?$b.visit($b.MOD,ie=>{const Be=h.tupleid(ie),uc=Zc.get(Be),Oc=Jc(ie);uc===Oc?Sd(Oc).mod(ie):(Zc.set(Be,Oc),Sd(uc).rem(ie),Sd(Oc).add(ie))}):$b.changed($b.MOD)&&$b.visit($b.MOD,ie=>{Sd(Zc.get(h.tupleid(ie))).mod(ie)});xd&&$b.visit($b.REFLOW,ie=>{const Be=h.tupleid(ie),uc=Zc.get(Be),Oc=Jc(ie);uc!==Oc&&(Zc.set(Be,Oc),Sd(uc).rem(ie),Sd(Oc).add(ie))});$b.clean()?Gc.runAfter(()=>{this.clean();Zc.clean()}):
Zc.empty>Gc.cleanThreshold&&Gc.runAfter(Zc.clean);return $b}});f.inherits(Ba,h.Operator);ua.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};f.inherits(ua,h.Transform,{transform(Bb,$b){function Gc(Oc){const Nd=h.tupleid(Oc),Od=Be(Oc,Bb),pe=ud.get(Nd);Od&&pe?(ud.delete(Nd),xd.push(Oc)):Od||pe?uc&&Od&&!pe&&ie.push(Oc):(ud.set(Nd,1),Sd.push(Oc))}const Jc=$b.dataflow,ud=this.value,Zc=$b.fork(),xd=Zc.add,Sd=Zc.rem,ie=Zc.mod,Be=Bb.expr;let uc=!0;$b.visit($b.REM,
Oc=>{const Nd=h.tupleid(Oc);ud.has(Nd)?ud.delete(Nd):Sd.push(Oc)});$b.visit($b.ADD,Oc=>{Be(Oc,Bb)?xd.push(Oc):ud.set(h.tupleid(Oc),1)});$b.visit($b.MOD,Gc);Bb.modified()&&(uc=!1,$b.visit($b.REFLOW,Gc));ud.empty>Jc.cleanThreshold&&Jc.runAfter(ud.clean);return Zc}});Fa.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};f.inherits(Fa,h.Transform,{transform(Bb,$b){const Gc=$b.fork($b.NO_SOURCE),
Jc=Bb.fields,ud=r(Jc,Bb.as||[]),Zc=Bb.index||null,xd=ud.length;Gc.rem=this.value;$b.visit($b.SOURCE,Sd=>{const ie=Jc.map(pe=>pe(Sd)),Be=ie.reduce((pe,ye)=>Math.max(pe,ye.length),0);let uc=0,Oc,Nd,Od;for(;uc<Be;++uc){Nd=h.derive(Sd);for(Oc=0;Oc<xd;++Oc)Nd[ud[Oc]]=null==(Od=ie[Oc][uc])?null:Od;Zc&&(Nd[Zc]=uc);Gc.add.push(Nd)}});this.value=Gc.source=Gc.add;Zc&&Gc.modifies(Zc);return Gc.modifies(ud)}});Xa.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},
{name:"as",type:"string",array:!0,length:2,"default":["key","value"]}]};f.inherits(Xa,h.Transform,{transform(Bb,$b){const Gc=$b.fork($b.NO_SOURCE),Jc=Bb.fields,ud=Jc.map(f.accessorName);Bb=Bb.as||["key","value"];const Zc=Bb[0],xd=Bb[1],Sd=Jc.length;Gc.rem=this.value;$b.visit($b.SOURCE,ie=>{for(let Be=0,uc;Be<Sd;++Be)uc=h.derive(ie),uc[Zc]=ud[Be],uc[xd]=Jc[Be](ie),Gc.add.push(uc)});this.value=Gc.source=Gc.add;return Gc.modifies(Bb)}});Sa.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",
type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};f.inherits(Sa,h.Transform,{transform(Bb,$b){const Gc=Bb.expr,Jc=Bb.as,ud=Bb.modified(),Zc=Bb.initonly?$b.ADD:ud?$b.SOURCE:$b.modified(Gc.fields)||$b.modified(Jc)?$b.ADD_MOD:$b.ADD;ud&&($b=$b.materialize().reflow(!0));Bb.initonly||$b.modifies(Jc);return $b.visit(Zc,xd=>xd[Jc]=Gc(xd,Bb))}});f.inherits(eb,h.Transform,{transform(Bb,$b){$b=$b.fork($b.ALL);const Gc=Bb.generator;let Jc=this.value,ud=Bb.size-
Jc.length,Zc,xd;if(0<ud){for(Zc=[];0<=--ud;)Zc.push(xd=h.ingest(Gc(Bb))),Jc.push(xd);$b.add=$b.add.length?$b.materialize($b.ADD).add.concat(Zc):Zc}else Bb=Jc.slice(0,-ud),$b.rem=$b.rem.length?$b.materialize($b.REM).rem.concat(Bb):Bb,Jc=Jc.slice(-ud);$b.source=this.value=Jc;return $b}});const Dc={value:"value",median:u.median,mean:u.mean,min:u.min,max:u.max},jd=[];Va.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},
{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum","default":"value",values:["value","mean","median","max","min"]},{name:"value","default":0}]};f.inherits(Va,h.Transform,{transform(Bb,$b){var Gc=$b.fork($b.ALL),Jc=La(Bb),ud=Ra(Bb),Zc=f.accessorName(Bb.field),xd=f.accessorName(Bb.key),Sd=(Bb.groupby||[]).map(f.accessorName);Bb=la($b.source,Bb.groupby,Bb.key,Bb.keyvals);$b=[];var ie=this.value,Be=Bb.domain.length,uc,Oc,Nd;var Od=0;for(Oc=Bb.length;Od<Oc;++Od){var pe=
Bb[Od];var ye=pe.values;var me=NaN;for(uc=0;uc<Be;++uc)if(null==pe[uc]){var od=Bb.domain[uc];var hd={_impute:!0};var ge=0;for(Nd=ye.length;ge<Nd;++ge)hd[Sd[ge]]=ye[ge];hd[xd]=od;hd[Zc]=Number.isNaN(me)?me=Jc(pe,ud):me;$b.push(h.ingest(hd))}}$b.length&&(Gc.add=Gc.materialize(Gc.ADD).add.concat($b));ie.length&&(Gc.rem=Gc.materialize(Gc.REM).rem.concat(ie));this.value=$b;return Gc}});ma.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",
type:"field","null":!0,array:!0},{name:"ops",type:"enum",array:!0,values:Ld},{name:"as",type:"string","null":!0,array:!0},{name:"key",type:"field"}]};f.inherits(ma,R,{transform(Bb,$b){const Gc=this,Jc=Bb.modified();let ud;Gc.value&&(Jc||$b.modified(Gc._inputs,!0))?(ud=Gc.value=Jc?Gc.init(Bb):{},$b.visit($b.SOURCE,Zc=>Gc.add(Zc))):(ud=Gc.value=Gc.value||this.init(Bb),$b.visit($b.REM,Zc=>Gc.rem(Zc)),$b.visit($b.ADD,Zc=>Gc.add(Zc)));Gc.changes();$b.visit($b.SOURCE,Zc=>{f.extend(Zc,ud[Gc.cellkey(Zc)].tuple)});
return $b.reflow(Jc).modifies(this._outputs)},changes(){const Bb=this._adds,$b=this._mods;let Gc,Jc;Gc=0;for(Jc=this._alen;Gc<Jc;++Gc)this.celltuple(Bb[Gc]),Bb[Gc]=null;Gc=0;for(Jc=this._mlen;Gc<Jc;++Gc)this.celltuple($b[Gc]),$b[Gc]=null;this._alen=this._mlen=0}});Aa.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean","default":!1},{name:"counts",type:"boolean","default":!1},{name:"bandwidth",
type:"number","default":0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],"default":"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number","default":25},{name:"maxsteps",type:"number","default":200},{name:"as",type:"string",array:!0,"default":["value","density"]}]};f.inherits(Aa,h.Transform,{transform(Bb,$b){const Gc=$b.fork($b.NO_SOURCE|$b.NO_FIELDS);if(!this.value||$b.changed()||Bb.modified()){$b=$b.materialize($b.SOURCE).source;
const Jc=Y($b,Bb.groupby,Bb.field),ud=(Bb.groupby||[]).map(f.accessorName),Zc=Bb.bandwidth,xd=Bb.cumulative?"cdf":"pdf",Sd=Bb.as||["value","density"],ie=[];let Be=Bb.extent,uc=Bb.steps||Bb.minsteps||25,Oc=Bb.steps||Bb.maxsteps||200;"pdf"!==xd&&"cdf"!==xd&&f.error("Invalid density method: "+xd);"shared"===Bb.resolve&&(Be||(Be=f.extent($b,Bb.field)),uc=Oc=Bb.steps||Oc);Jc.forEach(Nd=>{const Od=l.randomKDE(Nd,Zc)[xd],pe=Bb.counts?Nd.length:1,ye=Be||f.extent(Nd);l.sampleCurve(Od,ye,uc,Oc).forEach(me=>
{const od={};for(let hd=0;hd<ud.length;++hd)od[ud[hd]]=Nd.dims[hd];od[Sd[0]]=me[0];od[Sd[1]]=me[1]*pe;ie.push(h.ingest(od))})});this.value&&(Gc.rem=this.value);this.value=Gc.add=Gc.source=ie}return Gc}});f.inherits(Da,h.Operator);f.inherits(Ea,h.Transform,{transform(Bb,$b){const Gc=$b.dataflow;return this._pending?cb(this,$b,this._pending):kb(Bb)?$b.StopPropagation:Bb.values?cb(this,$b,Gc.parse(Bb.values,Bb.format)):Bb.async?{async:Gc.request(Bb.url,Bb.format).then(Jc=>{this._pending=f.array(Jc.data);
return ud=>ud.touch(this)})}:Gc.request(Bb.url,Bb.format).then(Jc=>cb(this,$b,f.array(Jc.data)))}});Mb.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default","default":null}]};f.inherits(Mb,h.Transform,{transform(Bb,$b){const Gc=Bb.fields,Jc=Bb.index,
ud=Bb.values,Zc=null==Bb.default?null:Bb.default;var xd=Bb.modified();const Sd=Gc.length;let ie=xd?$b.SOURCE:$b.ADD,Be=$b,uc=Bb.as,Oc;ud?(Oc=ud.length,1<Sd&&!uc&&f.error('Multi-field lookup requires explicit "as" parameter.'),uc&&uc.length!==Sd*Oc&&f.error('The "as" parameter has too few output field names.'),uc=uc||ud.map(f.accessorName),Bb=function(Nd){for(var Od=0,pe=0,ye,me;Od<Sd;++Od)if(me=Jc.get(Gc[Od](Nd)),null==me)for(ye=0;ye<Oc;++ye,++pe)Nd[uc[pe]]=Zc;else for(ye=0;ye<Oc;++ye,++pe)Nd[uc[pe]]=
ud[ye](me)}):(uc||f.error("Missing output field names."),Bb=function(Nd){for(var Od=0,pe;Od<Sd;++Od)pe=Jc.get(Gc[Od](Nd)),Nd[uc[Od]]=null==pe?Zc:pe});xd?Be=$b.reflow(!0):(xd=Gc.some(Nd=>$b.modified(Nd.fields)),ie|=xd?$b.MOD:0);$b.visit(ie,Bb);return Be.modifies(uc)}});f.inherits(Gb,h.Operator);f.inherits(sa,h.Operator);f.inherits(xa,h.Transform,{transform(Bb,$b){this.modified(Bb.modified());this.value=Bb;return $b.fork($b.NO_SOURCE|$b.NO_FIELDS)}});Ia.Definition={type:"Pivot",metadata:{generates:!0,
changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:Ld,"default":"sum"},{name:"limit",type:"number","default":0},{name:"key",type:"field"}]};f.inherits(Ia,R,{_transform:R.prototype.transform,transform(Bb,$b){return this._transform(bb(Bb,$b),$b)}});f.inherits(mb,ja,{transform(Bb,$b){const Gc=Bb.subflow,Jc=Bb.field,ud=Zc=>this.subflow(h.tupleid(Zc),Gc,$b,Zc);(Bb.modified("field")||Jc&&
$b.modified(f.accessorFields(Jc)))&&f.error("PreFacet does not support field modification.");this.initTargets();Jc?($b.visit($b.MOD,Zc=>{const xd=ud(Zc);Jc(Zc).forEach(Sd=>xd.mod(Sd))}),$b.visit($b.ADD,Zc=>{const xd=ud(Zc);Jc(Zc).forEach(Sd=>xd.add(h.ingest(Sd)))}),$b.visit($b.REM,Zc=>{const xd=ud(Zc);Jc(Zc).forEach(Sd=>xd.rem(Sd))})):($b.visit($b.MOD,Zc=>ud(Zc).mod(Zc)),$b.visit($b.ADD,Zc=>ud(Zc).add(Zc)),$b.visit($b.REM,Zc=>ud(Zc).rem(Zc)));$b.clean()&&$b.runAfter(()=>this.clean());return $b}});
Jb.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string","null":!0,array:!0}]};f.inherits(Jb,h.Transform,{transform(Bb,$b){const Gc=$b.fork($b.NO_SOURCE),Jc=Bb.fields,ud=r(Bb.fields,Bb.as||[]),Zc=Jc?(Sd,ie)=>{for(let Be=0,uc=Jc.length;Be<uc;++Be)ie[ud[Be]]=Jc[Be](Sd);return ie}:h.rederive;let xd;this.value?xd=this.value:($b=$b.addAll(),xd=this.value={});$b.visit($b.REM,Sd=>{Sd=h.tupleid(Sd);Gc.rem.push(xd[Sd]);xd[Sd]=null});
$b.visit($b.ADD,Sd=>{const ie=Zc(Sd,h.ingest({}));xd[h.tupleid(Sd)]=ie;Gc.add.push(ie)});$b.visit($b.MOD,Sd=>{Gc.mod.push(Zc(Sd,xd[h.tupleid(Sd)]))});return Gc}});f.inherits(Eb,h.Transform,{transform(Bb,$b){this.value=Bb.value;return Bb.modified("value")?$b.fork($b.NO_SOURCE|$b.NO_FIELDS):$b.StopPropagation}});Db.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},
{name:"step",type:"number","default":.01},{name:"as",type:"string",array:!0,"default":["prob","value"]}]};f.inherits(Db,h.Transform,{transform(Bb,$b){const Gc=$b.fork($b.NO_SOURCE|$b.NO_FIELDS),Jc=Bb.as||["prob","value"];if(this.value&&!Bb.modified()&&!$b.changed())return Gc.source=this.value,Gc;$b=$b.materialize($b.SOURCE).source;$b=Y($b,Bb.groupby,Bb.field);const ud=(Bb.groupby||[]).map(f.accessorName),Zc=[],xd=Bb.step||.01,Sd=Bb.probs||u.range(xd/2,1-1E-14,xd),ie=Sd.length;$b.forEach(Be=>{const uc=
l.quantiles(Be,Sd);for(let Oc=0;Oc<ie;++Oc){const Nd={};for(let Od=0;Od<ud.length;++Od)Nd[ud[Od]]=Be.dims[Od];Nd[Jc[0]]=Sd[Oc];Nd[Jc[1]]=uc[Oc];Zc.push(h.ingest(Nd))}});this.value&&(Gc.rem=this.value);this.value=Gc.add=Gc.source=Zc;return Gc}});f.inherits(bc,h.Transform,{transform(Bb,$b){let Gc,Jc;this.value?Jc=this.value:(Gc=$b=$b.addAll(),Jc=this.value={});Bb.derive&&(Gc=$b.fork($b.NO_SOURCE),$b.visit($b.REM,ud=>{ud=h.tupleid(ud);Gc.rem.push(Jc[ud]);Jc[ud]=null}),$b.visit($b.ADD,ud=>{const Zc=h.derive(ud);
Jc[h.tupleid(ud)]=Zc;Gc.add.push(Zc)}),$b.visit($b.MOD,ud=>{const Zc=Jc[h.tupleid(ud)];for(const xd in ud)Zc[xd]=ud[xd],Gc.modifies(xd);Gc.mod.push(Zc)}));return Gc}});jc.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number","default":1E3}]};f.inherits(jc,h.Transform,{transform(Bb,$b){function Gc(uc){let Oc,Nd;Sd.length<Zc?Sd.push(uc):(Nd=~~((ie+1)*l.random()),Nd<Sd.length&&Nd>=Be&&(Oc=Sd[Nd],xd[h.tupleid(Oc)]&&Jc.rem.push(Oc),Sd[Nd]=uc));++ie}const Jc=$b.fork($b.NO_SOURCE);var ud=
Bb.modified("size");const Zc=Bb.size,xd=this.value.reduce((uc,Oc)=>(uc[h.tupleid(Oc)]=1,uc),{});let Sd=this.value,ie=this.count,Be=0;$b.rem.length&&($b.visit($b.REM,uc=>{const Oc=h.tupleid(uc);xd[Oc]&&(xd[Oc]=-1,Jc.rem.push(uc));--ie}),Sd=Sd.filter(uc=>-1!==xd[h.tupleid(uc)]));($b.rem.length||ud)&&Sd.length<Zc&&$b.source&&(Be=ie=Sd.length,$b.visit($b.SOURCE,uc=>{xd[h.tupleid(uc)]||Gc(uc)}),Be=-1);if(ud&&Sd.length>Zc){Bb=Sd.length-Zc;for(ud=0;ud<Bb;++ud)xd[h.tupleid(Sd[ud])]=-1,Jc.rem.push(Sd[ud]);
Sd=Sd.slice(Bb)}$b.mod.length&&$b.visit($b.MOD,uc=>{xd[h.tupleid(uc)]&&Jc.mod.push(uc)});$b.add.length&&$b.visit($b.ADD,Gc);if($b.add.length||0>Be)Jc.add=Sd.filter(uc=>!xd[h.tupleid(uc)]);this.count=ie;this.value=Jc.source=Sd;return Jc}});Tc.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number","default":1},{name:"as",type:"string","default":"data"}]};f.inherits(Tc,h.Transform,
{transform(Bb,$b){if(!this.value||Bb.modified()){var Gc=$b.materialize().fork($b.MOD),Jc=Bb.as||"data";Gc.rem=this.value?$b.rem.concat(this.value):$b.rem;this.value=u.range(Bb.start,Bb.stop,Bb.step||1).map(ud=>{const Zc={};Zc[Jc]=ud;return h.ingest(Zc)});Gc.add=$b.add.concat(this.value);return Gc}}});f.inherits(ub,h.Transform,{transform(Bb,$b){this.value=$b.source;return $b.changed()?$b.fork($b.NO_SOURCE|$b.NO_FIELDS):$b.StopPropagation}});const Qd=["unit0","unit1"];Rc.Definition={type:"TimeUnit",
metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean","default":!0},{name:"units",type:"enum",values:q.TIME_UNITS,array:!0},{name:"step",type:"number","default":1},{name:"maxbins",type:"number","default":40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum","default":"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,"default":Qd}]};f.inherits(Rc,h.Transform,{transform(Bb,$b){const Gc=Bb.field,Jc=!1!==Bb.interval;
var ud="utc"===Bb.timezone;const Zc=this._floor(Bb,$b),xd=(ud?q.utcInterval:q.timeInterval)(Zc.unit).offset;ud=Bb.as||Qd;const Sd=ud[0],ie=ud[1],Be=Zc.step;let uc=Zc.start||Infinity,Oc=Zc.stop||-Infinity,Nd=$b.ADD;if(Bb.modified()||$b.modified(f.accessorFields(Gc)))$b=$b.reflow(!0),Nd=$b.SOURCE,uc=Infinity,Oc=-Infinity;$b.visit(Nd,Od=>{var pe=Gc(Od);let ye;null==pe?(Od[Sd]=null,Jc&&(Od[ie]=null)):(Od[Sd]=pe=ye=Zc(pe),Jc&&(Od[ie]=ye=xd(pe,Be)),pe<uc&&(uc=pe),ye>Oc&&(Oc=ye))});Zc.start=uc;Zc.stop=Oc;
return $b.modifies(Jc?ud:Sd)},_floor(Bb,$b){var Gc="utc"===Bb.timezone;const {units:Jc,step:ud}=Bb.units?{units:Bb.units,step:Bb.step||1}:q.timeBin({extent:Bb.extent||f.extent($b.materialize($b.SOURCE).source,Bb.field),maxbins:Bb.maxbins});Bb=q.timeUnits(Jc);$b=this.value||{};Gc=(Gc?q.utcFloor:q.timeFloor)(Bb,ud);Gc.unit=f.peek(Bb);Gc.units=Bb;Gc.step=ud;Gc.start=$b.start;Gc.stop=$b.stop;return this.value=Gc}});f.inherits(Gd,h.Transform,{transform(Bb,$b){const Gc=$b.dataflow,Jc=Bb.field,ud=this.value,
Zc=Sd=>ud.set(Jc(Sd),Sd);let xd=!0;Bb.modified("field")||$b.modified(Jc.fields)?(ud.clear(),$b.visit($b.SOURCE,Zc)):$b.changed()?($b.visit($b.REM,Sd=>ud.delete(Jc(Sd))),$b.visit($b.ADD,Zc)):xd=!1;this.modified(xd);ud.empty>Gc.cleanThreshold&&Gc.runAfter(ud.clean);return $b.fork()}});f.inherits(Kd,h.Transform,{transform(Bb,$b){if(!this.value||Bb.modified("field")||Bb.modified("sort")||$b.changed()||Bb.sort&&$b.modified(Bb.sort.fields))this.value=(Bb.sort?$b.source.slice().sort(h.stableCompare(Bb.sort)):
$b.source).map(Bb.field)}});const ae={row_number:function(){return{next:Bb=>Bb.index+1}},rank:function(){let Bb;return{init:()=>Bb=1,next:$b=>{const Gc=$b.index,Jc=$b.data;return Gc&&$b.compare(Jc[Gc-1],Jc[Gc])?Bb=Gc+1:Bb}}},dense_rank:function(){let Bb;return{init:()=>Bb=1,next:$b=>{const Gc=$b.index,Jc=$b.data;return Gc&&$b.compare(Jc[Gc-1],Jc[Gc])?++Bb:Bb}}},percent_rank:function(){const Bb=ae.rank(),$b=Bb.next;return{init:Bb.init,next:Gc=>($b(Gc)-1)/(Gc.data.length-1)}},cume_dist:function(){let Bb;
return{init:()=>Bb=0,next:$b=>{const Gc=$b.data,Jc=$b.compare;$b=$b.index;if(Bb<$b){for(;$b+1<Gc.length&&!Jc(Gc[$b],Gc[$b+1]);)++$b;Bb=$b}return(1+Bb)/Gc.length}}},ntile:function(Bb,$b){$b=+$b;0<$b||f.error("ntile num must be greater than zero.");Bb=ae.cume_dist();const Gc=Bb.next;return{init:Bb.init,next:Jc=>Math.ceil($b*Gc(Jc))}},lag:function(Bb,$b){$b=+$b||1;return{next:Gc=>{const Jc=Gc.index-$b;return 0<=Jc?Bb(Gc.data[Jc]):null}}},lead:function(Bb,$b){$b=+$b||1;return{next:Gc=>{const Jc=Gc.index+
$b;Gc=Gc.data;return Jc<Gc.length?Bb(Gc[Jc]):null}}},first_value:function(Bb){return{next:$b=>Bb($b.data[$b.i0])}},last_value:function(Bb){return{next:$b=>Bb($b.data[$b.i1-1])}},nth_value:function(Bb,$b){$b=+$b;0<$b||f.error("nth_value nth must be greater than zero.");return{next:Gc=>{const Jc=Gc.i0+($b-1);return Jc<Gc.i1?Bb(Gc.data[Jc]):null}}},prev_value:function(Bb){let $b;return{init:()=>$b=null,next:Gc=>{Gc=Bb(Gc.data[Gc.index]);return null!=Gc?$b=Gc:$b}}},next_value:function(Bb){let $b,Gc;return{init:()=>
($b=null,Gc=-1),next:Jc=>{var ud=Jc.data;if(Jc.index<=Gc)ud=$b;else{a:{Jc=Jc.index;for(let Zc=ud.length;Jc<Zc;++Jc)if(null!=Bb(ud[Jc]))break a;Jc=-1}ud=0>(Gc=Jc)?(Gc=ud.length,$b=null):$b=Bb(ud[Gc])}return ud}}}};dd=Object.keys(ae);const te=ze.prototype;te.init=function(){this.windows.forEach(Bb=>Bb.init());this.cell&&this.cell.init()};te.update=function(Bb,$b){const Gc=this.cell,Jc=this.windows,ud=Bb.data,Zc=Jc&&Jc.length;let xd;if(Gc){for(xd=Bb.p0;xd<Bb.i0;++xd)Gc.rem(ud[xd]);for(xd=Bb.p1;xd<Bb.i1;++xd)Gc.add(ud[xd]);
Gc.set($b)}for(xd=0;xd<Zc;++xd)Jc[xd].update(Bb,$b)};bd.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:dd.concat(Ld)},{name:"params",type:"number","null":!0,array:!0},{name:"fields",type:"field","null":!0,array:!0},{name:"as",type:"string","null":!0,array:!0},{name:"frame",type:"number","null":!0,array:!0,length:2,"default":[null,0]},{name:"ignorePeers",type:"boolean","default":!1}]};
f.inherits(bd,h.Transform,{transform(Bb,$b){this.stamp=$b.stamp;const Gc=Bb.modified(),Jc=h.stableCompare(Bb.sort),ud=U(Bb.groupby),Zc=Sd=>this.group(ud(Sd));let xd=this.state;if(!xd||Gc)xd=this.state=new ze(Bb);Gc||$b.modified(xd.inputs)?(this.value={},$b.visit($b.SOURCE,Sd=>Zc(Sd).add(Sd))):($b.visit($b.REM,Sd=>Zc(Sd).remove(Sd)),$b.visit($b.ADD,Sd=>Zc(Sd).add(Sd)));for(let Sd=0,ie=this._mlen;Sd<ie;++Sd)Bd(this._mods[Sd],xd,Jc,Bb);this._mlen=0;this._mods=[];return $b.reflow(Gc).modifies(xd.outputs)},
group(Bb){let $b=this.value[Bb];$b||($b=this.value[Bb]=v(h.tupleid),$b.stamp=-1);$b.stamp<this.stamp&&($b.stamp=this.stamp,this._mods[this._mlen++]=$b);return $b}});k.aggregate=R;k.bin=B;k.collect=O;k.compare=N;k.countpattern=J;k.cross=T;k.density=ba;k.dotbin=Z;k.expression=E;k.extent=W;k.facet=ja;k.field=Ba;k.filter=ua;k.flatten=Fa;k.fold=Xa;k.formula=Sa;k.generate=eb;k.impute=Va;k.joinaggregate=ma;k.kde=Aa;k.key=Da;k.load=Ea;k.lookup=Mb;k.multiextent=Gb;k.multivalues=sa;k.params=xa;k.pivot=Ia;k.prefacet=
mb;k.project=Jb;k.proxy=Eb;k.quantile=Db;k.relay=bc;k.sample=jc;k.sequence=Tc;k.sieve=ub;k.subflow=fa;k.timeunit=Rc;k.tupleindex=Gd;k.values=Kd;k.window=bd;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[520]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa):"function"===typeof define&&define.amd?define(["exports"],f):(k=k||self,f(k.d3=k.d3||{}))})(this,function(k){function f(){this._x0=this._y0=this._x1=this._y1=null;this._=""}function h(){return new f}const l=Math.PI,u=2*l,q=u-1E-6;f.prototype=h.prototype={constructor:f,moveTo:function(D,U){this._+="M"+(this._x0=this._x1=+D)+","+(this._y0=this._y1=+U)},closePath:function(){null!==this._x1&&(this._x1=
this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(D,U){this._+="L"+(this._x1=+D)+","+(this._y1=+U)},quadraticCurveTo:function(D,U,aa,X){this._+="Q"+ +D+","+ +U+","+(this._x1=+aa)+","+(this._y1=+X)},bezierCurveTo:function(D,U,aa,X,S,V){this._+="C"+ +D+","+ +U+","+ +aa+","+ +X+","+(this._x1=+S)+","+(this._y1=+V)},arcTo:function(D,U,aa,X,S){D=+D;U=+U;aa=+aa;X=+X;S=+S;var V=this._x1,F=this._y1,t=aa-D,w=X-U,x=V-D,I=F-U,R=x*x+I*I;if(0>S)throw Error("negative radius: "+S);if(null===this._x1)this._+=
"M"+(this._x1=D)+","+(this._y1=U);else if(1E-6<R)if(1E-6<Math.abs(I*t-w*x)&&S){aa-=V;X-=F;var B=t*t+w*w;F=Math.sqrt(B);V=Math.sqrt(R);R=S*Math.tan((l-Math.acos((B+R-(aa*aa+X*X))/(2*F*V)))/2);V=R/V;R/=F;1E-6<Math.abs(V-1)&&(this._+="L"+(D+V*x)+","+(U+V*I));this._+="A"+S+","+S+",0,0,"+ +(I*aa>x*X)+","+(this._x1=D+R*t)+","+(this._y1=U+R*w)}else this._+="L"+(this._x1=D)+","+(this._y1=U)},arc:function(D,U,aa,X,S,V){D=+D;U=+U;aa=+aa;V=!!V;var F=aa*Math.cos(X),t=aa*Math.sin(X),w=D+F,x=U+t,I=1^V;X=V?X-S:
S-X;if(0>aa)throw Error("negative radius: "+aa);if(null===this._x1)this._+="M"+w+","+x;else if(1E-6<Math.abs(this._x1-w)||1E-6<Math.abs(this._y1-x))this._+="L"+w+","+x;aa&&(0>X&&(X=X%u+u),X>q?this._+="A"+aa+","+aa+",0,1,"+I+","+(D-F)+","+(U-t)+"A"+aa+","+aa+",0,1,"+I+","+(this._x1=w)+","+(this._y1=x):1E-6<X&&(this._+="A"+aa+","+aa+",0,"+ +(X>=l)+","+I+","+(this._x1=D+aa*Math.cos(S))+","+(this._y1=U+aa*Math.sin(S))))},rect:function(D,U,aa,X){this._+="M"+(this._x0=this._x1=+D)+","+(this._y0=this._y1=
+U)+"h"+ +aa+"v"+ +X+"h"+-aa+"Z"},toString:function(){return this._}};k.path=h;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[521]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(520)):"function"===typeof define&&define.amd?define(["exports","d3-path"],f):(k="undefined"!==typeof globalThis?globalThis:k||self,f(k.d3=k.d3||{},k.d3))})(this,function(k,f){function h(uc){return function(){return uc}}function l(uc){return 1<=uc?ub:-1>=uc?-ub:Math.asin(uc)}function u(uc){return uc.innerRadius}function q(uc){return uc.outerRadius}function D(uc){return uc.startAngle}function U(uc){return uc.endAngle}
function aa(uc){return uc&&uc.padAngle}function X(uc,Oc,Nd,Od,pe,ye,me){var od=uc-Nd,hd=Oc-Od;me=(me?ye:-ye)/jc(od*od+hd*hd);hd*=me;od*=-me;var ge=uc+hd,$d=Oc+od,cd=Nd+hd,Ie=Od+od;Nd=(ge+cd)/2;Od=($d+Ie)/2;Oc=cd-ge;uc=Ie-$d;me=Oc*Oc+uc*uc;ye=pe-ye;Ie=ge*Ie-cd*$d;var Je=(0>uc?-1:1)*jc(Eb(0,ye*ye*me-Ie*Ie));ge=(Ie*uc-Oc*Je)/me;$d=(-Ie*Oc-uc*Je)/me;cd=(Ie*uc+Oc*Je)/me;Oc=(-Ie*Oc+uc*Je)/me;uc=ge-Nd;me=$d-Od;Nd=cd-Nd;Od=Oc-Od;uc*uc+me*me>Nd*Nd+Od*Od&&(ge=cd,$d=Oc);return{cx:ge,cy:$d,x01:-hd,y01:-od,x11:ge*
(pe/ye-1),y11:$d*(pe/ye-1)}}function S(uc){return"object"===typeof uc&&"length"in uc?uc:Array.from(uc)}function V(uc){this._context=uc}function F(uc){return new V(uc)}function t(uc){return uc[0]}function w(uc){return uc[1]}function x(uc,Oc){function Nd(od){var hd,ge=(od=S(od)).length,$d,cd=!1,Ie;null==pe&&(me=ye(Ie=f.path()));for(hd=0;hd<=ge;++hd)!(hd<ge&&Od($d=od[hd],hd,od))===cd&&((cd=!cd)?me.lineStart():me.lineEnd()),cd&&me.point(+uc($d,hd,od),+Oc($d,hd,od));if(Ie)return me=null,Ie+""||null}var Od=
h(!0),pe=null,ye=F,me=null;uc="function"===typeof uc?uc:void 0===uc?t:h(uc);Oc="function"===typeof Oc?Oc:void 0===Oc?w:h(Oc);Nd.x=function(od){return arguments.length?(uc="function"===typeof od?od:h(+od),Nd):uc};Nd.y=function(od){return arguments.length?(Oc="function"===typeof od?od:h(+od),Nd):Oc};Nd.defined=function(od){return arguments.length?(Od="function"===typeof od?od:h(!!od),Nd):Od};Nd.curve=function(od){return arguments.length?(ye=od,null!=pe&&(me=ye(pe)),Nd):ye};Nd.context=function(od){return arguments.length?
(null==od?pe=me=null:me=ye(pe=od),Nd):pe};return Nd}function I(uc,Oc,Nd){function Od($d){var cd,Ie,Je=($d=S($d)).length,Ad,$e=!1,qf,Ye=Array(Je),af=Array(Je);null==od&&(ge=hd(qf=f.path()));for(cd=0;cd<=Je;++cd){if(!(cd<Je&&me(Ad=$d[cd],cd,$d))===$e)if($e=!$e){var jg=cd;ge.areaStart();ge.lineStart()}else{ge.lineEnd();ge.lineStart();for(Ie=cd-1;Ie>=jg;--Ie)ge.point(Ye[Ie],af[Ie]);ge.lineEnd();ge.areaEnd()}$e&&(Ye[cd]=+uc(Ad,cd,$d),af[cd]=+Oc(Ad,cd,$d),ge.point(ye?+ye(Ad,cd,$d):Ye[cd],Nd?+Nd(Ad,cd,$d):
af[cd]))}if(qf)return ge=null,qf+""||null}function pe(){return x().defined(me).curve(hd).context(od)}var ye=null,me=h(!0),od=null,hd=F,ge=null;uc="function"===typeof uc?uc:void 0===uc?t:h(+uc);Oc="function"===typeof Oc?Oc:void 0===Oc?h(0):h(+Oc);Nd="function"===typeof Nd?Nd:void 0===Nd?w:h(+Nd);Od.x=function($d){return arguments.length?(uc="function"===typeof $d?$d:h(+$d),ye=null,Od):uc};Od.x0=function($d){return arguments.length?(uc="function"===typeof $d?$d:h(+$d),Od):uc};Od.x1=function($d){return arguments.length?
(ye=null==$d?null:"function"===typeof $d?$d:h(+$d),Od):ye};Od.y=function($d){return arguments.length?(Oc="function"===typeof $d?$d:h(+$d),Nd=null,Od):Oc};Od.y0=function($d){return arguments.length?(Oc="function"===typeof $d?$d:h(+$d),Od):Oc};Od.y1=function($d){return arguments.length?(Nd=null==$d?null:"function"===typeof $d?$d:h(+$d),Od):Nd};Od.lineX0=Od.lineY0=function(){return pe().x(uc).y(Oc)};Od.lineY1=function(){return pe().x(uc).y(Nd)};Od.lineX1=function(){return pe().x(ye).y(Oc)};Od.defined=
function($d){return arguments.length?(me="function"===typeof $d?$d:h(!!$d),Od):me};Od.curve=function($d){return arguments.length?(hd=$d,null!=od&&(ge=hd(od)),Od):hd};Od.context=function($d){return arguments.length?(null==$d?od=ge=null:ge=hd(od=$d),Od):od};return Od}function R(uc,Oc){return Oc<uc?-1:Oc>uc?1:Oc>=uc?0:NaN}function B(uc){return uc}function v(uc){this._curve=uc}function O(uc){function Oc(Nd){return new v(uc(Nd))}Oc._curve=uc;return Oc}function N(uc){var Oc=uc.curve;uc.angle=uc.x;delete uc.x;
uc.radius=uc.y;delete uc.y;uc.curve=function(Nd){return arguments.length?Oc(O(Nd)):Oc()._curve};return uc}function A(){return N(x().curve(Kd))}function J(){var uc=I().curve(Kd),Oc=uc.curve,Nd=uc.lineX0,Od=uc.lineX1,pe=uc.lineY0,ye=uc.lineY1;uc.angle=uc.x;delete uc.x;uc.startAngle=uc.x0;delete uc.x0;uc.endAngle=uc.x1;delete uc.x1;uc.radius=uc.y;delete uc.y;uc.innerRadius=uc.y0;delete uc.y0;uc.outerRadius=uc.y1;delete uc.y1;uc.lineStartAngle=function(){return N(Nd())};delete uc.lineX0;uc.lineEndAngle=
function(){return N(Od())};delete uc.lineX1;uc.lineInnerRadius=function(){return N(pe())};delete uc.lineY0;uc.lineOuterRadius=function(){return N(ye())};delete uc.lineY1;uc.curve=function(me){return arguments.length?Oc(O(me)):Oc()._curve};return uc}function T(uc,Oc){return[(Oc=+Oc)*Math.cos(uc-=Math.PI/2),Oc*Math.sin(uc)]}function z(uc){return uc.source}function ba(uc){return uc.target}function K(uc){function Oc(){var od,hd=Gd.call(arguments),ge=Nd.apply(this,hd),$d=Od.apply(this,hd);me||(me=od=f.path());
uc(me,+pe.apply(this,(hd[0]=ge,hd)),+ye.apply(this,hd),+pe.apply(this,(hd[0]=$d,hd)),+ye.apply(this,hd));if(od)return me=null,od+""||null}var Nd=z,Od=ba,pe=t,ye=w,me=null;Oc.source=function(od){return arguments.length?(Nd=od,Oc):Nd};Oc.target=function(od){return arguments.length?(Od=od,Oc):Od};Oc.x=function(od){return arguments.length?(pe="function"===typeof od?od:h(+od),Oc):pe};Oc.y=function(od){return arguments.length?(ye="function"===typeof od?od:h(+od),Oc):ye};Oc.context=function(od){return arguments.length?
(me=null==od?null:od,Oc):me};return Oc}function r(uc,Oc,Nd,Od,pe){uc.moveTo(Oc,Nd);uc.bezierCurveTo(Oc=(Oc+Od)/2,Nd,Oc,pe,Od,pe)}function Y(uc,Oc,Nd,Od,pe){uc.moveTo(Oc,Nd);uc.bezierCurveTo(Oc,Nd=(Nd+pe)/2,Od,Nd,Od,pe)}function Z(uc,Oc,Nd,Od,pe){var ye=T(Oc,Nd);Oc=T(Oc,Nd=(Nd+pe)/2);Nd=T(Od,Nd);Od=T(Od,pe);uc.moveTo(ye[0],ye[1]);uc.bezierCurveTo(Oc[0],Oc[1],Nd[0],Nd[1],Od[0],Od[1])}function E(){}function C(uc,Oc,Nd){uc._context.bezierCurveTo((2*uc._x0+uc._x1)/3,(2*uc._y0+uc._y1)/3,(uc._x0+2*uc._x1)/
3,(uc._y0+2*uc._y1)/3,(uc._x0+4*uc._x1+Oc)/6,(uc._y0+4*uc._y1+Nd)/6)}function W(uc){this._context=uc}function fa(uc){this._context=uc}function ja(uc){this._context=uc}function Ba(uc,Oc){this._basis=new W(uc);this._beta=Oc}function Ga(uc,Oc,Nd){uc._context.bezierCurveTo(uc._x1+uc._k*(uc._x2-uc._x0),uc._y1+uc._k*(uc._y2-uc._y0),uc._x2+uc._k*(uc._x1-Oc),uc._y2+uc._k*(uc._y1-Nd),uc._x2,uc._y2)}function ua(uc,Oc){this._context=uc;this._k=(1-Oc)/6}function Fa(uc,Oc){this._context=uc;this._k=(1-Oc)/6}function Xa(uc,
Oc){this._context=uc;this._k=(1-Oc)/6}function Sa(uc,Oc,Nd){var Od=uc._x1,pe=uc._y1,ye=uc._x2,me=uc._y2;if(1E-12<uc._l01_a){var od=2*uc._l01_2a+3*uc._l01_a*uc._l12_a+uc._l12_2a,hd=3*uc._l01_a*(uc._l01_a+uc._l12_a);Od=(Od*od-uc._x0*uc._l12_2a+uc._x2*uc._l01_2a)/hd;pe=(pe*od-uc._y0*uc._l12_2a+uc._y2*uc._l01_2a)/hd}1E-12<uc._l23_a&&(od=2*uc._l23_2a+3*uc._l23_a*uc._l12_a+uc._l12_2a,hd=3*uc._l23_a*(uc._l23_a+uc._l12_a),ye=(ye*od+uc._x1*uc._l23_2a-Oc*uc._l12_2a)/hd,me=(me*od+uc._y1*uc._l23_2a-Nd*uc._l12_2a)/
hd);uc._context.bezierCurveTo(Od,pe,ye,me,uc._x2,uc._y2)}function eb(uc,Oc){this._context=uc;this._alpha=Oc}function Va(uc,Oc){this._context=uc;this._alpha=Oc}function La(uc,Oc){this._context=uc;this._alpha=Oc}function Ra(uc){this._context=uc}function la(uc,Oc,Nd){var Od=uc._x1-uc._x0;Oc-=uc._x1;var pe=(uc._y1-uc._y0)/(Od||0>Oc&&-0);uc=(Nd-uc._y1)/(Oc||0>Od&&-0);return((0>pe?-1:1)+(0>uc?-1:1))*Math.min(Math.abs(pe),Math.abs(uc),.5*Math.abs((pe*Oc+uc*Od)/(Od+Oc)))||0}function ma(uc,Oc){var Nd=uc._x1-
uc._x0;return Nd?(3*(uc._y1-uc._y0)/Nd-Oc)/2:Oc}function Aa(uc,Oc,Nd){var Od=uc._x0,pe=uc._x1,ye=uc._y1,me=(pe-Od)/3;uc._context.bezierCurveTo(Od+me,uc._y0+me*Oc,pe-me,ye-me*Nd,pe,ye)}function Da(uc){this._context=uc}function Qa(uc){this._context=new Ea(uc)}function Ea(uc){this._context=uc}function kb(uc){this._context=uc}function cb(uc){var Oc,Nd=uc.length-1,Od=Array(Nd),pe=Array(Nd),ye=Array(Nd);Od[0]=0;pe[0]=2;ye[0]=uc[0]+2*uc[1];for(Oc=1;Oc<Nd-1;++Oc)Od[Oc]=1,pe[Oc]=4,ye[Oc]=4*uc[Oc]+2*uc[Oc+
1];Od[Nd-1]=2;pe[Nd-1]=7;ye[Nd-1]=8*uc[Nd-1]+uc[Nd];for(Oc=1;Oc<Nd;++Oc){var me=Od[Oc]/pe[Oc-1];pe[Oc]-=me;ye[Oc]-=me*ye[Oc-1]}Od[Nd-1]=ye[Nd-1]/pe[Nd-1];for(Oc=Nd-2;0<=Oc;--Oc)Od[Oc]=(ye[Oc]-Od[Oc+1])/pe[Oc];pe[Nd-1]=(uc[Nd]+Od[Nd-1])/2;for(Oc=0;Oc<Nd-1;++Oc)pe[Oc]=2*uc[Oc+1]-Od[Oc+1];return[Od,pe]}function Mb(uc,Oc){this._context=uc;this._t=Oc}function Gb(uc,Oc){if(1<(me=uc.length))for(var Nd=1,Od,pe,ye=uc[Oc[0]],me,od=ye.length;Nd<me;++Nd)for(pe=ye,ye=uc[Oc[Nd]],Od=0;Od<od;++Od)ye[Od][1]+=ye[Od][0]=
isNaN(pe[Od][1])?pe[Od][0]:pe[Od][1]}function Wb(uc){uc=uc.length;for(var Oc=Array(uc);0<=--uc;)Oc[uc]=uc;return Oc}function sa(uc,Oc){return uc[Oc]}function ra(uc){const Oc=[];Oc.key=uc;return Oc}function xa(uc){var Oc=uc.map(Ia);return Wb(uc).sort(function(Nd,Od){return Oc[Nd]-Oc[Od]})}function Ia(uc){for(var Oc=-1,Nd=0,Od=uc.length,pe,ye=-Infinity;++Oc<Od;)(pe=+uc[Oc][1])>ye&&(ye=pe,Nd=Oc);return Nd}function bb(uc){var Oc=uc.map(Hb);return Wb(uc).sort(function(Nd,Od){return Oc[Nd]-Oc[Od]})}function Hb(uc){for(var Oc=
0,Nd=-1,Od=uc.length,pe;++Nd<Od;)if(pe=+uc[Nd][1])Oc+=pe;return Oc}var zb=Math.abs,mb=Math.atan2,Jb=Math.cos,Eb=Math.max,Db=Math.min,bc=Math.sin,jc=Math.sqrt,Tc=Math.PI,ub=Tc/2,Rc=2*Tc,Gd=Array.prototype.slice;V.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(uc,Oc){uc=+uc;Oc=+Oc;switch(this._point){case 0:this._point=
1;this._line?this._context.lineTo(uc,Oc):this._context.moveTo(uc,Oc);break;case 1:this._point=2;default:this._context.lineTo(uc,Oc)}}};var Kd=O(F);v.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(uc,Oc){this._curve.point(Oc*Math.sin(uc),Oc*-Math.cos(uc))}};var Vd={draw:function(uc,Oc){Oc=Math.sqrt(Oc/Tc);uc.moveTo(Oc,0);uc.arc(0,0,Oc,0,Rc)}},ze=
{draw:function(uc,Oc){Oc=Math.sqrt(Oc/5)/2;uc.moveTo(-3*Oc,-Oc);uc.lineTo(-Oc,-Oc);uc.lineTo(-Oc,-3*Oc);uc.lineTo(Oc,-3*Oc);uc.lineTo(Oc,-Oc);uc.lineTo(3*Oc,-Oc);uc.lineTo(3*Oc,Oc);uc.lineTo(Oc,Oc);uc.lineTo(Oc,3*Oc);uc.lineTo(-Oc,3*Oc);uc.lineTo(-Oc,Oc);uc.lineTo(-3*Oc,Oc);uc.closePath()}},ee=Math.sqrt(1/3),bd=2*ee,Bd={draw:function(uc,Oc){Oc=Math.sqrt(Oc/bd);var Nd=Oc*ee;uc.moveTo(0,-Oc);uc.lineTo(Nd,0);uc.lineTo(0,Oc);uc.lineTo(-Nd,0);uc.closePath()}},Ld=Math.sin(Tc/10)/Math.sin(7*Tc/10),fe=Math.sin(Rc/
10)*Ld,Ee=-Math.cos(Rc/10)*Ld,dd={draw:function(uc,Oc){Oc=Math.sqrt(.8908130915292852*Oc);var Nd=fe*Oc,Od=Ee*Oc;uc.moveTo(0,-Oc);uc.lineTo(Nd,Od);for(var pe=1;5>pe;++pe){var ye=Rc*pe/5,me=Math.cos(ye);ye=Math.sin(ye);uc.lineTo(ye*Oc,-me*Oc);uc.lineTo(me*Nd-ye*Od,ye*Nd+me*Od)}uc.closePath()}},nd={draw:function(uc,Oc){Oc=Math.sqrt(Oc);var Nd=-Oc/2;uc.rect(Nd,Nd,Oc,Oc)}},Dc=Math.sqrt(3),jd={draw:function(uc,Oc){Oc=-Math.sqrt(Oc/(3*Dc));uc.moveTo(0,2*Oc);uc.lineTo(-Dc*Oc,-Oc);uc.lineTo(Dc*Oc,-Oc);uc.closePath()}},
Qd=Math.sqrt(3)/2,ae=1/Math.sqrt(12),te=3*(ae/2+1),Bb={draw:function(uc,Oc){var Nd=Math.sqrt(Oc/te);Oc=Nd/2;var Od=Nd*ae;Nd=Nd*ae+Nd;var pe=-Oc;uc.moveTo(Oc,Od);uc.lineTo(Oc,Nd);uc.lineTo(pe,Nd);uc.lineTo(-.5*Oc-Qd*Od,Qd*Oc+-.5*Od);uc.lineTo(-.5*Oc-Qd*Nd,Qd*Oc+-.5*Nd);uc.lineTo(-.5*pe-Qd*Nd,Qd*pe+-.5*Nd);uc.lineTo(-.5*Oc+Qd*Od,-.5*Od-Qd*Oc);uc.lineTo(-.5*Oc+Qd*Nd,-.5*Nd-Qd*Oc);uc.lineTo(-.5*pe+Qd*Nd,-.5*Nd-Qd*pe);uc.closePath()}},$b=[Vd,ze,Bd,nd,dd,jd,Bb];W.prototype={areaStart:function(){this._line=
0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){switch(this._point){case 3:C(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(uc,Oc){uc=+uc;Oc=+Oc;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(uc,Oc):this._context.moveTo(uc,Oc);break;case 1:this._point=2;
break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:C(this,uc,Oc)}this._x0=this._x1;this._x1=uc;this._y0=this._y1;this._y1=Oc}};fa.prototype={areaStart:E,areaEnd:E,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2);this._context.closePath();break;case 2:this._context.moveTo((this._x2+
2*this._x3)/3,(this._y2+2*this._y3)/3);this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3);this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(uc,Oc){uc=+uc;Oc=+Oc;switch(this._point){case 0:this._point=1;this._x2=uc;this._y2=Oc;break;case 1:this._point=2;this._x3=uc;this._y3=Oc;break;case 2:this._point=3;this._x4=uc;this._y4=Oc;this._context.moveTo((this._x0+4*this._x1+uc)/6,(this._y0+
4*this._y1+Oc)/6);break;default:C(this,uc,Oc)}this._x0=this._x1;this._x1=uc;this._y0=this._y1;this._y1=Oc}};ja.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(uc,Oc){uc=+uc;Oc=+Oc;switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=
3;var Nd=(this._x0+4*this._x1+uc)/6,Od=(this._y0+4*this._y1+Oc)/6;this._line?this._context.lineTo(Nd,Od):this._context.moveTo(Nd,Od);break;case 3:this._point=4;default:C(this,uc,Oc)}this._x0=this._x1;this._x1=uc;this._y0=this._y1;this._y1=Oc}};class Gc{constructor(uc,Oc){this._context=uc;this._x=Oc}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line}point(uc,Oc){uc=+uc;
Oc=+Oc;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(uc,Oc):this._context.moveTo(uc,Oc);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+uc)/2,this._y0,this._x0,Oc,uc,Oc):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+Oc)/2,uc,this._y0,uc,Oc)}this._x0=uc;this._y0=Oc}}Ba.prototype={lineStart:function(){this._x=[];this._y=[];this._basis.lineStart()},lineEnd:function(){var uc=this._x,Oc=this._y,Nd=uc.length-1;if(0<Nd)for(var Od=
uc[0],pe=Oc[0],ye=uc[Nd]-Od,me=Oc[Nd]-pe,od=-1,hd;++od<=Nd;)hd=od/Nd,this._basis.point(this._beta*uc[od]+(1-this._beta)*(Od+hd*ye),this._beta*Oc[od]+(1-this._beta)*(pe+hd*me));this._x=this._y=null;this._basis.lineEnd()},point:function(uc,Oc){this._x.push(+uc);this._y.push(+Oc)}};var Jc=function Nd(Oc){function Od(pe){return 1===Oc?new W(pe):new Ba(pe,Oc)}Od.beta=function(pe){return Nd(+pe)};return Od}(.85);ua.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=
this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Ga(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Oc,Nd){Oc=+Oc;Nd=+Nd;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(Oc,Nd):this._context.moveTo(Oc,Nd);break;case 1:this._point=2;this._x1=Oc;this._y1=Nd;break;case 2:this._point=
3;default:Ga(this,Oc,Nd)}this._x0=this._x1;this._x1=this._x2;this._x2=Oc;this._y0=this._y1;this._y1=this._y2;this._y2=Nd}};var ud=function Od(Nd){function pe(ye){return new ua(ye,Nd)}pe.tension=function(ye){return Od(+ye)};return pe}(0);Fa.prototype={areaStart:E,areaEnd:E,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);
this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(Nd,Od){Nd=+Nd;Od=+Od;switch(this._point){case 0:this._point=1;this._x3=Nd;this._y3=Od;break;case 1:this._point=2;this._context.moveTo(this._x4=Nd,this._y4=Od);break;case 2:this._point=3;this._x5=Nd;this._y5=Od;break;default:Ga(this,Nd,Od)}this._x0=this._x1;this._x1=this._x2;this._x2=
Nd;this._y0=this._y1;this._y1=this._y2;this._y2=Od}};var Zc=function pe(Od){function ye(me){return new Fa(me,Od)}ye.tension=function(me){return pe(+me)};return ye}(0);Xa.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(Od,pe){Od=+Od;pe=+pe;switch(this._point){case 0:this._point=
1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Ga(this,Od,pe)}this._x0=this._x1;this._x1=this._x2;this._x2=Od;this._y0=this._y1;this._y1=this._y2;this._y2=pe}};var xd=function ye(pe){function me(od){return new Xa(od,pe)}me.tension=function(od){return ye(+od)};return me}(0);eb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=
this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(pe,ye){pe=+pe;ye=+ye;if(this._point){var me=this._x2-pe,od=this._y2-ye;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(me*me+
od*od,this._alpha))}switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(pe,ye):this._context.moveTo(pe,ye);break;case 1:this._point=2;break;case 2:this._point=3;default:Sa(this,pe,ye)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=pe;this._y0=this._y1;this._y1=this._y2;this._y2=ye}};var Sd=function me(ye){function od(hd){return ye?new eb(hd,ye):new ua(hd,0)}od.alpha=function(hd){return me(+hd)};
return od}(.5);Va.prototype={areaStart:E,areaEnd:E,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3);this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3);this._context.closePath();break;case 3:this.point(this._x3,this._y3),
this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(ye,me){ye=+ye;me=+me;if(this._point){var od=this._x2-ye,hd=this._y2-me;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(od*od+hd*hd,this._alpha))}switch(this._point){case 0:this._point=1;this._x3=ye;this._y3=me;break;case 1:this._point=2;this._context.moveTo(this._x4=ye,this._y4=me);break;case 2:this._point=3;this._x5=ye;this._y5=me;break;default:Sa(this,ye,me)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;
this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=ye;this._y0=this._y1;this._y1=this._y2;this._y2=me}};var ie=function od(me){function hd(ge){return me?new Va(ge,me):new Fa(ge,0)}hd.alpha=function(ge){return od(+ge)};return hd}(.5);La.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN;this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=
0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath();this._line=1-this._line},point:function(me,od){me=+me;od=+od;if(this._point){var hd=this._x2-me,ge=this._y2-od;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(hd*hd+ge*ge,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Sa(this,
me,od)}this._l01_a=this._l12_a;this._l12_a=this._l23_a;this._l01_2a=this._l12_2a;this._l12_2a=this._l23_2a;this._x0=this._x1;this._x1=this._x2;this._x2=me;this._y0=this._y1;this._y1=this._y2;this._y2=od}};var Be=function hd(od){function ge($d){return od?new La($d,od):new Xa($d,0)}ge.alpha=function($d){return hd(+$d)};return ge}(.5);Ra.prototype={areaStart:E,areaEnd:E,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(od,hd){od=+od;hd=+hd;
this._point?this._context.lineTo(od,hd):(this._point=1,this._context.moveTo(od,hd))}};Da.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN;this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Aa(this,this._t0,ma(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath();this._line=1-this._line},point:function(od,
hd){var ge=NaN;od=+od;hd=+hd;if(od!==this._x1||hd!==this._y1){switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(od,hd):this._context.moveTo(od,hd);break;case 1:this._point=2;break;case 2:this._point=3;Aa(this,ma(this,ge=la(this,od,hd)),ge);break;default:Aa(this,this._t0,ge=la(this,od,hd))}this._x0=this._x1;this._x1=od;this._y0=this._y1;this._y1=hd;this._t0=ge}}};(Qa.prototype=Object.create(Da.prototype)).point=function(od,hd){Da.prototype.point.call(this,hd,od)};Ea.prototype=
{moveTo:function(od,hd){this._context.moveTo(hd,od)},closePath:function(){this._context.closePath()},lineTo:function(od,hd){this._context.lineTo(hd,od)},bezierCurveTo:function(od,hd,ge,$d,cd,Ie){this._context.bezierCurveTo(hd,od,$d,ge,Ie,cd)}};kb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[];this._y=[]},lineEnd:function(){var od=this._x,hd=this._y,ge=od.length;if(ge)if(this._line?this._context.lineTo(od[0],hd[0]):this._context.moveTo(od[0],
hd[0]),2===ge)this._context.lineTo(od[1],hd[1]);else for(var $d=cb(od),cd=cb(hd),Ie=0,Je=1;Je<ge;++Ie,++Je)this._context.bezierCurveTo($d[0][Ie],cd[0][Ie],$d[1][Ie],cd[1][Ie],od[Je],hd[Je]);(this._line||0!==this._line&&1===ge)&&this._context.closePath();this._line=1-this._line;this._x=this._y=null},point:function(od,hd){this._x.push(+od);this._y.push(+hd)}};Mb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN;this._point=0},lineEnd:function(){0<
this._t&&1>this._t&&2===this._point&&this._context.lineTo(this._x,this._y);(this._line||0!==this._line&&1===this._point)&&this._context.closePath();0<=this._line&&(this._t=1-this._t,this._line=1-this._line)},point:function(od,hd){od=+od;hd=+hd;switch(this._point){case 0:this._point=1;this._line?this._context.lineTo(od,hd):this._context.moveTo(od,hd);break;case 1:this._point=2;default:if(0>=this._t)this._context.lineTo(this._x,hd),this._context.lineTo(od,hd);else{var ge=this._x*(1-this._t)+od*this._t;
this._context.lineTo(ge,this._y);this._context.lineTo(ge,hd)}}this._x=od;this._y=hd}};k.arc=function(){function od(){var qf,Ye=+hd.apply(this,arguments),af=+ge.apply(this,arguments),jg=Ie.apply(this,arguments)-ub,oe=Je.apply(this,arguments)-ub,If=zb(oe-jg),hg=oe>jg;$e||($e=qf=f.path());if(af<Ye){var zg=af;af=Ye;Ye=zg}if(1E-12<af)if(If>Rc-1E-12)$e.moveTo(af*Jb(jg),af*bc(jg)),$e.arc(0,0,af,jg,oe,!hg),1E-12<Ye&&($e.moveTo(Ye*Jb(oe),Ye*bc(oe)),$e.arc(0,0,Ye,oe,jg,hg));else{var pf=jg,bg=oe;zg=jg;var wg=
oe,Tf=If,sg=If,zc=Ad.apply(this,arguments)/2,Wa=1E-12<zc&&(cd?+cd.apply(this,arguments):jc(Ye*Ye+af*af)),Ha=Db(zb(af-Ye)/2,+$d.apply(this,arguments)),m=Ha,Na=Ha;if(1E-12<Wa){var Xb=l(Wa/Ye*bc(zc));zc=l(Wa/af*bc(zc));1E-12<(Tf-=2*Xb)?(Xb*=hg?1:-1,zg+=Xb,wg-=Xb):(Tf=0,zg=wg=(jg+oe)/2);1E-12<(sg-=2*zc)?(zc*=hg?1:-1,pf+=zc,bg-=zc):(sg=0,pf=bg=(jg+oe)/2)}jg=af*Jb(pf);oe=af*bc(pf);Xb=Ye*Jb(wg);zc=Ye*bc(wg);if(1E-12<Ha){var Xc=af*Jb(bg),Id=af*bc(bg),Td=Ye*Jb(zg),nf=Ye*bc(zg);if(If=If<Tc){var Se=Td-jg;If=
nf-oe;Wa=Xb-Xc;var Rd=zc-Id,Vf=Rd*Se-Wa*If;1E-12>Vf*Vf?Se=void 0:(Vf=(Wa*(oe-Id)-Rd*(jg-Xc))/Vf,Se=[jg+Vf*Se,oe+Vf*If]);If=Se}If&&(m=jg-Se[0],Na=oe-Se[1],If=Xc-Se[0],Wa=Id-Se[1],m=(m*If+Na*Wa)/(jc(m*m+Na*Na)*jc(If*If+Wa*Wa)),Na=1/bc((1<m?0:-1>m?Tc:Math.acos(m))/2),Se=jc(Se[0]*Se[0]+Se[1]*Se[1]),m=Db(Ha,(Ye-Se)/(Na-1)),Na=Db(Ha,(af-Se)/(Na+1)))}1E-12<sg?1E-12<Na?(pf=X(Td,nf,jg,oe,af,Na,hg),bg=X(Xc,Id,Xb,zc,af,Na,hg),$e.moveTo(pf.cx+pf.x01,pf.cy+pf.y01),Na<Ha?$e.arc(pf.cx,pf.cy,Na,mb(pf.y01,pf.x01),
mb(bg.y01,bg.x01),!hg):($e.arc(pf.cx,pf.cy,Na,mb(pf.y01,pf.x01),mb(pf.y11,pf.x11),!hg),$e.arc(0,0,af,mb(pf.cy+pf.y11,pf.cx+pf.x11),mb(bg.cy+bg.y11,bg.cx+bg.x11),!hg),$e.arc(bg.cx,bg.cy,Na,mb(bg.y11,bg.x11),mb(bg.y01,bg.x01),!hg))):($e.moveTo(jg,oe),$e.arc(0,0,af,pf,bg,!hg)):$e.moveTo(jg,oe);1E-12<Ye&&1E-12<Tf?1E-12<m?(pf=X(Xb,zc,Xc,Id,Ye,-m,hg),bg=X(jg,oe,Td,nf,Ye,-m,hg),$e.lineTo(pf.cx+pf.x01,pf.cy+pf.y01),m<Ha?$e.arc(pf.cx,pf.cy,m,mb(pf.y01,pf.x01),mb(bg.y01,bg.x01),!hg):($e.arc(pf.cx,pf.cy,m,mb(pf.y01,
pf.x01),mb(pf.y11,pf.x11),!hg),$e.arc(0,0,Ye,mb(pf.cy+pf.y11,pf.cx+pf.x11),mb(bg.cy+bg.y11,bg.cx+bg.x11),hg),$e.arc(bg.cx,bg.cy,m,mb(bg.y11,bg.x11),mb(bg.y01,bg.x01),!hg))):$e.arc(0,0,Ye,wg,zg,hg):$e.lineTo(Xb,zc)}else $e.moveTo(0,0);$e.closePath();if(qf)return $e=null,qf+""||null}var hd=u,ge=q,$d=h(0),cd=null,Ie=D,Je=U,Ad=aa,$e=null;od.centroid=function(){var qf=(+hd.apply(this,arguments)+ +ge.apply(this,arguments))/2,Ye=(+Ie.apply(this,arguments)+ +Je.apply(this,arguments))/2-Tc/2;return[Jb(Ye)*
qf,bc(Ye)*qf]};od.innerRadius=function(qf){return arguments.length?(hd="function"===typeof qf?qf:h(+qf),od):hd};od.outerRadius=function(qf){return arguments.length?(ge="function"===typeof qf?qf:h(+qf),od):ge};od.cornerRadius=function(qf){return arguments.length?($d="function"===typeof qf?qf:h(+qf),od):$d};od.padRadius=function(qf){return arguments.length?(cd=null==qf?null:"function"===typeof qf?qf:h(+qf),od):cd};od.startAngle=function(qf){return arguments.length?(Ie="function"===typeof qf?qf:h(+qf),
od):Ie};od.endAngle=function(qf){return arguments.length?(Je="function"===typeof qf?qf:h(+qf),od):Je};od.padAngle=function(qf){return arguments.length?(Ad="function"===typeof qf?qf:h(+qf),od):Ad};od.context=function(qf){return arguments.length?($e=null==qf?null:qf,od):$e};return od};k.area=I;k.areaRadial=J;k.curveBasis=function(od){return new W(od)};k.curveBasisClosed=function(od){return new fa(od)};k.curveBasisOpen=function(od){return new ja(od)};k.curveBumpX=function(od){return new Gc(od,!0)};k.curveBumpY=
function(od){return new Gc(od,!1)};k.curveBundle=Jc;k.curveCardinal=ud;k.curveCardinalClosed=Zc;k.curveCardinalOpen=xd;k.curveCatmullRom=Sd;k.curveCatmullRomClosed=ie;k.curveCatmullRomOpen=Be;k.curveLinear=F;k.curveLinearClosed=function(od){return new Ra(od)};k.curveMonotoneX=function(od){return new Da(od)};k.curveMonotoneY=function(od){return new Qa(od)};k.curveNatural=function(od){return new kb(od)};k.curveStep=function(od){return new Mb(od,.5)};k.curveStepAfter=function(od){return new Mb(od,1)};
k.curveStepBefore=function(od){return new Mb(od,0)};k.line=x;k.lineRadial=A;k.linkHorizontal=function(){return K(r)};k.linkRadial=function(){var od=K(Z);od.angle=od.x;delete od.x;od.radius=od.y;delete od.y;return od};k.linkVertical=function(){return K(Y)};k.pie=function(){function od(Ad){var $e,qf=(Ad=S(Ad)).length;var Ye=0;var af=Array(qf),jg=Array(qf),oe=+cd.apply(this,arguments);var If=Math.min(Rc,Math.max(-Rc,Ie.apply(this,arguments)-oe));var hg=Math.min(Math.abs(If)/qf,Je.apply(this,arguments)),
zg=hg*(0>If?-1:1),pf;for($e=0;$e<qf;++$e)0<(pf=jg[af[$e]=$e]=+hd(Ad[$e],$e,Ad))&&(Ye+=pf);null!=ge?af.sort(function(wg,Tf){return ge(jg[wg],jg[Tf])}):null!=$d&&af.sort(function(wg,Tf){return $d(Ad[wg],Ad[Tf])});$e=0;for(If=Ye?(If-qf*zg)/Ye:0;$e<qf;++$e,oe=bg){Ye=af[$e];pf=jg[Ye];var bg=oe+(0<pf?pf*If:0)+zg;jg[Ye]={data:Ad[Ye],index:$e,value:pf,startAngle:oe,endAngle:bg,padAngle:hg}}return jg}var hd=B,ge=R,$d=null,cd=h(0),Ie=h(Rc),Je=h(0);od.value=function(Ad){return arguments.length?(hd="function"===
typeof Ad?Ad:h(+Ad),od):hd};od.sortValues=function(Ad){return arguments.length?(ge=Ad,$d=null,od):ge};od.sort=function(Ad){return arguments.length?($d=Ad,ge=null,od):$d};od.startAngle=function(Ad){return arguments.length?(cd="function"===typeof Ad?Ad:h(+Ad),od):cd};od.endAngle=function(Ad){return arguments.length?(Ie="function"===typeof Ad?Ad:h(+Ad),od):Ie};od.padAngle=function(Ad){return arguments.length?(Je="function"===typeof Ad?Ad:h(+Ad),od):Je};return od};k.pointRadial=T;k.radialArea=J;k.radialLine=
A;k.stack=function(){function od(Ie){var Je=Array.from(hd.apply(this,arguments),ra),Ad=Je.length,$e=-1;for(const Ye of Ie){var qf=0;for(++$e;qf<Ad;++qf)(Je[qf][$e]=[0,+cd(Ye,Je[qf].key,$e,Ie)]).data=Ye}qf=0;for($e=S(ge(Je));qf<Ad;++qf)Je[$e[qf]].index=qf;$d(Je,$e);return Je}var hd=h([]),ge=Wb,$d=Gb,cd=sa;od.keys=function(Ie){return arguments.length?(hd="function"===typeof Ie?Ie:h(Array.from(Ie)),od):hd};od.value=function(Ie){return arguments.length?(cd="function"===typeof Ie?Ie:h(+Ie),od):cd};od.order=
function(Ie){return arguments.length?(ge=null==Ie?Wb:"function"===typeof Ie?Ie:h(Array.from(Ie)),od):ge};od.offset=function(Ie){return arguments.length?($d=null==Ie?Gb:Ie,od):$d};return od};k.stackOffsetDiverging=function(od,hd){if(0<($e=od.length))for(var ge,$d=0,cd,Ie,Je,Ad,$e,qf=od[hd[0]].length;$d<qf;++$d)for(ge=Je=Ad=0;ge<$e;++ge)0<(Ie=(cd=od[hd[ge]][$d])[1]-cd[0])?(cd[0]=Je,cd[1]=Je+=Ie):0>Ie?(cd[1]=Ad,cd[0]=Ad+=Ie):(cd[0]=0,cd[1]=Ie)};k.stackOffsetExpand=function(od,hd){if(0<($d=od.length)){for(var ge,
$d,cd=0,Ie=od[0].length,Je;cd<Ie;++cd){for(Je=ge=0;ge<$d;++ge)Je+=od[ge][cd][1]||0;if(Je)for(ge=0;ge<$d;++ge)od[ge][cd][1]/=Je}Gb(od,hd)}};k.stackOffsetNone=Gb;k.stackOffsetSilhouette=function(od,hd){if(0<(cd=od.length)){for(var ge=0,$d=od[hd[0]],cd,Ie=$d.length;ge<Ie;++ge){for(var Je=0,Ad=0;Je<cd;++Je)Ad+=od[Je][ge][1]||0;$d[ge][1]+=$d[ge][0]=-Ad/2}Gb(od,hd)}};k.stackOffsetWiggle=function(od,hd){if(0<(Je=od.length)&&0<(Ie=(cd=od[hd[0]]).length)){for(var ge=0,$d=1,cd,Ie,Je;$d<Ie;++$d){for(var Ad=
0,$e=0,qf=0;Ad<Je;++Ad){var Ye=od[hd[Ad]],af=Ye[$d][1]||0;Ye=(af-(Ye[$d-1][1]||0))/2;for(var jg=0;jg<Ad;++jg){var oe=od[hd[jg]];Ye+=(oe[$d][1]||0)-(oe[$d-1][1]||0)}$e+=af;qf+=Ye*af}cd[$d-1][1]+=cd[$d-1][0]=ge;$e&&(ge-=qf/$e)}cd[$d-1][1]+=cd[$d-1][0]=ge;Gb(od,hd)}};k.stackOrderAppearance=xa;k.stackOrderAscending=bb;k.stackOrderDescending=function(od){return bb(od).reverse()};k.stackOrderInsideOut=function(od){var hd=od.length,ge=od.map(Hb),$d=xa(od),cd=0,Ie=0,Je=[],Ad=[];for(od=0;od<hd;++od){var $e=
$d[od];cd<Ie?(cd+=ge[$e],Je.push($e)):(Ie+=ge[$e],Ad.push($e))}return Ad.reverse().concat(Je)};k.stackOrderNone=Wb;k.stackOrderReverse=function(od){return Wb(od).reverse()};k.symbol=function(od,hd){function ge(){var cd;$d||($d=cd=f.path());od.apply(this,arguments).draw($d,+hd.apply(this,arguments));if(cd)return $d=null,cd+""||null}var $d=null;od="function"===typeof od?od:h(od||Vd);hd="function"===typeof hd?hd:h(void 0===hd?64:+hd);ge.type=function(cd){return arguments.length?(od="function"===typeof cd?
cd:h(cd),ge):od};ge.size=function(cd){return arguments.length?(hd="function"===typeof cd?cd:h(+cd),ge):hd};ge.context=function(cd){return arguments.length?($d=null==cd?null:cd,ge):$d};return ge};k.symbolCircle=Vd;k.symbolCross=ze;k.symbolDiamond=Bd;k.symbolSquare=nd;k.symbolStar=dd;k.symbolTriangle=jd;k.symbolWye=Bb;k.symbols=$b;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[522]=function(Pa,da,gb,oa){!function(k,f){"object"==typeof oa&&"undefined"!=typeof gb?f(oa):"function"==typeof define&&define.amd?define(["exports"],f):f((k="undefined"!=typeof globalThis?globalThis:k||self).vega={})}(this,function(k){function f(h,l){if("undefined"!=typeof document&&document.createElement){const u=document.createElement("canvas");if(u&&u.getContext)return u.width=h,u.height=l,u}return null}k.canvas=f;k.domCanvas=f;k.image=()=>"undefined"!=typeof Image?Image:null;Object.defineProperty(k,
"__esModule",{value:!0})})};
shadow$provide[523]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa):"function"===typeof define&&define.amd?define(["exports"],f):(k=k||self,f(k.d3=k.d3||{}))})(this,function(k){function f(Da,Qa,Ea){Da.prototype=Qa.prototype=Ea;Ea.constructor=Da}function h(Da,Qa){Da=Object.create(Da.prototype);for(var Ea in Qa)Da[Ea]=Qa[Ea];return Da}function l(){}function u(){return this.rgb().formatHex()}function q(){return this.rgb().formatRgb()}function D(Da){var Qa,Ea;
Da=(Da+"").trim().toLowerCase();return(Qa=fa.exec(Da))?(Ea=Qa[1].length,Qa=parseInt(Qa[1],16),6===Ea?U(Qa):3===Ea?new V(Qa>>8&15|Qa>>4&240,Qa>>4&15|Qa&240,(Qa&15)<<4|Qa&15,1):8===Ea?aa(Qa>>24&255,Qa>>16&255,Qa>>8&255,(Qa&255)/255):4===Ea?aa(Qa>>12&15|Qa>>8&240,Qa>>8&15|Qa>>4&240,Qa>>4&15|Qa&240,((Qa&15)<<4|Qa&15)/255):null):(Qa=ja.exec(Da))?new V(Qa[1],Qa[2],Qa[3],1):(Qa=Ba.exec(Da))?new V(255*Qa[1]/100,255*Qa[2]/100,255*Qa[3]/100,1):(Qa=Ga.exec(Da))?aa(Qa[1],Qa[2],Qa[3],Qa[4]):(Qa=ua.exec(Da))?aa(255*
Qa[1]/100,255*Qa[2]/100,255*Qa[3]/100,Qa[4]):(Qa=Fa.exec(Da))?x(Qa[1],Qa[2]/100,Qa[3]/100,1):(Qa=Xa.exec(Da))?x(Qa[1],Qa[2]/100,Qa[3]/100,Qa[4]):Sa.hasOwnProperty(Da)?U(Sa[Da]):"transparent"===Da?new V(NaN,NaN,NaN,0):null}function U(Da){return new V(Da>>16&255,Da>>8&255,Da&255,1)}function aa(Da,Qa,Ea,kb){0>=kb&&(Da=Qa=Ea=NaN);return new V(Da,Qa,Ea,kb)}function X(Da){Da instanceof l||(Da=D(Da));if(!Da)return new V;Da=Da.rgb();return new V(Da.r,Da.g,Da.b,Da.opacity)}function S(Da,Qa,Ea,kb){return 1===
arguments.length?X(Da):new V(Da,Qa,Ea,null==kb?1:kb)}function V(Da,Qa,Ea,kb){this.r=+Da;this.g=+Qa;this.b=+Ea;this.opacity=+kb}function F(){return"#"+w(this.r)+w(this.g)+w(this.b)}function t(){var Da=this.opacity;Da=isNaN(Da)?1:Math.max(0,Math.min(1,Da));return(1===Da?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===Da?")":", "+Da+")")}function w(Da){Da=Math.max(0,Math.min(255,
Math.round(Da)||0));return(16>Da?"0":"")+Da.toString(16)}function x(Da,Qa,Ea,kb){0>=kb?Da=Qa=Ea=NaN:0>=Ea||1<=Ea?Da=Qa=NaN:0>=Qa&&(Da=NaN);return new B(Da,Qa,Ea,kb)}function I(Da){if(Da instanceof B)return new B(Da.h,Da.s,Da.l,Da.opacity);Da instanceof l||(Da=D(Da));if(!Da)return new B;if(Da instanceof B)return Da;Da=Da.rgb();var Qa=Da.r/255,Ea=Da.g/255,kb=Da.b/255,cb=Math.min(Qa,Ea,kb),Mb=Math.max(Qa,Ea,kb),Gb=NaN,Wb=Mb-cb,sa=(Mb+cb)/2;Wb?(Gb=Qa===Mb?(Ea-kb)/Wb+6*(Ea<kb):Ea===Mb?(kb-Qa)/Wb+2:(Qa-
Ea)/Wb+4,Wb/=.5>sa?Mb+cb:2-Mb-cb,Gb*=60):Wb=0<sa&&1>sa?0:Gb;return new B(Gb,Wb,sa,Da.opacity)}function R(Da,Qa,Ea,kb){return 1===arguments.length?I(Da):new B(Da,Qa,Ea,null==kb?1:kb)}function B(Da,Qa,Ea,kb){this.h=+Da;this.s=+Qa;this.l=+Ea;this.opacity=+kb}function v(Da,Qa,Ea){return 255*(60>Da?Qa+(Ea-Qa)*Da/60:180>Da?Ea:240>Da?Qa+(Ea-Qa)*(240-Da)/60:Qa)}function O(Da){if(Da instanceof A)return new A(Da.l,Da.a,Da.b,Da.opacity);if(Da instanceof Y)return Z(Da);Da instanceof V||(Da=X(Da));var Qa=ba(Da.r),
Ea=ba(Da.g),kb=ba(Da.b),cb=J(.2225045*Qa+.7168786*Ea+.0606169*kb);if(Qa===Ea&&Ea===kb)var Mb=Qa=cb;else Mb=J((.4360747*Qa+.3850649*Ea+.1430804*kb)/.96422),Qa=J((.0139322*Qa+.0971045*Ea+.7141733*kb)/.82521);return new A(116*cb-16,500*(Mb-cb),200*(cb-Qa),Da.opacity)}function N(Da,Qa,Ea,kb){return 1===arguments.length?O(Da):new A(Da,Qa,Ea,null==kb?1:kb)}function A(Da,Qa,Ea,kb){this.l=+Da;this.a=+Qa;this.b=+Ea;this.opacity=+kb}function J(Da){return Da>ma?Math.pow(Da,1/3):Da/la+La}function T(Da){return Da>
Ra?Da*Da*Da:la*(Da-La)}function z(Da){return 255*(.0031308>=Da?12.92*Da:1.055*Math.pow(Da,1/2.4)-.055)}function ba(Da){return.04045>=(Da/=255)?Da/12.92:Math.pow((Da+.055)/1.055,2.4)}function K(Da){if(Da instanceof Y)return new Y(Da.h,Da.c,Da.l,Da.opacity);Da instanceof A||(Da=O(Da));if(0===Da.a&&0===Da.b)return new Y(NaN,0<Da.l&&100>Da.l?0:NaN,Da.l,Da.opacity);var Qa=Math.atan2(Da.b,Da.a)*Va;return new Y(0>Qa?Qa+360:Qa,Math.sqrt(Da.a*Da.a+Da.b*Da.b),Da.l,Da.opacity)}function r(Da,Qa,Ea,kb){return 1===
arguments.length?K(Da):new Y(Da,Qa,Ea,null==kb?1:kb)}function Y(Da,Qa,Ea,kb){this.h=+Da;this.c=+Qa;this.l=+Ea;this.opacity=+kb}function Z(Da){if(isNaN(Da.h))return new A(Da.l,0,0,Da.opacity);var Qa=Da.h*eb;return new A(Da.l,Math.cos(Qa)*Da.c,Math.sin(Qa)*Da.c,Da.opacity)}function E(Da,Qa,Ea,kb){if(1===arguments.length){var cb=Da;if(cb instanceof C)cb=new C(cb.h,cb.s,cb.l,cb.opacity);else{cb instanceof V||(cb=X(cb));var Mb=cb.g/255,Gb=cb.b/255,Wb=(Aa*Gb+cb.r/255*-1.7884503806-3.5172982438*Mb)/(Aa+
-1.7884503806-3.5172982438);Gb-=Wb;var sa=(1.97294*(Mb-Wb)- -.29227*Gb)/-.90649;Gb=(Mb=Math.sqrt(sa*sa+Gb*Gb)/(1.97294*Wb*(1-Wb)))?Math.atan2(sa,Gb)*Va-120:NaN;cb=new C(0>Gb?Gb+360:Gb,Mb,Wb,cb.opacity)}}else cb=new C(Da,Qa,Ea,null==kb?1:kb);return cb}function C(Da,Qa,Ea,kb){this.h=+Da;this.s=+Qa;this.l=+Ea;this.opacity=+kb}var W=1/.7,fa=/^#([0-9a-f]{3,8})$/,ja=/^rgb\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*\)$/,Ba=/^rgb\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,
Ga=/^rgba\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,ua=/^rgba\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,Fa=/^hsl\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*\)$/,Xa=/^hsla\(\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)%\s*,\s*([+-]?\d*\.?\d+(?:[eE][+-]?\d+)?)\s*\)$/,
Sa={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,
darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,
hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,
linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,
palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,
turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};f(l,D,{copy:function(Da){return Object.assign(new this.constructor,this,Da)},displayable:function(){return this.rgb().displayable()},hex:u,formatHex:u,formatHsl:function(){return I(this).formatHsl()},formatRgb:q,toString:q});f(V,S,h(l,{brighter:function(Da){Da=null==Da?W:Math.pow(W,Da);return new V(this.r*Da,this.g*Da,this.b*Da,this.opacity)},darker:function(Da){Da=null==Da?.7:
Math.pow(.7,Da);return new V(this.r*Da,this.g*Da,this.b*Da,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&255.5>this.r&&-.5<=this.g&&255.5>this.g&&-.5<=this.b&&255.5>this.b&&0<=this.opacity&&1>=this.opacity},hex:F,formatHex:F,formatRgb:t,toString:t}));f(B,R,h(l,{brighter:function(Da){Da=null==Da?W:Math.pow(W,Da);return new B(this.h,this.s,this.l*Da,this.opacity)},darker:function(Da){Da=null==Da?.7:Math.pow(.7,Da);return new B(this.h,this.s,this.l*Da,this.opacity)},
rgb:function(){var Da=this.h%360+360*(0>this.h),Qa=isNaN(Da)||isNaN(this.s)?0:this.s,Ea=this.l;Qa=Ea+(.5>Ea?Ea:1-Ea)*Qa;Ea=2*Ea-Qa;return new V(v(240<=Da?Da-240:Da+120,Ea,Qa),v(Da,Ea,Qa),v(120>Da?Da+240:Da-120,Ea,Qa),this.opacity)},displayable:function(){return(0<=this.s&&1>=this.s||isNaN(this.s))&&0<=this.l&&1>=this.l&&0<=this.opacity&&1>=this.opacity},formatHsl:function(){var Da=this.opacity;Da=isNaN(Da)?1:Math.max(0,Math.min(1,Da));return(1===Da?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+
"%, "+100*(this.l||0)+"%"+(1===Da?")":", "+Da+")")}}));const eb=Math.PI/180,Va=180/Math.PI,La=4/29,Ra=6/29,la=3*Ra*Ra,ma=Ra*Ra*Ra;f(A,N,h(l,{brighter:function(Da){return new A(this.l+18*(null==Da?1:Da),this.a,this.b,this.opacity)},darker:function(Da){return new A(this.l-18*(null==Da?1:Da),this.a,this.b,this.opacity)},rgb:function(){var Da=(this.l+16)/116,Qa=isNaN(this.a)?Da:Da+this.a/500,Ea=isNaN(this.b)?Da:Da-this.b/200;Qa=.96422*T(Qa);Da=1*T(Da);Ea=.82521*T(Ea);return new V(z(3.1338561*Qa-1.6168667*
Da-.4906146*Ea),z(-.9787684*Qa+1.9161415*Da+.033454*Ea),z(.0719453*Qa-.2289914*Da+1.4052427*Ea),this.opacity)}}));f(Y,r,h(l,{brighter:function(Da){return new Y(this.h,this.c,this.l+18*(null==Da?1:Da),this.opacity)},darker:function(Da){return new Y(this.h,this.c,this.l-18*(null==Da?1:Da),this.opacity)},rgb:function(){return Z(this).rgb()}}));var Aa=1.78277*-.29227-.1347134789;f(C,E,h(l,{brighter:function(Da){Da=null==Da?W:Math.pow(W,Da);return new C(this.h,this.s,this.l*Da,this.opacity)},darker:function(Da){Da=
null==Da?.7:Math.pow(.7,Da);return new C(this.h,this.s,this.l*Da,this.opacity)},rgb:function(){var Da=isNaN(this.h)?0:(this.h+120)*eb,Qa=+this.l,Ea=isNaN(this.s)?0:this.s*Qa*(1-Qa),kb=Math.cos(Da);Da=Math.sin(Da);return new V(255*(Qa+Ea*(-.14861*kb+1.78277*Da)),255*(Qa+Ea*(-.29227*kb+-.90649*Da)),255*(Qa+1.97294*Ea*kb),this.opacity)}}));k.color=D;k.cubehelix=E;k.gray=function(Da,Qa){return new A(Da,0,0,null==Qa?1:Qa)};k.hcl=r;k.hsl=R;k.lab=N;k.lch=function(Da,Qa,Ea,kb){return 1===arguments.length?
K(Da):new Y(Ea,Qa,Da,null==kb?1:kb)};k.rgb=S;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[524]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(523)):"function"===typeof define&&define.amd?define(["exports","d3-color"],f):(k=k||self,f(k.d3=k.d3||{},k.d3))})(this,function(k,f){function h(Ra,la,ma,Aa,Da){var Qa=Ra*Ra,Ea=Qa*Ra;return((1-3*Ra+3*Qa-Ea)*la+(4-6*Qa+3*Ea)*ma+(1+3*Ra+3*Qa-3*Ea)*Aa+Ea*Da)/6}function l(Ra){var la=Ra.length-1;return function(ma){var Aa=0>=ma?ma=0:1<=ma?(ma=1,la-1):Math.floor(ma*la),Da=Ra[Aa],Qa=Ra[Aa+1];return h((ma-
Aa/la)*la,0<Aa?Ra[Aa-1]:2*Da-Qa,Da,Qa,Aa<la-1?Ra[Aa+2]:2*Qa-Da)}}function u(Ra){var la=Ra.length;return function(ma){var Aa=Math.floor((0>(ma%=1)?++ma:ma)*la);return h((ma-Aa/la)*la,Ra[(Aa+la-1)%la],Ra[Aa%la],Ra[(Aa+1)%la],Ra[(Aa+2)%la])}}function q(Ra,la){return function(ma){return Ra+ma*la}}function D(Ra,la,ma){return Ra=Math.pow(Ra,ma),la=Math.pow(la,ma)-Ra,ma=1/ma,function(Aa){return Math.pow(Ra+Aa*la,ma)}}function U(Ra,la){var ma=la-Ra;return ma?q(Ra,180<ma||-180>ma?ma-360*Math.round(ma/360):
ma):K(isNaN(Ra)?la:Ra)}function aa(Ra){return 1===(Ra=+Ra)?X:function(la,ma){return ma-la?D(la,ma,Ra):K(isNaN(la)?ma:la)}}function X(Ra,la){var ma=la-Ra;return ma?q(Ra,ma):K(isNaN(Ra)?la:Ra)}function S(Ra){return function(la){var ma=la.length,Aa=Array(ma),Da=Array(ma),Qa=Array(ma),Ea;for(Ea=0;Ea<ma;++Ea){var kb=f.rgb(la[Ea]);Aa[Ea]=kb.r||0;Da[Ea]=kb.g||0;Qa[Ea]=kb.b||0}Aa=Ra(Aa);Da=Ra(Da);Qa=Ra(Qa);kb.opacity=1;return function(cb){kb.r=Aa(cb);kb.g=Da(cb);kb.b=Qa(cb);return kb+""}}}function V(Ra,la){la||
(la=[]);var ma=Ra?Math.min(la.length,Ra.length):0,Aa=la.slice(),Da;return function(Qa){for(Da=0;Da<ma;++Da)Aa[Da]=Ra[Da]*(1-Qa)+la[Da]*Qa;return Aa}}function F(Ra){return ArrayBuffer.isView(Ra)&&!(Ra instanceof DataView)}function t(Ra,la){var ma=la?la.length:0,Aa=Ra?Math.min(ma,Ra.length):0,Da=Array(Aa),Qa=Array(ma),Ea;for(Ea=0;Ea<Aa;++Ea)Da[Ea]=O(Ra[Ea],la[Ea]);for(;Ea<ma;++Ea)Qa[Ea]=la[Ea];return function(kb){for(Ea=0;Ea<Aa;++Ea)Qa[Ea]=Da[Ea](kb);return Qa}}function w(Ra,la){var ma=new Date;return Ra=
+Ra,la=+la,function(Aa){return ma.setTime(Ra*(1-Aa)+la*Aa),ma}}function x(Ra,la){return Ra=+Ra,la=+la,function(ma){return Ra*(1-ma)+la*ma}}function I(Ra,la){var ma={},Aa={},Da;if(null===Ra||"object"!==typeof Ra)Ra={};if(null===la||"object"!==typeof la)la={};for(Da in la)Da in Ra?ma[Da]=O(Ra[Da],la[Da]):Aa[Da]=la[Da];return function(Qa){for(Da in ma)Aa[Da]=ma[Da](Qa);return Aa}}function R(Ra){return function(){return Ra}}function B(Ra){return function(la){return Ra(la)+""}}function v(Ra,la){var ma=
E.lastIndex=C.lastIndex=0,Aa,Da,Qa,Ea=-1,kb=[],cb=[];Ra+="";for(la+="";(Aa=E.exec(Ra))&&(Da=C.exec(la));)(Qa=Da.index)>ma&&(Qa=la.slice(ma,Qa),kb[Ea]?kb[Ea]+=Qa:kb[++Ea]=Qa),(Aa=Aa[0])===(Da=Da[0])?kb[Ea]?kb[Ea]+=Da:kb[++Ea]=Da:(kb[++Ea]=null,cb.push({i:Ea,x:x(Aa,Da)})),ma=C.lastIndex;ma<la.length&&(Qa=la.slice(ma),kb[Ea]?kb[Ea]+=Qa:kb[++Ea]=Qa);return 2>kb.length?cb[0]?B(cb[0].x):R(la):(la=cb.length,function(Mb){for(var Gb=0,Wb;Gb<la;++Gb)kb[(Wb=cb[Gb]).i]=Wb.x(Mb);return kb.join("")})}function O(Ra,
la){var ma=typeof la,Aa;return null==la||"boolean"===ma?K(la):("number"===ma?x:"string"===ma?(Aa=f.color(la))?(la=Aa,r):v:la instanceof f.color?r:la instanceof Date?w:F(la)?V:Array.isArray(la)?t:"function"!==typeof la.valueOf&&"function"!==typeof la.toString||isNaN(la)?I:x)(Ra,la)}function N(Ra,la,ma,Aa,Da,Qa){var Ea,kb,cb;if(Ea=Math.sqrt(Ra*Ra+la*la))Ra/=Ea,la/=Ea;if(cb=Ra*ma+la*Aa)ma-=Ra*cb,Aa-=la*cb;if(kb=Math.sqrt(ma*ma+Aa*Aa))ma/=kb,Aa/=kb,cb/=kb;Ra*Aa<la*ma&&(Ra=-Ra,la=-la,cb=-cb,Ea=-Ea);return{translateX:Da,
translateY:Qa,rotate:Math.atan2(la,Ra)*W,skewX:Math.atan(cb)*W,scaleX:Ea,scaleY:kb}}function A(Ra,la,ma,Aa){function Da(Mb){return Mb.length?Mb.pop()+" ":""}function Qa(Mb,Gb,Wb,sa,ra,xa){Mb!==Wb||Gb!==sa?(ra=ra.push("translate(",null,la,null,ma),xa.push({i:ra-4,x:x(Mb,Wb)},{i:ra-2,x:x(Gb,sa)})):(Wb||sa)&&ra.push("translate("+Wb+la+sa+ma)}function Ea(Mb,Gb,Wb,sa){Mb!==Gb?(180<Mb-Gb?Gb+=360:180<Gb-Mb&&(Mb+=360),sa.push({i:Wb.push(Da(Wb)+"rotate(",null,Aa)-2,x:x(Mb,Gb)})):Gb&&Wb.push(Da(Wb)+"rotate("+
Gb+Aa)}function kb(Mb,Gb,Wb,sa){Mb!==Gb?sa.push({i:Wb.push(Da(Wb)+"skewX(",null,Aa)-2,x:x(Mb,Gb)}):Gb&&Wb.push(Da(Wb)+"skewX("+Gb+Aa)}function cb(Mb,Gb,Wb,sa,ra,xa){Mb!==Wb||Gb!==sa?(ra=ra.push(Da(ra)+"scale(",null,",",null,")"),xa.push({i:ra-4,x:x(Mb,Wb)},{i:ra-2,x:x(Gb,sa)})):1===Wb&&1===sa||ra.push(Da(ra)+"scale("+Wb+","+sa+")")}return function(Mb,Gb){var Wb=[],sa=[];Mb=Ra(Mb);Gb=Ra(Gb);Qa(Mb.translateX,Mb.translateY,Gb.translateX,Gb.translateY,Wb,sa);Ea(Mb.rotate,Gb.rotate,Wb,sa);kb(Mb.skewX,
Gb.skewX,Wb,sa);cb(Mb.scaleX,Mb.scaleY,Gb.scaleX,Gb.scaleY,Wb,sa);Mb=Gb=null;return function(ra){for(var xa=-1,Ia=sa.length,bb;++xa<Ia;)Wb[(bb=sa[xa]).i]=bb.x(ra);return Wb.join("")}}}function J(Ra){return((Ra=Math.exp(Ra))+1/Ra)/2}function T(Ra){return function(la,ma){var Aa=Ra((la=f.hsl(la)).h,(ma=f.hsl(ma)).h),Da=X(la.s,ma.s),Qa=X(la.l,ma.l),Ea=X(la.opacity,ma.opacity);return function(kb){la.h=Aa(kb);la.s=Da(kb);la.l=Qa(kb);la.opacity=Ea(kb);return la+""}}}function z(Ra){return function(la,ma){var Aa=
Ra((la=f.hcl(la)).h,(ma=f.hcl(ma)).h),Da=X(la.c,ma.c),Qa=X(la.l,ma.l),Ea=X(la.opacity,ma.opacity);return function(kb){la.h=Aa(kb);la.c=Da(kb);la.l=Qa(kb);la.opacity=Ea(kb);return la+""}}}function ba(Ra){return function Aa(ma){function Da(Qa,Ea){var kb=Ra((Qa=f.cubehelix(Qa)).h,(Ea=f.cubehelix(Ea)).h),cb=X(Qa.s,Ea.s),Mb=X(Qa.l,Ea.l),Gb=X(Qa.opacity,Ea.opacity);return function(Wb){Qa.h=kb(Wb);Qa.s=cb(Wb);Qa.l=Mb(Math.pow(Wb,ma));Qa.opacity=Gb(Wb);return Qa+""}}ma=+ma;Da.gamma=Aa;return Da}(1)}var K=
Ra=>()=>Ra,r=function ma(la){function Aa(Qa,Ea){var kb=Da((Qa=f.rgb(Qa)).r,(Ea=f.rgb(Ea)).r),cb=Da(Qa.g,Ea.g),Mb=Da(Qa.b,Ea.b),Gb=X(Qa.opacity,Ea.opacity);return function(Wb){Qa.r=kb(Wb);Qa.g=cb(Wb);Qa.b=Mb(Wb);Qa.opacity=Gb(Wb);return Qa+""}}var Da=aa(la);Aa.gamma=ma;return Aa}(1),Y=S(l),Z=S(u),E=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,C=new RegExp(E.source,"g"),W=180/Math.PI,fa={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},ja,Ba=A(function(la){la=new ("function"===typeof DOMMatrix?
DOMMatrix:WebKitCSSMatrix)(la+"");return la.isIdentity?fa:N(la.a,la.b,la.c,la.d,la.e,la.f)},"px, ","px)","deg)"),Ga=A(function(la){if(null==la)return fa;ja||(ja=document.createElementNS("http://www.w3.org/2000/svg","g"));ja.setAttribute("transform",la);if(!(la=ja.transform.baseVal.consolidate()))return fa;la=la.matrix;return N(la.a,la.b,la.c,la.d,la.e,la.f)},", ",")",")"),ua=function Qa(ma,Aa,Da){function Ea(kb,cb){var Mb=kb[0],Gb=kb[1],Wb=kb[2];kb=cb[2];var sa=cb[0]-Mb,ra=cb[1]-Gb,xa=sa*sa+ra*ra;
if(1E-12>xa){var Ia=Math.log(kb/Wb)/ma;kb=function(zb){return[Mb+zb*sa,Gb+zb*ra,Wb*Math.exp(ma*zb*Ia)]}}else{var bb=Math.sqrt(xa);cb=(kb*kb-Wb*Wb+Da*xa)/(2*Wb*Aa*bb);kb=(kb*kb-Wb*Wb-Da*xa)/(2*kb*Aa*bb);var Hb=Math.log(Math.sqrt(cb*cb+1)-cb);Ia=(Math.log(Math.sqrt(kb*kb+1)-kb)-Hb)/ma;kb=function(zb){zb*=Ia;var mb=J(Hb),Jb=ma*zb+Hb;var Eb=((Jb=Math.exp(2*Jb))-1)/(Jb+1);var Db=Hb;Jb=((Db=Math.exp(Db))-1/Db)/2;Eb=Wb/(Aa*bb)*(mb*Eb-Jb);return[Mb+Eb*sa,Gb+Eb*ra,Wb*mb/J(ma*zb+Hb)]}}kb.duration=1E3*Ia*ma/
Math.SQRT2;return kb}Ea.rho=function(kb){kb=Math.max(.001,+kb);var cb=kb*kb;return Qa(kb,cb,cb*cb)};return Ea}(Math.SQRT2,2,4),Fa=T(U),Xa=T(X),Sa=z(U),eb=z(X),Va=ba(U),La=ba(X);k.interpolate=O;k.interpolateArray=function(ma,Aa){return(F(Aa)?V:t)(ma,Aa)};k.interpolateBasis=l;k.interpolateBasisClosed=u;k.interpolateCubehelix=Va;k.interpolateCubehelixLong=La;k.interpolateDate=w;k.interpolateDiscrete=function(ma){var Aa=ma.length;return function(Da){return ma[Math.max(0,Math.min(Aa-1,Math.floor(Da*Aa)))]}};
k.interpolateHcl=Sa;k.interpolateHclLong=eb;k.interpolateHsl=Fa;k.interpolateHslLong=Xa;k.interpolateHue=function(ma,Aa){var Da=U(+ma,+Aa);return function(Qa){Qa=Da(Qa);return Qa-360*Math.floor(Qa/360)}};k.interpolateLab=function(ma,Aa){var Da=X((ma=f.lab(ma)).l,(Aa=f.lab(Aa)).l),Qa=X(ma.a,Aa.a),Ea=X(ma.b,Aa.b),kb=X(ma.opacity,Aa.opacity);return function(cb){ma.l=Da(cb);ma.a=Qa(cb);ma.b=Ea(cb);ma.opacity=kb(cb);return ma+""}};k.interpolateNumber=x;k.interpolateNumberArray=V;k.interpolateObject=I;
k.interpolateRgb=r;k.interpolateRgbBasis=Y;k.interpolateRgbBasisClosed=Z;k.interpolateRound=function(ma,Aa){return ma=+ma,Aa=+Aa,function(Da){return Math.round(ma*(1-Da)+Aa*Da)}};k.interpolateString=v;k.interpolateTransformCss=Ba;k.interpolateTransformSvg=Ga;k.interpolateZoom=ua;k.piecewise=function(ma,Aa){void 0===Aa&&(Aa=ma,ma=O);for(var Da=0,Qa=Aa.length-1,Ea=Aa[0],kb=Array(0>Qa?0:Qa);Da<Qa;)kb[Da]=ma(Ea,Ea=Aa[++Da]);return function(cb){var Mb=Math.max(0,Math.min(Qa-1,Math.floor(cb*=Qa)));return kb[Mb](cb-
Mb)}};k.quantize=function(ma,Aa){for(var Da=Array(Aa),Qa=0;Qa<Aa;++Qa)Da[Qa]=ma(Qa/(Aa-1));return Da};Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[525]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(506),da(524),da(507),da(508),da(510)):"function"===typeof define&&define.amd?define("exports d3-array d3-interpolate d3-format d3-time d3-time-format".split(" "),f):(k="undefined"!==typeof globalThis?globalThis:k||self,f(k.d3=k.d3||{},k.d3,k.d3,k.d3,k.d3,k.d3))})(this,function(k,f,h,l,u,q){function D(Eb,Db){switch(arguments.length){case 0:break;case 1:this.range(Eb);break;default:this.range(Db).domain(Eb)}return this}
function U(Eb,Db){switch(arguments.length){case 0:break;case 1:"function"===typeof Eb?this.interpolator(Eb):this.range(Eb);break;default:this.domain(Eb),"function"===typeof Db?this.interpolator(Db):this.range(Db)}return this}function aa(){function Eb(ub){var Rc=ub+"",Gd=Db.get(Rc);if(!Gd){if(Tc!==mb)return Tc;Db.set(Rc,Gd=bc.push(ub))}return jc[(Gd-1)%jc.length]}var Db=new Map,bc=[],jc=[],Tc=mb;Eb.domain=function(ub){if(!arguments.length)return bc.slice();bc=[];Db=new Map;for(const Rc of ub){const Gd=
Rc+"";Db.has(Gd)||Db.set(Gd,bc.push(Rc))}return Eb};Eb.range=function(ub){return arguments.length?(jc=Array.from(ub),Eb):jc.slice()};Eb.unknown=function(ub){return arguments.length?(Tc=ub,Eb):Tc};Eb.copy=function(){return aa(bc,jc).unknown(Tc)};D.apply(Eb,arguments);return Eb}function X(){function Eb(){var bd=bc().length,Bd=ub<Tc,Ld=Bd?ub:Tc,fe=Bd?Tc:ub;Rc=(fe-Ld)/Math.max(1,bd-Vd+2*ze);Kd&&(Rc=Math.floor(Rc));Ld+=(fe-Ld-Rc*(bd-Vd))*ee;Gd=Rc*(1-Vd);Kd&&(Ld=Math.round(Ld),Gd=Math.round(Gd));bd=f.range(bd).map(function(Ee){return Ld+
Rc*Ee});return jc(Bd?bd.reverse():bd)}var Db=aa().unknown(void 0),bc=Db.domain,jc=Db.range,Tc=0,ub=1,Rc,Gd,Kd=!1,Vd=0,ze=0,ee=.5;delete Db.unknown;Db.domain=function(bd){return arguments.length?(bc(bd),Eb()):bc()};Db.range=function(bd){return arguments.length?([Tc,ub]=bd,Tc=+Tc,ub=+ub,Eb()):[Tc,ub]};Db.rangeRound=function(bd){return[Tc,ub]=bd,Tc=+Tc,ub=+ub,Kd=!0,Eb()};Db.bandwidth=function(){return Gd};Db.step=function(){return Rc};Db.round=function(bd){return arguments.length?(Kd=!!bd,Eb()):Kd};
Db.padding=function(bd){return arguments.length?(Vd=Math.min(1,ze=+bd),Eb()):Vd};Db.paddingInner=function(bd){return arguments.length?(Vd=Math.min(1,bd),Eb()):Vd};Db.paddingOuter=function(bd){return arguments.length?(ze=+bd,Eb()):ze};Db.align=function(bd){return arguments.length?(ee=Math.max(0,Math.min(1,bd)),Eb()):ee};Db.copy=function(){return X(bc(),[Tc,ub]).round(Kd).paddingInner(Vd).paddingOuter(ze).align(ee)};return D.apply(Eb(),arguments)}function S(Eb){var Db=Eb.copy;Eb.padding=Eb.paddingOuter;
delete Eb.paddingInner;delete Eb.paddingOuter;Eb.copy=function(){return S(Db())};return Eb}function V(Eb){return function(){return Eb}}function F(Eb){return+Eb}function t(Eb){return Eb}function w(Eb,Db){return(Db-=Eb=+Eb)?function(bc){return(bc-Eb)/Db}:V(isNaN(Db)?NaN:.5)}function x(Eb,Db){if(Eb>Db){var bc=Eb;Eb=Db;Db=bc}return function(jc){return Math.max(Eb,Math.min(Db,jc))}}function I(Eb,Db,bc){var jc=Eb[0];Eb=Eb[1];var Tc=Db[0];Db=Db[1];Eb<jc?(jc=w(Eb,jc),Tc=bc(Db,Tc)):(jc=w(jc,Eb),Tc=bc(Tc,Db));
return function(ub){return Tc(jc(ub))}}function R(Eb,Db,bc){var jc=Math.min(Eb.length,Db.length)-1,Tc=Array(jc),ub=Array(jc),Rc=-1;Eb[jc]<Eb[0]&&(Eb=Eb.slice().reverse(),Db=Db.slice().reverse());for(;++Rc<jc;)Tc[Rc]=w(Eb[Rc],Eb[Rc+1]),ub[Rc]=bc(Db[Rc],Db[Rc+1]);return function(Gd){var Kd=f.bisect(Eb,Gd,1,jc)-1;return ub[Kd](Tc[Kd](Gd))}}function B(Eb,Db){return Db.domain(Eb.domain()).range(Eb.range()).interpolate(Eb.interpolate()).clamp(Eb.clamp()).unknown(Eb.unknown())}function v(){function Eb(){var bd=
Math.min(bc.length,jc.length);Kd!==t&&(Kd=x(bc[0],bc[bd-1]));Vd=2<bd?R:I;ze=ee=null;return Db}function Db(bd){return null==bd||isNaN(bd=+bd)?Gd:(ze||(ze=Vd(bc.map(ub),jc,Tc)))(ub(Kd(bd)))}var bc=Jb,jc=Jb,Tc=h.interpolate,ub,Rc,Gd,Kd=t,Vd,ze,ee;Db.invert=function(bd){return Kd(Rc((ee||(ee=Vd(jc,bc.map(ub),h.interpolateNumber)))(bd)))};Db.domain=function(bd){return arguments.length?(bc=Array.from(bd,F),Eb()):bc.slice()};Db.range=function(bd){return arguments.length?(jc=Array.from(bd),Eb()):jc.slice()};
Db.rangeRound=function(bd){return jc=Array.from(bd),Tc=h.interpolateRound,Eb()};Db.clamp=function(bd){return arguments.length?(Kd=bd?!0:t,Eb()):Kd!==t};Db.interpolate=function(bd){return arguments.length?(Tc=bd,Eb()):Tc};Db.unknown=function(bd){return arguments.length?(Gd=bd,Db):Gd};return function(bd,Bd){ub=bd;Rc=Bd;return Eb()}}function O(Eb,Db,bc,jc){bc=f.tickStep(Eb,Db,bc);var Tc;jc=l.formatSpecifier(null==jc?",f":jc);switch(jc.type){case "s":return Eb=Math.max(Math.abs(Eb),Math.abs(Db)),null!=
jc.precision||isNaN(Tc=l.precisionPrefix(bc,Eb))||(jc.precision=Tc),l.formatPrefix(jc,Eb);case "":case "e":case "g":case "p":case "r":null!=jc.precision||isNaN(Tc=l.precisionRound(bc,Math.max(Math.abs(Eb),Math.abs(Db))))||(jc.precision=Tc-("e"===jc.type));break;case "f":case "%":null!=jc.precision||isNaN(Tc=l.precisionFixed(bc))||(jc.precision=Tc-2*("%"===jc.type))}return l.format(jc)}function N(Eb){var Db=Eb.domain;Eb.ticks=function(bc){var jc=Db();return f.ticks(jc[0],jc[jc.length-1],null==bc?10:
bc)};Eb.tickFormat=function(bc,jc){var Tc=Db();return O(Tc[0],Tc[Tc.length-1],null==bc?10:bc,jc)};Eb.nice=function(bc){null==bc&&(bc=10);var jc=Db(),Tc=0,ub=jc.length-1,Rc=jc[Tc],Gd=jc[ub],Kd=10;if(Gd<Rc){var Vd=Rc;Rc=Gd;Gd=Vd;Vd=Tc;Tc=ub;ub=Vd}for(;0<Kd--;){Vd=f.tickIncrement(Rc,Gd,bc);if(Vd===ze)return jc[Tc]=Rc,jc[ub]=Gd,Db(jc);if(0<Vd)Rc=Math.floor(Rc/Vd)*Vd,Gd=Math.ceil(Gd/Vd)*Vd;else if(0>Vd)Rc=Math.ceil(Rc*Vd)/Vd,Gd=Math.floor(Gd*Vd)/Vd;else break;var ze=Vd}return Eb};return Eb}function A(){var Eb=
v()(t,t);Eb.copy=function(){return B(Eb,A())};D.apply(Eb,arguments);return N(Eb)}function J(Eb){function Db(jc){return null==jc||isNaN(jc=+jc)?bc:jc}var bc;Db.invert=Db;Db.domain=Db.range=function(jc){return arguments.length?(Eb=Array.from(jc,F),Db):Eb.slice()};Db.unknown=function(jc){return arguments.length?(bc=jc,Db):bc};Db.copy=function(){return J(Eb).unknown(bc)};Eb=arguments.length?Array.from(Eb,F):[0,1];return N(Db)}function T(Eb,Db){Eb=Eb.slice();var bc=0,jc=Eb.length-1,Tc=Eb[bc],ub=Eb[jc];
if(ub<Tc){var Rc=bc;bc=jc;jc=Rc;Rc=Tc;Tc=ub;ub=Rc}Eb[bc]=Db.floor(Tc);Eb[jc]=Db.ceil(ub);return Eb}function z(Eb){return Math.log(Eb)}function ba(Eb){return Math.exp(Eb)}function K(Eb){return-Math.log(-Eb)}function r(Eb){return-Math.exp(-Eb)}function Y(Eb){return isFinite(Eb)?+("1e"+Eb):0>Eb?0:Eb}function Z(Eb){return 10===Eb?Y:Eb===Math.E?Math.exp:function(Db){return Math.pow(Eb,Db)}}function E(Eb){return Eb===Math.E?Math.log:10===Eb&&Math.log10||2===Eb&&Math.log2||(Eb=Math.log(Eb),function(Db){return Math.log(Db)/
Eb})}function C(Eb){return function(Db){return-Eb(-Db)}}function W(Eb){function Db(){ub=E(Tc);Rc=Z(Tc);0>jc()[0]?(ub=C(ub),Rc=C(Rc),Eb(K,r)):Eb(z,ba);return bc}var bc=Eb(z,ba),jc=bc.domain,Tc=10,ub,Rc;bc.base=function(Gd){return arguments.length?(Tc=+Gd,Db()):Tc};bc.domain=function(Gd){return arguments.length?(jc(Gd),Db()):jc()};bc.ticks=function(Gd){var Kd=jc(),Vd=Kd[0];Kd=Kd[Kd.length-1];var ze;if(ze=Kd<Vd)ee=Vd,Vd=Kd,Kd=ee;var ee=ub(Vd),bd=ub(Kd),Bd=null==Gd?10:+Gd,Ld=[];if(!(Tc%1)&&bd-ee<Bd){ee=
Math.floor(ee);bd=Math.ceil(bd);if(0<Vd)for(;ee<=bd;++ee){var fe=1;for(Gd=Rc(ee);fe<Tc;++fe){var Ee=Gd*fe;if(!(Ee<Vd)){if(Ee>Kd)break;Ld.push(Ee)}}}else for(;ee<=bd;++ee)for(fe=Tc-1,Gd=Rc(ee);1<=fe;--fe)if(Ee=Gd*fe,!(Ee<Vd)){if(Ee>Kd)break;Ld.push(Ee)}2*Ld.length<Bd&&(Ld=f.ticks(Vd,Kd,Bd))}else Ld=f.ticks(ee,bd,Math.min(bd-ee,Bd)).map(Rc);return ze?Ld.reverse():Ld};bc.tickFormat=function(Gd,Kd){null==Kd&&(Kd=10===Tc?".0e":",");"function"!==typeof Kd&&(Kd=l.format(Kd));if(Infinity===Gd)return Kd;null==
Gd&&(Gd=10);var Vd=Math.max(1,Tc*Gd/bc.ticks().length);return function(ze){var ee=ze/Rc(Math.round(ub(ze)));ee*Tc<Tc-.5&&(ee*=Tc);return ee<=Vd?Kd(ze):""}};bc.nice=function(){return jc(T(jc(),{floor:function(Gd){return Rc(Math.floor(ub(Gd)))},ceil:function(Gd){return Rc(Math.ceil(ub(Gd)))}}))};return bc}function fa(){var Eb=W(v()).domain([1,10]);Eb.copy=function(){return B(Eb,fa()).base(Eb.base())};D.apply(Eb,arguments);return Eb}function ja(Eb){return function(Db){return Math.sign(Db)*Math.log1p(Math.abs(Db/
Eb))}}function Ba(Eb){return function(Db){return Math.sign(Db)*Math.expm1(Math.abs(Db))*Eb}}function Ga(Eb){var Db=1,bc=Eb(ja(Db),Ba(Db));bc.constant=function(jc){return arguments.length?Eb(ja(Db=+jc),Ba(Db)):Db};return N(bc)}function ua(){var Eb=Ga(v());Eb.copy=function(){return B(Eb,ua()).constant(Eb.constant())};return D.apply(Eb,arguments)}function Fa(Eb){return function(Db){return 0>Db?-Math.pow(-Db,Eb):Math.pow(Db,Eb)}}function Xa(Eb){return 0>Eb?-Math.sqrt(-Eb):Math.sqrt(Eb)}function Sa(Eb){return 0>
Eb?-Eb*Eb:Eb*Eb}function eb(Eb){var Db=Eb(t,t),bc=1;Db.exponent=function(jc){return arguments.length?(bc=+jc,1===bc?Eb(t,t):.5===bc?Eb(Xa,Sa):Eb(Fa(bc),Fa(1/bc))):bc};return N(Db)}function Va(){var Eb=eb(v());Eb.copy=function(){return B(Eb,Va()).exponent(Eb.exponent())};D.apply(Eb,arguments);return Eb}function La(Eb){return Math.sign(Eb)*Eb*Eb}function Ra(){function Eb(ub){ub=Db(ub);ub=Math.sign(ub)*Math.sqrt(Math.abs(ub));return isNaN(ub)?Tc:jc?Math.round(ub):ub}var Db=v()(t,t),bc=[0,1],jc=!1,Tc;
Eb.invert=function(ub){return Db.invert(La(ub))};Eb.domain=function(ub){return arguments.length?(Db.domain(ub),Eb):Db.domain()};Eb.range=function(ub){return arguments.length?(Db.range((bc=Array.from(ub,F)).map(La)),Eb):bc.slice()};Eb.rangeRound=function(ub){return Eb.range(ub).round(!0)};Eb.round=function(ub){return arguments.length?(jc=!!ub,Eb):jc};Eb.clamp=function(ub){return arguments.length?(Db.clamp(ub),Eb):Db.clamp()};Eb.unknown=function(ub){return arguments.length?(Tc=ub,Eb):Tc};Eb.copy=function(){return Ra(Db.domain(),
bc).round(jc).clamp(Db.clamp()).unknown(Tc)};D.apply(Eb,arguments);return N(Eb)}function la(){function Eb(){var Rc=0,Gd=Math.max(1,jc.length);for(Tc=Array(Gd-1);++Rc<Gd;)Tc[Rc-1]=f.quantileSorted(bc,Rc/Gd);return Db}function Db(Rc){return null==Rc||isNaN(Rc=+Rc)?ub:jc[f.bisect(Tc,Rc)]}var bc=[],jc=[],Tc=[],ub;Db.invertExtent=function(Rc){Rc=jc.indexOf(Rc);return 0>Rc?[NaN,NaN]:[0<Rc?Tc[Rc-1]:bc[0],Rc<Tc.length?Tc[Rc]:bc[bc.length-1]]};Db.domain=function(Rc){if(!arguments.length)return bc.slice();
bc=[];for(let Gd of Rc)null==Gd||isNaN(Gd=+Gd)||bc.push(Gd);bc.sort(f.ascending);return Eb()};Db.range=function(Rc){return arguments.length?(jc=Array.from(Rc),Eb()):jc.slice()};Db.unknown=function(Rc){return arguments.length?(ub=Rc,Db):ub};Db.quantiles=function(){return Tc.slice()};Db.copy=function(){return la().domain(bc).range(jc).unknown(ub)};return D.apply(Db,arguments)}function ma(){function Eb(Kd){return null!=Kd&&Kd<=Kd?Rc[f.bisect(ub,Kd,0,Tc)]:Gd}function Db(){var Kd=-1;for(ub=Array(Tc);++Kd<
Tc;)ub[Kd]=((Kd+1)*jc-(Kd-Tc)*bc)/(Tc+1);return Eb}var bc=0,jc=1,Tc=1,ub=[.5],Rc=[0,1],Gd;Eb.domain=function(Kd){return arguments.length?([bc,jc]=Kd,bc=+bc,jc=+jc,Db()):[bc,jc]};Eb.range=function(Kd){return arguments.length?(Tc=(Rc=Array.from(Kd)).length-1,Db()):Rc.slice()};Eb.invertExtent=function(Kd){Kd=Rc.indexOf(Kd);return 0>Kd?[NaN,NaN]:1>Kd?[bc,ub[0]]:Kd>=Tc?[ub[Tc-1],jc]:[ub[Kd-1],ub[Kd]]};Eb.unknown=function(Kd){return arguments.length?(Gd=Kd,Eb):Eb};Eb.thresholds=function(){return ub.slice()};
Eb.copy=function(){return ma().domain([bc,jc]).range(Rc).unknown(Gd)};return D.apply(N(Eb),arguments)}function Aa(){function Eb(ub){return null!=ub&&ub<=ub?bc[f.bisect(Db,ub,0,Tc)]:jc}var Db=[.5],bc=[0,1],jc,Tc=1;Eb.domain=function(ub){return arguments.length?(Db=Array.from(ub),Tc=Math.min(Db.length,bc.length-1),Eb):Db.slice()};Eb.range=function(ub){return arguments.length?(bc=Array.from(ub),Tc=Math.min(Db.length,bc.length-1),Eb):bc.slice()};Eb.invertExtent=function(ub){ub=bc.indexOf(ub);return[Db[ub-
1],Db[ub]]};Eb.unknown=function(ub){return arguments.length?(jc=ub,Eb):jc};Eb.copy=function(){return Aa().domain(Db).range(bc).unknown(jc)};return D.apply(Eb,arguments)}function Da(Eb){return new Date(Eb)}function Qa(Eb){return Eb instanceof Date?+Eb:+new Date(+Eb)}function Ea(Eb,Db,bc,jc,Tc,ub,Rc,Gd,Kd,Vd){function ze(ae){return(Kd(ae)<ae?Ld:Gd(ae)<ae?fe:Rc(ae)<ae?Ee:ub(ae)<ae?dd:jc(ae)<ae?Tc(ae)<ae?nd:Dc:bc(ae)<ae?jd:Qd)(ae)}var ee=v()(t,t),bd=ee.invert,Bd=ee.domain,Ld=Vd(".%L"),fe=Vd(":%S"),Ee=
Vd("%I:%M"),dd=Vd("%I %p"),nd=Vd("%a %d"),Dc=Vd("%b %d"),jd=Vd("%B"),Qd=Vd("%Y");ee.invert=function(ae){return new Date(bd(ae))};ee.domain=function(ae){return arguments.length?Bd(Array.from(ae,Qa)):Bd().map(Da)};ee.ticks=function(ae){var te=Bd();return Eb(te[0],te[te.length-1],null==ae?10:ae)};ee.tickFormat=function(ae,te){return null==te?ze:Vd(te)};ee.nice=function(ae){var te=Bd();ae&&"function"===typeof ae.range||(ae=Db(te[0],te[te.length-1],null==ae?10:ae));return ae?Bd(T(te,ae)):ee};ee.copy=function(){return B(ee,
Ea(Eb,Db,bc,jc,Tc,ub,Rc,Gd,Kd,Vd))};return ee}function kb(){function Eb(ee){return null==ee||isNaN(ee=+ee)?ze:Kd(0===Rc?.5:(ee=(Gd(ee)-Tc)*Rc,Vd?Math.max(0,Math.min(1,ee)):ee))}function Db(ee){return function(bd){var Bd,Ld;return arguments.length?([Bd,Ld]=bd,Kd=ee(Bd,Ld),Eb):[Kd(0),Kd(1)]}}var bc=0,jc=1,Tc,ub,Rc,Gd,Kd=t,Vd=!1,ze;Eb.domain=function(ee){return arguments.length?([bc,jc]=ee,Tc=Gd(bc=+bc),ub=Gd(jc=+jc),Rc=Tc===ub?0:1/(ub-Tc),Eb):[bc,jc]};Eb.clamp=function(ee){return arguments.length?(Vd=
!!ee,Eb):Vd};Eb.interpolator=function(ee){return arguments.length?(Kd=ee,Eb):Kd};Eb.range=Db(h.interpolate);Eb.rangeRound=Db(h.interpolateRound);Eb.unknown=function(ee){return arguments.length?(ze=ee,Eb):ze};return function(ee){Gd=ee;Tc=ee(bc);ub=ee(jc);Rc=Tc===ub?0:1/(ub-Tc);return Eb}}function cb(Eb,Db){return Db.domain(Eb.domain()).interpolator(Eb.interpolator()).clamp(Eb.clamp()).unknown(Eb.unknown())}function Mb(){var Eb=N(kb()(t));Eb.copy=function(){return cb(Eb,Mb())};return U.apply(Eb,arguments)}
function Gb(){var Eb=W(kb()).domain([1,10]);Eb.copy=function(){return cb(Eb,Gb()).base(Eb.base())};return U.apply(Eb,arguments)}function Wb(){var Eb=Ga(kb());Eb.copy=function(){return cb(Eb,Wb()).constant(Eb.constant())};return U.apply(Eb,arguments)}function sa(){var Eb=eb(kb());Eb.copy=function(){return cb(Eb,sa()).exponent(Eb.exponent())};return U.apply(Eb,arguments)}function ra(){function Eb(jc){if(null!=jc&&!isNaN(jc=+jc))return bc((f.bisect(Db,jc,1)-1)/(Db.length-1))}var Db=[],bc=t;Eb.domain=
function(jc){if(!arguments.length)return Db.slice();Db=[];for(let Tc of jc)null==Tc||isNaN(Tc=+Tc)||Db.push(Tc);Db.sort(f.ascending);return Eb};Eb.interpolator=function(jc){return arguments.length?(bc=jc,Eb):bc};Eb.range=function(){return Db.map((jc,Tc)=>bc(Tc/(Db.length-1)))};Eb.quantiles=function(jc){return Array.from({length:jc+1},(Tc,ub)=>f.quantile(Db,ub/jc))};Eb.copy=function(){return ra(bc).domain(Db)};return U.apply(Eb,arguments)}function xa(){function Eb(fe){return isNaN(fe=+fe)?Ld:(fe=.5+
((fe=+bd(fe))-Gd)*(ub*fe<ub*Gd?Vd:ze),ee(Bd?Math.max(0,Math.min(1,fe)):fe))}function Db(fe){return function(Ee){var dd,nd,Dc;return arguments.length?([dd,nd,Dc]=Ee,ee=h.piecewise(fe,[dd,nd,Dc]),Eb):[ee(0),ee(.5),ee(1)]}}var bc=0,jc=.5,Tc=1,ub=1,Rc,Gd,Kd,Vd,ze,ee=t,bd,Bd=!1,Ld;Eb.domain=function(fe){return arguments.length?([bc,jc,Tc]=fe,Rc=bd(bc=+bc),Gd=bd(jc=+jc),Kd=bd(Tc=+Tc),Vd=Rc===Gd?0:.5/(Gd-Rc),ze=Gd===Kd?0:.5/(Kd-Gd),ub=Gd<Rc?-1:1,Eb):[bc,jc,Tc]};Eb.clamp=function(fe){return arguments.length?
(Bd=!!fe,Eb):Bd};Eb.interpolator=function(fe){return arguments.length?(ee=fe,Eb):ee};Eb.range=Db(h.interpolate);Eb.rangeRound=Db(h.interpolateRound);Eb.unknown=function(fe){return arguments.length?(Ld=fe,Eb):Ld};return function(fe){bd=fe;Rc=fe(bc);Gd=fe(jc);Kd=fe(Tc);Vd=Rc===Gd?0:.5/(Gd-Rc);ze=Gd===Kd?0:.5/(Kd-Gd);ub=Gd<Rc?-1:1;return Eb}}function Ia(){var Eb=N(xa()(t));Eb.copy=function(){return cb(Eb,Ia())};return U.apply(Eb,arguments)}function bb(){var Eb=W(xa()).domain([.1,1,10]);Eb.copy=function(){return cb(Eb,
bb()).base(Eb.base())};return U.apply(Eb,arguments)}function Hb(){var Eb=Ga(xa());Eb.copy=function(){return cb(Eb,Hb()).constant(Eb.constant())};return U.apply(Eb,arguments)}function zb(){var Eb=eb(xa());Eb.copy=function(){return cb(Eb,zb()).exponent(Eb.exponent())};return U.apply(Eb,arguments)}const mb=Symbol("implicit");var Jb=[0,1];k.scaleBand=X;k.scaleDiverging=Ia;k.scaleDivergingLog=bb;k.scaleDivergingPow=zb;k.scaleDivergingSqrt=function(){return zb.apply(null,arguments).exponent(.5)};k.scaleDivergingSymlog=
Hb;k.scaleIdentity=J;k.scaleImplicit=mb;k.scaleLinear=A;k.scaleLog=fa;k.scaleOrdinal=aa;k.scalePoint=function(){return S(X.apply(null,arguments).paddingInner(1))};k.scalePow=Va;k.scaleQuantile=la;k.scaleQuantize=ma;k.scaleRadial=Ra;k.scaleSequential=Mb;k.scaleSequentialLog=Gb;k.scaleSequentialPow=sa;k.scaleSequentialQuantile=ra;k.scaleSequentialSqrt=function(){return sa.apply(null,arguments).exponent(.5)};k.scaleSequentialSymlog=Wb;k.scaleSqrt=function(){return Va.apply(null,arguments).exponent(.5)};
k.scaleSymlog=ua;k.scaleThreshold=Aa;k.scaleTime=function(){return D.apply(Ea(u.timeTicks,u.timeTickInterval,u.timeYear,u.timeMonth,u.timeWeek,u.timeDay,u.timeHour,u.timeMinute,u.timeSecond,q.timeFormat).domain([new Date(2E3,0,1),new Date(2E3,0,2)]),arguments)};k.scaleUtc=function(){return D.apply(Ea(u.utcTicks,u.utcTickInterval,u.utcYear,u.utcMonth,u.utcWeek,u.utcDay,u.utcHour,u.utcMinute,u.utcSecond,q.utcFormat).domain([Date.UTC(2E3,0,1),Date.UTC(2E3,0,2)]),arguments)};k.tickFormat=O;Object.defineProperty(k,
"__esModule",{value:!0})})};
shadow$provide[526]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(503),da(506),da(525),da(524),da(509)):"function"===typeof define&&define.amd?define("exports vega-util d3-array d3-scale d3-interpolate vega-time".split(" "),f):(k="undefined"!==typeof globalThis?globalThis:k||self,f(k.vega={},k.vega,k.d3,k.d3,k.d3,k.vega))})(this,function(k,f,h,l,u,q){function D(la,ma,Aa){ma=la-ma+2*Aa;return la?0<ma?ma:1:0}function U(la){return function(ma){let Aa=ma[0];
ma=ma[1];let Da;ma<Aa&&(Da=Aa,Aa=ma,ma=Da);return[la.invert(Aa),la.invert(ma)]}}function aa(la){return function(ma){const Aa=la.range();let Da=ma[0];ma=ma[1];let Qa=-1,Ea;let kb;if(ma<Da){var cb=Da;Da=ma;ma=cb}cb=0;for(kb=Aa.length;cb<kb;++cb)Aa[cb]>=Da&&Aa[cb]<=ma&&(0>Qa&&(Qa=cb),Ea=cb);if(!(0>Qa))return Da=la.invertExtent(Aa[Qa]),ma=la.invertExtent(Aa[Ea]),[void 0===Da[0]?Da[1]:Da[0],void 0===ma[1]?ma[0]:ma[1]]}}function X(){function la(){var sa=Aa().length;const ra=Qa[1]<Qa[0],xa=Qa[1-ra],Ia=D(sa,
Mb,Gb);let bb=Qa[ra-0];Ea=(xa-bb)/(Ia||1);cb&&(Ea=Math.floor(Ea));bb+=(xa-bb-Ea*(sa-Mb))*Wb;kb=Ea*(1-Mb);cb&&(bb=Math.round(bb),kb=Math.round(kb));sa=h.range(sa).map(Hb=>bb+Ea*Hb);return Da(ra?sa.reverse():sa)}const ma=l.scaleOrdinal().unknown(void 0),Aa=ma.domain,Da=ma.range;let Qa=[0,1],Ea,kb,cb=!1,Mb=0,Gb=0,Wb=.5;delete ma.unknown;ma.domain=function(sa){return arguments.length?(Aa(sa),la()):Aa()};ma.range=function(sa){return arguments.length?(Qa=[+sa[0],+sa[1]],la()):Qa.slice()};ma.rangeRound=
function(sa){Qa=[+sa[0],+sa[1]];cb=!0;return la()};ma.bandwidth=function(){return kb};ma.step=function(){return Ea};ma.round=function(sa){return arguments.length?(cb=!!sa,la()):cb};ma.padding=function(sa){return arguments.length?(Mb=Gb=Math.max(0,Math.min(1,sa)),la()):Mb};ma.paddingInner=function(sa){return arguments.length?(Mb=Math.max(0,Math.min(1,sa)),la()):Mb};ma.paddingOuter=function(sa){return arguments.length?(Gb=Math.max(0,Math.min(1,sa)),la()):Gb};ma.align=function(sa){return arguments.length?
(Wb=Math.max(0,Math.min(1,sa)),la()):Wb};ma.invertRange=function(sa){if(null!=sa[0]&&null!=sa[1]){var ra=Qa[1]<Qa[0],xa=ra?Da().reverse():Da(),Ia=xa.length-1,bb=+sa[0],Hb=+sa[1];if(bb===bb&&Hb===Hb){if(Hb<bb){var zb=bb;bb=Hb;Hb=zb}if(!(Hb<xa[0]||bb>Qa[1-ra]))return sa=Math.max(0,h.bisectRight(xa,bb)-1),Hb=bb===Hb?sa:h.bisectRight(xa,Hb)-1,bb-xa[sa]>kb+1E-10&&++sa,ra&&(zb=sa,sa=Ia-Hb,Hb=Ia-zb),sa>Hb?void 0:Aa().slice(sa,Hb+1)}}};ma.invert=function(sa){return(sa=ma.invertRange([sa,sa]))?sa[0]:sa};ma.copy=
function(){return X().domain(Aa()).range(Qa).round(cb).paddingInner(Mb).paddingOuter(Gb).align(Wb)};return la()}function S(la){const ma=la.copy;la.padding=la.paddingOuter;delete la.paddingInner;la.copy=function(){return S(ma())};return la}function V(){function la(Da){return null==Da||Da!==Da?void 0:Aa[(h.bisect(ma,Da)-1)%Aa.length]}let ma=[],Aa=[];la.domain=function(Da){return arguments.length?(ma=W.call(Da,f.toNumber),la):ma.slice()};la.range=function(Da){return arguments.length?(Aa=fa.call(Da),
la):Aa.slice()};la.tickFormat=function(Da,Qa){return l.tickFormat(ma[0],f.peek(ma),null==Da?10:Da,Qa)};la.copy=function(){return V().domain(la.domain()).range(la.range())};return la}function F(la,ma,Aa){const Da=function(){const Qa=ma();Qa.invertRange||(Qa.invertRange=Qa.invert?U(Qa):Qa.invertExtent?aa(Qa):void 0);Qa.type=la;return Qa};Da.metadata=f.toSet(f.array(Aa));return Da}function t(la,ma,Aa){return 1<arguments.length?(ja[la]=F(la,ma,Aa),this):w(la)?ja[la]:void 0}function w(la){return f.hasOwnProperty(ja,
la)}function x(la,ma){return(la=ja[la])&&la.metadata[ma]}function I(la){return x(la,"discrete")}function R(la){return x(la,"discretizing")}function B(la){return x(la,"log")}function v(la){return x(la,"temporal")}function O(la,ma,Aa){return u.piecewise(N(ma||"rgb",Aa),la)}function N(la,ma){la=C[A(la)];return null!=ma&&la&&la.gamma?la.gamma(ma):la}function A(la){return"interpolate"+la.toLowerCase().split("-").map(ma=>ma[0].toUpperCase()+ma.slice(1)).join("")}function J(la){const ma=la.length/6|0,Aa=
Array(ma);for(let Da=0;Da<ma;)Aa[Da]="#"+la.slice(6*Da,6*++Da);return Aa}function T(la,ma){for(const Aa in la)z(Aa,ma(la[Aa]))}function z(la,ma){la=la&&la.toLowerCase();return 1<arguments.length?(Ga[la]=ma,this):Ga[la]}function ba(la,ma,Aa){var Da=la.range();let Qa=Da[0],Ea=f.peek(Da);Da=Fa;Qa>Ea&&(Da=Ea,Ea=Qa,Qa=Da,Da=Xa);Qa=Math.floor(Qa);Ea=Math.ceil(Ea);ma=ma.map(kb=>[kb,la(kb)]).filter(kb=>Qa<=kb[1]&&kb[1]<=Ea).sort(Da).map(kb=>kb[0]);if(0<Aa&&1<ma.length){for(Da=[ma[0],f.peek(ma)];ma.length>
Aa&&3<=ma.length;)ma=ma.filter((kb,cb)=>!(cb%2));3>ma.length&&(ma=Da)}return ma}function K(la,ma){return la.bins?ba(la,la.bins):la.ticks?la.ticks(ma):la.domain()}function r(la,ma,Aa,Da,Qa,Ea){const kb=ma.type;let cb=ua;if("time"===kb||"time"===Qa)cb=la.timeFormat(Da);else if("utc"===kb||"utc"===Qa)cb=la.utcFormat(Da);else if(B(kb)){const Mb=la.formatFloat(Da);if(Ea||ma.bins)cb=Mb;else{const Gb=Y(ma,Aa,!1);cb=Wb=>Gb(Wb)?Mb(Wb):""}}else ma.tickFormat?(ma=ma.domain(),cb=la.formatSpan(ma[0],ma[ma.length-
1],Aa,Da)):Da&&(cb=la.format(Da));return cb}function Y(la,ma,Aa){const Da=K(la,ma),Qa=la.base(),Ea=Math.log(Qa),kb=Math.max(1,Qa*ma/Da.length);la=cb=>{cb/=Math.pow(Qa,Math.round(Math.log(cb)/Ea));cb*Qa<Qa-.5&&(cb*=Qa);return cb<=kb};return Aa?Da.filter(la):la}function Z(la,ma){la.bins?(la=la.bins,ma=la.slice(0,-1),ma.max=f.peek(la),la=ma):"log"===la.type?la=Y(la,ma,!0):Sa[la.type]?(la=la[Sa[la.type]](),la=[-Infinity].concat(la),la.max=Infinity):la=K(la,ma);return la}function E(la,ma,Aa,Da,Qa,Ea,kb){if(eb[ma.type]&&
"time"!==Ea&&"utc"!==Ea){Aa=ma[eb[ma.type]]();Ea=Aa.length;kb=1<Ea?Aa[1]-Aa[0]:Aa[0];let cb;for(cb=1;cb<Ea;++cb)kb=Math.min(kb,Aa[cb]-Aa[cb-1]);la=la.formatSpan(0,kb,30,Qa)}else la=r(la,ma,Aa,Qa,Ea,kb);return"symbol"===Da&&(Sa[ma.type]||ma.bins)?Va(la):"discrete"===Da?La(la):Ra(la)}var C=function(la){if(la&&la.__esModule)return la;var ma=Object.create(null);la&&Object.keys(la).forEach(function(Aa){if("default"!==Aa){var Da=Object.getOwnPropertyDescriptor(la,Aa);Object.defineProperty(ma,Aa,Da.get?
Da:{enumerable:!0,get:function(){return la[Aa]}})}});ma["default"]=la;return Object.freeze(ma)}(u),W=Array.prototype.map;const fa=Array.prototype.slice,ja={};t("identity",l.scaleIdentity);t("linear",l.scaleLinear,"continuous");t("log",l.scaleLog,["continuous","log"]);t("pow",l.scalePow,"continuous");t("sqrt",l.scaleSqrt,"continuous");t("symlog",l.scaleSymlog,"continuous");t("time",l.scaleTime,["continuous","temporal"]);t("utc",l.scaleUtc,["continuous","temporal"]);t("sequential",l.scaleSequential,
["continuous","interpolating"]);t("sequential-linear",l.scaleSequential,["continuous","interpolating"]);t("sequential-log",l.scaleSequentialLog,["continuous","interpolating","log"]);t("sequential-pow",l.scaleSequentialPow,["continuous","interpolating"]);t("sequential-sqrt",l.scaleSequentialSqrt,["continuous","interpolating"]);t("sequential-symlog",l.scaleSequentialSymlog,["continuous","interpolating"]);t("diverging-linear",l.scaleDiverging,["continuous","interpolating"]);t("diverging-log",l.scaleDivergingLog,
["continuous","interpolating","log"]);t("diverging-pow",l.scaleDivergingPow,["continuous","interpolating"]);t("diverging-sqrt",l.scaleDivergingSqrt,["continuous","interpolating"]);t("diverging-symlog",l.scaleDivergingSymlog,["continuous","interpolating"]);t("quantile",l.scaleQuantile,["discretizing","quantile"]);t("quantize",l.scaleQuantize,"discretizing");t("threshold",l.scaleThreshold,"discretizing");t("bin-ordinal",V,["discrete","discretizing"]);t("ordinal",l.scaleOrdinal,"discrete");t("band",
X,"discrete");t("point",function(){return S(X().paddingInner(1))},"discrete");const Ba=["clamp","base","constant","exponent"],Ga={};T({category10:"1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf",category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",
tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5",accent:"7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666",dark2:"1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666",paired:"a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928",pastel1:"fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2",pastel2:"b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc",
set1:"e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999",set2:"66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3",set3:"8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"},J);T({blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",
purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",
purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",
brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",
redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",
inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",
rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",
browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",
lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",
darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},la=>O(J(la)));const ua=la=>f.isArray(la)?la.map(ma=>String(ma)):String(la),Fa=(la,ma)=>la[1]-ma[1],Xa=(la,ma)=>ma[1]-la[1],Sa={["quantile"]:"quantiles",["quantize"]:"thresholds",["threshold"]:"domain"},eb={["quantile"]:"quantiles",["quantize"]:"domain"},Va=la=>(ma,Aa,Da)=>{Aa=Da[Aa+1];Da=Da.max;Da=null!=Da?
Da:Infinity;Aa=null!=Aa?Aa:Da;ma=Number.isFinite(ma)?la(ma):null;Aa=Number.isFinite(Aa)?la(Aa):null;return ma&&Aa?ma+" â€“ "+Aa:Aa?"\x3c "+Aa:"â‰¥ "+ma},La=la=>(ma,Aa)=>Aa?la(ma):null,Ra=la=>ma=>la(ma);Object.defineProperty(k,"scaleImplicit",{enumerable:!0,get:function(){return l.scaleImplicit}});k.Band="band";k.BinOrdinal="bin-ordinal";k.DiscreteLegend="discrete";k.Diverging="diverging";k.GradientLegend="gradient";k.Identity="identity";k.Linear="linear";k.Log="log";k.Ordinal="ordinal";k.Point="point";
k.Pow="pow";k.Quantile="quantile";k.Quantize="quantize";k.Sequential="sequential";k.Sqrt="sqrt";k.SymbolLegend="symbol";k.Symlog="symlog";k.Threshold="threshold";k.Time="time";k.UTC="utc";k.bandSpace=D;k.domainCaption=function(la,ma,Aa){Aa=Aa||{};var Da=Math.max(3,Aa.maxlen||7),Qa=Aa.format;const Ea=(Aa=Aa.formatType)||ma.type;f.isString(Qa)&&v(Ea)&&(Qa=Qa.replace(/%a/g,"%A").replace(/%b/g,"%B"));la=Qa||"time"!==Ea?Qa||"utc"!==Ea?E(la,ma,5,null,Qa,Aa,!0):la.utcFormat("%A, %d %B %Y, %X UTC"):la.timeFormat("%A, %d %B %Y, %X");
if(R(ma.type))return Da=Z(ma).slice(1).map(la),ma=Da.length,`${ma} boundar${1===ma?"y":"ies"}: ${Da.join(", ")}`;if(I(ma.type))return Qa=ma.domain(),ma=Qa.length,Da=ma>Da?Qa.slice(0,Da-2).map(la).join(", ")+", ending with "+Qa.slice(-1).map(la):Qa.map(la).join(", "),`${ma} value${1===ma?"":"s"}: ${Da}`;Da=ma.domain();return`values from ${la(Da[0])} to ${la(f.peek(Da))}`};k.interpolate=N;k.interpolateColors=O;k.interpolateRange=function(la,ma){const Aa=ma[0],Da=f.peek(ma)-Aa;return function(Qa){return la(Aa+
Qa*Da)}};k.isContinuous=function(la){return x(la,"continuous")};k.isDiscrete=I;k.isDiscretizing=R;k.isInterpolating=function(la){return x(la,"interpolating")};k.isLogarithmic=B;k.isQuantile=function(la){return x(la,"quantile")};k.isTemporal=v;k.isValidScaleType=w;k.labelFormat=E;k.labelFraction=function(la){var ma=la.domain();const Aa=ma.length-1;let Da=+ma[0];ma=+f.peek(ma);let Qa=ma-Da;"threshold"===la.type&&(la=Aa?Qa/Aa:.1,Da-=la,ma+=la,Qa=ma-Da);return Ea=>(Ea-Da)/Qa};k.labelValues=Z;k.quantizeInterpolator=
function(la,ma){const Aa=Array(ma),Da=ma+1;for(let Qa=0;Qa<ma;)Aa[Qa]=la(++Qa/Da);return Aa};k.scale=t;k.scaleCopy=function(la){const ma=la.type;la=la.copy();la.type=ma;return la};k.scaleFraction=function(la,ma,Aa){var Da=Aa-ma;let Qa,Ea;return Da&&Number.isFinite(Da)?(Da=(Qa=la.type).indexOf("-"),Qa=0>Da?Qa:Qa.slice(Da+1),Ea=t(Qa)().domain([ma,Aa]).range([0,1]),Ba.forEach(kb=>la[kb]?Ea[kb](la[kb]()):0),Ea):f.constant(.5)};k.scheme=z;k.tickCount=function(la,ma,Aa){let Da;f.isNumber(ma)&&(la.bins&&
(ma=Math.max(ma,la.bins.length)),null!=Aa&&(ma=Math.min(ma,Math.floor(f.span(la.domain())/Aa||1))));f.isObject(ma)&&(Da=ma.step,ma=ma.interval);f.isString(ma)&&(ma="time"===la.type?q.timeInterval(ma):"utc"==la.type?q.utcInterval(ma):f.error("Only time and utc scales accept interval strings."),Da&&(ma=ma.every(Da)));return ma};k.tickFormat=r;k.tickValues=K;k.validTicks=ba;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[527]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(503),da(521),da(520),da(522),da(516),da(526)):"function"===typeof define&&define.amd?define("exports vega-util d3-shape d3-path vega-canvas vega-loader vega-scale".split(" "),f):(k="undefined"!==typeof globalThis?globalThis:k||self,f(k.vega={},k.vega,k.d3,k.d3,k.vega,k.vega,k.vega))})(this,function(k,f,h,l,u,q,D){function U(Ua,pb,Rb){const ec=Ua.gradient;let Sc=Ua.id,kd="radial"===ec?"p_":
"";Sc||(Sc=Ua.id="gradient_"+Na++,"radial"===ec?(Ua.x1=aa(Ua.x1,.5),Ua.y1=aa(Ua.y1,.5),Ua.r1=aa(Ua.r1,0),Ua.x2=aa(Ua.x2,.5),Ua.y2=aa(Ua.y2,.5),Ua.r2=aa(Ua.r2,.5),kd="p_"):(Ua.x1=aa(Ua.x1,0),Ua.y1=aa(Ua.y1,0),Ua.x2=aa(Ua.x2,1),Ua.y2=aa(Ua.y2,0)));pb[Sc]=Ua;return"url("+(Rb||"")+"#"+kd+Sc+")"}function aa(Ua,pb){return null!=Ua?Ua:pb}function X(Ua,pb,Rb){Ua=f.hasOwnProperty(Xb,Ua)&&Xb[Ua];var ec=null;Ua&&(ec=Ua.curve||Ua[pb||"vertical"],Ua.tension&&null!=Rb&&(ec=ec[Ua.tension](Rb)));return ec}function S(Ua){const pb=
[];let Rb,ec,Sc,kd;var Fd;const Yd=Ua.slice().replace(Id[0],"###$1").split(Id[1]).slice(1);Ua=0;for(kd=Yd.length;Ua<kd;++Ua){var je=Yd[Ua];var re=je.slice(1).trim().replace(Id[2],"$1###$2").replace(Id[3],"$1###$2").split(Id[4]);ec=je.charAt(0);je=[ec];Sc=0;for(Fd=re.length;Sc<Fd;++Sc)(Rb=+re[Sc])===Rb&&je.push(Rb);re=Xc[ec.toLowerCase()];if(je.length-1>re)for(Fd=je.length,Sc=1,pb.push([ec].concat(je.slice(Sc,Sc+=re))),ec="M"===ec?"L":"m"===ec?"l":ec;Sc<Fd;Sc+=re)pb.push([ec].concat(je.slice(Sc,Sc+
re)));else pb.push(je)}return pb}function V(Ua,pb,Rb,ec,Sc,kd,Fd,Yd,je){const re=Jf.call(arguments);if(Vf[re])return Vf[re];var xe=Fd*Td;const Af=Math.sin(xe);xe=Math.cos(xe);Rb=Math.abs(Rb);ec=Math.abs(ec);var Qf=xe*(Yd-Ua)*.5+Af*(je-pb)*.5,Hc=xe*(je-pb)*.5-Af*(Yd-Ua)*.5;Qf=Qf*Qf/(Rb*Rb)+Hc*Hc/(ec*ec);1<Qf&&(Qf=Math.sqrt(Qf),Rb*=Qf,ec*=Qf);var td=xe/Rb,id=Af/Rb,ke=-Af/ec,Ob=xe/ec;Qf=td*Yd+id*je;Hc=ke*Yd+Ob*je;td=td*Ua+id*pb;id=ke*Ua+Ob*pb;ke=1/((td-Qf)*(td-Qf)+(id-Hc)*(id-Hc))-.25;0>ke&&(ke=0);Ob=
Math.sqrt(ke);kd==Sc&&(Ob=-Ob);ke=.5*(Qf+td)-Ob*(id-Hc);Ob=.5*(Hc+id)+Ob*(td-Qf);Qf=Math.atan2(Hc-Ob,Qf-ke);Hc=Math.atan2(id-Ob,td-ke)-Qf;0>Hc&&1===kd?Hc+=Se:0<Hc&&0===kd&&(Hc-=Se);td=Math.ceil(Math.abs(Hc/(nf+.001)));id=[];for(let gc=0;gc<td;++gc)id[gc]=[ke,Ob,Qf+gc*Hc/td,Qf+(gc+1)*Hc/td,Rb,ec,Af,xe];return Vf[re]=id}function F(Ua,pb,Rb,ec,Sc,kd){var Fd=null,Yd=0,je=0,re=0,xe=0;null==Rb&&(Rb=0);null==ec&&(ec=0);null==Sc&&(Sc=1);null==kd&&(kd=Sc);Ua.beginPath&&Ua.beginPath();for(var Af=0,Qf=pb.length;Af<
Qf;++Af){var Hc=pb[Af];if(1!==Sc||1!==kd){var td=Sc;var id=kd;var ke=Xf[0]=Hc[0];if("a"===ke||"A"===ke)Xf[1]=td*Hc[1],Xf[2]=id*Hc[2],Xf[3]=Hc[3],Xf[4]=Hc[4],Xf[5]=Hc[5],Xf[6]=td*Hc[6],Xf[7]=id*Hc[7];else if("h"===ke||"H"===ke)Xf[1]=td*Hc[1];else if("v"===ke||"V"===ke)Xf[1]=id*Hc[1];else{ke=1;for(var Ob=Hc.length;ke<Ob;++ke)Xf[ke]=(1==ke%2?td:id)*Hc[ke]}Hc=Xf}switch(Hc[0]){case "l":Yd+=Hc[1];je+=Hc[2];Ua.lineTo(Yd+Rb,je+ec);break;case "L":Yd=Hc[1];je=Hc[2];Ua.lineTo(Yd+Rb,je+ec);break;case "h":Yd+=
Hc[1];Ua.lineTo(Yd+Rb,je+ec);break;case "H":Yd=Hc[1];Ua.lineTo(Yd+Rb,je+ec);break;case "v":je+=Hc[1];Ua.lineTo(Yd+Rb,je+ec);break;case "V":je=Hc[1];Ua.lineTo(Yd+Rb,je+ec);break;case "m":Yd+=Hc[1];je+=Hc[2];Ua.moveTo(Yd+Rb,je+ec);break;case "M":Yd=Hc[1];je=Hc[2];Ua.moveTo(Yd+Rb,je+ec);break;case "c":td=Yd+Hc[5];id=je+Hc[6];re=Yd+Hc[3];xe=je+Hc[4];Ua.bezierCurveTo(Yd+Hc[1]+Rb,je+Hc[2]+ec,re+Rb,xe+ec,td+Rb,id+ec);Yd=td;je=id;break;case "C":Yd=Hc[5];je=Hc[6];re=Hc[3];xe=Hc[4];Ua.bezierCurveTo(Hc[1]+Rb,
Hc[2]+ec,re+Rb,xe+ec,Yd+Rb,je+ec);break;case "s":td=Yd+Hc[3];id=je+Hc[4];re=2*Yd-re;xe=2*je-xe;Ua.bezierCurveTo(re+Rb,xe+ec,Yd+Hc[1]+Rb,je+Hc[2]+ec,td+Rb,id+ec);re=Yd+Hc[1];xe=je+Hc[2];Yd=td;je=id;break;case "S":td=Hc[3];id=Hc[4];re=2*Yd-re;xe=2*je-xe;Ua.bezierCurveTo(re+Rb,xe+ec,Hc[1]+Rb,Hc[2]+ec,td+Rb,id+ec);Yd=td;je=id;re=Hc[1];xe=Hc[2];break;case "q":td=Yd+Hc[3];id=je+Hc[4];re=Yd+Hc[1];xe=je+Hc[2];Ua.quadraticCurveTo(re+Rb,xe+ec,td+Rb,id+ec);Yd=td;je=id;break;case "Q":td=Hc[3];id=Hc[4];Ua.quadraticCurveTo(Hc[1]+
Rb,Hc[2]+ec,td+Rb,id+ec);Yd=td;je=id;re=Hc[1];xe=Hc[2];break;case "t":td=Yd+Hc[1];id=je+Hc[2];null===Fd[0].match(/[QqTt]/)?(re=Yd,xe=je):"t"===Fd[0]?(re=2*Yd-gc,xe=2*je-Ac):"q"===Fd[0]&&(re=2*Yd-re,xe=2*je-xe);var gc=re;var Ac=xe;Ua.quadraticCurveTo(re+Rb,xe+ec,td+Rb,id+ec);Yd=td;je=id;re=Yd+Hc[1];xe=je+Hc[2];break;case "T":td=Hc[1];id=Hc[2];re=2*Yd-re;xe=2*je-xe;Ua.quadraticCurveTo(re+Rb,xe+ec,td+Rb,id+ec);Yd=td;je=id;break;case "a":t(Ua,Yd+Rb,je+ec,[Hc[1],Hc[2],Hc[3],Hc[4],Hc[5],Hc[6]+Yd+Rb,Hc[7]+
je+ec]);Yd+=Hc[6];je+=Hc[7];break;case "A":t(Ua,Yd+Rb,je+ec,[Hc[1],Hc[2],Hc[3],Hc[4],Hc[5],Hc[6]+Rb,Hc[7]+ec]);Yd=Hc[6];je=Hc[7];break;case "z":case "Z":Ua.closePath()}Fd=Hc}}function t(Ua,pb,Rb,ec){pb=V(ec[5],ec[6],ec[0],ec[1],ec[3],ec[4],ec[2],pb,Rb);for(Rb=0;Rb<pb.length;++Rb){a:{var Sc=pb[Rb];ec=Jf.call(Sc);if(jf[ec]){ec=jf[ec];break a}var kd=Sc[0],Fd=Sc[1],Yd=Sc[2],je=Sc[3],re=Sc[4],xe=Sc[5],Af=Sc[6],Qf=Sc[7];Sc=Qf*re;const td=-Af*xe;re*=Af;xe*=Qf;var Hc=Math.cos(Yd);const id=Math.sin(Yd);Af=
Math.cos(je);Qf=Math.sin(je);Yd=.5*(je-Yd);je=Math.sin(.5*Yd);je=8/3*je*je/Math.sin(Yd);Yd=kd+Hc-je*id;Hc=Fd+id+je*Hc;kd+=Af;Fd+=Qf;Qf=kd+je*Qf;Af=Fd-je*Af;ec=jf[ec]=[Sc*Yd+td*Hc,re*Yd+xe*Hc,Sc*Qf+td*Af,re*Qf+xe*Af,Sc*kd+td*Fd,re*kd+xe*Fd]}Ua.bezierCurveTo(ec[0],ec[1],ec[2],ec[3],ec[4],ec[5])}}function w(Ua){return f.hasOwnProperty(Pg,Ua)?Pg[Ua]:x(Ua)}function x(Ua){if(!f.hasOwnProperty(dh,Ua)){const pb=S(Ua);dh[Ua]={draw:function(Rb,ec){F(Rb,pb,0,0,Math.sqrt(ec)/2)}}}return dh[Ua]}function I(Ua){return Ua.x}
function R(Ua){return Ua.y}function B(Ua){return Ua.width}function v(Ua){return Ua.height}function O(Ua){return"function"===typeof Ua?Ua:()=>+Ua}function N(Ua,pb,Rb){return Math.max(pb,Math.min(Ua,Rb))}function A(){function Ua(xe,Af,Qf){var Hc;Af=null!=Af?Af:+pb.call(this,xe);Qf=null!=Qf?Qf:+Rb.call(this,xe);var td=+ec.call(this,xe),id=+Sc.call(this,xe),ke=Math.min(td,id)/2,Ob=N(+kd.call(this,xe),0,ke),gc=N(+Fd.call(this,xe),0,ke),Ac=N(+Yd.call(this,xe),0,ke);xe=N(+je.call(this,xe),0,ke);re||(re=
Hc=l.path());0>=Ob&&0>=gc&&0>=Ac&&0>=xe?re.rect(Af,Qf,td,id):(td=Af+td,id=Qf+id,re.moveTo(Af+Ob,Qf),re.lineTo(td-gc,Qf),re.bezierCurveTo(td-.448084975506*gc,Qf,td,Qf+.448084975506*gc,td,Qf+gc),re.lineTo(td,id-xe),re.bezierCurveTo(td,id-.448084975506*xe,td-.448084975506*xe,id,td-xe,id),re.lineTo(Af+Ac,id),re.bezierCurveTo(Af+.448084975506*Ac,id,Af,id-.448084975506*Ac,Af,id-Ac),re.lineTo(Af,Qf+Ob),re.bezierCurveTo(Af,Qf+.448084975506*Ob,Af+.448084975506*Ob,Qf,Af+Ob,Qf),re.closePath());if(Hc)return re=
null,Hc+""||null}var pb=I,Rb=R,ec=B,Sc=v,kd=O(0),Fd=kd,Yd=kd,je=kd,re=null;Ua.x=function(xe){return arguments.length?(pb=O(xe),Ua):pb};Ua.y=function(xe){return arguments.length?(Rb=O(xe),Ua):Rb};Ua.width=function(xe){return arguments.length?(ec=O(xe),Ua):ec};Ua.height=function(xe){return arguments.length?(Sc=O(xe),Ua):Sc};Ua.cornerRadius=function(xe,Af,Qf,Hc){return arguments.length?(kd=O(xe),Fd=null!=Af?O(Af):kd,je=null!=Qf?O(Qf):kd,Yd=null!=Hc?O(Hc):Fd,Ua):kd};Ua.context=function(xe){return arguments.length?
(re=null==xe?null:xe,Ua):re};return Ua}function J(){function Ua(xe){var Af,Qf=xe.length,Hc,td=!1,id;null==kd&&(kd=id=l.path());for(Af=0;Af<=Qf;++Af)if(!(Af<Qf&&Sc(Hc=xe[Af],Af,xe))===td&&(td=!td)&&(Fd=0),td){var ke=+pb(Hc,Af,xe),Ob=+Rb(Hc,Af,xe);const fb=+ec(Hc,Af,xe)/2;if(Fd){var gc=je-Ob,Ac=ke-Yd;if(gc||Ac){var Uc=Math.sqrt(gc*gc+Ac*Ac),y=(gc/=Uc)*re;Uc=(Ac/=Uc)*re;var wa=Math.atan2(Ac,gc);kd.moveTo(Yd-y,je-Uc);kd.lineTo(ke-gc*fb,Ob-Ac*fb);kd.arc(ke,Ob,fb,wa-Math.PI,wa);kd.lineTo(Yd+y,je+Uc);kd.arc(Yd,
je,re,wa,wa+Math.PI)}else kd.arc(ke,Ob,fb,0,Se);kd.closePath()}else Fd=1;Yd=ke;je=Ob;re=fb}if(id)return kd=null,id+""||null}var pb,Rb,ec,Sc,kd=null,Fd,Yd,je,re;Ua.x=function(xe){return arguments.length?(pb=xe,Ua):pb};Ua.y=function(xe){return arguments.length?(Rb=xe,Ua):Rb};Ua.size=function(xe){return arguments.length?(ec=xe,Ua):ec};Ua.defined=function(xe){return arguments.length?(Sc=xe,Ua):Sc};Ua.context=function(xe){return arguments.length?(kd=null==xe?null:xe,Ua):kd};return Ua}function T(Ua,pb){return null!=
Ua?Ua:pb}function z(Ua){return Ua.cornerRadius||Ua.cornerRadiusTopLeft||Ua.cornerRadiusTopRight||Ua.cornerRadiusBottomRight||Ua.cornerRadiusBottomLeft}function ba(Ua,pb,Rb,ec){return Ig.context(Ua)(pb,Rb,ec)}function K(Ua,pb,Rb){var ec=pb.clip;Ua=Ua._defs;pb=pb.clip_id||(pb.clip_id="clip"+fc++);Ua=Ua.clipping[pb]||(Ua.clipping[pb]={id:pb});f.isFunction(ec)?Ua.path=ec(null):z(Rb)?Ua.path=ba(null,Rb,0,0):(Ua.width=Rb.width||0,Ua.height=Rb.height||0);return"url(#"+pb+")"}function r(Ua){this.clear();
Ua&&this.union(Ua)}function Y(Ua){this.mark=Ua;this.bounds=this.bounds||new r}function Z(Ua){Y.call(this,Ua);this.items=this.items||[]}function E(Ua){this._pending=0;this._loader=Ua||q.loader()}function C(Ua,pb,Rb){if(pb.stroke&&0!==pb.opacity&&0!==pb.strokeOpacity){const ec=null!=pb.strokeWidth?+pb.strokeWidth:1;Ua.expand(ec+(Rb?pb.strokeJoin&&"miter"!==pb.strokeJoin?0:ec:0))}return Ua}function W(Ua,pb){rc=Ua;pb?(xb=pb*Td,Nb=ed=Math.cos(xb),cc=Math.sin(xb),vc=-cc):(Nb=ed=1,xb=cc=vc=0);return vd}
function fa(Ua,pb,Rb,ec){Rb=(Ua-pb)/(Ua+Rb-2*pb);0<Rb&&1>Rb&&ec(Ua+(pb-Ua)*Rb)}function ja(Ua,pb,Rb,ec,Sc){const kd=ec-Ua+3*pb-3*Rb,Fd=Ua+Rb-2*pb;var Yd=Ua-pb;let je=0,re=0;1E-14<Math.abs(kd)?(Yd=Fd*Fd+Yd*kd,0<=Yd&&(Yd=Math.sqrt(Yd),je=(-Fd+Yd)/kd,re=(-Fd-Yd)/kd)):je=.5*Yd/Fd;0<je&&1>je&&Sc(Ba(je,Ua,pb,Rb,ec));0<re&&1>re&&Sc(Ba(re,Ua,pb,Rb,ec))}function Ba(Ua,pb,Rb,ec,Sc){const kd=1-Ua,Fd=kd*kd,Yd=Ua*Ua;return Fd*kd*pb+3*Fd*Ua*Rb+3*kd*Yd*ec+Yd*Ua*Sc}function Ga(Ua){return function(pb,Rb){if(!Wd)return!0;
Ua(Wd,pb);we.clear().union(pb.bounds).intersect(Rb).round();const {x1:ec,y1:Sc,x2:kd,y2:Fd}=we;for(pb=Sc;pb<=Fd;++pb)for(Rb=ec;Rb<=kd;++Rb)if(Wd.isPointInPath(Rb,pb))return!0;return!1}}function ua(Ua,pb){return pb.contains(Ua.x||0,Ua.y||0)}function Fa(Ua,pb){const Rb=Ua.x||0,ec=Ua.y||0;return pb.intersects(we.set(Rb,ec,Rb+(Ua.width||0),ec+(Ua.height||0)))}function Xa(Ua,pb){const Rb=Ua.x||0,ec=Ua.y||0;return Sa(pb,Rb,ec,null!=Ua.x2?Ua.x2:Rb,null!=Ua.y2?Ua.y2:ec)}function Sa(Ua,pb,Rb,ec,Sc){const {x1:kd,
y1:Fd,x2:Yd,y2:je}=Ua;Ua=ec-pb;Sc-=Rb;ec=0;let re=1,xe,Af,Qf,Hc;for(Hc=0;4>Hc;++Hc){0===Hc&&(xe=-Ua,Af=-(kd-pb));1===Hc&&(xe=Ua,Af=Yd-pb);2===Hc&&(xe=-Sc,Af=-(Fd-Rb));3===Hc&&(xe=Sc,Af=je-Rb);if(1E-10>Math.abs(xe)&&0>Af)return!1;Qf=Af/xe;if(0>xe){if(Qf>re)return!1;Qf>ec&&(ec=Qf)}else if(0<xe){if(Qf<ec)return!1;Qf<re&&(re=Qf)}}return!0}function eb(Ua,pb){Ua.globalCompositeOperation=pb.blend||"source-over"}function Va(Ua,pb){return null==Ua?pb:Ua}function La(Ua,pb){const Rb=pb.length;for(let ec=0;ec<
Rb;++ec)Ua.addColorStop(pb[ec].offset,pb[ec].color);return Ua}function Ra(Ua,pb,Rb){const ec=Rb.width(),Sc=Rb.height();if("radial"===pb.gradient)Ua=Ua.createRadialGradient(Rb.x1+Va(pb.x1,.5)*ec,Rb.y1+Va(pb.y1,.5)*Sc,Math.max(ec,Sc)*Va(pb.r1,0),Rb.x1+Va(pb.x2,.5)*ec,Rb.y1+Va(pb.y2,.5)*Sc,Math.max(ec,Sc)*Va(pb.r2,.5));else{const kd=Va(pb.x1,0),Fd=Va(pb.y1,0),Yd=Va(pb.x2,1),je=Va(pb.y2,0);if(kd===Yd||Fd===je||ec===Sc)Ua=Ua.createLinearGradient(Rb.x1+kd*ec,Rb.y1+Fd*Sc,Rb.x1+Yd*ec,Rb.y1+je*Sc);else{Rb=
u.canvas(Math.ceil(ec),Math.ceil(Sc));const re=Rb.getContext("2d");re.scale(ec,Sc);re.fillStyle=La(re.createLinearGradient(kd,Fd,Yd,je),pb.stops);re.fillRect(0,0,ec,Sc);return Ua.createPattern(Rb,"no-repeat")}}return La(Ua,pb.stops)}function la(Ua,pb,Rb){Rb*=null==pb.fillOpacity?1:pb.fillOpacity;return 0<Rb?(Ua.globalAlpha=Rb,pb=(Rb=pb.fill)&&Rb.gradient?Ra(Ua,Rb,pb.bounds):Rb,Ua.fillStyle=pb,!0):!1}function ma(Ua,pb,Rb){var ec=null!=(ec=pb.strokeWidth)?ec:1;if(0>=ec)return!1;Rb*=null==pb.strokeOpacity?
1:pb.strokeOpacity;return 0<Rb?(Ua.globalAlpha=Rb,Rb=(Rb=pb.stroke)&&Rb.gradient?Ra(Ua,Rb,pb.bounds):Rb,Ua.strokeStyle=Rb,Ua.lineWidth=ec,Ua.lineCap=pb.strokeCap||"butt",Ua.lineJoin=pb.strokeJoin||"miter",Ua.miterLimit=pb.strokeMiterLimit||10,Ua.setLineDash&&(Ua.setLineDash(pb.strokeDash||ue),Ua.lineDashOffset=pb.strokeDashOffset||0),!0):!1}function Aa(Ua,pb){return Ua.zindex-pb.zindex||Ua.index-pb.index}function Da(Ua){if(!Ua.zdirty)return Ua.zitems;var pb=Ua.items,Rb=[],ec;var Sc=0;for(ec=pb.length;Sc<
ec;++Sc){var kd=pb[Sc];kd.index=Sc;kd.zindex&&Rb.push(kd)}Ua.zdirty=!1;return Ua.zitems=Rb.sort(Aa)}function Qa(Ua,pb){var Rb=Ua.items,ec;if(Rb&&Rb.length){var Sc=Da(Ua);if(Sc&&Sc.length){Ua=0;for(ec=Rb.length;Ua<ec;++Ua)Rb[Ua].zindex||pb(Rb[Ua]);Rb=Sc}Ua=0;for(ec=Rb.length;Ua<ec;++Ua)pb(Rb[Ua])}}function Ea(Ua,pb){var Rb=Ua.items,ec,Sc;if(!Rb||!Rb.length)return null;const kd=Da(Ua);kd&&kd.length&&(Rb=kd);for(Sc=Rb.length;0<=--Sc;)if(ec=pb(Rb[Sc]))return ec;if(Rb===kd)for(Rb=Ua.items,Sc=Rb.length;0<=
--Sc;)if(!Rb[Sc].zindex&&(ec=pb(Rb[Sc])))return ec;return null}function kb(Ua){return function(pb,Rb,ec){Qa(Rb,Sc=>{ec&&!ec.intersects(Sc.bounds)||Mb(Ua,pb,Sc,Sc)})}}function cb(Ua){return function(pb,Rb,ec){!Rb.items.length||ec&&!ec.intersects(Rb.bounds)||Mb(Ua,pb,Rb.items[0],Rb.items)}}function Mb(Ua,pb,Rb,ec){var Sc=null==Rb.opacity?1:Rb.opacity;0===Sc||Ua(pb,ec)||(eb(pb,Rb),Rb.fill&&la(pb,Rb,Sc)&&pb.fill(),Rb.stroke&&ma(pb,Rb,Sc)&&pb.stroke())}function Gb(Ua){Ua=Ua||f.truthy;return function(pb,
Rb,ec,Sc,kd,Fd){ec*=pb.pixelRatio;Sc*=pb.pixelRatio;return Ea(Rb,Yd=>{const je=Yd.bounds;if((!je||je.contains(kd,Fd))&&je&&Ua(pb,Yd,ec,Sc,kd,Fd))return Yd})}}function Wb(Ua,pb){return function(Rb,ec,Sc,kd){var Fd=Array.isArray(ec)?ec[0]:ec,Yd=null==pb?Fd.fill:pb,je=Fd.stroke&&Rb.isPointInStroke;if(je){var re=Fd.strokeWidth;Fd=Fd.strokeCap;Rb.lineWidth=null!=re?re:1;Rb.lineCap=null!=Fd?Fd:"butt"}return Ua(Rb,ec)?!1:Yd&&Rb.isPointInPath(Sc,kd)||je&&Rb.isPointInStroke(Sc,kd)}}function sa(Ua,pb){return"translate("+
Ua+","+pb+")"}function ra(Ua,pb,Rb){function ec(Sc,kd){var Fd=kd.x||0,Yd=kd.y||0,je=kd.angle||0;Sc.translate(Fd,Yd);je&&Sc.rotate(je*=Td);Sc.beginPath();pb(Sc,kd);je&&Sc.rotate(-je);Sc.translate(-Fd,-Yd)}return{type:Ua,tag:"path",nested:!1,attr:function(Sc,kd){var Fd=sa(kd.x||0,kd.y||0)+(kd.angle?" rotate("+(kd.angle+")"):"");Sc("transform",Fd);Sc("d",pb(null,kd))},bound:function(Sc,kd){pb(W(Sc,kd.angle),kd);return C(Sc,kd).translate(kd.x||0,kd.y||0)},draw:kb(ec),pick:Gb(Wb(ec)),isect:Rb||Ga(ec)}}
function xa(Ua,pb,Rb){function ec(kd,Fd){kd.beginPath();pb(kd,Fd)}const Sc=Wb(ec);return{type:Ua,tag:"path",nested:!0,attr:function(kd,Fd){Fd=Fd.mark.items;Fd.length&&kd("d",pb(null,Fd))},bound:function(kd,Fd){Fd=Fd.items;if(0===Fd.length)return kd;pb(W(kd),Fd);return C(kd,Fd[0])},draw:cb(ec),pick:function(kd,Fd,Yd,je,re,xe){var Af=Fd.items;Fd=Fd.bounds;if(!Af||!Af.length||Fd&&!Fd.contains(re,xe))return null;Yd*=kd.pixelRatio;je*=kd.pixelRatio;return Sc(kd,Af,Yd,je)?Af[0]:null},isect:ua,tip:Rb}}function Ia(Ua,
pb){Ua.beginPath();z(pb)?ba(Ua,pb,0,0):Ua.rect(0,0,pb.width||0,pb.height||0);Ua.clip()}function bb(Ua){const pb=Va(Ua.strokeWidth,1);return null!=Ua.strokeOffset?Ua.strokeOffset:Ua.stroke&&.5<pb&&1.5>pb?.5-Math.abs(pb-1):0}function Hb(Ua,pb,Rb,ec){const Sc=bb(pb);Ua.beginPath();ba(Ua,pb,(Rb||0)+Sc,(ec||0)+Sc)}function zb(Ua,pb){var Rb=Ua.image;if(!Rb||Ua.url&&Ua.url!==Rb.url)Rb={complete:!1,width:0,height:0},pb.loadImage(Ua.url).then(ec=>{Ua.image=ec;Ua.image.url=Ua.url});return Rb}function mb(Ua,
pb){return null!=Ua.width?Ua.width:pb&&pb.width?!1!==Ua.aspect&&Ua.height?Ua.height*pb.width/pb.height:pb.width:0}function Jb(Ua,pb){return null!=Ua.height?Ua.height:pb&&pb.height?!1!==Ua.aspect&&Ua.width?Ua.width*pb.height/pb.width:pb.height:0}function Eb(Ua,pb){return"center"===Ua?pb/2:"right"===Ua?pb:0}function Db(Ua,pb){return"middle"===Ua?pb/2:"bottom"===Ua?pb:0}function bc(Ua,pb){var Rb=pb.path;if(null==Rb)return!0;var ec=pb.x||0,Sc=pb.y||0,kd=pb.scaleX||1,Fd=pb.scaleY||1,Yd=(pb.angle||0)*Td,
je=pb.pathCache;je&&je.path===Rb||((pb.pathCache=je=S(Rb)).path=Rb);Yd&&Ua.rotate&&Ua.translate?(Ua.translate(ec,Sc),Ua.rotate(Yd),F(Ua,je,0,0,kd,Fd),Ua.rotate(-Yd),Ua.translate(-ec,-Sc)):F(Ua,je,ec,Sc,kd,Fd)}function jc(Ua,pb){Ua.beginPath();ba(Ua,pb)}function Tc(Ua,pb,Rb){if(pb.stroke&&ma(Ua,pb,Rb)){Rb=pb.x||0;var ec=pb.y||0;var Sc=null!=pb.x2?pb.x2:Rb;pb=null!=pb.y2?pb.y2:ec;Ua.beginPath();Ua.moveTo(Rb,ec);Ua.lineTo(Sc,pb);return!0}return!1}function ub(Ua){Le.width=Ua&&Wd?Gd:Rc}function Rc(Ua,
pb){pb=bd(Ua,pb);Ua=Vd(Ua);return~~(.8*pb.length*Ua)}function Gd(Ua,pb){return 0>=Vd(Ua)||!(pb=bd(Ua,pb))?0:Kd(pb,fe(Ua))}function Kd(Ua,pb){const Rb=`(${pb}) ${Ua}`;let ec=ne.get(Rb);void 0===ec&&(Wd.font=pb,ec=Wd.measureText(Ua).width,ne.set(Rb,ec));return ec}function Vd(Ua){return null!=Ua.fontSize?+Ua.fontSize||0:11}function ze(Ua){return null!=Ua.lineHeight?Ua.lineHeight:Vd(Ua)+2}function ee(Ua){Ua=Ua.lineBreak&&Ua.text&&!f.isArray(Ua.text)?Ua.text.split(Ua.lineBreak):Ua.text;return f.isArray(Ua)?
1<Ua.length?Ua:Ua[0]:Ua}function bd(Ua,pb){pb=null==pb?"":(pb+"").trim();if(0<Ua.limit&&pb.length){var Rb=+Ua.limit,ec=Bd(Ua);if(!(ec(pb)<Rb)){var Sc=Ua.ellipsis||"â€¦",kd="rtl"===Ua.dir;Ua=0;var Fd=pb.length;Rb-=ec(Sc);if(kd){for(;Ua<Fd;)kd=Ua+Fd>>>1,ec(pb.slice(kd))>Rb?Ua=kd+1:Fd=kd;pb=Sc+pb.slice(Ua)}else{for(;Ua<Fd;)kd=1+(Ua+Fd>>>1),ec(pb.slice(0,kd))<Rb?Ua=kd:Fd=kd-1;pb=pb.slice(0,Ua)+Sc}}}return pb}function Bd(Ua){if(Le.width===Gd){const Rb=fe(Ua);return ec=>Kd(ec,Rb)}const pb=Vd(Ua);return Rb=>
~~(.8*Rb.length*pb)}function Ld(Ua,pb){Ua=Ua.font;return(pb&&Ua?String(Ua).replace(/"/g,"'"):Ua)||"sans-serif"}function fe(Ua,pb){return(Ua.fontStyle?Ua.fontStyle+" ":"")+(Ua.fontVariant?Ua.fontVariant+" ":"")+(Ua.fontWeight?Ua.fontWeight+" ":"")+Vd(Ua)+"px "+Ld(Ua,pb)}function Ee(Ua){var pb=Ua.baseline,Rb=Vd(Ua);return Math.round("top"===pb?.79*Rb:"middle"===pb?.3*Rb:"bottom"===pb?-.21*Rb:"line-top"===pb?.29*Rb+.5*ze(Ua):"line-bottom"===pb?.29*Rb-.5*ze(Ua):0)}function dd(Ua){var pb=Ua.x||0,Rb=Ua.y||
0,ec=Ua.radius||0;ec&&(Ua=(Ua.theta||0)-nf,pb+=ec*Math.cos(Ua),Rb+=ec*Math.sin(Ua));Xe.x1=pb;Xe.y1=Rb;return Xe}function nd(Ua,pb,Rb){var ec=Le.height(pb),Sc=pb.align,kd=dd(pb),Fd=kd.x1;kd=kd.y1;var Yd=pb.dx||0,je=(pb.dy||0)+Ee(pb)-Math.round(.8*ec),re=ee(pb);f.isArray(re)?(ec+=ze(pb)*(re.length-1),re=re.reduce((xe,Af)=>Math.max(xe,Le.width(pb,Af)),0)):re=Le.width(pb,re);"center"===Sc?Yd-=re/2:"right"===Sc&&(Yd-=re);Ua.set(Yd+=Fd,je+=kd,Yd+re,je+ec);if(pb.angle&&!Rb)Ua.rotate(pb.angle*Td,Fd,kd);else if(2===
Rb)return Ua.rotatedPoints(pb.angle*Td,Fd,kd);return Ua}function Dc(Ua,pb,Rb){var ec=og[Ua.mark.marktype];pb=pb||ec.bound;ec.nested&&(Ua=Ua.mark);return pb(Ua.bounds||(Ua.bounds=new r),Ua,Rb)}function jd(Ua,pb,Rb){var ec=og[Ua.marktype],Sc=ec.bound,kd=Ua.items,Fd=kd&&kd.length;if(ec.nested)return Fd?Ua=kd[0]:(kg.mark=Ua,Ua=kg),Rb=Dc(Ua,Sc,Rb),pb=pb&&pb.union(Rb)||Rb;pb=pb||Ua.bounds&&Ua.bounds.clear()||new r;if(Fd)for(ec=0,Fd=kd.length;ec<Fd;++ec)pb.union(Dc(kd[ec],Sc,Rb));return Ua.bounds=pb}function Qd(Ua,
pb){return JSON.stringify(Ua,Uf,pb)}function ae(Ua){Ua="string"===typeof Ua?JSON.parse(Ua):Ua;return te(Ua)}function te(Ua){var pb=Ua.marktype,Rb=Ua.items,ec;if(Rb){var Sc=0;for(ec=Rb.length;Sc<ec;++Sc){var kd=pb?"mark":"group";Rb[Sc][kd]=Ua;Rb[Sc].zindex&&(Rb[Sc][kd].zdirty=!0);"group"===(pb||kd)&&te(Rb[Sc])}}pb&&jd(Ua);return Ua}function Bb(Ua){arguments.length?this.root=ae(Ua):(this.root=$b({marktype:"group",name:"root",role:"frame"}),this.root.items=[new Z(this.root)])}function $b(Ua,pb){pb={bounds:new r,
clip:!!Ua.clip,group:pb,interactive:!1===Ua.interactive?!1:!0,items:[],marktype:Ua.marktype,name:Ua.name||void 0,role:Ua.role||void 0,zindex:Ua.zindex||0};null!=Ua.aria&&(pb.aria=Ua.aria);Ua.description&&(pb.description=Ua.description);return pb}function Gc(Ua,pb,Rb){!Ua&&"undefined"!==typeof document&&document.createElement&&(Ua=document);return Ua?Rb?Ua.createElementNS(Rb,pb):Ua.createElement(pb):null}function Jc(Ua,pb){pb=pb.toLowerCase();Ua=Ua.childNodes;for(var Rb=0,ec=Ua.length;Rb<ec;++Rb)if(Ua[Rb].tagName.toLowerCase()===
pb)return Ua[Rb]}function ud(Ua,pb,Rb,ec){pb=Ua.childNodes[pb];if(!pb||pb.tagName.toLowerCase()!==Rb.toLowerCase()){var Sc=pb||null;pb=Gc(Ua.ownerDocument,Rb,ec);Ua.insertBefore(pb,Sc)}return pb}function Zc(Ua,pb){for(var Rb=Ua.childNodes,ec=Rb.length;ec>pb;)Ua.removeChild(Rb[--ec]);return Ua}function xd(Ua){return"mark-"+Ua.marktype+(Ua.role?" role-"+Ua.role:"")+(Ua.name?" "+Ua.name:"")}function Sd(Ua,pb){const Rb=pb.getBoundingClientRect();return[Ua.clientX-Rb.left-(pb.clientLeft||0),Ua.clientY-
Rb.top-(pb.clientTop||0)]}function ie(Ua,pb){this._active=null;this._handlers={};this._loader=Ua||q.loader();this._tooltip=pb||Be}function Be(Ua,pb,Rb,ec){Ua.element().setAttribute("title",ec||"")}function uc(Ua){this._bgcolor=this._el=null;this._loader=new E(Ua)}function Oc(Ua,pb){ie.call(this,Ua,pb);this._touch=this._down=null;this._first=!0;this._events={}}function Nd(Ua,pb){("touchstart"===pb||"touchmove"===pb||"touchend"===pb?["touchstart","touchmove","touchend"]:[pb]).forEach(Rb=>Od(Ua,Rb))}
function Od(Ua,pb){const Rb=Ua.canvas();Rb&&!Ua._events[pb]&&(Ua._events[pb]=1,Rb.addEventListener(pb,Ua[pb]?ec=>Ua[pb](ec):ec=>Ua.fire(pb,ec)))}function pe(Ua,pb,Rb){return function(ec){const Sc=this._active,kd=this.pickEvent(ec);kd!==Sc&&(Sc&&Sc.exit||this.fire(Rb,ec),this._active=kd,this.fire(pb,ec));this.fire(Ua,ec)}}function ye(Ua){return function(pb){this.fire(Ua,pb);this._active=null}}function me(Ua){uc.call(this,Ua);this._options={};this._redraw=!1;this._dirty=new r;this._tempb=new r}function od(Ua,
pb){ie.call(this,Ua,pb);const Rb=this;Rb._hrefHandler=fh(Rb,(ec,Sc)=>{Sc&&Sc.href&&Rb.handleHref(ec,Sc,Sc.href)});Rb._tooltipHandler=fh(Rb,(ec,Sc)=>{Rb.handleTooltip(ec,Sc,"mouseout"!==ec.type)})}function hd(Ua,pb){var Rb=!1===pb.aria;Ua("aria-hidden",Rb||void 0);if(Rb||null==pb.description)for(const ec in Vb)Ua(Vb[ec],void 0);else Rb=pb.mark.marktype,Ua("aria-label",pb.description),Ua("role",pb.ariaRole||("group"===Rb?"graphics-object":"graphics-symbol")),Ua("aria-roledescription",pb.ariaRoleDescription||
`${Rb} mark`)}function ge(Ua){return!1===Ua.aria?{["aria-hidden"]:!0}:tb[Ua.role]?null:Lb[Ua.role]?cd(Ua,Lb[Ua.role]):$d(Ua)}function $d(Ua){const pb=Ua.marktype,Rb="group"===pb||"text"===pb||Ua.items.some(ec=>null!=ec.description&&!1!==ec.aria);return sb(Rb?"graphics-object":"graphics-symbol",`${pb} mark container`,Ua.description)}function cd(Ua,pb){try{const Rb=Ua.items[0],ec=pb.caption||(()=>"");return sb(pb.role||"graphics-symbol",pb.desc,Rb.description||ec(Rb))}catch(Rb){return null}}function Ie(Ua){try{return f.array(f.peek(Ua.items).items[0].text).join(" ")}catch(pb){return null}}
function Je(Ua){Ua=Ua.map(pb=>pb+("fill"===pb||"stroke"===pb?" color":""));return 2>Ua.length?Ua[0]:Ua.slice(0,-1).join(", ")+" and "+f.peek(Ua)}function Ad(){let Ua="",pb="",Rb="";const ec=[],Sc=(Fd,Yd)=>{null!=Yd&&(pb+=` ${Fd}="${hc(Yd).replace(/"/g,"\x26quot;").replace(/\t/g,"\x26#x9;").replace(/\n/g,"\x26#xA;").replace(/\r/g,"\x26#xD;")}"`);return kd},kd={open(Fd,...Yd){pb&&(Ua+=`${pb}>${Rb}`,pb=Rb="");ec.push(Fd);pb="\x3c"+Fd;for(const je of Yd)for(const re in je)Sc(re,je[re]);return kd},close(){const Fd=
ec.pop();Ua=pb?Ua+(pb+(Rb?`>${Rb}</${Fd}>`:"/\x3e")):Ua+`</${Fd}>`;pb=Rb="";return kd},attr:Sc,text:Fd=>(Rb+=hc(Fd),kd),toString:()=>Ua};return kd}function $e(Ua,pb){Ua.open(pb.tagName);if(pb.hasAttributes()){var Rb=pb.attributes,ec=Rb.length;for(var Sc=0;Sc<ec;++Sc)Ua.attr(Rb[Sc].name,Rb[Sc].value)}if(pb.hasChildNodes())for(pb=pb.childNodes,Rb=pb.length,ec=0;ec<Rb;ec++)Sc=pb[ec],3===Sc.nodeType?Ua.text(Sc.nodeValue):$e(Ua,Sc);return Ua.close()}function qf(Ua){uc.call(this,Ua);this._dirtyID=0;this._dirty=
[];this._defs=this._root=this._svg=null}function Ye(Ua,pb){for(;Ua&&Ua.dirty!==pb;Ua=Ua.mark.group)if(Ua.dirty=pb,Ua.mark&&Ua.mark.dirty!==pb)Ua.mark.dirty=pb;else break}function af(Ua,pb,Rb){pb=pb.lastChild.previousSibling;let ec,Sc=0;Qa(Rb,kd=>{ec=Ua.mark(pb,kd,ec);++Sc});Zc(pb,1+Sc)}function jg(Ua,pb,Rb,ec,Sc){let kd=Ua._svg;if(!kd){var Fd=pb.ownerDocument;kd=Gc(Fd,ec,Nc);Ua._svg=kd;Ua.mark&&(kd.__data__=Ua,kd.__values__={fill:"default"},"g"===ec&&(ec=Gc(Fd,"path",Nc),kd.appendChild(ec),ec.__data__=
Ua,ec=Gc(Fd,"g",Nc),kd.appendChild(ec),ec.__data__=Ua,Fd=Gc(Fd,"path",Nc),kd.appendChild(Fd),Fd.__data__=Ua,Fd.__values__={fill:"default"}))}(kd.ownerSVGElement!==Sc||kd.parentNode&&1<kd.parentNode.childNodes.length&&kd.previousSibling!=Rb)&&pb.insertBefore(kd,Rb?Rb.nextSibling:pb.firstChild);return kd}function oe(Ua,pb,Rb){if(pb!==wd[Ua]){if(Rb){var ec=mc;null!=pb?ec.setAttributeNS(Rb,Ua,pb):ec.removeAttributeNS(Rb,Ua)}else zg(mc,Ua,pb);wd[Ua]=pb}}function If(Ua,pb,Rb){Rb!==wd[pb]&&(null==Rb?Ua.style.removeProperty(pb):
Ua.style.setProperty(pb,Rb+""),wd[pb]=Rb)}function hg(Ua,pb){for(const Rb in pb)zg(Ua,Rb,pb[Rb])}function zg(Ua,pb,Rb){null!=Rb?Ua.setAttribute(pb,Rb):Ua.removeAttribute(pb)}function pf(){let Ua;return"undefined"===typeof window?"":(Ua=window.location).hash?Ua.href.slice(0,-Ua.hash.length):Ua.href}function bg(Ua){uc.call(this,Ua);this._text=null;this._defs={gradient:{},clipping:{}}}function wg(Ua,pb,Rb,ec,Sc){if(null==pb)return Ua;"bgrect"===ec&&!1===Rb.interactive&&(Ua["pointer-events"]="none");
if("bgfore"===ec&&(!1===Rb.interactive&&(Ua["pointer-events"]="none"),Ua.display="none",null!==pb.fill))return Ua;"image"===ec&&!1===pb.smooth&&(Ua.style="image-rendering: optimizeSpeed; image-rendering: pixelated;");"text"===ec&&(Ua["font-family"]=Ld(pb),Ua["font-size"]=Vd(pb)+"px",Ua["font-style"]=pb.fontStyle,Ua["font-variant"]=pb.fontVariant,Ua["font-weight"]=pb.fontWeight);for(const kd in Fc)Rb=pb[kd],ec=Fc[kd],("transparent"!==Rb||"fill"!==ec&&"stroke"!==ec)&&null!=Rb&&(Rb&&Rb.gradient&&(Rb=
U(Rb,Sc.gradient,"")),Ua[ec]=Rb);return Ua}function Tf(Ua,pb,Rb,ec){if(Ua.bounds&&pb.intersects(Ua.bounds)&&("group"===Ua.marktype||!1!==Ua.interactive&&(!Rb||Rb(Ua)))){const kd=Ua.items;var Sc=Ua.marktype;Ua=kd.length;let Fd=0;if("group"===Sc)for(;Fd<Ua;++Fd)sg(kd[Fd],pb,Rb,ec);else for(Rb=og[Sc].isect;Fd<Ua;++Fd)Sc=kd[Fd],zc(Sc,pb,Rb)&&ec.push(Sc)}return ec}function sg(Ua,pb,Rb,ec){Rb&&Rb(Ua.mark)&&zc(Ua,pb,og.group.isect)&&ec.push(Ua);const Sc=Ua.items,kd=Sc&&Sc.length;if(kd){const Fd=Ua.x||0;
Ua=Ua.y||0;pb.translate(-Fd,-Ua);for(let Yd=0;Yd<kd;++Yd)Tf(Sc[Yd],pb,Rb,ec);pb.translate(Fd,Ua)}return ec}function zc(Ua,pb,Rb){const ec=Ua.bounds;return pb.encloses(ec)||pb.intersects(ec)&&Rb(Ua,pb)}function Wa(Ua,pb,Rb){return Ua===pb?!0:"path"===Rb?Ha(Ua,pb):Ua instanceof Date&&pb instanceof Date?+Ua===+pb:f.isNumber(Ua)&&f.isNumber(pb)?1E-9>=Math.abs(Ua-pb):Ua&&pb&&(f.isObject(Ua)||f.isObject(pb))?m(Ua,pb):Ua==pb}function Ha(Ua,pb){return Wa(S(Ua),S(pb))}function m(Ua,pb){var Rb=Object.keys(Ua),
ec=Object.keys(pb),Sc;if(Rb.length!==ec.length)return!1;Rb.sort();ec.sort();for(Sc=Rb.length-1;0<=Sc;Sc--)if(Rb[Sc]!=ec[Sc])return!1;for(Sc=Rb.length-1;0<=Sc;Sc--)if(ec=Rb[Sc],!Wa(Ua[ec],pb[ec],ec))return!1;return typeof Ua===typeof pb}let Na=0;const Xb={basis:{curve:h.curveBasis},"basis-closed":{curve:h.curveBasisClosed},"basis-open":{curve:h.curveBasisOpen},bundle:{curve:h.curveBundle,tension:"beta",value:.85},cardinal:{curve:h.curveCardinal,tension:"tension",value:0},"cardinal-open":{curve:h.curveCardinalOpen,
tension:"tension",value:0},"cardinal-closed":{curve:h.curveCardinalClosed,tension:"tension",value:0},"catmull-rom":{curve:h.curveCatmullRom,tension:"alpha",value:.5},"catmull-rom-closed":{curve:h.curveCatmullRomClosed,tension:"alpha",value:.5},"catmull-rom-open":{curve:h.curveCatmullRomOpen,tension:"alpha",value:.5},linear:{curve:h.curveLinear},"linear-closed":{curve:h.curveLinearClosed},monotone:{horizontal:h.curveMonotoneY,vertical:h.curveMonotoneX},natural:{curve:h.curveNatural},step:{curve:h.curveStep},
"step-after":{curve:h.curveStepAfter},"step-before":{curve:h.curveStepBefore}},Xc={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},Id=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\.\d+)(\.\d)/g,/(\d)([-+])/g,/\s|,|###/],Td=Math.PI/180,nf=Math.PI/2,Se=2*Math.PI,Rd=Math.sqrt(3)/2;var Vf={},jf={},Jf=[].join;const Xf=["l",0,0,0,0,0,0,0],Pg={circle:{draw:function(Ua,pb){pb=Math.sqrt(pb)/2;Ua.moveTo(pb,0);Ua.arc(0,0,pb,0,Se)}},cross:{draw:function(Ua,pb){pb=Math.sqrt(pb)/2;var Rb=pb/2.5;Ua.moveTo(-pb,-Rb);Ua.lineTo(-pb,Rb);
Ua.lineTo(-Rb,Rb);Ua.lineTo(-Rb,pb);Ua.lineTo(Rb,pb);Ua.lineTo(Rb,Rb);Ua.lineTo(pb,Rb);Ua.lineTo(pb,-Rb);Ua.lineTo(Rb,-Rb);Ua.lineTo(Rb,-pb);Ua.lineTo(-Rb,-pb);Ua.lineTo(-Rb,-Rb);Ua.closePath()}},diamond:{draw:function(Ua,pb){pb=Math.sqrt(pb)/2;Ua.moveTo(-pb,0);Ua.lineTo(0,-pb);Ua.lineTo(pb,0);Ua.lineTo(0,pb);Ua.closePath()}},square:{draw:function(Ua,pb){pb=Math.sqrt(pb);var Rb=-pb/2;Ua.rect(Rb,Rb,pb,pb)}},arrow:{draw:function(Ua,pb){pb=Math.sqrt(pb)/2;var Rb=pb/7,ec=pb/2.5,Sc=pb/8;Ua.moveTo(-Rb,
pb);Ua.lineTo(Rb,pb);Ua.lineTo(Rb,-Sc);Ua.lineTo(ec,-Sc);Ua.lineTo(0,-pb);Ua.lineTo(-ec,-Sc);Ua.lineTo(-Rb,-Sc);Ua.closePath()}},wedge:{draw:function(Ua,pb){var Rb=Math.sqrt(pb)/2;pb=Rd*Rb;var ec=pb-.5773502691896257*Rb;Rb/=4;Ua.moveTo(0,-pb-ec);Ua.lineTo(-Rb,pb-ec);Ua.lineTo(Rb,pb-ec);Ua.closePath()}},triangle:{draw:function(Ua,pb){pb=Math.sqrt(pb)/2;var Rb=Rd*pb,ec=Rb-.5773502691896257*pb;Ua.moveTo(0,-Rb-ec);Ua.lineTo(-pb,Rb-ec);Ua.lineTo(pb,Rb-ec);Ua.closePath()}},"triangle-up":{draw:function(Ua,
pb){pb=Math.sqrt(pb)/2;var Rb=Rd*pb;Ua.moveTo(0,-Rb);Ua.lineTo(-pb,Rb);Ua.lineTo(pb,Rb);Ua.closePath()}},"triangle-down":{draw:function(Ua,pb){pb=Math.sqrt(pb)/2;var Rb=Rd*pb;Ua.moveTo(0,Rb);Ua.lineTo(-pb,-Rb);Ua.lineTo(pb,-Rb);Ua.closePath()}},"triangle-right":{draw:function(Ua,pb){pb=Math.sqrt(pb)/2;var Rb=Rd*pb;Ua.moveTo(Rb,0);Ua.lineTo(-Rb,-pb);Ua.lineTo(-Rb,pb);Ua.closePath()}},"triangle-left":{draw:function(Ua,pb){pb=Math.sqrt(pb)/2;var Rb=Rd*pb;Ua.moveTo(-Rb,0);Ua.lineTo(Rb,-pb);Ua.lineTo(Rb,
pb);Ua.closePath()}},stroke:{draw:function(Ua,pb){pb=Math.sqrt(pb)/2;Ua.moveTo(-pb,0);Ua.lineTo(pb,0)}}};var dh={};const Zg=Ua=>Ua.x||0,Yf=Ua=>Ua.y||0,be=Ua=>!1!==Ua.defined,Kf=h.arc().startAngle(Ua=>Ua.startAngle||0).endAngle(Ua=>Ua.endAngle||0).padAngle(Ua=>Ua.padAngle||0).innerRadius(Ua=>Ua.innerRadius||0).outerRadius(Ua=>Ua.outerRadius||0).cornerRadius(Ua=>Ua.cornerRadius||0),he=h.area().x(Zg).y1(Yf).y0(Ua=>(Ua.y||0)+(Ua.height||0)).defined(be),Ue=h.area().y(Yf).x1(Zg).x0(Ua=>(Ua.x||0)+(Ua.width||
0)).defined(be),Pf=h.line().x(Zg).y(Yf).defined(be),Ig=A().x(Zg).y(Yf).width(Ua=>Ua.width||0).height(Ua=>Ua.height||0).cornerRadius(Ua=>T(Ua.cornerRadiusTopLeft,Ua.cornerRadius)||0,Ua=>T(Ua.cornerRadiusTopRight,Ua.cornerRadius)||0,Ua=>T(Ua.cornerRadiusBottomRight,Ua.cornerRadius)||0,Ua=>T(Ua.cornerRadiusBottomLeft,Ua.cornerRadius)||0),Ya=h.symbol().type(Ua=>w(Ua.shape||"circle")).size(Ua=>T(Ua.size,64)),Cb=J().x(Zg).y(Yf).defined(be).size(Ua=>Ua.size||1);var fc=1;r.prototype={clone(){return new r(this)},
clear(){this.x1=+Number.MAX_VALUE;this.y1=+Number.MAX_VALUE;this.x2=-Number.MAX_VALUE;this.y2=-Number.MAX_VALUE;return this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(Ua){return this.x1===Ua.x1&&this.y1===Ua.y1&&this.x2===Ua.x2&&this.y2===Ua.y2},set(Ua,pb,Rb,ec){Rb<Ua?(this.x2=Ua,this.x1=Rb):(this.x1=Ua,this.x2=Rb);ec<pb?(this.y2=pb,this.y1=ec):(this.y1=pb,this.y2=ec);return this},add(Ua,pb){Ua<this.x1&&
(this.x1=Ua);pb<this.y1&&(this.y1=pb);Ua>this.x2&&(this.x2=Ua);pb>this.y2&&(this.y2=pb);return this},expand(Ua){this.x1-=Ua;this.y1-=Ua;this.x2+=Ua;this.y2+=Ua;return this},round(){this.x1=Math.floor(this.x1);this.y1=Math.floor(this.y1);this.x2=Math.ceil(this.x2);this.y2=Math.ceil(this.y2);return this},scale(Ua){this.x1*=Ua;this.y1*=Ua;this.x2*=Ua;this.y2*=Ua;return this},translate(Ua,pb){this.x1+=Ua;this.x2+=Ua;this.y1+=pb;this.y2+=pb;return this},rotate(Ua,pb,Rb){Ua=this.rotatedPoints(Ua,pb,Rb);
return this.clear().add(Ua[0],Ua[1]).add(Ua[2],Ua[3]).add(Ua[4],Ua[5]).add(Ua[6],Ua[7])},rotatedPoints(Ua,pb,Rb){var {x1:ec,y1:Sc,x2:kd,y2:Fd}=this,Yd=Math.cos(Ua);Ua=Math.sin(Ua);var je=pb-pb*Yd+Rb*Ua;pb=Rb-pb*Ua-Rb*Yd;return[Yd*ec-Ua*Sc+je,Ua*ec+Yd*Sc+pb,Yd*ec-Ua*Fd+je,Ua*ec+Yd*Fd+pb,Yd*kd-Ua*Sc+je,Ua*kd+Yd*Sc+pb,Yd*kd-Ua*Fd+je,Ua*kd+Yd*Fd+pb]},union(Ua){Ua.x1<this.x1&&(this.x1=Ua.x1);Ua.y1<this.y1&&(this.y1=Ua.y1);Ua.x2>this.x2&&(this.x2=Ua.x2);Ua.y2>this.y2&&(this.y2=Ua.y2);return this},intersect(Ua){Ua.x1>
this.x1&&(this.x1=Ua.x1);Ua.y1>this.y1&&(this.y1=Ua.y1);Ua.x2<this.x2&&(this.x2=Ua.x2);Ua.y2<this.y2&&(this.y2=Ua.y2);return this},encloses(Ua){return Ua&&this.x1<=Ua.x1&&this.x2>=Ua.x2&&this.y1<=Ua.y1&&this.y2>=Ua.y2},alignsWith(Ua){return Ua&&(this.x1==Ua.x1||this.x2==Ua.x2||this.y1==Ua.y1||this.y2==Ua.y2)},intersects(Ua){return Ua&&!(this.x2<Ua.x1||this.x1>Ua.x2||this.y2<Ua.y1||this.y1>Ua.y2)},contains(Ua,pb){return!(Ua<this.x1||Ua>this.x2||pb<this.y1||pb>this.y2)},width(){return this.x2-this.x1},
height(){return this.y2-this.y1}};f.inherits(Z,Y);E.prototype={pending(){return this._pending},sanitizeURL(Ua){const pb=this;pb._pending+=1;return pb._loader.sanitize(Ua,{context:"href"}).then(Rb=>{--pb._pending;return Rb}).catch(()=>{--pb._pending;return null})},loadImage(Ua){const pb=this,Rb=u.image();pb._pending+=1;return pb._loader.sanitize(Ua,{context:"image"}).then(ec=>{const Sc=ec.href;if(!Sc||!Rb)throw{url:Sc};const kd=new Rb;ec=f.hasOwnProperty(ec,"crossOrigin")?ec.crossOrigin:"anonymous";
null!=ec&&(kd.crossOrigin=ec);kd.onload=()=>{--pb._pending};kd.onerror=()=>{--pb._pending};kd.src=Sc;return kd}).catch(ec=>{--pb._pending;return{complete:!1,width:0,height:0,src:ec&&ec.url||""}})},ready(){const Ua=this;return new Promise(pb=>{function Rb(ec){Ua.pending()?setTimeout(()=>{Rb(!0)},10):pb(ec)}Rb(!1)})}};const lc=Se-1E-8;let rc,Pc,$a,xb,Nb,cc,vc,ed;const jb=(Ua,pb)=>{Ua=Pc=Ua;pb=$a=pb;return rc.add(Ua,pb)},Qb=Ua=>rc.add(Ua,rc.y1),pc=Ua=>rc.add(rc.x1,Ua),Qc=(Ua,pb)=>rc.add(Nb*Ua+vc*pb,
cc*Ua+ed*pb),Cc=(Ua,pb)=>jb(Nb*Ua+vc*pb,cc*Ua+ed*pb),vd={beginPath(){},closePath(){},moveTo:Cc,lineTo:Cc,rect(Ua,pb,Rb,ec){xb?(Qc(Ua+Rb,pb),Qc(Ua+Rb,pb+ec),Qc(Ua,pb+ec),Cc(Ua,pb)):(rc.add(Ua+Rb,pb+ec),jb(Ua,pb))},quadraticCurveTo(Ua,pb,Rb,ec){const Sc=cc*Ua+ed*pb,kd=Nb*Rb+vc*ec;Rb=cc*Rb+ed*ec;fa(Pc,Nb*Ua+vc*pb,kd,Qb);fa($a,Sc,Rb,pc);jb(kd,Rb)},bezierCurveTo(Ua,pb,Rb,ec,Sc,kd){const Fd=cc*Ua+ed*pb,Yd=cc*Rb+ed*ec,je=Nb*Sc+vc*kd;Sc=cc*Sc+ed*kd;ja(Pc,Nb*Ua+vc*pb,Nb*Rb+vc*ec,je,Qb);ja($a,Fd,Yd,Sc,pc);
jb(je,Sc)},arc(Ua,pb,Rb,ec,Sc,kd){ec+=xb;Sc+=xb;Pc=Rb*Math.cos(Sc)+Ua;$a=Rb*Math.sin(Sc)+pb;if(Math.abs(Sc-ec)>lc)rc.add(Ua-Rb,pb-Rb),rc.add(Ua+Rb,pb+Rb);else{const Fd=je=>rc.add(Rb*Math.cos(je)+Ua,Rb*Math.sin(je)+pb);let Yd;Fd(ec);Fd(Sc);if(Sc!==ec)if(ec%=Se,0>ec&&(ec+=Se),Sc%=Se,0>Sc&&(Sc+=Se),Sc<ec&&(kd=!kd,Yd=ec,ec=Sc,Sc=Yd),kd)for(Sc-=Se,Yd=ec-ec%nf,ec=0;4>ec&&Yd>Sc;++ec,Yd-=nf)Fd(Yd);else for(Yd=ec-ec%nf+nf,ec=0;4>ec&&Yd<Sc;++ec,Yd+=nf)Fd(Yd)}}};var Wd=(Wd=u.canvas(1,1))?Wd.getContext("2d"):
null;const we=new r;var ue=[],sd=ra("arc",function(Ua,pb){return Kf.context(Ua)(pb)}),Fe=xa("area",function(Ua,pb){const Rb=pb[0];return("horizontal"===Rb.orient?Ue:he).curve(X(Rb.interpolate||"linear",Rb.orient,Rb.tension)).context(Ua)(pb)},function(Ua,pb){pb="horizontal"===Ua[0].orient?pb[1]:pb[0];for(var Rb="horizontal"===Ua[0].orient?"y":"x",ec=Ua.length,Sc=Infinity,kd,Fd;0<=--ec;)!1!==Ua[ec].defined&&(Fd=Math.abs(Ua[ec][Rb]-pb),Fd<Sc&&(Sc=Fd,kd=Ua[ec]));return kd});const Ge=Wb(Hb),Me=Wb(Hb,!1),
rf=Wb(Hb,!0);var Ma={type:"group",tag:"g",nested:!1,attr:function(Ua,pb){Ua("transform",sa(pb.x||0,pb.y||0))},bound:function(Ua,pb){if(!pb.clip&&pb.items){const Rb=pb.items,ec=Rb.length;for(let Sc=0;Sc<ec;++Sc)Ua.union(Rb[Sc].bounds)}(pb.clip||pb.width||pb.height)&&!pb.noBound&&Ua.add(0,0).add(pb.width||0,pb.height||0);C(Ua,pb);return Ua.translate(pb.x||0,pb.y||0)},draw:function(Ua,pb,Rb){Qa(pb,ec=>{const Sc=ec.x||0,kd=ec.y||0,Fd=ec.strokeForeground,Yd=null==ec.opacity?1:ec.opacity;(ec.stroke||ec.fill)&&
Yd&&(Hb(Ua,ec,Sc,kd),eb(Ua,ec),ec.fill&&la(Ua,ec,Yd)&&Ua.fill(),ec.stroke&&!Fd&&ma(Ua,ec,Yd)&&Ua.stroke());Ua.save();Ua.translate(Sc,kd);ec.clip&&Ia(Ua,ec);Rb&&Rb.translate(-Sc,-kd);Qa(ec,je=>{this.draw(Ua,je,Rb)});Rb&&Rb.translate(Sc,kd);Ua.restore();Fd&&ec.stroke&&Yd&&(Hb(Ua,ec,Sc,kd),eb(Ua,ec),ma(Ua,ec,Yd)&&Ua.stroke())})},pick:function(Ua,pb,Rb,ec,Sc,kd){if(pb.bounds&&!pb.bounds.contains(Sc,kd)||!pb.items)return null;const Fd=Rb*Ua.pixelRatio,Yd=ec*Ua.pixelRatio;return Ea(pb,je=>{let re,xe;var Af=
je.bounds;if(!Af||Af.contains(Sc,kd)){re=je.x||0;xe=je.y||0;Af=re+(je.width||0);var Qf=xe+(je.height||0),Hc=je.clip;if(!Hc||!(Sc<re||Sc>Af||kd<xe||kd>Qf)){Ua.save();Ua.translate(re,xe);re=Sc-re;xe=kd-xe;if(Hc&&z(je)&&!rf(Ua,je,Fd,Yd))return Ua.restore(),null;Qf=je.strokeForeground;if((Hc=!1!==pb.interactive)&&Qf&&je.stroke&&Me(Ua,je,Fd,Yd))return Ua.restore(),je;Af=Ea(je,td=>(!1!==td.interactive||"group"===td.marktype)&&td.bounds&&td.bounds.contains(re,xe)?this.pick(td,Rb,ec,re,xe):null);!Af&&Hc&&
(je.fill||!Qf&&je.stroke)&&Ge(Ua,je,Fd,Yd)&&(Af=je);Ua.restore();return Af||null}}})},isect:Fa,content:function(Ua,pb,Rb){pb=pb.clip?K(Rb,pb,pb):null;Ua("clip-path",pb)},background:function(Ua,pb){Ua("class","background");Ua("aria-hidden",!0);const Rb=bb(pb);Ua("d",ba(null,pb,Rb,Rb))},foreground:function(Ua,pb){Ua("class","foreground");Ua("aria-hidden",!0);if(pb.strokeForeground){const Rb=bb(pb);Ua("d",ba(null,pb,Rb,Rb))}else Ua("d","")}},lb={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",
version:"1.1"},vb={type:"image",tag:"image",nested:!1,attr:function(Ua,pb,Rb){var ec=zb(pb,Rb);Rb=mb(pb,ec);const Sc=Jb(pb,ec),kd=(pb.x||0)-Eb(pb.align,Rb),Fd=(pb.y||0)-Db(pb.baseline,Sc);ec=!ec.src&&ec.toDataURL?ec.toDataURL():ec.src||"";Ua("href",ec,lb["xmlns:xlink"],"xlink:href");Ua("transform",sa(kd,Fd));Ua("width",Rb);Ua("height",Sc);Ua("preserveAspectRatio",!1===pb.aspect?"none":"xMidYMid")},bound:function(Ua,pb){var Rb=pb.image;const ec=mb(pb,Rb);Rb=Jb(pb,Rb);const Sc=(pb.x||0)-Eb(pb.align,
ec);pb=(pb.y||0)-Db(pb.baseline,Rb);return Ua.set(Sc,pb,Sc+ec,pb+Rb)},draw:function(Ua,pb,Rb){Qa(pb,ec=>{if(!Rb||Rb.intersects(ec.bounds)){var Sc=zb(ec,this),kd=mb(ec,Sc),Fd=Jb(ec,Sc);if(0!==kd&&0!==Fd){var Yd=(ec.x||0)-Eb(ec.align,kd),je=(ec.y||0)-Db(ec.baseline,Fd),re;if(!1!==ec.aspect){var xe=Sc.width/Sc.height;var Af=ec.width/ec.height;xe===xe&&Af===Af&&xe!==Af&&(Af<xe?(xe=kd/xe,je+=(Fd-xe)/2,Fd=xe):(xe*=Fd,Yd+=(kd-xe)/2,kd=xe))}if(Sc.complete||Sc.toDataURL)eb(Ua,ec),Ua.globalAlpha=null!=(re=
ec.opacity)?re:1,Ua.imageSmoothingEnabled=!1!==ec.smooth,Ua.drawImage(Sc,Yd,je,kd,Fd)}}})},pick:Gb(),isect:f.truthy,get:zb,xOffset:Eb,yOffset:Db},nb=xa("line",function(Ua,pb){const Rb=pb[0];return Pf.curve(X(Rb.interpolate||"linear",Rb.orient,Rb.tension)).context(Ua)(pb)},function(Ua,pb){for(var Rb=Math.pow(Ua[0].strokeWidth||1,2),ec=Ua.length,Sc,kd;0<=--ec;)if(!1!==Ua[ec].defined&&(Sc=Ua[ec].x-pb[0],kd=Ua[ec].y-pb[1],Sc=Sc*Sc+kd*kd,Sc<Rb))return Ua[ec];return null}),ac={type:"path",tag:"path",nested:!1,
attr:function(Ua,pb){var Rb=pb.scaleY||1;1===(pb.scaleX||1)&&1===Rb||Ua("vector-effect","non-scaling-stroke");Rb=sa(pb.x||0,pb.y||0)+(pb.angle?" rotate("+(pb.angle+")"):"")+(pb.scaleX||pb.scaleY?" scale("+((pb.scaleX||1)+","+(pb.scaleY||1)+")"):"");Ua("transform",Rb);Ua("d",pb.path)},bound:function(Ua,pb){return bc(W(Ua,pb.angle),pb)?Ua.set(0,0,0,0):C(Ua,pb,!0)},draw:kb(bc),pick:Gb(Wb(bc)),isect:Ga(bc)},yc={type:"rect",tag:"path",nested:!1,attr:function(Ua,pb){Ua("d",ba(null,pb))},bound:function(Ua,
pb){var Rb,ec;return C(Ua.set(Rb=pb.x||0,ec=pb.y||0,Rb+pb.width||0,ec+pb.height||0),pb)},draw:kb(jc),pick:Gb(Wb(jc)),isect:Fa},Mc={type:"rule",tag:"line",nested:!1,attr:function(Ua,pb){Ua("transform",sa(pb.x||0,pb.y||0));Ua("x2",null!=pb.x2?pb.x2-(pb.x||0):0);Ua("y2",null!=pb.y2?pb.y2-(pb.y||0):0)},bound:function(Ua,pb){var Rb,ec;return C(Ua.set(Rb=pb.x||0,ec=pb.y||0,null!=pb.x2?pb.x2:Rb,null!=pb.y2?pb.y2:ec),pb)},draw:function(Ua,pb,Rb){Qa(pb,ec=>{if(!Rb||Rb.intersects(ec.bounds)){var Sc=null==ec.opacity?
1:ec.opacity;Sc&&Tc(Ua,ec,Sc)&&(eb(Ua,ec),Ua.stroke())}})},pick:Gb(function(Ua,pb,Rb,ec){return Ua.isPointInStroke?Tc(Ua,pb,1)&&Ua.isPointInStroke(Rb,ec):!1}),isect:Xa},md=ra("shape",function(Ua,pb){return(pb.mark.shape||pb.shape).context(Ua)(pb)}),yd=ra("symbol",function(Ua,pb){return Ya.context(Ua)(pb)},ua);const ne=f.lruCache();var Le={height:Vd,measureWidth:Gd,estimateWidth:Rc,width:Rc,canvas:ub};ub(!0);const Qe={left:"start",center:"middle",right:"end"},Xe=new r;var Ed={type:"text",tag:"text",
nested:!1,attr:function(Ua,pb){var Rb=pb.dx||0,ec=(pb.dy||0)+Ee(pb),Sc=dd(pb),kd=Sc.x1;Sc=Sc.y1;var Fd=pb.angle||0;Ua("text-anchor",Qe[pb.align]||"start");if(Fd){if(pb=sa(kd,Sc)+" rotate("+(Fd+")"),Rb||ec)pb+=" "+sa(Rb,ec)}else pb=sa(kd+Rb,Sc+ec);Ua("transform",pb)},bound:nd,draw:function(Ua,pb,Rb){Qa(pb,ec=>{var Sc=null==ec.opacity?1:ec.opacity,kd;if(!(Rb&&!Rb.intersects(ec.bounds)||0===Sc||0>=ec.fontSize||null==ec.text||0===ec.text.length)){Ua.font=fe(ec);Ua.textAlign=ec.align||"left";var Fd=dd(ec);
var Yd=Fd.x1;Fd=Fd.y1;ec.angle&&(Ua.save(),Ua.translate(Yd,Fd),Ua.rotate(ec.angle*Td),Yd=Fd=0);Yd+=ec.dx||0;Fd+=(ec.dy||0)+Ee(ec);var je=ee(ec);eb(Ua,ec);if(f.isArray(je)){var re=ze(ec);for(kd=0;kd<je.length;++kd){var xe=bd(ec,je[kd]);ec.fill&&la(Ua,ec,Sc)&&Ua.fillText(xe,Yd,Fd);ec.stroke&&ma(Ua,ec,Sc)&&Ua.strokeText(xe,Yd,Fd);Fd+=re}}else xe=bd(ec,je),ec.fill&&la(Ua,ec,Sc)&&Ua.fillText(xe,Yd,Fd),ec.stroke&&ma(Ua,ec,Sc)&&Ua.strokeText(xe,Yd,Fd);ec.angle&&Ua.restore()}})},pick:Gb(function(Ua,pb,Rb,
ec,Sc,kd){if(0>=pb.fontSize)return!1;if(!pb.angle)return!0;Rb=dd(pb);Ua=Rb.x1;Rb=Rb.y1;ec=nd(Xe,pb,1);var Fd=-pb.angle*Td;pb=Math.cos(Fd);Fd=Math.sin(Fd);return ec.contains(pb*Sc-Fd*kd+(Ua-pb*Ua+Fd*Rb),Fd*Sc+pb*kd+(Rb-Fd*Ua-pb*Rb))}),isect:function(Ua,pb){Ua=nd(Xe,Ua,2);return Sa(pb,Ua[0],Ua[1],Ua[2],Ua[3])||Sa(pb,Ua[0],Ua[1],Ua[4],Ua[5])||Sa(pb,Ua[4],Ua[5],Ua[6],Ua[7])||Sa(pb,Ua[2],Ua[3],Ua[6],Ua[7])}},kf=xa("trail",function(Ua,pb){return Cb.context(Ua)(pb)},function(Ua,pb){for(var Rb=Ua.length,
ec,Sc;0<=--Rb;)if(!1!==Ua[Rb].defined&&(ec=Ua[Rb].x-pb[0],Sc=Ua[Rb].y-pb[1],Sc=ec*ec+Sc*Sc,ec=Ua[Rb].size||1,Sc<ec*ec))return Ua[Rb];return null}),og={arc:sd,area:Fe,group:Ma,image:vb,line:nb,path:ac,rect:yc,rule:Mc,shape:md,symbol:yd,text:Ed,trail:kf},kg={mark:null};const Uf="marktype name role interactive clip items zindex x y width height align baseline fill fillOpacity opacity blend stroke strokeOpacity strokeWidth strokeCap strokeDash strokeDashOffset strokeForeground strokeOffset startAngle endAngle innerRadius outerRadius cornerRadius padAngle cornerRadiusTopLeft cornerRadiusTopRight cornerRadiusBottomLeft cornerRadiusBottomRight interpolate tension orient defined url aspect smooth path scaleX scaleY x2 y2 size shape text angle theta radius dir dx dy ellipsis limit lineBreak lineHeight font fontSize fontWeight fontStyle fontVariant description aria ariaRole ariaRoleDescription".split(" ");
Bb.prototype={toJSON(Ua){return Qd(this.root,Ua||0)},mark(Ua,pb,Rb){pb=pb||this.root.items[0];Ua=$b(Ua,pb);pb.items[Rb]=Ua;Ua.zindex&&(Ua.group.zdirty=!0);return Ua}};ie.prototype={initialize(Ua,pb,Rb){this._el=Ua;this._obj=Rb||null;return this.origin(pb)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},origin(Ua){return arguments.length?(this._origin=Ua||[0,0],this):this._origin.slice()},scene(Ua){if(!arguments.length)return this._scene;this._scene=Ua;return this},on(){},
off(){},_handlerIndex(Ua,pb,Rb){for(let ec=Ua?Ua.length:0;0<=--ec;)if(Ua[ec].type===pb&&(!Rb||Ua[ec].handler===Rb))return ec;return-1},handlers(Ua){const pb=this._handlers,Rb=[];if(Ua)Rb.push(...pb[this.eventName(Ua)]);else for(const ec in pb)Rb.push(...pb[ec]);return Rb},eventName(Ua){const pb=Ua.indexOf(".");return 0>pb?Ua:Ua.slice(0,pb)},handleHref(Ua,pb,Rb){this._loader.sanitize(Rb,{context:"href"}).then(ec=>{const Sc=new MouseEvent(Ua.type,Ua),kd=Gc(null,"a");for(const Fd in ec)kd.setAttribute(Fd,
ec[Fd]);kd.dispatchEvent(Sc)}).catch(()=>{})},handleTooltip(Ua,pb,Rb){if(pb&&null!=pb.tooltip){var ec=this.canvas(),Sc=this._origin,kd=pb&&pb.mark,Fd;if(kd&&(Fd=og[kd.marktype]).tip){ec=Sd(Ua,ec);ec[0]-=Sc[0];for(ec[1]-=Sc[1];pb=pb.mark.group;)ec[0]-=pb.x||0,ec[1]-=pb.y||0;pb=Fd.tip(kd.items,ec)}this._tooltip.call(this._obj,this,Ua,pb,Rb&&pb&&pb.tooltip||null)}},getItemBoundingClientRect(Ua){var pb=this.canvas();if(pb){var Rb=pb.getBoundingClientRect(),ec=this._origin,Sc=Ua.bounds;pb=Sc.width();var kd=
Sc.height(),Fd=Sc.x1+ec[0]+Rb.left;for(Rb=Sc.y1+ec[1]+Rb.top;Ua.mark&&(Ua=Ua.mark.group);)Fd+=Ua.x||0,Rb+=Ua.y||0;return{x:Fd,y:Rb,width:pb,height:kd,left:Fd,top:Rb,right:Fd+pb,bottom:Rb+kd}}}};uc.prototype={initialize(Ua,pb,Rb,ec,Sc){this._el=Ua;return this.resize(pb,Rb,ec,Sc)},element(){return this._el},canvas(){return this._el&&this._el.firstChild},background(Ua){if(0===arguments.length)return this._bgcolor;this._bgcolor=Ua;return this},resize(Ua,pb,Rb,ec){this._width=Ua;this._height=pb;this._origin=
Rb||[0,0];this._scale=ec||1;return this},dirty(){},render(Ua){const pb=this;pb._call=function(){pb._render(Ua)};pb._call();pb._call=null;return pb},_render(){},renderAsync(Ua){const pb=this.render(Ua);return this._ready?this._ready.then(()=>pb):Promise.resolve(pb)},_load(Ua,pb){var Rb=this;Ua=Rb._loader[Ua](pb);if(!Rb._ready){const ec=Rb._call;Rb._ready=Rb._loader.ready().then(Sc=>{Sc&&ec();Rb._ready=null})}return Ua},sanitizeURL(Ua){return this._load("sanitizeURL",Ua)},loadImage(Ua){return this._load("loadImage",
Ua)}};f.inherits(Oc,ie,{initialize(Ua,pb,Rb){this._canvas=Ua&&Jc(Ua,"canvas");["click","mousedown","mousemove","mouseout","dragleave"].forEach(ec=>Nd(this,ec));return ie.prototype.initialize.call(this,Ua,pb,Rb)},canvas(){return this._canvas},context(){return this._canvas.getContext("2d")},events:"keydown keypress keyup dragenter dragleave dragover mousedown mouseup mousemove mouseout mouseover click dblclick wheel mousewheel touchstart touchmove touchend".split(" "),DOMMouseScroll(Ua){this.fire("mousewheel",
Ua)},mousemove:pe("mousemove","mouseover","mouseout"),dragover:pe("dragover","dragenter","dragleave"),mouseout:ye("mouseout"),dragleave:ye("dragleave"),mousedown(Ua){this._down=this._active;this.fire("mousedown",Ua)},click(Ua){this._down===this._active&&(this.fire("click",Ua),this._down=null)},touchstart(Ua){this._touch=this.pickEvent(Ua.changedTouches[0]);this._first&&(this._active=this._touch,this._first=!1);this.fire("touchstart",Ua,!0)},touchmove(Ua){this.fire("touchmove",Ua,!0)},touchend(Ua){this.fire("touchend",
Ua,!0);this._touch=null},fire(Ua,pb,Rb){Rb=Rb?this._touch:this._active;const ec=this._handlers[Ua];pb.vegaType=Ua;"click"===Ua&&Rb&&Rb.href?this.handleHref(pb,Rb,Rb.href):("mousemove"===Ua||"mouseout"===Ua)&&this.handleTooltip(pb,Rb,"mouseout"!==Ua);if(ec)for(let Sc=0,kd=ec.length;Sc<kd;++Sc)ec[Sc].handler.call(this._obj,pb,Rb)},on(Ua,pb){const Rb=this.eventName(Ua),ec=this._handlers;0>this._handlerIndex(ec[Rb],Ua,pb)&&(Nd(this,Ua),(ec[Rb]||(ec[Rb]=[])).push({type:Ua,handler:pb}));return this},off(Ua,
pb){var Rb=this.eventName(Ua);Rb=this._handlers[Rb];Ua=this._handlerIndex(Rb,Ua,pb);0<=Ua&&Rb.splice(Ua,1);return this},pickEvent(Ua){Ua=Sd(Ua,this._canvas);const pb=this._origin;return this.pick(this._scene,Ua[0],Ua[1],Ua[0]-pb[0],Ua[1]-pb[1])},pick(Ua,pb,Rb,ec,Sc){const kd=this.context();return og[Ua.marktype].pick.call(this,kd,Ua,pb,Rb,ec,Sc)}});var dg="undefined"!==typeof window?window.devicePixelRatio||1:1;const tg=uc.prototype;f.inherits(me,uc,{initialize(Ua,pb,Rb,ec,Sc,kd){this._options=kd||
{};this._canvas=this._options.externalContext?null:u.canvas(1,1,this._options.type);Ua&&this._canvas&&(Zc(Ua,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks"));return tg.initialize.call(this,Ua,pb,Rb,ec,Sc)},resize(Ua,pb,Rb,ec){tg.resize.call(this,Ua,pb,Rb,ec);if(this._canvas){Ua=this._canvas;pb=this._width;Rb=this._height;ec=this._origin;var Sc=this._scale,kd=this._options.context;const Yd="undefined"!==typeof HTMLElement&&Ua instanceof HTMLElement&&null!=Ua.parentNode,je=Ua.getContext("2d");
Sc=Yd?dg:Sc;Ua.width=pb*Sc;Ua.height=Rb*Sc;for(var Fd in kd)je[Fd]=kd[Fd];Yd&&1!==Sc&&(Ua.style.width=pb+"px",Ua.style.height=Rb+"px");je.pixelRatio=Sc;je.setTransform(Sc,0,0,Sc,Sc*ec[0],Sc*ec[1])}else(Fd=this._options.externalContext)||f.error("CanvasRenderer is missing a valid canvas or context"),Fd.scale(this._scale,this._scale),Fd.translate(this._origin[0],this._origin[1]);this._redraw=!0;return this},canvas(){return this._canvas},context(){return this._options.externalContext||(this._canvas?
this._canvas.getContext("2d"):null)},dirty(Ua){const pb=this._tempb.clear().union(Ua.bounds);for(Ua=Ua.mark.group;Ua;)pb.translate(Ua.x||0,Ua.y||0),Ua=Ua.mark.group;this._dirty.union(pb)},_render(Ua){const pb=this.context(),Rb=this._origin,ec=this._width,Sc=this._height,kd=this._dirty;var Fd=(new r).set(0,0,ec,Sc).translate(-Rb[0],-Rb[1]);pb.save();this._redraw||kd.empty()?Fd=(this._redraw=!1,Fd.expand(1)):(Fd=Fd.intersect(kd),Fd.expand(1).round(),pb.pixelRatio%1&&Fd.scale(pb.pixelRatio).round().scale(1/
pb.pixelRatio),Fd.translate(-(Rb[0]%1),-(Rb[1]%1)),pb.beginPath(),pb.rect(Fd.x1,Fd.y1,Fd.width(),Fd.height()),pb.clip());this.clear(-Rb[0],-Rb[1],ec,Sc);this.draw(pb,Ua,Fd);pb.restore();kd.clear();return this},draw(Ua,pb,Rb){const ec=og[pb.marktype];if(pb.clip){var Sc=pb.clip;Ua.save();f.isFunction(Sc)?(Ua.beginPath(),Sc(Ua),Ua.clip()):Ia(Ua,pb.group)}ec.draw.call(this,Ua,pb,Rb);pb.clip&&Ua.restore()},clear(Ua,pb,Rb,ec){const Sc=this._options,kd=this.context();"pdf"===Sc.type||Sc.externalContext||
kd.clearRect(Ua,pb,Rb,ec);null!=this._bgcolor&&(kd.fillStyle=this._bgcolor,kd.fillRect(Ua,pb,Rb,ec))}});const fh=(Ua,pb)=>Rb=>{let ec=Rb.target.__data__;ec=Array.isArray(ec)?ec[0]:ec;Rb.vegaType=Rb.type;pb.call(Ua._obj,Rb,ec)};f.inherits(od,ie,{initialize(Ua,pb,Rb){let ec=this._svg;ec&&(ec.removeEventListener("click",this._hrefHandler),ec.removeEventListener("mousemove",this._tooltipHandler),ec.removeEventListener("mouseout",this._tooltipHandler));if(this._svg=ec=Ua&&Jc(Ua,"svg"))ec.addEventListener("click",
this._hrefHandler),ec.addEventListener("mousemove",this._tooltipHandler),ec.addEventListener("mouseout",this._tooltipHandler);return ie.prototype.initialize.call(this,Ua,pb,Rb)},canvas(){return this._svg},on(Ua,pb){const Rb=this.eventName(Ua),ec=this._handlers;0>this._handlerIndex(ec[Rb],Ua,pb)&&(Ua={type:Ua,handler:pb,listener:fh(this,pb)},(ec[Rb]||(ec[Rb]=[])).push(Ua),this._svg&&this._svg.addEventListener(Rb,Ua.listener));return this},off(Ua,pb){const Rb=this.eventName(Ua),ec=this._handlers[Rb];
Ua=this._handlerIndex(ec,Ua,pb);0<=Ua&&(this._svg&&this._svg.removeEventListener(Rb,ec[Ua].listener),ec.splice(Ua,1));return this}});const sb=(Ua,pb,Rb)=>({["role"]:Ua,["aria-roledescription"]:pb,["aria-label"]:Rb||void 0}),tb=f.toSet("axis-domain axis-grid axis-label axis-tick axis-title legend-band legend-entry legend-gradient legend-label legend-title legend-symbol title".split(" ")),Lb={axis:{desc:"axis",caption:function(Ua){var pb=Ua.datum;const Rb=Ua.orient,ec=pb.title?Ie(Ua):null;var Sc=Ua.context;
pb=Sc.scales[pb.scale].value;Sc=Sc.dataflow.locale();const kd=pb.type;return`${"left"===Rb||"right"===Rb?"Y":"X"}-axis`+(ec?` titled '${ec}'`:"")+` for a ${D.isDiscrete(kd)?"discrete":kd} scale`+` with ${D.domainCaption(Sc,pb,Ua)}`}},legend:{desc:"legend",caption:function(Ua){var pb=Ua.datum;const Rb=pb.title?Ie(Ua):null,ec=`${pb.type||""} legend`.trim();var Sc=pb.scales;pb=Object.keys(Sc);var kd=Ua.context;Sc=kd.scales[Sc[pb[0]]].value;kd=kd.dataflow.locale();return(ec.length?ec[0].toUpperCase()+
ec.slice(1):ec)+(Rb?` titled '${Rb}'`:"")+` for ${Je(pb)}`+` with ${D.domainCaption(kd,Sc,Ua)}`}},"title-text":{desc:"title",caption:Ua=>`Title text '${f.array(Ua.text).join(" ")}'`},"title-subtitle":{desc:"subtitle",caption:Ua=>`Subtitle text '${f.array(Ua.text).join(" ")}'`}},Vb={ariaRole:"role",ariaRoleDescription:"aria-roledescription",description:"aria-label"},hc=Ua=>(Ua+"").replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;").replace(/>/g,"\x26gt;"),dc=Ua=>$e(Ad(),Ua)+"",Fc={fill:"fill",fillOpacity:"fill-opacity",
stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity",blend:"mix-blend-mode"},Yc={fill:"none","stroke-miterlimit":10},Nc=lb.xmlns,fd=uc.prototype;f.inherits(qf,uc,{initialize(Ua,pb,Rb,ec,Sc){this._defs={};this._clearDefs();Ua&&(this._svg=ud(Ua,0,"svg",Nc),this._svg.setAttributeNS("http://www.w3.org/2000/xmlns/",
"xmlns",Nc),this._svg.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink",lb["xmlns:xlink"]),this._svg.setAttribute("version",lb.version),this._svg.setAttribute("class","marks"),Zc(Ua,1),this._root=ud(this._svg,0,"g",Nc),hg(this._root,Yc),Zc(this._svg,1));this.background(this._bgcolor);return fd.initialize.call(this,Ua,pb,Rb,ec,Sc)},background(Ua){arguments.length&&this._svg&&this._svg.style.setProperty("background-color",Ua);return fd.background.apply(this,arguments)},resize(Ua,pb,Rb,ec){fd.resize.call(this,
Ua,pb,Rb,ec);this._svg&&(hg(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`));this._dirty=[];return this},canvas(){return this._svg},svg(){const Ua=this._svg,pb=this._bgcolor;if(!Ua)return null;let Rb;pb&&(Ua.removeAttribute("style"),Rb=ud(Ua,0,"rect",Nc),hg(Rb,{width:this._width,height:this._height,fill:pb}));const ec=dc(Ua);pb&&(Ua.removeChild(Rb),this._svg.style.setProperty("background-color",
pb));return ec},_render(Ua){this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,Ua),Zc(this._root,1));this.defs();this._dirty=[];++this._dirtyID;return this},dirty(Ua){Ua.dirty!==this._dirtyID&&(Ua.dirty=this._dirtyID,this._dirty.push(Ua))},isDirty(Ua){return this._dirtyAll||!Ua._svg||Ua.dirty===this._dirtyID},_dirtyCheck(){this._dirtyAll=!0;const Ua=this._dirty;if(!Ua.length||!this._dirtyID)return!0;const pb=++this._dirtyID;let Rb;let ec,Sc,kd,Fd;kd=0;for(Fd=Ua.length;kd<
Fd;++kd){Rb=Ua[kd];var Yd=Rb.mark;Yd.marktype!==ec&&(ec=Yd.marktype,Sc=og[ec]);Yd.zdirty&&Yd.dirty!==pb&&(this._dirtyAll=!1,Ye(Rb,pb),Yd.items.forEach(je=>{je.dirty=pb}));Yd.zdirty||(Rb.exit?(Sc.nested&&Yd.items.length?(Yd=Yd.items[0],Yd._svg&&this._update(Sc,Yd._svg,Yd)):Rb._svg&&(Yd=Rb._svg.parentNode)&&Yd.removeChild(Rb._svg),Rb._svg=null):(Rb=Sc.nested?Yd.items[0]:Rb,Rb._update!==pb&&(Rb._svg&&Rb._svg.ownerSVGElement?this._update(Sc,Rb._svg,Rb):(this._dirtyAll=!1,Ye(Rb,pb)),Rb._update=pb)))}return!this._dirtyAll},
mark(Ua,pb,Rb){if(!this.isDirty(pb))return pb._svg;const ec=this._svg,Sc=og[pb.marktype];var kd=!1===pb.interactive?"none":null;const Fd="g"===Sc.tag;let Yd=null,je=0;const re=jg(pb,Ua,Rb,"g",ec);re.setAttribute("class",xd(pb));Ua=ge(pb);for(const xe in Ua)zg(re,xe,Ua[xe]);Fd||zg(re,"pointer-events",kd);zg(re,"clip-path",pb.clip?K(this,pb,pb.group):null);kd=xe=>{const Af=this.isDirty(xe),Qf=jg(xe,re,Yd,Sc.tag,ec);Af&&(this._update(Sc,Qf,xe),Fd&&af(this,Qf,xe));Yd=Qf;++je};Sc.nested?pb.items.length&&
kd(pb.items[0]):Qa(pb,kd);Zc(re,je);return re},_update(Ua,pb,Rb){mc=pb;wd=pb.__values__;hd(oe,Rb);Ua.attr(oe,Rb,this);const ec=Xd[Ua.type];ec&&ec.call(this,Ua,pb,Rb);mc&&this.style(mc,Rb)},style(Ua,pb){if(null!=pb)for(const Rb in Fc){let ec="font"===Rb?Ld(pb):pb[Rb];if(ec===wd[Rb])continue;const Sc=Fc[Rb];null==ec?Ua.removeAttribute(Sc):(ec&&ec.gradient&&(ec=U(ec,this._defs.gradient,pf())),Ua.setAttribute(Sc,ec+""));wd[Rb]=ec}},defs(){const Ua=this._svg,pb=this._defs;let Rb=pb.el;var ec=0;for(var Sc in pb.gradient){Rb||
(pb.el=Rb=ud(Ua,1,"defs",Nc));var kd=void 0;let je,re;var Fd=Rb,Yd=pb.gradient[Sc];"radial"===Yd.gradient?(kd=ud(Fd,ec++,"pattern",Nc),hg(kd,{id:"p_"+Yd.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),kd=ud(kd,0,"rect",Nc),hg(kd,{width:1,height:1,fill:`url(${pf()}#${Yd.id})`}),Fd=ud(Fd,ec++,"radialGradient",Nc),hg(Fd,{id:Yd.id,fx:Yd.x1,fy:Yd.y1,fr:Yd.r1,cx:Yd.x2,cy:Yd.y2,r:Yd.r2})):(Fd=ud(Fd,ec++,"linearGradient",Nc),hg(Fd,{id:Yd.id,x1:Yd.x1,x2:Yd.x2,y1:Yd.y1,
y2:Yd.y2}));re=0;for(je=Yd.stops.length;re<je;++re)kd=ud(Fd,re,"stop",Nc),kd.setAttribute("offset",Yd.stops[re].offset),kd.setAttribute("stop-color",Yd.stops[re].color);Zc(Fd,re)}for(const je in pb.clipping)Rb||(pb.el=Rb=ud(Ua,1,"defs",Nc)),Fd=Rb,Yd=pb.clipping[je],Sc=ec,Fd=ud(Fd,Sc,"clipPath",Nc),Fd.setAttribute("id",Yd.id),Yd.path?(ec=ud(Fd,0,"path",Nc),ec.setAttribute("d",Yd.path)):(ec=ud(Fd,0,"rect",Nc),hg(ec,{x:0,y:0,width:Yd.width,height:Yd.height})),Zc(Fd,1),ec=Sc+1;Rb&&(0===ec?(Ua.removeChild(Rb),
pb.el=null):Zc(Rb,ec))},_clearDefs(){const Ua=this._defs;Ua.gradient={};Ua.clipping={}}});let mc=null,wd=null;const Xd={group(Ua,pb,Rb){const ec=mc=pb.childNodes[2];wd=ec.__values__;Ua.foreground(oe,Rb,this);wd=pb.__values__;mc=pb.childNodes[1];Ua.content(oe,Rb,this);pb=mc=pb.childNodes[0];Ua.background(oe,Rb,this);Ua=!1===Rb.mark.interactive?"none":null;Ua!==wd.events&&(zg(ec,"pointer-events",Ua),zg(pb,"pointer-events",Ua),wd.events=Ua);Rb.strokeForeground&&Rb.stroke?(Ua=Rb.fill,zg(ec,"display",
null),this.style(pb,Rb),zg(pb,"stroke",null),Ua&&(Rb.fill=null),wd=ec.__values__,this.style(ec,Rb),Ua&&(Rb.fill=Ua),mc=null):zg(ec,"display","none")},image(Ua,pb,Rb){!1===Rb.smooth?(If(pb,"image-rendering","optimizeSpeed"),If(pb,"image-rendering","pixelated")):If(pb,"image-rendering",null)},text(Ua,pb,Rb){Ua=ee(Rb);let ec,Sc,kd;f.isArray(Ua)?(ec=Ua.map(Fd=>bd(Rb,Fd)),Ua=ec.join("\n"),Ua!==wd.text&&(Zc(pb,0),Sc=pb.ownerDocument,kd=ze(Rb),ec.forEach((Fd,Yd)=>{const je=Gc(Sc,"tspan",Nc);je.__data__=
Rb;je.textContent=Fd;Yd&&(je.setAttribute("x",0),je.setAttribute("dy",kd));pb.appendChild(je)}),wd.text=Ua)):(ec=bd(Rb,Ua),ec!==wd.text&&(pb.textContent=ec,wd.text=ec));zg(pb,"font-family",Ld(Rb));zg(pb,"font-size",Vd(Rb)+"px");zg(pb,"font-style",Rb.fontStyle);zg(pb,"font-variant",Rb.fontVariant);zg(pb,"font-weight",Rb.fontWeight)}};f.inherits(bg,uc,{svg(){return this._text},_render(Ua){const pb=Ad();pb.open("svg",f.extend({},lb,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,
viewBox:`0 0 ${this._width} ${this._height}`}));const Rb=this._bgcolor;Rb&&"transparent"!==Rb&&"none"!==Rb&&pb.open("rect",{width:this._width,height:this._height,fill:Rb}).close();pb.open("g",Yc,{transform:"translate("+this._origin+")"});this.mark(pb,Ua);pb.close();this.defs(pb);this._text=pb.close()+"";return this},mark(Ua,pb){const Rb=og[pb.marktype],ec=Rb.tag,Sc=[hd,Rb.attr];Ua.open("g",{"class":xd(pb),"clip-path":pb.clip?K(this,pb,pb.group):null},ge(pb),{"pointer-events":"g"!==ec&&!1===pb.interactive?
"none":null});const kd=Fd=>{const Yd=this.href(Fd);Yd&&Ua.open("a",Yd);Ua.open(ec,this.attr(pb,Fd,Sc,"g"!==ec?ec:null));if("text"===ec){var je=ee(Fd);if(f.isArray(je)){var re={x:0,dy:ze(Fd)};for(var xe=0;xe<je.length;++xe)Ua.open("tspan",xe?re:null).text(bd(Fd,je[xe])).close()}else Ua.text(bd(Fd,je))}else"g"===ec&&(je=Fd.strokeForeground,re=Fd.fill,xe=Fd.stroke,je&&xe&&(Fd.stroke=null),Ua.open("path",this.attr(pb,Fd,Rb.background,"bgrect")).close(),Ua.open("g",this.attr(pb,Fd,Rb.content)),Qa(Fd,Af=>
this.mark(Ua,Af)),Ua.close(),je&&xe?(re&&(Fd.fill=null),Fd.stroke=xe,Ua.open("path",this.attr(pb,Fd,Rb.foreground,"bgrect")).close(),re&&(Fd.fill=re)):Ua.open("path",this.attr(pb,Fd,Rb.foreground,"bgfore")).close());Ua.close();Yd&&Ua.close()};Rb.nested?pb.items&&pb.items.length&&kd(pb.items[0]):Qa(pb,kd);return Ua.close()},href(Ua){const pb=Ua.href;if(pb){if(Ua=this._hrefs&&this._hrefs[pb])return Ua;this.sanitizeURL(pb).then(Rb=>{Rb["xlink:href"]=Rb.href;Rb.href=null;(this._hrefs||(this._hrefs={}))[pb]=
Rb})}return null},attr(Ua,pb,Rb,ec){const Sc={},kd=(Fd,Yd,je,re)=>{Sc[re||Fd]=Yd};Array.isArray(Rb)?Rb.forEach(Fd=>Fd(kd,pb,this)):Rb(kd,pb,this);ec&&wg(Sc,pb,Ua,ec,this._defs);return Sc},defs(Ua){var pb=this._defs.gradient;const Rb=this._defs.clipping;if(0!==Object.keys(pb).length+Object.keys(Rb).length){Ua.open("defs");for(const Sc in pb){var ec=pb[Sc];const kd=ec.stops;"radial"===ec.gradient?(Ua.open("pattern",{id:"p_"+Sc,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),
Ua.open("rect",{width:"1",height:"1",fill:"url(#"+Sc+")"}).close(),Ua.close(),Ua.open("radialGradient",{id:Sc,fx:ec.x1,fy:ec.y1,fr:ec.r1,cx:ec.x2,cy:ec.y2,r:ec.r2})):Ua.open("linearGradient",{id:Sc,x1:ec.x1,x2:ec.x2,y1:ec.y1,y2:ec.y2});for(ec=0;ec<kd.length;++ec)Ua.open("stop",{offset:kd[ec].offset,"stop-color":kd[ec].color}).close();Ua.close()}for(const Sc in Rb)pb=Rb[Sc],Ua.open("clipPath",{id:Sc}),pb.path?Ua.open("path",{d:pb.path}).close():Ua.open("rect",{x:0,y:0,width:pb.width,height:pb.height}).close(),
Ua.close();Ua.close()}}});const ce={};ce.canvas=ce.png={renderer:me,headless:me,handler:Oc};ce.svg={renderer:qf,headless:bg,handler:od};ce.none={};const De=new r;k.Bounds=r;k.CanvasHandler=Oc;k.CanvasRenderer=me;k.Gradient=function(Ua,pb){var Rb=[],ec;return ec={gradient:"linear",x1:Ua?Ua[0]:0,y1:Ua?Ua[1]:0,x2:pb?pb[0]:1,y2:pb?pb[1]:0,stops:Rb,stop:function(Sc,kd){Rb.push({offset:Sc,color:kd});return ec}}};k.GroupItem=Z;k.Handler=ie;k.Item=Y;k.Marks=og;k.RenderType={Canvas:"canvas",PNG:"png",SVG:"svg",
None:"none"};k.Renderer=uc;k.ResourceLoader=E;k.SVGHandler=od;k.SVGRenderer=qf;k.SVGStringRenderer=bg;k.Scenegraph=Bb;k.boundClip=function(Ua){const pb=Ua.clip;if(f.isFunction(pb))pb(W(De.clear()));else if(pb)De.set(0,0,Ua.group.width,Ua.group.height);else return;Ua.bounds.intersect(De)};k.boundContext=W;k.boundItem=Dc;k.boundMark=jd;k.boundStroke=C;k.domChild=ud;k.domClear=Zc;k.domCreate=Gc;k.domFind=Jc;k.font=fe;k.fontFamily=Ld;k.fontSize=Vd;k.intersect=function(Ua,pb,Rb){const ec=[];pb=(new r).union(pb);
const Sc=Ua.marktype;return Sc?Tf(Ua,pb,Rb,ec):"group"===Sc?sg(Ua,pb,Rb,ec):f.error("Intersect scene must be mark node or group item.")};k.intersectBoxLine=Sa;k.intersectPath=Ga;k.intersectPoint=ua;k.intersectRule=Xa;k.lineHeight=ze;k.markup=Ad;k.multiLineOffset=function(Ua){const pb=ee(Ua);return(f.isArray(pb)?pb.length-1:0)*ze(Ua)};k.pathCurves=X;k.pathEqual=Ha;k.pathParse=S;k.pathRectangle=A;k.pathRender=F;k.pathSymbols=w;k.pathTrail=J;k.point=Sd;k.renderModule=function(Ua,pb){Ua=String(Ua||"").toLowerCase();
return 1<arguments.length?(ce[Ua]=pb,this):ce[Ua]};k.resetSVGClipId=function(){fc=1};k.resetSVGDefIds=function(){fc=1;Na=0};k.sceneEqual=Wa;k.sceneFromJSON=ae;k.scenePickVisit=Ea;k.sceneToJSON=Qd;k.sceneVisit=Qa;k.sceneZOrder=Da;k.serializeXML=dc;k.textMetrics=Le;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[528]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(517),da(527),da(503)):"function"===typeof define&&define.amd?define(["exports","vega-dataflow","vega-scenegraph","vega-util"],f):(k="undefined"!==typeof globalThis?globalThis:k||self,f((k.vega=k.vega||{},k.vega.transforms={}),k.vega,k.vega,k.vega))})(this,function(k,f,h,l){function u(ma){f.Transform.call(this,null,ma)}function q(ma,Aa,Da){return Aa(ma.bounds.clear(),ma,Da)}function D(ma){f.Transform.call(this,
0,ma)}function U(ma){return ma._signals[":vega_identifier:"]||(ma._signals[":vega_identifier:"]=ma.add(0))}function aa(ma){f.Transform.call(this,null,ma)}function X(ma){const Aa=ma.groups;ma=ma.parent;return Aa&&1===Aa.size?Aa.get(Object.keys(Aa.object)[0]):Aa&&ma?Aa.lookup(ma):null}function S(ma){f.Transform.call(this,null,ma)}function V(ma){f.Transform.call(this,null,ma)}function F(ma,Aa,Da){return ma[Aa]===Da?0:(ma[Aa]=Da,1)}function t(ma){ma=ma.items[0].orient;return"left"===ma||"right"===ma}
function w(ma,Aa,Da,Qa){Aa=Aa.items[0];var Ea=Aa.datum,kb=null!=Aa.translate?Aa.translate:.5,cb=Aa.orient,Mb=+Ea.grid;var Gb=[Ea.ticks?Mb++:-1,Ea.labels?Mb++:-1,Mb+ +Ea.domain];Mb=Aa.range;var Wb=Aa.offset,sa=Aa.position,ra=Aa.minExtent,xa=Aa.maxExtent;Ea=Ea.title&&Aa.items[Gb[2]].items[0];var Ia=Aa.titlePadding,bb=Aa.bounds,Hb=Ea&&h.multiLineOffset(Ea),zb;La.clear().union(bb);bb.clear();-1<(zb=Gb[0])&&bb.union(Aa.items[zb].bounds);-1<(zb=Gb[1])&&bb.union(Aa.items[zb].bounds);switch(cb){case "top":Da=
sa||0;Qa=-Wb;ra=Math.max(ra,Math.min(xa,-bb.y1));bb.add(0,-ra).add(Mb,0);Ea&&x(ma,Ea,ra,Ia,Hb,0,-1,bb);break;case "left":Da=-Wb;Qa=sa||0;ra=Math.max(ra,Math.min(xa,-bb.x1));bb.add(-ra,0).add(0,Mb);Ea&&x(ma,Ea,ra,Ia,Hb,1,-1,bb);break;case "right":Da+=Wb;Qa=sa||0;ra=Math.max(ra,Math.min(xa,bb.x2));bb.add(0,0).add(ra,Mb);Ea&&x(ma,Ea,ra,Ia,Hb,1,1,bb);break;case "bottom":Da=sa||0;Qa+=Wb;ra=Math.max(ra,Math.min(xa,bb.y2));bb.add(0,0).add(Mb,ra);Ea&&x(ma,Ea,ra,Ia,0,0,1,bb);break;default:Da=Aa.x,Qa=Aa.y}h.boundStroke(bb.translate(Da,
Qa),Aa);F(Aa,"x",Da+kb)|F(Aa,"y",Qa+kb)&&(Aa.bounds=La,ma.dirty(Aa),Aa.bounds=bb,ma.dirty(Aa));return Aa.mark.bounds.clear().union(bb)}function x(ma,Aa,Da,Qa,Ea,kb,cb,Mb){const Gb=Aa.bounds;Aa.auto&&(Da=cb*(Da+Ea+Qa),Ea=Qa=0,ma.dirty(Aa),kb?Qa=(Aa.x||0)-(Aa.x=Da):Ea=(Aa.y||0)-(Aa.y=Da),Aa.mark.bounds.clear().union(Gb.translate(-Qa,-Ea)),ma.dirty(Aa));Mb.union(Gb)}function I(ma){return(new h.Bounds).set(0,0,ma.width||0,ma.height||0)}function R(ma){const Aa=ma.bounds.clone();return Aa.empty()?Aa.set(0,
0,0,0):Aa.translate(-(ma.x||0),-(ma.y||0))}function B(ma,Aa,Da){ma=l.isObject(ma)?ma[Aa]:ma;return null!=ma?ma:void 0!==Da?Da:0}function v(ma){return 0>ma?Math.ceil(-ma):0}function O(ma,Aa,Da){var Qa=!Da.nodirty,Ea="flush"===Da.bounds?I:R,kb=La.set(0,0,0,0),cb=B(Da.align,"column"),Mb=B(Da.align,"row"),Gb=B(Da.padding,"column"),Wb=B(Da.padding,"row"),sa=Da.columns||Aa.length,ra=0>=sa?1:Math.ceil(Aa.length/sa),xa=Aa.length,Ia=Array(xa),bb=Array(sa),Hb=0,zb=Array(xa),mb=Array(ra),Jb=0,Eb=Array(xa),Db=
Array(xa),bc=Array(xa),jc,Tc,ub;for(jc=0;jc<sa;++jc)bb[jc]=0;for(jc=0;jc<ra;++jc)mb[jc]=0;for(jc=0;jc<xa;++jc){var Rc=Aa[jc];var Gd=bc[jc]=Ea(Rc);Rc.x=Rc.x||0;Eb[jc]=0;Rc.y=Rc.y||0;Db[jc]=0;Rc=jc%sa;var Kd=~~(jc/sa);Hb=Math.max(Hb,Tc=Math.ceil(Gd.x2));Jb=Math.max(Jb,ub=Math.ceil(Gd.y2));bb[Rc]=Math.max(bb[Rc],Tc);mb[Kd]=Math.max(mb[Kd],ub);Ia[jc]=Gb+v(Gd.x1);zb[jc]=Wb+v(Gd.y1);Qa&&ma.dirty(Aa[jc])}for(jc=0;jc<xa;++jc)0===jc%sa&&(Ia[jc]=0),jc<sa&&(zb[jc]=0);if("each"===cb)for(Rc=1;Rc<sa;++Rc){Ea=0;
for(jc=Rc;jc<xa;jc+=sa)Ea<Ia[jc]&&(Ea=Ia[jc]);for(jc=Rc;jc<xa;jc+=sa)Ia[jc]=Ea+bb[Rc-1]}else if("all"===cb){for(jc=Ea=0;jc<xa;++jc)jc%sa&&Ea<Ia[jc]&&(Ea=Ia[jc]);for(jc=0;jc<xa;++jc)jc%sa&&(Ia[jc]=Ea+Hb)}else for(cb=!1,Rc=1;Rc<sa;++Rc)for(jc=Rc;jc<xa;jc+=sa)Ia[jc]+=bb[Rc-1];if("each"===Mb)for(Kd=1;Kd<ra;++Kd){Ea=0;jc=Kd*sa;for(Rc=jc+sa;jc<Rc;++jc)Ea<zb[jc]&&(Ea=zb[jc]);for(jc=Kd*sa;jc<Rc;++jc)zb[jc]=Ea+mb[Kd-1]}else if("all"===Mb){Ea=0;for(jc=sa;jc<xa;++jc)Ea<zb[jc]&&(Ea=zb[jc]);for(jc=sa;jc<xa;++jc)zb[jc]=
Ea+Jb}else for(Mb=!1,Kd=1;Kd<ra;++Kd)for(jc=Kd*sa,Rc=jc+sa;jc<Rc;++jc)zb[jc]+=mb[Kd-1];for(jc=Kd=0;jc<xa;++jc)Kd=Ia[jc]+(jc%sa?Kd:0),Eb[jc]+=Kd-Aa[jc].x;for(Rc=0;Rc<sa;++Rc)for(Ia=0,jc=Rc;jc<xa;jc+=sa)Ia+=zb[jc],Db[jc]+=Ia-Aa[jc].y;if(cb&&B(Da.center,"column")&&1<ra)for(jc=0;jc<xa;++jc)Gd="all"===cb?Hb:bb[jc%sa],Kd=Gd-bc[jc].x2-Aa[jc].x-Eb[jc],0<Kd&&(Eb[jc]+=Kd/2);if(Mb&&B(Da.center,"row")&&1!==sa)for(jc=0;jc<xa;++jc)Gd="all"===Mb?Jb:mb[~~(jc/sa)],Ia=Gd-bc[jc].y2-Aa[jc].y-Db[jc],0<Ia&&(Db[jc]+=Ia/
2);for(jc=0;jc<xa;++jc)kb.union(bc[jc].translate(Eb[jc],Db[jc]));Kd=B(Da.anchor,"x");Ia=B(Da.anchor,"y");switch(B(Da.anchor,"column")){case "end":Kd-=kb.width();break;case "middle":Kd-=kb.width()/2}switch(B(Da.anchor,"row")){case "end":Ia-=kb.height();break;case "middle":Ia-=kb.height()/2}Kd=Math.round(Kd);Ia=Math.round(Ia);kb.clear();for(jc=0;jc<xa;++jc)Aa[jc].mark.bounds.clear();for(jc=0;jc<xa;++jc)Rc=Aa[jc],Rc.x+=Eb[jc]+=Kd,Rc.y+=Db[jc]+=Ia,kb.union(Rc.mark.bounds.union(Rc.bounds.translate(Eb[jc],
Db[jc]))),Qa&&ma.dirty(Rc);return kb}function N(ma,Aa){return"x1"===Aa?ma.x||0:"y1"===Aa?ma.y||0:"x2"===Aa?(ma.x||0)+(ma.width||0):"y2"===Aa?(ma.y||0)+(ma.height||0):void 0}function A(ma,Aa){return ma.bounds[Aa]}function J(ma,Aa,Da,Qa,Ea,kb,cb,Mb,Gb,Wb,sa,ra,xa,Ia){var bb=Da.length,Hb=Qa=0,zb,mb;if(!bb)return Qa;for(zb=sa;zb<bb;zb+=ra)Da[zb]&&(Qa=cb(Qa,Gb(Da[zb],Wb)));if(!Aa.length)return Qa;Aa.length>Ea&&(ma.warn("Grid headers exceed limit: "+Ea),Aa=Aa.slice(0,Ea));Qa+=kb;Ea=0;for(kb=Aa.length;Ea<
kb;++Ea)ma.dirty(Aa[Ea]),Aa[Ea].mark.bounds.clear();zb=sa;Ea=0;for(kb=Aa.length;Ea<kb;++Ea,zb+=ra){Gb=Aa[Ea];sa=Gb.mark.bounds;for(bb=zb;0<=bb&&null==(mb=Da[bb]);bb-=xa);if(Mb){bb=null==Ia?mb.x:Math.round(mb.bounds.x1+Ia*mb.bounds.width());var Jb=Qa}else bb=Qa,Jb=null==Ia?mb.y:Math.round(mb.bounds.y1+Ia*mb.bounds.height());sa.union(Gb.bounds.translate(bb-(Gb.x||0),Jb-(Gb.y||0)));Gb.x=bb;Gb.y=Jb;ma.dirty(Gb);Hb=cb(Hb,sa[Wb])}return Hb}function T(ma,Aa,Da,Qa,Ea,kb){if(Aa){ma.dirty(Aa);var cb=Da;Qa?
cb=Math.round(Ea.x1+kb*Ea.width()):Da=Math.round(Ea.y1+kb*Ea.height());Aa.bounds.translate(cb-(Aa.x||0),Da-(Aa.y||0));Aa.mark.bounds.clear().union(Aa.bounds);Aa.x=cb;Aa.y=Da;ma.dirty(Aa)}}function z(ma,Aa){const Da=ma[Aa]||{};return(Qa,Ea)=>null!=Da[Qa]?Da[Qa]:null!=ma[Qa]?ma[Qa]:Ea}function ba(ma,Aa){let Da=-Infinity;ma.forEach(Qa=>{null!=Qa.offset&&(Da=Math.max(Da,Qa.offset))});return-Infinity<Da?Da:Aa}function K(ma,Aa,Da,Qa,Ea,kb,cb){const Mb=z(Da,Aa);Da=ba(ma,Mb("offset",0));const Gb=Mb("anchor",
"start"),Wb="end"===Gb?1:"middle"===Gb?.5:0;ma={align:"each",bounds:Mb("bounds","flush"),columns:"vertical"===Mb("direction")?1:ma.length,padding:Mb("margin",8),center:Mb("center"),nodirty:!0};switch(Aa){case "left":ma.anchor={x:Math.floor(Qa.x1)-Da,column:"end",y:Wb*(cb||Qa.height()+2*Qa.y1),row:Gb};break;case "right":ma.anchor={x:Math.ceil(Qa.x2)+Da,y:Wb*(cb||Qa.height()+2*Qa.y1),row:Gb};break;case "top":ma.anchor={y:Math.floor(Ea.y1)-Da,row:"end",x:Wb*(kb||Ea.width()+2*Ea.x1),column:Gb};break;
case "bottom":ma.anchor={y:Math.ceil(Ea.y2)+Da,x:Wb*(kb||Ea.width()+2*Ea.x1),column:Gb};break;case "top-left":ma.anchor={x:Da,y:Da};break;case "top-right":ma.anchor={x:kb-Da,y:Da,column:"end"};break;case "bottom-left":ma.anchor={x:Da,y:cb-Da,row:"end"};break;case "bottom-right":ma.anchor={x:kb-Da,y:cb-Da,column:"end",row:"end"}}return ma}function r(ma,Aa){Aa=Aa.items[0];var Da=Aa.datum,Qa=Aa.orient,Ea=Aa.bounds,kb=Aa.x,cb=Aa.y;Aa._bounds?Aa._bounds.clear().union(Ea):Aa._bounds=Ea.clone();Ea.clear();
var Mb=Aa.items[0].items[0];var Gb=Aa.padding,Wb=Gb-Mb.x,sa=Gb-Mb.y;if(Aa.datum.title){var ra=Aa.items[1].items[0],xa=ra.anchor,Ia=Aa.titlePadding||0,bb=Gb-ra.x,Hb=Gb-ra.y;switch(ra.orient){case "left":Wb+=Math.ceil(ra.bounds.width())+Ia;break;case "right":case "bottom":break;default:sa+=ra.bounds.height()+Ia}(Wb||sa)&&E(ma,Mb,Wb,sa);switch(ra.orient){case "left":Hb+=Z(Aa,Mb,ra,xa,1,1);break;case "right":bb+=Z(Aa,Mb,ra,"end",0,0)+Ia;Hb+=Z(Aa,Mb,ra,xa,1,1);break;case "bottom":bb+=Z(Aa,Mb,ra,xa,0,0);
Hb+=Z(Aa,Mb,ra,"end",-1,0,1)+Ia;break;default:bb+=Z(Aa,Mb,ra,xa,0,0)}(bb||Hb)&&E(ma,ra,bb,Hb);0>(bb=Math.round(ra.bounds.x1-Gb))&&(E(ma,Mb,-bb,0),E(ma,ra,-bb,0))}else(Wb||sa)&&E(ma,Mb,Wb,sa);Ea=Y(Aa,Ea);ma=2*Aa.padding;Mb=2*Aa.padding;Ea.empty()||(ma=Math.ceil(Ea.width()+ma),Mb=Math.ceil(Ea.height()+Mb));"symbol"===Da.type&&C(Aa.items[0].items[0].items[0].items);"none"!==Qa&&(Aa.x=kb=0,Aa.y=cb=0);Aa.width=ma;Aa.height=Mb;h.boundStroke(Ea.set(kb,cb,kb+ma,cb+Mb),Aa);Aa.mark.bounds.clear().union(Ea);
return Aa}function Y(ma,Aa){ma.items.forEach(Da=>Aa.union(Da.bounds));Aa.x1=ma.padding;Aa.y1=ma.padding;return Aa}function Z(ma,Aa,Da,Qa,Ea,kb,cb){const Mb=Da.datum.vgrad;ma=("symbol"===ma.datum.type||!kb&&Mb||cb?Aa:Aa.items[0]).bounds[Ea?"y2":"x2"]-ma.padding;Aa=Mb&&kb?ma:0;kb=Mb&&kb?0:ma;Da=0>=Ea?0:h.multiLineOffset(Da);return Math.round("start"===Qa?Aa:"end"===Qa?kb-Da:.5*(ma-Da))}function E(ma,Aa,Da,Qa){Aa.x+=Da;Aa.y+=Qa;Aa.bounds.translate(Da,Qa);Aa.mark.bounds.translate(Da,Qa);ma.dirty(Aa)}
function C(ma){const Aa=ma.reduce((Da,Qa)=>{Da[Qa.column]=Math.max(Qa.bounds.x2-Qa.x,Da[Qa.column]||0);return Da},{});ma.forEach(Da=>{Da.width=Aa[Da.column];Da.height=Da.bounds.y2-Da.y})}function W(ma,Aa,Da,Qa,Ea){var kb=Aa.items[0],cb=kb.orient,Mb=kb.anchor,Gb=kb.offset,Wb=kb.padding,sa=kb.items[0].items[0],ra=kb.items[1]&&kb.items[1].items[0],xa="left"===cb||"right"===cb?Qa:Da,Ia=0,bb=Da=0;"group"!==kb.frame?"left"===cb?(Ia=Ea.y2,xa=Ea.y1):"right"===cb?(Ia=Ea.y1,xa=Ea.y2):(Ia=Ea.x1,xa=Ea.x2):"left"===
cb&&(Ia=Qa,xa=0);Qa="start"===Mb?Ia:"end"===Mb?xa:(Ia+xa)/2;if(ra&&ra.text){switch(cb){case "top":case "bottom":bb=sa.bounds.height()+Wb;break;case "left":Da=sa.bounds.width()+Wb;break;case "right":Da=-sa.bounds.width()-Wb}La.clear().union(ra.bounds);La.translate(Da-(ra.x||0),bb-(ra.y||0));F(ra,"x",Da)|F(ra,"y",bb)&&(ma.dirty(ra),ra.bounds.clear().union(La),ra.mark.bounds.clear().union(La),ma.dirty(ra));La.clear().union(ra.bounds)}else La.clear();La.union(sa.bounds);switch(cb){case "top":cb=Qa;Ea=
Ea.y1-La.height()-Gb;break;case "left":cb=Ea.x1-La.width()-Gb;Ea=Qa;break;case "right":cb=Ea.x2+La.width()+Gb;Ea=Qa;break;case "bottom":cb=Qa;Ea=Ea.y2+Gb;break;default:cb=kb.x,Ea=kb.y}F(kb,"x",cb)|F(kb,"y",Ea)&&(La.translate(cb,Ea),ma.dirty(kb),kb.bounds.clear().union(La),Aa.bounds.clear().union(La),ma.dirty(kb));return kb.bounds}function fa(ma){f.Transform.call(this,null,ma)}function ja(ma){return ma&&"legend-entry"!==ma.mark.role}function Ba(ma,Aa,Da){var Qa=Aa.items,Ea=Math.max(0,Aa.width||0),
kb=Math.max(0,Aa.height||0),cb=(new h.Bounds).set(0,0,Ea,kb),Mb=cb.clone(),Gb=cb.clone(),Wb=[],sa,ra;var xa=0;for(ra=Qa.length;xa<ra;++xa){var Ia=Qa[xa];switch(Ia.role){case "axis":var bb=t(Ia)?Mb:Gb;bb.union(w(ma,Ia,Ea,kb));break;case "title":var Hb=Ia;break;case "legend":Wb.push(r(ma,Ia));break;case "frame":case "scope":case "row-header":case "row-footer":case "row-title":case "column-header":case "column-footer":case "column-title":Mb.union(Ia.bounds);Gb.union(Ia.bounds);break;default:cb.union(Ia.bounds)}}if(Wb.length){const zb=
{};Wb.forEach(mb=>{sa=mb.orient||"right";"none"!==sa&&(zb[sa]||(zb[sa]=[])).push(mb)});for(const mb in zb)Qa=zb[mb],O(ma,Qa,K(Qa,mb,Da.legends,Mb,Gb,Ea,kb));Wb.forEach(mb=>{const Jb=mb.bounds;Jb.equals(mb._bounds)||(mb.bounds=mb._bounds,ma.dirty(mb),mb.bounds=Jb,ma.dirty(mb));if(Da.autosize&&"fit"===Da.autosize.type)switch(mb.orient){case "left":case "right":cb.add(Jb.x1,0).add(Jb.x2,0);break;case "top":case "bottom":cb.add(0,Jb.y1).add(0,Jb.y2)}else cb.union(Jb)})}cb.union(Mb).union(Gb);Hb&&cb.union(W(ma,
Hb,Ea,kb,cb));Aa.clip&&cb.set(0,0,Aa.width||0,Aa.height||0);Ga(ma,Aa,cb,Da)}function Ga(ma,Aa,Da,Qa){Qa=Qa.autosize||{};const Ea=Qa.type;if(!(1>ma._autosize)&&Ea){var kb=ma._width,cb=ma._height,Mb=Math.max(0,Aa.width||0),Gb=Math.max(0,Math.ceil(-Da.x1));Aa=Math.max(0,Aa.height||0);var Wb=Math.max(0,Math.ceil(-Da.y1)),sa=Math.max(0,Math.ceil(Da.x2-Mb));Da=Math.max(0,Math.ceil(Da.y2-Aa));if("padding"===Qa.contains){const ra=ma.padding();kb-=ra.left+ra.right;cb-=ra.top+ra.bottom}"none"===Ea?(Wb=Gb=0,
Mb=kb,Aa=cb):"fit"===Ea?(Mb=Math.max(0,kb-Gb-sa),Aa=Math.max(0,cb-Wb-Da)):"fit-x"===Ea?(Mb=Math.max(0,kb-Gb-sa),cb=Aa+Wb+Da):"fit-y"===Ea?(kb=Mb+Gb+sa,Aa=Math.max(0,cb-Wb-Da)):"pad"===Ea&&(kb=Mb+Gb+sa,cb=Aa+Wb+Da);ma._resizeView(kb,cb,Mb,Aa,[Gb,Wb],Qa.resize)}}l.inherits(u,f.Transform,{transform(ma,Aa){const Da=Aa.dataflow,Qa=ma.mark,Ea=Qa.marktype,kb=h.Marks[Ea],cb=kb.bound;let Mb=Qa.bounds,Gb;if(kb.nested)Qa.items.length&&Da.dirty(Qa.items[0]),Mb=q(Qa,cb),Qa.items.forEach(Wb=>{Wb.bounds.clear().union(Mb)});
else if("group"===Ea||ma.modified())switch(Aa.visit(Aa.MOD,Wb=>Da.dirty(Wb)),Mb.clear(),Qa.items.forEach(Wb=>Mb.union(q(Wb,cb))),Qa.role){case "axis":case "legend":case "title":Aa.reflow()}else Gb=Aa.changed(Aa.REM),Aa.visit(Aa.ADD,Wb=>{Mb.union(q(Wb,cb))}),Aa.visit(Aa.MOD,Wb=>{Gb=Gb||Mb.alignsWith(Wb.bounds);Da.dirty(Wb);Mb.union(q(Wb,cb))}),Gb&&(Mb.clear(),Qa.items.forEach(Wb=>Mb.union(Wb.bounds)));h.boundClip(Qa);return Aa.modifies("bounds")}});D.Definition={type:"Identifier",metadata:{modifies:!0},
params:[{name:"as",type:"string",required:!0}]};l.inherits(D,f.Transform,{transform(ma,Aa){const Da=U(Aa.dataflow),Qa=ma.as;let Ea=Da.value;Aa.visit(Aa.ADD,kb=>kb[Qa]=kb[Qa]||++Ea);Da.set(this.value=Ea);return Aa}});l.inherits(aa,f.Transform,{transform(ma,Aa){let Da=this.value;Da||(Da=Aa.dataflow.scenegraph().mark(ma.markdef,X(ma),ma.index),Da.group.context=ma.context,ma.context.group||(ma.context.group=Da.group),Da.source=this.source,Da.clip=ma.clip,Da.interactive=ma.interactive,this.value=Da);const Qa=
"group"===Da.marktype?h.GroupItem:h.Item;Aa.visit(Aa.ADD,Ea=>Qa.call(Ea,Da));if(ma.modified("clip")||ma.modified("interactive"))Da.clip=ma.clip,Da.interactive=!!ma.interactive,Da.zdirty=!0,Aa.reflow();Da.items=Aa.source;return Aa}});const ua={parity:ma=>ma.filter((Aa,Da)=>Da%2?Aa.opacity=0:1),greedy:(ma,Aa)=>{let Da;return ma.filter((Qa,Ea)=>Ea&&Fa(Da.bounds,Qa.bounds,Aa)?Qa.opacity=0:(Da=Qa,1))}},Fa=(ma,Aa,Da)=>Da>Math.max(Aa.x1-ma.x2,ma.x1-Aa.x2,Aa.y1-ma.y2,ma.y1-Aa.y2),Xa=(ma,Aa)=>{for(var Da=
1,Qa=ma.length,Ea=ma[0].bounds;Da<Qa;++Da)if(Fa(Ea,Ea=ma[Da].bounds,Aa))return!0},Sa=ma=>{ma=ma.bounds;return 1<ma.width()&&1<ma.height()},eb=(ma,Aa,Da)=>{ma=ma.range();var Qa=new h.Bounds;"top"===Aa||"bottom"===Aa?Qa.set(ma[0],-Infinity,ma[1],Infinity):Qa.set(-Infinity,ma[0],Infinity,ma[1]);Qa.expand(Da||1);return Ea=>Qa.encloses(Ea.bounds)},Va=ma=>{ma.forEach(Aa=>Aa.opacity=1);return ma};l.inherits(S,f.Transform,{transform(ma,Aa){const Da=ua[ma.method]||ua.parity,Qa=ma.separation||0;let Ea=Aa.materialize(Aa.SOURCE).source,
kb,cb;if(Ea&&Ea.length){if(!ma.method)return ma.modified("method")&&(Va(Ea),Aa=Aa.reflow(ma.modified()).modifies("opacity")),Aa;Ea=Ea.filter(Sa);if(Ea.length){ma.sort&&(Ea=Ea.slice().sort(ma.sort));kb=Va(Ea);Aa=Aa.reflow(ma.modified()).modifies("opacity");if(3<=kb.length&&Xa(kb,Qa)){do kb=Da(kb,Qa);while(3<=kb.length&&Xa(kb,Qa));3>kb.length&&!l.peek(Ea).opacity&&(1<kb.length&&(l.peek(kb).opacity=0),l.peek(Ea).opacity=1)}ma.boundScale&&0<=ma.boundTolerance&&(cb=eb(ma.boundScale,ma.boundOrient,+ma.boundTolerance),
Ea.forEach(Gb=>{cb(Gb)||(Gb.opacity=0)}));var Mb=kb[0].mark.bounds.clear();Ea.forEach(Gb=>{Gb.opacity&&Mb.union(Gb.bounds)});return Aa}}}});l.inherits(V,f.Transform,{transform(ma,Aa){const Da=Aa.dataflow;Aa.visit(Aa.ALL,Qa=>Da.dirty(Qa));Aa.fields&&Aa.fields.zindex&&(ma=Aa.source&&Aa.source[0])&&(ma.mark.zdirty=!0)}});const La=new h.Bounds,Ra=(ma,Aa)=>Math.floor(Math.min(ma,Aa)),la=(ma,Aa)=>Math.ceil(Math.max(ma,Aa));l.inherits(fa,f.Transform,{transform(ma,Aa){const Da=Aa.dataflow;ma.mark.items.forEach(Qa=>
{if(ma.layout){var Ea=ma.layout;var kb=Qa.items;for(var cb=kb.length,Mb=0,Gb,Wb,sa={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};Mb<cb;++Mb)if(Gb=kb[Mb],Wb=Gb.items,"group"===Gb.marktype)switch(Gb.role){case "axis":case "legend":case "title":break;case "row-header":sa.rowheaders.push(...Wb);break;case "row-footer":sa.rowfooters.push(...Wb);break;case "column-header":sa.colheaders.push(...Wb);break;case "column-footer":sa.colfooters.push(...Wb);break;
case "row-title":sa.rowtitle=Wb[0];break;case "column-title":sa.coltitle=Wb[0];break;default:sa.marks.push(...Wb)}kb=sa;Wb=kb.marks;sa="flush"===Ea.bounds?N:A;cb=Ea.offset;var ra=Ea.columns||Wb.length,xa=0>=ra?1:Math.ceil(Wb.length/ra),Ia=xa*ra;Mb=O(Da,Wb,Ea);Mb.empty()&&Mb.set(0,0,0,0);if(kb.rowheaders){Gb=B(Ea.headerBand,"row",null);var bb=J(Da,kb.rowheaders,Wb,ra,xa,-B(cb,"rowHeader"),Ra,0,sa,"x1",0,ra,1,Gb)}if(kb.colheaders){Gb=B(Ea.headerBand,"column",null);var Hb=J(Da,kb.colheaders,Wb,ra,ra,
-B(cb,"columnHeader"),Ra,1,sa,"y1",0,1,ra,Gb)}if(kb.rowfooters){Gb=B(Ea.footerBand,"row",null);var zb=J(Da,kb.rowfooters,Wb,ra,xa,B(cb,"rowFooter"),la,0,sa,"x2",ra-1,ra,1,Gb)}if(kb.colfooters){Gb=B(Ea.footerBand,"column",null);var mb=J(Da,kb.colfooters,Wb,ra,ra,B(cb,"columnFooter"),la,1,sa,"y2",Ia-ra,1,ra,Gb)}kb.rowtitle&&(Gb=B(Ea.titleAnchor,"row"),Wb=B(cb,"rowTitle"),Wb="end"===Gb?zb+Wb:bb-Wb,Gb=B(Ea.titleBand,"row",.5),T(Da,kb.rowtitle,Wb,0,Mb,Gb));kb.coltitle&&(Gb=B(Ea.titleAnchor,"column"),Wb=
B(cb,"columnTitle"),Wb="end"===Gb?mb+Wb:Hb-Wb,Gb=B(Ea.titleBand,"column",.5),T(Da,kb.coltitle,Wb,1,Mb,Gb))}Ba(Da,Qa,ma)});return ja(ma.mark.group)?Aa.reflow():Aa}});k.bound=u;k.identifier=D;k.mark=aa;k.overlap=S;k.render=V;k.viewlayout=fa;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[529]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(517),da(526),da(503),da(506),da(524)):"function"===typeof define&&define.amd?define("exports vega-dataflow vega-scale vega-util d3-array d3-interpolate".split(" "),f):(k="undefined"!==typeof globalThis?globalThis:k||self,f(k.vega={},k.vega,k.vega,k.vega,k.d3,k.d3))})(this,function(k,f,h,l,u,q){function D(ja){f.Transform.call(this,null,ja)}function U(ja){f.Transform.call(this,null,ja)}function aa(){return f.ingest({})}
function X(ja){const Ba=l.fastmap().test(Ga=>Ga.exit);Ba.lookup=Ga=>Ba.get(ja(Ga));return Ba}function S(ja){f.Transform.call(this,null,ja)}function V(ja){f.Transform.call(this,[],ja)}function F(ja){f.Transform.call(this,{},ja)}function t(ja){f.Transform.call(this,null,ja)}function w(ja){return h.isContinuous(ja)&&ja!==h.Sequential}function x(ja){f.Transform.call(this,null,ja);this.modified(!0)}function I(ja,Ba,Ga){h.isLogarithmic(ja)&&Math.abs(Ba.reduce((ua,Fa)=>ua+(0>Fa?-1:0<Fa?1:0),0))!==Ba.length&&
Ga.warn("Log scale domain includes zero: "+l.stringValue(Ba));return Ba}function R(ja,Ba,Ga){return l.isFunction(ja)&&(Ba||Ga)?h.interpolateRange(ja,B(Ba||[0,1],Ga)):ja}function B(ja,Ba){return Ba?ja.slice().reverse():ja}function v(ja){f.Transform.call(this,null,ja)}function O(ja){f.Transform.call(this,null,ja)}function N(ja,Ba,Ga,ua,Fa){Ba=(Ba-ja.sum)/2;for(var Xa=ja.length,Sa=0,eb;Sa<Xa;++Sa)eb=ja[Sa],eb[ua]=Ba,eb[Fa]=Ba+=Math.abs(Ga(eb))}function A(ja,Ba,Ga,ua,Fa){Ba=1/ja.sum;for(var Xa=0,Sa=ja.length,
eb=0,Va=0,La;eb<Sa;++eb)La=ja[eb],La[ua]=Xa,La[Fa]=Xa=Ba*(Va+=Math.abs(Ga(La)))}function J(ja,Ba,Ga,ua,Fa){for(var Xa=Ba=0,Sa=ja.length,eb=0,Va,La;eb<Sa;++eb)La=ja[eb],Va=+Ga(La),0>Va?(La[ua]=Xa,La[Fa]=Xa+=Va):(La[ua]=Ba,La[Fa]=Ba+=Va)}function T(ja,Ba,Ga,ua){var Fa=[],Xa=ma=>ma(La),Sa;if(null==Ba)Fa.push(ja.slice());else{var eb={};var Va=0;for(Sa=ja.length;Va<Sa;++Va){var La=ja[Va];var Ra=Ba.map(Xa);var la=eb[Ra];la||(eb[Ra]=la=[],Fa.push(la));la.push(La)}}Xa=Ra=0;for(ja=Fa.length;Ra<ja;++Ra){la=
Fa[Ra];Ba=Va=0;for(Sa=la.length;Va<Sa;++Va)Ba+=Math.abs(ua(la[Va]));la.sum=Ba;Ba>Xa&&(Xa=Ba);Ga&&la.sort(Ga)}Fa.max=Xa;return Fa}l.inherits(D,f.Transform,{transform(ja,Ba){if(this.value&&!ja.modified())return Ba.StopPropagation;var Ga=Ba.dataflow.locale();Ba=Ba.fork(Ba.NO_SOURCE|Ba.NO_FIELDS);var ua=this.value,Fa=ja.scale,Xa=h.tickCount(Fa,null==ja.count?ja.values?ja.values.length:10:ja.count,ja.minstep),Sa=ja.format||h.tickFormat(Ga,Fa,Xa,ja.formatSpecifier,ja.formatType,!!ja.values),eb=ja.values?
h.validTicks(Fa,ja.values,Xa):h.tickValues(Fa,Xa);ua&&(Ba.rem=ua);ua=eb.map((Va,La)=>f.ingest({index:La/(eb.length-1||1),value:Va,label:Sa(Va)}));ja.extra&&ua.length&&ua.push(f.ingest({index:-1,extra:{value:ua[0].value},label:""}));Ba.source=ua;this.value=Ba.add=ua;return Ba}});l.inherits(U,f.Transform,{transform(ja,Ba){var Ga=Ba.dataflow,ua=Ba.fork(Ba.NO_SOURCE|Ba.NO_FIELDS),Fa=ja.item||aa,Xa=ja.key||f.tupleid,Sa=this.value;l.isArray(ua.encode)&&(ua.encode=null);Sa&&(ja.modified("key")||Ba.modified(Xa))&&
l.error("DataJoin does not support modified key function or fields.");Sa||(Ba=Ba.addAll(),this.value=Sa=X(Xa));Ba.visit(Ba.ADD,eb=>{const Va=Xa(eb);let La=Sa.get(Va);La?La.exit?(Sa.empty--,ua.add.push(La)):ua.mod.push(La):(La=Fa(eb),Sa.set(Va,La),ua.add.push(La));La.datum=eb;La.exit=!1});Ba.visit(Ba.MOD,eb=>{var Va=Xa(eb);if(Va=Sa.get(Va))Va.datum=eb,ua.mod.push(Va)});Ba.visit(Ba.REM,eb=>{var Va=Xa(eb);Va=Sa.get(Va);eb!==Va.datum||Va.exit||(ua.rem.push(Va),Va.exit=!0,++Sa.empty)});Ba.changed(Ba.ADD_MOD)&&
ua.modifies("datum");(Ba.clean()||ja.clean&&Sa.empty>Ga.cleanThreshold)&&Ga.runAfter(Sa.clean);return ua}});l.inherits(S,f.Transform,{transform(ja,Ba){var Ga=Ba.fork(Ba.ADD_REM),ua=ja.mod||!1,Fa=ja.encoders,Xa=Ba.encode;if(l.isArray(Xa))if(Ga.changed()||Xa.every(la=>Fa[la]))Xa=Xa[0],Ga.encode=null;else return Ba.StopPropagation;var Sa="enter"===Xa,eb=Fa.update||l.falsy,Va=Fa.enter||l.falsy,La=Fa.exit||l.falsy,Ra=(Xa&&!Sa?Fa[Xa]:eb)||l.falsy;Ba.changed(Ba.ADD)&&(Ba.visit(Ba.ADD,la=>{Va(la,ja);eb(la,
ja)}),Ga.modifies(Va.output),Ga.modifies(eb.output),Ra!==l.falsy&&Ra!==eb&&(Ba.visit(Ba.ADD,la=>{Ra(la,ja)}),Ga.modifies(Ra.output)));Ba.changed(Ba.REM)&&La!==l.falsy&&(Ba.visit(Ba.REM,la=>{La(la,ja)}),Ga.modifies(La.output));if(Sa||Ra!==l.falsy)Xa=Ba.MOD|(ja.modified()?Ba.REFLOW:0),Sa?(Ba.visit(Xa,la=>{const ma=Va(la,ja)||ua;(Ra(la,ja)||ma)&&Ga.mod.push(la)}),Ga.mod.length&&Ga.modifies(Va.output)):Ba.visit(Xa,la=>{(Ra(la,ja)||ua)&&Ga.mod.push(la)}),Ga.mod.length&&Ga.modifies(Ra.output);return Ga.changed()?
Ga:Ba.StopPropagation}});l.inherits(V,f.Transform,{transform(ja,Ba){if(null!=this.value&&!ja.modified())return Ba.StopPropagation;var Ga=Ba.dataflow.locale(),ua=Ba.fork(Ba.NO_SOURCE|Ba.NO_FIELDS),Fa=this.value,Xa=ja.type||h.SymbolLegend,Sa=ja.scale,eb=+ja.limit,Va=h.tickCount(Sa,null==ja.count?5:ja.count,ja.minstep),La=!!ja.values||Xa===h.SymbolLegend,Ra=ja.format||h.labelFormat(Ga,Sa,Va,Xa,ja.formatSpecifier,ja.formatType,La),la=ja.values||h.labelValues(Sa,Va),ma;Fa&&(ua.rem=Fa);if(Xa===h.SymbolLegend){if(eb&&
la.length>eb){Ba.dataflow.warn("Symbol legend count exceeds limit, filtering items.");Fa=la.slice(0,eb-1);var Aa=!0}else Fa=la;if(l.isFunction(ma=ja.size)){ja.values||0!==Sa(Fa[0])||(Fa=Fa.slice(1));var Da=Fa.reduce((Ea,kb)=>Math.max(Ea,ma(kb,ja)),0)}else ma=l.constant(Da=ma||8);Fa=Fa.map((Ea,kb)=>f.ingest({index:kb,label:Ra(Ea,kb,Fa),value:Ea,offset:Da,size:ma(Ea,ja)}));Aa&&(Aa=la[Fa.length],Fa.push(f.ingest({index:Fa.length,label:`\u2026${la.length-Fa.length} entries`,value:Aa,offset:Da,size:ma(Aa,
ja)})))}else if(Xa===h.GradientLegend){Ba=Sa.domain();var Qa=h.scaleFraction(Sa,Ba[0],l.peek(Ba));3>la.length&&!ja.values&&Ba[0]!==l.peek(Ba)&&(la=[Ba[0],l.peek(Ba)]);Fa=la.map((Ea,kb)=>f.ingest({index:kb,label:Ra(Ea,kb,la),value:Ea,perc:Qa(Ea)}))}else ma=la.length-1,Qa=h.labelFraction(Sa),Fa=la.map((Ea,kb)=>f.ingest({index:kb,label:Ra(Ea,kb,la),value:Ea,perc:kb?Qa(Ea):0,perc2:kb===ma?1:Qa(la[kb+1])}));ua.source=Fa;this.value=ua.add=Fa;return ua}});const z=ja=>ja.source.x,ba=ja=>ja.source.y,K=ja=>
ja.target.x,r=ja=>ja.target.y;F.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field","default":"source.x"},{name:"sourceY",type:"field","default":"source.y"},{name:"targetX",type:"field","default":"target.x"},{name:"targetY",type:"field","default":"target.y"},{name:"orient",type:"enum","default":"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum","default":"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},
{name:"as",type:"string","default":"path"}]};l.inherits(F,f.Transform,{transform(ja,Ba){var Ga=ja.sourceX||z,ua=ja.sourceY||ba,Fa=ja.targetX||K,Xa=ja.targetY||r,Sa=ja.as||"path",eb=ja.shape||"line",Va=C.get(eb+"-"+(ja.orient||"vertical"))||C.get(eb);Va||l.error("LinkPath unsupported type: "+ja.shape+(ja.orient?"-"+ja.orient:""));Ba.visit(Ba.SOURCE,La=>{La[Sa]=Va(Ga(La),ua(La),Fa(La),Xa(La))});return Ba.reflow(ja.modified()).modifies(Sa)}});const Y=(ja,Ba,Ga,ua)=>"M"+ja+","+Ba+"L"+Ga+","+ua,Z=(ja,
Ba,Ga,ua)=>{var Fa=Ga-ja,Xa=ua-Ba,Sa=Math.sqrt(Fa*Fa+Xa*Xa)/2;return"M"+ja+","+Ba+"A"+Sa+","+Sa+" "+180*Math.atan2(Xa,Fa)/Math.PI+" 0 1 "+Ga+","+ua},E=(ja,Ba,Ga,ua)=>{var Fa=Ga-ja;const Xa=ua-Ba,Sa=.2*(Fa+Xa);Fa=.2*(Xa-Fa);return"M"+ja+","+Ba+"C"+(ja+Sa)+","+(Ba+Fa)+" "+(Ga+Fa)+","+(ua-Sa)+" "+Ga+","+ua},C=l.fastmap({line:Y,"line-radial":(ja,Ba,Ga,ua)=>Y(Ba*Math.cos(ja),Ba*Math.sin(ja),ua*Math.cos(Ga),ua*Math.sin(Ga)),arc:Z,"arc-radial":(ja,Ba,Ga,ua)=>Z(Ba*Math.cos(ja),Ba*Math.sin(ja),ua*Math.cos(Ga),
ua*Math.sin(Ga)),curve:E,"curve-radial":(ja,Ba,Ga,ua)=>E(Ba*Math.cos(ja),Ba*Math.sin(ja),ua*Math.cos(Ga),ua*Math.sin(Ga)),"orthogonal-horizontal":(ja,Ba,Ga,ua)=>"M"+ja+","+Ba+"V"+ua+"H"+Ga,"orthogonal-vertical":(ja,Ba,Ga,ua)=>"M"+ja+","+Ba+"H"+Ga+"V"+ua,"orthogonal-radial":(ja,Ba,Ga,ua)=>{const Fa=Math.cos(Ga),Xa=Math.sin(Ga);return"M"+Ba*Math.cos(ja)+","+Ba*Math.sin(ja)+"A"+Ba+","+Ba+" 0 0,"+((Math.abs(Ga-ja)>Math.PI?Ga<=ja:Ga>ja)?1:0)+" "+Ba*Fa+","+Ba*Xa+"L"+ua*Fa+","+ua*Xa},"diagonal-horizontal":(ja,
Ba,Ga,ua)=>{const Fa=(ja+Ga)/2;return"M"+ja+","+Ba+"C"+Fa+","+Ba+" "+Fa+","+ua+" "+Ga+","+ua},"diagonal-vertical":(ja,Ba,Ga,ua)=>{const Fa=(Ba+ua)/2;return"M"+ja+","+Ba+"C"+ja+","+Fa+" "+Ga+","+Fa+" "+Ga+","+ua},"diagonal-radial":(ja,Ba,Ga,ua)=>{const Fa=Math.cos(ja);ja=Math.sin(ja);const Xa=Math.cos(Ga);Ga=Math.sin(Ga);const Sa=(Ba+ua)/2;return"M"+Ba*Fa+","+Ba*ja+"C"+Sa*Fa+","+Sa*ja+" "+Sa*Xa+","+Sa*Ga+" "+ua*Xa+","+ua*Ga}});t.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},
{name:"startAngle",type:"number","default":0},{name:"endAngle",type:"number","default":6.283185307179586},{name:"sort",type:"boolean","default":!1},{name:"as",type:"string",array:!0,length:2,"default":["startAngle","endAngle"]}]};l.inherits(t,f.Transform,{transform(ja,Ba){var Ga=ja.as||["startAngle","endAngle"],ua=Ga[0],Fa=Ga[1],Xa=ja.startAngle||0,Sa=null!=ja.endAngle?ja.endAngle:2*Math.PI,eb=Ba.source,Va=eb.map(ja.field||l.one),La=Va.length,Ra=Xa;Xa=(Sa-Xa)/u.sum(Va);Sa=u.range(La);var la;ja.sort&&
Sa.sort((Da,Qa)=>Va[Da]-Va[Qa]);for(la=0;la<La;++la){var ma=Va[Sa[la]];var Aa=eb[Sa[la]];Aa[ua]=Ra;Aa[Fa]=Ra+=ma*Xa}this.value=Va;return Ba.reflow(ja.modified()).modifies(Ga)}});const W=l.toSet("set modified clear type scheme schemeExtent schemeCount domain domainMin domainMid domainMax domainRaw domainImplicit nice zero bins range rangeStep round reverse interpolate interpolateGamma".split(" "));l.inherits(x,f.Transform,{transform(ja,Ba){var Ga=Ba.dataflow,ua=this.value;var Fa=ja.type;var Xa="";
if(Fa===h.Sequential)Fa=h.Sequential+"-"+h.Linear;else{var Sa=ja.type;h.isContinuous(Sa)&&Sa!==h.Time&&Sa!==h.UTC&&(ja.scheme||ja.range&&ja.range.length&&ja.range.every(l.isString))&&(Xa=ja.rawDomain?ja.rawDomain.length:ja.domain?ja.domain.length+ +(null!=ja.domainMid):0,Xa=2===Xa?h.Sequential+"-":3===Xa?h.Diverging+"-":"");Fa=(Xa+Fa||h.Linear).toLowerCase()}ua&&Fa===ua.type||(this.value=ua=h.scale(Fa)());for(Fa in ja)W[Fa]||"padding"===Fa&&w(ua.type)||(l.isFunction(ua[Fa])?ua[Fa](ja[Fa]):Ga.warn("Unsupported scale property: "+
Fa));Xa=Fa=ua;(Sa=ja.domainRaw)?(ua.domain(I(ua.type,Sa,Ga)),Sa=Sa.length):Sa=-1;if(-1<Sa)Ga=Sa;else{var eb=ja.domain;Sa=ua.type;var Va;!(Va=ja.zero)&&(Va=void 0===ja.zero)&&(Va=ua.type,Va=!ua.bins&&(Va===h.Linear||Va===h.Pow||Va===h.Sqrt));if(eb){if(w(Sa)&&ja.padding&&eb[0]!==l.peek(eb)){var La=ja.range,Ra=ja.padding;var la=ja.exponent;var ma=ja.constant;La=Math.abs(l.peek(La)-La[0]);Ra=La/(La-2*Ra);la=Sa===h.Log?l.zoomLog(eb,null,Ra):Sa===h.Sqrt?l.zoomPow(eb,null,Ra,.5):Sa===h.Pow?l.zoomPow(eb,
null,Ra,la||1):Sa===h.Symlog?l.zoomSymlog(eb,null,Ra,ma||1):l.zoomLinear(eb,null,Ra);eb=eb.slice();eb[0]=la[0];eb[eb.length-1]=la[1]}if(Va||null!=ja.domainMin||null!=ja.domainMax||null!=ja.domainMid)la=(eb=eb.slice()).length-1||1,Va&&(0<eb[0]&&(eb[0]=0),0>eb[la]&&(eb[la]=0)),null!=ja.domainMin&&(eb[0]=ja.domainMin),null!=ja.domainMax&&(eb[la]=ja.domainMax),null!=ja.domainMid&&(Va=ja.domainMid,ma=Va>eb[la]?la+1:Va<eb[0]?0:la,ma!==la&&Ga.warn("Scale domainMid exceeds domain min or max.",Va),eb.splice(ma,
0,Va));ua.domain(I(Sa,eb,Ga));Sa===h.Ordinal&&ua.unknown(ja.domainImplicit?h.scaleImplicit:void 0);ja.nice&&ua.nice&&ua.nice(!0!==ja.nice&&h.tickCount(ua,ja.nice)||null);Ga=eb.length}else Ga=0}(Sa=ja.bins)&&!l.isArray(Sa)&&(Va=Xa.domain(),ua=Va[0],Va=l.peek(Va),eb=Sa.step,la=null==Sa.start?ua:Sa.start,Sa=null==Sa.stop?Va:Sa.stop,eb||l.error("Scale bins parameter missing step property."),la<ua&&(la=eb*Math.ceil(ua/eb)),Sa>Va&&(Sa=eb*Math.floor(Va/eb)),Sa=u.range(la,Sa+eb/2,eb));Sa?Xa.bins=Sa:Xa.bins&&
delete Xa.bins;Xa.type===h.BinOrdinal&&(Sa?ja.domain||ja.domainRaw||(Xa.domain(Sa),Ga=Sa.length):Xa.bins=Xa.domain());ua=Ga;a:{Xa=Fa.type;Ga=ja.round||!1;Sa=ja.range;if(null!=ja.rangeStep)Xa!==h.Band&&Xa!==h.Point&&l.error("Only band and point scales support rangeStep."),Sa=[0,ja.rangeStep*h.bandSpace(ua,Xa===h.Point?1:(null!=ja.paddingInner?ja.paddingInner:ja.padding)||0,(null!=ja.paddingOuter?ja.paddingOuter:ja.padding)||0)];else if(ja.scheme&&(Sa=ja.schemeExtent,l.isArray(ja.scheme)?Va=h.interpolateColors(ja.scheme,
ja.interpolate,ja.interpolateGamma):(Va=ja.scheme.toLowerCase(),(Va=h.scheme(Va))||l.error(`Unrecognized scheme name: ${ja.scheme}`)),ua=Xa===h.Threshold?ua+1:Xa===h.BinOrdinal?ua-1:Xa===h.Quantile||Xa===h.Quantize?+ja.schemeCount||5:ua,Sa=h.isInterpolating(Xa)?R(Va,Sa,ja.reverse):l.isFunction(Va)?h.quantizeInterpolator(R(Va,Sa),ua):Xa===h.Ordinal?Va:Va.slice(0,ua),l.isFunction(Sa)))if(Fa.interpolator){Fa.interpolator(Sa);break a}else l.error(`Scale type ${Xa} does not support interpolating color schemes.`);
Sa&&h.isInterpolating(Xa)?Fa.interpolator(h.interpolateColors(B(Sa,ja.reverse),ja.interpolate,ja.interpolateGamma)):(Sa&&ja.interpolate&&Fa.interpolate?Fa.interpolate(h.interpolate(ja.interpolate,ja.interpolateGamma)):l.isFunction(Fa.round)?Fa.round(Ga):l.isFunction(Fa.rangeRound)&&Fa.interpolate(Ga?q.interpolateRound:q.interpolate),Sa&&Fa.range(B(Sa,ja.reverse)))}return Ba.fork(Ba.NO_SOURCE|Ba.NO_FIELDS)}});l.inherits(v,f.Transform,{transform(ja,Ba){const Ga=ja.modified("sort")||Ba.changed(Ba.ADD)||
Ba.modified(ja.sort.fields)||Ba.modified("datum");Ga&&Ba.source.sort(f.stableCompare(ja.sort));this.modified(Ga);return Ba}});const fa=["y0","y1"];O.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum","default":"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,"default":fa}]};l.inherits(O,f.Transform,{transform(ja,Ba){var Ga=ja.as||fa,
ua=Ga[0],Fa=Ga[1],Xa=f.stableCompare(ja.sort),Sa=ja.field||l.one,eb="center"===ja.offset?N:"normalize"===ja.offset?A:J,Va;Xa=T(Ba.source,ja.groupby,Xa,Sa);var La=0;var Ra=Xa.length;for(Va=Xa.max;La<Ra;++La)eb(Xa[La],Va,Sa,ua,Fa);return Ba.reflow(ja.modified()).modifies(Ga)}});k.axisticks=D;k.datajoin=U;k.encode=S;k.legendentries=V;k.linkpath=F;k.pie=t;k.scale=x;k.sortitems=v;k.stack=O;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[530]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(506)):"function"===typeof define&&define.amd?define(["exports","d3-array"],f):(k=k||self,f(k.d3=k.d3||{},k.d3))})(this,function(k,f){function h(Ob){return 1<Ob?0:-1>Ob?Tf:Math.acos(Ob)}function l(Ob){return 1<Ob?sg:-1>Ob?-sg:Math.asin(Ob)}function u(Ob){return(Ob=jf(Ob/2))*Ob}function q(){}function D(Ob,gc){if(Ob&&Zg.hasOwnProperty(Ob.type))Zg[Ob.type](Ob,gc)}function U(Ob,gc,Ac){var Uc=
-1;Ac=Ob.length-Ac;for(gc.lineStart();++Uc<Ac;){var y=Ob[Uc];gc.point(y[0],y[1],y[2])}gc.lineEnd()}function aa(Ob,gc){var Ac=-1,Uc=Ob.length;for(gc.polygonStart();++Ac<Uc;)U(Ob[Ac],gc,1);gc.polygonEnd()}function X(Ob,gc){if(Ob&&dh.hasOwnProperty(Ob.type))dh[Ob.type](Ob,gc);else D(Ob,gc)}function S(){Ya.point=F}function V(){t(Kf,he)}function F(Ob,gc){Ya.point=t;Kf=Ob;he=gc;Ob*=m;gc*=m;Ue=Ob;Pf=Id(gc=gc/2+zc);Ig=jf(gc)}function t(Ob,gc){Ob*=m;gc*=m;gc=gc/2+zc;var Ac=Ob-Ue,Uc=0<=Ac?1:-1,y=Uc*Ac;Ac=Id(gc);
gc=jf(gc);var wa=Ig*gc,fb=Pf*Ac+wa*Id(y);Uc=wa*Uc*jf(y);Yf.add(Xc(Uc,fb));Ue=Ob;Pf=Ac;Ig=gc}function w(Ob){return[Xc(Ob[1],Ob[0]),l(Ob[2])]}function x(Ob){var gc=Ob[0];Ob=Ob[1];var Ac=Id(Ob);return[Ac*Id(gc),Ac*jf(gc),jf(Ob)]}function I(Ob,gc){return Ob[0]*gc[0]+Ob[1]*gc[1]+Ob[2]*gc[2]}function R(Ob,gc){return[Ob[1]*gc[2]-Ob[2]*gc[1],Ob[2]*gc[0]-Ob[0]*gc[2],Ob[0]*gc[1]-Ob[1]*gc[0]]}function B(Ob,gc){Ob[0]+=gc[0];Ob[1]+=gc[1];Ob[2]+=gc[2]}function v(Ob,gc){return[Ob[0]*gc,Ob[1]*gc,Ob[2]*gc]}function O(Ob){var gc=
Xf(Ob[0]*Ob[0]+Ob[1]*Ob[1]+Ob[2]*Ob[2]);Ob[0]/=gc;Ob[1]/=gc;Ob[2]/=gc}function N(Ob,gc){vc.push(ed=[Cb=Ob,lc=Ob]);gc<fc&&(fc=gc);gc>rc&&(rc=gc)}function A(Ob,gc){var Ac=x([Ob*m,gc*m]);if(Nb){var Uc=R(Nb,Ac);Uc=R([Uc[1],-Uc[0],0],Uc);O(Uc);Uc=w(Uc);var y=Ob-Pc,wa=0<y?1:-1,fb=Uc[0]*Ha*wa;y=180<Na(y);y^(wa*Pc<fb&&fb<wa*Ob)?(Uc=Uc[1]*Ha,Uc>rc&&(rc=Uc)):(fb=(fb+360)%360-180,y^(wa*Pc<fb&&fb<wa*Ob))?(Uc=-Uc[1]*Ha,Uc<fc&&(fc=Uc)):(gc<fc&&(fc=gc),gc>rc&&(rc=gc));y?Ob<Pc?r(Cb,Ob)>r(Cb,lc)&&(lc=Ob):r(Ob,lc)>
r(Cb,lc)&&(Cb=Ob):lc>=Cb?(Ob<Cb&&(Cb=Ob),Ob>lc&&(lc=Ob)):Ob>Pc?r(Cb,Ob)>r(Cb,lc)&&(lc=Ob):r(Ob,lc)>r(Cb,lc)&&(Cb=Ob)}else vc.push(ed=[Cb=Ob,lc=Ob]);gc<fc&&(fc=gc);gc>rc&&(rc=gc);Nb=Ac;Pc=Ob}function J(){jb.point=A}function T(){ed[0]=Cb;ed[1]=lc;jb.point=N;Nb=null}function z(Ob,gc){if(Nb){var Ac=Ob-Pc;cc.add(180<Na(Ac)?Ac+(0<Ac?360:-360):Ac)}else $a=Ob,xb=gc;Ya.point(Ob,gc);A(Ob,gc)}function ba(){Ya.lineStart()}function K(){z($a,xb);Ya.lineEnd();1E-6<Na(cc)&&(Cb=-(lc=180));ed[0]=Cb;ed[1]=lc;Nb=null}
function r(Ob,gc){return 0>(gc-=Ob)?gc+360:gc}function Y(Ob,gc){return Ob[0]-gc[0]}function Z(Ob,gc){return Ob[0]<=Ob[1]?Ob[0]<=gc&&gc<=Ob[1]:gc<Ob[0]||Ob[1]<gc}function E(Ob,gc){Ob*=m;gc*=m;var Ac=Id(gc);C(Ac*Id(Ob),Ac*jf(Ob),jf(gc))}function C(Ob,gc,Ac){++Qb;Qc+=(Ob-Qc)/Qb;Cc+=(gc-Cc)/Qb;vd+=(Ac-vd)/Qb}function W(){nb.point=fa}function fa(Ob,gc){Ob*=m;gc*=m;var Ac=Id(gc);Ma=Ac*Id(Ob);lb=Ac*jf(Ob);vb=jf(gc);nb.point=ja;C(Ma,lb,vb)}function ja(Ob,gc){Ob*=m;gc*=m;var Ac=Id(gc),Uc=Ac*Id(Ob);Ob=Ac*jf(Ob);
gc=jf(gc);var y=Xc(Xf((y=lb*gc-vb*Ob)*y+(y=vb*Uc-Ma*gc)*y+(y=Ma*Ob-lb*Uc)*y),Ma*Uc+lb*Ob+vb*gc);pc+=y;Wd+=y*(Ma+(Ma=Uc));we+=y*(lb+(lb=Ob));ue+=y*(vb+(vb=gc));C(Ma,lb,vb)}function Ba(){nb.point=E}function Ga(){nb.point=Fa}function ua(){Xa(Me,rf);nb.point=E}function Fa(Ob,gc){Me=Ob;rf=gc;Ob*=m;gc*=m;nb.point=Xa;var Ac=Id(gc);Ma=Ac*Id(Ob);lb=Ac*jf(Ob);vb=jf(gc);C(Ma,lb,vb)}function Xa(Ob,gc){Ob*=m;gc*=m;var Ac=Id(gc),Uc=Ac*Id(Ob);Ob=Ac*jf(Ob);gc=jf(gc);Ac=lb*gc-vb*Ob;var y=vb*Uc-Ma*gc,wa=Ma*Ob-lb*Uc,
fb=Se(Ac,y,wa),Ib=l(fb);fb=fb&&-Ib/fb;sd.add(fb*Ac);Fe.add(fb*y);Ge.add(fb*wa);pc+=Ib;Wd+=Ib*(Ma+(Ma=Uc));we+=Ib*(lb+(lb=Ob));ue+=Ib*(vb+(vb=gc));C(Ma,lb,vb)}function Sa(Ob){return function(){return Ob}}function eb(Ob,gc){function Ac(Uc,y){return Uc=Ob(Uc,y),gc(Uc[0],Uc[1])}Ob.invert&&gc.invert&&(Ac.invert=function(Uc,y){return Uc=gc.invert(Uc,y),Uc&&Ob.invert(Uc[0],Uc[1])});return Ac}function Va(Ob,gc){return[Na(Ob)>Tf?Ob+Math.round(-Ob/Wa)*Wa:Ob,gc]}function La(Ob,gc,Ac){return(Ob%=Wa)?gc||Ac?eb(la(Ob),
ma(gc,Ac)):la(Ob):gc||Ac?ma(gc,Ac):Va}function Ra(Ob){return function(gc,Ac){return gc+=Ob,[gc>Tf?gc-Wa:gc<-Tf?gc+Wa:gc,Ac]}}function la(Ob){var gc=Ra(Ob);gc.invert=Ra(-Ob);return gc}function ma(Ob,gc){function Ac(Ib,kc){var $c=Id(kc),zd=Id(Ib)*$c;Ib=jf(Ib)*$c;kc=jf(kc);$c=kc*Uc+zd*y;return[Xc(Ib*wa-$c*fb,zd*Uc-kc*y),l($c*wa+Ib*fb)]}var Uc=Id(Ob),y=jf(Ob),wa=Id(gc),fb=jf(gc);Ac.invert=function(Ib,kc){var $c=Id(kc),zd=Id(Ib)*$c;Ib=jf(Ib)*$c;kc=jf(kc);$c=kc*wa-Ib*fb;return[Xc(Ib*wa+kc*fb,zd*Uc+$c*y),
l($c*Uc-zd*y)]};return Ac}function Aa(Ob){function gc(Ac){Ac=Ob(Ac[0]*m,Ac[1]*m);return Ac[0]*=Ha,Ac[1]*=Ha,Ac}Ob=La(Ob[0]*m,Ob[1]*m,2<Ob.length?Ob[2]*m:0);gc.invert=function(Ac){Ac=Ob.invert(Ac[0]*m,Ac[1]*m);return Ac[0]*=Ha,Ac[1]*=Ha,Ac};return gc}function Da(Ob,gc,Ac,Uc,y,wa){if(Ac){var fb=Id(gc),Ib=jf(gc);Ac*=Uc;if(null==y)y=gc+Uc*Wa,wa=gc-Ac/2;else if(y=Qa(fb,y),wa=Qa(fb,wa),0<Uc?y<wa:y>wa)y+=Uc*Wa;for(;0<Uc?y>wa:y<wa;y-=Ac)gc=w([fb,-Ib*Id(y),-Ib*jf(y)]),Ob.point(gc[0],gc[1])}}function Qa(Ob,
gc){gc=x(gc);gc[0]-=Ob;O(gc);Ob=h(-gc[1]);return((0>-gc[2]?-Ob:Ob)+Wa-1E-6)%Wa}function Ea(){var Ob=[],gc;return{point:function(Ac,Uc,y){gc.push([Ac,Uc,y])},lineStart:function(){Ob.push(gc=[])},lineEnd:q,rejoin:function(){1<Ob.length&&Ob.push(Ob.pop().concat(Ob.shift()))},result:function(){var Ac=Ob;Ob=[];gc=null;return Ac}}}function kb(Ob,gc){return 1E-6>Na(Ob[0]-gc[0])&&1E-6>Na(Ob[1]-gc[1])}function cb(Ob,gc,Ac,Uc){this.x=Ob;this.z=gc;this.o=Ac;this.e=Uc;this.v=!1;this.n=this.p=null}function Mb(Ob,
gc,Ac,Uc,y){var wa=[],fb=[];Ob.forEach(function(rd){if(!(0>=(Zd=rd.length-1))){var Zd,ve=rd[0],Pe=rd[Zd];if(kb(ve,Pe)){if(!ve[2]&&!Pe[2]){y.lineStart();for(Ib=0;Ib<Zd;++Ib)y.point((ve=rd[Ib])[0],ve[1]);y.lineEnd();return}Pe[0]+=2E-6}wa.push(Zd=new cb(ve,rd,null,!0));fb.push(Zd.o=new cb(ve,null,Zd,!1));wa.push(Zd=new cb(Pe,rd,null,!1));fb.push(Zd.o=new cb(Pe,null,Zd,!0))}});if(wa.length){fb.sort(gc);Gb(wa);Gb(fb);var Ib=0;for(Ob=fb.length;Ib<Ob;++Ib)fb[Ib].e=Ac=!Ac;Ac=wa[0];for(var kc;;){for(var $c=
Ac,zd=!0;$c.v;)if(($c=$c.n)===Ac)return;gc=$c.z;y.lineStart();do{$c.v=$c.o.v=!0;if($c.e){if(zd)for(Ib=0,Ob=gc.length;Ib<Ob;++Ib)y.point((kc=gc[Ib])[0],kc[1]);else Uc($c.x,$c.n.x,1,y);$c=$c.n}else{if(zd)for(gc=$c.p.z,Ib=gc.length-1;0<=Ib;--Ib)y.point((kc=gc[Ib])[0],kc[1]);else Uc($c.x,$c.p.x,-1,y);$c=$c.p}$c=$c.o;gc=$c.z;zd=!zd}while(!$c.v);y.lineEnd()}}}function Gb(Ob){if(gc=Ob.length){for(var gc,Ac=0,Uc=Ob[0],y;++Ac<gc;)Uc.n=y=Ob[Ac],y.p=Uc,Uc=y;Uc.n=y=Ob[0];y.p=Uc}}function Wb(Ob){return Na(Ob[0])<=
Tf?Ob[0]:Jf(Ob[0])*((Na(Ob[0])+Tf)%Wa-Tf)}function sa(Ob,gc){var Ac=Wb(gc);gc=gc[1];var Uc=jf(gc),y=[jf(Ac),-Id(Ac),0],wa=0,fb=0,Ib=new f.Adder;1===Uc?gc=sg+1E-6:-1===Uc&&(gc=-sg-1E-6);Uc=0;for(var kc=Ob.length;Uc<kc;++Uc)if(zd=($c=Ob[Uc]).length){var $c,zd,rd=$c[zd-1],Zd=Wb(rd),ve=rd[1]/2+zc,Pe=jf(ve),hf=Id(ve);for(ve=0;ve<zd;++ve,Zd=Sf,Pe=gg,hf=vf,rd=eg){var eg=$c[ve],Sf=Wb(eg);vf=eg[1]/2+zc;var gg=jf(vf),vf=Id(vf),df=Sf-Zd,Gf=0<=df?1:-1,ug=Gf*df,Ng=ug>Tf;Pe*=gg;Ib.add(Xc(Pe*Gf*jf(ug),hf*vf+Pe*
Id(ug)));wa+=Ng?df+Gf*Wa:df;Ng^Zd>=Ac^Sf>=Ac&&(rd=R(x(rd),x(eg)),O(rd),Zd=R(y,rd),O(Zd),Zd=(Ng^0<=df?-1:1)*l(Zd[2]),gc>Zd||gc===Zd&&(rd[0]||rd[1]))&&(fb+=Ng^0<=df?1:-1)}}return(-1E-6>wa||1E-6>wa&&-1E-12>Ib)^fb&1}function ra(Ob,gc,Ac,Uc){return function(y){function wa(df,Gf){Ob(df,Gf)&&y.point(df,Gf)}function fb(df,Gf){Zd.point(df,Gf)}function Ib(){vf.point=fb;Zd.lineStart()}function kc(){vf.point=wa;Zd.lineEnd()}function $c(df,Gf){gg.push([df,Gf]);Pe.point(df,Gf)}function zd(){Pe.lineStart();gg=[]}
function rd(){$c(gg[0][0],gg[0][1]);Pe.lineEnd();var df=Pe.clean(),Gf=ve.result(),ug=Gf.length,Ng;gg.pop();eg.push(gg);gg=null;if(ug)if(df&1){if(ug=Gf[0],0<(Gf=ug.length-1)){hf||(y.polygonStart(),hf=!0);y.lineStart();for(df=0;df<Gf;++df)y.point((Ng=ug[df])[0],Ng[1]);y.lineEnd()}}else 1<ug&&df&2&&Gf.push(Gf.pop().concat(Gf.shift())),Sf.push(Gf.filter(xa))}var Zd=gc(y),ve=Ea(),Pe=gc(ve),hf=!1,eg,Sf,gg,vf={point:wa,lineStart:Ib,lineEnd:kc,polygonStart:function(){vf.point=$c;vf.lineStart=zd;vf.lineEnd=
rd;Sf=[];eg=[]},polygonEnd:function(){vf.point=wa;vf.lineStart=Ib;vf.lineEnd=kc;Sf=f.merge(Sf);var df=sa(eg,Uc);Sf.length?(hf||(y.polygonStart(),hf=!0),Mb(Sf,Ia,df,Ac,y)):df&&(hf||(y.polygonStart(),hf=!0),y.lineStart(),Ac(null,null,1,y),y.lineEnd());hf&&(y.polygonEnd(),hf=!1);Sf=eg=null},sphere:function(){y.polygonStart();y.lineStart();Ac(null,null,1,y);y.lineEnd();y.polygonEnd()}};return vf}}function xa(Ob){return 1<Ob.length}function Ia(Ob,gc){return(0>(Ob=Ob.x)[0]?Ob[1]-sg-1E-6:sg-Ob[1])-(0>(gc=
gc.x)[0]?gc[1]-sg-1E-6:sg-gc[1])}function bb(Ob){function gc(kc,$c){return Id(kc)*Id($c)>y}function Ac(kc,$c,zd){var rd=x(kc),Zd=x($c),ve=[1,0,0];Zd=R(rd,Zd);var Pe=I(Zd,Zd);rd=Zd[0];var hf=Pe-rd*rd;if(!hf)return!zd&&kc;Pe=y*Pe/hf;hf=-y*rd/hf;rd=R(ve,Zd);ve=v(ve,Pe);Zd=v(Zd,hf);B(ve,Zd);Zd=I(ve,rd);Pe=I(rd,rd);hf=Zd*Zd-Pe*(I(ve,ve)-1);if(!(0>hf)){var eg=Xf(hf);hf=v(rd,(-Zd-eg)/Pe);B(hf,ve);hf=w(hf);if(!zd)return hf;zd=kc[0];var Sf=$c[0];kc=kc[1];$c=$c[1];if(Sf<zd){var gg=zd;zd=Sf;Sf=gg}var vf=Sf-
zd,df=1E-6>Na(vf-Tf);!df&&$c<kc&&(gg=kc,kc=$c,$c=gg);if(df||1E-6>vf?df?0<kc+$c^hf[1]<(1E-6>Na(hf[0]-zd)?kc:$c):kc<=hf[1]&&hf[1]<=$c:vf>Tf^(zd<=hf[0]&&hf[0]<=Sf))return $c=v(rd,(-Zd+eg)/Pe),B($c,ve),[hf,w($c)]}}function Uc(kc,$c){var zd=fb?Ob:Tf-Ob,rd=0;kc<-zd?rd|=1:kc>zd&&(rd|=2);$c<-zd?rd|=4:$c>zd&&(rd|=8);return rd}var y=Id(Ob),wa=6*m,fb=0<y,Ib=1E-6<Na(y);return ra(gc,function(kc){var $c,zd,rd,Zd,ve;return{lineStart:function(){Zd=rd=!1;ve=1},point:function(Pe,hf){var eg=[Pe,hf],Sf=gc(Pe,hf);hf=
fb?Sf?0:Uc(Pe,hf):Sf?Uc(Pe+(0>Pe?Tf:-Tf),hf):0;!$c&&(Zd=rd=Sf)&&kc.lineStart();Sf!==rd&&(Pe=Ac($c,eg),!Pe||kb($c,Pe)||kb(eg,Pe))&&(eg[2]=1);if(Sf!==rd)ve=0,Sf?(kc.lineStart(),Pe=Ac(eg,$c),kc.point(Pe[0],Pe[1])):(Pe=Ac($c,eg),kc.point(Pe[0],Pe[1],2),kc.lineEnd()),$c=Pe;else if(Ib&&$c&&fb^Sf){var gg;hf&zd||!(gg=Ac(eg,$c,!0))||(ve=0,fb?(kc.lineStart(),kc.point(gg[0][0],gg[0][1]),kc.point(gg[1][0],gg[1][1]),kc.lineEnd()):(kc.point(gg[1][0],gg[1][1]),kc.lineEnd(),kc.lineStart(),kc.point(gg[0][0],gg[0][1],
3)))}!Sf||$c&&kb($c,eg)||kc.point(eg[0],eg[1]);$c=eg;rd=Sf;zd=hf},lineEnd:function(){rd&&kc.lineEnd();$c=null},clean:function(){return ve|(Zd&&rd)<<1}}},function(kc,$c,zd,rd){Da(rd,Ob,wa,zd,kc,$c)},fb?[0,-Ob]:[-Tf,Ob-Tf])}function Hb(Ob,gc,Ac,Uc,y,wa){var fb=Ob[0],Ib=Ob[1],kc=0,$c=1,zd=gc[0]-fb,rd=gc[1]-Ib;Ac-=fb;if(zd||!(0<Ac)){Ac/=zd;if(0>zd){if(Ac<kc)return;Ac<$c&&($c=Ac)}else if(0<zd){if(Ac>$c)return;Ac>kc&&(kc=Ac)}Ac=y-fb;if(zd||!(0>Ac)){Ac/=zd;if(0>zd){if(Ac>$c)return;Ac>kc&&(kc=Ac)}else if(0<
zd){if(Ac<kc)return;Ac<$c&&($c=Ac)}Ac=Uc-Ib;if(rd||!(0<Ac)){Ac/=rd;if(0>rd){if(Ac<kc)return;Ac<$c&&($c=Ac)}else if(0<rd){if(Ac>$c)return;Ac>kc&&(kc=Ac)}Ac=wa-Ib;if(rd||!(0>Ac)){Ac/=rd;if(0>rd){if(Ac>$c)return;Ac>kc&&(kc=Ac)}else if(0<rd){if(Ac<kc)return;Ac<$c&&($c=Ac)}0<kc&&(Ob[0]=fb+kc*zd,Ob[1]=Ib+kc*rd);1>$c&&(gc[0]=fb+$c*zd,gc[1]=Ib+$c*rd);return!0}}}}}function zb(Ob,gc,Ac,Uc){function y(kc,$c,zd,rd){var Zd=0,ve=0;if(null==kc||(Zd=wa(kc,zd))!==(ve=wa($c,zd))||0>Ib(kc,$c)^0<zd){do rd.point(0===
Zd||3===Zd?Ob:Ac,1<Zd?Uc:gc);while((Zd=(Zd+zd+4)%4)!==ve)}else rd.point($c[0],$c[1])}function wa(kc,$c){return 1E-6>Na(kc[0]-Ob)?0<$c?0:3:1E-6>Na(kc[0]-Ac)?0<$c?2:1:1E-6>Na(kc[1]-gc)?0<$c?1:0:0<$c?3:2}function fb(kc,$c){return Ib(kc.x,$c.x)}function Ib(kc,$c){var zd=wa(kc,1),rd=wa($c,1);return zd!==rd?zd-rd:0===zd?$c[1]-kc[1]:1===zd?kc[0]-$c[0]:2===zd?kc[1]-$c[1]:$c[0]-kc[0]}return function(kc){function $c(ch,Mg){Ob<=ch&&ch<=Ac&&gc<=Mg&&Mg<=Uc&&rd.point(ch,Mg)}function zd(ch,Mg){var Ef=Ob<=ch&&ch<=
Ac&&gc<=Mg&&Mg<=Uc;Pe&&hf.push([ch,Mg]);if(ug)eg=ch,Sf=Mg,gg=Ef,ug=!1,Ef&&(rd.lineStart(),rd.point(ch,Mg));else if(Ef&&Gf)rd.point(ch,Mg);else{var Sh=[vf=Math.max(-1E9,Math.min(1E9,vf)),df=Math.max(-1E9,Math.min(1E9,df))],Dg=[ch=Math.max(-1E9,Math.min(1E9,ch)),Mg=Math.max(-1E9,Math.min(1E9,Mg))];Hb(Sh,Dg,Ob,gc,Ac,Uc)?(Gf||(rd.lineStart(),rd.point(Sh[0],Sh[1])),rd.point(Dg[0],Dg[1]),Ef||rd.lineEnd(),Ng=!1):Ef&&(rd.lineStart(),rd.point(ch,Mg),Ng=!1)}vf=ch;df=Mg;Gf=Ef}var rd=kc,Zd=Ea(),ve,Pe,hf,eg,Sf,
gg,vf,df,Gf,ug,Ng,Vg={point:$c,lineStart:function(){Vg.point=zd;Pe&&Pe.push(hf=[]);ug=!0;Gf=!1;vf=df=NaN},lineEnd:function(){ve&&(zd(eg,Sf),gg&&Gf&&Zd.rejoin(),ve.push(Zd.result()));Vg.point=$c;Gf&&rd.lineEnd()},polygonStart:function(){rd=Zd;ve=[];Pe=[];Ng=!0},polygonEnd:function(){for(var ch,Mg=ch=0,Ef=Pe.length;Mg<Ef;++Mg){var Sh=Pe[Mg],Dg=1,qg=Sh.length,Nf=Sh[0],nh=Nf[0];for(Nf=Nf[1];Dg<qg;++Dg){var si=nh;var oh=Nf;Nf=Sh[Dg];nh=Nf[0];Nf=Nf[1];oh<=Uc?Nf>Uc&&(nh-si)*(Uc-oh)>(Nf-oh)*(Ob-si)&&++ch:
Nf<=Uc&&(nh-si)*(Uc-oh)<(Nf-oh)*(Ob-si)&&--ch}}Mg=Ng&&ch;Ef=(ve=f.merge(ve)).length;if(Mg||Ef)kc.polygonStart(),Mg&&(kc.lineStart(),y(null,null,1,kc),kc.lineEnd()),Ef&&Mb(ve,fb,ch,y,kc),kc.polygonEnd();rd=kc;ve=Pe=hf=null}};return Vg}}function mb(){ne.point=ne.lineEnd=q}function Jb(Ob,gc){Ob*=m;gc*=m;Mc=Ob;md=jf(gc);yd=Id(gc);ne.point=Eb}function Eb(Ob,gc){Ob*=m;gc*=m;var Ac=jf(gc);gc=Id(gc);var Uc=Na(Ob-Mc),y=Id(Uc);Uc=jf(Uc);Uc*=gc;var wa=yd*Ac-md*gc*y;y=md*Ac+yd*gc*y;yc.add(Xc(Xf(Uc*Uc+wa*wa),
y));Mc=Ob;md=Ac;yd=gc}function Db(Ob){yc=new f.Adder;X(Ob,ne);return+yc}function bc(Ob,gc){Le[0]=Ob;Le[1]=gc;return Db(Qe)}function jc(Ob,gc){return Ob&&Ed.hasOwnProperty(Ob.type)?Ed[Ob.type](Ob,gc):!1}function Tc(Ob,gc){for(var Ac,Uc,y,wa=0,fb=Ob.length;wa<fb;wa++){Uc=bc(Ob[wa],gc);if(0===Uc||0<wa&&(y=bc(Ob[wa],Ob[wa-1]),0<y&&Ac<=y&&Uc<=y&&(Ac+Uc-y)*(1-Math.pow((Ac-Uc)/y,2))<1E-12*y))return!0;Ac=Uc}return!1}function ub(Ob,gc){return!!sa(Ob.map(Rc),Gd(gc))}function Rc(Ob){return Ob=Ob.map(Gd),Ob.pop(),
Ob}function Gd(Ob){return[Ob[0]*m,Ob[1]*m]}function Kd(Ob,gc,Ac){var Uc=f.range(Ob,gc-1E-6,Ac).concat(gc);return function(y){return Uc.map(function(wa){return[y,wa]})}}function Vd(Ob,gc,Ac){var Uc=f.range(Ob,gc-1E-6,Ac).concat(gc);return function(y){return Uc.map(function(wa){return[wa,y]})}}function ze(){function Ob(){return{type:"MultiLineString",coordinates:gc()}}function gc(){return f.range(Td(wa/Zd)*Zd,y,Zd).map(eg).concat(f.range(Td($c/ve)*ve,kc,ve).map(Sf)).concat(f.range(Td(Uc/zd)*zd,Ac,zd).filter(function(vf){return 1E-6<
Na(vf%Zd)}).map(Pe)).concat(f.range(Td(Ib/rd)*rd,fb,rd).filter(function(vf){return 1E-6<Na(vf%ve)}).map(hf))}var Ac,Uc,y,wa,fb,Ib,kc,$c,zd=10,rd=zd,Zd=90,ve=360,Pe,hf,eg,Sf,gg=2.5;Ob.lines=function(){return gc().map(function(vf){return{type:"LineString",coordinates:vf}})};Ob.outline=function(){return{type:"Polygon",coordinates:[eg(wa).concat(Sf(kc).slice(1),eg(y).reverse().slice(1),Sf($c).reverse().slice(1))]}};Ob.extent=function(vf){return arguments.length?Ob.extentMajor(vf).extentMinor(vf):Ob.extentMinor()};
Ob.extentMajor=function(vf){if(!arguments.length)return[[wa,$c],[y,kc]];wa=+vf[0][0];y=+vf[1][0];$c=+vf[0][1];kc=+vf[1][1];wa>y&&(vf=wa,wa=y,y=vf);$c>kc&&(vf=$c,$c=kc,kc=vf);return Ob.precision(gg)};Ob.extentMinor=function(vf){if(!arguments.length)return[[Uc,Ib],[Ac,fb]];Uc=+vf[0][0];Ac=+vf[1][0];Ib=+vf[0][1];fb=+vf[1][1];Uc>Ac&&(vf=Uc,Uc=Ac,Ac=vf);Ib>fb&&(vf=Ib,Ib=fb,fb=vf);return Ob.precision(gg)};Ob.step=function(vf){return arguments.length?Ob.stepMajor(vf).stepMinor(vf):Ob.stepMinor()};Ob.stepMajor=
function(vf){if(!arguments.length)return[Zd,ve];Zd=+vf[0];ve=+vf[1];return Ob};Ob.stepMinor=function(vf){if(!arguments.length)return[zd,rd];zd=+vf[0];rd=+vf[1];return Ob};Ob.precision=function(vf){if(!arguments.length)return gg;gg=+vf;Pe=Kd(Ib,fb,90);hf=Vd(Uc,Ac,gg);eg=Kd($c,kc,90);Sf=Vd(wa,y,gg);return Ob};return Ob.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}function ee(){sb.point=bd}function bd(Ob,gc){sb.point=Bd;Uf=tg=Ob;dg=fh=gc}function Bd(Ob,
gc){kg.add(fh*Ob-tg*gc);tg=Ob;fh=gc}function Ld(){Bd(Uf,dg)}function fe(Ob,gc){Fc+=Ob;Yc+=gc;++Nc}function Ee(){Sc.point=dd}function dd(Ob,gc){Sc.point=nd;fe(Rb=Ob,ec=gc)}function nd(Ob,gc){var Ac=Ob-Rb,Uc=gc-ec;Ac=Xf(Ac*Ac+Uc*Uc);fd+=Ac*(Rb+Ob)/2;mc+=Ac*(ec+gc)/2;wd+=Ac;fe(Rb=Ob,ec=gc)}function Dc(){Sc.point=fe}function jd(){Sc.point=ae}function Qd(){te(Ua,pb)}function ae(Ob,gc){Sc.point=te;fe(Ua=Rb=Ob,pb=ec=gc)}function te(Ob,gc){var Ac=Ob-Rb,Uc=gc-ec;Ac=Xf(Ac*Ac+Uc*Uc);fd+=Ac*(Rb+Ob)/2;mc+=Ac*
(ec+gc)/2;wd+=Ac;Ac=ec*Ob-Rb*gc;Xd+=Ac*(Rb+Ob);ce+=Ac*(ec+gc);De+=3*Ac;fe(Rb=Ob,ec=gc)}function Bb(Ob){this._context=Ob}function $b(Ob,gc){Af.point=Gc;Yd=re=Ob;je=xe=gc}function Gc(Ob,gc){re-=Ob;xe-=gc;kd.add(Xf(re*re+xe*xe));re=Ob;xe=gc}function Jc(){this._string=[]}function ud(Ob){return"m0,"+Ob+"a"+Ob+","+Ob+" 0 1,1 0,"+-2*Ob+"a"+Ob+","+Ob+" 0 1,1 0,"+2*Ob+"z"}function Zc(Ob){return function(gc){var Ac=new xd,Uc;for(Uc in Ob)Ac[Uc]=Ob[Uc];Ac.stream=gc;return Ac}}function xd(){}function Sd(Ob,gc,
Ac){var Uc=Ob.clipExtent&&Ob.clipExtent();Ob.scale(150).translate([0,0]);null!=Uc&&Ob.clipExtent(null);X(Ac,Ob.stream(dc));gc(dc.result());null!=Uc&&Ob.clipExtent(Uc);return Ob}function ie(Ob,gc,Ac){return Sd(Ob,function(Uc){var y=gc[1][0]-gc[0][0],wa=gc[1][1]-gc[0][1],fb=Math.min(y/(Uc[1][0]-Uc[0][0]),wa/(Uc[1][1]-Uc[0][1]));y=+gc[0][0]+(y-fb*(Uc[1][0]+Uc[0][0]))/2;Uc=+gc[0][1]+(wa-fb*(Uc[1][1]+Uc[0][1]))/2;Ob.scale(150*fb).translate([y,Uc])},Ac)}function Be(Ob,gc,Ac){return Sd(Ob,function(Uc){var y=
+gc,wa=y/(Uc[1][0]-Uc[0][0]);y=(y-wa*(Uc[1][0]+Uc[0][0]))/2;Uc=-wa*Uc[0][1];Ob.scale(150*wa).translate([y,Uc])},Ac)}function uc(Ob,gc,Ac){return Sd(Ob,function(Uc){var y=+gc,wa=y/(Uc[1][1]-Uc[0][1]),fb=-wa*Uc[0][0];Uc=(y-wa*(Uc[1][1]+Uc[0][1]))/2;Ob.scale(150*wa).translate([fb,Uc])},Ac)}function Oc(Ob){return Zc({point:function(gc,Ac){gc=Ob(gc,Ac);this.stream.point(gc[0],gc[1])}})}function Nd(Ob,gc){function Ac(Uc,y,wa,fb,Ib,kc,$c,zd,rd,Zd,ve,Pe,hf,eg){var Sf=$c-Uc,gg=zd-y,vf=Sf*Sf+gg*gg;if(vf>4*
gc&&hf--){var df=fb+Zd,Gf=Ib+ve,ug=kc+Pe,Ng=Xf(df*df+Gf*Gf+ug*ug),Vg=l(ug/=Ng),ch=1E-6>Na(Na(ug)-1)||1E-6>Na(wa-rd)?(wa+rd)/2:Xc(Gf,df),Mg=Ob(ch,Vg);Vg=Mg[0];Mg=Mg[1];var Ef=Vg-Uc,Sh=Mg-y,Dg=gg*Ef-Sf*Sh;if(Dg*Dg/vf>gc||.3<Na((Sf*Ef+gg*Sh)/vf-.5)||fb*Zd+Ib*ve+kc*Pe<Qf)Ac(Uc,y,wa,fb,Ib,kc,Vg,Mg,ch,df/=Ng,Gf/=Ng,ug,hf,eg),eg.point(Vg,Mg),Ac(Vg,Mg,ch,df,Gf,ug,$c,zd,rd,Zd,ve,Pe,hf,eg)}}return function(Uc){function y(Vg,ch){Vg=Ob(Vg,ch);Uc.point(Vg[0],Vg[1])}function wa(){gg=NaN;Ng.point=fb;Uc.lineStart()}
function fb(Vg,ch){var Mg=x([Vg,ch]);ch=Ob(Vg,ch);Ac(gg,vf,Sf,df,Gf,ug,gg=ch[0],vf=ch[1],Sf=Vg,df=Mg[0],Gf=Mg[1],ug=Mg[2],16,Uc);Uc.point(gg,vf)}function Ib(){Ng.point=y;Uc.lineEnd()}function kc(){wa();Ng.point=$c;Ng.lineEnd=zd}function $c(Vg,ch){fb(rd=Vg,ch);Zd=gg;ve=vf;Pe=df;hf=Gf;eg=ug;Ng.point=fb}function zd(){Ac(gg,vf,Sf,df,Gf,ug,Zd,ve,rd,Pe,hf,eg,16,Uc);Ng.lineEnd=Ib;Ib()}var rd,Zd,ve,Pe,hf,eg,Sf,gg,vf,df,Gf,ug,Ng={point:y,lineStart:wa,lineEnd:Ib,polygonStart:function(){Uc.polygonStart();Ng.lineStart=
kc},polygonEnd:function(){Uc.polygonEnd();Ng.lineStart=wa}};return Ng}}function Od(Ob){return Zc({point:function(gc,Ac){gc=Ob(gc,Ac);return this.stream.point(gc[0],gc[1])}})}function pe(Ob,gc,Ac,Uc,y){function wa(fb,Ib){fb*=Uc;Ib*=y;return[gc+Ob*fb,Ac-Ob*Ib]}wa.invert=function(fb,Ib){return[(fb-gc)/Ob*Uc,(Ac-Ib)/Ob*y]};return wa}function ye(Ob,gc,Ac,Uc,y,wa){function fb(Pe,hf){Pe*=Uc;hf*=y;return[kc*Pe-$c*hf+gc,Ac-$c*Pe-kc*hf]}if(!wa)return pe(Ob,gc,Ac,Uc,y);var Ib=Id(wa);wa=jf(wa);var kc=Ib*Ob,$c=
wa*Ob,zd=Ib/Ob,rd=wa/Ob,Zd=(wa*Ac-Ib*gc)/Ob,ve=(wa*gc+Ib*Ac)/Ob;fb.invert=function(Pe,hf){return[Uc*(zd*Pe-rd*hf+Zd),y*(ve-rd*Pe-zd*hf)]};return fb}function me(Ob){return od(function(){return Ob})()}function od(Ob){function gc(Nf){return Sh(Nf[0]*m,Nf[1]*m)}function Ac(Nf){return(Nf=Sh.invert(Nf[0],Nf[1]))&&[Nf[0]*Ha,Nf[1]*Ha]}function Uc(){var Nf=ye(fb,0,0,eg,Sf,hf).apply(null,wa($c,zd));Nf=ye(fb,Ib-Nf[0],kc-Nf[1],eg,Sf,hf);Pe=La(rd,Zd,ve);Ef=eb(wa,Nf);Sh=eb(Pe,Ef);Nf=Ef;Mg=+ch?Nd(Nf,ch):Oc(Nf);
return y()}function y(){Dg=qg=null;return gc}var wa,fb=150,Ib=480,kc=250,$c=0,zd=0,rd=0,Zd=0,ve=0,Pe,hf=0,eg=1,Sf=1,gg=null,vf=ac,df=null,Gf,ug,Ng,Vg=kf,ch=.5,Mg,Ef,Sh,Dg,qg;gc.stream=function(Nf){return Dg&&qg===Nf?Dg:Dg=Hc(Od(Pe)(vf(Mg(Vg(qg=Nf)))))};gc.preclip=function(Nf){return arguments.length?(vf=Nf,gg=void 0,y()):vf};gc.postclip=function(Nf){return arguments.length?(Vg=Nf,df=Gf=ug=Ng=null,y()):Vg};gc.clipAngle=function(Nf){return arguments.length?(vf=+Nf?bb(gg=Nf*m):(gg=null,ac),y()):gg*Ha};
gc.clipExtent=function(Nf){return arguments.length?(Vg=null==Nf?(df=Gf=ug=Ng=null,kf):zb(df=+Nf[0][0],Gf=+Nf[0][1],ug=+Nf[1][0],Ng=+Nf[1][1]),y()):null==df?null:[[df,Gf],[ug,Ng]]};gc.scale=function(Nf){return arguments.length?(fb=+Nf,Uc()):fb};gc.translate=function(Nf){return arguments.length?(Ib=+Nf[0],kc=+Nf[1],Uc()):[Ib,kc]};gc.center=function(Nf){return arguments.length?($c=Nf[0]%360*m,zd=Nf[1]%360*m,Uc()):[$c*Ha,zd*Ha]};gc.rotate=function(Nf){return arguments.length?(rd=Nf[0]%360*m,Zd=Nf[1]%
360*m,ve=2<Nf.length?Nf[2]%360*m:0,Uc()):[rd*Ha,Zd*Ha,ve*Ha]};gc.angle=function(Nf){return arguments.length?(hf=Nf%360*m,Uc()):hf*Ha};gc.reflectX=function(Nf){return arguments.length?(eg=Nf?-1:1,Uc()):0>eg};gc.reflectY=function(Nf){return arguments.length?(Sf=Nf?-1:1,Uc()):0>Sf};gc.precision=function(Nf){if(arguments.length){var nh=Ef;var si=ch=Nf*Nf;nh=(Mg=+si?Nd(nh,si):Oc(nh),y())}else nh=Xf(ch);return nh};gc.fitExtent=function(Nf,nh){return ie(gc,Nf,nh)};gc.fitSize=function(Nf,nh){return ie(gc,
[[0,0],Nf],nh)};gc.fitWidth=function(Nf,nh){return Be(gc,Nf,nh)};gc.fitHeight=function(Nf,nh){return uc(gc,Nf,nh)};return function(){wa=Ob.apply(this,arguments);gc.invert=wa.invert&&Ac;return Uc()}}function hd(Ob){var gc=0,Ac=Tf/3,Uc=od(Ob);Ob=Uc(gc,Ac);Ob.parallels=function(y){return arguments.length?Uc(gc=y[0]*m,Ac=y[1]*m):[gc*Ha,Ac*Ha]};return Ob}function ge(Ob){function gc(Uc,y){return[Uc*Ac,jf(y)/Ac]}var Ac=Id(Ob);gc.invert=function(Uc,y){return[Uc/Ac,l(y*Ac)]};return gc}function $d(Ob,gc){function Ac(Ib,
kc){kc=Xf(wa-2*y*jf(kc))/y;return[kc*jf(Ib*=y),fb-kc*Id(Ib)]}var Uc=jf(Ob),y=(Uc+jf(gc))/2;if(1E-6>Na(y))return ge(Ob);var wa=1+Uc*(2*y-Uc),fb=Xf(wa)/y;Ac.invert=function(Ib,kc){kc=fb-kc;var $c=Xc(Ib,Na(kc))*Jf(kc);0>kc*y&&($c-=Tf*Jf(Ib)*Jf(kc));return[$c/y,l((wa-(Ib*Ib+kc*kc)*y*y)/(2*y))]};return Ac}function cd(){return hd($d).scale(155.424).center([0,33.6442])}function Ie(){return cd().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Je(Ob){var gc=
Ob.length;return{point:function(Ac,Uc){for(var y=-1;++y<gc;)Ob[y].point(Ac,Uc)},sphere:function(){for(var Ac=-1;++Ac<gc;)Ob[Ac].sphere()},lineStart:function(){for(var Ac=-1;++Ac<gc;)Ob[Ac].lineStart()},lineEnd:function(){for(var Ac=-1;++Ac<gc;)Ob[Ac].lineEnd()},polygonStart:function(){for(var Ac=-1;++Ac<gc;)Ob[Ac].polygonStart()},polygonEnd:function(){for(var Ac=-1;++Ac<gc;)Ob[Ac].polygonEnd()}}}function Ad(Ob){return function(gc,Ac){var Uc=Id(gc),y=Id(Ac);Uc=Ob(Uc*y);return Infinity===Uc?[2,0]:[Uc*
y*jf(gc),Uc*jf(Ac)]}}function $e(Ob){return function(gc,Ac){var Uc=Xf(gc*gc+Ac*Ac),y=Ob(Uc),wa=jf(y);y=Id(y);return[Xc(gc*wa,Uc*y),l(Uc&&Ac*wa/Uc)]}}function qf(Ob,gc){return[Ob,Rd(Pg((sg+gc)/2))]}function Ye(Ob){function gc(){var rd=Tf*y(),Zd=Ac(Aa(Ac.rotate()).invert([0,0]));return fb(null==Ib?[[Zd[0]-rd,Zd[1]-rd],[Zd[0]+rd,Zd[1]+rd]]:Ob===qf?[[Math.max(Zd[0]-rd,Ib),kc],[Math.min(Zd[0]+rd,$c),zd]]:[[Ib,Math.max(Zd[1]-rd,kc)],[$c,Math.min(Zd[1]+rd,zd)]])}var Ac=me(Ob),Uc=Ac.center,y=Ac.scale,wa=
Ac.translate,fb=Ac.clipExtent,Ib=null,kc,$c,zd;Ac.scale=function(rd){return arguments.length?(y(rd),gc()):y()};Ac.translate=function(rd){return arguments.length?(wa(rd),gc()):wa()};Ac.center=function(rd){return arguments.length?(Uc(rd),gc()):Uc()};Ac.clipExtent=function(rd){return arguments.length?(null==rd?Ib=kc=$c=zd=null:(Ib=+rd[0][0],kc=+rd[0][1],$c=+rd[1][0],zd=+rd[1][1]),gc()):null==Ib?null:[[Ib,kc],[$c,zd]]};return gc()}function af(Ob,gc){function Ac(fb,Ib){0<wa?Ib<-sg+1E-6&&(Ib=-sg+1E-6):
Ib>sg-1E-6&&(Ib=sg-1E-6);Ib=wa/Vf(Pg((sg+Ib)/2),y);return[Ib*jf(y*fb),wa-Ib*Id(y*fb)]}var Uc=Id(Ob),y=Ob===gc?jf(Ob):Rd(Uc/Id(gc))/Rd(Pg((sg+gc)/2)/Pg((sg+Ob)/2)),wa=Uc*Vf(Pg((sg+Ob)/2),y)/y;if(!y)return qf;Ac.invert=function(fb,Ib){Ib=wa-Ib;var kc=Jf(y)*Xf(fb*fb+Ib*Ib),$c=Xc(fb,Na(Ib))*Jf(Ib);0>Ib*y&&($c-=Tf*Jf(fb)*Jf(Ib));return[$c/y,2*Xb(Vf(wa/kc,1/y))-sg]};return Ac}function jg(Ob,gc){return[Ob,gc]}function oe(Ob,gc){function Ac(fb,Ib){Ib=wa-Ib;fb*=y;return[Ib*jf(fb),wa-Ib*Id(fb)]}var Uc=Id(Ob),
y=Ob===gc?jf(Ob):(Uc-Id(gc))/(gc-Ob),wa=Uc/y+Ob;if(1E-6>Na(y))return jg;Ac.invert=function(fb,Ib){Ib=wa-Ib;var kc=Xc(fb,Na(Ib))*Jf(Ib);0>Ib*y&&(kc-=Tf*Jf(fb)*Jf(Ib));return[kc/y,wa-Jf(y)*Xf(fb*fb+Ib*Ib)]};return Ac}function If(Ob,gc){gc=l(ke*jf(gc));var Ac=gc*gc,Uc=Ac*Ac*Ac;return[Ob*Id(gc)/(ke*(1.340264+3*-.081106*Ac+Uc*(7*8.93E-4+.034164*Ac))),gc*(1.340264+-.081106*Ac+Uc*(8.93E-4+.003796*Ac))]}function hg(Ob,gc){var Ac=Id(gc),Uc=Id(Ob)*Ac;return[Ac*jf(Ob)/Uc,jf(gc)/Uc]}function zg(Ob,gc){var Ac=
gc*gc,Uc=Ac*Ac;return[Ob*(.8707-.131979*Ac+Uc*(-.013791+Uc*(.003971*Ac-.001529*Uc))),gc*(1.007226+Ac*(.015085+Uc*(-.044475+.028874*Ac-.005916*Uc)))]}function pf(Ob,gc){return[Id(gc)*jf(Ob),jf(gc)]}function bg(Ob,gc){var Ac=Id(gc),Uc=1+Id(Ob)*Ac;return[Ac*jf(Ob)/Uc,jf(gc)/Uc]}function wg(Ob,gc){return[Rd(Pg((sg+gc)/2)),-Ob]}var Tf=Math.PI,sg=Tf/2,zc=Tf/4,Wa=2*Tf,Ha=180/Tf,m=Tf/180,Na=Math.abs,Xb=Math.atan,Xc=Math.atan2,Id=Math.cos,Td=Math.ceil,nf=Math.exp,Se=Math.hypot,Rd=Math.log,Vf=Math.pow,jf=Math.sin,
Jf=Math.sign||function(Ob){return 0<Ob?1:0>Ob?-1:0},Xf=Math.sqrt,Pg=Math.tan,dh={Feature:function(Ob,gc){D(Ob.geometry,gc)},FeatureCollection:function(Ob,gc){Ob=Ob.features;for(var Ac=-1,Uc=Ob.length;++Ac<Uc;)D(Ob[Ac].geometry,gc)}},Zg={Sphere:function(Ob,gc){gc.sphere()},Point:function(Ob,gc){Ob=Ob.coordinates;gc.point(Ob[0],Ob[1],Ob[2])},MultiPoint:function(Ob,gc){for(var Ac=Ob.coordinates,Uc=-1,y=Ac.length;++Uc<y;)Ob=Ac[Uc],gc.point(Ob[0],Ob[1],Ob[2])},LineString:function(Ob,gc){U(Ob.coordinates,
gc,0)},MultiLineString:function(Ob,gc){Ob=Ob.coordinates;for(var Ac=-1,Uc=Ob.length;++Ac<Uc;)U(Ob[Ac],gc,0)},Polygon:function(Ob,gc){aa(Ob.coordinates,gc)},MultiPolygon:function(Ob,gc){Ob=Ob.coordinates;for(var Ac=-1,Uc=Ob.length;++Ac<Uc;)aa(Ob[Ac],gc)},GeometryCollection:function(Ob,gc){Ob=Ob.geometries;for(var Ac=-1,Uc=Ob.length;++Ac<Uc;)D(Ob[Ac],gc)}},Yf=new f.Adder,be=new f.Adder,Kf,he,Ue,Pf,Ig,Ya={point:q,lineStart:q,lineEnd:q,polygonStart:function(){Yf=new f.Adder;Ya.lineStart=S;Ya.lineEnd=
V},polygonEnd:function(){var Ob=+Yf;be.add(0>Ob?Wa+Ob:Ob);this.lineStart=this.lineEnd=this.point=q},sphere:function(){be.add(Wa)}},Cb,fc,lc,rc,Pc,$a,xb,Nb,cc,vc,ed,jb={point:N,lineStart:J,lineEnd:T,polygonStart:function(){jb.point=z;jb.lineStart=ba;jb.lineEnd=K;cc=new f.Adder;Ya.polygonStart()},polygonEnd:function(){Ya.polygonEnd();jb.point=N;jb.lineStart=J;jb.lineEnd=T;0>Yf?(Cb=-(lc=180),fc=-(rc=90)):1E-6<cc?rc=90:-1E-6>cc&&(fc=-90);ed[0]=Cb;ed[1]=lc},sphere:function(){Cb=-(lc=180);fc=-(rc=90)}},
Qb,pc,Qc,Cc,vd,Wd,we,ue,sd,Fe,Ge,Me,rf,Ma,lb,vb,nb={sphere:q,point:E,lineStart:W,lineEnd:Ba,polygonStart:function(){nb.lineStart=Ga;nb.lineEnd=ua},polygonEnd:function(){nb.lineStart=W;nb.lineEnd=Ba}};Va.invert=Va;var ac=ra(function(){return!0},function(Ob){var gc=NaN,Ac=NaN,Uc=NaN,y;return{lineStart:function(){Ob.lineStart();y=1},point:function(wa,fb){var Ib=0<wa?Tf:-Tf,kc=Na(wa-gc);if(1E-6>Na(kc-Tf))Ob.point(gc,Ac=0<(Ac+fb)/2?sg:-sg),Ob.point(Uc,Ac),Ob.lineEnd(),Ob.lineStart(),Ob.point(Ib,Ac),Ob.point(wa,
Ac),y=0;else if(Uc!==Ib&&kc>=Tf){1E-6>Na(gc-Uc)&&(gc-=1E-6*Uc);1E-6>Na(wa-Ib)&&(wa-=1E-6*Ib);kc=gc;var $c=Ac,zd=wa,rd,Zd,ve=jf(kc-zd);Ac=1E-6<Na(ve)?Xb((jf($c)*(Zd=Id(fb))*jf(zd)-jf(fb)*(rd=Id($c))*jf(kc))/(rd*Zd*ve)):($c+fb)/2;Ob.point(Uc,Ac);Ob.lineEnd();Ob.lineStart();Ob.point(Ib,Ac);y=0}Ob.point(gc=wa,Ac=fb);Uc=Ib},lineEnd:function(){Ob.lineEnd();gc=Ac=NaN},clean:function(){return 2-y}}},function(Ob,gc,Ac,Uc){null==Ob?(Ac*=sg,Uc.point(-Tf,Ac),Uc.point(0,Ac),Uc.point(Tf,Ac),Uc.point(Tf,0),Uc.point(Tf,
-Ac),Uc.point(0,-Ac),Uc.point(-Tf,-Ac),Uc.point(-Tf,0),Uc.point(-Tf,Ac)):1E-6<Na(Ob[0]-gc[0])?(Ob=Ob[0]<gc[0]?Tf:-Tf,Ac=Ac*Ob/2,Uc.point(-Ob,Ac),Uc.point(0,Ac),Uc.point(Ob,Ac)):Uc.point(gc[0],gc[1])},[-Tf,-sg]),yc,Mc,md,yd,ne={sphere:q,point:q,lineStart:function(){ne.point=Jb;ne.lineEnd=mb},lineEnd:q,polygonStart:q,polygonEnd:q},Le=[null,null],Qe={type:"LineString",coordinates:Le},Xe={Feature:function(Ob,gc){return jc(Ob.geometry,gc)},FeatureCollection:function(Ob,gc){Ob=Ob.features;for(var Ac=-1,
Uc=Ob.length;++Ac<Uc;)if(jc(Ob[Ac].geometry,gc))return!0;return!1}},Ed={Sphere:function(){return!0},Point:function(Ob,gc){return 0===bc(Ob.coordinates,gc)},MultiPoint:function(Ob,gc){Ob=Ob.coordinates;for(var Ac=-1,Uc=Ob.length;++Ac<Uc;)if(0===bc(Ob[Ac],gc))return!0;return!1},LineString:function(Ob,gc){return Tc(Ob.coordinates,gc)},MultiLineString:function(Ob,gc){Ob=Ob.coordinates;for(var Ac=-1,Uc=Ob.length;++Ac<Uc;)if(Tc(Ob[Ac],gc))return!0;return!1},Polygon:function(Ob,gc){return ub(Ob.coordinates,
gc)},MultiPolygon:function(Ob,gc){Ob=Ob.coordinates;for(var Ac=-1,Uc=Ob.length;++Ac<Uc;)if(ub(Ob[Ac],gc))return!0;return!1},GeometryCollection:function(Ob,gc){Ob=Ob.geometries;for(var Ac=-1,Uc=Ob.length;++Ac<Uc;)if(jc(Ob[Ac],gc))return!0;return!1}},kf=Ob=>Ob,og=new f.Adder,kg=new f.Adder,Uf,dg,tg,fh,sb={point:q,lineStart:q,lineEnd:q,polygonStart:function(){sb.lineStart=ee;sb.lineEnd=Ld},polygonEnd:function(){sb.lineStart=sb.lineEnd=sb.point=q;og.add(Na(kg));kg=new f.Adder},result:function(){var Ob=
og/2;og=new f.Adder;return Ob}},tb=Infinity,Lb=tb,Vb=-tb,hc=Vb,dc={point:function(Ob,gc){Ob<tb&&(tb=Ob);Ob>Vb&&(Vb=Ob);gc<Lb&&(Lb=gc);gc>hc&&(hc=gc)},lineStart:q,lineEnd:q,polygonStart:q,polygonEnd:q,result:function(){var Ob=[[tb,Lb],[Vb,hc]];Vb=hc=-(Lb=tb=Infinity);return Ob}},Fc=0,Yc=0,Nc=0,fd=0,mc=0,wd=0,Xd=0,ce=0,De=0,Ua,pb,Rb,ec,Sc={point:fe,lineStart:Ee,lineEnd:Dc,polygonStart:function(){Sc.lineStart=jd;Sc.lineEnd=Qd},polygonEnd:function(){Sc.point=fe;Sc.lineStart=Ee;Sc.lineEnd=Dc},result:function(){var Ob=
De?[Xd/De,ce/De]:wd?[fd/wd,mc/wd]:Nc?[Fc/Nc,Yc/Nc]:[NaN,NaN];Fc=Yc=Nc=fd=mc=wd=Xd=ce=De=0;return Ob}};Bb.prototype={_radius:4.5,pointRadius:function(Ob){return this._radius=Ob,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath();this._point=NaN},point:function(Ob,gc){switch(this._point){case 0:this._context.moveTo(Ob,gc);this._point=1;break;case 1:this._context.lineTo(Ob,gc);
break;default:this._context.moveTo(Ob+this._radius,gc),this._context.arc(Ob,gc,this._radius,0,Wa)}},result:q};var kd=new f.Adder,Fd,Yd,je,re,xe,Af={point:q,lineStart:function(){Af.point=$b},lineEnd:function(){Fd&&Gc(Yd,je);Af.point=q},polygonStart:function(){Fd=!0},polygonEnd:function(){Fd=null},result:function(){var Ob=+kd;kd=new f.Adder;return Ob}};Jc.prototype={_radius:4.5,_circle:ud(4.5),pointRadius:function(Ob){(Ob=+Ob)!==this._radius&&(this._radius=Ob,this._circle=null);return this},polygonStart:function(){this._line=
0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z");this._point=NaN},point:function(Ob,gc){switch(this._point){case 0:this._string.push("M",Ob,",",gc);this._point=1;break;case 1:this._string.push("L",Ob,",",gc);break;default:null==this._circle&&(this._circle=ud(this._radius)),this._string.push("M",Ob,",",gc,this._circle)}},result:function(){if(this._string.length){var Ob=this._string.join("");this._string=[];return Ob}return null}};
xd.prototype={constructor:xd,point:function(Ob,gc){this.stream.point(Ob,gc)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Qf=Id(30*m),Hc=Zc({point:function(Ob,gc){this.stream.point(Ob*m,gc*m)}}),td=Ad(function(Ob){return Xf(2/(1+Ob))});td.invert=$e(function(Ob){return 2*l(Ob/2)});var id=Ad(function(Ob){return(Ob=
h(Ob))&&Ob/jf(Ob)});id.invert=$e(function(Ob){return Ob});qf.invert=function(Ob,gc){return[Ob,2*Xb(nf(gc))-sg]};jg.invert=jg;var ke=Xf(3)/2;If.invert=function(Ob,gc){for(var Ac=gc,Uc=Ac*Ac,y=Uc*Uc*Uc,wa=0,fb;12>wa&&!(fb=Ac*(1.340264+-.081106*Uc+y*(8.93E-4+.003796*Uc))-gc,Uc=1.340264+3*-.081106*Uc+y*(7*8.93E-4+.034164*Uc),Ac-=fb/=Uc,Uc=Ac*Ac,y=Uc*Uc*Uc,1E-12>Na(fb));++wa);return[ke*Ob*(1.340264+3*-.081106*Uc+y*(7*8.93E-4+.034164*Uc))/Id(Ac),l(jf(Ac)/ke)]};hg.invert=$e(Xb);zg.invert=function(Ob,gc){var Ac=
gc,Uc=25;do{var y=Ac*Ac;var wa=y*y;Ac-=wa=(Ac*(1.007226+y*(.015085+wa*(-.044475+.028874*y-.005916*wa)))-gc)/(1.007226+y*(.045255+wa*(-.311325+.259866*y-.005916*11*wa)))}while(1E-6<Na(wa)&&0<--Uc);return[Ob/(.8707+(y=Ac*Ac)*(-.131979+y*(-.013791+y*y*y*(.003971-.001529*y)))),Ac]};pf.invert=$e(l);bg.invert=$e(function(Ob){return 2*Xb(Ob)});wg.invert=function(Ob,gc){return[-gc,2*Xb(nf(Ob))-sg]};k.geoAlbers=Ie;k.geoAlbersUsa=function(){function Ob(Zd){var ve=Zd[0];Zd=Zd[1];return zd=null,(wa.point(ve,
Zd),zd)||(Ib.point(ve,Zd),zd)||($c.point(ve,Zd),zd)}function gc(){Ac=Uc=null;return Ob}var Ac,Uc,y=Ie(),wa,fb=cd().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Ib,kc=cd().rotate([157,0]).center([-3,19.9]).parallels([8,18]),$c,zd,rd={point:function(Zd,ve){zd=[Zd,ve]}};Ob.invert=function(Zd){var ve=y.scale(),Pe=y.translate(),hf=(Zd[0]-Pe[0])/ve;ve=(Zd[1]-Pe[1])/ve;return(.12<=ve&&.234>ve&&-.425<=hf&&-.214>hf?fb:.166<=ve&&.234>ve&&-.214<=hf&&-.115>hf?kc:y).invert(Zd)};Ob.stream=function(Zd){return Ac&&
Uc===Zd?Ac:Ac=Je([y.stream(Uc=Zd),fb.stream(Zd),kc.stream(Zd)])};Ob.precision=function(Zd){if(!arguments.length)return y.precision();y.precision(Zd);fb.precision(Zd);kc.precision(Zd);return gc()};Ob.scale=function(Zd){if(!arguments.length)return y.scale();y.scale(Zd);fb.scale(.35*Zd);kc.scale(Zd);return Ob.translate(y.translate())};Ob.translate=function(Zd){if(!arguments.length)return y.translate();var ve=y.scale(),Pe=+Zd[0],hf=+Zd[1];wa=y.translate(Zd).clipExtent([[Pe-.455*ve,hf-.238*ve],[Pe+.455*
ve,hf+.238*ve]]).stream(rd);Ib=fb.translate([Pe-.307*ve,hf+.201*ve]).clipExtent([[Pe-.425*ve+1E-6,hf+.12*ve+1E-6],[Pe-.214*ve-1E-6,hf+.234*ve-1E-6]]).stream(rd);$c=kc.translate([Pe-.205*ve,hf+.212*ve]).clipExtent([[Pe-.214*ve+1E-6,hf+.166*ve+1E-6],[Pe-.115*ve-1E-6,hf+.234*ve-1E-6]]).stream(rd);return gc()};Ob.fitExtent=function(Zd,ve){return ie(Ob,Zd,ve)};Ob.fitSize=function(Zd,ve){return ie(Ob,[[0,0],Zd],ve)};Ob.fitWidth=function(Zd,ve){return Be(Ob,Zd,ve)};Ob.fitHeight=function(Zd,ve){return uc(Ob,
Zd,ve)};return Ob.scale(1070)};k.geoArea=function(Ob){be=new f.Adder;X(Ob,Ya);return 2*be};k.geoAzimuthalEqualArea=function(){return me(td).scale(124.75).clipAngle(179.999)};k.geoAzimuthalEqualAreaRaw=td;k.geoAzimuthalEquidistant=function(){return me(id).scale(79.4188).clipAngle(179.999)};k.geoAzimuthalEquidistantRaw=id;k.geoBounds=function(Ob){var gc,Ac,Uc;rc=lc=-(Cb=fc=Infinity);vc=[];X(Ob,jb);if(gc=vc.length){vc.sort(Y);Ob=1;var y=vc[0];for(Ac=[y];Ob<gc;++Ob){var wa=vc[Ob];Z(y,wa[0])||Z(y,wa[1])?
(r(y[0],wa[1])>r(y[0],y[1])&&(y[1]=wa[1]),r(wa[0],y[1])>r(y[0],y[1])&&(y[0]=wa[0])):Ac.push(y=wa)}var fb=-Infinity;gc=Ac.length-1;Ob=0;for(y=Ac[gc];Ob<=gc;y=wa,++Ob)wa=Ac[Ob],(Uc=r(y[1],wa[0]))>fb&&(fb=Uc,Cb=wa[0],lc=y[1])}vc=ed=null;return Infinity===Cb||Infinity===fc?[[NaN,NaN],[NaN,NaN]]:[[Cb,fc],[lc,rc]]};k.geoCentroid=function(Ob){Qb=pc=Qc=Cc=vd=Wd=we=ue=0;sd=new f.Adder;Fe=new f.Adder;Ge=new f.Adder;X(Ob,nb);Ob=+sd;var gc=+Fe,Ac=+Ge,Uc=Se(Ob,gc,Ac);return 1E-12>Uc&&(Ob=Wd,gc=we,Ac=ue,1E-6>pc&&
(Ob=Qc,gc=Cc,Ac=vd),Uc=Se(Ob,gc,Ac),1E-12>Uc)?[NaN,NaN]:[Xc(gc,Ob)*Ha,l(Ac/Uc)*Ha]};k.geoCircle=function(){function Ob(){var Ib=gc.apply(this,arguments),kc=Ac.apply(this,arguments)*m,$c=Uc.apply(this,arguments)*m;y=[];wa=La(-Ib[0]*m,-Ib[1]*m,0).invert;Da(fb,kc,$c,1);Ib={type:"Polygon",coordinates:[y]};y=wa=null;return Ib}var gc=Sa([0,0]),Ac=Sa(90),Uc=Sa(6),y,wa,fb={point:function(Ib,kc){y.push(Ib=wa(Ib,kc));Ib[0]*=Ha;Ib[1]*=Ha}};Ob.center=function(Ib){return arguments.length?(gc="function"===typeof Ib?
Ib:Sa([+Ib[0],+Ib[1]]),Ob):gc};Ob.radius=function(Ib){return arguments.length?(Ac="function"===typeof Ib?Ib:Sa(+Ib),Ob):Ac};Ob.precision=function(Ib){return arguments.length?(Uc="function"===typeof Ib?Ib:Sa(+Ib),Ob):Uc};return Ob};k.geoClipAntimeridian=ac;k.geoClipCircle=bb;k.geoClipExtent=function(){var Ob=0,gc=0,Ac=960,Uc=500,y,wa,fb;return fb={stream:function(Ib){return y&&wa===Ib?y:y=zb(Ob,gc,Ac,Uc)(wa=Ib)},extent:function(Ib){return arguments.length?(Ob=+Ib[0][0],gc=+Ib[0][1],Ac=+Ib[1][0],Uc=
+Ib[1][1],y=wa=null,fb):[[Ob,gc],[Ac,Uc]]}}};k.geoClipRectangle=zb;k.geoConicConformal=function(){return hd(af).scale(109.5).parallels([30,30])};k.geoConicConformalRaw=af;k.geoConicEqualArea=cd;k.geoConicEqualAreaRaw=$d;k.geoConicEquidistant=function(){return hd(oe).scale(131.154).center([0,13.9389])};k.geoConicEquidistantRaw=oe;k.geoContains=function(Ob,gc){return(Ob&&Xe.hasOwnProperty(Ob.type)?Xe[Ob.type]:jc)(Ob,gc)};k.geoDistance=bc;k.geoEqualEarth=function(){return me(If).scale(177.158)};k.geoEqualEarthRaw=
If;k.geoEquirectangular=function(){return me(jg).scale(152.63)};k.geoEquirectangularRaw=jg;k.geoGnomonic=function(){return me(hg).scale(144.049).clipAngle(60)};k.geoGnomonicRaw=hg;k.geoGraticule=ze;k.geoGraticule10=function(){return ze()()};k.geoIdentity=function(){function Ob(){Pe=Ac*wa;hf=Ac*fb;gg=vf=null;return gc}function gc(df){var Gf=df[0]*Pe;df=df[1]*hf;if(Ib){var ug=df*kc-Gf*$c;Gf=Gf*kc+df*$c;df=ug}return[Gf+Uc,df+y]}var Ac=1,Uc=0,y=0,wa=1,fb=1,Ib=0,kc,$c,zd=null,rd,Zd,ve,Pe=1,hf=1,eg=Zc({point:function(df,
Gf){df=gc([df,Gf]);this.stream.point(df[0],df[1])}}),Sf=kf,gg,vf;gc.invert=function(df){var Gf=df[0]-Uc;df=df[1]-y;if(Ib){var ug=df*kc+Gf*$c;Gf=Gf*kc-df*$c;df=ug}return[Gf/Pe,df/hf]};gc.stream=function(df){return gg&&vf===df?gg:gg=eg(Sf(vf=df))};gc.postclip=function(df){return arguments.length?(Sf=df,zd=rd=Zd=ve=null,Ob()):Sf};gc.clipExtent=function(df){return arguments.length?(Sf=null==df?(zd=rd=Zd=ve=null,kf):zb(zd=+df[0][0],rd=+df[0][1],Zd=+df[1][0],ve=+df[1][1]),Ob()):null==zd?null:[[zd,rd],[Zd,
ve]]};gc.scale=function(df){return arguments.length?(Ac=+df,Ob()):Ac};gc.translate=function(df){return arguments.length?(Uc=+df[0],y=+df[1],Ob()):[Uc,y]};gc.angle=function(df){return arguments.length?(Ib=df%360*m,$c=jf(Ib),kc=Id(Ib),Ob()):Ib*Ha};gc.reflectX=function(df){return arguments.length?(wa=df?-1:1,Ob()):0>wa};gc.reflectY=function(df){return arguments.length?(fb=df?-1:1,Ob()):0>fb};gc.fitExtent=function(df,Gf){return ie(gc,df,Gf)};gc.fitSize=function(df,Gf){return ie(gc,[[0,0],df],Gf)};gc.fitWidth=
function(df,Gf){return Be(gc,df,Gf)};gc.fitHeight=function(df,Gf){return uc(gc,df,Gf)};return gc};k.geoInterpolate=function(Ob,gc){var Ac=Ob[0]*m,Uc=Ob[1]*m;Ob=gc[0]*m;gc=gc[1]*m;var y=Id(Uc),wa=jf(Uc),fb=Id(gc),Ib=jf(gc),kc=y*Id(Ac),$c=y*jf(Ac),zd=fb*Id(Ob),rd=fb*jf(Ob),Zd=2*l(Xf(u(gc-Uc)+y*fb*u(Ob-Ac))),ve=jf(Zd);Ob=Zd?function(Pe){var hf=jf(Pe*=Zd)/ve,eg=jf(Zd-Pe)/ve;Pe=eg*kc+hf*zd;var Sf=eg*$c+hf*rd;hf=eg*wa+hf*Ib;return[Xc(Sf,Pe)*Ha,Xc(hf,Xf(Pe*Pe+Sf*Sf))*Ha]}:function(){return[Ac*Ha,Uc*Ha]};
Ob.distance=Zd;return Ob};k.geoLength=Db;k.geoMercator=function(){return Ye(qf).scale(961/Wa)};k.geoMercatorRaw=qf;k.geoNaturalEarth1=function(){return me(zg).scale(175.295)};k.geoNaturalEarth1Raw=zg;k.geoOrthographic=function(){return me(pf).scale(249.5).clipAngle(90.000001)};k.geoOrthographicRaw=pf;k.geoPath=function(Ob,gc){function Ac(fb){fb&&("function"===typeof Uc&&wa.pointRadius(+Uc.apply(this,arguments)),X(fb,y(wa)));return wa.result()}var Uc=4.5,y,wa;Ac.area=function(fb){X(fb,y(sb));return sb.result()};
Ac.measure=function(fb){X(fb,y(Af));return Af.result()};Ac.bounds=function(fb){X(fb,y(dc));return dc.result()};Ac.centroid=function(fb){X(fb,y(Sc));return Sc.result()};Ac.projection=function(fb){return arguments.length?(y=null==fb?(Ob=null,kf):(Ob=fb).stream,Ac):Ob};Ac.context=function(fb){if(!arguments.length)return gc;wa=null==fb?(gc=null,new Jc):new Bb(gc=fb);"function"!==typeof Uc&&wa.pointRadius(Uc);return Ac};Ac.pointRadius=function(fb){if(!arguments.length)return Uc;Uc="function"===typeof fb?
fb:(wa.pointRadius(+fb),+fb);return Ac};return Ac.projection(Ob).context(gc)};k.geoProjection=me;k.geoProjectionMutator=od;k.geoRotation=Aa;k.geoStereographic=function(){return me(bg).scale(250).clipAngle(142)};k.geoStereographicRaw=bg;k.geoStream=X;k.geoTransform=function(Ob){return{stream:Zc(Ob)}};k.geoTransverseMercator=function(){var Ob=Ye(wg),gc=Ob.center,Ac=Ob.rotate;Ob.center=function(Uc){return arguments.length?gc([-Uc[1],Uc[0]]):(Uc=gc(),[Uc[1],-Uc[0]])};Ob.rotate=function(Uc){return arguments.length?
Ac([Uc[0],Uc[1],2<Uc.length?Uc[2]+90:90]):(Uc=Ac(),[Uc[0],Uc[1],Uc[2]-90])};return Ac([0,0,90]).scale(159.155)};k.geoTransverseMercatorRaw=wg;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[531]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(530),da(506)):"function"===typeof define&&define.amd?define(["exports","d3-geo","d3-array"],f):f(k.d3=k.d3||{},k.d3,k.d3)})(this,function(k,f,h){function l(sb){return 1<sb?Ue:-1>sb?-Ue:Math.asin(sb)}function u(sb){return 1<sb?0:-1>sb?he:Math.acos(sb)}function q(sb){return 0<sb?Math.sqrt(sb):0}function D(sb){return(Vf(sb)-Vf(-sb))/2}function U(sb){return(Vf(sb)+Vf(-sb))/2}function aa(sb){function tb(hc,
dc){var Fc=Rd(hc),Yc=Rd(dc);dc=be(dc);Fc*=Yc;Fc=-((1-Fc?Jf((1+Fc)/2)/(1-Fc):-.5)+Vb/(1+Fc));return[Fc*Yc*be(hc),Fc*dc]}var Lb=Kf(sb/2),Vb=2*Jf(Rd(sb/2))/(Lb*Lb);tb.invert=function(hc,dc){var Fc=q(hc*hc+dc*dc),Yc=-sb/2,Nc=50;if(!Fc)return[0,0];do{var fd=Yc/2;var mc=Rd(fd);fd=be(fd);var wd=fd/mc,Xd=-Jf(Td(mc));Yc-=mc=(2/wd*Xd-Vb*wd-Fc)/(-Xd/(fd*fd)+1-Vb/(2*mc*mc))*(0>mc?.7:1)}while(1E-6<Td(mc)&&0<--Nc);Nc=be(Yc);return[Se(hc*Nc,Fc*Rd(Yc)),l(dc*Nc/Fc)]};return tb}function X(sb,tb){var Lb=Rd(tb);var Vb=
(Vb=u(Lb*Rd(sb/=2)))?Vb/Math.sin(Vb):1;return[2*Lb*be(sb)*Vb,be(tb)*Vb]}function S(sb){function tb(Yc,Nc){var fd=Rd(Nc),mc=Rd(Yc/=2);return[(1+fd)*be(Yc),(hc*Nc>-Se(mc,dc)-.001?0:10*-hc)+Fc+be(Nc)*Vb-(1+fd)*Lb*mc]}var Lb=be(sb),Vb=Rd(sb),hc=0<=sb?1:-1,dc=Kf(hc*sb),Fc=(1+Lb-Vb)/2;tb.invert=function(Yc,Nc){var fd=0,mc=0,wd=50;do{var Xd=Rd(fd),ce=be(fd),De=Rd(mc),Ua=be(mc),pb=1+De,Rb=pb*ce-Yc,ec=Fc+Ua*Vb-pb*Lb*Xd-Nc,Sc=pb*Xd/2,kd=-ce*Ua;ce=Lb*pb*ce/2;De=Vb*De+Lb*Xd*Ua;Xd=kd*ce-De*Sc;kd=(ec*kd-Rb*De)/
Xd/2;Rb=(Rb*ce-ec*Sc)/Xd;2<Td(Rb)&&(Rb/=2);fd-=kd;mc-=Rb}while((1E-6<Td(kd)||1E-6<Td(Rb))&&0<--wd);return hc*mc>-Se(Rd(fd),dc)-.001?[2*fd,mc]:null};return tb}function V(sb,tb){tb=Kf(tb/2);var Lb=q(1-tb*tb),Vb=1+Lb*Rd(sb/=2);sb=be(sb)*Lb/Vb;tb/=Vb;Vb=sb*sb;Lb=tb*tb;return[4/3*sb*(3+Vb-3*Lb),4/3*tb*(3+3*Vb-Lb)]}function F(sb,tb){var Lb=Td(tb);return Lb<Pf?[sb,Jf(Kf(Pf+tb/2))]:[sb*Rd(Lb)*(2*Ya-1/be(Lb)),Yf(tb)*(2*Ya*(Lb-Pf)-Jf(Kf(Lb/2)))]}function t(sb){function tb(Vb,hc){hc=f.geoAzimuthalEquidistantRaw(Vb,
hc);if(Td(Vb)>Ue){Vb=Se(hc[1],hc[0]);var dc=q(hc[0]*hc[0]+hc[1]*hc[1]),Fc=Lb*Zg((Vb-Ue)/Lb)+Ue,Yc=Se(be(Vb-=Fc),2-Rd(Vb));Vb=Fc+l(he/dc*be(Yc))-Yc;hc[0]=dc*Rd(Vb);hc[1]=dc*be(Vb)}return hc}var Lb=2*he/sb;tb.invert=function(Vb,hc){var dc=q(Vb*Vb+hc*hc);if(dc>Ue){var Fc=Se(hc,Vb);Vb=Lb*Zg((Fc-Ue)/Lb)+Ue;hc=Fc>Vb?-1:1;Fc=dc*Rd(Vb-Fc);Fc=1/Kf(hc*u((Fc-he)/q(he*(he-2*Fc)+dc*dc)));Fc=Vb+2*nf((Fc+hc*q(Fc*Fc-3))/3);Vb=dc*Rd(Fc);hc=dc*be(Fc)}return f.geoAzimuthalEquidistantRaw.invert(Vb,hc)};return tb}function w(sb,
tb){function Lb(Vb,hc){Vb=f.geoAzimuthalEqualAreaRaw(Vb/tb,hc);Vb[0]*=sb;return Vb}2>arguments.length&&(tb=sb);if(1===tb)return f.geoAzimuthalEqualAreaRaw;if(Infinity===tb)return x;Lb.invert=function(Vb,hc){Vb=f.geoAzimuthalEqualAreaRaw.invert(Vb/sb,hc);Vb[0]*=tb;return Vb};return Lb}function x(sb,tb){return[sb*Rd(tb)/Rd(tb/=2),2*be(tb)]}function I(sb,tb,Lb){var Vb=100;Lb=void 0===Lb?0:+Lb;tb=+tb;do{var hc=sb(Lb);var dc=sb(Lb+1E-6);hc===dc&&(dc=hc+1E-6);Lb-=hc=-1E-6*(hc-tb)/(hc-dc)}while(0<Vb--&&
1E-6<Td(hc));return 0>Vb?NaN:Lb}function R(sb,tb,Lb){void 0===tb&&(tb=40);void 0===Lb&&(Lb=1E-12);return function(Vb,hc,dc,Fc){dc=void 0===dc?0:+dc;Fc=void 0===Fc?0:+Fc;for(var Yc=0;Yc<tb;Yc++){var Nc=sb(dc,Fc),fd=Nc[0]-Vb,mc=Nc[1]-hc;if(Td(fd)<Lb&&Td(mc)<Lb)break;var wd=fd*fd+mc*mc;if(wd>Xd)dc-=De/=2,Fc-=pb/=2;else{var Xd=wd;wd=(0<dc?-1:1)*Lb;var ce=(0<Fc?-1:1)*Lb;var De=sb(dc+wd,Fc);var Ua=sb(dc,Fc+ce);var pb=(De[0]-Nc[0])/wd;wd=(De[1]-Nc[1])/wd;De=(Ua[0]-Nc[0])/ce;Nc=(Ua[1]-Nc[1])/ce;ce=Nc*pb-
wd*De;ce=(.5>Td(ce)?.5:1)/ce;De=(mc*De-fd*Nc)*ce;pb=(fd*wd-mc*pb)*ce;dc+=De;Fc+=pb;if(Td(De)<Lb&&Td(pb)<Lb)break}}return[dc,Fc]}}function B(){function sb(Lb,Vb){if(-1.4>Lb+Vb){var hc=(Lb-Vb+1.6)*(Lb+Vb+1.4)/8;Lb+=hc;Vb-=.8*hc*be(Vb+he/2)}hc=tb(Lb,Vb);Lb=(1-Rd(Lb*Vb))/12;0>hc[1]&&(hc[0]*=1+Lb);0<hc[1]&&(hc[1]*=1+Lb/1.5*hc[0]*hc[0]);return hc}var tb=w(1.68,2);sb.invert=R(sb);return sb}function v(sb,tb){sb*=be(tb);var Lb=30,Vb;do tb-=Vb=(tb+be(tb)-sb)/(1+Rd(tb));while(1E-6<Td(Vb)&&0<--Lb);return tb/
2}function O(sb,tb,Lb){function Vb(hc,dc){return[sb*hc*Rd(dc=v(Lb,dc)),tb*be(dc)]}Vb.invert=function(hc,dc){return dc=l(dc/tb),[hc/(sb*Rd(dc)),l((2*dc+be(2*dc))/Lb)]};return Vb}function N(sb,tb){var Lb=v(he,tb);return[2.00276*sb/(1/Rd(tb)+1.11072/Rd(Lb)),(tb+Ya*be(Lb))/2.00276]}function A(sb){var tb=0,Lb=f.geoProjectionMutator(sb);sb=Lb(tb);sb.parallel=function(Vb){return arguments.length?Lb(tb=Vb*rc):tb*lc};return sb}function J(sb,tb){return[sb*Rd(tb),tb]}function T(sb){function tb(Vb,hc){var dc=
Lb+sb-hc;Vb=dc?Vb*Rd(hc)/dc:dc;return[dc*be(Vb),Lb-dc*Rd(Vb)]}if(!sb)return J;var Lb=1/Kf(sb);tb.invert=function(Vb,hc){var dc=q(Vb*Vb+(hc=Lb-hc)*hc),Fc=Lb+sb-dc;return[dc/Rd(Fc)*Se(Vb,hc),Fc]};return tb}function z(sb){function tb(Lb,Vb){Lb=(Vb=Ue-Vb)?Lb*sb*be(Vb)/Vb:Vb;return[Vb*be(Lb)/sb,Ue-Vb*Rd(Lb)]}tb.invert=function(Lb,Vb){Lb*=sb;var hc=Ue-Vb;Vb=q(Lb*Lb+hc*hc);Lb=Se(Lb,hc);return[(Vb?Vb/be(Vb):1)*Lb/sb,Ue-Vb]};return tb}function ba(sb,tb,Lb,Vb,hc,dc){var Fc=Rd(dc);if(1<Td(sb)||1<Td(dc))sb=u(Lb*
hc+tb*Vb*Fc);else{sb=be(sb/2);var Yc=be(dc/2);sb=2*l(q(sb*sb+tb*Vb*Yc*Yc))}return 1E-6<Td(sb)?[sb,Se(Vb*be(dc),tb*hc-Lb*Vb*Fc)]:[0,0]}function K(sb,tb,Lb){return u((sb*sb+tb*tb-Lb*Lb)/(2*sb*tb))}function r(sb,tb,Lb){var Vb=[[sb[0],sb[1],be(sb[1]),Rd(sb[1])],[tb[0],tb[1],be(tb[1]),Rd(tb[1])],[Lb[0],Lb[1],be(Lb[1]),Rd(Lb[1])]];sb=Vb[2];for(Lb=0;3>Lb;++Lb,sb=tb)tb=Vb[Lb],sb.v=ba(tb[1]-sb[1],sb[3],sb[2],tb[3],tb[2],tb[0]-sb[0]),sb.point=[0,0];sb=K(Vb[0].v[0],Vb[2].v[0],Vb[1].v[0]);var hc=K(Vb[0].v[0],
Vb[1].v[0],Vb[2].v[0]),dc=he-sb;Vb[2].point[1]=0;Vb[0].point[0]=-(Vb[1].point[0]=Vb[0].v[0]/2);var Fc=[Vb[2].point[0]=Vb[0].point[0]+Vb[2].v[0]*Rd(sb),2*(Vb[0].point[1]=Vb[1].point[1]=Vb[2].v[0]*be(sb))];return function(Yc,Nc){var fd=be(Nc),mc=Rd(Nc),wd=Array(3),Xd;for(Xd=0;3>Xd;++Xd){var ce=Vb[Xd];wd[Xd]=ba(Nc-ce[1],ce[3],ce[2],mc,fd,Yc-ce[0]);if(!wd[Xd][0])return ce.point;var De=wd[Xd];ce=wd[Xd][1]-ce.v[1];ce-=2*he*jf((ce+he)/(2*he));De[1]=ce}Yc=Fc.slice();for(Xd=0;3>Xd;++Xd)Nc=K(Vb[Xd].v[0],wd[Xd][0],
wd[2==Xd?0:Xd+1][0]),0>wd[Xd][1]&&(Nc=-Nc),Xd?1==Xd?(Nc=hc-Nc,Yc[0]-=wd[Xd][0]*Rd(Nc),Yc[1]-=wd[Xd][0]*be(Nc)):(Nc=dc-Nc,Yc[0]+=wd[Xd][0]*Rd(Nc),Yc[1]+=wd[Xd][0]*be(Nc)):(Yc[0]+=wd[Xd][0]*Rd(Nc),Yc[1]-=wd[Xd][0]*be(Nc));Yc[0]/=3;Yc[1]/=3;return Yc}}function Y(sb){return sb[0]*=rc,sb[1]*=rc,sb}function Z(sb,tb,Lb){var Vb=f.geoCentroid({type:"MultiPoint",coordinates:[sb,tb,Lb]});Vb=[-Vb[0],-Vb[1]];var hc=f.geoRotation(Vb);sb=r(Y(hc(sb)),Y(hc(tb)),Y(hc(Lb)));sb.invert=R(sb);sb=f.geoProjection(sb).rotate(Vb);
var dc=sb.center;delete sb.rotate;sb.center=function(Fc){return arguments.length?dc(hc(Fc)):hc.invert(dc())};return sb.clipAngle(90)}function E(sb,tb){tb=q(1-be(tb));return[2/Cb*sb*tb,Cb*(1-tb)]}function C(sb){function tb(Vb,hc){return[Vb,(Vb?Vb/be(Vb):1)*(be(hc)*Rd(Vb)-Lb*Rd(hc))]}var Lb=Kf(sb);tb.invert=Lb?function(Vb,hc){Vb&&(hc*=be(Vb)/Vb);var dc=Rd(Vb);return[Vb,2*Se(q(dc*dc+Lb*Lb-hc*hc)-dc,Lb-hc)]}:function(Vb,hc){return[Vb,l(Vb?hc*Kf(Vb)/Vb:hc)]};return tb}function W(sb,tb){return[cc*sb*(2*
Rd(2*tb/3)-1)/Cb,cc*Cb*be(tb/3)]}function fa(sb){function tb(Vb,hc){return[Vb*Lb,be(hc)/Lb]}var Lb=Rd(sb);tb.invert=function(Vb,hc){return[Vb/Lb,l(hc*Lb)]};return tb}function ja(sb){function tb(Vb,hc){return[Vb*Lb,(1+Lb)*Kf(hc/2)]}var Lb=Rd(sb);tb.invert=function(Vb,hc){return[Vb/Lb,2*nf(hc/(1+Lb))]};return tb}function Ba(sb,tb){var Lb=q(8/(3*he));return[Lb*sb*(1-Td(tb)/he),Lb*tb]}function Ga(sb,tb){var Lb=q(4-3*be(Td(tb)));return[2/q(6*he)*sb*Lb,Yf(tb)*q(2*he/3)*(2-Lb)]}function ua(sb,tb){var Lb=
q(he*(4+he));return[2/Lb*sb*(1+q(1-4*tb*tb/(he*he))),4/Lb*tb]}function Fa(sb,tb){var Lb=(2+Ue)*be(tb);tb/=2;for(var Vb=0,hc=Infinity;10>Vb&&1E-6<Td(hc);Vb++)hc=Rd(tb),tb-=hc=(tb+be(tb)*(hc+2)-Lb)/(2*hc*(1+hc));return[2/q(he*(4+he))*sb*(1+Rd(tb)),2*q(he/(4+he))*be(tb)]}function Xa(sb,tb){return[sb*(1+Rd(tb))/q(2+he),2*tb/q(2+he)]}function Sa(sb,tb){for(var Lb=(1+Ue)*be(tb),Vb=0,hc=Infinity;10>Vb&&1E-6<Td(hc);Vb++)tb-=hc=(tb+be(tb)-Lb)/(1+Rd(tb));Lb=q(2+he);return[sb*(1+Rd(tb))/Lb,2*tb/Lb]}function eb(sb,
tb){var Lb=be(sb/=2);sb=Rd(sb);var Vb=q(Rd(tb)),hc=Rd(tb/=2);tb=be(tb)/(hc+Ya*sb*Vb);var dc=q(2/(1+tb*tb));Lb=q((Ya*hc+(sb+Lb)*Vb)/(Ya*hc+(sb-Lb)*Vb));return[vc*(dc*(Lb-1/Lb)-2*Jf(Lb)),vc*(dc*tb*(Lb+1/Lb)-2*nf(tb))]}function Va(sb,tb){tb=Kf(tb/2);return[sb*ed*q(1-tb*tb),(1+ed)*tb]}function La(sb,tb){var Lb=tb/2,Vb=Rd(Lb);return[2*sb/Cb*Rd(tb)*Vb*Vb,Cb*Kf(Lb)]}function Ra(sb){function tb(Nc,fd){var mc=Rd(fd),wd=be(fd);return[mc/(hc+sb*mc)*Nc,hc*fd+sb*wd]}function Lb(Nc,fd){Nc=tb(Nc,fd);return[Nc[0]*
Yc,Nc[1]/Yc]}function Vb(Nc){return Lb(0,Nc)[1]}var hc=1-sb,dc=tb(he,0)[0]-tb(-he,0)[0],Fc=tb(0,Ue)[1]-tb(0,-Ue)[1],Yc=q(2*Fc/dc);Lb.invert=function(Nc,fd){fd=I(Vb,fd);return[Nc/Yc*(sb+hc/Rd(fd)),fd]};return Lb}function la(sb){return[2*sb[0],2*nf(be(sb[1]*rc))*lc]}function ma(sb,tb){function Lb(dc,Fc){dc=f.geoAzimuthalEquidistantRaw(dc,Fc);Fc=dc[0];var Yc=dc[1],Nc=Fc*Fc+Yc*Yc;if(Nc>hc){var fd=q(Nc);Fc=Se(Yc,Fc);Nc=Vb*Zg(Fc/Vb);Yc=Fc-Nc;var mc=sb*Rd(Yc),wd=(sb*be(Yc)-Yc*be(mc))/(Ue-mc),Xd=Aa(Yc,wd),
ce=(he-sb)/Da(Xd,mc,he);Fc=fd;var De=50,Ua;do Fc-=Ua=(sb+Da(Xd,mc,Fc)*ce-fd)/(Xd(Fc)*ce);while(1E-6<Td(Ua)&&0<--De);Yc*=be(Fc);Fc<Ue&&(Yc-=wd*(Fc-Ue));fd=be(Nc);Nc=Rd(Nc);dc[0]=Fc*Nc-Yc*fd;dc[1]=Fc*fd+Yc*Nc}return dc}var Vb=2*he/tb,hc=sb*sb;Lb.invert=function(dc,Fc){var Yc=dc*dc+Fc*Fc;if(Yc>hc){var Nc=q(Yc);Fc=Se(Fc,dc);Yc=Vb*Zg(Fc/Vb);Fc-=Yc;dc=Nc*Rd(Fc);Fc=Nc*be(Fc);Nc=dc-Ue;for(var fd=be(dc),mc=Fc/fd,wd=dc<Ue?Infinity:0,Xd=10;;){var ce=sb*be(mc),De=sb*Rd(mc),Ua=be(De),pb=Ue-De,Rb=(ce-mc*Ua)/pb,
ec=Aa(mc,Rb);if(1E-12>Td(wd)||!--Xd)break;mc-=wd=(mc*fd-Rb*Nc-Fc)/(fd-2*Nc*(pb*(De+mc*ce*Rd(De)-Ua)-ce*(ce-mc*Ua))/(pb*pb))}Nc=sb+Da(ec,De,dc)*(he-sb)/Da(ec,De,he);Fc=Yc+mc;dc=Nc*Rd(Fc);Fc=Nc*be(Fc)}return f.geoAzimuthalEquidistantRaw.invert(dc,Fc)};return Lb}function Aa(sb,tb){return function(Lb){var Vb=sb*Rd(Lb);Lb<Ue&&(Vb-=tb);return q(1+Vb*Vb)}}function Da(sb,tb,Lb){var Vb=(Lb-tb)/50;Lb=sb(tb)+sb(Lb);for(var hc=1;50>hc;++hc)Lb+=2*sb(tb+=Vb);return.5*Lb*Vb}function Qa(sb,tb,Lb,Vb,hc,dc,Fc,Yc){function Nc(fd,
mc){if(!mc)return[sb*fd/he,0];var wd=mc*mc,Xd=sb+wd*(tb+wd*(Lb+wd*Vb)),ce=mc*(hc-1+wd*(dc-Yc+wd*Fc));ce=(Xd*Xd+ce*ce)/(2*ce);fd=fd*l(Xd/ce)/he;return[ce*be(fd),mc*(1+wd*Yc)+ce*(1-Rd(fd))]}8>arguments.length&&(Yc=0);Nc.invert=function(fd,mc){var wd=he*fd/sb,Xd=mc,ce=50;do{var De=Xd*Xd,Ua=sb+De*(tb+De*(Lb+De*Vb)),pb=Xd*(hc-1+De*(dc-Yc+De*Fc)),Rb=Ua*Ua+pb*pb,ec=2*pb;var Sc=Rb/ec;var kd=Sc*Sc;var Fd=l(Ua/Sc)/he;var Yd=wd*Fd,je=Ua*Ua,re=(2*tb+De*(4*Lb+6*De*Vb))*Xd,xe=hc+De*(3*dc+5*De*Fc);pb=(2*(Ua*re+
pb*(xe-1))*ec-2*Rb*(xe-1))/(ec*ec);Rb=Rd(Yd);xe=be(Yd);ec=Sc*Rb;Yd=Sc*xe;kd=wd/he*(1/q(1-je/kd))*(re*Sc-Ua*pb)/kd;Ua=Yd-fd;De=Xd*(1+De*Yc)+Sc-ec-mc;Sc=pb*xe+ec*kd;je=ec*Fd;pb=1+pb-(pb*Rb-Yd*kd);Fd*=Yd;Rb=Sc*Fd-pb*je;if(!Rb)break;wd-=Sc=(De*Sc-Ua*pb)/Rb;Xd-=Fd=(Ua*Fd-De*je)/Rb}while((1E-6<Td(Sc)||1E-6<Td(Fd))&&0<--ce);return[wd,Xd]};return Nc}function Ea(sb,tb){var Lb=sb*sb,Vb=tb*tb;return[sb*(1-.162388*Vb)*(.87-9.52426E-4*Lb*Lb),tb*(1+Vb/12)]}function kb(sb){function tb(Vb,hc){var dc=0<Vb?-.5:.5;
Vb=sb(Vb+dc*he,hc);Vb[0]-=dc*Lb;return Vb}var Lb=sb(Ue,0)[0]-sb(-Ue,0)[0];sb.invert&&(tb.invert=function(Vb,hc){var dc=0<Vb?-.5:.5;Vb=sb.invert(Vb+dc*Lb,hc);dc=Vb[0]-dc*he;dc<-he?dc+=2*he:dc>he&&(dc-=2*he);Vb[0]=dc;return Vb});return tb}function cb(sb,tb){var Lb=Yf(sb),Vb=Yf(tb),hc=Rd(tb),dc=Rd(sb)*hc;sb=be(sb)*hc;tb=be(Vb*tb);sb=Td(Se(sb,tb));tb=l(dc);1E-6<Td(sb-Ue)&&(sb%=Ue);dc=Mb(sb>he/4?Ue-sb:sb,tb);sb>he/4&&(tb=dc[0],dc[0]=-dc[1],dc[1]=-tb);return dc[0]*=Lb,dc[1]*=-Vb,dc}function Mb(sb,tb){if(tb===
Ue)return[0,0];var Lb=be(tb),Vb=Lb*Lb,hc=Vb*Vb,dc=1+hc,Fc=1+3*hc,Yc=1-hc,Nc=l(1/q(dc)),fd=Yc+Vb*dc*Nc,mc=(1-Lb)/fd,wd=q(mc),Xd=mc*dc,ce=q(Xd),De=wd*Yc;if(0===sb)return[0,-(De+Vb*ce)];var Ua=Rd(tb),pb=1/Ua,Rb=2*Lb*Ua;Nc=(-fd*Ua-(1-Lb)*(-3*Vb+Nc*Fc)*Rb)/(fd*fd);Lb=-pb*Rb;dc=-pb*(Vb*dc*Nc+mc*Fc*Rb);Yc=-2*pb*(.5*Nc/wd*Yc-2*Vb*wd*Rb);wd=4*sb/he;if(sb>.222*he||tb<he/4&&sb>.175*he){tb=(De+Vb*q(Xd*(1+hc)-De*De))/(1+hc);if(sb>he/4)return[tb,tb];hc=tb;pb=.5*tb;tb=.5*(pb+hc);sb=50;do{Rb=q(Xd-tb*tb);Rb=tb*(Yc+
Lb*Rb)+dc*l(tb/ce)-wd;if(!Rb)break;0>Rb?pb=tb:hc=tb;tb=.5*(pb+hc)}while(1E-6<Td(hc-pb)&&0<--sb)}else{tb=1E-6;sb=25;do Rb=tb*tb,hc=q(Xd-Rb),Fc=Yc+Lb*hc,pb=tb*Fc+dc*l(tb/ce)-wd,Rb=Fc+(dc-Lb*Rb)/hc,tb-=hc=hc?pb/Rb:0;while(1E-6<Td(hc)&&0<--sb)}return[tb,-De-Vb*q(Xd-tb*tb)]}function Gb(sb,tb){if(1E-6>tb){var Lb=be(sb);var Vb=Rd(sb);var hc=tb*(sb-Lb*Vb)/4;return[Lb-hc*Vb,Vb+hc*Lb,1-tb*Lb*Lb/2,sb-hc]}if(.999999<=tb){hc=(1-tb)/4;Vb=U(sb);Lb=Vf(2*sb);Lb=(Lb-1)/(Lb+1);tb=1/Vb;var dc=Vb*D(sb);return[Lb+hc*(dc-
sb)/(Vb*Vb),tb-hc*Lb*tb*(dc-sb),tb+hc*Lb*tb*(dc+sb),2*nf(Vf(sb))-Ue+hc*(dc-sb)/Vb]}var Fc=[1,0,0,0,0,0,0,0,0],Yc=[q(tb),0,0,0,0,0,0,0,0],Nc=0;Vb=q(1-tb);for(dc=1;1E-6<Td(Yc[Nc]/Fc[Nc])&&8>Nc;)hc=Fc[Nc++],Yc[Nc]=(hc-Vb)/2,Fc[Nc]=(hc+Vb)/2,Vb=q(hc*Vb),dc*=2;tb=dc*Fc[Nc]*sb;do Lb=Yc[Nc]*be(Vb=tb)/Fc[Nc],tb=(l(Lb)+tb)/2;while(--Nc);return[be(tb),Lb=Rd(tb),Lb/Rd(tb-Vb),tb]}function Wb(sb,tb){if(!tb)return sb;if(1===tb)return Jf(Kf(sb/2+Pf));var Lb=1,Vb=q(1-tb),hc=q(tb);for(tb=0;1E-6<Td(hc);tb++)sb%he?
(hc=nf(Vb*Kf(sb)/Lb),0>hc&&(hc+=he),sb+=hc+~~(sb/he)*he):sb+=sb,hc=(Lb+Vb)/2,Vb=q(Lb*Vb),hc=((Lb=hc)-Vb)/2;return sb/(dh(2,tb)*Lb)}function sa(sb,tb){var Lb=(Ya-1)/(Ya+1),Vb=q(1-Lb*Lb),hc=Wb(Ue,Vb*Vb),dc=Jf(Kf(he/4+Td(tb)/2));dc=Vf(-1*dc)/q(Lb);Lb=dc*Rd(-1*sb);var Fc=dc*be(-1*sb);sb=Lb*Lb;dc=Fc+1;Fc=1-sb-Fc*Fc;sb=[.5*((0<=Lb?Ue:-Ue)-Se(Fc,2*Lb)),-.25*Jf(Fc*Fc+4*sb)+.5*Jf(dc*dc+sb)];Lb=sb[0];sb=sb[1];Vb*=Vb;dc=Td(Lb);Fc=Td(sb);Fc=D(Fc);if(dc){var Yc=1/be(dc);dc=1/(Kf(dc)*Kf(dc));Fc=-(dc+Vb*Fc*Fc*Yc*
Yc-1+Vb);Fc=(-Fc+q(Fc*Fc-4*(Vb-1)*dc))/2;Vb=[Wb(nf(1/q(Fc)),Vb)*Yf(Lb),Wb(nf(q((Fc/dc-1)/Vb)),1-Vb)*Yf(sb)]}else Vb=[0,Wb(nf(Fc),1-Vb)*Yf(sb)];return[-Vb[1],(0<=tb?1:-1)*(.5*hc-Vb[0])]}function ra(sb){function tb(dc,Fc){var Yc=hc(dc,Fc);dc=Yc[0];Fc=Yc[1];Yc=be(Fc);Fc=Rd(Fc);var Nc=Rd(dc),fd=u(Lb*Yc+Vb*Fc*Nc),mc=be(fd);fd=1E-6<Td(mc)?fd/mc:1;return[fd*Vb*be(dc),(Td(dc)>Ue?fd:-fd)*(Lb*Fc-Vb*Yc*Nc)]}var Lb=be(sb),Vb=Rd(sb),hc=xa(sb);hc.invert=xa(-sb);tb.invert=function(dc,Fc){var Yc=q(dc*dc+Fc*Fc),Nc=
-be(Yc),fd=Rd(Yc),mc=Yc*fd,wd=-Fc*Nc,Xd=Yc*Lb,ce=q(mc*mc+wd*wd-Xd*Xd);mc=Se(mc*Xd+wd*ce,wd*Xd-mc*ce);dc=(Yc>Ue?-1:1)*Se(dc*Nc,Yc*Rd(mc)*fd+Fc*be(mc)*Nc);return hc.invert(dc,mc)};return tb}function xa(sb){var tb=be(sb),Lb=Rd(sb);return function(Vb,hc){var dc=Rd(hc),Fc=Rd(Vb)*dc;Vb=be(Vb)*dc;hc=be(hc);return[Se(Vb,Fc*Lb-hc*tb),l(hc*Lb+Fc*tb)]}}function Ia(sb){function tb(mc,wd){var Xd=Td(wd);if(Xd>Lb){var ce=Pg(sb-1,Xf(0,jf((mc+he)/Yc)));mc+=he*(sb-1)/sb-ce*Yc;mc=E(mc,Xd);mc[0]=mc[0]*fc/Vb-fc*(sb-1)/
(2*sb)+ce*fc/sb;mc[1]=hc+4*(mc[1]-dc)*Fc/fc;0>wd&&(mc[1]=-mc[1])}else mc=vd(mc,wd);mc[0]*=Nc;mc[1]/=fd;return mc}var Lb=Cc*rc,Vb=E(he,Lb)[0]-E(-he,Lb)[0],hc=vd(0,Lb)[1],dc=E(0,Lb)[1],Fc=Cb-dc,Yc=fc/sb,Nc=4/fc,fd=hc+Fc*Fc*4/fc;tb.invert=function(mc,wd){mc/=Nc;wd*=fd;var Xd=Td(wd);if(Xd>hc){var ce=Pg(sb-1,Xf(0,jf((mc+he)/Yc)));mc=(mc+he*(sb-1)/sb-ce*Yc)*Vb/fc;mc=E.invert(mc,.25*(Xd-hc)*fc/Fc+dc);mc[0]-=he*(sb-1)/sb-ce*Yc;0>wd&&(mc[1]=-mc[1]);return mc}return vd.invert(mc,wd)};return tb}function bb(sb,
tb){return[sb,tb&1?89.999999:Cc]}function Hb(sb,tb){return[sb,tb&1?-89.999999:-Cc]}function zb(sb){return[.999999*sb[0],sb[1]]}function mb(sb){function tb(mc,wd){var Xd=1-be(wd);if(Xd&&2>Xd){var ce=Ue-wd,De=25;do{var Ua=be(ce);var pb=Rd(ce);wd=hc+Se(Ua,Lb-pb);pb=1+fd-2*Lb*pb;ce-=Ua=(ce-Nc*hc-Lb*Ua+pb*wd-.5*Xd*Fc)/(2*Lb*Ua*wd)}while(1E-12<Td(Ua)&&0<--De);Xd=dc*q(pb);mc=mc*wd/he}else Xd=dc*(sb+Xd),mc=mc*hc/he;return[Xd*be(mc),Yc-Xd*Rd(mc)]}var Lb=1+sb,Vb=be(1/Lb),hc=l(Vb),dc=2*q(he/(Fc=he+4*hc*Lb)),
Fc,Yc=.5*dc*(Lb+q(sb*(2+sb))),Nc=sb*sb,fd=Lb*Lb;tb.invert=function(mc,wd){var Xd=mc*mc+(wd-=Yc)*wd;wd=(1+fd-Xd/(dc*dc))/(2*Lb);var ce=u(wd),De=be(ce),Ua=hc+Se(De,Lb-wd);return[l(mc/q(Xd))*he/Ua,l(1-2*(ce-Nc*hc-Lb*De+(1+fd-2*Lb*wd)*Ua)/Fc)]};return tb}function Jb(sb,tb){return-.7109889596207567<tb?(sb=xb(sb,tb),sb[1]+=.0528035274542,sb):J(sb,tb)}function Eb(sb,tb){return.7109889596207567<Td(tb)?(sb=xb(sb,tb),sb[1]-=0<tb?.0528035274542:-.0528035274542,sb):J(sb,tb)}function Db(sb,tb,Lb,Vb){function hc(wd){return q(1+
sb*Rd(2*wd)+tb*Rd(4*wd))}function dc(wd){wd*=Lb;return(2*wd+(1+sb-tb/2)*be(2*wd)+(sb+tb)/2*be(4*wd)+tb/2*be(6*wd))/Lb}function Fc(wd){return hc(wd)*be(wd)}var Yc=q(4*he/(2*Lb+(1+sb-tb/2)*be(2*Lb)+(sb+tb)/2*be(4*Lb)+tb/2*be(6*Lb))),Nc=q(Vb*be(Lb)*q((1+sb*Rd(2*Lb)+tb*Rd(4*Lb))/(1+sb+tb))),fd=Lb*dc(1),mc=function(wd,Xd){var ce=Lb*I(dc,fd*be(Xd)/Lb,Xd/he);isNaN(ce)&&(ce=Lb*Yf(Xd));Xd=Yc*hc(ce);return[Xd*Nc*wd/he*Rd(ce),Xd/Nc*be(ce)]};mc.invert=function(wd,Xd){Xd=I(Fc,Xd*Nc/Yc);return[wd*he/(Rd(Xd)*Yc*
Nc*hc(Xd)),l(Lb*dc(Xd/Lb)/fd)]};0===Lb&&(Yc=q(Vb/he),mc=function(wd,Xd){return[wd*Yc,be(Xd)/Yc]},mc.invert=function(wd,Xd){return[wd/Yc,l(Xd*Yc)]});return mc}function bc(sb,tb,Lb,Vb,hc,dc,Fc,Yc,Nc,fd,mc){if(mc.nanEncountered)return NaN;var wd=Lb-tb;var Xd=sb(tb+.25*wd);var ce=sb(Lb-.25*wd);if(isNaN(Xd))mc.nanEncountered=!0;else if(isNaN(ce))mc.nanEncountered=!0;else{var De=wd*(Vb+4*Xd+hc)/12;var Ua=wd*(hc+4*ce+dc)/12;var pb=De+Ua;Fc=(pb-Fc)/15;if(fd>Nc)return mc.maxDepthCount++,pb+Fc;if(Math.abs(Fc)<
Yc)return pb+Fc;wd=tb+.5*wd;tb=bc(sb,tb,wd,Vb,Xd,hc,De,.5*Yc,Nc,fd+1,mc);if(isNaN(tb))return mc.nanEncountered=!0,NaN;sb=bc(sb,wd,Lb,hc,ce,dc,Ua,.5*Yc,Nc,fd+1,mc);return isNaN(sb)?(mc.nanEncountered=!0,NaN):tb+sb}}function jc(sb,tb,Lb,Vb,hc){void 0===Vb&&(Vb=1E-8);void 0===hc&&(hc=20);var dc=sb(tb),Fc=sb(.5*(tb+Lb)),Yc=sb(Lb);return bc(sb,tb,Lb,dc,Fc,Yc,(dc+4*Fc+Yc)*(Lb-tb)/6,Vb,hc,1,{maxDepthCount:0,nanEncountered:!1})}function Tc(sb,tb,Lb){function Vb(mc){return sb+(1-sb)*dh(1-dh(mc,tb),1/tb)}function hc(mc){var wd=
0,Xd=1E3,ce=500;do Yc[ce]>mc?Xd=ce:wd=ce,ce=wd+Xd>>1;while(ce>wd);(wd=Yc[ce+1]-Yc[ce])&&(wd=(mc-Yc[ce+1])/wd);return(ce+1+wd)/1E3}for(var dc=1/jc(Vb,0,1,1E-4),Fc=1.00000001*dc,Yc=[],Nc=0;1E3>=Nc;Nc++)Yc.push(jc(Vb,0,Nc/1E3,1E-4)*Fc);var fd=2*hc(1)/he*dc/Lb;Lb=function(mc,wd){var Xd=hc(Td(be(wd)));mc*=Vb(Xd);Xd/=fd;return[mc,0<=wd?Xd:-Xd]};Lb.invert=function(mc,wd){var Xd;wd*=fd;1>Td(wd)&&(Xd=Yf(wd)*l(jc(Vb,0,Td(wd),1E-4)*dc));return[mc/Vb(Td(wd)),Xd]};return Lb}function ub(sb,tb){for(var Lb=-1,Vb=
sb.length,hc=sb[0],dc,Fc,Yc,Nc=[];++Lb<Vb;){dc=sb[Lb];Fc=(dc[0]-hc[0])/tb;Yc=(dc[1]-hc[1])/tb;for(var fd=0;fd<tb;++fd)Nc.push([hc[0]+fd*Fc,hc[1]+fd*Yc]);hc=dc}Nc.push(dc);return Nc}function Rc(sb){var tb=[],Lb,Vb=sb[0].length;for(Lb=0;Lb<Vb;++Lb){var hc=sb[0][Lb];var dc=hc[0][0];var Fc=hc[0][1];var Yc=hc[1][1];var Nc=hc[2][0];hc=hc[2][1];tb.push(ub([[dc+1E-6,Fc+1E-6],[dc+1E-6,Yc-1E-6],[Nc-1E-6,Yc-1E-6],[Nc-1E-6,hc+1E-6]],30))}for(Lb=sb[1].length-1;0<=Lb;--Lb)hc=sb[1][Lb],dc=hc[0][0],Fc=hc[0][1],Yc=
hc[1][1],Nc=hc[2][0],hc=hc[2][1],tb.push(ub([[Nc-1E-6,hc-1E-6],[Nc-1E-6,Yc+1E-6],[dc+1E-6,Yc+1E-6],[dc+1E-6,Fc-1E-6]],30));return{type:"Polygon",coordinates:[h.merge(tb)]}}function Gd(sb,tb,Lb){function Vb(Nc,fd){for(var mc=0>fd?-1:1,wd=tb[+(0>fd)],Xd=0,ce=wd.length-1;Xd<ce&&Nc>wd[Xd][2][0];++Xd);Nc=sb(Nc-wd[Xd][1][0],fd);Nc[0]+=sb(wd[Xd][1][0],mc*fd>mc*wd[Xd][0][1]?wd[Xd][0][1]:fd)[0];return Nc}var hc,dc;Lb?Vb.invert=Lb(Vb):sb.invert&&(Vb.invert=function(Nc,fd){for(var mc=dc[+(0>fd)],wd=tb[+(0>fd)],
Xd=0,ce=mc.length;Xd<ce;++Xd){var De=mc[Xd];if(De[0][0]<=Nc&&Nc<De[1][0]&&De[0][1]<=fd&&fd<De[1][1])return mc=sb.invert(Nc-sb(wd[Xd][1][0],0)[0],fd),mc[0]+=wd[Xd][1][0],wd=Vb(mc[0],mc[1]),Nc=[Nc,fd],1E-6>Td(wd[0]-Nc[0])&&1E-6>Td(wd[1]-Nc[1])?mc:null}});var Fc=f.geoProjection(Vb),Yc=Fc.stream;Fc.stream=function(Nc){var fd=Fc.rotate(),mc=Yc(Nc),wd=(Fc.rotate([0,0]),Yc(Nc));Fc.rotate(fd);mc.sphere=function(){f.geoStream(hc,wd)};return mc};Fc.lobes=function(Nc){if(!arguments.length)return tb.map(function(fd){return fd.map(function(mc){return[[mc[0][0]*
lc,mc[0][1]*lc],[mc[1][0]*lc,mc[1][1]*lc],[mc[2][0]*lc,mc[2][1]*lc]]})});hc=Rc(Nc);tb=Nc.map(function(fd){return fd.map(function(mc){return[[mc[0][0]*rc,mc[0][1]*rc],[mc[1][0]*rc,mc[1][1]*rc],[mc[2][0]*rc,mc[2][1]*rc]]})});dc=tb.map(function(fd){return fd.map(function(mc){var wd=sb(mc[0][0],mc[0][1])[0],Xd=sb(mc[2][0],mc[2][1])[0],ce=sb(mc[1][0],mc[0][1])[1];mc=sb(mc[1][0],mc[1][1])[1];if(ce>mc){var De=ce;ce=mc;mc=De}return[[wd,ce],[Xd,mc]]})});return Fc};null!=tb&&Fc.lobes(tb);return Fc}function Kd(sb,
tb){return[3/fc*sb*q(he*he/3-tb*tb),tb]}function Vd(sb){function tb(Lb,Vb){if(1E-6>Td(Td(Vb)-Ue))return[0,0>Vb?-2:2];Vb=be(Vb);Vb=dh((1+Vb)/(1-Vb),sb/2);var hc=.5*(Vb+1/Vb)+Rd(Lb*=sb);return[2*be(Lb)/hc,(Vb-1/Vb)/hc]}tb.invert=function(Lb,Vb){var hc=Td(Vb);if(1E-6>Td(hc-2))return Lb?null:[0,Yf(Vb)*Ue];if(2<hc)return null;Lb/=2;Vb/=2;hc=Lb*Lb;var dc=Vb*Vb;Vb=2*Vb/(1+hc+dc);Vb=dh((1+Vb)/(1-Vb),1/sb);return[Se(2*Lb,1-hc-dc)/sb,l((Vb-1)/(Vb+1))]};return tb}function ze(sb,tb){return[sb*(1+q(Rd(tb)))/2,
tb/(Rd(tb/2)*Rd(sb/6))]}function ee(sb,tb){var Lb=sb*sb,Vb=tb*tb;return[sb*(.975534+Vb*(-.119161+-.0143059*Lb+-.0547009*Vb)),tb*(1.00384+Lb*(.0802894+-.02855*Vb+1.99025E-4*Lb)+Vb*(.0998909+-.0491032*Vb))]}function bd(sb,tb){return[be(sb)/Rd(tb),Kf(tb)*Rd(sb)]}function Bd(sb){function tb(hc,dc){var Fc=dc-sb,Yc=1E-6>Td(Fc)?hc*Lb:1E-6>Td(Yc=Pf+dc/2)||1E-6>Td(Td(Yc)-Ue)?0:hc*Fc/Jf(Kf(Yc)/Vb);return[Yc,Fc]}var Lb=Rd(sb),Vb=Kf(Pf+sb/2);tb.invert=function(hc,dc){var Fc,Yc=dc+sb;return[1E-6>Td(dc)?hc/Lb:
1E-6>Td(Fc=Pf+Yc/2)||1E-6>Td(Td(Fc)-Ue)?0:hc*Jf(Kf(Fc)/Vb)/dc,Yc]};return tb}function Ld(sb,tb){return[sb,1.25*Jf(Kf(Pf+.4*tb))]}function fe(sb){function tb(Vb,hc){var dc=Rd(hc),Fc=2/(1+dc*Rd(Vb));Vb=Fc*dc*be(Vb);hc=Fc*be(hc);Fc=Lb;dc=sb[Fc];for(var Yc=dc[0],Nc=dc[1],fd;0<=--Fc;)dc=sb[Fc],Yc=dc[0]+Vb*(fd=Yc)-hc*Nc,Nc=dc[1]+Vb*Nc+hc*fd;Yc=Vb*(fd=Yc)-hc*Nc;return[Yc,Vb*Nc+hc*fd]}var Lb=sb.length-1;tb.invert=function(Vb,hc){var dc=20,Fc=Vb,Yc=hc;do{for(var Nc=Lb,fd=sb[Nc],mc=fd[0],wd=fd[1],Xd=0,ce=0,
De;0<=--Nc;)fd=sb[Nc],Xd=mc+Fc*(De=Xd)-Yc*ce,ce=wd+Fc*ce+Yc*De,mc=fd[0]+Fc*(De=mc)-Yc*wd,wd=fd[1]+Fc*wd+Yc*De;Xd=mc+Fc*(De=Xd)-Yc*ce;ce=wd+Fc*ce+Yc*De;mc=Fc*(De=mc)-Yc*wd-Vb;wd=Fc*wd+Yc*De-hc;fd=Xd*Xd+ce*ce;Fc-=Nc=(mc*Xd+wd*ce)/fd;Yc-=mc=(wd*Xd-mc*ce)/fd}while(1E-12<Td(Nc)+Td(mc)&&0<--dc);if(dc)return Vb=q(Fc*Fc+Yc*Yc),hc=2*nf(.5*Vb),dc=be(hc),[Se(Fc*dc,Vb*Rd(hc)),Vb?l(Yc*dc/Vb):0]};return tb}function Ee(sb,tb){sb=f.geoProjection(fe(sb)).rotate(tb).clipAngle(90);var Lb=f.geoRotation(tb),Vb=sb.center;
delete sb.rotate;sb.center=function(hc){return arguments.length?Vb(Lb(hc)):Lb.invert(Vb())};return sb}function dd(sb,tb){tb=l(7*be(tb)/(3*ac));return[ac*sb*(2*Rd(2*tb/3)-1)/yc,9*be(tb/3)/yc]}function nd(sb,tb){for(var Lb=(1+Ig)*be(tb),Vb=0,hc;25>Vb&&!(tb-=hc=(be(tb/2)+be(tb)-Lb)/(.5*Rd(tb/2)+Rd(tb)),1E-6>Td(hc));Vb++);return[sb*(1+2*Rd(tb)/Rd(tb/2))/(3*Ya),2*q(3)*be(tb/2)/q(2+Ya)]}function Dc(sb,tb){var Lb=q(6/(4+he)),Vb=(1+he/4)*be(tb);tb/=2;for(var hc=0,dc;25>hc&&!(tb-=dc=(tb/2+be(tb)-Vb)/(.5+Rd(tb)),
1E-6>Td(dc));hc++);return[Lb*(.5+Rd(tb))*sb/1.5,Lb*tb]}function jd(sb,tb){var Lb=tb*tb,Vb=Lb*Lb,hc=Lb*Vb;return[sb*(.84719-.13063*Lb+hc*hc*(-.04515+.05494*Lb-.02326*Vb+.00331*hc)),tb*(1.01183+Vb*Vb*(-.02625+.01926*Lb-.00396*Vb))]}function Qd(sb,tb){return[sb*(1+Rd(tb))/2,2*(tb-Kf(tb/2))]}function ae(sb,tb){var Lb=be(tb),Vb=Rd(tb),hc=Yf(sb);if(0===sb||Td(tb)===Ue)return[0,tb];if(0===tb)return[sb,0];if(Td(sb)===Ue)return[sb*Vb,Ue*Lb];sb=he/(2*sb)-2*sb/he;var dc=2*tb/he,Fc=(1-dc*dc)/(Lb-dc),Yc=sb*sb,
Nc=Fc*Fc;dc=1+Yc/Nc;var fd=1+Nc/Yc,mc=(sb*Lb/Fc-sb/2)/dc,wd=(Nc*Lb/Yc+Fc/2)/fd;Lb=wd*wd-(Nc*Lb*Lb/Yc+Fc*Lb-1)/fd;return[Ue*(mc+q(mc*mc+Vb*Vb/dc)*hc),Ue*(wd+q(0>Lb?0:Lb)*Yf(-tb*sb)*hc)]}function te(sb,tb){var Lb=tb*tb;return[sb,tb*(1.0148+Lb*Lb*(.23185+Lb*(-.14499+.02406*Lb)))]}function Bb(sb,tb){if(1E-6>Td(tb))return[sb,0];var Lb=Kf(tb);sb*=be(tb);return[be(sb)/Lb,tb+(1-Rd(sb))/Lb]}function $b(sb,tb){var Lb=Jc(sb[1],sb[0]),Vb=Jc(tb[1],tb[0]),hc=Se(Lb[0]*Vb[1]-Lb[1]*Vb[0],Lb[0]*Vb[0]+Lb[1]*Vb[1]);
Lb=q(Lb[0]*Lb[0]+Lb[1]*Lb[1])/q(Vb[0]*Vb[0]+Vb[1]*Vb[1]);return Gc([1,0,sb[0][0],0,1,sb[0][1]],Gc([Lb,0,0,0,Lb,0],Gc([Rd(hc),be(hc),0,-be(hc),Rd(hc),0],[1,0,-tb[0][0],0,1,-tb[0][1]])))}function Gc(sb,tb){return[sb[0]*tb[0]+sb[1]*tb[3],sb[0]*tb[1]+sb[1]*tb[4],sb[0]*tb[2]+sb[1]*tb[5]+sb[2],sb[3]*tb[0]+sb[4]*tb[3],sb[3]*tb[1]+sb[4]*tb[4],sb[3]*tb[2]+sb[4]*tb[5]+sb[5]]}function Jc(sb,tb){return[sb[0]-tb[0],sb[1]-tb[1]]}function ud(sb,tb){function Lb(Yc,Nc){Yc.edges=ie(Yc.face);if(Nc.face){var fd=Yc.shared=
Sd(Yc.face,Nc.face),mc=$b(fd.map(Nc.project),fd.map(Yc.project));Yc.transform=Nc.transform?Gc(Nc.transform,mc):mc;mc=Nc.edges;for(var wd=0,Xd=mc.length;wd<Xd;++wd)xd(fd[0],mc[wd][1])&&xd(fd[1],mc[wd][0])&&(mc[wd]=Yc),xd(fd[0],mc[wd][0])&&xd(fd[1],mc[wd][1])&&(mc[wd]=Yc);mc=Yc.edges;wd=0;for(Xd=mc.length;wd<Xd;++wd)xd(fd[0],mc[wd][0])&&xd(fd[1],mc[wd][1])&&(mc[wd]=Nc),xd(fd[0],mc[wd][1])&&xd(fd[1],mc[wd][0])&&(mc[wd]=Nc)}else Yc.transform=Nc.transform;Yc.children&&Yc.children.forEach(function(ce){Lb(ce,
Yc)});return Yc}function Vb(Yc,Nc){var fd=tb(Yc,Nc);Yc=fd.project([Yc*lc,Nc*lc]);if(fd=fd.transform)return[fd[0]*Yc[0]+fd[1]*Yc[1]+fd[2],-(fd[3]*Yc[0]+fd[4]*Yc[1]+fd[5])];Yc[1]=-Yc[1];return Yc}function hc(Yc,Nc){var fd=Yc.project.invert,mc=Yc.transform,wd=Nc;if(mc){var Xd=1/(mc[0]*mc[4]-mc[1]*mc[3]);mc=[Xd*mc[4],-Xd*mc[1],Xd*(mc[1]*mc[5]-mc[2]*mc[4]),-Xd*mc[3],Xd*mc[0],Xd*(mc[2]*mc[3]-mc[0]*mc[5])];wd=[mc[0]*wd[0]+mc[1]*wd[1]+mc[2],mc[3]*wd[0]+mc[4]*wd[1]+mc[5]]}if(mc=fd)fd=ce=fd(wd),fd=tb(fd[0]*
rc,fd[1]*rc),mc=Yc===fd;if(mc)return ce;var ce;Yc=Yc.children;fd=0;for(wd=Yc&&Yc.length;fd<wd;++fd)if(ce=hc(Yc[fd],Nc))return ce}Lb(sb,{transform:null});Be(sb)&&(Vb.invert=function(Yc,Nc){return(Yc=hc(sb,[Yc,-Nc]))&&(Yc[0]*=rc,Yc[1]*=rc,Yc)});var dc=f.geoProjection(Vb),Fc=dc.stream;dc.stream=function(Yc){var Nc=dc.rotate(),fd=Fc(Yc),mc=(dc.rotate([0,0]),Fc(Yc));dc.rotate(Nc);fd.sphere=function(){mc.polygonStart();mc.lineStart();Zc(mc,sb);mc.lineEnd();mc.polygonEnd()};return fd};return dc.angle(-30)}
function Zc(sb,tb,Lb){var Vb,hc=tb.edges,dc=hc.length;var Fc={type:"MultiPoint",coordinates:tb.face};var Yc=tb.face.filter(function(wd){return 90!==Td(wd[1])}),Nc=f.geoBounds({type:"MultiPoint",coordinates:Yc});Yc=!1;var fd=-1,mc=Nc[1][0]-Nc[0][0];Nc=180===mc||360===mc?[(Nc[0][0]+Nc[1][0])/2,(Nc[0][1]+Nc[1][1])/2]:f.geoCentroid(Fc);if(Lb)for(;++fd<dc&&hc[fd]!==Lb;);++fd;for(mc=0;mc<dc;++mc)Fc=hc[(mc+fd)%dc],Array.isArray(Fc)?(Yc||(sb.point((Vb=f.geoInterpolate(Fc[0],Nc)(1E-6))[0],Vb[1]),Yc=!0),sb.point((Vb=
f.geoInterpolate(Fc[1],Nc)(1E-6))[0],Vb[1])):(Yc=!1,Fc!==Lb&&Zc(sb,Fc,tb))}function xd(sb,tb){return sb&&tb&&sb[0]===tb[0]&&sb[1]===tb[1]}function Sd(sb,tb){for(var Lb,Vb,hc=sb.length,dc=null,Fc=0;Fc<hc;++Fc){Lb=sb[Fc];for(var Yc=tb.length;0<=--Yc;)if(Vb=tb[Yc],Lb[0]===Vb[0]&&Lb[1]===Vb[1]){if(dc)return[dc,Lb];dc=Lb}}}function ie(sb){for(var tb=sb.length,Lb=[],Vb=sb[tb-1],hc=0;hc<tb;++hc)Lb.push([Vb,Vb=sb[hc]]);return Lb}function Be(sb){return sb.project.invert||sb.children&&sb.children.some(Be)}
function uc(sb,tb){sb=E(sb,tb);return[sb[0]*Le,sb[1]]}function Oc(sb,tb){for(var Lb=0,Vb=sb.length,hc=0;Lb<Vb;++Lb)hc+=sb[Lb]*tb[Lb];return hc}function Nd(sb){return[Se(sb[1],sb[0])*lc,l(Xf(-1,Pg(1,sb[2])))*lc]}function Od(sb){var tb=sb[0]*rc;sb=sb[1]*rc;var Lb=Rd(sb);return[Lb*Rd(tb),Lb*be(tb),be(sb)]}function pe(sb,tb){return{type:"FeatureCollection",features:sb.features.map(function(Lb){return ye(Lb,tb)})}}function ye(sb,tb){return{type:"Feature",id:sb.id,properties:sb.properties,geometry:od(sb.geometry,
tb)}}function me(sb,tb){return{type:"GeometryCollection",geometries:sb.geometries.map(function(Lb){return od(Lb,tb)})}}function od(sb,tb){if(!sb)return null;if("GeometryCollection"===sb.type)return me(sb,tb);switch(sb.type){case "Point":var Lb=kf;break;case "MultiPoint":Lb=kf;break;case "LineString":Lb=og;break;case "MultiLineString":Lb=og;break;case "Polygon":Lb=kg;break;case "MultiPolygon":Lb=kg;break;case "Sphere":Lb=kg;break;default:return null}f.geoStream(sb,tb(Lb));return Lb.result()}function hd(sb){function tb(Vb,
hc){var dc=Td(Vb)<Ue;hc=sb(dc?Vb:0<Vb?Vb-he:Vb+he,hc);Vb=(hc[0]-hc[1])*Ig;hc=(hc[0]+hc[1])*Ig;if(dc)return[Vb,hc];dc=Lb*Ig;var Fc=0<Vb^0<hc?-1:1;return[Fc*Vb-Yf(hc)*dc,Fc*hc-Yf(Vb)*dc]}var Lb=sb(Ue,0)[0]-sb(-Ue,0)[0];sb.invert&&(tb.invert=function(Vb,hc){var dc=(Vb+hc)*Ig,Fc=(hc-Vb)*Ig,Yc=Td(dc)<.5*Lb&&Td(Fc)<.5*Lb;if(!Yc){var Nc=Lb*Ig,fd=0<dc^0<Fc?-1:1;Vb=-fd*Vb+(0<Fc?1:-1)*Nc;hc=-fd*hc+(0<dc?1:-1)*Nc;dc=(-Vb-hc)*Ig;Fc=(Vb-hc)*Ig}hc=sb.invert(dc,Fc);Yc||(hc[0]+=0<dc?he:-he);return hc});return f.geoProjection(tb).rotate([-90,
-90,45]).clipAngle(179.999)}function ge(sb){function tb(Vb,hc){Vb=Lb?Kf(Vb*Lb/2)/Lb:Vb/2;if(!hc)return[2*Vb,-sb];Vb=2*nf(Vb*be(hc));var dc=1/Kf(hc);return[be(Vb)*dc,hc+(1-Rd(Vb))*dc-sb]}var Lb=be(sb);tb.invert=function(Vb,hc){if(1E-6>Td(hc+=sb))return[Lb?2*nf(Lb*Vb/2)/Lb:Vb,0];var dc=Vb*Vb+hc*hc,Fc=0,Yc=10;do{var Nc=Kf(Fc);var fd=1/Rd(Fc),mc=dc-2*hc*Fc+Fc*Fc;Fc-=Nc=(Nc*mc+2*(Fc-hc))/(2+mc*fd*fd+2*(Fc-hc)*Nc)}while(1E-6<Td(Nc)&&0<--Yc);Vb*=Nc=Kf(Fc);hc=Kf(Td(hc)<Td(Fc+1/Nc)?.5*l(Vb):.5*u(Vb)+he/4)/
be(Fc);return[Lb?2*nf(Lb*hc)/Lb:2*hc,Fc]};return tb}function $d(sb,tb){var Lb=Pg(18,36*Td(tb)/he),Vb=jf(Lb);Lb-=Vb;var hc=(Nc=Uf[Vb])[0],dc=Nc[1],Fc=(Nc=Uf[++Vb])[0],Yc=Nc[1];Vb=(Nc=Uf[Pg(19,++Vb)])[0];Nc=Nc[1];var Nc;return[sb*(Fc+Lb*(Vb-hc)/2+Lb*Lb*(Vb-2*Fc+hc)/2),(0<tb?Ue:-Ue)*(Yc+Lb*(Nc-dc)/2+Lb*Lb*(Nc-2*Yc+dc)/2)]}function cd(sb){function tb(Lb,Vb){var hc=Rd(Vb),dc=(sb-1)/(sb-hc*Rd(Lb));return[dc*hc*be(Lb),dc*be(Vb)]}tb.invert=function(Lb,Vb){var hc=Lb*Lb+Vb*Vb,dc=q(hc);hc=(sb-q(1-hc*(sb+1)/
(sb-1)))/((sb-1)/dc+dc/(sb-1));return[Se(Lb*hc,dc*q(1-hc*hc)),dc?l(Vb*hc/dc):0]};return tb}function Ie(sb,tb){function Lb(Fc,Yc){Fc=Vb(Fc,Yc);Yc=Fc[1];var Nc=Yc*dc/(sb-1)+hc;return[Fc[0]*hc/Nc,Yc/Nc]}var Vb=cd(sb);if(!tb)return Vb;var hc=Rd(tb),dc=be(tb);Lb.invert=function(Fc,Yc){var Nc=(sb-1)/(sb-1-Yc*dc);return Vb.invert(Nc*Fc,Nc*Yc*hc)};return Lb}function Je(sb){return 0<sb.length}function Ad(sb){return-90===sb||90===sb?[0,sb]:[-180,Math.floor(1E4*sb)/1E4]}function $e(sb){var tb=sb[0],Lb=sb[1],
Vb=!1;-179.9999>=tb?(tb=-180,Vb=!0):179.9999<=tb&&(tb=180,Vb=!0);-89.9999>=Lb?(Lb=-90,Vb=!0):89.9999<=Lb&&(Lb=90,Vb=!0);return Vb?[tb,Lb]:sb}function qf(sb){return sb.map($e)}function Ye(sb,tb,Lb){for(var Vb=0,hc=sb.length;Vb<hc;++Vb){var dc=sb[Vb].slice();Lb.push({index:-1,polygon:tb,ring:dc});for(var Fc=0,Yc=dc.length;Fc<Yc;++Fc){var Nc=dc[Fc],fd=Nc[0],mc=Nc[1];if(-179.9999>=fd||179.9999<=fd||-89.9999>=mc||89.9999<=mc){dc[Fc]=$e(Nc);for(Nc=Fc+1;Nc<Yc;++Nc){var wd=dc[Nc];fd=wd[0];wd=wd[1];if(-179.9999<
fd&&179.9999>fd&&-89.9999<wd&&89.9999>wd)break}if(Nc!==Fc+1){Fc?(Fc={index:-1,polygon:tb,ring:dc.slice(0,Fc+1)},Fc.ring[Fc.ring.length-1]=Ad(mc),Lb[Lb.length-1]=Fc):Lb.pop();if(Nc>=Yc)break;Lb.push({index:-1,polygon:tb,ring:dc=dc.slice(Nc-1)});dc[0]=Ad(dc[0][1]);Fc=-1;Yc=dc.length}}}}}function af(sb){var tb,Lb=sb.length,Vb={},hc={};for(tb=0;tb<Lb;++tb){var dc=sb[tb];var Fc=dc.ring[0];var Yc=dc.ring[dc.ring.length-1];Fc[0]===Yc[0]&&Fc[1]===Yc[1]?(dc.polygon.push(dc.ring),sb[tb]=null):(dc.index=tb,
Vb[Fc]=hc[Yc]=dc)}for(tb=0;tb<Lb;++tb)if(dc=sb[tb]){Fc=dc.ring[0];Yc=dc.ring[dc.ring.length-1];var Nc=hc[Fc];var fd=Vb[Yc];delete Vb[Fc];delete hc[Yc];Fc[0]===Yc[0]&&Fc[1]===Yc[1]?dc.polygon.push(dc.ring):Nc?(delete hc[Fc],delete Vb[Nc.ring[0]],Nc.ring.pop(),sb[Nc.index]=null,dc={index:-1,polygon:Nc.polygon,ring:Nc.ring.concat(dc.ring)},Nc===fd?dc.polygon.push(dc.ring):(dc.index=Lb++,sb.push(Vb[dc.ring[0]]=hc[dc.ring[dc.ring.length-1]]=dc))):fd?(delete Vb[Yc],delete hc[fd.ring[fd.ring.length-1]],
dc.ring.pop(),dc={index:Lb++,polygon:fd.polygon,ring:dc.ring.concat(fd.ring)},sb[fd.index]=null,sb.push(Vb[dc.ring[0]]=hc[dc.ring[dc.ring.length-1]]=dc)):(dc.ring.push(dc.ring[0]),dc.polygon.push(dc.ring))}}function jg(sb){var tb={type:"Feature",geometry:oe(sb.geometry)};null!=sb.id&&(tb.id=sb.id);null!=sb.bbox&&(tb.bbox=sb.bbox);null!=sb.properties&&(tb.properties=sb.properties);return tb}function oe(sb){if(null==sb)return sb;switch(sb.type){case "GeometryCollection":var tb={type:"GeometryCollection",
geometries:sb.geometries.map(oe)};break;case "Point":tb={type:"Point",coordinates:$e(sb.coordinates)};break;case "MultiPoint":case "LineString":tb={type:sb.type,coordinates:qf(sb.coordinates)};break;case "MultiLineString":tb={type:"MultiLineString",coordinates:sb.coordinates.map(qf)};break;case "Polygon":var Lb=[];Ye(sb.coordinates,Lb,tb=[]);af(tb);tb={type:"Polygon",coordinates:Lb};break;case "MultiPolygon":tb=[];Lb=-1;var Vb=sb.coordinates.length;for(var hc=Array(Vb);++Lb<Vb;)Ye(sb.coordinates[Lb],
hc[Lb]=[],tb);af(tb);tb={type:"MultiPolygon",coordinates:hc.filter(Je)};break;default:return sb}null!=sb.bbox&&(tb.bbox=sb.bbox);return tb}function If(sb,tb){tb=Kf(tb/2);var Lb=be(Pf*tb);return[sb*(.74482-.34588*Lb*Lb),1.70711*tb]}function hg(sb,tb,Lb){var Vb=f.geoInterpolate(tb,Lb);Lb=Vb(.5);tb=f.geoRotation([-Lb[0],-Lb[1]])(tb);Vb=Vb.distance/2;var hc=-l(be(tb[1]*rc)/be(Vb));Lb=[-Lb[0],-Lb[1],-(0<tb[0]?he-hc:hc)*lc];sb=f.geoProjection(sb(Vb)).rotate(Lb);var dc=f.geoRotation(Lb),Fc=sb.center;delete sb.rotate;
sb.center=function(Yc){return arguments.length?Fc(dc(Yc)):dc.invert(Fc())};return sb.clipAngle(90)}function zg(sb){function tb(Vb,hc){Vb=f.geoGnomonicRaw(Vb,hc);Vb[0]*=Lb;return Vb}var Lb=Rd(sb);tb.invert=function(Vb,hc){return f.geoGnomonicRaw.invert(Vb/Lb,hc)};return tb}function pf(sb,tb){return hg(zg,sb,tb)}function bg(sb){function tb(Yc,Nc){var fd=u(Rd(Nc)*Rd(Yc-Lb));Yc=u(Rd(Nc)*Rd(Yc-Vb));fd*=fd;Yc*=Yc;return[(fd-Yc)/(2*sb),(0>Nc?-1:1)*q(4*hc*Yc-(hc-fd+Yc)*(hc-fd+Yc))/(2*sb)]}if(!(sb*=2))return f.geoAzimuthalEquidistantRaw;
var Lb=-sb/2,Vb=-Lb,hc=sb*sb,dc=Kf(Vb),Fc=.5/be(Vb);tb.invert=function(Yc,Nc){var fd=Nc*Nc,mc=Rd(q(fd+(wd=Yc+Lb)*wd));Yc=Rd(q(fd+(wd=Yc+Vb)*wd));var wd,Xd;return[Se(Xd=mc-Yc,wd=(mc+Yc)*dc),(0>Nc?-1:1)*u(q(wd*wd+Xd*Xd)*Fc)]};return tb}function wg(sb,tb){return hg(bg,sb,tb)}function Tf(sb,tb){if(1E-6>Td(tb))return[sb,0];var Lb=Td(tb/Ue),Vb=l(Lb);if(1E-6>Td(sb)||1E-6>Td(Td(tb)-Ue))return[0,Yf(tb)*he*Kf(Vb/2)];var hc=Rd(Vb);Vb=Td(he/sb-sb/he)/2;var dc=Vb*Vb;hc/=Lb+hc-1;Lb=hc*(2/Lb-1);var Fc=Lb*Lb,Yc=
Fc+dc,Nc=hc-Fc,fd=dc+hc;return[Yf(sb)*he*(Vb*Nc+q(dc*Nc*Nc-Yc*(hc*hc-Fc)))/Yc,Yf(tb)*he*(Lb*fd-Vb*q((dc+1)*Yc-fd*fd))/Yc]}function sg(sb,tb){if(1E-6>Td(tb))return[sb,0];var Lb=Td(tb/Ue),Vb=l(Lb);if(1E-6>Td(sb)||1E-6>Td(Td(tb)-Ue))return[0,Yf(tb)*he*Kf(Vb/2)];var hc=Rd(Vb);Vb=Td(he/sb-sb/he)/2;var dc=Vb*Vb;Lb=hc*(q(1+dc)-Vb*hc)/(1+dc*Lb*Lb);return[Yf(sb)*he*Lb,Yf(tb)*he*q(1-Lb*(2*Vb+Lb))]}function zc(sb,tb){if(1E-6>Td(tb))return[sb,0];var Lb=tb/Ue,Vb=l(Lb);if(1E-6>Td(sb)||1E-6>Td(Td(tb)-Ue))return[0,
he*Kf(Vb/2)];tb=(he/sb-sb/he)/2;Lb/=1+Rd(Vb);return[he*(Yf(sb)*q(tb*tb+1-Lb*Lb)-tb),he*Lb]}function Wa(sb,tb){if(!tb)return[sb,0];var Lb=Td(tb);if(!sb||Lb===Ue)return[0,tb];var Vb=Lb/Ue;Lb=Vb*Vb;var hc=(8*Vb-Lb*(Lb+2)-5)/(2*Lb*(Vb-1)),dc=hc*hc,Fc=Vb*hc,Yc=Lb+dc+2*Fc;Vb+=3*hc;hc=sb/Ue;hc+=1/hc;hc=Yf(Td(sb)-Ue)*q(hc*hc-4);var Nc=hc*hc;Lb=(hc*(Yc+dc-1)+2*q(Yc*(Lb+dc*Nc-1)+(1-Lb)*(Lb*(Vb*Vb+4*dc)+12*Fc*dc+4*dc*dc)))/(4*Yc+Nc);return[Yf(sb)*Ue*Lb,Yf(tb)*Ue*q(1+hc*Td(Lb)-Lb*Lb)]}function Ha(sb,tb,Lb,Vb,
hc){function dc(Fc,Yc){Yc=Lb*be(Vb*Yc);var Nc=q(1-Yc*Yc),fd=q(2/(1+Nc*Rd(Fc*=hc)));return[sb*Nc*fd*be(Fc),tb*Yc*fd]}dc.invert=function(Fc,Yc){var Nc=Fc/sb,fd=Yc/tb;Nc=q(Nc*Nc+fd*fd);fd=2*l(Nc/2);return[Se(Fc*Kf(fd),sb*Nc)/hc,Nc&&l(Yc*be(fd)/(tb*Lb*Nc))/Vb]};return dc}function m(sb,tb,Lb,Vb){var hc=he/3;sb=Xf(sb,1E-6);tb=Xf(tb,1E-6);sb=Pg(sb,Ue);tb=Pg(tb,he-1E-6);Lb=Xf(Lb,0);Lb=Pg(Lb,99.999999);Vb=Xf(Vb,1E-6);var dc=Vb/100;Lb=u((Lb/100+1)*Rd(hc))/hc;hc=be(sb)/be(Lb*Ue);Vb=tb/he;tb=q(dc*be(sb/2)/be(tb/
2));sb=tb/q(Vb*hc*Lb);tb=1/(tb*q(Vb*hc*Lb));return Ha(sb,tb,hc,Lb,Vb)}function Na(){var sb=65*rc,tb=60*rc,Lb=20,Vb=200,hc=f.geoProjectionMutator(m),dc=hc(sb,tb,Lb,Vb);dc.poleline=function(Fc){return arguments.length?hc(sb=+Fc*rc,tb,Lb,Vb):sb*lc};dc.parallels=function(Fc){return arguments.length?hc(sb,tb=+Fc*rc,Lb,Vb):tb*lc};dc.inflation=function(Fc){return arguments.length?hc(sb,tb,Lb=+Fc,Vb):Lb};dc.ratio=function(Fc){return arguments.length?hc(sb,tb,Lb,Vb=+Fc):Vb};return dc.scale(163.775)}function Xb(sb,
tb){return[sb*q(1-3*tb*tb/(he*he)),tb]}function Xc(sb,tb){var Lb=Rd(tb),Vb=Rd(sb)*Lb,hc=1-Vb;tb=Rd(sb=Se(be(sb)*Lb,-be(tb)));sb=be(sb);Lb=q(1-Vb*Vb);return[sb*Lb-tb*hc,-tb*Lb-sb*hc]}function Id(sb,tb){var Lb=X(sb,tb);return[(Lb[0]+sb/Ue)/2,(Lb[1]+tb)/2]}var Td=Math.abs,nf=Math.atan,Se=Math.atan2,Rd=Math.cos,Vf=Math.exp,jf=Math.floor,Jf=Math.log,Xf=Math.max,Pg=Math.min,dh=Math.pow,Zg=Math.round,Yf=Math.sign||function(sb){return 0<sb?1:0>sb?-1:0},be=Math.sin,Kf=Math.tan,he=Math.PI,Ue=he/2,Pf=he/4,Ig=
Math.SQRT1_2,Ya=q(2),Cb=q(he),fc=2*he,lc=180/he,rc=he/180;X.invert=function(sb,tb){if(!(sb*sb+4*tb*tb>he*he+1E-6)){var Lb=sb,Vb=tb,hc=25;do{var dc=be(Lb),Fc=be(Lb/2),Yc=Rd(Lb/2),Nc=be(Vb),fd=Rd(Vb),mc=be(2*Vb),wd=Nc*Nc,Xd=fd*fd,ce=Fc*Fc,De=1-Xd*Yc*Yc,Ua=De?u(fd*Yc)*q(pb=1/De):pb=0,pb;De=2*Ua*fd*Fc-sb;var Rb=Ua*Nc-tb,ec=pb*(Xd*ce+Ua*fd*Yc*wd),Sc=pb*(.5*dc*mc-2*Ua*Nc*Fc);dc=.25*pb*(mc*Fc-Ua*Nc*Xd*dc);fd=pb*(wd*Yc+Ua*ce*fd);Yc=Sc*dc-fd*ec;if(!Yc)break;Sc=(Rb*Sc-De*fd)/Yc;De=(De*dc-Rb*ec)/Yc;Lb-=Sc;Vb-=
De}while((1E-6<Td(Sc)||1E-6<Td(De))&&0<--hc);return[Lb,Vb]}};V.invert=function(sb,tb){sb*=.375;tb*=.375;if(!sb&&1<Td(tb))return null;var Lb=1+sb*sb+tb*tb,Vb=q((Lb-q(Lb*Lb-4*tb*tb))/2);Lb=l(Vb)/3;Vb?(Vb=Td(tb/Vb),Vb=Jf(Vb+q(Vb*Vb-1))/3):(Vb=Td(sb),Vb=Jf(Vb+q(Vb*Vb+1))/3);var hc=Rd(Lb),dc=U(Vb),Fc=dc*dc-hc*hc;return[2*Yf(sb)*Se(D(Vb)*hc,.25-Fc),2*Yf(tb)*Se(dc*be(Lb),.25+Fc)]};var Pc=q(8),$a=Jf(1+Ya);F.invert=function(sb,tb){if((hc=Td(tb))<$a)return[sb,2*nf(Vf(tb))-Ue];var Lb=Pf,Vb=25,hc;do{var dc=Rd(Lb/
2);var Fc=Kf(Lb/2);Lb-=dc=(Pc*(Lb-Pf)-Jf(Fc)-hc)/(Pc-dc*dc/(2*Fc))}while(1E-12<Td(dc)&&0<--Vb);return[sb/(Rd(Lb)*(Pc-1/be(Lb))),Yf(tb)*Lb]};x.invert=function(sb,tb){tb=2*l(tb/2);return[sb*Rd(tb/2)/Rd(tb),tb]};var xb=O(Ya/Ue,Ya,he);N.invert=function(sb,tb){var Lb=2.00276*tb;tb=0>tb?-Pf:Pf;var Vb=25;do{var hc=Lb-Ya*be(tb);tb-=hc=(be(2*tb)+2*tb-he*be(hc))/(2*Rd(2*tb)+2+he*Rd(hc)*Ya*Rd(tb))}while(1E-6<Td(hc)&&0<--Vb);hc=Lb-Ya*be(tb);return[sb*(1/Rd(hc)+1.11072/Rd(tb))/2.00276,hc]};J.invert=function(sb,
tb){return[sb/Rd(tb),tb]};var Nb=O(1,4/he,he);E.invert=function(sb,tb){var Lb=(Lb=tb/Cb-1)*Lb;return[0<Lb?sb*q(he/Lb)/2:0,l(1-Lb)]};var cc=q(3);W.invert=function(sb,tb){tb=3*l(tb/(cc*Cb));return[Cb*sb/(cc*(2*Rd(2*tb/3)-1)),tb]};Ba.invert=function(sb,tb){var Lb=q(8/(3*he));tb/=Lb;return[sb/(Lb*(1-Td(tb)/he)),tb]};Ga.invert=function(sb,tb){var Lb=2-Td(tb)/q(2*he/3);return[sb*q(6*he)/(2*Lb),Yf(tb)*l((4-Lb*Lb)/3)]};ua.invert=function(sb,tb){var Lb=q(he*(4+he))/2;return[sb*Lb/(1+q(1-tb*tb*(4+he)/(4*he))),
tb*Lb/2]};Fa.invert=function(sb,tb){tb=tb*q((4+he)/he)/2;var Lb=l(tb),Vb=Rd(Lb);return[sb/(2/q(he*(4+he))*(1+Vb)),l((Lb+tb*(Vb+2))/(2+Ue))]};Xa.invert=function(sb,tb){var Lb=q(2+he);tb=tb*Lb/2;return[Lb*sb/(1+Rd(tb)),tb]};Sa.invert=function(sb,tb){var Lb=1+Ue,Vb=q(Lb/2);return[2*sb*Vb/(1+Rd(tb*=Vb)),l((tb+be(tb))/Lb)]};var vc=3+2*Ya;eb.invert=function(sb,tb){if(!(hc=V.invert(sb/1.2,1.065*tb)))return null;var Lb=hc[0];hc=hc[1];var Vb=20,hc;sb/=vc;tb/=vc;do{var dc=Lb/2,Fc=hc/2,Yc=be(dc),Nc=Rd(dc),fd=
be(Fc),mc=Rd(Fc),wd=Rd(hc),Xd=q(wd),ce=fd/(mc+Ya*Nc*Xd),De=ce*ce,Ua=q(2/(1+De)),pb=(Ya*mc+(Nc+Yc)*Xd)/(Ya*mc+(Nc-Yc)*Xd),Rb=q(pb),ec=Rb-1/Rb,Sc=Rb+1/Rb;Fc=Ua*ec-2*Jf(Rb)-sb;dc=Ua*ce*Sc-2*nf(ce)-tb;var kd=fd&&Ig*Xd*Yc*De/fd,Fd=(Ya*Nc*mc+Xd)/(2*(mc+Ya*Nc*Xd)*(mc+Ya*Nc*Xd)*Xd),Yd=-.5*ce*Ua*Ua*Ua,je=Yd*kd;Yd*=Fd;var re=(re=2*mc+Ya*Xd*(Nc-Yc))*re*Rb;Nc=(Ya*Nc*mc*Xd+wd)/re;fd=-(Ya*Yc*fd)/(Xd*re);Yc=ec*je-2*Nc/Rb+Ua*(Nc+Nc/pb);Rb=ec*Yd-2*fd/Rb+Ua*(fd+fd/pb);kd=ce*Sc*je-2*kd/(1+De)+Ua*Sc*kd+Ua*ce*(Nc-Nc/
pb);De=ce*Sc*Yd-2*Fd/(1+De)+Ua*Sc*Fd+Ua*ce*(fd-fd/pb);ce=Rb*kd-De*Yc;if(!ce)break;De=(dc*Rb-Fc*De)/ce;Fc=(Fc*kd-dc*Yc)/ce;Lb-=De;hc=Xf(-Ue,Pg(Ue,hc-Fc))}while((1E-6<Td(De)||1E-6<Td(Fc))&&0<--Vb);return 1E-6>Td(Td(hc)-Ue)?[0,hc]:Vb&&[Lb,hc]};var ed=Rd(35*rc);Va.invert=function(sb,tb){tb/=1+ed;return[sb&&sb/(ed*q(1-tb*tb)),2*nf(tb)]};La.invert=function(sb,tb){var Lb=nf(tb/Cb);tb=Rd(Lb);Lb*=2;return[sb*Cb/2/(Rd(Lb)*tb*tb),Lb]};var jb=Qa(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555),Qb=Qa(2.583819,
-.835827,.170354,-.038094,1.543313,-.411435,.082742),pc=Qa(5/6*he,-.62636,-.0344,0,1.3493,-.05524,0,.045);Ea.invert=function(sb,tb){var Lb=sb,Vb=tb,hc=50,dc;do{var Fc=Vb*Vb;Vb-=dc=(Vb*(1+Fc/12)-tb)/(1+Fc/4)}while(1E-6<Td(dc)&&0<--hc);hc=50;sb/=1-.162388*Fc;do{var Yc=(Yc=Lb*Lb)*Yc;Lb-=dc=(Lb*(.87-9.52426E-4*Yc)-sb)/(.87-.00476213*Yc)}while(1E-6<Td(dc)&&0<--hc);return[Lb,Vb]};var Qc=Qa(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);cb.invert=function(sb,tb){1<Td(sb)&&(sb=2*Yf(sb)-sb);1<Td(tb)&&
(tb=2*Yf(tb)-tb);var Lb=Yf(sb),Vb=Yf(tb),hc=-Lb*sb,dc=-Vb*tb;tb=1>dc/hc;sb=tb?dc:hc;var Fc=tb?hc:dc,Yc=0,Nc=1;hc=.5;for(var fd=50;;){dc=hc*hc;var mc=q(hc),wd=l(1/q(1+dc)),Xd=1-dc+hc*(1+dc)*wd,ce=(1-mc)/Xd,De=q(ce),Ua=ce*(1+dc),pb=De*(1-dc),Rb=q(Ua-sb*sb);pb=Fc+pb+hc*Rb;if(1E-12>Td(Nc-Yc)||0===--fd||0===pb)break;0<pb?Yc=hc:Nc=hc;hc=.5*(Yc+Nc)}fd?(Fc=l(mc),fd=Rd(Fc),Yc=1/fd,Nc=2*mc*fd,mc=(-Xd*fd-(1-mc)*(-3*hc+wd*(1+3*dc))*Nc)/(Xd*Xd),hc=[he/4*(sb*(-2*Yc*(.5*mc/De*(1-dc)-2*hc*De*Nc)+-Yc*Nc*Rb)+-Yc*(hc*
(1+dc)*mc+ce*(1+3*dc)*Nc)*l(sb/q(Ua))),Fc]):hc=null;sb=hc[0];hc=hc[1];dc=Rd(hc);tb&&(sb=-Ue-sb);return[Lb*(Se(be(sb)*dc,-be(hc))+he),Vb*l(Rd(sb)*dc)]};sa.invert=function(sb,tb){var Lb=(Ya-1)/(Ya+1),Vb=q(1-Lb*Lb);tb=.5*Wb(Ue,Vb*Vb)-tb;sb=-sb;Vb*=Vb;if(tb)if(tb=Gb(tb,Vb),sb){sb=Gb(sb,1-Vb);var hc=sb[1]*sb[1]+Vb*tb[0]*tb[0]*sb[0]*sb[0];tb=[[tb[0]*sb[2]/hc,tb[1]*tb[2]*sb[0]*sb[1]/hc],[tb[1]*sb[1]/hc,-tb[0]*tb[2]*sb[0]*sb[2]/hc],[tb[2]*sb[1]*sb[2]/hc,-Vb*tb[0]*tb[1]*sb[0]/hc]]}else tb=[[tb[0],0],[tb[1],
0],[tb[2],0]];else sb=Gb(sb,1-Vb),tb=[[0,sb[0]/sb[1]],[1/sb[1],0],[sb[2]/sb[1],0]];Vb=tb[0];tb=tb[1];sb=tb[0]*tb[0]+tb[1]*tb[1];Vb=[(Vb[0]*tb[0]+Vb[1]*tb[1])/sb,(Vb[1]*tb[0]-Vb[0]*tb[1])/sb];return[Se(Vb[1],Vb[0])/-1,2*nf(Vf(-.5*Jf(Lb*Vb[0]*Vb[0]+Lb*Vb[1]*Vb[1])))-Ue]};var Cc=l(1-1/3)*lc,vd=fa(0);Jb.invert=function(sb,tb){return-.7109889596207567<tb?xb.invert(sb,tb-.0528035274542):J.invert(sb,tb)};Eb.invert=function(sb,tb){return.7109889596207567<Td(tb)?xb.invert(sb,tb+(0<tb?.0528035274542:-.0528035274542)):
J.invert(sb,tb)};var Wd=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],we=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],ue=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,
0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],sd=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]],Fe=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]],Ge=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];Kd.invert=function(sb,
tb){return[fc/3*sb/q(he*he/3-tb*tb),tb]};var Me=he/Ya;ze.invert=function(sb,tb){var Lb=Td(sb),Vb=Td(tb),hc=1E-6,dc=Ue;Vb<Me?dc*=Vb/Me:hc+=6*u(Me/Vb);for(var Fc=0;25>Fc;Fc++){var Yc=be(dc),Nc=q(Rd(dc)),fd=be(dc/2),mc=Rd(dc/2),wd=be(hc/6),Xd=Rd(hc/6),ce=.5*hc*(1+Nc)-Lb,De=dc/(mc*Xd)-Vb;Yc=Nc?-.25*hc*Yc/Nc:0;Nc=.5*(1+Nc);fd=(1+.5*dc*fd/mc)/(mc*Xd);wd=dc/mc*(wd/6)/(Xd*Xd);mc=Yc*wd-fd*Nc;wd=(ce*wd-De*Nc)/mc;ce=(De*Yc-ce*fd)/mc;dc-=wd;hc-=ce;if(1E-6>Td(wd)&&1E-6>Td(ce))break}return[0>sb?-hc:hc,0>tb?-dc:
dc]};ee.invert=function(sb,tb){var Lb=Yf(sb)*he,Vb=tb/2,hc=50;do{var dc=Lb*Lb,Fc=Vb*Vb,Yc=Lb*Vb,Nc=Lb*(.975534+Fc*(-.119161+-.0143059*dc+-.0547009*Fc))-sb,fd=Vb*(1.00384+dc*(.0802894+-.02855*Fc+1.99025E-4*dc)+Fc*(.0998909+-.0491032*Fc))-tb,mc=.975534-Fc*(.119161+.0429177*dc+.0547009*Fc),wd=-Yc*(.238322+.2188036*Fc+.0286118*dc);Yc*=.1605788+7.961E-4*dc+-.0571*Fc;Fc=1.00384+dc*(.0802894+1.99025E-4*dc)+Fc*(3*(.0998909-.02855*dc)-.245516*Fc);dc=wd*Yc-Fc*mc;wd=(fd*wd-Nc*Fc)/dc;Nc=(Nc*Yc-fd*mc)/dc;Lb-=
wd;Vb-=Nc}while((1E-6<Td(wd)||1E-6<Td(Nc))&&0<--hc);return hc&&[Lb,Vb]};bd.invert=function(sb,tb){var Lb=sb*sb,Vb=tb*tb+1,hc=Lb+Vb;Lb=sb?Ig*q((hc-q(hc*hc-4*Lb))/Lb):1/q(Vb);return[l(sb*Lb),Yf(tb)*u(Lb)]};Ld.invert=function(sb,tb){return[sb,2.5*nf(Vf(.8*tb))-.625*he]};var rf=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Ma=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],lb=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],
[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7.388E-4,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],vb=[[.9245,0],[0,0],[.01943,0]],nb=[[.721316,0],[0,0],[-.00881625,-.00617325]],ac=q(6),yc=q(7);dd.invert=function(sb,tb){tb=3*l(tb*yc/9);return[sb*yc/(ac*(2*Rd(2*tb/3)-1)),l(3*be(tb)*ac/7)]};nd.invert=function(sb,tb){tb=tb*q(2+Ya)/(2*q(3));var Lb=2*l(tb);return[3*Ya*sb/(1+2*Rd(Lb)/Rd(Lb/2)),l((tb+be(Lb))/(1+Ig))]};Dc.invert=function(sb,tb){var Lb=q(6/(4+
he));tb/=Lb;1E-6>Td(Td(tb)-Ue)&&(tb=0>tb?-Ue:Ue);return[1.5*sb/(Lb*(.5+Rd(tb))),l((tb/2+be(tb))/(1+he/4))]};jd.invert=function(sb,tb){var Lb=tb,Vb=25;do{var hc=Lb*Lb;var dc=hc*hc;Lb-=hc=(Lb*(1.01183+dc*dc*(-.02625+.01926*hc-.00396*dc))-tb)/(1.01183+dc*dc*(-.23625+.21186*hc+-.05148*dc))}while(1E-12<Td(hc)&&0<--Vb);hc=Lb*Lb;dc=hc*hc;tb=hc*dc;return[sb/(.84719-.13063*hc+tb*tb*(-.04515+.05494*hc-.02326*dc+.00331*tb)),Lb]};Qd.invert=function(sb,tb){for(var Lb=tb/2,Vb=0,hc=Infinity;10>Vb&&1E-6<Td(hc);++Vb)hc=
Rd(tb/2),tb-=hc=(tb-Kf(tb/2)-Lb)/(1-.5/(hc*hc));return[2*sb/(1+Rd(tb)),tb]};var Mc=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];ae.invert=function(sb,tb){sb/=Ue;tb/=Ue;var Lb=sb*sb,Vb=Lb+tb*tb,hc=he*he;return[sb?(Vb-1+q((1-Vb)*(1-Vb)+4*Lb))/(2*sb)*Ue:0,I(function(dc){return Vb*(he*be(dc)-2*dc)*he+4*dc*dc*(tb-be(dc))+2*he*dc-hc*tb},0)]};var md=5*.23185;te.invert=function(sb,tb){1.790857183<tb?tb=1.790857183:-1.790857183>tb&&(tb=-1.790857183);
var Lb=tb;do{var Vb=Lb*Lb;Lb-=Vb=(Lb*(1.0148+Vb*Vb*(.23185+Vb*(-.14499+.02406*Vb)))-tb)/(1.0148+Vb*Vb*(md+Vb*(-1.01493+.21654*Vb)))}while(1E-6<Td(Vb));return[sb,Lb]};Bb.invert=function(sb,tb){if(1E-6>Td(tb))return[sb,0];var Lb=sb*sb+tb*tb,Vb=.5*tb,hc=10;do{var dc=Kf(Vb);var Fc=1/Rd(Vb),Yc=Lb-2*tb*Vb+Vb*Vb;Vb-=dc=(dc*Yc+2*(Vb-tb))/(2+Yc*Fc*Fc+2*(Vb-tb)*dc)}while(1E-6<Td(dc)&&0<--hc);dc=Kf(Vb);return[(Td(tb)<Td(Vb+1/dc)?l(sb*dc):Yf(tb)*Yf(sb)*(u(Td(sb*dc))+Ue))/be(Vb),Vb]};var yd=[[0,90],[-90,0],[0,
0],[90,0],[180,0],[0,-90]],ne=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(sb){return sb.map(function(tb){return yd[tb]})}),Le=2/q(3);uc.invert=function(sb,tb){return E.invert(sb/Le,tb)};var Qe=()=>{},Xe=[],Ed=[],kf={point:function(sb,tb){Xe.push([sb,tb])},result:function(){var sb=Xe.length?2>Xe.length?{type:"Point",coordinates:Xe[0]}:{type:"MultiPoint",coordinates:Xe}:null;Xe=[];return sb}},og={lineStart:Qe,point:function(sb,tb){Xe.push([sb,tb])},lineEnd:function(){Xe.length&&
(Ed.push(Xe),Xe=[])},result:function(){var sb=Ed.length?2>Ed.length?{type:"LineString",coordinates:Ed[0]}:{type:"MultiLineString",coordinates:Ed}:null;Ed=[];return sb}},kg={polygonStart:Qe,lineStart:Qe,point:function(sb,tb){Xe.push([sb,tb])},lineEnd:function(){var sb=Xe.length;if(sb){do Xe.push(Xe[0].slice());while(4>++sb);Ed.push(Xe);Xe=[]}},polygonEnd:Qe,result:function(){if(!Ed.length)return null;var sb=[],tb=[];Ed.forEach(function(Lb){if(4>(hc=Lb.length))var Vb=!1;else{Vb=0;for(var hc,dc=Lb[hc-
1][1]*Lb[0][0]-Lb[hc-1][0]*Lb[0][1];++Vb<hc;)dc+=Lb[Vb-1][1]*Lb[Vb][0]-Lb[Vb-1][0]*Lb[Vb][1];Vb=0>=dc}Vb?sb.push([Lb]):tb.push(Lb)});tb.forEach(function(Lb){var Vb=Lb[0];sb.some(function(hc){for(var dc=hc[0],Fc=Vb[0],Yc=Vb[1],Nc=!1,fd=0,mc=dc.length,wd=mc-1;fd<mc;wd=fd++){var Xd=dc[fd],ce=Xd[0];Xd=Xd[1];var De=dc[wd];wd=De[0];De=De[1];Xd>Yc^De>Yc&&Fc<(wd-ce)*(Yc-Xd)/(De-Xd)+ce&&(Nc=!Nc)}if(Nc)return hc.push(Lb),!0})||sb.push([Lb])});Ed=[];return sb.length?1<sb.length?{type:"MultiPolygon",coordinates:sb}:
{type:"Polygon",coordinates:sb[0]}:null}},Uf=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];Uf.forEach(function(sb){sb[1]*=1.0144});$d.invert=function(sb,tb){var Lb=tb/Ue,Vb=90*Lb,hc=Pg(18,Td(Vb/5)),dc=Xf(0,jf(hc));do{var Fc=Uf[dc][1],Yc=Uf[dc+1][1],Nc=Uf[Pg(19,dc+2)][1],fd=Nc-Fc;Fc=Nc-2*Yc+
Fc;Yc=2*(Td(Lb)-Yc)/fd;fd=Fc/fd;fd=Yc*(1-fd*Yc*(1-2*fd*Yc));if(0<=fd||1===dc){Vb=(0<=tb?5:-5)*(fd+hc);Lb=50;do hc=Pg(18,Td(Vb)/5),dc=jf(hc),fd=hc-dc,Fc=Uf[dc][1],Yc=Uf[dc+1][1],Nc=Uf[Pg(19,dc+2)][1],Vb-=(hc=(0<=tb?Ue:-Ue)*(Yc+fd*(Nc-Fc)/2+fd*fd*(Nc-2*Yc+Fc)/2)-tb)*lc;while(1E-12<Td(hc)&&0<--Lb);break}}while(0<=--dc);tb=Uf[dc][0];hc=Uf[dc+1][0];dc=Uf[Pg(19,dc+2)][0];return[sb/(hc+fd*(dc-tb)/2+fd*fd*(dc-2*hc+tb)/2),Vb*rc]};If.invert=function(sb,tb){tb/=1.70711;var Lb=be(Pf*tb);return[sb/(.74482-.34588*
Lb*Lb),2*nf(tb)]};Tf.invert=function(sb,tb){if(1E-6>Td(tb))return[sb,0];if(1E-6>Td(sb))return[0,Ue*be(2*nf(tb/he))];var Lb=(sb/=he)*sb,Vb=(tb/=he)*tb,hc=Lb+Vb,dc=hc*hc,Fc=-Td(tb)*(1+hc),Yc=Fc-2*Vb+Lb,Nc=-2*Fc+1+2*Vb+dc,fd=Vb/Nc+(2*Yc*Yc*Yc/(Nc*Nc*Nc)-9*Fc*Yc/(Nc*Nc))/27,mc=(Fc-Yc*Yc/(3*Nc))/Nc;Fc=2*q(-mc/3);fd=u(3*fd/(mc*Fc))/3;return[he*(hc-1+q(1+2*(Lb-Vb)+dc))/(2*sb),Yf(tb)*he*(-Fc*Rd(fd+he/3)-Yc/(3*Nc))]};sg.invert=function(sb,tb){if(!sb)return[0,Ue*be(2*nf(tb/he))];var Lb=Td(sb/he),Vb=(1-Lb*Lb-
(tb/=he)*tb)/(2*Lb),hc=q(Vb*Vb+1);return[Yf(sb)*he*(hc-Vb),Yf(tb)*Ue*be(2*Se(q((1-2*Vb*Lb)*(Vb+hc)-Lb),q(hc+Vb+Lb)))]};zc.invert=function(sb,tb){if(!tb)return[sb,0];tb/=he;var Lb=(he*he*(1-tb*tb)-sb*sb)/(2*he*sb);return[sb?he*(Yf(sb)*q(Lb*Lb+1)-Lb):0,Ue*be(2*nf(tb))]};Wa.invert=function(sb,tb){if(!sb||!tb)return[sb,tb];var Lb=Yf(tb);tb=Td(tb)/he;var Vb=Yf(sb)*sb/Ue,hc=(Vb*Vb-1+4*tb*tb)/Td(Vb),dc=hc*hc,Fc=tb*(2-(.5<tb?Pg(tb,Td(sb)):0));tb=sb*sb+tb*tb;var Yc=50;do{var Nc=Fc*Fc;var fd=(8*Fc-Nc*(Nc+2)-
5)/(2*Nc*(Fc-1));var mc=(3*Fc-Nc*Fc-10)/(2*Nc*Fc),wd=fd*fd,Xd=Fc*fd,ce=Fc+fd,De=ce*ce,Ua=Fc+3*fd,pb=-2*ce*(4*Xd*wd+(1-4*Nc+3*Nc*Nc)*(1+mc)+wd*(-6+14*Nc-dc+(-8+8*Nc-2*dc)*mc)+Xd*(-8+12*Nc+(-10+10*Nc-dc)*mc));Nc=q(De*(Nc+wd*dc-1)+(1-Nc)*(Nc*(Ua*Ua+4*wd)+wd*(12*Xd+4*wd)));Fc-=fd=(hc*(De+wd-1)+2*Nc-Vb*(4*De+dc))/(hc*(2*fd*mc+2*ce*(1+mc))+pb/Nc-8*ce*(hc*(-1+wd+De)+2*Nc)*(1+mc)/(dc+4*De))}while(1E-6<fd*tb*tb&&0<--Yc);return[Yf(sb)*(q(hc*hc+4)+hc)*he/4,Lb*Ue*Fc]};var dg=4*he+3*q(3),tg=2*q(2*he*q(3)/dg),
fh=O(tg*q(3)/he,tg,dg/6);Xb.invert=function(sb,tb){return[sb/q(1-3*tb*tb/(he*he)),tb]};Xc.invert=function(sb,tb){var Lb=(sb*sb+tb*tb)/-2,Vb=q(-Lb*(2+Lb)),hc=tb*Lb+sb*Vb;sb=sb*Lb-tb*Vb;tb=q(sb*sb+hc*hc);return[Se(Vb*hc,tb*(1+Lb)),tb?-l(Vb*sb/tb):0]};Id.invert=function(sb,tb){var Lb=sb,Vb=tb,hc=25;do{var dc=Rd(Vb),Fc=be(Vb),Yc=be(2*Vb),Nc=Fc*Fc,fd=dc*dc,mc=be(Lb),wd=Rd(Lb/2),Xd=be(Lb/2),ce=Xd*Xd,De=1-fd*wd*wd,Ua=De?u(dc*wd)*q(pb=1/De):pb=0,pb;De=.5*(2*Ua*dc*Xd+Lb/Ue)-sb;var Rb=.5*(Ua*Fc+Vb)-tb,ec=.5*
pb*(fd*ce+Ua*dc*wd*Nc)+.5/Ue,Sc=pb*(mc*Yc/4-Ua*Fc*Xd);Fc=.125*pb*(Yc*Xd-Ua*Fc*fd*mc);Nc=.5*pb*(Nc*wd+Ua*ce*dc)+.5;dc=Sc*Fc-Nc*ec;Sc=(Rb*Sc-De*Nc)/dc;De=(De*Fc-Rb*ec)/dc;Lb-=Sc;Vb-=De}while((1E-6<Td(Sc)||1E-6<Td(De))&&0<--hc);return[Lb,Vb]};k.geoAiry=function(){var sb=Ue,tb=f.geoProjectionMutator(aa),Lb=tb(sb);Lb.radius=function(Vb){return arguments.length?tb(sb=Vb*rc):sb*lc};return Lb.scale(179.976).clipAngle(147)};k.geoAiryRaw=aa;k.geoAitoff=function(){return f.geoProjection(X).scale(152.63)};k.geoAitoffRaw=
X;k.geoArmadillo=function(){var sb=20*rc,tb=0<=sb?1:-1,Lb=Kf(tb*sb),Vb=f.geoProjectionMutator(S),hc=Vb(sb),dc=hc.stream;hc.parallel=function(Fc){if(!arguments.length)return sb*lc;Lb=Kf((tb=0<=(sb=Fc*rc)?1:-1)*sb);return Vb(sb)};hc.stream=function(Fc){var Yc=hc.rotate(),Nc=dc(Fc),fd=(hc.rotate([0,0]),dc(Fc)),mc=hc.precision();hc.rotate(Yc);Nc.sphere=function(){fd.polygonStart();fd.lineStart();for(var wd=-180*tb;180>tb*wd;wd+=90*tb)fd.point(wd,90*tb);if(sb)for(;-180<=tb*(wd-=3*tb*mc);)fd.point(wd,tb*
-Se(Rd(wd*rc/2),Lb)*lc);fd.lineEnd();fd.polygonEnd()};return Nc};return hc.scale(218.695).center([0,28.0974])};k.geoArmadilloRaw=S;k.geoAugust=function(){return f.geoProjection(V).scale(66.1603)};k.geoAugustRaw=V;k.geoBaker=function(){return f.geoProjection(F).scale(112.314)};k.geoBakerRaw=F;k.geoBerghaus=function(){var sb=5,tb=f.geoProjectionMutator(t),Lb=tb(sb),Vb=Lb.stream,hc=-Rd(.01*rc),dc=be(.01*rc);Lb.lobes=function(Fc){return arguments.length?tb(sb=+Fc):sb};Lb.stream=function(Fc){var Yc=Lb.rotate(),
Nc=Vb(Fc),fd=(Lb.rotate([0,0]),Vb(Fc));Lb.rotate(Yc);Nc.sphere=function(){fd.polygonStart();fd.lineStart();for(var mc=0,wd=360/sb,Xd=2*he/sb,ce=90-180/sb,De=Ue;mc<sb;++mc,ce-=wd,De-=Xd)fd.point(Se(dc*Rd(De),hc)*lc,l(dc*be(De))*lc),-90>ce?(fd.point(-90,-180-ce-.01),fd.point(-90,-180-ce+.01)):(fd.point(90,ce+.01),fd.point(90,ce-.01));fd.lineEnd();fd.polygonEnd()};return Nc};return Lb.scale(87.8076).center([0,17.1875]).clipAngle(179.999)};k.geoBerghausRaw=t;k.geoBertin1953=function(){return f.geoProjection(B()).rotate([-16.5,
-42]).scale(176.57).center([7.93,.09])};k.geoBertin1953Raw=B;k.geoBoggs=function(){return f.geoProjection(N).scale(160.857)};k.geoBoggsRaw=N;k.geoBonne=function(){return A(T).scale(123.082).center([0,26.1441]).parallel(45)};k.geoBonneRaw=T;k.geoBottomley=function(){var sb=.5,tb=f.geoProjectionMutator(z),Lb=tb(sb);Lb.fraction=function(Vb){return arguments.length?tb(sb=+Vb):sb};return Lb.scale(158.837)};k.geoBottomleyRaw=z;k.geoBromley=function(){return f.geoProjection(Nb).scale(152.63)};k.geoBromleyRaw=
Nb;k.geoChamberlin=Z;k.geoChamberlinRaw=r;k.geoChamberlinAfrica=function(){return Z([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])};k.geoCollignon=function(){return f.geoProjection(E).scale(95.6464).center([0,30])};k.geoCollignonRaw=E;k.geoCraig=function(){return A(C).scale(249.828).clipAngle(90)};k.geoCraigRaw=C;k.geoCraster=function(){return f.geoProjection(W).scale(156.19)};k.geoCrasterRaw=W;k.geoCylindricalEqualArea=function(){return A(fa).parallel(38.58).scale(195.044)};k.geoCylindricalEqualAreaRaw=
fa;k.geoCylindricalStereographic=function(){return A(ja).scale(124.75)};k.geoCylindricalStereographicRaw=ja;k.geoEckert1=function(){return f.geoProjection(Ba).scale(165.664)};k.geoEckert1Raw=Ba;k.geoEckert2=function(){return f.geoProjection(Ga).scale(165.664)};k.geoEckert2Raw=Ga;k.geoEckert3=function(){return f.geoProjection(ua).scale(180.739)};k.geoEckert3Raw=ua;k.geoEckert4=function(){return f.geoProjection(Fa).scale(180.739)};k.geoEckert4Raw=Fa;k.geoEckert5=function(){return f.geoProjection(Xa).scale(173.044)};
k.geoEckert5Raw=Xa;k.geoEckert6=function(){return f.geoProjection(Sa).scale(173.044)};k.geoEckert6Raw=Sa;k.geoEisenlohr=function(){return f.geoProjection(eb).scale(62.5271)};k.geoEisenlohrRaw=eb;k.geoFahey=function(){return f.geoProjection(Va).scale(137.152)};k.geoFaheyRaw=Va;k.geoFoucaut=function(){return f.geoProjection(La).scale(135.264)};k.geoFoucautRaw=La;k.geoFoucautSinusoidal=function(){var sb=.5,tb=f.geoProjectionMutator(Ra),Lb=tb(sb);Lb.alpha=function(Vb){return arguments.length?tb(sb=+Vb):
sb};return Lb.scale(168.725)};k.geoFoucautSinusoidalRaw=Ra;k.geoGilbert=function(sb){function tb(dc){return Vb([dc[0]/2,l(Kf(dc[1]/2*rc))*lc])}function Lb(dc){tb[dc]=function(){return arguments.length?(Vb[dc].apply(Vb,arguments),tb):Vb[dc]()}}null==sb&&(sb=f.geoOrthographic);var Vb=sb(),hc=f.geoEquirectangular().scale(lc).precision(0).clipAngle(null).translate([0,0]);Vb.invert&&(tb.invert=function(dc){return la(Vb.invert(dc))});tb.stream=function(dc){var Fc=Vb.stream(dc);dc=hc.stream({point:function(Yc,
Nc){Fc.point(Yc/2,l(Kf(-Nc/2*rc))*lc)},lineStart:function(){Fc.lineStart()},lineEnd:function(){Fc.lineEnd()},polygonStart:function(){Fc.polygonStart()},polygonEnd:function(){Fc.polygonEnd()}});dc.sphere=Fc.sphere;return dc};tb.rotate=function(dc){return arguments.length?(hc.rotate(dc),tb):hc.rotate()};tb.center=function(dc){return arguments.length?(Vb.center([dc[0]/2,l(Kf(dc[1]/2*rc))*lc]),tb):la(Vb.center())};Lb("angle");Lb("clipAngle");Lb("clipExtent");Lb("fitExtent");Lb("fitHeight");Lb("fitSize");
Lb("fitWidth");Lb("scale");Lb("translate");Lb("precision");return tb.scale(249.5)};k.geoGingery=function(){var sb=6,tb=30*rc,Lb=Rd(tb),Vb=be(tb),hc=f.geoProjectionMutator(ma),dc=hc(tb,sb),Fc=dc.stream,Yc=-Rd(.01*rc),Nc=be(.01*rc);dc.radius=function(fd){if(!arguments.length)return tb*lc;Lb=Rd(tb=fd*rc);Vb=be(tb);return hc(tb,sb)};dc.lobes=function(fd){return arguments.length?hc(tb,sb=+fd):sb};dc.stream=function(fd){var mc=dc.rotate(),wd=Fc(fd),Xd=(dc.rotate([0,0]),Fc(fd));dc.rotate(mc);wd.sphere=function(){Xd.polygonStart();
Xd.lineStart();for(var ce=0,De=2*he/sb,Ua=0;ce<sb;++ce,Ua-=De)Xd.point(Se(Nc*Rd(Ua),Yc)*lc,l(Nc*be(Ua))*lc),Xd.point(Se(Vb*Rd(Ua-De/2),Lb)*lc,l(Vb*be(Ua-De/2))*lc);Xd.lineEnd();Xd.polygonEnd()};return wd};return dc.rotate([90,-40]).scale(91.7095).clipAngle(179.999)};k.geoGingeryRaw=ma;k.geoGinzburg4=function(){return f.geoProjection(jb).scale(149.995)};k.geoGinzburg4Raw=jb;k.geoGinzburg5=function(){return f.geoProjection(Qb).scale(153.93)};k.geoGinzburg5Raw=Qb;k.geoGinzburg6=function(){return f.geoProjection(pc).scale(130.945)};
k.geoGinzburg6Raw=pc;k.geoGinzburg8=function(){return f.geoProjection(Ea).scale(131.747)};k.geoGinzburg8Raw=Ea;k.geoGinzburg9=function(){return f.geoProjection(Qc).scale(131.087)};k.geoGinzburg9Raw=Qc;k.geoGringorten=function(){return f.geoProjection(kb(cb)).scale(239.75)};k.geoGringortenRaw=cb;k.geoGuyou=function(){return f.geoProjection(kb(sa)).scale(151.496)};k.geoGuyouRaw=sa;k.geoHammer=function(){var sb=2,tb=f.geoProjectionMutator(w),Lb=tb(sb);Lb.coefficient=function(Vb){return arguments.length?
tb(sb=+Vb):sb};return Lb.scale(169.529)};k.geoHammerRaw=w;k.geoHammerRetroazimuthal=function(){var sb=0,tb=f.geoProjectionMutator(ra),Lb=tb(sb),Vb=Lb.rotate,hc=Lb.stream,dc=f.geoCircle();Lb.parallel=function(Fc){if(!arguments.length)return sb*lc;var Yc=Lb.rotate();return tb(sb=Fc*rc).rotate(Yc)};Lb.rotate=function(Fc){if(!arguments.length)return Fc=Vb.call(Lb),Fc[1]+=sb*lc,Fc;Vb.call(Lb,[Fc[0],Fc[1]-sb*lc]);dc.center([-Fc[0],-Fc[1]]);return Lb};Lb.stream=function(Fc){Fc=hc(Fc);Fc.sphere=function(){Fc.polygonStart();
var Yc=dc.radius(89.99)().coordinates[0],Nc=Yc.length-1,fd=-1,mc;for(Fc.lineStart();++fd<Nc;)Fc.point((mc=Yc[fd])[0],mc[1]);Fc.lineEnd();Yc=dc.radius(90.01)().coordinates[0];for(Fc.lineStart();0<=--fd;)Fc.point((mc=Yc[fd])[0],mc[1]);Fc.lineEnd();Fc.polygonEnd()};return Fc};return Lb.scale(79.4187).parallel(45).clipAngle(179.999)};k.geoHammerRetroazimuthalRaw=ra;k.geoHealpix=function(){var sb=4,tb=f.geoProjectionMutator(Ia),Lb=tb(sb),Vb=Lb.stream;Lb.lobes=function(hc){return arguments.length?tb(sb=
+hc):sb};Lb.stream=function(hc){var dc=Lb.rotate(),Fc=Vb(hc),Yc=(Lb.rotate([0,0]),Vb(hc));Lb.rotate(dc);Fc.sphere=function(){var Nc=f.geoStream;var fd=180/sb;var mc=[].concat(h.range(-180,180+fd/2,fd).map(bb),h.range(180,-180-fd/2,-fd).map(Hb));fd={type:"Polygon",coordinates:[180===fd?mc.map(zb):mc]};Nc.call(f,fd,Yc)};return Fc};return Lb.scale(239.75)};k.geoHealpixRaw=Ia;k.geoHill=function(){var sb=1,tb=f.geoProjectionMutator(mb),Lb=tb(sb);Lb.ratio=function(Vb){return arguments.length?tb(sb=+Vb):
sb};return Lb.scale(167.774).center([0,18.67])};k.geoHillRaw=mb;k.geoHomolosine=function(){return f.geoProjection(Eb).scale(152.63)};k.geoHomolosineRaw=Eb;k.geoHufnagel=function(){var sb=1,tb=0,Lb=45*rc,Vb=2,hc=f.geoProjectionMutator(Db),dc=hc(sb,tb,Lb,Vb);dc.a=function(Fc){return arguments.length?hc(sb=+Fc,tb,Lb,Vb):sb};dc.b=function(Fc){return arguments.length?hc(sb,tb=+Fc,Lb,Vb):tb};dc.psiMax=function(Fc){return arguments.length?hc(sb,tb,Lb=+Fc*rc,Vb):Lb*lc};dc.ratio=function(Fc){return arguments.length?
hc(sb,tb,Lb,Vb=+Fc):Vb};return dc.scale(180.739)};k.geoHufnagelRaw=Db;k.geoHyperelliptical=function(){var sb=0,tb=2.5,Lb=1.183136,Vb=f.geoProjectionMutator(Tc),hc=Vb(sb,tb,Lb);hc.alpha=function(dc){return arguments.length?Vb(sb=+dc,tb,Lb):sb};hc.k=function(dc){return arguments.length?Vb(sb,tb=+dc,Lb):tb};hc.gamma=function(dc){return arguments.length?Vb(sb,tb,Lb=+dc):Lb};return hc.scale(152.63)};k.geoHyperellipticalRaw=Tc;k.geoInterrupt=Gd;k.geoInterruptedBoggs=function(){return Gd(N,Wd).scale(160.857)};
k.geoInterruptedHomolosine=function(){return Gd(Eb,we).scale(152.63)};k.geoInterruptedMollweide=function(){return Gd(xb,ue).scale(169.529)};k.geoInterruptedMollweideHemispheres=function(){return Gd(xb,sd).scale(169.529).rotate([20,0])};k.geoInterruptedSinuMollweide=function(){return Gd(Jb,Fe,R).rotate([-20,-55]).scale(164.263).center([0,-5.4036])};k.geoInterruptedSinusoidal=function(){return Gd(J,Ge).scale(152.63).rotate([-20,0])};k.geoKavrayskiy7=function(){return f.geoProjection(Kd).scale(158.837)};
k.geoKavrayskiy7Raw=Kd;k.geoLagrange=function(){var sb=.5,tb=f.geoProjectionMutator(Vd),Lb=tb(sb);Lb.spacing=function(Vb){return arguments.length?tb(sb=+Vb):sb};return Lb.scale(124.75)};k.geoLagrangeRaw=Vd;k.geoLarrivee=function(){return f.geoProjection(ze).scale(97.2672)};k.geoLarriveeRaw=ze;k.geoLaskowski=function(){return f.geoProjection(ee).scale(139.98)};k.geoLaskowskiRaw=ee;k.geoLittrow=function(){return f.geoProjection(bd).scale(144.049).clipAngle(89.999)};k.geoLittrowRaw=bd;k.geoLoximuthal=
function(){return A(Bd).parallel(40).scale(158.837)};k.geoLoximuthalRaw=Bd;k.geoMiller=function(){return f.geoProjection(Ld).scale(108.318)};k.geoMillerRaw=Ld;k.geoModifiedStereographic=Ee;k.geoModifiedStereographicRaw=fe;k.geoModifiedStereographicAlaska=function(){return Ee(rf,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)};k.geoModifiedStereographicGs48=function(){return Ee(Ma,[95,-38]).scale(1E3).clipAngle(55).center([-96.5563,38.8675])};k.geoModifiedStereographicGs50=
function(){return Ee(lb,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])};k.geoModifiedStereographicMiller=function(){return Ee(vb,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)};k.geoModifiedStereographicLee=function(){return Ee(nb,[165,10]).scale(250).clipAngle(130).center([-165,-10])};k.geoMollweide=function(){return f.geoProjection(xb).scale(169.529)};k.geoMollweideRaw=xb;k.geoMtFlatPolarParabolic=function(){return f.geoProjection(dd).scale(164.859)};k.geoMtFlatPolarParabolicRaw=
dd;k.geoMtFlatPolarQuartic=function(){return f.geoProjection(nd).scale(188.209)};k.geoMtFlatPolarQuarticRaw=nd;k.geoMtFlatPolarSinusoidal=function(){return f.geoProjection(Dc).scale(166.518)};k.geoMtFlatPolarSinusoidalRaw=Dc;k.geoNaturalEarth2=function(){return f.geoProjection(jd).scale(175.295)};k.geoNaturalEarth2Raw=jd;k.geoNellHammer=function(){return f.geoProjection(Qd).scale(152.63)};k.geoNellHammerRaw=Qd;k.geoInterruptedQuarticAuthalic=function(){return Gd(w(Infinity),Mc).rotate([20,0]).scale(152.63)};
k.geoNicolosi=function(){return f.geoProjection(ae).scale(127.267)};k.geoNicolosiRaw=ae;k.geoPatterson=function(){return f.geoProjection(te).scale(139.319)};k.geoPattersonRaw=te;k.geoPolyconic=function(){return f.geoProjection(Bb).scale(103.74)};k.geoPolyconicRaw=Bb;k.geoPolyhedral=ud;k.geoPolyhedralButterfly=function(sb){sb=sb||function(Lb){Lb=f.geoCentroid({type:"MultiPoint",coordinates:Lb});return f.geoGnomonic().scale(1).translate([0,0]).rotate([-Lb[0],-Lb[1]])};var tb=ne.map(function(Lb){return{face:Lb,
project:sb(Lb)}});[-1,0,0,1,0,1,4,5].forEach(function(Lb,Vb){(Lb=tb[Lb])&&(Lb.children||(Lb.children=[])).push(tb[Vb])});return ud(tb[0],function(Lb,Vb){return tb[Lb<-he/2?0>Vb?6:4:0>Lb?0>Vb?2:0:Lb<he/2?0>Vb?3:1:0>Vb?7:5]}).angle(-30).scale(101.858).center([0,45])};k.geoPolyhedralCollignon=function(sb){sb=sb||function(Lb){Lb=f.geoCentroid({type:"MultiPoint",coordinates:Lb});return f.geoProjection(uc).translate([0,0]).scale(1).rotate(0<Lb[1]?[-Lb[0],0]:[180-Lb[0],180])};var tb=ne.map(function(Lb){return{face:Lb,
project:sb(Lb)}});[-1,0,0,1,0,1,4,5].forEach(function(Lb,Vb){(Lb=tb[Lb])&&(Lb.children||(Lb.children=[])).push(tb[Vb])});return ud(tb[0],function(Lb,Vb){return tb[Lb<-he/2?0>Vb?6:4:0>Lb?0>Vb?2:0:Lb<he/2?0>Vb?3:1:0>Vb?7:5]}).angle(-30).scale(121.906).center([0,48.5904])};k.geoPolyhedralWaterman=function(sb){sb=sb||function(dc){dc=6===dc.length?f.geoCentroid({type:"MultiPoint",coordinates:dc}):dc[0];return f.geoGnomonic().scale(1).translate([0,0]).rotate([-dc[0],-dc[1]])};var tb=ne.map(function(dc){dc=
dc.map(Od);for(var Fc=dc.length,Yc=dc[Fc-1],Nc,fd=[],mc=0;mc<Fc;++mc)Nc=dc[mc],fd.push(Nd([.9486832980505138*Yc[0]+.31622776601683794*Nc[0],.9486832980505138*Yc[1]+.31622776601683794*Nc[1],.9486832980505138*Yc[2]+.31622776601683794*Nc[2]]),Nd([.9486832980505138*Nc[0]+.31622776601683794*Yc[0],.9486832980505138*Nc[1]+.31622776601683794*Yc[1],.9486832980505138*Nc[2]+.31622776601683794*Yc[2]])),Yc=Nc;return fd}),Lb=[],Vb=[-1,0,0,1,0,1,4,5];tb.forEach(function(dc,Fc){for(var Yc=ne[Fc],Nc=Yc.length,fd=
Lb[Fc]=[],mc=0;mc<Nc;++mc){tb.push([Yc[mc],dc[(2*mc+2)%(2*Nc)],dc[(2*mc+1)%(2*Nc)]]);Vb.push(Fc);var wd=fd,Xd=wd.push,ce=Od(dc[(2*mc+2)%(2*Nc)]),De=Od(dc[(2*mc+1)%(2*Nc)]);Xd.call(wd,[ce[1]*De[2]-ce[2]*De[1],ce[2]*De[0]-ce[0]*De[2],ce[0]*De[1]-ce[1]*De[0]])}});var hc=tb.map(function(dc){return{project:sb(dc),face:dc}});Vb.forEach(function(dc,Fc){(dc=hc[dc])&&(dc.children||(dc.children=[])).push(hc[Fc])});return ud(hc[0],function(dc,Fc){var Yc=Rd(Fc);Yc=[Yc*Rd(dc),Yc*be(dc),be(Fc)];dc=dc<-he/2?0>Fc?
6:4:0>dc?0>Fc?2:0:dc<he/2?0>Fc?3:1:0>Fc?7:5;Fc=Lb[dc];return hc[0>Oc(Fc[0],Yc)?8+3*dc:0>Oc(Fc[1],Yc)?3*dc+9:0>Oc(Fc[2],Yc)?3*dc+10:dc]}).angle(-30).scale(110.625).center([0,45])};k.geoProject=function(sb,tb){tb=tb.stream;if(!tb)throw Error("invalid projection");switch(sb&&sb.type){case "Feature":var Lb=ye;break;case "FeatureCollection":Lb=pe;break;default:Lb=od}return Lb(sb,tb)};k.geoGringortenQuincuncial=function(){return hd(cb).scale(176.423)};k.geoPeirceQuincuncial=function(){return hd(sa).scale(111.48)};
k.geoQuantize=function(sb,tb){function Lb(Nc){var fd=Nc.length,mc=2,wd=Array(fd);wd[0]=+Nc[0].toFixed(tb);for(wd[1]=+Nc[1].toFixed(tb);mc<fd;)wd[mc]=Nc[mc],++mc;return wd}function Vb(Nc){for(var fd=Lb(Nc[0]),mc=[fd],wd=1;wd<Nc.length;wd++){var Xd=Lb(Nc[wd]);if(2<Xd.length||Xd[0]!=fd[0]||Xd[1]!=fd[1])mc.push(Xd),fd=Xd}1===mc.length&&1<Nc.length&&mc.push(Lb(Nc[Nc.length-1]));return mc}function hc(Nc){return Nc.map(Vb)}function dc(Nc){if(null==Nc)return Nc;switch(Nc.type){case "GeometryCollection":var fd=
{type:"GeometryCollection",geometries:Nc.geometries.map(dc)};break;case "Point":fd={type:"Point",coordinates:Lb(Nc.coordinates)};break;case "MultiPoint":fd={type:Nc.type,coordinates:Nc.coordinates.map(Lb)};break;case "LineString":fd={type:Nc.type,coordinates:Vb(Nc.coordinates)};break;case "MultiLineString":case "Polygon":fd={type:Nc.type,coordinates:hc(Nc.coordinates)};break;case "MultiPolygon":fd={type:"MultiPolygon",coordinates:Nc.coordinates.map(hc)};break;default:return Nc}null!=Nc.bbox&&(fd.bbox=
Nc.bbox);return fd}function Fc(Nc){var fd={type:"Feature",properties:Nc.properties,geometry:dc(Nc.geometry)};null!=Nc.id&&(fd.id=Nc.id);null!=Nc.bbox&&(fd.bbox=Nc.bbox);return fd}if(!(0<=(tb=+tb)&&20>=tb))throw Error("invalid digits");if(null!=sb)switch(sb.type){case "Feature":return Fc(sb);case "FeatureCollection":var Yc={type:"FeatureCollection",features:sb.features.map(Fc)};null!=sb.bbox&&(Yc.bbox=sb.bbox);return Yc;default:return dc(sb)}return sb};k.geoQuincuncial=hd;k.geoRectangularPolyconic=
function(){return A(ge).scale(131.215)};k.geoRectangularPolyconicRaw=ge;k.geoRobinson=function(){return f.geoProjection($d).scale(152.63)};k.geoRobinsonRaw=$d;k.geoSatellite=function(){var sb=2,tb=0,Lb=f.geoProjectionMutator(Ie),Vb=Lb(sb,tb);Vb.distance=function(hc){return arguments.length?Lb(sb=+hc,tb):sb};Vb.tilt=function(hc){return arguments.length?Lb(sb,tb=hc*rc):tb*lc};return Vb.scale(432.147).clipAngle(u(1/sb)*lc-1E-6)};k.geoSatelliteRaw=Ie;k.geoSinuMollweide=function(){return f.geoProjection(Jb).rotate([-20,
-55]).scale(164.263).center([0,-5.4036])};k.geoSinuMollweideRaw=Jb;k.geoSinusoidal=function(){return f.geoProjection(J).scale(152.63)};k.geoSinusoidalRaw=J;k.geoStitch=function(sb){if(null==sb)return sb;switch(sb.type){case "Feature":return jg(sb);case "FeatureCollection":var tb={type:"FeatureCollection",features:sb.features.map(jg)};null!=sb.bbox&&(tb.bbox=sb.bbox);return tb;default:return oe(sb)}};k.geoTimes=function(){return f.geoProjection(If).scale(146.153)};k.geoTimesRaw=If;k.geoTwoPointAzimuthal=
pf;k.geoTwoPointAzimuthalRaw=zg;k.geoTwoPointAzimuthalUsa=function(){return pf([-158,21.5],[-77,39]).clipAngle(60).scale(400)};k.geoTwoPointEquidistant=wg;k.geoTwoPointEquidistantRaw=bg;k.geoTwoPointEquidistantUsa=function(){return wg([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)};k.geoVanDerGrinten=function(){return f.geoProjection(Tf).scale(79.4183)};k.geoVanDerGrintenRaw=Tf;k.geoVanDerGrinten2=function(){return f.geoProjection(sg).scale(79.4183)};k.geoVanDerGrinten2Raw=sg;k.geoVanDerGrinten3=
function(){return f.geoProjection(zc).scale(79.4183)};k.geoVanDerGrinten3Raw=zc;k.geoVanDerGrinten4=function(){return f.geoProjection(Wa).scale(127.16)};k.geoVanDerGrinten4Raw=Wa;k.geoWagner=Na;k.geoWagner7=function(){return Na().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)};k.geoWagnerRaw=m;k.geoWagner4=function(){return f.geoProjection(fh).scale(176.84)};k.geoWagner4Raw=fh;k.geoWagner6=function(){return f.geoProjection(Xb).scale(152.63)};k.geoWagner6Raw=Xb;k.geoWiechel=function(){return f.geoProjection(Xc).rotate([0,
-90,45]).scale(124.75).clipAngle(179.999)};k.geoWiechelRaw=Xc;k.geoWinkel3=function(){return f.geoProjection(Id).scale(158.837)};k.geoWinkel3Raw=Id;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[532]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(530),da(531)):"function"===typeof define&&define.amd?define(["exports","d3-geo","d3-geo-projection"],f):(k="undefined"!==typeof globalThis?globalThis:k||self,f(k.vega={},k.d3,k.d3))})(this,function(k,f,h){function l(aa,X){return function V(){const F=X();F.type=aa;F.path=f.geoPath().projection(F);F.copy=F.copy||function(){const t=V();D.forEach(w=>{if(F[w])t[w](F[w]())});t.path.pointRadius(F.path.pointRadius());
return t};return F}}function u(aa,X){if(!aa||"string"!==typeof aa)throw Error("Projection type must be a name string.");aa=aa.toLowerCase();return 1<arguments.length?(U[aa]=l(aa,X),this):U[aa]||null}const q=f.geoPath(),D="clipAngle clipExtent scale translate center rotate parallels precision reflectX reflectY coefficient distance fraction lobes parallel radius ratio spacing tilt".split(" "),U={albers:f.geoAlbers,albersusa:f.geoAlbersUsa,azimuthalequalarea:f.geoAzimuthalEqualArea,azimuthalequidistant:f.geoAzimuthalEquidistant,
conicconformal:f.geoConicConformal,conicequalarea:f.geoConicEqualArea,conicequidistant:f.geoConicEquidistant,equalEarth:f.geoEqualEarth,equirectangular:f.geoEquirectangular,gnomonic:f.geoGnomonic,identity:f.geoIdentity,mercator:f.geoMercator,mollweide:h.geoMollweide,naturalEarth1:f.geoNaturalEarth1,orthographic:f.geoOrthographic,stereographic:f.geoStereographic,transversemercator:f.geoTransverseMercator};for(const aa in U)u(aa,U[aa]);k.getProjectionPath=function(aa){return aa&&aa.path||q};k.projection=
u;k.projectionProperties=D;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[533]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(517),da(503),da(506),da(518),da(532),da(530),da(523),da(522)):"function"===typeof define&&define.amd?define("exports vega-dataflow vega-util d3-array vega-statistics vega-projection d3-geo d3-color vega-canvas".split(" "),f):(k="undefined"!==typeof globalThis?globalThis:k||self,f((k.vega=k.vega||{},k.vega.transforms={}),k.vega,k.vega,k.d3,k.vega,k.vega,k.d3,k.d3,k.vega))})(this,function(k,
f,h,l,u,q,D,U,aa){function X(){}function S(){function La(Ea,kb){return kb.map(cb=>Ra(Ea,cb))}function Ra(Ea,kb){var cb=[],Mb=[];la(Ea,kb,Gb=>{Qa(Gb,Ea,kb);for(var Wb=0,sa=Gb.length,ra=Gb[sa-1][1]*Gb[0][0]-Gb[sa-1][0]*Gb[0][1];++Wb<sa;)ra+=Gb[Wb-1][1]*Gb[Wb][0]-Gb[Wb-1][0]*Gb[Wb][1];0<ra?cb.push([Gb]):Mb.push(Gb)});Mb.forEach(Gb=>{for(var Wb=0,sa=cb.length,ra;Wb<sa;++Wb){a:{var xa=(ra=cb[Wb])[0];for(var Ia=Gb,bb=-1,Hb=Ia.length;++bb<Hb;){b:{var zb=xa;for(var mb=Ia[bb],Jb=mb[0],Eb=mb[1],Db=-1,bc=0,
jc=zb.length,Tc=jc-1;bc<jc;Tc=bc++){var ub=zb[bc],Rc=ub[0],Gd=ub[1],Kd=zb[Tc];Tc=Kd[0];var Vd=Kd[1],ze,ee=ub;ub=Kd;Kd=mb;if(ze=(ub[0]-ee[0])*(Kd[1]-ee[1])===(Kd[0]-ee[0])*(ub[1]-ee[1]))ee=ee[ze=+(ee[0]===ub[0])],Kd=Kd[ze],ub=ub[ze],ze=ee<=Kd&&Kd<=ub||ub<=Kd&&Kd<=ee;if(ze){zb=0;break b}Gd>Eb!==Vd>Eb&&Jb<(Tc-Rc)*(Eb-Gd)/(Vd-Gd)+Rc&&(Db=-Db)}zb=Db}if(zb){xa=zb;break a}}xa=0}if(-1!==xa){ra.push(Gb);break}}});return{type:"MultiPolygon",value:kb,coordinates:cb}}function la(Ea,kb,cb){function Mb(zb){var mb=
[zb[0][0]+ra,zb[0][1]+sa];zb=[zb[1][0]+ra,zb[1][1]+sa];var Jb=2*mb[0]+mb[1]*(Aa+1)*4,Eb=2*zb[0]+zb[1]*(Aa+1)*4,Db,bc;(Db=Wb[Jb])?(bc=Gb[Eb])?(delete Wb[Db.end],delete Gb[bc.start],Db===bc?(Db.ring.push(zb),cb(Db.ring)):Gb[Db.start]=Wb[bc.end]={start:Db.start,end:bc.end,ring:Db.ring.concat(bc.ring)}):(delete Wb[Db.end],Db.ring.push(zb),Wb[Db.end=Eb]=Db):(Db=Gb[Eb])?(bc=Wb[Jb])?(delete Gb[Db.start],delete Wb[bc.end],Db===bc?(Db.ring.push(zb),cb(Db.ring)):Gb[bc.start]=Wb[Db.end]={start:bc.start,end:Db.end,
ring:bc.ring.concat(Db.ring)}):(delete Gb[Db.start],Db.ring.unshift(mb),Gb[Db.start=Jb]=Db):Gb[Jb]=Wb[Eb]={start:Jb,end:Eb,ring:[mb,zb]}}var Gb=[],Wb=[],sa;var ra=sa=-1;var xa=Ea[0]>=kb;for(eb[xa<<1].forEach(Mb);++ra<Aa-1;){var Ia=xa;xa=Ea[ra+1]>=kb;eb[Ia|xa<<1].forEach(Mb)}for(eb[xa<<0].forEach(Mb);++sa<Da-1;){ra=-1;xa=Ea[sa*Aa+Aa]>=kb;var bb=Ea[sa*Aa]>=kb;for(eb[xa<<1|bb<<2].forEach(Mb);++ra<Aa-1;){Ia=xa;xa=Ea[sa*Aa+Aa+ra+1]>=kb;var Hb=bb;bb=Ea[sa*Aa+ra+1]>=kb;eb[Ia|xa<<1|bb<<2|Hb<<3].forEach(Mb)}eb[xa|
bb<<3].forEach(Mb)}ra=-1;bb=Ea[sa*Aa]>=kb;for(eb[bb<<2].forEach(Mb);++ra<Aa-1;)Hb=bb,bb=Ea[sa*Aa+ra+1]>=kb,eb[bb<<2|Hb<<3].forEach(Mb);eb[bb<<3].forEach(Mb)}function ma(Ea,kb,cb){Ea.forEach(Mb=>{var Gb=Mb[0],Wb=Mb[1],sa=Gb|0,ra=Wb|0,xa=kb[ra*Aa+sa];if(0<Gb&&Gb<Aa&&sa===Gb){var Ia=kb[ra*Aa+sa-1];Mb[0]=Gb+(cb-Ia)/(xa-Ia)-.5}0<Wb&&Wb<Da&&ra===Wb&&(Ia=kb[(ra-1)*Aa+sa],Mb[1]=Wb+(cb-Ia)/(xa-Ia)-.5)})}var Aa=1,Da=1,Qa=ma;La.contour=Ra;La.size=function(Ea){if(!arguments.length)return[Aa,Da];var kb=Math.floor(Ea[0]),
cb=Math.floor(Ea[1]);0<=kb&&0<=cb||h.error("invalid size");return Aa=kb,Da=cb,La};La.smooth=function(Ea){return arguments.length?(Qa=Ea?ma:X,La):Qa===ma};return La}function V(La,Ra,la){return function(ma){var Aa=h.extent(ma);ma=la?Math.min(Aa[0],0):Aa[0];Aa=Aa[1];var Da=Aa-ma;Da=Ra?l.tickStep(ma,Aa,La):Da/(La+1);return l.range(ma+Da,Aa,Da)}}function F(La){f.Transform.call(this,null,La)}function t(La,Ra,la){const ma=V(la.levels||10,la.nice,!1!==la.zero);return"shared"!==la.resolve?ma:ma(La.map(Aa=>
l.max(Ra(Aa).values)))}function w(La,Ra,la,ma){var Aa=ma.scale||Ra.scale;let Da=ma.translate||Ra.translate;h.isFunction(Aa)&&(Aa=Aa(la,ma));h.isFunction(Da)&&(Da=Da(la,ma));if(1!==Aa&&null!=Aa||Da)la=(h.isNumber(Aa)?Aa:Aa[0])||1,Aa=(h.isNumber(Aa)?Aa:Aa[1])||1,La.forEach(x(Ra,la,Aa,Da&&Da[0]||0,Da&&Da[1]||0))}function x(La,Ra,la,ma,Aa){function Da(Gb){Gb.forEach(Qa)}function Qa(Gb){Mb&&Gb.reverse();Gb.forEach(Ea)}function Ea(Gb){Gb[0]=(Gb[0]-kb)*Ra+ma;Gb[1]=(Gb[1]-cb)*la+Aa}const kb=La.x1||0,cb=La.y1||
0,Mb=0>Ra*la;return function(Gb){Gb.coordinates.forEach(Da);return Gb}}function I(La,Ra,la){La=0<=La?La:u.bandwidthNRD(Ra,la);return Math.round((Math.sqrt(4*La*La+1)-1)/2)}function R(La){return h.isFunction(La)?La:h.constant(+La)}function B(){function La(kb,cb){const Mb=I(Aa[0],kb,Ra)>>Ea,Gb=I(Aa[1],kb,la)>>Ea,Wb=Mb?Mb+2:0,sa=Gb?Gb+2:0,ra=2*Wb+(Da>>Ea),xa=2*sa+(Qa>>Ea),Ia=new Float32Array(ra*xa),bb=new Float32Array(ra*xa);let Hb=Ia;kb.forEach(zb=>{const mb=Wb+(+Ra(zb)>>Ea),Jb=sa+(+la(zb)>>Ea);0<=
mb&&mb<ra&&0<=Jb&&Jb<xa&&(Ia[mb+Jb*ra]+=+ma(zb))});0<Mb&&0<Gb?(v(ra,xa,Ia,bb,Mb),O(ra,xa,bb,Ia,Gb),v(ra,xa,Ia,bb,Mb),O(ra,xa,bb,Ia,Gb),v(ra,xa,Ia,bb,Mb),O(ra,xa,bb,Ia,Gb)):0<Mb?(v(ra,xa,Ia,bb,Mb),v(ra,xa,bb,Ia,Mb),v(ra,xa,Ia,bb,Mb),Hb=bb):0<Gb&&(O(ra,xa,Ia,bb,Gb),O(ra,xa,bb,Ia,Gb),O(ra,xa,Ia,bb,Gb),Hb=bb);kb=cb?Math.pow(2,-2*Ea):1/l.sum(Hb);for(let zb=0,mb=ra*xa;zb<mb;++zb)Hb[zb]*=kb;return{values:Hb,scale:1<<Ea,width:ra,height:xa,x1:Wb,y1:sa,x2:Wb+(Da>>Ea),y2:sa+(Qa>>Ea)}}var Ra=kb=>kb[0],la=kb=>
kb[1],ma=h.one,Aa=[-1,-1],Da=960,Qa=500,Ea=2;La.x=function(kb){return arguments.length?(Ra=R(kb),La):Ra};La.y=function(kb){return arguments.length?(la=R(kb),La):la};La.weight=function(kb){return arguments.length?(ma=R(kb),La):ma};La.size=function(kb){if(!arguments.length)return[Da,Qa];var cb=+kb[0],Mb=+kb[1];0<=cb&&0<=Mb||h.error("invalid size");return Da=cb,Qa=Mb,La};La.cellSize=function(kb){if(!arguments.length)return 1<<Ea;1<=(kb=+kb)||h.error("invalid cell size");Ea=Math.floor(Math.log(kb)/Math.LN2);
return La};La.bandwidth=function(kb){if(!arguments.length)return Aa;kb=h.array(kb);1===kb.length&&(kb=[+kb[0],+kb[0]]);2!==kb.length&&h.error("invalid bandwidth");return Aa=kb,La};return La}function v(La,Ra,la,ma,Aa){const Da=(Aa<<1)+1;for(let Qa=0;Qa<Ra;++Qa)for(let Ea=0,kb=0;Ea<La+Aa;++Ea)Ea<La&&(kb+=la[Ea+Qa*La]),Ea>=Aa&&(Ea>=Da&&(kb-=la[Ea-Da+Qa*La]),ma[Ea-Aa+Qa*La]=kb/Math.min(Ea+1,La-1+Da-Ea,Da))}function O(La,Ra,la,ma,Aa){const Da=(Aa<<1)+1;for(let Qa=0;Qa<La;++Qa)for(let Ea=0,kb=0;Ea<Ra+Aa;++Ea)Ea<
Ra&&(kb+=la[Qa+Ea*La]),Ea>=Aa&&(Ea>=Da&&(kb-=la[Qa+(Ea-Da)*La]),ma[Qa+(Ea-Aa)*La]=kb/Math.min(Ea+1,Ra-1+Da-Ea,Da))}function N(La){f.Transform.call(this,null,La)}function A(La,Ra){Va.forEach(la=>null!=Ra[la]?La[la](Ra[la]):0);return La}function J(La,Ra){var la=[],ma=Mb=>Mb(Ea),Aa;if(null==Ra)la.push(La);else{var Da={};var Qa=0;for(Aa=La.length;Qa<Aa;++Qa){var Ea=La[Qa];var kb=Ra.map(ma);var cb=Da[kb];cb||(Da[kb]=cb=[],cb.dims=kb,la.push(cb));cb.push(Ea)}}return la}function T(La){f.Transform.call(this,
null,La)}function z(La){f.Transform.call(this,null,La)}function ba(La){f.Transform.call(this,null,La)}function K(La,Ra){const la=La.pointRadius();La.context(null);null!=Ra&&La.pointRadius(Ra);return la}function r(La){f.Transform.call(this,null,La)}function Y(La){f.Transform.call(this,null,La)}function Z(La,Ra,la){const ma=null==la?Aa=>La(Ra(Aa)):Aa=>{var Da=La.pointRadius();Aa=La.pointRadius(la)(Ra(Aa));La.pointRadius(Da);return Aa};ma.context=Aa=>{La.context(Aa);return ma};return ma}function E(La){f.Transform.call(this,
[],La);this.generator=D.geoGraticule()}function C(La){f.Transform.call(this,null,La)}function W(La,Ra){let la;h.isFunction(La)?(la=ma=>U.rgb(La(ma,Ra)),la.dep=ja(La)):la=h.constant(U.rgb(La||"#888"));return la}function fa(La,Ra){let la;h.isFunction(La)?(la=ma=>La(ma,Ra),la.dep=ja(La)):La?la=h.constant(La):(la=ma=>ma.$value/ma.$max||0,la.dep=!0);return la}function ja(La){if(!h.isFunction(La))return!1;La=h.toSet(h.accessorFields(La));return La.$x||La.$y||La.$value||La.$max}function Ba(La,Ra,la,ma){const Aa=
La.width;var Da=La.height;const Qa=La.x1||0,Ea=La.y1||0,kb=La.x2||Aa;Da=La.y2||Da;const cb=La.values;La=cb?ra=>cb[ra]:h.zero;const Mb=aa.canvas(kb-Qa,Da-Ea),Gb=Mb.getContext("2d"),Wb=Gb.getImageData(0,0,kb-Qa,Da-Ea),sa=Wb.data;for(let ra=Ea,xa=0;ra<Da;++ra){Ra.$y=ra-Ea;for(let Ia=Qa,bb=ra*Aa;Ia<kb;++Ia,xa+=4){Ra.$x=Ia-Qa;Ra.$value=La(Ia+bb);const Hb=la(Ra);sa[xa+0]=Hb.r;sa[xa+1]=Hb.g;sa[xa+2]=Hb.b;sa[xa+3]=~~(255*ma(Ra))}}Gb.putImageData(Wb,0,0);return Mb}function Ga(La){f.Transform.call(this,null,
La);this.modified(!0)}function ua(La,Ra){const la=Xa(Ra.fit);Ra.extent?La.fitExtent(Ra.extent,la):Ra.size?La.fitSize(Ra.size,la):0}function Fa(La){const Ra=q.projection((La||"mercator").toLowerCase());Ra||h.error("Unrecognized projection type: "+La);return Ra()}function Xa(La){La=h.array(La);return 1===La.length?La[0]:{type:"FeatureCollection",features:La.reduce((Ra,la)=>Ra.concat(Sa(la)),[])}}function Sa(La){return"FeatureCollection"===La.type?La.features:h.array(La).filter(Ra=>null!=Ra).map(Ra=>
"Feature"===Ra.type?Ra:{type:"Feature",geometry:Ra})}const eb=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];F.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},
{name:"levels",type:"number"},{name:"nice",type:"boolean","default":!1},{name:"resolve",type:"enum",values:["shared","independent"],"default":"independent"},{name:"zero",type:"boolean","default":!0},{name:"smooth",type:"boolean","default":!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string","null":!0,"default":"contour"}]};h.inherits(F,f.Transform,{transform(La,Ra){if(this.value&&!Ra.changed()&&!La.modified())return Ra.StopPropagation;
var la=Ra.fork(Ra.NO_SOURCE|Ra.NO_FIELDS);Ra=Ra.materialize(Ra.SOURCE).source;var ma=La.field||h.identity,Aa=S().smooth(!1!==La.smooth),Da=La.thresholds||t(Ra,ma,La),Qa=null===La.as?null:La.as||"contour",Ea=[];Ra.forEach(kb=>{const cb=ma(kb),Mb=Aa.size([cb.width,cb.height])(cb.values,h.isArray(Da)?Da:Da(cb.values));w(Mb,cb,kb,La);Mb.forEach(Gb=>{Ea.push(f.rederive(kb,f.ingest(null!=Qa?{[Qa]:Gb}:Gb)))})});this.value&&(la.rem=this.value);this.value=la.source=la.add=Ea;return la}});N.Definition={type:"KDE2D",
metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean","default":!1},{name:"as",type:"string","default":"grid"}]};const Va="x y weight size cellSize bandwidth".split(" ");h.inherits(N,f.Transform,{transform(La,Ra){if(this.value&&
!Ra.changed()&&!La.modified())return Ra.StopPropagation;var la=Ra.fork(Ra.NO_SOURCE|Ra.NO_FIELDS);Ra=Ra.materialize(Ra.SOURCE).source;Ra=J(Ra,La.groupby);var ma=(La.groupby||[]).map(h.accessorName),Aa=A(B(),La),Da=La.as||"grid",Qa=[];Qa=Ra.map(Ea=>{var kb=f.ingest,cb={[Da]:Aa(Ea,La.counts)};Ea=Ea.dims;for(let Mb=0;Mb<ma.length;++Mb)cb[ma[Mb]]=Ea[Mb];return kb.call(f,cb)});this.value&&(la.rem=this.value);this.value=la.source=la.add=Qa;return la}});T.Definition={type:"Contour",metadata:{generates:!0},
params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean","default":!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean","default":!0}]};h.inherits(T,f.Transform,{transform(La,Ra){if(this.value&&!Ra.changed()&&!La.modified())return Ra.StopPropagation;
var la=Ra.fork(Ra.NO_SOURCE|Ra.NO_FIELDS),ma=S().smooth(!1!==La.smooth),Aa=La.values,Da=La.thresholds||V(La.count||10,La.nice,!!Aa),Qa=La.size;if(!Aa){Aa=Ra.materialize(Ra.SOURCE).source;La=A(B(),La)(Aa,!0);var Ea=x(La,La.scale||1,La.scale||1,0,0);Qa=[La.width,La.height];Aa=La.values}Da=h.isArray(Da)?Da:Da(Aa);Aa=ma.size(Qa)(Aa,Da);Ea&&Aa.forEach(Ea);this.value&&(la.rem=this.value);this.value=la.source=la.add=(Aa||[]).map(f.ingest);return la}});z.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",
type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};h.inherits(z,f.Transform,{transform(La,Ra){var la=this._features,ma=this._points,Aa=La.fields,Da=Aa&&Aa[0],Qa=Aa&&Aa[1],Ea=La.geojson||!Aa&&h.identity;Aa=Ra.ADD;La=La.modified()||Ra.changed(Ra.REM)||Ra.modified(h.accessorFields(Ea))||Da&&Ra.modified(h.accessorFields(Da))||Qa&&Ra.modified(h.accessorFields(Qa));if(!this.value||La)Aa=Ra.SOURCE,this._features=la=[],this._points=ma=[];Ea&&Ra.visit(Aa,kb=>la.push(Ea(kb)));Da&&Qa&&(Ra.visit(Aa,
kb=>{var cb=Da(kb);kb=Qa(kb);null!=cb&&null!=kb&&(cb=+cb)===cb&&(kb=+kb)===kb&&ma.push([cb,kb])}),la=la.concat({type:"Feature",geometry:{type:"MultiPoint",coordinates:ma}}));this.value={type:"FeatureCollection",features:la}}});ba.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string","default":"path"}]};h.inherits(ba,f.Transform,{transform(La,Ra){var la=Ra.fork(Ra.ALL),
ma=this.value,Aa=La.field||h.identity,Da=La.as||"path",Qa=la.SOURCE;!ma||La.modified()?(this.value=ma=q.getProjectionPath(La.projection),la.materialize().reflow()):Qa=Aa===h.identity||Ra.modified(Aa.fields)?la.ADD_MOD:la.ADD;La=K(ma,La.pointRadius);la.visit(Qa,Ea=>Ea[Da]=ma(Aa(Ea)));ma.pointRadius(La);return la.modifies(Da)}});r.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",
type:"string",array:!0,length:2,"default":["x","y"]}]};h.inherits(r,f.Transform,{transform(La,Ra){function la(cb){const Mb=ma([Aa(cb),Da(cb)]);Mb?(cb[Ea]=Mb[0],cb[kb]=Mb[1]):(cb[Ea]=void 0,cb[kb]=void 0)}var ma=La.projection,Aa=La.fields[0],Da=La.fields[1],Qa=La.as||["x","y"],Ea=Qa[0],kb=Qa[1];La.modified()?Ra=Ra.materialize().reflow(!0).visit(Ra.SOURCE,la):(La=Ra.modified(Aa.fields)||Ra.modified(Da.fields),Ra.visit(La?Ra.ADD_MOD:Ra.ADD,la));return Ra.modifies(Qa)}});Y.Definition={type:"GeoShape",
metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field","default":"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string","default":"shape"}]};h.inherits(Y,f.Transform,{transform(La,Ra){Ra=Ra.fork(Ra.ALL);var la=this.value,ma=La.as||"shape",Aa=Ra.ADD;if(!la||La.modified())this.value=la=Z(q.getProjectionPath(La.projection),La.field||h.field("datum"),La.pointRadius),Ra.materialize().reflow(),Aa=Ra.SOURCE;Ra.visit(Aa,Da=>Da[ma]=la);
return Ra.modifies(ma)}});E.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,"default":[90,360]},{name:"stepMinor",
type:"number",array:!0,length:2,"default":[10,10]},{name:"precision",type:"number","default":2.5}]};h.inherits(E,f.Transform,{transform(La,Ra){var la=this.value,ma=this.generator;if(!la.length||La.modified())for(const Aa in La)if(h.isFunction(ma[Aa]))ma[Aa](La[Aa]);La=ma();la.length?Ra.mod.push(f.replace(la[0],La)):Ra.add.push(f.ingest(La));la[0]=La;return Ra}});C.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",
type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],"default":"independent"},{name:"as",type:"string","default":"image"}]};h.inherits(C,f.Transform,{transform(La,Ra){if(!Ra.changed()&&!La.modified())return Ra.StopPropagation;var la=Ra.materialize(Ra.SOURCE).source,ma="shared"===La.resolve,Aa=La.field||h.identity,Da=fa(La.opacity,La),Qa=W(La.color,La),Ea=La.as||"image",kb={$x:0,$y:0,$value:0,$max:ma?l.max(la.map(cb=>l.max(Aa(cb).values))):0};la.forEach(cb=>{const Mb=
Aa(cb),Gb=h.extend({},cb,kb);ma||(Gb.$max=l.max(Mb.values||[]));cb[Ea]=Ba(Mb,Gb,Qa.dep?Qa:h.constant(Qa(Gb)),Da.dep?Da:h.constant(Da(Gb)))});return Ra.reflow(!0).modifies(Ea)}});h.inherits(Ga,f.Transform,{transform(La,Ra){let la=this.value;!la||La.modified("type")?(this.value=la=Fa(La.type),q.projectionProperties.forEach(ma=>{if(null!=La[ma]){var Aa=la,Da=La[ma];if(h.isFunction(Aa[ma]))Aa[ma](Da)}})):q.projectionProperties.forEach(ma=>{if(La.modified(ma)){var Aa=la,Da=La[ma];if(h.isFunction(Aa[ma]))Aa[ma](Da)}});
null!=La.pointRadius&&la.path.pointRadius(La.pointRadius);La.fit&&ua(la,La);return Ra.fork(Ra.NO_SOURCE|Ra.NO_FIELDS)}});k.contour=T;k.geojson=z;k.geopath=ba;k.geopoint=r;k.geoshape=Y;k.graticule=E;k.heatmap=C;k.isocontour=F;k.kde2d=N;k.projection=Ga;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[534]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa):"function"===typeof define&&define.amd?define(["exports"],f):(k=k||self,f(k.d3=k.d3||{}))})(this,function(k){function f(X,S,V,F){if(isNaN(S)||isNaN(V))return X;var t,w=X._root;F={data:F};var x=X._x0,I=X._y0,R=X._x1,B=X._y1,v,O,N,A;if(!w)return X._root=F,X;for(;w.length;)if((N=S>=(v=(x+R)/2))?x=v:R=v,(A=V>=(O=(I+B)/2))?I=O:B=O,t=w,!(w=w[N|=A<<1]))return t[N]=F,X;var J=+X._x.call(null,w.data);
var T=+X._y.call(null,w.data);if(S===J&&V===T)return F.next=w,t?t[N]=F:X._root=F,X;do t=t?t[N]=Array(4):X._root=Array(4),(N=S>=(v=(x+R)/2))?x=v:R=v,(A=V>=(O=(I+B)/2))?I=O:B=O;while((N|=A<<1)===(A=(T>=O)<<1|J>=v));return t[A]=w,t[N]=F,X}function h(X,S,V,F,t){this.node=X;this.x0=S;this.y0=V;this.x1=F;this.y1=t}function l(X){return X[0]}function u(X){return X[1]}function q(X,S,V){S=new D(null==S?l:S,null==V?u:V,NaN,NaN,NaN,NaN);return null==X?S:S.addAll(X)}function D(X,S,V,F,t,w){this._x=X;this._y=S;
this._x0=V;this._y0=F;this._x1=t;this._y1=w;this._root=void 0}function U(X){for(var S={data:X.data},V=S;X=X.next;)V=V.next={data:X.data};return S}var aa=q.prototype=D.prototype;aa.copy=function(){var X=new D(this._x,this._y,this._x0,this._y0,this._x1,this._y1),S=this._root,V,F;if(!S)return X;if(!S.length)return X._root=U(S),X;for(V=[{source:S,target:X._root=Array(4)}];S=V.pop();)for(var t=0;4>t;++t)if(F=S.source[t])F.length?V.push({source:F,target:S.target[t]=Array(4)}):S.target[t]=U(F);return X};
aa.add=function(X){const S=+this._x.call(null,X),V=+this._y.call(null,X);return f(this.cover(S,V),S,V,X)};aa.addAll=function(X){var S,V,F=X.length,t,w,x=Array(F),I=Array(F),R=Infinity,B=Infinity,v=-Infinity,O=-Infinity;for(V=0;V<F;++V)isNaN(t=+this._x.call(null,S=X[V]))||isNaN(w=+this._y.call(null,S))||(x[V]=t,I[V]=w,t<R&&(R=t),t>v&&(v=t),w<B&&(B=w),w>O&&(O=w));if(R>v||B>O)return this;this.cover(R,B).cover(v,O);for(V=0;V<F;++V)f(this,x[V],I[V],X[V]);return this};aa.cover=function(X,S){if(isNaN(X=
+X)||isNaN(S=+S))return this;var V=this._x0,F=this._y0,t=this._x1,w=this._y1;if(isNaN(V))t=(V=Math.floor(X))+1,w=(F=Math.floor(S))+1;else{for(var x=t-V||1,I=this._root,R,B;V>X||X>=t||F>S||S>=w;)switch(B=(S<F)<<1|X<V,R=Array(4),R[B]=I,I=R,x*=2,B){case 0:t=V+x;w=F+x;break;case 1:V=t-x;w=F+x;break;case 2:t=V+x;F=w-x;break;case 3:V=t-x,F=w-x}this._root&&this._root.length&&(this._root=I)}this._x0=V;this._y0=F;this._x1=t;this._y1=w;return this};aa.data=function(){var X=[];this.visit(function(S){if(!S.length){do X.push(S.data);
while(S=S.next)}});return X};aa.extent=function(X){return arguments.length?this.cover(+X[0][0],+X[0][1]).cover(+X[1][0],+X[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]};aa.find=function(X,S,V){var F=this._x0,t=this._y0,w,x,I,R,B=this._x1,v=this._y1,O=[],N=this._root,A;N&&O.push(new h(N,F,t,B,v));null==V?V=Infinity:(F=X-V,t=S-V,B=X+V,v=S+V,V*=V);for(;A=O.pop();)if(!(!(N=A.node)||(w=A.x0)>B||(x=A.y0)>v||(I=A.x1)<F||(R=A.y1)<t))if(N.length){A=(w+I)/2;var J=(x+R)/2;O.push(new h(N[3],
A,J,I,R),new h(N[2],w,J,A,R),new h(N[1],A,x,I,J),new h(N[0],w,x,A,J));if(N=(S>=J)<<1|X>=A)A=O[O.length-1],O[O.length-1]=O[O.length-1-N],O[O.length-1-N]=A}else if(A=X-+this._x.call(null,N.data),J=S-+this._y.call(null,N.data),A=A*A+J*J,A<V){var T=Math.sqrt(V=A);F=X-T;t=S-T;B=X+T;v=S+T;T=N.data}return T};aa.remove=function(X){if(isNaN(R=+this._x.call(null,X))||isNaN(B=+this._y.call(null,X)))return this;var S,V=this._root,F,t=this._x0,w=this._y0,x=this._x1,I=this._y1,R,B,v,O,N,A;if(!V)return this;if(V.length)for(;;){(N=
R>=(v=(t+x)/2))?t=v:x=v;(A=B>=(O=(w+I)/2))?w=O:I=O;if(!(S=V,V=V[N|=A<<1]))return this;if(!V.length)break;if(S[N+1&3]||S[N+2&3]||S[N+3&3]){var J=S;var T=N}}for(;V.data!==X;)if(!(F=V,V=V.next))return this;(X=V.next)&&delete V.next;if(F)return X?F.next=X:delete F.next,this;if(!S)return this._root=X,this;X?S[N]=X:delete S[N];(V=S[0]||S[1]||S[2]||S[3])&&V===(S[3]||S[2]||S[1]||S[0])&&!V.length&&(J?J[T]=V:this._root=V);return this};aa.removeAll=function(X){for(var S=0,V=X.length;S<V;++S)this.remove(X[S]);
return this};aa.root=function(){return this._root};aa.size=function(){var X=0;this.visit(function(S){if(!S.length){do++X;while(S=S.next)}});return X};aa.visit=function(X){var S=[],V,F=this._root,t,w,x,I;for(F&&S.push(new h(F,this._x0,this._y0,this._x1,this._y1));V=S.pop();)if(!X(F=V.node,w=V.x0,x=V.y0,I=V.x1,V=V.y1)&&F.length){var R=(w+I)/2,B=(x+V)/2;(t=F[3])&&S.push(new h(t,R,B,I,V));(t=F[2])&&S.push(new h(t,w,B,R,V));(t=F[1])&&S.push(new h(t,R,x,I,B));(t=F[0])&&S.push(new h(t,w,x,R,B))}return this};
aa.visitAfter=function(X){var S=[],V=[],F;for(this._root&&S.push(new h(this._root,this._x0,this._y0,this._x1,this._y1));F=S.pop();){var t=F.node;if(t.length){var w,x=F.x0,I=F.y0,R=F.x1,B=F.y1,v=(x+R)/2,O=(I+B)/2;(w=t[0])&&S.push(new h(w,x,I,v,O));(w=t[1])&&S.push(new h(w,v,I,R,O));(w=t[2])&&S.push(new h(w,x,O,v,B));(w=t[3])&&S.push(new h(w,v,O,R,B))}V.push(F)}for(;F=V.pop();)X(F.node,F.x0,F.y0,F.x1,F.y1);return this};aa.x=function(X){return arguments.length?(this._x=X,this):this._x};aa.y=function(X){return arguments.length?
(this._y=X,this):this._y};k.quadtree=q;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[535]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa):"function"===typeof define&&define.amd?define(["exports"],f):(k=k||self,f(k.d3=k.d3||{}))})(this,function(k){function f(){for(var D=0,U=arguments.length,aa={},X;D<U;++D){if(!(X=arguments[D]+"")||X in aa||/[\s.]/.test(X))throw Error("illegal type: "+X);aa[X]=[]}return new h(aa)}function h(D){this._=D}function l(D,U){return D.trim().split(/^|\s+/).map(function(aa){var X="",S=aa.indexOf(".");
0<=S&&(X=aa.slice(S+1),aa=aa.slice(0,S));if(aa&&!U.hasOwnProperty(aa))throw Error("unknown type: "+aa);return{type:aa,name:X}})}function u(D,U,aa){for(var X=0,S=D.length;X<S;++X)if(D[X].name===U){D[X]=q;D=D.slice(0,X).concat(D.slice(X+1));break}null!=aa&&D.push({name:U,value:aa});return D}var q={value:()=>{}};h.prototype=f.prototype={constructor:h,on:function(D,U){var aa=this._,X=l(D+"",aa),S,V=-1,F=X.length;if(2>arguments.length)for(;++V<F;){var t;if(t=S=(D=X[V]).type){a:{t=aa[S];for(var w=0,x=t.length;w<
x;++w)if((S=t[w]).name===D.name){S=S.value;break a}S=void 0}t=S}if(t)return S}else{if(null!=U&&"function"!==typeof U)throw Error("invalid callback: "+U);for(;++V<F;)if(S=(D=X[V]).type)aa[S]=u(aa[S],D.name,U);else if(null==U)for(S in aa)aa[S]=u(aa[S],D.name,null);return this}},copy:function(){var D={},U=this._,aa;for(aa in U)D[aa]=U[aa].slice();return new h(D)},call:function(D,U){if(0<(S=arguments.length-2))for(var aa=Array(S),X=0,S,V;X<S;++X)aa[X]=arguments[X+2];if(!this._.hasOwnProperty(D))throw Error("unknown type: "+
D);V=this._[D];X=0;for(S=V.length;X<S;++X)V[X].value.apply(U,aa)},apply:function(D,U,aa){if(!this._.hasOwnProperty(D))throw Error("unknown type: "+D);D=this._[D];for(var X=0,S=D.length;X<S;++X)D[X].value.apply(U,aa)}};k.dispatch=f;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[536]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa):"function"===typeof define&&define.amd?define(["exports"],f):(k=k||self,f(k.d3=k.d3||{}))})(this,function(k){function f(){return x||(B(h),x=R.now()+I)}function h(){x=0}function l(){this._call=this._time=this._next=null}function u(v,O,N){var A=new l;A.restart(v,O,N);return A}function q(){f();++X;for(var v=F,O;v;)0<=(O=x-v._time)&&v._call.call(null,O),v=v._next;--X}function D(){x=(w=R.now())+
I;X=S=0;try{q()}finally{X=0;for(var v,O=F,N,A=Infinity;O;)O._call?(A>O._time&&(A=O._time),v=O,O=O._next):(N=O._next,O._next=null,O=v?v._next=N:F=N);t=v;aa(A);x=0}}function U(){var v=R.now(),O=v-w;1E3<O&&(I-=O,w=v)}function aa(v){X||(S&&(S=clearTimeout(S)),24<v-x?(Infinity>v&&(S=setTimeout(D,v-R.now()-I)),V&&(V=clearInterval(V))):(V||(w=R.now(),V=setInterval(U,1E3)),X=1,B(D)))}var X=0,S=0,V=0,F,t,w=0,x=0,I=0,R="object"===typeof performance&&performance.now?performance:Date,B="object"===typeof window&&
window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(v){setTimeout(v,17)};l.prototype=u.prototype={constructor:l,restart:function(v,O,N){if("function"!==typeof v)throw new TypeError("callback is not a function");N=(null==N?f():+N)+(null==O?0:+O);this._next||t===this||(t?t._next=this:F=this,t=this);this._call=v;this._time=N;aa()},stop:function(){this._call&&(this._call=null,this._time=Infinity,aa())}};k.interval=function(v,O,N){var A=new l,J=O;if(null==O)return A.restart(v,
O,N),A;A._restart=A.restart;A.restart=function(T,z,ba){z=+z;ba=null==ba?f():+ba;A._restart(function Y(r){r+=J;A._restart(Y,J+=z,ba);T(r)},z,ba)};A.restart(v,O,N);return A};k.now=f;k.timeout=function(v,O,N){var A=new l;O=null==O?0:+O;A.restart(J=>{A.stop();v(J+O)},O,N);return A};k.timer=u;k.timerFlush=q;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[537]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(534),da(535),da(536)):"function"===typeof define&&define.amd?define(["exports","d3-quadtree","d3-dispatch","d3-timer"],f):(k=k||self,f(k.d3=k.d3||{},k.d3,k.d3,k.d3))})(this,function(k,f,h,l){function u(t){return function(){return t}}function q(t){return t.x+t.vx}function D(t){return t.y+t.vy}function U(t){return t.index}function aa(t,w){t=t.get(w);if(!t)throw Error("node not found: "+w);
return t}function X(){let t=1;return()=>(t=(1664525*t+1013904223)%4294967296)/4294967296}function S(t){return t.x}function V(t){return t.y}var F=Math.PI*(3-Math.sqrt(5));k.forceCenter=function(t,w){function x(){var B,v=I.length,O=0,N=0;for(B=0;B<v;++B){var A=I[B];O+=A.x;N+=A.y}O=(O/v-t)*R;N=(N/v-w)*R;for(B=0;B<v;++B)A=I[B],A.x-=O,A.y-=N}var I,R=1;null==t&&(t=0);null==w&&(w=0);x.initialize=function(B){I=B};x.x=function(B){return arguments.length?(t=+B,x):t};x.y=function(B){return arguments.length?
(w=+B,x):w};x.strength=function(B){return arguments.length?(R=+B,x):R};return x};k.forceCollide=function(t){function w(){function A(C,W,fa,ja,Ba){var Ga=C.data;C=C.r;var ua=Y+C;if(Ga)Ga.index>ba.index&&(W=K-Ga.x-Ga.vx,fa=r-Ga.y-Ga.vy,ja=W*W+fa*fa,ja<ua*ua&&(0===W&&(W=1E-6*(v()-.5),ja+=W*W),0===fa&&(fa=1E-6*(v()-.5),ja+=fa*fa),ja=(ua-(ja=Math.sqrt(ja)))/ja*O,ba.vx+=(W*=ja)*(ua=(C*=C)/(Z+C)),ba.vy+=(fa*=ja)*ua,Ga.vx-=W*(ua=1-ua),Ga.vy-=fa*ua));else return W>K+ua||ja<K-ua||fa>r+ua||Ba<r-ua}for(var J,
T=R.length,z,ba,K,r,Y,Z,E=0;E<N;++E)for(z=f.quadtree(R,q,D).visitAfter(x),J=0;J<T;++J)ba=R[J],Y=B[ba.index],Z=Y*Y,K=ba.x+ba.vx,r=ba.y+ba.vy,z.visit(A)}function x(A){if(A.data)return A.r=B[A.data.index];for(var J=A.r=0;4>J;++J)A[J]&&A[J].r>A.r&&(A.r=A[J].r)}function I(){if(R){var A,J=R.length;B=Array(J);for(A=0;A<J;++A){var T=R[A];B[T.index]=+t(T,A,R)}}}var R,B,v,O=1,N=1;"function"!==typeof t&&(t=u(null==t?1:+t));w.initialize=function(A,J){R=A;v=J;I()};w.iterations=function(A){return arguments.length?
(N=+A,w):N};w.strength=function(A){return arguments.length?(O=+A,w):O};w.radius=function(A){return arguments.length?(t="function"===typeof A?A:u(+A),I(),w):t};return w};k.forceLink=function(t){function w(r){for(var Y=0,Z=t.length;Y<K;++Y)for(var E=0,C,W,fa,ja,Ba;E<Z;++E)C=t[E],W=C.source,C=C.target,fa=C.x+C.vx-W.x-W.vx||1E-6*(ba()-.5),ja=C.y+C.vy-W.y-W.vy||1E-6*(ba()-.5),Ba=Math.sqrt(fa*fa+ja*ja),Ba=(Ba-A[E])/Ba*r*O[E],fa*=Ba,ja*=Ba,C.vx-=fa*(Ba=z[E]),C.vy-=ja*Ba,W.vx+=fa*(Ba=1-Ba),W.vy+=ja*Ba}function x(){if(J){var r=
J.length,Y=t.length,Z=new Map(J.map((C,W)=>[B(C,W,J),C]));var E=0;for(T=Array(r);E<Y;++E)r=t[E],r.index=E,"object"!==typeof r.source&&(r.source=aa(Z,r.source)),"object"!==typeof r.target&&(r.target=aa(Z,r.target)),T[r.source.index]=(T[r.source.index]||0)+1,T[r.target.index]=(T[r.target.index]||0)+1;E=0;for(z=Array(Y);E<Y;++E)r=t[E],z[E]=T[r.source.index]/(T[r.source.index]+T[r.target.index]);O=Array(Y);I();A=Array(Y);R()}}function I(){if(J)for(var r=0,Y=t.length;r<Y;++r)O[r]=+v(t[r],r,t)}function R(){if(J)for(var r=
0,Y=t.length;r<Y;++r)A[r]=+N(t[r],r,t)}var B=U,v=function(r){return 1/Math.min(T[r.source.index],T[r.target.index])},O,N=u(30),A,J,T,z,ba,K=1;null==t&&(t=[]);w.initialize=function(r,Y){J=r;ba=Y;x()};w.links=function(r){return arguments.length?(t=r,x(),w):t};w.id=function(r){return arguments.length?(B=r,w):B};w.iterations=function(r){return arguments.length?(K=+r,w):K};w.strength=function(r){return arguments.length?(v="function"===typeof r?r:u(+r),I(),w):v};w.distance=function(r){return arguments.length?
(N="function"===typeof r?r:u(+r),R(),w):N};return w};k.forceManyBody=function(){function t(ba){var K=R.length,r=f.quadtree(R,S,V).visitAfter(x);O=ba;for(ba=0;ba<K;++ba)B=R[ba],r.visit(I)}function w(){if(R){var ba,K=R.length;A=Array(K);for(ba=0;ba<K;++ba){var r=R[ba];A[r.index]=+N(r,ba,R)}}}function x(ba){var K=0,r,Y,Z=0,E,C,W;if(ba.length){for(E=C=W=0;4>W;++W)(r=ba[W])&&(Y=Math.abs(r.value))&&(K+=r.value,Z+=Y,E+=Y*r.x,C+=Y*r.y);ba.x=E/Z;ba.y=C/Z}else{r=ba;r.x=r.data.x;r.y=r.data.y;do K+=A[r.data.index];
while(r=r.next)}ba.value=K}function I(ba,K,r,Y){if(!ba.value)return!0;r=ba.x-B.x;var Z=ba.y-B.y;K=Y-K;Y=r*r+Z*Z;if(K*K/z<Y)return Y<T&&(0===r&&(r=1E-6*(v()-.5),Y+=r*r),0===Z&&(Z=1E-6*(v()-.5),Y+=Z*Z),Y<J&&(Y=Math.sqrt(J*Y)),B.vx+=r*ba.value*O/Y,B.vy+=Z*ba.value*O/Y),!0;if(!(ba.length||Y>=T)){if(ba.data!==B||ba.next)0===r&&(r=1E-6*(v()-.5),Y+=r*r),0===Z&&(Z=1E-6*(v()-.5),Y+=Z*Z),Y<J&&(Y=Math.sqrt(J*Y));do ba.data!==B&&(K=A[ba.data.index]*O/Y,B.vx+=r*K,B.vy+=Z*K);while(ba=ba.next)}}var R,B,v,O,N=u(-30),
A,J=1,T=Infinity,z=.81;t.initialize=function(ba,K){R=ba;v=K;w()};t.strength=function(ba){return arguments.length?(N="function"===typeof ba?ba:u(+ba),w(),t):N};t.distanceMin=function(ba){return arguments.length?(J=ba*ba,t):Math.sqrt(J)};t.distanceMax=function(ba){return arguments.length?(T=ba*ba,t):Math.sqrt(T)};t.theta=function(ba){return arguments.length?(z=ba*ba,t):Math.sqrt(z)};return t};k.forceRadial=function(t,w,x){function I(A){for(var J=0,T=B.length;J<T;++J){var z=B[J],ba=z.x-w||1E-6,K=z.y-
x||1E-6,r=Math.sqrt(ba*ba+K*K);r=(N[J]-r)*O[J]*A/r;z.vx+=ba*r;z.vy+=K*r}}function R(){if(B){var A,J=B.length;O=Array(J);N=Array(J);for(A=0;A<J;++A)N[A]=+t(B[A],A,B),O[A]=isNaN(N[A])?0:+v(B[A],A,B)}}var B,v=u(.1),O,N;"function"!==typeof t&&(t=u(+t));null==w&&(w=0);null==x&&(x=0);I.initialize=function(A){B=A;R()};I.strength=function(A){return arguments.length?(v="function"===typeof A?A:u(+A),R(),I):v};I.radius=function(A){return arguments.length?(t="function"===typeof A?A:u(+A),R(),I):t};I.x=function(A){return arguments.length?
(w=+A,I):w};I.y=function(A){return arguments.length?(x=+A,I):x};return I};k.forceSimulation=function(t){function w(){x();ba.call("tick",B);v<O&&(z.stop(),ba.call("end",B))}function x(r){var Y,Z=t.length;void 0===r&&(r=1);for(var E=0;E<r;++E)for(v+=(A-v)*N,T.forEach(function(W){W(v)}),Y=0;Y<Z;++Y){var C=t[Y];null==C.fx?C.x+=C.vx*=J:(C.x=C.fx,C.vx=0);null==C.fy?C.y+=C.vy*=J:(C.y=C.fy,C.vy=0)}return B}function I(){for(var r=0,Y=t.length,Z;r<Y;++r){Z=t[r];Z.index=r;null!=Z.fx&&(Z.x=Z.fx);null!=Z.fy&&
(Z.y=Z.fy);if(isNaN(Z.x)||isNaN(Z.y)){var E=10*Math.sqrt(.5+r),C=r*F;Z.x=E*Math.cos(C);Z.y=E*Math.sin(C)}if(isNaN(Z.vx)||isNaN(Z.vy))Z.vx=Z.vy=0}}function R(r){r.initialize&&r.initialize(t,K);return r}var B,v=1,O=.001,N=1-Math.pow(O,1/300),A=0,J=.6,T=new Map,z=l.timer(w),ba=h.dispatch("tick","end"),K=X();null==t&&(t=[]);I();return B={tick:x,restart:function(){return z.restart(w),B},stop:function(){return z.stop(),B},nodes:function(r){return arguments.length?(t=r,I(),T.forEach(R),B):t},alpha:function(r){return arguments.length?
(v=+r,B):v},alphaMin:function(r){return arguments.length?(O=+r,B):O},alphaDecay:function(r){return arguments.length?(N=+r,B):+N},alphaTarget:function(r){return arguments.length?(A=+r,B):A},velocityDecay:function(r){return arguments.length?(J=1-r,B):1-J},randomSource:function(r){return arguments.length?(K=r,T.forEach(R),B):K},force:function(r,Y){return 1<arguments.length?(null==Y?T.delete(r):T.set(r,R(Y)),B):T.get(r)},find:function(r,Y,Z){var E,C=t.length;Z=null==Z?Infinity:Z*Z;for(E=0;E<C;++E){var W=
t[E];var fa=r-W.x;var ja=Y-W.y;fa=fa*fa+ja*ja;if(fa<Z){var Ba=W;Z=fa}}return Ba},on:function(r,Y){return 1<arguments.length?(ba.on(r,Y),B):ba.on(r)}}};k.forceX=function(t){function w(O){for(var N=0,A=R.length,J;N<A;++N)J=R[N],J.vx+=(v[N]-J.x)*B[N]*O}function x(){if(R){var O,N=R.length;B=Array(N);v=Array(N);for(O=0;O<N;++O)B[O]=isNaN(v[O]=+t(R[O],O,R))?0:+I(R[O],O,R)}}var I=u(.1),R,B,v;"function"!==typeof t&&(t=u(null==t?0:+t));w.initialize=function(O){R=O;x()};w.strength=function(O){return arguments.length?
(I="function"===typeof O?O:u(+O),x(),w):I};w.x=function(O){return arguments.length?(t="function"===typeof O?O:u(+O),x(),w):t};return w};k.forceY=function(t){function w(O){for(var N=0,A=R.length,J;N<A;++N)J=R[N],J.vy+=(v[N]-J.y)*B[N]*O}function x(){if(R){var O,N=R.length;B=Array(N);v=Array(N);for(O=0;O<N;++O)B[O]=isNaN(v[O]=+t(R[O],O,R))?0:+I(R[O],O,R)}}var I=u(.1),R,B,v;"function"!==typeof t&&(t=u(null==t?0:+t));w.initialize=function(O){R=O;x()};w.strength=function(O){return arguments.length?(I="function"===
typeof O?O:u(+O),x(),w):I};w.y=function(O){return arguments.length?(t="function"===typeof O?O:u(+O),x(),w):t};return w};Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[538]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(517),da(503),da(537)):"function"===typeof define&&define.amd?define(["exports","vega-dataflow","vega-util","d3-force"],f):(k="undefined"!==typeof globalThis?globalThis:k||self,f((k.vega=k.vega||{},k.vega.transforms={}),k.vega,k.vega,k.d3))})(this,function(k,f,h,l){function u(t){f.Transform.call(this,null,t)}function q(t,w){return()=>t.touch(w).run()}function D(t,w){t=l.forceSimulation(t);
const x=t.stop,I=t.restart;let R=!1;t.stopped=()=>R;t.restart=()=>(R=!1,I());t.stop=()=>(R=!0,x());return U(t,w,!0).on("end",()=>R=!0)}function U(t,w,x,I){var R=h.array(w.forces),B;var v=0;for(B=S.length;v<B;++v){var O=S[v];if("forces"!==O&&w.modified(O))t[O](w[O])}v=0;for(B=R.length;v<B;++v){var N="forces"+v;if(x||w.modified("forces",v)){O=void 0;var A=R[v];h.hasOwnProperty(X,A.force)||h.error("Unrecognized force: "+A.force);var J=X[A.force]();for(O in A)h.isFunction(J[O])&&aa(J[O],A[O],A);O=J}else{if(O=
I)a:{J=O=void 0;A=R[v];var T=I;for(J in A)if(h.isFunction(O=A[J])&&T.modified(h.accessorFields(O))){O=1;break a}O=0}O=O?t.force(N):null}O&&t.force(N,O)}for(B=t.numForces||0;v<B;++v)t.force("forces"+v,null);t.numForces=R.length;return t}function aa(t,w,x){t(h.isFunction(w)?I=>w(I,x):w)}const X={center:l.forceCenter,collide:l.forceCollide,nbody:l.forceManyBody,link:l.forceLink,x:l.forceX,y:l.forceY},S=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],V=["static","iterations"],F=["x","y","vx",
"vy"];u.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean","default":!1},{name:"restart",type:"boolean","default":!1},{name:"iterations",type:"number","default":300},{name:"alpha",type:"number","default":1},{name:"alphaMin",type:"number","default":.001},{name:"alphaTarget",type:"number","default":0},{name:"velocityDecay",type:"number","default":.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number","default":0},{name:"y",
type:"number","default":0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number","default":.7},{name:"iterations",type:"number","default":1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number","default":-30},{name:"theta",type:"number","default":.9},{name:"distanceMin",type:"number","default":1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",
"default":30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number","default":1}]},{key:{force:"x"},params:[{name:"strength",type:"number","default":.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number","default":.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,"default":F}]};h.inherits(u,f.Transform,{transform(t,w){var x=this.value,I=w.changed(w.ADD_REM),R=t.modified(S),B=t.iterations||300;x?(I&&(w.modifies("index"),
x.nodes(w.source)),(R||w.changed(w.MOD))&&U(x,t,0,w)):(this.value=x=D(w.source,t),x.on("tick",q(w.dataflow,this)),t.static||(I=!0,x.tick()),w.modifies("index"));if(R||I||t.modified(V)||w.changed()&&t.restart)if(x.alpha(Math.max(x.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(x.alphaMin(),1/B)),t.static)for(x.stop();0<=--B;)x.tick();else if(x.stopped()&&x.restart(),!I)return w.StopPropagation;return this.finish(t,w)},finish(t,w){const x=w.dataflow;for(let O=this._argops,N=0,A=O.length,J;N<A;++N)if(J=
O[N],"forces"===J.name&&"link"===J.op._argval.force)for(var I=J.op._argops,R=0,B=I.length,v;R<B;++R)if("links"===I[R].name&&(v=I[R].op.source)){x.pulse(v,x.changeset().reflow());break}return w.reflow(t.modified()).modifies(F)}});k.force=u;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[539]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa):"function"===typeof define&&define.amd?define(["exports"],f):(k=k||self,f(k.d3=k.d3||{}))})(this,function(k){function f(la,ma){return la.parent===ma.parent?1:2}function h(la,ma){return la+ma.x}function l(la,ma){return Math.max(la,ma.y)}function u(la){for(var ma;ma=la.children;)la=ma[0];return la}function q(la){for(var ma;ma=la.children;)la=ma[ma.length-1];return la}function D(la){var ma=0,
Aa=la.children,Da=Aa&&Aa.length;if(Da)for(;0<=--Da;)ma+=Aa[Da].value;else ma=1;la.value=ma}function U(la,ma){la instanceof Map?(la=[void 0,la],void 0===ma&&(ma=X)):void 0===ma&&(ma=aa);la=new F(la);for(var Aa,Da=[la],Qa,Ea,kb,cb;Aa=Da.pop();)if((Ea=ma(Aa.data))&&(cb=(Ea=Array.from(Ea)).length))for(Aa.children=Ea,kb=cb-1;0<=kb;--kb)Da.push(Qa=Ea[kb]=new F(Ea[kb])),Qa.parent=Aa,Qa.depth=Aa.depth+1;return la.eachBefore(V)}function aa(la){return la.children}function X(la){return Array.isArray(la)?la[1]:
null}function S(la){void 0!==la.data.value&&(la.value=la.data.value);la.data=la.data.data}function V(la){var ma=0;do la.height=ma;while((la=la.parent)&&la.height<++ma)}function F(la){this.data=la;this.depth=this.height=0;this.parent=null}function t(la){var ma=0;la=Array.from(la);for(var Aa=la.length,Da,Qa;Aa;)Qa=Math.random()*Aa--|0,Da=la[Aa],la[Aa]=la[Qa],la[Qa]=Da;Aa=la.length;Da=[];for(var Ea;ma<Aa;)if(Qa=la[ma],Ea&&x(Ea,Qa))++ma;else{a:if(ma=Da,I(Qa,ma))ma=[Qa];else{for(Da=0;Da<ma.length;++Da)if(w(Qa,
ma[Da])&&I(R(ma[Da],Qa),ma)){ma=[ma[Da],Qa];break a}for(Da=0;Da<ma.length-1;++Da)for(Ea=Da+1;Ea<ma.length;++Ea)if(w(R(ma[Da],ma[Ea]),Qa)&&w(R(ma[Da],Qa),ma[Ea])&&w(R(ma[Ea],Qa),ma[Da])&&I(B(ma[Da],ma[Ea],Qa),ma)){ma=[ma[Da],ma[Ea],Qa];break a}throw Error();}a:{ma=Da=ma;switch(ma.length){case 1:ma=ma[0];ma={x:ma.x,y:ma.y,r:ma.r};break a;case 2:ma=R(ma[0],ma[1]);break a;case 3:ma=B(ma[0],ma[1],ma[2]);break a}ma=void 0}Ea=ma;ma=0}return Ea}function w(la,ma){var Aa=la.r-ma.r,Da=ma.x-la.x;la=ma.y-la.y;
return 0>Aa||Aa*Aa<Da*Da+la*la}function x(la,ma){var Aa=la.r-ma.r+1E-9*Math.max(la.r,ma.r,1),Da=ma.x-la.x;la=ma.y-la.y;return 0<Aa&&Aa*Aa>Da*Da+la*la}function I(la,ma){for(var Aa=0;Aa<ma.length;++Aa)if(!x(la,ma[Aa]))return!1;return!0}function R(la,ma){var Aa=la.x,Da=la.y;la=la.r;var Qa=ma.x,Ea=ma.y;ma=ma.r;var kb=Qa-Aa,cb=Ea-Da,Mb=ma-la,Gb=Math.sqrt(kb*kb+cb*cb);return{x:(Aa+Qa+kb/Gb*Mb)/2,y:(Da+Ea+cb/Gb*Mb)/2,r:(Gb+la+ma)/2}}function B(la,ma,Aa){var Da=la.x,Qa=la.y;la=la.r;var Ea=ma.x,kb=ma.y,cb=
ma.r,Mb=Aa.x,Gb=Aa.y,Wb=Aa.r;Aa=Da-Ea;ma=Da-Mb;var sa=Qa-kb,ra=Qa-Gb,xa=cb-la,Ia=Wb-la,bb=Da*Da+Qa*Qa-la*la;kb=bb-Ea*Ea-kb*kb+cb*cb;Gb=bb-Mb*Mb-Gb*Gb+Wb*Wb;Mb=ma*sa-Aa*ra;Ea=(sa*Gb-ra*kb)/(2*Mb)-Da;sa=(ra*xa-sa*Ia)/Mb;ra=(ma*kb-Aa*Gb)/(2*Mb)-Qa;Aa=(Aa*Ia-ma*xa)/Mb;ma=sa*sa+Aa*Aa-1;xa=2*(la+Ea*sa+ra*Aa);la=Ea*Ea+ra*ra-la*la;la=-(ma?(xa+Math.sqrt(xa*xa-4*ma*la))/(2*ma):la/xa);return{x:Da+Ea+sa*la,y:Qa+ra+Aa*la,r:la}}function v(la,ma,Aa){var Da=la.x-ma.x,Qa=la.y-ma.y,Ea=Da*Da+Qa*Qa;if(Ea){var kb=ma.r+
Aa.r;kb*=kb;var cb=la.r+Aa.r;cb*=cb;if(kb>cb){var Mb=(Ea+cb-kb)/(2*Ea);kb=Math.sqrt(Math.max(0,cb/Ea-Mb*Mb));Aa.x=la.x-Mb*Da-kb*Qa;Aa.y=la.y-Mb*Qa+kb*Da}else Mb=(Ea+kb-cb)/(2*Ea),kb=Math.sqrt(Math.max(0,kb/Ea-Mb*Mb)),Aa.x=ma.x+Mb*Da-kb*Qa,Aa.y=ma.y+Mb*Qa+kb*Da}else Aa.x=ma.x+Aa.r,Aa.y=ma.y}function O(la,ma){var Aa=la.r+ma.r-1E-6,Da=ma.x-la.x;la=ma.y-la.y;return 0<Aa&&Aa*Aa>Da*Da+la*la}function N(la){var ma=la._,Aa=la.next._,Da=ma.r+Aa.r;la=(ma.x*Aa.r+Aa.x*ma.r)/Da;ma=(ma.y*Aa.r+Aa.y*ma.r)/Da;return la*
la+ma*ma}function A(la){this._=la;this.previous=this.next=null}function J(la){if(!(Aa=(la="object"===typeof la&&"length"in la?la:Array.from(la)).length))return 0;var ma,Aa;var Da=la[0];Da.x=0;Da.y=0;if(!(1<Aa))return Da.r;var Qa=la[1];Da.x=-Qa.r;Qa.x=Da.r;Qa.y=0;if(!(2<Aa))return Da.r+Qa.r;v(Qa,Da,ma=la[2]);Da=new A(Da);Qa=new A(Qa);ma=new A(ma);Da.next=ma.previous=Qa;Qa.next=Da.previous=ma;ma.next=Qa.previous=Da;var Ea=3;a:for(;Ea<Aa;++Ea){v(Da._,Qa._,ma=la[Ea]);ma=new A(ma);var kb=Qa.next;var cb=
Da.previous;var Mb=Qa._.r;var Gb=Da._.r;do if(Mb<=Gb){if(O(kb._,ma._)){Qa=kb;Da.next=Qa;Qa.previous=Da;--Ea;continue a}Mb+=kb._.r;kb=kb.next}else{if(O(cb._,ma._)){Da=cb;Da.next=Qa;Qa.previous=Da;--Ea;continue a}Gb+=cb._.r;cb=cb.previous}while(kb!==cb.next);ma.previous=Da;ma.next=Qa;Da.next=Qa.previous=Qa=ma;for(kb=N(Da);(ma=ma.next)!==Qa;)(cb=N(ma))<kb&&(Da=ma,kb=cb);Qa=Da.next}Da=[Qa._];for(ma=Qa;(ma=ma.next)!==Qa;)Da.push(ma._);ma=t(Da);for(Ea=0;Ea<Aa;++Ea)Da=la[Ea],Da.x-=ma.x,Da.y-=ma.y;return ma.r}
function T(la){if("function"!==typeof la)throw Error();return la}function z(){return 0}function ba(la){return function(){return la}}function K(la){return Math.sqrt(la.value)}function r(la){return function(ma){ma.children||(ma.r=Math.max(0,+la(ma)||0))}}function Y(la,ma){return function(Aa){if(Da=Aa.children){var Da,Qa,Ea=Da.length,kb=la(Aa)*ma||0;if(kb)for(Qa=0;Qa<Ea;++Qa)Da[Qa].r+=kb;var cb=J(Da);if(kb)for(Qa=0;Qa<Ea;++Qa)Da[Qa].r-=kb;Aa.r=cb+kb}}}function Z(la){return function(ma){var Aa=ma.parent;
ma.r*=la;Aa&&(ma.x=Aa.x+la*ma.x,ma.y=Aa.y+la*ma.y)}}function E(la){la.x0=Math.round(la.x0);la.y0=Math.round(la.y0);la.x1=Math.round(la.x1);la.y1=Math.round(la.y1)}function C(la,ma,Aa,Da,Qa){var Ea=la.children,kb=-1,cb=Ea.length;for(Da=la.value&&(Da-ma)/la.value;++kb<cb;)la=Ea[kb],la.y0=Aa,la.y1=Qa,la.x0=ma,la.x1=ma+=la.value*Da}function W(la){return la.id}function fa(la){return la.parentId}function ja(la,ma){return la.parent===ma.parent?1:2}function Ba(la){var ma=la.children;return ma?ma[0]:la.t}
function Ga(la){var ma=la.children;return ma?ma[ma.length-1]:la.t}function ua(la,ma){this._=la;this.A=this.children=this.parent=null;this.a=this;this.s=this.c=this.m=this.z=0;this.t=null;this.i=ma}function Fa(la){la=new ua(la,0);for(var ma,Aa=[la],Da,Qa,Ea;ma=Aa.pop();)if(Qa=ma._.children)for(ma.children=Array(Da=Qa.length),Ea=Da-1;0<=Ea;--Ea)Aa.push(Da=ma.children[Ea]=new ua(Qa[Ea],Ea)),Da.parent=ma;(la.parent=new ua(null,0)).children=[la];return la}function Xa(la,ma,Aa,Da,Qa){var Ea=la.children,
kb=-1,cb=Ea.length;for(Qa=la.value&&(Qa-Aa)/la.value;++kb<cb;)la=Ea[kb],la.x0=ma,la.x1=Da,la.y0=Aa,la.y1=Aa+=la.value*Qa}function Sa(la,ma,Aa,Da,Qa,Ea){for(var kb=[],cb=ma.children,Mb,Gb,Wb=Mb=0,sa=cb.length,ra,xa=ma.value,Ia,bb,Hb,zb,mb,Jb;Mb<sa;){ma=Qa-Aa;ra=Ea-Da;do Ia=cb[Wb++].value;while(!Ia&&Wb<sa);bb=Hb=Ia;Jb=Math.max(ra/ma,ma/ra)/(xa*la);zb=Ia*Ia*Jb;for(mb=Math.max(Hb/zb,zb/bb);Wb<sa;++Wb){Ia+=Gb=cb[Wb].value;Gb<bb&&(bb=Gb);Gb>Hb&&(Hb=Gb);zb=Ia*Ia*Jb;zb=Math.max(Hb/zb,zb/bb);if(zb>mb){Ia-=
Gb;break}mb=zb}kb.push(Mb={value:Ia,dice:ma<ra,children:cb.slice(Mb,Wb)});Mb.dice?C(Mb,Aa,Da,Qa,xa?Da+=ra*Ia/xa:Ea):Xa(Mb,Aa,Da,xa?Aa+=ma*Ia/xa:Qa,Ea);xa-=Ia;Mb=Wb}return kb}F.prototype=U.prototype={constructor:F,count:function(){return this.eachAfter(D)},each:function(la,ma){let Aa=-1;for(const Da of this)la.call(ma,Da,++Aa,this);return this},eachAfter:function(la,ma){for(var Aa,Da=[this],Qa=[],Ea,kb,cb=-1;Aa=Da.pop();)if(Qa.push(Aa),Aa=Aa.children)for(Ea=0,kb=Aa.length;Ea<kb;++Ea)Da.push(Aa[Ea]);
for(;Aa=Qa.pop();)la.call(ma,Aa,++cb,this);return this},eachBefore:function(la,ma){for(var Aa,Da=[this],Qa,Ea=-1;Aa=Da.pop();)if(la.call(ma,Aa,++Ea,this),Aa=Aa.children)for(Qa=Aa.length-1;0<=Qa;--Qa)Da.push(Aa[Qa]);return this},find:function(la,ma){let Aa=-1;for(const Da of this)if(la.call(ma,Da,++Aa,this))return Da},sum:function(la){return this.eachAfter(function(ma){for(var Aa=+la(ma.data)||0,Da=ma.children,Qa=Da&&Da.length;0<=--Qa;)Aa+=Da[Qa].value;ma.value=Aa})},sort:function(la){return this.eachBefore(function(ma){ma.children&&
ma.children.sort(la)})},path:function(la){var ma=this;var Aa=ma;var Da=la;if(Aa!==Da){var Qa=Aa.ancestors(),Ea=Da.ancestors(),kb=null;Aa=Qa.pop();for(Da=Ea.pop();Aa===Da;)kb=Aa,Aa=Qa.pop(),Da=Ea.pop();Aa=kb}for(Da=[ma];ma!==Aa;)ma=ma.parent,Da.push(ma);for(ma=Da.length;la!==Aa;)Da.splice(ma,0,la),la=la.parent;return Da},ancestors:function(){for(var la=this,ma=[la];la=la.parent;)ma.push(la);return ma},descendants:function(){return Array.from(this)},leaves:function(){var la=[];this.eachBefore(function(ma){ma.children||
la.push(ma)});return la},links:function(){var la=this,ma=[];la.each(function(Aa){Aa!==la&&ma.push({source:Aa.parent,target:Aa})});return ma},copy:function(){return U(this).eachBefore(S)},[Symbol.iterator]:function*(){var la,ma=[this],Aa;do{var Da=ma.reverse();for(ma=[];la=Da.pop();)if(yield la,la=la.children){var Qa=0;for(Aa=la.length;Qa<Aa;++Qa)ma.push(la[Qa])}}while(ma.length)}};var eb={depth:-1},Va={};ua.prototype=Object.create(F.prototype);var La=(1+Math.sqrt(5))/2,Ra=function Aa(ma){function Da(Qa,
Ea,kb,cb,Mb){Sa(ma,Qa,Ea,kb,cb,Mb)}Da.ratio=function(Qa){return Aa(1<(Qa=+Qa)?Qa:1)};return Da}(La);La=function Da(Aa){function Qa(Ea,kb,cb,Mb,Gb){if((Wb=Ea._squarify)&&Wb.ratio===Aa)for(var Wb,sa,ra,xa=-1,Ia,bb=Wb.length,Hb=Ea.value;++xa<bb;){Ea=Wb[xa];sa=Ea.children;ra=Ea.value=0;for(Ia=sa.length;ra<Ia;++ra)Ea.value+=sa[ra].value;Ea.dice?C(Ea,kb,cb,Mb,Hb?cb+=(Gb-cb)*Ea.value/Hb:Gb):Xa(Ea,kb,cb,Hb?kb+=(Mb-kb)*Ea.value/Hb:Mb,Gb);Hb-=Ea.value}else Ea._squarify=Wb=Sa(Aa,Ea,kb,cb,Mb,Gb),Wb.ratio=Aa}
Qa.ratio=function(Ea){return Da(1<(Ea=+Ea)?Ea:1)};return Qa}(La);k.cluster=function(){function Aa(cb){var Mb,Gb=0;cb.eachAfter(function(Ia){var bb=Ia.children;if(bb){var Hb=bb.reduce(h,0)/bb.length;Ia.x=Hb;Ia.y=1+bb.reduce(l,0)}else Ia.x=Mb?Gb+=Da(Ia,Mb):0,Ia.y=0,Mb=Ia});var Wb=u(cb),sa=q(cb),ra=Wb.x-Da(Wb,sa)/2,xa=sa.x+Da(sa,Wb)/2;return cb.eachAfter(kb?function(Ia){Ia.x=(Ia.x-cb.x)*Qa;Ia.y=(cb.y-Ia.y)*Ea}:function(Ia){Ia.x=(Ia.x-ra)/(xa-ra)*Qa;Ia.y=(1-(cb.y?Ia.y/cb.y:1))*Ea})}var Da=f,Qa=1,Ea=1,
kb=!1;Aa.separation=function(cb){return arguments.length?(Da=cb,Aa):Da};Aa.size=function(cb){return arguments.length?(kb=!1,Qa=+cb[0],Ea=+cb[1],Aa):kb?null:[Qa,Ea]};Aa.nodeSize=function(cb){return arguments.length?(kb=!0,Qa=+cb[0],Ea=+cb[1],Aa):kb?[Qa,Ea]:null};return Aa};k.hierarchy=U;k.pack=function(){function Aa(cb){cb.x=Qa/2;cb.y=Ea/2;Da?cb.eachBefore(r(Da)).eachAfter(Y(kb,.5)).eachBefore(Z(1)):cb.eachBefore(r(K)).eachAfter(Y(z,1)).eachAfter(Y(kb,cb.r/Math.min(Qa,Ea))).eachBefore(Z(Math.min(Qa,
Ea)/(2*cb.r)));return cb}var Da=null,Qa=1,Ea=1,kb=z;Aa.radius=function(cb){return arguments.length?(Da=null==cb?null:T(cb),Aa):Da};Aa.size=function(cb){return arguments.length?(Qa=+cb[0],Ea=+cb[1],Aa):[Qa,Ea]};Aa.padding=function(cb){return arguments.length?(kb="function"===typeof cb?cb:ba(+cb),Aa):kb};return Aa};k.packEnclose=t;k.packSiblings=function(Aa){J(Aa);return Aa};k.partition=function(){function Aa(Mb){var Gb=Mb.height+1;Mb.x0=Mb.y0=kb;Mb.x1=Qa;Mb.y1=Ea/Gb;Mb.eachBefore(Da(Ea,Gb));cb&&Mb.eachBefore(E);
return Mb}function Da(Mb,Gb){return function(Wb){Wb.children&&C(Wb,Wb.x0,Mb*(Wb.depth+1)/Gb,Wb.x1,Mb*(Wb.depth+2)/Gb);var sa=Wb.x0,ra=Wb.y0,xa=Wb.x1-kb,Ia=Wb.y1-kb;xa<sa&&(sa=xa=(sa+xa)/2);Ia<ra&&(ra=Ia=(ra+Ia)/2);Wb.x0=sa;Wb.y0=ra;Wb.x1=xa;Wb.y1=Ia}}var Qa=1,Ea=1,kb=0,cb=!1;Aa.round=function(Mb){return arguments.length?(cb=!!Mb,Aa):cb};Aa.size=function(Mb){return arguments.length?(Qa=+Mb[0],Ea=+Mb[1],Aa):[Qa,Ea]};Aa.padding=function(Mb){return arguments.length?(kb=+Mb,Aa):kb};return Aa};k.stratify=
function(){function Aa(Ea){var kb=Array.from(Ea),cb=kb.length,Mb,Gb,Wb=new Map;for(Mb=0;Mb<cb;++Mb){var sa=kb[Mb];var ra=kb[Mb]=new F(sa);if(null!=(Gb=Da(sa,Mb,Ea))&&(Gb+="")){var xa=ra.id=Gb;Wb.set(xa,Wb.has(xa)?Va:ra)}null!=(Gb=Qa(sa,Mb,Ea))&&(Gb+="")&&(ra.parent=Gb)}for(Mb=0;Mb<cb;++Mb)if(ra=kb[Mb],Gb=ra.parent){Ea=Wb.get(Gb);if(!Ea)throw Error("missing: "+Gb);if(Ea===Va)throw Error("ambiguous: "+Gb);Ea.children?Ea.children.push(ra):Ea.children=[ra];ra.parent=Ea}else{if(Ia)throw Error("multiple roots");
var Ia=ra}if(!Ia)throw Error("no root");Ia.parent=eb;Ia.eachBefore(function(bb){bb.depth=bb.parent.depth+1;--cb}).eachBefore(V);Ia.parent=null;if(0<cb)throw Error("cycle");return Ia}var Da=W,Qa=fa;Aa.id=function(Ea){return arguments.length?(Da=T(Ea),Aa):Da};Aa.parentId=function(Ea){return arguments.length?(Qa=T(Ea),Aa):Qa};return Aa};k.tree=function(){function Aa(Wb){var sa=Fa(Wb);sa.eachAfter(Da);sa.parent.m=-sa.z;sa.eachBefore(Qa);if(Gb)Wb.eachBefore(Ea);else{var ra=Wb,xa=Wb,Ia=Wb;Wb.eachBefore(function(mb){mb.x<
ra.x&&(ra=mb);mb.x>xa.x&&(xa=mb);mb.depth>Ia.depth&&(Ia=mb)});sa=ra===xa?1:kb(ra,xa)/2;var bb=sa-ra.x,Hb=cb/(xa.x+sa+bb),zb=Mb/(Ia.depth||1);Wb.eachBefore(function(mb){mb.x=(mb.x+bb)*Hb;mb.y=mb.depth*zb})}return Wb}function Da(Wb){var sa=Wb.children,ra=Wb.parent.children,xa=Wb.i?ra[Wb.i-1]:null;if(sa){for(var Ia=0,bb=0,Hb=Wb.children,zb=Hb.length,mb;0<=--zb;)mb=Hb[zb],mb.z+=Ia,mb.m+=Ia,Ia+=mb.s+(bb+=mb.c);sa=(sa[0].z+sa[sa.length-1].z)/2;xa?(Wb.z=xa.z+kb(Wb._,xa._),Wb.m=Wb.z-sa):Wb.z=sa}else xa&&
(Wb.z=xa.z+kb(Wb._,xa._));sa=Wb.parent;ra=Wb.parent.A||ra[0];if(xa){bb=Ia=Wb;Hb=Ia.parent.children[0];zb=Ia.m;mb=bb.m;for(var Jb=xa.m,Eb=Hb.m,Db;xa=Ga(xa),Ia=Ba(Ia),xa&&Ia;){Hb=Ba(Hb);bb=Ga(bb);bb.a=Wb;Db=xa.z+Jb-Ia.z-zb+kb(xa._,Ia._);if(0<Db){var bc=xa.a.parent===Wb.parent?xa.a:ra,jc=Wb,Tc=Db,ub=Tc/(jc.i-bc.i);jc.c-=ub;jc.s+=Tc;bc.c+=ub;jc.z+=Tc;jc.m+=Tc;zb+=Db;mb+=Db}Jb+=xa.m;zb+=Ia.m;Eb+=Hb.m;mb+=bb.m}xa&&!Ga(bb)&&(bb.t=xa,bb.m+=Jb-mb);Ia&&!Ba(Hb)&&(Hb.t=Ia,Hb.m+=zb-Eb,ra=Wb)}sa.A=ra}function Qa(Wb){Wb._.x=
Wb.z+Wb.parent.m;Wb.m+=Wb.parent.m}function Ea(Wb){Wb.x*=cb;Wb.y=Wb.depth*Mb}var kb=ja,cb=1,Mb=1,Gb=null;Aa.separation=function(Wb){return arguments.length?(kb=Wb,Aa):kb};Aa.size=function(Wb){return arguments.length?(Gb=!1,cb=+Wb[0],Mb=+Wb[1],Aa):Gb?null:[cb,Mb]};Aa.nodeSize=function(Wb){return arguments.length?(Gb=!0,cb=+Wb[0],Mb=+Wb[1],Aa):Gb?[cb,Mb]:null};return Aa};k.treemap=function(){function Aa(Ia){Ia.x0=Ia.y0=0;Ia.x1=kb;Ia.y1=cb;Ia.eachBefore(Da);Mb=[0];Ea&&Ia.eachBefore(E);return Ia}function Da(Ia){var bb=
Mb[Ia.depth],Hb=Ia.x0+bb,zb=Ia.y0+bb,mb=Ia.x1-bb,Jb=Ia.y1-bb;mb<Hb&&(Hb=mb=(Hb+mb)/2);Jb<zb&&(zb=Jb=(zb+Jb)/2);Ia.x0=Hb;Ia.y0=zb;Ia.x1=mb;Ia.y1=Jb;Ia.children&&(bb=Mb[Ia.depth+1]=Gb(Ia)/2,Hb+=xa(Ia)-bb,zb+=Wb(Ia)-bb,mb-=sa(Ia)-bb,Jb-=ra(Ia)-bb,mb<Hb&&(Hb=mb=(Hb+mb)/2),Jb<zb&&(zb=Jb=(zb+Jb)/2),Qa(Ia,Hb,zb,mb,Jb))}var Qa=Ra,Ea=!1,kb=1,cb=1,Mb=[0],Gb=z,Wb=z,sa=z,ra=z,xa=z;Aa.round=function(Ia){return arguments.length?(Ea=!!Ia,Aa):Ea};Aa.size=function(Ia){return arguments.length?(kb=+Ia[0],cb=+Ia[1],
Aa):[kb,cb]};Aa.tile=function(Ia){return arguments.length?(Qa=T(Ia),Aa):Qa};Aa.padding=function(Ia){return arguments.length?Aa.paddingInner(Ia).paddingOuter(Ia):Aa.paddingInner()};Aa.paddingInner=function(Ia){return arguments.length?(Gb="function"===typeof Ia?Ia:ba(+Ia),Aa):Gb};Aa.paddingOuter=function(Ia){return arguments.length?Aa.paddingTop(Ia).paddingRight(Ia).paddingBottom(Ia).paddingLeft(Ia):Aa.paddingTop()};Aa.paddingTop=function(Ia){return arguments.length?(Wb="function"===typeof Ia?Ia:ba(+Ia),
Aa):Wb};Aa.paddingRight=function(Ia){return arguments.length?(sa="function"===typeof Ia?Ia:ba(+Ia),Aa):sa};Aa.paddingBottom=function(Ia){return arguments.length?(ra="function"===typeof Ia?Ia:ba(+Ia),Aa):ra};Aa.paddingLeft=function(Ia){return arguments.length?(xa="function"===typeof Ia?Ia:ba(+Ia),Aa):xa};return Aa};k.treemapBinary=function(Aa,Da,Qa,Ea,kb){function cb(xa,Ia,bb,Hb,zb,mb,Jb){if(xa>=Ia-1)xa=Mb[xa],xa.x0=Hb,xa.y0=zb,xa.x1=mb,xa.y1=Jb;else{for(var Eb=ra[xa],Db=bb/2+Eb,bc=xa+1,jc=Ia-1;bc<
jc;){var Tc=bc+jc>>>1;ra[Tc]<Db?bc=Tc+1:jc=Tc}Db-ra[bc-1]<ra[bc]-Db&&xa+1<bc&&--bc;Eb=ra[bc]-Eb;Db=bb-Eb;mb-Hb>Jb-zb?(bb=bb?(Hb*Db+mb*Eb)/bb:mb,cb(xa,bc,Eb,Hb,zb,bb,Jb),cb(bc,Ia,Db,bb,zb,mb,Jb)):(bb=bb?(zb*Db+Jb*Eb)/bb:Jb,cb(xa,bc,Eb,Hb,zb,mb,bb),cb(bc,Ia,Db,Hb,bb,mb,Jb))}}var Mb=Aa.children,Gb,Wb=Mb.length,sa,ra=Array(Wb+1);for(ra[0]=sa=Gb=0;Gb<Wb;++Gb)ra[Gb+1]=sa+=Mb[Gb].value;cb(0,Wb,Aa.value,Da,Qa,Ea,kb)};k.treemapDice=C;k.treemapResquarify=La;k.treemapSlice=Xa;k.treemapSliceDice=function(Aa,
Da,Qa,Ea,kb){(Aa.depth&1?Xa:C)(Aa,Da,Qa,Ea,kb)};k.treemapSquarify=Ra;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[540]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(517),da(503),da(539)):"function"===typeof define&&define.amd?define(["exports","vega-dataflow","vega-util","d3-hierarchy"],f):(k="undefined"!==typeof globalThis?globalThis:k||self,f(k.vega={},k.vega,k.vega,k.d3))})(this,function(k,f,h,l){function u(O,N,A){const J={};O.each(T=>{const z=T.data;A(z)&&(J[N(z)]=T)});O.lookup=J;return O}function q(O){f.Transform.call(this,null,O)}function D(){function O(T,
z){if(z>=A.length)return T;const ba=T.length,K=A[z++],r={},Y={};let Z=-1,E,C,W;for(;++Z<ba;)E=K(C=T[Z])+"",(W=r[E])?W.push(C):r[E]=[C];for(E in r)Y[E]=O(r[E],z);return Y}function N(T,z){if(++z>A.length)return T;const ba=[];for(const K in T)ba.push({key:K,values:N(T[K],z)});return ba}const A=[],J={entries:T=>N(O(T,0),0),key:T=>(A.push(T),J)};return J}function U(O){f.Transform.call(this,null,O)}function aa(O,N,A){for(let J,T=0,z=N.length;T<z;++T)if(J=N[T],J in A)O[J](A[J])}function X(O){U.call(this,
O)}function S(O){U.call(this,O)}function V(O){f.Transform.call(this,null,O)}function F(O){U.call(this,O)}function t(O){f.Transform.call(this,[],O)}function w(O){U.call(this,O)}q.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const x=O=>O.values;h.inherits(q,f.Transform,{transform(O,N){N.source||h.error("Nest transform requires an upstream data source.");var A=O.generate,J=O.modified(),T=N.clone(),z=this.value;
if(!z||J||N.changed())z&&z.each(ba=>{ba.children&&f.isTuple(ba.data)&&T.rem.push(ba.data)}),this.value=z=l.hierarchy({values:h.array(O.keys).reduce((ba,K)=>{ba.key(K);return ba},D()).entries(T.source)},x),A&&z.each(ba=>{ba.children&&(ba=f.ingest(ba.data),T.add.push(ba),T.source.push(ba))}),u(z,f.tupleid,f.tupleid);T.source.root=z;return T}});const I=(O,N)=>O.parent===N.parent?1:2;h.inherits(U,f.Transform,{transform(O,N){N.source&&N.source.root||h.error(this.constructor.name+" transform requires a backing tree data source.");
const A=this.layout(O.method),J=this.fields,T=N.source.root,z=O.as||J;O.field?T.sum(O.field):T.count();O.sort&&T.sort(f.stableCompare(O.sort,ba=>ba.data));aa(A,this.params,O);A.separation&&A.separation(!1!==O.separation?I:h.one);try{this.value=A(T)}catch(ba){h.error(ba)}T.each(ba=>{const K=ba.data,r=J.length-1;for(let Y=0;Y<r;++Y)K[z[Y]]=ba[J[Y]];K[z[r]]=ba.children?ba.children.length:0});return N.reflow(O.modified()).modifies(z).modifies("leaf")}});var R=["x","y","r","depth","children"];X.Definition=
{type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number","default":0},{name:"radius",type:"field","default":null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:R.length,"default":R}]};h.inherits(X,U,{layout:l.pack,params:["radius","size","padding"],fields:R});R="x0 y0 x1 y1 depth children".split(" ");S.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",
type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number","default":0},{name:"round",type:"boolean","default":!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:R.length,"default":R}]};h.inherits(S,U,{layout:l.partition,params:["size","round","padding"],fields:R});V.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};h.inherits(V,f.Transform,{transform(O,
N){N.source||h.error("Stratify transform requires an upstream data source.");let A=this.value;const J=O.modified(),T=N.fork(N.ALL).materialize(N.SOURCE);N=!A||J||N.changed(N.ADD_REM)||N.modified(O.key.fields)||N.modified(O.parentKey.fields);T.source=T.source.slice();N&&(A=T.source.length?u(l.stratify().id(O.key).parentId(O.parentKey)(T.source),O.key,h.truthy):u(l.stratify()([{}]),O.key,O.key));T.source.root=this.value=A;return T}});const B={tidy:l.tree,cluster:l.cluster};R=["x","y","depth","children"];
F.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum","default":"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean","default":!0},{name:"as",type:"string",array:!0,length:R.length,"default":R}]};h.inherits(F,U,{layout(O){O=O||"tidy";if(h.hasOwnProperty(B,O))return B[O]();h.error("Unrecognized Tree layout method: "+
O)},params:["size","nodeSize"],fields:R});t.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};h.inherits(t,f.Transform,{transform(O,N){O=this.value;const A=N.source&&N.source.root,J=N.fork(N.NO_SOURCE),T={};A||h.error("TreeLinks transform requires a tree data source.");N.changed(N.ADD_REM)?(J.rem=O,N.visit(N.SOURCE,z=>T[f.tupleid(z)]=1),A.each(z=>{const ba=z.data;(z=z.parent&&z.parent.data)&&T[f.tupleid(ba)]&&T[f.tupleid(z)]&&J.add.push(f.ingest({source:z,target:ba}))}),
this.value=J.add):N.changed(N.MOD)&&(N.visit(N.MOD,z=>T[f.tupleid(z)]=1),O.forEach(z=>{(T[f.tupleid(z.source)]||T[f.tupleid(z.target)])&&J.mod.push(z)}));return J}});const v={binary:l.treemapBinary,dice:l.treemapDice,slice:l.treemapSlice,slicedice:l.treemapSliceDice,squarify:l.treemapSquarify,resquarify:l.treemapResquarify};R="x0 y0 x1 y1 depth children".split(" ");w.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",
type:"enum","default":"squarify",values:"squarify resquarify binary dice slice slicedice".split(" ")},{name:"padding",type:"number","default":0},{name:"paddingInner",type:"number","default":0},{name:"paddingOuter",type:"number","default":0},{name:"paddingTop",type:"number","default":0},{name:"paddingRight",type:"number","default":0},{name:"paddingBottom",type:"number","default":0},{name:"paddingLeft",type:"number","default":0},{name:"ratio",type:"number","default":1.618033988749895},{name:"round",
type:"boolean","default":!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:R.length,"default":R}]};h.inherits(w,U,{layout(){const O=l.treemap();O.ratio=N=>{const A=O.tile();A.ratio&&O.tile(A.ratio(N))};O.method=N=>{h.hasOwnProperty(v,N)?O.tile(v[N]):h.error("Unrecognized Treemap layout method: "+N)};return O},params:"method ratio size round padding paddingInner paddingOuter paddingTop paddingRight paddingBottom paddingLeft".split(" "),fields:R});k.nest=q;k.pack=
X;k.partition=S;k.stratify=V;k.tree=F;k.treelinks=t;k.treemap=w;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[541]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(522),da(517),da(527),da(503)):"function"===typeof define&&define.amd?define(["exports","vega-canvas","vega-dataflow","vega-scenegraph","vega-util"],f):(k="undefined"!==typeof globalThis?globalThis:k||self,f((k.vega=k.vega||{},k.vega.transforms={}),k.vega,k.vega,k.vega,k.vega))})(this,function(k,f,h,l,u){function q(C,W){const fa=C.bitmap();(W||[]).forEach(ja=>fa.set(C(ja.boundary[0]),C(ja.boundary[3])));
return[fa,void 0]}function D(C,W,fa,ja){const Ba=C.width,Ga=C.height,ua=fa||ja,Fa=f.canvas(Ba,Ga).getContext("2d");W.forEach(la=>U(Fa,la,ua));W=new Uint32Array(Fa.getImageData(0,0,Ba,Ga).data.buffer);fa=C.bitmap();const Xa=ua&&C.bitmap();let Sa,eb,Va,La,Ra;for(eb=0;eb<Ga;++eb)for(Sa=0;Sa<Ba;++Sa)if(Ra=W[eb*Ba+Sa]&4278190080)Va=C(Sa),La=C(eb),ja||fa.set(Va,La),ua&&Ra^268435456&&Xa.set(Va,La);return[fa,Xa]}function U(C,W,fa){if(W.length){var ja=W[0].mark.marktype;"group"===ja?W.forEach(Ba=>{Ba.items.forEach(Ga=>
U(C,Ga.items,fa))}):l.Marks[ja].draw(C,{items:fa?W.map(aa):W})}}function aa(C){C=h.rederive(C,{});C.stroke&&(C.strokeOpacity=1);C.fill&&(C.fillOpacity=.0625,C.stroke="#000",C.strokeOpacity=1,C.strokeWidth=2);return C}function X(C,W){const fa=new Uint32Array(~~((C*W+32)/32));return{array:fa,get:(ja,Ba)=>{ja=Ba*C+ja;return fa[ja>>>5]&1<<(ja&31)},set:(ja,Ba)=>{ja=Ba*C+ja;fa[ja>>>5]|=1<<(ja&31)},clear:(ja,Ba)=>{ja=Ba*C+ja;fa[ja>>>5]&=~(1<<(ja&31))},getRange:(ja,Ba,Ga,ua)=>{let Fa,Xa,Sa;for(;ua>=Ba;--ua){var eb=
ua*C+ja;Fa=ua*C+Ga;Xa=eb>>>5;Sa=Fa>>>5;if(Xa===Sa){if(fa[Xa]&A[eb&31]&J[(Fa&31)+1])return!0}else{if(fa[Xa]&A[eb&31]||fa[Sa]&J[(Fa&31)+1])return!0;for(eb=Xa+1;eb<Sa;++eb)if(fa[eb])return!0}}return!1},setRange:(ja,Ba,Ga,ua)=>{let Fa,Xa,Sa;for(;Ba<=ua;++Ba){var eb=Ba*C+ja;Fa=Ba*C+Ga;Xa=eb>>>5;Sa=Fa>>>5;if(Xa===Sa)fa[Xa]|=A[eb&31]&J[(Fa&31)+1];else for(fa[Xa]|=A[eb&31],fa[Sa]|=J[(Fa&31)+1],eb=Xa+1;eb<Sa;++eb)fa[eb]|=4294967295}},clearRange:(ja,Ba,Ga,ua)=>{let Fa,Xa,Sa;for(;Ba<=ua;++Ba){var eb=Ba*C+ja;
Fa=Ba*C+Ga;Xa=eb>>>5;Sa=Fa>>>5;if(Xa===Sa)fa[Xa]&=J[eb&31]|A[(Fa&31)+1];else for(fa[Xa]&=J[eb&31],fa[Sa]&=A[(Fa&31)+1],eb=Xa+1;eb<Sa;++eb)fa[eb]&=0}},outOfBounds:(ja,Ba,Ga,ua)=>0>ja||0>Ba||ua>=W||Ga>=C}}function S(C,W,fa){const ja=Math.max(1,Math.sqrt(C*W/1E6)),Ba=~~((C+2*fa+ja)/ja),Ga=~~((W+2*fa+ja)/ja),ua=Fa=>~~((Fa+fa)/ja);ua.invert=Fa=>Fa*ja-fa;ua.bitmap=()=>X(Ba,Ga);ua.ratio=ja;ua.padding=fa;ua.width=C;ua.height=W;return ua}function V(C,W,fa,ja,Ba,Ga){fa/=2;return 0>C-fa||C+fa>Ba||0>W-(fa=ja/
2)||W+fa>Ga}function F(){return!1}function t(C,W,fa,ja,Ba,Ga,ua,Fa){Ba=Ba*Ga/(2*ja);ja=C(W-Ba);W=C(W+Ba);Ba=C(fa-(Ga/=2));C=C(fa+Ga);return ua.outOfBounds(ja,Ba,W,C)||ua.getRange(ja,Ba,W,C)||Fa&&Fa.getRange(ja,Ba,W,C)}function w(C,W,fa,ja,Ba,Ga,ua,Fa){Ba=Ba*Ga/(2*ja);ja=C(W-Ba);W=C(W+Ba);Ba=C(fa-(Ga/=2));fa=C(fa+Ga);ja=0<ja?ja:0;Ba=0<Ba?Ba:0;W=W<C.width?W:C.width-1;fa=fa<C.height?fa:C.height-1;return ua.getRange(ja,Ba,W,fa)||Fa&&Fa.getRange(ja,Ba,W,fa)}function x(C,W,fa,ja,Ba){const Ga=C.width,ua=
C.height,Fa=W[0],Xa=W[1],Sa=ja.length;return function(eb){const Va=eb.boundary,La=eb.datum.fontSize;if(!Ba&&(0>Va[2]||0>Va[5]||Va[0]>Ga||Va[3]>ua))return!1;let Ra=0,la,ma;let Aa,Da;let Qa;let Ea;let kb,cb;for(let ub=0;ub<Sa;++ub){la=(fa[ub]&3)-1;ma=(fa[ub]>>>2&3)-1;var Mb=0===la&&0===ma||0>ja[ub];var Gb=la&&ma?Math.SQRT1_2:1;Aa=0>ja[ub]?-1:1;Da=Va[1+la]+ja[ub]*la*Gb;Ea=Va[4+ma]+Aa*La*ma/2+ja[ub]*ma*Gb;Gb=Ea-La/2;Qa=Ea+La/2;var Wb=C(Da);kb=C(Gb);cb=C(Qa);Ba&&(Wb=0>Wb?0:Wb,kb=0>kb?0:kb,cb=cb>=C.height?
C.height-1:cb);if(!Ra){var sa=Wb;var ra=kb;var xa=cb;var Ia=Fa,bb=Xa,Hb=Da,zb=Da,mb=Gb,Jb=Qa,Eb=Va,Db=Mb;if(!Ia.outOfBounds(sa,ra,Wb,xa)&&(Db&&bb?!bb.getRange(sa,ra,Wb,xa)&&Eb[0]<=Hb&&zb<=Eb[2]&&Eb[3]<=mb&&Jb<=Eb[5]:!Ia.getRange(sa,ra,Wb,xa)))Ra=l.textMetrics.width(eb.datum,eb.datum.text);else continue}ra=Da+Aa*Ra*la/2;Da=ra-Ra/2;sa=ra+Ra/2;Wb=C(Da);xa=C(sa);Ba&&(Wb=0>Wb?0:Wb,xa=xa>=C.width?C.width-1:xa);Ia=Wb;bb=xa;Hb=kb;zb=cb;mb=Fa;Jb=Xa;Eb=Da;Db=sa;var bc=Gb,jc=Qa,Tc=Va;if(!mb.outOfBounds(Ia,Hb,
bb,zb)&&(Mb&&Jb?!Jb.getRange(Ia,Hb,bb,zb)&&Tc[0]<=Eb&&Db<=Tc[2]&&Tc[3]<=bc&&jc<=Tc[5]:!mb.getRange(Ia,Hb,bb,zb)))return eb.x=la?0>la*Aa?sa:Da:ra,eb.y=ma?0>ma*Aa?Qa:Gb:Ea,eb.align=ba[la*Aa+1],eb.baseline=K[ma*Aa+1],Fa.setRange(Wb,kb,xa,cb),!0}return!1}}function I(C,W,fa,ja,Ba,Ga,ua,Fa,Xa,Sa,eb){if(!C.length)return C;var Va=Math.max(ja.length,Ba.length);ja=R(ja,Va);Ba=B(Ba,Va);Va=v(C[0].datum);var La="group"===Va&&C[0].datum.items[Xa].marktype;const Ra="area"===La,la=O(Va,La,Fa,Xa);Fa=null===Sa||Infinity===
Sa;W=S(W[0],W[1],Fa?0:Sa);La=Ra&&"naive"===eb;Sa=C.map(Da=>({datum:Da,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:la(Da)}));if(!La){fa&&Sa.sort((Da,Qa)=>fa(Da.datum,Qa.datum));var ma=!1;for(La=0;La<Ba.length&&!ma;++La)ma=5===Ba[La]||0>ja[La];Va&&(ua||Ra)&&(Ga=[C.map(Da=>Da.datum)].concat(Ga));ma=Ga.length?D(W,Ga,ma,Ra):q(W,ua&&Sa)}const Aa=Ra?Y[eb](W,ma,ua,Xa,Fa):x(W,ma,Ba,ja,Fa);Sa.forEach(Da=>Da.opacity=+Aa(Da));return Sa}function R(C,W){const fa=new Float64Array(W),ja=C.length;
for(let Ba=0;Ba<ja;++Ba)fa[Ba]=C[Ba]||0;for(C=ja;C<W;++C)fa[C]=fa[ja-1];return fa}function B(C,W){const fa=new Int8Array(W),ja=C.length;for(let Ba=0;Ba<ja;++Ba)fa[Ba]|=r[C[Ba]];for(C=ja;C<W;++C)fa[C]=fa[ja-1];return fa}function v(C){return C&&C.mark&&C.mark.marktype}function O(C,W,fa,ja){const Ba=Ga=>[Ga.x,Ga.x,Ga.x,Ga.y,Ga.y,Ga.y];return C?"line"===C||"area"===C?Ga=>Ba(Ga.datum):"line"===W?Ga=>{Ga=Ga.datum.items[ja].items;return Ba(Ga.length?Ga["start"===fa?0:Ga.length-1]:{x:NaN,y:NaN})}:Ga=>{Ga=
Ga.datum.bounds;return[Ga.x1,(Ga.x1+Ga.x2)/2,Ga.x2,Ga.y1,(Ga.y1+Ga.y2)/2,Ga.y2]}:Ba}function N(C){h.Transform.call(this,null,C)}const A=new Uint32Array(33),J=new Uint32Array(33);J[0]=0;A[0]=~J[0];for(let C=1;32>=C;++C)J[C]=J[C-1]<<1|1,A[C]=~J[C];const T=[-1,-1,1,1],z=[-1,1,-1,1],ba=["right","center","left"],K=["bottom","middle","top"],r={"top-left":0,top:1,"top-right":2,left:4,middle:5,right:6,"bottom-left":8,bottom:9,"bottom-right":10},Y={naive:function(C,W,fa,ja){const Ba=C.width,Ga=C.height;return function(ua){const Fa=
ua.datum.datum.items[ja].items,Xa=Fa.length,Sa=ua.datum.fontSize,eb=l.textMetrics.width(ua.datum,ua.datum.text);let Va=0;let La,Ra,la,ma,Aa;for(let Qa=0;Qa<Xa;++Qa){var Da=Fa[Qa].x;Ra=Fa[Qa].y;La=void 0===Fa[Qa].x2?Da:Fa[Qa].x2;la=void 0===Fa[Qa].y2?Ra:Fa[Qa].y2;ma=(Da+La)/2;Aa=(Ra+la)/2;Da=Math.abs(La-Da+la-Ra);Da>=Va&&(Va=Da,ua.x=ma,ua.y=Aa)}ma=eb/2;Aa=Sa/2;Da=ua.x-ma;La=ua.x+ma;Ra=ua.y-Aa;la=ua.y+Aa;ua.align="center";0>Da&&La<=Ba?ua.align="left":0<=Da&&Ba<La&&(ua.align="right");ua.baseline="middle";
0>Ra&&la<=Ga?ua.baseline="top":0<=Ra&&Ga<la&&(ua.baseline="bottom");return!0}},"reduced-search":function(C,W,fa,ja,Ba){function Ga(La,Ra,la,ma,Aa){La=C.invert(La);Ra=C.invert(Ra);let Da=la,Qa=Fa,Ea;if(!Sa(La,Ra,ma,Aa,ua,Fa)&&!Xa(C,La,Ra,Aa,ma,Da,eb,Va)&&!Xa(C,La,Ra,Aa,ma,Aa,eb,null)){for(;1<=Qa-Da;)Ea=(Da+Qa)/2,Xa(C,La,Ra,Aa,ma,Ea,eb,Va)?Qa=Ea:Da=Ea;if(Da>la)return[La,Ra,Da,!0]}}const ua=C.width,Fa=C.height,[Xa,Sa]=Ba?[w,F]:[t,V],eb=W[0],Va=W[1];return function(La){const Ra=La.datum.datum.items[ja].items,
la=Ra.length,ma=La.datum.fontSize,Aa=l.textMetrics.width(La.datum,La.datum.text);let Da=fa?ma:0,Qa=!1,Ea=!1,kb=0;let cb;let Mb;let Gb,Wb,sa,ra,xa,Ia,bb,Hb;for(let Eb=0;Eb<la;++Eb){var zb=Ra[Eb].x;var mb=Ra[Eb].y;cb=void 0===Ra[Eb].x2?zb:Ra[Eb].x2;Mb=void 0===Ra[Eb].y2?mb:Ra[Eb].y2;if(zb>cb){var Jb=zb;zb=cb;cb=Jb}mb>Mb&&(Jb=mb,mb=Mb,Mb=Jb);Wb=C(zb);ra=C(cb);sa=~~((Wb+ra)/2);xa=C(mb);bb=C(Mb);Ia=~~((xa+bb)/2);for(Jb=sa;Jb>=Wb;--Jb)for(Gb=Ia;Gb>=xa;--Gb)(Hb=Ga(Jb,Gb,Da,Aa,ma))&&([La.x,La.y,Da,Qa]=Hb);
for(Jb=sa;Jb<=ra;++Jb)for(Gb=Ia;Gb<=bb;++Gb)(Hb=Ga(Jb,Gb,Da,Aa,ma))&&([La.x,La.y,Da,Qa]=Hb);Qa||fa||(Jb=Math.abs(cb-zb+Mb-mb),zb=(zb+cb)/2,mb=(mb+Mb)/2,Jb>=kb&&!Sa(zb,mb,Aa,ma,ua,Fa)&&!Xa(C,zb,mb,ma,Aa,ma,eb,null)&&(kb=Jb,La.x=zb,La.y=mb,Ea=!0))}return Qa||Ea?(zb=Aa/2,mb=ma/2,eb.setRange(C(La.x-zb),C(La.y-mb),C(La.x+zb),C(La.y+mb)),La.align="center",La.baseline="middle",!0):!1}},floodfill:function(C,W,fa,ja,Ba){const Ga=C.width,ua=C.height,[Fa,Xa]=Ba?[w,F]:[t,V],Sa=W[0],eb=W[1],Va=C.bitmap();return function(La){const Ra=
La.datum.datum.items[ja].items,la=Ra.length,ma=La.datum.fontSize,Aa=l.textMetrics.width(La.datum,La.datum.text),Da=[];let Qa=fa?ma:0,Ea=!1,kb=!1,cb=0,Mb,Gb,Wb,sa,ra,xa;var Ia;for(let zb=0;zb<la;++zb){Mb=Ra[zb].x;Wb=Ra[zb].y;Gb=void 0===Ra[zb].x2?Mb:Ra[zb].x2;sa=void 0===Ra[zb].y2?Wb:Ra[zb].y2;for(Da.push([C((Mb+Gb)/2),C((Wb+sa)/2)]);Da.length;)if([bb,Hb]=Da.pop(),!(Sa.get(bb,Hb)||eb.get(bb,Hb)||Va.get(bb,Hb))){Va.set(bb,Hb);for(Ia=0;4>Ia;++Ia)ra=bb+T[Ia],xa=Hb+z[Ia],Va.outOfBounds(ra,xa,ra,xa)||Da.push([ra,
xa]);ra=C.invert(bb);xa=C.invert(Hb);var bb=Qa;var Hb=ua;if(!Xa(ra,xa,Aa,ma,Ga,ua)&&!Fa(C,ra,xa,ma,Aa,bb,Sa,eb)&&!Fa(C,ra,xa,ma,Aa,ma,Sa,null)){for(;1<=Hb-bb;)Ia=(bb+Hb)/2,Fa(C,ra,xa,ma,Aa,Ia,Sa,eb)?Hb=Ia:bb=Ia;bb>Qa&&(La.x=ra,La.y=xa,Qa=bb,Ea=!0)}}Ea||fa||(bb=Math.abs(Gb-Mb+sa-Wb),ra=(Mb+Gb)/2,xa=(Wb+sa)/2,bb>=cb&&!Xa(ra,xa,Aa,ma,Ga,ua)&&!Fa(C,ra,xa,ma,Aa,ma,Sa,null)&&(cb=bb,La.x=ra,La.y=xa,kb=!0))}return Ea||kb?(ra=Aa/2,xa=ma/2,Sa.setRange(C(La.x-ra),C(La.y-xa),C(La.x+ra),C(La.y+xa)),La.align="center",
La.baseline="middle",!0):!1}}},Z=["x","y","opacity","align","baseline"],E="top-left left bottom-left top bottom top-right right bottom-right".split(" ");N.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:E},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],
default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:Z.length,default:Z}]};u.inherits(N,h.Transform,{transform(C,W){function fa(Ga){Ga=C[Ga];return u.isFunction(Ga)&&W.modified(Ga.fields)}const ja=C.modified();if(ja||W.changed(W.ADD_REM)||fa("sort")){C.size&&2===C.size.length||u.error("Size parameter should be specified as a [width, height] array.");
var Ba=C.as||Z;I(W.materialize(W.SOURCE).source||[],C.size,C.sort,u.array(null==C.offset?1:C.offset),u.array(C.anchor||E),C.avoidMarks||[],!1!==C.avoidBaseMark,C.lineAnchor||"end",C.markIndex||0,void 0===C.padding?0:C.padding,C.method||"naive").forEach(Ga=>{const ua=Ga.datum;ua[Ba[0]]=Ga.x;ua[Ba[1]]=Ga.y;ua[Ba[2]]=Ga.opacity;ua[Ba[3]]=Ga.align;ua[Ba[4]]=Ga.baseline});return W.reflow(ja).modifies(Ba)}}});k.label=N;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[542]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(518),da(517),da(503)):"function"===typeof define&&define.amd?define(["exports","vega-statistics","vega-dataflow","vega-util"],f):(k="undefined"!==typeof globalThis?globalThis:k||self,f(k.vega={},k.vega,k.vega,k.vega))})(this,function(k,f,h,l){function u(aa,X){var S=[],V=function(B){return B(x)},F;if(null==X)S.push(aa);else{var t={};var w=0;for(F=aa.length;w<F;++w){var x=aa[w];var I=X.map(V);
var R=t[I];R||(t[I]=R=[],R.dims=I,S.push(R));R.push(x)}}return S}function q(aa){h.Transform.call(this,null,aa)}function D(aa){h.Transform.call(this,null,aa)}q.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number","default":.3},{name:"as",type:"string",array:!0}]};l.inherits(q,h.Transform,{transform(aa,X){const S=X.fork(X.NO_SOURCE|X.NO_FIELDS);if(!this.value||
X.changed()||aa.modified()){X=X.materialize(X.SOURCE).source;X=u(X,aa.groupby);const V=(aa.groupby||[]).map(l.accessorName),F=V.length,t=aa.as||[l.accessorName(aa.x),l.accessorName(aa.y)],w=[];X.forEach(x=>{f.regressionLoess(x,aa.x,aa.y,aa.bandwidth||.3).forEach(I=>{const R={};for(let B=0;B<F;++B)R[V[B]]=x.dims[B];R[t[0]]=I[0];R[t[1]]=I[1];w.push(h.ingest(R))})});this.value&&(S.rem=this.value);this.value=S.add=S.source=w}return S}});const U={linear:f.regressionLinear,log:f.regressionLog,exp:f.regressionExp,
pow:f.regressionPow,quad:f.regressionQuad,poly:f.regressionPoly};D.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string","default":"linear",values:Object.keys(U)},{name:"order",type:"number","default":3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean","default":!1},{name:"as",type:"string",array:!0}]};l.inherits(D,h.Transform,
{transform(aa,X){const S=X.fork(X.NO_SOURCE|X.NO_FIELDS);if(!this.value||X.changed()||aa.modified()){var V=X.materialize(X.SOURCE).source;V=u(V,aa.groupby);const F=(aa.groupby||[]).map(l.accessorName),t=aa.method||"linear",w=aa.order||3,x="poly"===t?w:"quad"===t?2:1,I=aa.as||[l.accessorName(aa.x),l.accessorName(aa.y)],R=U[t],B=[];let v=aa.extent;l.hasOwnProperty(U,t)||l.error("Invalid regression method: "+t);null!=v&&"log"===t&&0>=v[0]&&(X.dataflow.warn("Ignoring extent with values \x3c\x3d 0 for log regression."),
v=null);V.forEach(O=>{if(O.length<=x)X.dataflow.warn("Skipping regression with more parameters than data points.");else{var N=R(O,aa.x,aa.y,w);if(aa.params)B.push(h.ingest({keys:O.dims,coef:N.coef,rSquared:N.rSquared}));else{var A=v||l.extent(O,aa.x),J=T=>{const z={};for(let ba=0;ba<F.length;++ba)z[F[ba]]=O.dims[ba];z[I[0]]=T[0];z[I[1]]=T[1];B.push(h.ingest(z))};"linear"===t?A.forEach(T=>J([T,N.predict(T)])):f.sampleCurve(N.predict,A,25,200).forEach(J)}}});this.value&&(S.rem=this.value);this.value=
S.add=S.source=B}return S}});k.loess=q;k.regression=D;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[543]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa):"function"===typeof define&&define.amd?define(["exports"],f):(k=k||self,f(k.d3=k.d3||{}))})(this,function(k){function f(A,J,T,z){A-=T;J-=z;return A*A+J*J}function h(A,J,T,z,ba,K){z=(z-J)*(ba-A);A=(T-A)*(K-J);return Math.abs(z-A)>=3.3306690738754716E-16*Math.abs(z+A)?z-A:0}function l(A,J,T,z,ba,K){return 0>(h(ba,K,A,J,T,z)||h(A,J,T,z,ba,K)||h(T,z,ba,K,A,J))}function u(A,J,T,z){if(20>=z-T)for(var ba=
T+1;ba<=z;ba++){for(var K=A[ba],r=J[K],Y=ba-1;Y>=T&&J[A[Y]]>r;)A[Y+1]=A[Y--];A[Y+1]=K}else{ba=T+1;K=z;q(A,T+z>>1,ba);J[A[T]]>J[A[z]]&&q(A,T,z);J[A[ba]]>J[A[z]]&&q(A,ba,z);J[A[T]]>J[A[ba]]&&q(A,T,ba);r=A[ba];for(Y=J[r];;){do ba++;while(J[A[ba]]<Y);do K--;while(J[A[K]]>Y);if(K<ba)break;q(A,ba,K)}A[T+1]=A[K];A[K]=r;z-ba+1>=K-T?(u(A,J,ba,z),u(A,J,T,K-1)):(u(A,J,T,K-1),u(A,J,ba,z))}}function q(A,J,T){const z=A[J];A[J]=A[T];A[T]=z}function D(A){return A[0]}function U(A){return A[1]}function aa(A){return A[0]}
function X(A){return A[1]}function S(A){const {triangles:J,coords:T}=A;for(A=0;A<J.length;A+=3){const z=2*J[A],ba=2*J[A+1],K=2*J[A+2];if(1E-10<(T[K]-T[z])*(T[ba+1]-T[z+1])-(T[ba]-T[z])*(T[K+1]-T[z+1]))return!1}return!0}function V(A,J,T){return[A+Math.sin(A+J)*T,J+Math.cos(A-J)*T]}function*F(A,J,T,z){let ba=0;for(const K of A)yield J.call(z,K,ba,A),yield T.call(z,K,ba,A),++ba}const t=Math.pow(2,-52),w=new Uint32Array(512);class x{static from(A,J=D,T=U){const z=A.length,ba=new Float64Array(2*z);for(let K=
0;K<z;K++){const r=A[K];ba[2*K]=J(r);ba[2*K+1]=T(r)}return new x(ba)}constructor(A){const J=A.length>>1;if(0<J&&"number"!==typeof A[0])throw Error("Expected coords to contain numbers.");this.coords=A;A=Math.max(2*J-5,0);this._triangles=new Uint32Array(3*A);this._halfedges=new Int32Array(3*A);this._hashSize=Math.ceil(Math.sqrt(J));this._hullPrev=new Uint32Array(J);this._hullNext=new Uint32Array(J);this._hullTri=new Uint32Array(J);this._hullHash=(new Int32Array(this._hashSize)).fill(-1);this._ids=new Uint32Array(J);
this._dists=new Float64Array(J);this.update()}update(){const {coords:A,_hullPrev:J,_hullNext:T,_hullTri:z,_hullHash:ba}=this;var K=A.length>>1,r=Infinity,Y=Infinity,Z=-Infinity,E=-Infinity;for(var C=0;C<K;C++){var W=A[2*C];var fa=A[2*C+1];W<r&&(r=W);fa<Y&&(Y=fa);W>Z&&(Z=W);fa>E&&(E=fa);this._ids[C]=C}Z=(r+Z)/2;Y=(Y+E)/2;r=Infinity;for(E=0;E<K;E++)if(C=f(Z,Y,A[2*E],A[2*E+1]),C<r){var ja=E;r=C}Y=A[2*ja];E=A[2*ja+1];r=Infinity;for(Z=0;Z<K;Z++)if(Z!==ja&&(C=f(Y,E,A[2*Z],A[2*Z+1]),C<r&&0<C)){var Ba=Z;
r=C}r=A[2*Ba];Z=A[2*Ba+1];fa=Infinity;for(C=0;C<K;C++)if(C!==ja&&C!==Ba){W=r-Y;var Ga=Z-E;var ua=A[2*C]-Y;var Fa=A[2*C+1]-E,Xa=W*W+Ga*Ga,Sa=ua*ua+Fa*Fa,eb=.5/(W*Fa-Ga*ua);Ga=(Fa*Xa-Ga*Sa)*eb;W=(W*Sa-ua*Xa)*eb;W=Ga*Ga+W*W;if(W<fa){var Va=C;fa=W}}C=A[2*Va];W=A[2*Va+1];if(Infinity===fa){for(ja=0;ja<K;ja++)this._dists[ja]=A[2*ja]-A[0]||A[2*ja+1]-A[1];u(this._ids,this._dists,0,K-1);ja=new Uint32Array(K);Ba=0;for(let La=0,Ra=-Infinity;La<K;La++)Va=this._ids[La],this._dists[Va]>Ra&&(ja[Ba++]=Va,Ra=this._dists[Va]);
this.hull=ja.subarray(0,Ba);this.triangles=new Uint32Array(0);this.halfedges=new Uint32Array(0)}else{l(Y,E,r,Z,C,W)&&(fa=Ba,ua=r,Xa=Z,Ba=Va,r=C,Z=W,Va=fa,C=ua,W=Xa);ua=r-Y;fa=Z-E;Xa=C-Y;Fa=W-E;Sa=ua*ua+fa*fa;eb=Xa*Xa+Fa*Fa;Ga=.5/(ua*Fa-fa*Xa);fa=Y+(Fa*Sa-fa*eb)*Ga;ua=E+(ua*eb-Xa*Sa)*Ga;this._cx=fa;this._cy=ua;for(Xa=0;Xa<K;Xa++)this._dists[Xa]=f(A[2*Xa],A[2*Xa+1],fa,ua);u(this._ids,this._dists,0,K-1);this._hullStart=ja;K=3;T[ja]=J[Va]=Ba;T[Ba]=J[ja]=Va;T[Va]=J[Ba]=ja;z[ja]=0;z[Ba]=1;z[Va]=2;ba.fill(-1);
ba[this._hashKey(Y,E)]=ja;ba[this._hashKey(r,Z)]=Ba;ba[this._hashKey(C,W)]=Va;this.trianglesLen=0;this._addTriangle(ja,Ba,Va,-1,-1,-1);for(let La=0,Ra,la;La<this._ids.length;La++){Y=this._ids[La];E=A[2*Y];r=A[2*Y+1];if(0<La&&Math.abs(E-Ra)<=t&&Math.abs(r-la)<=t)continue;Ra=E;la=r;if(Y===ja||Y===Ba||Y===Va)continue;Z=0;for(let Aa=0,Da=this._hashKey(E,r);Aa<this._hashSize&&(Z=ba[(Da+Aa)%this._hashSize],-1===Z||Z===T[Z]);Aa++);C=Z=J[Z];let ma;for(;ma=T[C],!l(E,r,A[2*C],A[2*C+1],A[2*ma],A[2*ma+1]);)if(C=
ma,C===Z){C=-1;break}if(-1!==C){W=this._addTriangle(C,Y,T[C],-1,-1,z[C]);z[Y]=this._legalize(W+2);z[C]=W;K++;for(fa=T[C];ma=T[fa],l(E,r,A[2*fa],A[2*fa+1],A[2*ma],A[2*ma+1]);)W=this._addTriangle(fa,Y,ma,z[Y],-1,z[fa]),z[Y]=this._legalize(W+2),T[fa]=fa,K--,fa=ma;if(C===Z)for(;ma=J[C],l(E,r,A[2*ma],A[2*ma+1],A[2*C],A[2*C+1]);)W=this._addTriangle(ma,Y,C,-1,z[C],z[ma]),this._legalize(W+2),z[ma]=W,T[C]=C,K--,C=ma;this._hullStart=J[Y]=C;T[C]=J[fa]=Y;T[Y]=fa;ba[this._hashKey(E,r)]=Y;ba[this._hashKey(A[2*
C],A[2*C+1])]=C}}this.hull=new Uint32Array(K);for(let La=0,Ra=this._hullStart;La<K;La++)this.hull[La]=Ra,Ra=T[Ra];this.triangles=this._triangles.subarray(0,this.trianglesLen);this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}}_hashKey(A,J){var T=Math;A-=this._cx;J-=this._cy;A/=Math.abs(A)+Math.abs(J);return T.floor.call(T,(0<J?3-A:1+A)/4*this._hashSize)%this._hashSize}_legalize(A){const {_triangles:J,_halfedges:T,coords:z}=this;let ba=0;for(var K;;){const fa=T[A];var r=A-A%3;K=r+(A+2)%
3;if(-1===fa){if(0===ba)break;A=w[--ba];continue}const ja=fa-fa%3,Ba=ja+(fa+2)%3;var Y=J[K],Z=J[A],E=J[r+(A+1)%3];r=J[Ba];var C=z[2*r],W=z[2*r+1];const Ga=z[2*Y]-C,ua=z[2*Y+1]-W,Fa=z[2*Z]-C;Z=z[2*Z+1]-W;C=z[2*E]-C;W=z[2*E+1]-W;E=Fa*Fa+Z*Z;const Xa=C*C+W*W;if(0>Ga*(Z*Xa-E*W)-ua*(Fa*Xa-E*C)+(Ga*Ga+ua*ua)*(Fa*W-Z*C)){J[A]=r;J[fa]=Y;Y=T[Ba];if(-1===Y){r=this._hullStart;do{if(this._hullTri[r]===Ba){this._hullTri[r]=A;break}r=this._hullPrev[r]}while(r!==this._hullStart)}this._link(A,Y);this._link(fa,T[K]);
this._link(K,Ba);K=ja+(fa+1)%3;ba<w.length&&(w[ba++]=K)}else{if(0===ba)break;A=w[--ba]}}return K}_link(A,J){this._halfedges[A]=J;-1!==J&&(this._halfedges[J]=A)}_addTriangle(A,J,T,z,ba,K){const r=this.trianglesLen;this._triangles[r]=A;this._triangles[r+1]=J;this._triangles[r+2]=T;this._link(r,z);this._link(r+1,ba);this._link(r+2,K);this.trianglesLen+=3;return r}}class I{constructor(){this._x0=this._y0=this._x1=this._y1=null;this._=""}moveTo(A,J){this._+=`M${this._x0=this._x1=+A},${this._y0=this._y1=
+J}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(A,J){this._+=`L${this._x1=+A},${this._y1=+J}`}arc(A,J,T){A=+A;J=+J;T=+T;const z=A+T,ba=J;if(0>T)throw Error("negative radius");if(null===this._x1)this._+=`M${z},${ba}`;else if(1E-6<Math.abs(this._x1-z)||1E-6<Math.abs(this._y1-ba))this._+="L"+z+","+ba;T&&(this._+=`A${T},${T},0,1,1,${A-T},${J}A${T},${T},0,1,1,${this._x1=z},${this._y1=ba}`)}rect(A,J,T,z){this._+=`M${this._x0=this._x1=+A},${this._y0=this._y1=+J}h${+T}v${+z}h${-T}Z`}value(){return this._||
null}}class R{constructor(){this._=[]}moveTo(A,J){this._.push([A,J])}closePath(){this._.push(this._[0].slice())}lineTo(A,J){this._.push([A,J])}value(){return this._.length?this._:null}}class B{constructor(A,[J,T,z,ba]=[0,0,960,500]){if(!((z=+z)>=(J=+J)&&(ba=+ba)>=(T=+T)))throw Error("invalid bounds");this.delaunay=A;this._circumcenters=new Float64Array(2*A.points.length);this.vectors=new Float64Array(2*A.points.length);this.xmax=z;this.xmin=J;this.ymax=ba;this.ymin=T;this._init()}update(){this.delaunay.update();
this._init();return this}_init(){const {delaunay:{points:A,hull:J,triangles:T},vectors:z}=this;var ba=this.circumcenters=this._circumcenters.subarray(0,T.length/3*2);for(let fa=0,ja=0,Ba=T.length,Ga,ua;fa<Ba;fa+=3,ja+=2){var K=2*T[fa],r=2*T[fa+1],Y=2*T[fa+2],Z=A[K];K=A[K+1];var E=A[Y],C=A[Y+1];Y=A[r]-Z;r=A[r+1]-K;var W=E-Z;const Fa=C-K,Xa=Y*Y+r*r,Sa=W*W+Fa*Fa,eb=2*(Y*Fa-r*W);eb?1E-8>Math.abs(eb)?(Ga=(Z+E)/2,ua=(K+C)/2):(E=1/eb,Ga=Z+(Fa*Xa-r*Sa)*E,ua=K+(Y*Sa-W*Xa)*E):(Ga=(Z+E)/2-1E8*Fa,ua=(K+C)/2+
1E8*W);ba[ja]=Ga;ba[ja+1]=ua}ba=J[J.length-1];K=4*ba;Y=A[2*ba];r=A[2*ba+1];z.fill(0);for(W=0;W<J.length;++W)ba=J[W],Z=K,E=Y,C=r,K=4*ba,Y=A[2*ba],r=A[2*ba+1],z[Z+2]=z[K]=C-r,z[Z+3]=z[K+1]=Y-E}render(A){const J=null==A?A=new I:void 0,{delaunay:{halfedges:T,inedges:z,hull:ba},circumcenters:K,vectors:r}=this;if(1>=ba.length)return null;for(let W=0,fa=T.length;W<fa;++W){var Y=T[W];if(!(Y<W)){var Z=2*Math.floor(W/3);Y=2*Math.floor(Y/3);this._renderSegment(K[Z],K[Z+1],K[Y],K[Y+1],A)}}Z=ba[ba.length-1];for(Y=
0;Y<ba.length;++Y){var E=Z;Z=ba[Y];var C=2*Math.floor(z[Z]/3);const W=K[C];C=K[C+1];E*=4;(E=this._project(W,C,r[E+2],r[E+3]))&&this._renderSegment(W,C,E[0],E[1],A)}return J&&J.value()}renderBounds(A){const J=null==A?A=new I:void 0;A.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin);return J&&J.value()}renderCell(A,J){const T=null==J?J=new I:void 0;A=this._clip(A);if(null!==A&&A.length){J.moveTo(A[0],A[1]);for(var z=A.length;A[0]===A[z-2]&&A[1]===A[z-1]&&1<z;)z-=2;for(let ba=2;ba<z;ba+=
2)A[ba]===A[ba-2]&&A[ba+1]===A[ba-1]||J.lineTo(A[ba],A[ba+1]);J.closePath();return T&&T.value()}}*cellPolygons(){var {delaunay:{points:A}}=this;for(let J=0,T=A.length/2;J<T;++J)if(A=this.cellPolygon(J))A.index=J,yield A}cellPolygon(A){const J=new R;this.renderCell(A,J);return J.value()}_renderSegment(A,J,T,z,ba){const K=this._regioncode(A,J),r=this._regioncode(T,z);if(0===K&&0===r)ba.moveTo(A,J),ba.lineTo(T,z);else if(A=this._clipSegment(A,J,T,z,K,r))ba.moveTo(A[0],A[1]),ba.lineTo(A[2],A[3])}contains(A,
J,T){return(J=+J,J!==J)||(T=+T,T!==T)?!1:this.delaunay._step(A,J,T)===A}*neighbors(A){const J=this._clip(A);if(J)for(const T of this.delaunay.neighbors(A))if(A=this._clip(T))a:for(let z=0,ba=J.length;z<ba;z+=2)for(let K=0,r=A.length;K<r;K+=2)if(J[z]==A[K]&&J[z+1]==A[K+1]&&J[(z+2)%ba]==A[(K+r-2)%r]&&J[(z+3)%ba]==A[(K+r-1)%r]){yield T;break a}}_cell(A){const {circumcenters:J,delaunay:{inedges:T,halfedges:z,triangles:ba}}=this,K=T[A];if(-1===K)return null;const r=[];let Y=K;do{const Z=Math.floor(Y/3);
r.push(J[2*Z],J[2*Z+1]);Y=2===Y%3?Y-2:Y+1;if(ba[Y]!==A)break;Y=z[Y]}while(Y!==K&&-1!==Y);return r}_clip(A){if(0===A&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const J=this._cell(A);if(null===J)return null;const {vectors:T}=this,z=4*A;return T[z]||T[z+1]?this._clipInfinite(A,J,T[z],T[z+1],T[z+2],T[z+3]):this._clipFinite(A,J)}_clipFinite(A,J){const T=J.length;let z=null;let ba=J[T-2],K=J[T-1];let r=this._regioncode(ba,K),Y;
for(let W=0;W<T;W+=2){var Z=ba;var E=K;ba=J[W];K=J[W+1];var C=r;r=this._regioncode(ba,K);if(0===C&&0===r)Y=0,z?z.push(ba,K):z=[ba,K];else{let fa,ja;if(0===C){if(null===(Z=this._clipSegment(Z,E,ba,K,C,r)))continue;[E,C,fa,ja]=Z}else{if(null===(Z=this._clipSegment(ba,K,Z,E,r,C)))continue;[fa,ja,E,C]=Z;Z=Y;Y=this._edgecode(E,C);Z&&Y&&this._edge(A,Z,Y,z,z.length);z?z.push(E,C):z=[E,C]}Z=Y;Y=this._edgecode(fa,ja);Z&&Y&&this._edge(A,Z,Y,z,z.length);z?z.push(fa,ja):z=[fa,ja]}}if(z)Z=Y,Y=this._edgecode(z[0],
z[1]),Z&&Y&&this._edge(A,Z,Y,z,z.length);else if(this.contains(A,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return z}_clipSegment(A,J,T,z,ba,K){for(;;){if(0===ba&&0===K)return[A,J,T,z];if(ba&K)return null;var r=void 0;let Y;r=ba||K;r&8?(r=A+(T-A)*(this.ymax-J)/(z-J),Y=this.ymax):r&4?(r=A+(T-A)*(this.ymin-J)/(z-J),Y=this.ymin):r&2?(Y=J+(z-J)*(this.xmax-A)/(T-A),r=this.xmax):(Y=J+(z-J)*(this.xmin-A)/(T-A),
r=this.xmin);ba?(A=r,J=Y,ba=this._regioncode(A,J)):(T=r,z=Y,K=this._regioncode(T,z))}}_clipInfinite(A,J,T,z,ba,K){J=Array.from(J);let r;(r=this._project(J[0],J[1],T,z))&&J.unshift(r[0],r[1]);(r=this._project(J[J.length-2],J[J.length-1],ba,K))&&J.push(r[0],r[1]);if(J=this._clipFinite(A,J))for(let Y=0,Z=J.length,E,C=this._edgecode(J[Z-2],J[Z-1]);Y<Z;Y+=2)E=C,C=this._edgecode(J[Y],J[Y+1]),E&&C&&(Y=this._edge(A,E,C,J,Y),Z=J.length);else this.contains(A,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&
(J=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return J}_edge(A,J,T,z,ba){for(;J!==T;){let K,r;switch(J){case 5:J=4;continue;case 4:J=6;K=this.xmax;r=this.ymin;break;case 6:J=2;continue;case 2:J=10;K=this.xmax;r=this.ymax;break;case 10:J=8;continue;case 8:J=9;K=this.xmin;r=this.ymax;break;case 9:J=1;continue;case 1:J=5,K=this.xmin,r=this.ymin}z[ba]===K&&z[ba+1]===r||!this.contains(A,K,r)||(z.splice(ba,0,K,r),ba+=2)}if(4<z.length)for(A=0;A<z.length;A+=2)if(J=
(A+2)%z.length,T=(A+4)%z.length,z[A]===z[J]&&z[J]===z[T]||z[A+1]===z[J+1]&&z[J+1]===z[T+1])z.splice(J,2),A-=2;return ba}_project(A,J,T,z){let ba=Infinity,K,r,Y;if(0>z){if(J<=this.ymin)return null;(K=(this.ymin-J)/z)<ba&&(Y=this.ymin,r=A+(ba=K)*T)}else if(0<z){if(J>=this.ymax)return null;(K=(this.ymax-J)/z)<ba&&(Y=this.ymax,r=A+(ba=K)*T)}if(0<T){if(A>=this.xmax)return null;(K=(this.xmax-A)/T)<ba&&(r=this.xmax,Y=J+K*z)}else if(0>T){if(A<=this.xmin)return null;(K=(this.xmin-A)/T)<ba&&(r=this.xmin,Y=
J+K*z)}return[r,Y]}_edgecode(A,J){return(A===this.xmin?1:A===this.xmax?2:0)|(J===this.ymin?4:J===this.ymax?8:0)}_regioncode(A,J){return(A<this.xmin?1:A>this.xmax?2:0)|(J<this.ymin?4:J>this.ymax?8:0)}}const v=2*Math.PI,O=Math.pow;class N{static from(A,J=aa,T=X,z){if("length"in A){const ba=A.length,K=new Float64Array(2*ba);for(let r=0;r<ba;++r){const Y=A[r];K[2*r]=J.call(z,Y,r,A);K[2*r+1]=T.call(z,Y,r,A)}A=K}else A=Float64Array.from(F(A,J,T,z));return new N(A)}constructor(A){this._delaunator=new x(A);
this.inedges=new Int32Array(A.length/2);this._hullIndex=new Int32Array(A.length/2);this.points=this._delaunator.coords;this._init()}update(){this._delaunator.update();this._init();return this}_init(){var A=this._delaunator;const J=this.points;if(A.hull&&2<A.hull.length&&S(A)){this.collinear=Int32Array.from({length:J.length/2},(r,Y)=>Y).sort((r,Y)=>J[2*r]-J[2*Y]||J[2*r+1]-J[2*Y+1]);A=this.collinear[0];var T=this.collinear[this.collinear.length-1];A=[J[2*A],J[2*A+1],J[2*T],J[2*T+1]];A=1E-8*Math.hypot(A[3]-
A[1],A[2]-A[0]);for(let r=0,Y=J.length/2;r<Y;++r)T=V(J[2*r],J[2*r+1],A),J[2*r]=T[0],J[2*r+1]=T[1];this._delaunator=new x(J)}else delete this.collinear;A=this.halfedges=this._delaunator.halfedges;T=this.hull=this._delaunator.hull;const z=this.triangles=this._delaunator.triangles,ba=this.inedges.fill(-1),K=this._hullIndex.fill(-1);for(let r=0,Y=A.length;r<Y;++r){const Z=z[2===r%3?r-2:r+1];if(-1===A[r]||-1===ba[Z])ba[Z]=r}for(let r=0,Y=T.length;r<Y;++r)K[T[r]]=r;2>=T.length&&0<T.length&&(this.triangles=
(new Int32Array(3)).fill(-1),this.halfedges=(new Int32Array(3)).fill(-1),this.triangles[0]=T[0],this.triangles[1]=T[1],this.triangles[2]=T[1],ba[T[0]]=1,2===T.length&&(ba[T[1]]=0))}voronoi(A){return new B(this,A)}*neighbors(A){const {inedges:J,hull:T,_hullIndex:z,halfedges:ba,triangles:K,collinear:r}=this;if(r){var Y=r.indexOf(A);0<Y&&(yield r[Y-1]);Y<r.length-1&&(yield r[Y+1])}else{var Z=J[A];if(-1!==Z){var E=Z;do{yield(Y=K[E]);E=2===E%3?E-2:E+1;if(K[E]!==A)break;E=ba[E];if(-1===E){A=T[(z[A]+1)%
T.length];A!==Y&&(yield A);break}}while(E!==Z)}}}find(A,J,T=0){if((A=+A,A!==A)||(J=+J,J!==J))return-1;const z=T;let ba;for(;0<=(ba=this._step(T,A,J))&&ba!==T&&ba!==z;)T=ba;return ba}_step(A,J,T){const {inedges:z,hull:ba,_hullIndex:K,halfedges:r,triangles:Y,points:Z}=this;if(-1===z[A]||!Z.length)return(A+1)%(Z.length>>1);let E=A,C=O(J-Z[2*A],2)+O(T-Z[2*A+1],2);const W=z[A];let fa=W;do{let ja=Y[fa];const Ba=O(J-Z[2*ja],2)+O(T-Z[2*ja+1],2);Ba<C&&(C=Ba,E=ja);fa=2===fa%3?fa-2:fa+1;if(Y[fa]!==A)break;fa=
r[fa];if(-1===fa){fa=ba[(K[A]+1)%ba.length];if(fa!==ja&&O(J-Z[2*fa],2)+O(T-Z[2*fa+1],2)<C)return fa;break}}while(fa!==W);return E}render(A){const J=null==A?A=new I:void 0,{points:T,halfedges:z,triangles:ba}=this;for(let r=0,Y=z.length;r<Y;++r){var K=z[r];if(K<r)continue;const Z=2*ba[r];K=2*ba[K];A.moveTo(T[Z],T[Z+1]);A.lineTo(T[K],T[K+1])}this.renderHull(A);return J&&J.value()}renderPoints(A,J=2){const T=null==A?A=new I:void 0,{points:z}=this;for(let ba=0,K=z.length;ba<K;ba+=2){const r=z[ba],Y=z[ba+
1];A.moveTo(r+J,Y);A.arc(r,Y,J,0,v)}return T&&T.value()}renderHull(A){const J=null==A?A=new I:void 0,{hull:T,points:z}=this;var ba=2*T[0];const K=T.length;A.moveTo(z[ba],z[ba+1]);for(ba=1;ba<K;++ba){const r=2*T[ba];A.lineTo(z[r],z[r+1])}A.closePath();return J&&J.value()}hullPolygon(){const A=new R;this.renderHull(A);return A.value()}renderTriangle(A,J){const T=null==J?J=new I:void 0,{points:z,triangles:ba}=this,K=2*ba[A*=3],r=2*ba[A+1];A=2*ba[A+2];J.moveTo(z[K],z[K+1]);J.lineTo(z[r],z[r+1]);J.lineTo(z[A],
z[A+1]);J.closePath();return T&&T.value()}*trianglePolygons(){const {triangles:A}=this;for(let J=0,T=A.length/3;J<T;++J)yield this.trianglePolygon(J)}trianglePolygon(A){const J=new R;this.renderTriangle(A,J);return J.value()}}k.Delaunay=N;k.Voronoi=B;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[544]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(517),da(503),da(543)):"function"===typeof define&&define.amd?define(["exports","vega-dataflow","vega-util","d3-delaunay"],f):(k="undefined"!==typeof globalThis?globalThis:k||self,f((k.vega=k.vega||{},k.vega.transforms={}),k.vega,k.vega,k.d3))})(this,function(k,f,h,l){function u(D){f.Transform.call(this,null,D)}u.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",
required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,"default":[[-1E5,-1E5],[1E5,1E5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string","default":"path"}]};const q=[-1E5,-1E5,1E5,1E5];h.inherits(u,f.Transform,{transform(D,U){const aa=D.as||"path",X=U.source;if(!X||!X.length)return U;var S=D.size;S=S?[0,0,S[0],S[1]]:(S=D.extent)?[S[0][0],S[0][1],S[1][0],S[1][1]]:q;S=this.value=l.Delaunay.from(X,
D.x,D.y).voronoi(S);for(let t=0,w=X.length;t<w;++t){var V=S.cellPolygon(t),F=X[t];if(V){const x=V[0][0],I=V[0][1];let R=V.length-1;for(;V[R][0]===x&&V[R][1]===I;--R);V="M"+V.slice(0,R+1).join("L")+"Z"}else V=null;F[aa]=V}return U.reflow(D.modified()).modifies(aa)}});k.voronoi=u;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[545]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(522),da(517),da(503),da(526),da(518)):"function"===typeof define&&define.amd?define("exports vega-canvas vega-dataflow vega-util vega-scale vega-statistics".split(" "),f):(k="undefined"!==typeof globalThis?globalThis:k||self,f((k.vega=k.vega||{},k.vega.transforms={}),k.vega,k.vega,k.vega,k.vega,k.vega))})(this,function(k,f,h,l,u,q){function D(){function R(E){E.width=E.height=1;var C=Math.sqrt(E.getContext("2d").getImageData(0,
0,1,1).data.length>>2);E.width=2048/C;E.height=2048/C;E=E.getContext("2d");E.fillStyle=E.strokeStyle="red";E.textAlign="center";return{context:E,ratio:C}}function B(E,C,W){for(var fa=C.x,ja=C.y,Ba=Math.sqrt(v[0]*v[0]+v[1]*v[1]),Ga=K(v),ua=.5>Y()?1:-1,Fa=-ua,Xa,Sa;Xa=Ga(Fa+=ua);){Sa=~~Xa[0];Xa=~~Xa[1];if(Math.min(Math.abs(Sa),Math.abs(Xa))>=Ba)break;C.x=fa+Sa;C.y=ja+Xa;if(!(0>C.x+C.x0||0>C.y+C.y0||C.x+C.x1>v[0]||C.y+C.y1>v[1])){if(!(Sa=!W)){a:{Sa=v[0];Sa>>=5;Xa=C.sprite;var eb=C.width>>5;var Va=C.x-
(eb<<4);for(var La=Va&127,Ra=32-La,la=C.y1-C.y0,ma=(C.y+C.y0)*Sa+(Va>>5),Aa=0;Aa<la;Aa++){for(var Da=Va=0;Da<=eb;Da++)if((Va<<Ra|(Da<eb?(Va=Xa[Aa*eb+Da])>>>La:0))&E[ma+Da]){Sa=!0;break a}ma+=Sa}Sa=!1}Sa=!Sa}if(Sa&&(!W||C.x+C.x1>W[0].x&&C.x+C.x0<W[1].x&&C.y+C.y1>W[0].y&&C.y+C.y0<W[1].y)){W=C.sprite;fa=C.width>>5;ja=v[0]>>5;Fa=C.x-(fa<<4);Ba=Fa&127;Ga=32-Ba;ua=C.y1-C.y0;Fa=(C.y+C.y0)*ja+(Fa>>5);for(Xa=0;Xa<ua;Xa++){for(eb=Sa=0;eb<=fa;eb++)E[Fa+eb]=E[Fa+eb]|Sa<<Ga|(eb<fa?(Sa=W[Xa*fa+eb])>>>Ba:0);Fa+=
ja}C.sprite=null;return!0}}}return!1}var v=[256,256],O,N,A,J,T,z,ba,K=X,r=[],Y=Math.random,Z={layout:function(){for(var E=R(f.canvas()),C=S((v[0]>>5)*v[1]),W=null,fa=r.length,ja=-1,Ba=[],Ga=r.map(Fa=>({text:O(Fa),font:N(Fa),style:J(Fa),weight:T(Fa),rotate:z(Fa),size:~~(A(Fa)+1E-14),padding:ba(Fa),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:Fa})).sort((Fa,Xa)=>Xa.size-Fa.size);++ja<fa;){var ua=Ga[ja];ua.x=v[0]*(Y()+.5)>>1;ua.y=v[1]*(Y()+.5)>>1;U(E,ua,Ga,ja);ua.hasText&&B(C,ua,W)&&
(Ba.push(ua),W?aa(W,ua):W=[{x:ua.x+ua.x0,y:ua.y+ua.y0},{x:ua.x+ua.x1,y:ua.y+ua.y1}],ua.x-=v[0]>>1,ua.y-=v[1]>>1)}return Ba},words:function(E){return arguments.length?(r=E,Z):r},size:function(E){return arguments.length?(v=[+E[0],+E[1]],Z):v},font:function(E){return arguments.length?(N=V(E),Z):N},fontStyle:function(E){return arguments.length?(J=V(E),Z):J},fontWeight:function(E){return arguments.length?(T=V(E),Z):T},rotate:function(E){return arguments.length?(z=V(E),Z):z},text:function(E){return arguments.length?
(O=V(E),Z):O},spiral:function(E){return arguments.length?(K=w[E]||E,Z):K},fontSize:function(E){return arguments.length?(A=V(E),Z):A},padding:function(E){return arguments.length?(ba=V(E),Z):ba},random:function(E){return arguments.length?(Y=E,Z):Y}};return Z}function U(R,B,v,O){if(!B.sprite){var N=R.context,A=R.ratio;N.clearRect(0,0,2048/A,2048/A);var J=R=0,T=0,z=v.length;for(--O;++O<z;){B=v[O];N.save();N.font=B.style+" "+B.weight+" "+~~((B.size+1)/A)+"px "+B.font;var ba=N.measureText(B.text+"m").width*
A;var K=B.size<<1;if(B.rotate){var r=Math.sin(B.rotate*t),Y=Math.cos(B.rotate*t),Z=ba*Y,E=ba*r;Y*=K;ba=K*r;ba=Math.max(Math.abs(Z+ba),Math.abs(Z-ba))+31>>5<<5;K=~~Math.max(Math.abs(E+Y),Math.abs(E-Y))}else ba=ba+31>>5<<5;K>T&&(T=K);2048<=R+ba&&(R=0,J+=T,T=0);if(2048<=J+K)break;N.translate((R+(ba>>1))/A,(J+(K>>1))/A);B.rotate&&N.rotate(B.rotate*t);N.fillText(B.text,0,0);B.padding&&(N.lineWidth=2*B.padding,N.strokeText(B.text,0,0));N.restore();B.width=ba;B.height=K;B.xoff=R;B.yoff=J;B.x1=ba>>1;B.y1=
K>>1;B.x0=-B.x1;B.y0=-B.y1;B.hasText=!0;R+=ba}z=N.getImageData(0,0,2048/A,2048/A).data;for(Z=[];0<=--O;)if(B=v[O],B.hasText){ba=B.width;N=ba>>5;K=B.y1-B.y0;for(A=0;A<K*N;A++)Z[A]=0;R=B.xoff;if(null==R)break;J=B.yoff;E=0;r=-1;for(T=0;T<K;T++){for(A=0;A<ba;A++)Y=z[2048*(J+T)+(R+A)<<2]?1<<31-A%32:0,Z[N*T+(A>>5)]|=Y,E|=Y;E?r=T:(B.y0++,K--,T--,J++)}B.y1=B.y0+r;B.sprite=Z.slice(0,(B.y1-B.y0)*N)}}}function aa(R,B){var v=R[0];R=R[1];B.x+B.x0<v.x&&(v.x=B.x+B.x0);B.y+B.y0<v.y&&(v.y=B.y+B.y0);B.x+B.x1>R.x&&
(R.x=B.x+B.x1);B.y+B.y1>R.y&&(R.y=B.y+B.y1)}function X(R){var B=R[0]/R[1];return function(v){return[B*(v*=.1)*Math.cos(v),v*Math.sin(v)]}}function S(R){for(var B=[],v=-1;++v<R;)B[v]=0;return B}function V(R){return"function"===typeof R?R:function(){return R}}function F(R){h.Transform.call(this,D(),R)}var t=Math.PI/180,w={archimedean:X,rectangular:function(R){var B=4*R[0]/R[1],v=0,O=0;return function(N){var A=0>N?-1:1;switch(Math.sqrt(1+4*A*N)-A&3){case 0:v+=B;break;case 1:O+=4;break;case 2:v-=B;break;
default:O-=4}return[v,O]}}};const x="x y font fontSize fontStyle fontWeight angle".split(" "),I="text font rotate fontSize fontStyle fontWeight".split(" ");F.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,"default":"sans-serif"},{name:"fontStyle",type:"string",expr:!0,"default":"normal"},{name:"fontWeight",type:"string",expr:!0,"default":"normal"},{name:"fontSize",type:"number",expr:!0,"default":14},{name:"fontSizeRange",
type:"number",array:"nullable","default":[10,50]},{name:"rotate",type:"number",expr:!0,"default":0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,"default":x}]};l.inherits(F,h.Transform,{transform(R,B){function v(ba){ba=R[ba];return l.isFunction(ba)&&B.modified(ba.fields)}!R.size||R.size[0]&&R.size[1]||l.error("Wordcloud size dimensions must be non-zero.");const O=R.modified();
if(O||B.changed(B.ADD_REM)||I.some(v)){var N=B.materialize(B.SOURCE).source,A=this.value,J=R.as||x,T=R.fontSize||14,z;l.isFunction(T)?z=R.fontSizeRange:T=l.constant(T);if(z){const ba=T,K=u.scale("sqrt")().domain(l.extent(N,ba)).range(z);T=r=>K(ba(r))}N.forEach(ba=>{ba[J[0]]=NaN;ba[J[1]]=NaN;ba[J[3]]=0});N=A.words(N).text(R.text).size(R.size||[500,500]).padding(R.padding||1).spiral(R.spiral||"archimedean").rotate(R.rotate||0).font(R.font||"sans-serif").fontStyle(R.fontStyle||"normal").fontWeight(R.fontWeight||
"normal").fontSize(T).random(q.random).layout();T=A.size();A=T[0]>>1;T=T[1]>>1;z=N.length;for(let ba=0,K,r;ba<z;++ba)K=N[ba],r=K.datum,r[J[0]]=K.x+A,r[J[1]]=K.y+T,r[J[2]]=K.font,r[J[3]]=K.size,r[J[4]]=K.style,r[J[5]]=K.weight,r[J[6]]=K.rotate;return B.reflow(O).modifies(J)}}});k.wordcloud=F;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[546]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(506),da(517),da(503)):"function"===typeof define&&define.amd?define(["exports","d3-array","vega-dataflow","vega-util"],f):(k="undefined"!==typeof globalThis?globalThis:k||self,f((k.vega=k.vega||{},k.vega.transforms={}),k.d3,k.vega,k.vega))})(this,function(k,f,h,l){function u(){let w=8,x=[],I=new Uint32Array(0),R=q(0,w),B=q(0,w);return{data:()=>x,seen:()=>{var v=I;var O=x.length;v.length>=
O||(O=new v.constructor(O),O.set(v),v=O);return I=v},add(v){for(let O=0,N=x.length,A=v.length,J;O<A;++O)J=v[O],J._index=N++,x.push(J)},remove(v,O){const N=x.length;v=Array(N-v);const A=x;let J,T,z;for(T=0;!O[T]&&T<N;++T)v[T]=x[T],A[T]=T;for(z=T;T<N;++T)J=x[T],O[T]?A[T]=-1:(A[T]=z,R[z]=R[T],B[z]=B[T],v[z]=J,J._index=z++),R[T]=0;x=v;return A},size:()=>x.length,curr:()=>R,prev:()=>B,reset:v=>B[v]=R[v],all:()=>257>w?255:65537>w?65535:4294967295,set(v,O){R[v]|=O},clear(v,O){R[v]&=~O},resize(v,O){if(v>
R.length||O>w)w=Math.max(O,w),R=q(v,w,R),B=q(v,w)}}}function q(w,x,I){w=(257>x?V:65537>x?F:t)(w);I&&w.set(I);return w}function D(w,x,I){const R=1<<x;return{one:R,zero:~R,range:I.slice(),bisect:w.bisect,index:w.index,size:w.size,onAdd(B,v){var O=this.bisect(this.range,B.value);B=B.index;const N=O[0];O=O[1];const A=B.length;let J;for(J=0;J<N;++J)v[B[J]]|=R;for(J=O;J<A;++J)v[B[J]]|=R;return this}}}function U(){let w=new Uint32Array(0),x=[],I=0;return{insert:function(R,B,v){if(!B.length)return[];const O=
I,N=B.length,A=new Uint32Array(N);let J=Array(N);var T;for(T=0;T<N;++T)J[T]=R(B[T]),A[T]=T;J=aa(J,A);if(O){R=x;B=w;x=Array(O+N);w=new Uint32Array(O+N);T=J;var z=x,ba=w;let K=0,r=0,Y;for(Y=0;K<O&&r<N;++Y)R[K]<T[r]?(z[Y]=R[K],ba[Y]=B[K++]):(z[Y]=T[r],ba[Y]=A[r++]+v);for(;K<O;++K,++Y)z[Y]=R[K],ba[Y]=B[K];for(;r<N;++r,++Y)z[Y]=T[r],ba[Y]=A[r]+v}else{if(0<v)for(T=0;T<N;++T)A[T]+=v;x=J;w=A}I=O+N;return{index:A,value:J}},remove:function(R,B){const v=I;let O,N,A;for(N=0;!B[w[N]]&&N<v;++N);for(A=N;N<v;++N)B[O=
w[N]]||(w[A]=O,x[A]=x[N],++A);I=v-R},bisect:function(R,B){let v;B?v=B.length:(B=x,v=I);return[f.bisectLeft(B,R[0],0,v),f.bisectRight(B,R[1],0,v)]},reindex:function(R){for(let B=0,v=I;B<v;++B)w[B]=R[w[B]]},index:()=>w,size:()=>I}}function aa(w,x){w.sort.call(x,(I,R)=>{I=w[I];R=w[R];return I<R?-1:I>R?1:0});return f.permute(w,x)}function X(w){h.Transform.call(this,u(),w);this._dims=this._indices=null}function S(w){h.Transform.call(this,null,w)}const V=w=>new Uint8Array(w),F=w=>new Uint16Array(w),t=w=>
new Uint32Array(w);X.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};l.inherits(X,h.Transform,{transform(w,x){return this._dims?w.modified("fields")||w.fields.some(I=>x.modified(I.fields))?this.reinit(w,x):this.eval(w,x):this.init(w,x)},init(w,x){const I=w.fields,R=w.query,B=this._indices={},v=this._dims=[],O=R.length;let N=0;for(var A;N<O;++N)A=I[N].fname,
A=B[A]||(B[A]=U()),v.push(D(A,N,R[N]));return this.eval(w,x)},reinit(w,x){const I=x.materialize().fork(),R=w.fields,B=w.query,v=this._indices,O=this._dims,N=this.value,A=N.curr(),J=N.prev(),T=N.all(),z=I.rem=I.add,ba=I.mod,K=B.length,r={};let Y;var Z;let E,C,W,fa;J.set(A);x.rem.length&&(E=this.remove(w,x,I));x.add.length&&N.add(x.add);if(x.mod.length){C={};var ja=x.mod;W=0;for(Z=ja.length;W<Z;++W)C[ja[W]._index]=1}for(W=0;W<K;++W)if(fa=R[W],!O[W]||w.modified("fields",W)||x.modified(fa.fields))Z=fa.fname,
(ja=r[Z])||(v[Z]=Y=U(),r[Z]=ja=Y.insert(fa,x.source,0)),O[W]=D(Y,W,B[W]).onAdd(ja,A);W=0;for(Z=N.data().length;W<Z;++W)E[W]||(J[W]!==A[W]?z.push(W):C[W]&&A[W]!==T&&ba.push(W));N.mask=(1<<K)-1;return I},eval(w,x){const I=x.materialize().fork(),R=this._dims.length;let B=0;x.rem.length&&(this.remove(w,x,I),B|=(1<<R)-1);w.modified("query")&&!w.modified("fields")&&(B|=this.update(w,x,I));x.add.length&&(this.insert(w,x,I),B|=(1<<R)-1);x.mod.length&&(this.modify(x,I),B|=(1<<R)-1);this.value.mask=B;return I},
insert(w,x,I){x=x.add;var R=this.value;const B=this._dims,v=this._indices;w=w.fields;const O={};I=I.add;const N=R.size()+x.length,A=B.length;let J=R.size();R.resize(N,A);R.add(x);const T=R.curr(),z=R.prev(),ba=R.all();for(R=0;R<A;++R){var K=w[R].fname;K=O[K]||(O[K]=v[K].insert(w[R],x,J));B[R].onAdd(K,T)}for(;J<N;++J)z[J]=ba,T[J]!==ba&&I.push(J)},modify(w,x){x=x.mod;var I=this.value;const R=I.curr();I=I.all();w=w.mod;let B,v,O;B=0;for(v=w.length;B<v;++B)O=w[B]._index,R[O]!==I&&x.push(O)},remove(w,
x,I){w=this._indices;var R=this.value;const B=R.curr(),v=R.prev();R=R.all();const O={};I=I.rem;const N=x.rem;let A,J,T,z;A=0;for(J=N.length;A<J;++A)T=N[A]._index,O[T]=1,v[T]=z=B[T],B[T]=R,z!==R&&I.push(T);for(T in w)w[T].remove(J,O);this.reindex(x,J,O);return O},reindex(w,x,I){const R=this._indices,B=this.value;w.runAfter(()=>{const v=B.remove(x,I);for(const O in R)R[O].reindex(v)})},update(w,x,I){const R=this._dims,B=w.query;x=x.stamp;const v=R.length;let O=0,N,A;for(A=I.filters=0;A<v;++A)w.modified("query",
A)&&(N=A,++O);if(1===O)O=R[N].one,this.incrementOne(R[N],B[N],I.add,I.rem);else for(O=A=0;A<v;++A)w.modified("query",A)&&(O|=R[A].one,this.incrementAll(R[A],B[A],x,I.add),I.rem=I.add);return O},incrementAll(w,x,I,R){var B=this.value;const v=B.seen(),O=B.curr();B=B.prev();const N=w.index();var A=w.bisect(w.range),J=w.bisect(x);const T=J[0];J=J[1];const z=A[0];A=A[1];const ba=w.one;let K,r,Y;if(T<z)for(K=T,r=Math.min(z,J);K<r;++K)Y=N[K],v[Y]!==I&&(B[Y]=O[Y],v[Y]=I,R.push(Y)),O[Y]^=ba;else if(T>z)for(K=
z,r=Math.min(T,A);K<r;++K)Y=N[K],v[Y]!==I&&(B[Y]=O[Y],v[Y]=I,R.push(Y)),O[Y]^=ba;if(J>A)for(K=Math.max(T,A),r=J;K<r;++K)Y=N[K],v[Y]!==I&&(B[Y]=O[Y],v[Y]=I,R.push(Y)),O[Y]^=ba;else if(J<A)for(K=Math.max(z,J),r=A;K<r;++K)Y=N[K],v[Y]!==I&&(B[Y]=O[Y],v[Y]=I,R.push(Y)),O[Y]^=ba;w.range=x.slice()},incrementOne(w,x,I,R){const B=this.value.curr(),v=w.index();var O=w.bisect(w.range),N=w.bisect(x);const A=N[0];N=N[1];const J=O[0];O=O[1];const T=w.one;let z,ba,K;if(A<J)for(z=A,ba=Math.min(J,N);z<ba;++z)K=v[z],
B[K]^=T,I.push(K);else if(A>J)for(z=J,ba=Math.min(A,O);z<ba;++z)K=v[z],B[K]^=T,R.push(K);if(N>O)for(z=Math.max(A,O),ba=N;z<ba;++z)K=v[z],B[K]^=T,I.push(K);else if(N<O)for(z=Math.max(J,N),ba=O;z<ba;++z)K=v[z],B[K]^=T,R.push(K);w.range=x.slice()}});S.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};
l.inherits(S,h.Transform,{transform(w,x){const I=~(w.ignore||0);w=w.filter;const R=w.mask;if(0===(R&I))return x.StopPropagation;x=x.fork(x.ALL);const B=w.data(),v=w.curr(),O=w.prev(),N=A=>v[A]&I?null:B[A];x.filter(x.MOD,N);R&R-1?(x.filter(x.ADD,A=>{const J=v[A]&I;return!J&&J^O[A]&I?B[A]:null}),x.filter(x.REM,A=>{const J=v[A]&I;return!J||J^J^O[A]&I?null:B[A]})):(x.filter(x.ADD,N),x.filter(x.REM,A=>(v[A]&I)===R?B[A]:null));return x.filter(x.SOURCE,A=>N(A._index))}});k.crossfilter=X;k.resolvefilter=
S;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[547]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(503)):"function"===typeof define&&define.amd?define(["exports","vega-util"],f):(k="undefined"!==typeof globalThis?globalThis:k||self,f(k.vega={},k.vega))})(this,function(k,f){function h(la){this.type=la}function l(la){switch(la.type){case "ArrayExpression":return la.elements;case "BinaryExpression":case "LogicalExpression":return[la.left,la.right];case "CallExpression":return[la.callee].concat(la.arguments);
case "ConditionalExpression":return[la.test,la.consequent,la.alternate];case "MemberExpression":return[la.object,la.property];case "ObjectExpression":return la.properties;case "Property":return[la.key,la.value];case "UnaryExpression":return[la.argument];default:return[]}}function u(la,ma){if(!la)throw Error("ASSERT: "+ma);}function q(la){return 48<=la&&57>=la}function D(la){return 0<="0123456789abcdefABCDEF".indexOf(la)}function U(la){return 0<="01234567".indexOf(la)}function aa(la){return 10===la||
13===la||8232===la||8233===la}function X(la){return 36===la||95===la||65<=la&&90>=la||97<=la&&122>=la||92===la||128<=la&&Sa.test(String.fromCharCode(la))}function S(la){return 36===la||95===la||65<=la&&90>=la||97<=la&&122>=la||48<=la&&57>=la||92===la||128<=la&&eb.test(String.fromCharCode(la))}function V(){for(;ua<Fa;){const la=Ga.charCodeAt(ua);if(32===la||9===la||11===la||12===la||160===la||5760<=la&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(la)||
aa(la))++ua;else break}}function F(la){var ma=0;var Aa="u"===la?4:2;for(la=0;la<Aa;++la)if(ua<Fa&&D(Ga[ua])){var Da=Ga[ua++];ma=16*ma+"0123456789abcdef".indexOf(Da.toLowerCase())}else z({},"Unexpected token %0","ILLEGAL");return String.fromCharCode(ma)}function t(){var la=Ga.charCodeAt(ua++);var ma=String.fromCharCode(la);92===la&&(117!==Ga.charCodeAt(ua)&&z({},"Unexpected token %0","ILLEGAL"),++ua,(la=F("u"))&&"\\"!==la&&X(la.charCodeAt(0))||z({},"Unexpected token %0","ILLEGAL"),ma=la);for(;ua<Fa;){la=
Ga.charCodeAt(ua);if(!S(la))break;++ua;ma+=String.fromCharCode(la);92===la&&(ma=ma.substr(0,ma.length-1),117!==Ga.charCodeAt(ua)&&z({},"Unexpected token %0","ILLEGAL"),++ua,(la=F("u"))&&"\\"!==la&&S(la.charCodeAt(0))||z({},"Unexpected token %0","ILLEGAL"),ma+=la)}return ma}function w(){var la=ua,ma=Ga.charCodeAt(ua),Aa=Ga[ua];switch(ma){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++ua,{type:7,value:String.fromCharCode(ma),start:la,end:ua};
default:var Da=Ga.charCodeAt(ua+1);if(61===Da)switch(ma){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return ua+=2,{type:7,value:String.fromCharCode(ma)+String.fromCharCode(Da),start:la,end:ua};case 33:case 61:return ua+=2,61===Ga.charCodeAt(ua)&&++ua,{type:7,value:Ga.slice(la,ua),start:la,end:ua}}}ma=Ga.substr(ua,4);if("\x3e\x3e\x3e\x3d"===ma)return ua+=4,{type:7,value:ma,start:la,end:ua};ma=ma.substr(0,3);if("\x3e\x3e\x3e"===ma||"\x3c\x3c\x3d"===ma||"\x3e\x3e\x3d"===
ma)return ua+=3,{type:7,value:ma,start:la,end:ua};ma=ma.substr(0,2);if(Aa===ma[1]&&0<="+-\x3c\x3e\x26|".indexOf(Aa)||"\x3d\x3e"===ma)return ua+=2,{type:7,value:ma,start:la,end:ua};"//"===ma&&z({},"Unexpected token %0","ILLEGAL");if(0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(Aa))return++ua,{type:7,value:Aa,start:la,end:ua};z({},"Unexpected token %0","ILLEGAL")}function x(){var la=Ga[ua];u(q(la.charCodeAt(0))||"."===la,"Numeric literal must start with a decimal digit or a decimal point");var ma=ua;var Aa=
"";if("."!==la){Aa=Ga[ua++];la=Ga[ua];if("0"===Aa){if("x"===la||"X"===la){++ua;for(Aa="";ua<Fa&&D(Ga[ua]);)Aa+=Ga[ua++];0===Aa.length&&z({},"Unexpected token %0","ILLEGAL");X(Ga.charCodeAt(ua))&&z({},"Unexpected token %0","ILLEGAL");return{type:6,value:parseInt("0x"+Aa,16),start:ma,end:ua}}if(U(la)){for(Aa="0"+Ga[ua++];ua<Fa&&U(Ga[ua]);)Aa+=Ga[ua++];(X(Ga.charCodeAt(ua))||q(Ga.charCodeAt(ua)))&&z({},"Unexpected token %0","ILLEGAL");return{type:6,value:parseInt(Aa,8),octal:!0,start:ma,end:ua}}la&&
q(la.charCodeAt(0))&&z({},"Unexpected token %0","ILLEGAL")}for(;q(Ga.charCodeAt(ua));)Aa+=Ga[ua++];la=Ga[ua]}if("."===la){for(Aa+=Ga[ua++];q(Ga.charCodeAt(ua));)Aa+=Ga[ua++];la=Ga[ua]}if("e"===la||"E"===la){Aa+=Ga[ua++];la=Ga[ua];if("+"===la||"-"===la)Aa+=Ga[ua++];if(q(Ga.charCodeAt(ua)))for(;q(Ga.charCodeAt(ua));)Aa+=Ga[ua++];else z({},"Unexpected token %0","ILLEGAL")}X(Ga.charCodeAt(ua))&&z({},"Unexpected token %0","ILLEGAL");return{type:6,value:parseFloat(Aa),start:ma,end:ua}}function I(la,ma){let Aa=
la;0<=ma.indexOf("u")&&(Aa=Aa.replace(/\\u\{([0-9a-fA-F]+)\}/g,(Da,Qa)=>{if(1114111>=parseInt(Qa,16))return"x";z({},"Invalid regular expression")}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(Aa)}catch(Da){z({},"Invalid regular expression")}try{return new RegExp(la,ma)}catch(Da){return null}}function R(){V();if(ua>=Fa)return{type:2,start:ua,end:ua};var la=Ga.charCodeAt(ua);if(X(la)){la=ua;if(92===Ga.charCodeAt(ua))var ma=t();else a:{for(ma=ua++;ua<Fa;){var Aa=Ga.charCodeAt(ua);
if(92===Aa){ua=ma;ma=t();break a}if(S(Aa))++ua;else break}ma=Ga.slice(ma,ua)}return{type:1===ma.length?3:Va.hasOwnProperty(ma)?4:"null"===ma?5:"true"===ma||"false"===ma?1:3,value:ma,start:la,end:ua}}if(40===la||41===la||59===la)return w();if(39===la||34===la){var Da="";Aa=!1;la=Ga[ua];u("'"===la||'"'===la,"String literal must starts with a quote");ma=ua;for(++ua;ua<Fa;){var Qa=Ga[ua++];if(Qa===la){la="";break}else if("\\"===Qa)if((Qa=Ga[ua++])&&aa(Qa.charCodeAt(0)))"\r"===Qa&&"\n"===Ga[ua]&&++ua;
else switch(Qa){case "u":case "x":if("{"===Ga[ua]){++ua;var Ea=Ga[ua];Qa=0;for("}"===Ea&&z({},"Unexpected token %0","ILLEGAL");ua<Fa;){Ea=Ga[ua++];if(!D(Ea))break;Qa=16*Qa+"0123456789abcdef".indexOf(Ea.toLowerCase())}(1114111<Qa||"}"!==Ea)&&z({},"Unexpected token %0","ILLEGAL");Qa=65535>=Qa?String.fromCharCode(Qa):String.fromCharCode((Qa-65536>>10)+55296,(Qa-65536&1023)+56320);Da+=Qa}else Da+=F(Qa);break;case "n":Da+="\n";break;case "r":Da+="\r";break;case "t":Da+="\t";break;case "b":Da+="\b";break;
case "f":Da+="\f";break;case "v":Da+="\x0B";break;default:U(Qa)?(Ea="01234567".indexOf(Qa),0!==Ea&&(Aa=!0),ua<Fa&&U(Ga[ua])&&(Aa=!0,Ea=8*Ea+"01234567".indexOf(Ga[ua++]),0<="0123".indexOf(Qa)&&ua<Fa&&U(Ga[ua])&&(Ea=8*Ea+"01234567".indexOf(Ga[ua++]))),Da+=String.fromCharCode(Ea)):Da+=Qa}else if(aa(Qa.charCodeAt(0)))break;else Da+=Qa}""!==la&&z({},"Unexpected token %0","ILLEGAL");return{type:8,value:Da,octal:Aa,start:ma,end:ua}}return 46===la?q(Ga.charCodeAt(ua+1))?x():w():q(la)?x():w()}function B(){const la=
Xa;ua=la.end;Xa=R();ua=la.end;return la}function v(){const la=ua;Xa=R();ua=la}function O(la,ma,Aa){const Da=new h("||"===la||"\x26\x26"===la?"LogicalExpression":"BinaryExpression");Da.operator=la;Da.left=ma;Da.right=Aa;return Da}function N(la){const ma=new h("Identifier");ma.name=la;return ma}function A(la){const ma=new h("Literal");ma.value=la.value;ma.raw=Ga.slice(la.start,la.end);la.regex&&("//"===ma.raw&&(ma.raw="/(?:)/"),ma.regex=la.regex);return ma}function J(la,ma,Aa){const Da=new h("MemberExpression");
Da.computed="["===la;Da.object=ma;Da.property=Aa;Da.computed||(Aa.member=!0);return Da}function T(la,ma,Aa){const Da=new h("Property");Da.key=ma;Da.value=Aa;Da.kind=la;return Da}function z(la,ma){var Aa=Array.prototype.slice.call(arguments,2),Da=ma.replace(/%(\d)/g,(Ea,kb)=>{u(kb<Aa.length,"Message reference must be in range");return Aa[kb]});var Qa=Error(Da);Qa.index=ua;Qa.description=Da;throw Qa;}function ba(la){2===la.type&&z(la,"Unexpected end of input");6===la.type&&z(la,"Unexpected number");
8===la.type&&z(la,"Unexpected string");3===la.type&&z(la,"Unexpected identifier");4===la.type&&z(la,"Unexpected reserved word");z(la,"Unexpected token %0",la.value)}function K(la){const ma=B();7===ma.type&&ma.value===la||ba(ma)}function r(la){return 7===Xa.type&&Xa.value===la}function Y(){ua=Xa.start;const la=B();return 8===la.type||6===la.type?(la.octal&&z(la,"Octal literals are not allowed in strict mode."),A(la)):N(la.value)}function Z(){if(r("(")){K("(");var la=ja();K(")");return la}if(r("[")){la=
[];ua=Xa.start;for(K("[");!r("]");)r(",")?(B(),la.push(null)):(la.push(fa()),r("]")||K(","));B();var ma=new h("ArrayExpression");ma.elements=la;return ma}if(r("{")){la=[];ma={};var Aa=String;ua=Xa.start;for(K("{");!r("}");){ua=Xa.start;var Da=Xa;if(3===Da.type){var Qa=Y();K(":");Da=fa();Da=T("init",Qa,Da)}else 2===Da.type||7===Da.type?(ba(Da),Da=void 0):(Qa=Y(),K(":"),Da=fa(),Da=T("init",Qa,Da));Qa="Identifier"===Da.key.type?Da.key.name:Aa(Da.key.value);Qa="$"+Qa;Object.prototype.hasOwnProperty.call(ma,
Qa)?z({},"Duplicate data property in object literal not allowed in strict mode"):ma[Qa]=!0;la.push(Da);r("}")||K(",")}K("}");ma=new h("ObjectExpression");ma.properties=la;return ma}la=Xa.type;ua=Xa.start;if(3===la||La[Xa.value])ma=N(B().value);else if(8===la||6===la)Xa.octal&&z(Xa,"Octal literals are not allowed in strict mode."),ma=A(B());else{if(4===la)throw Error("Disabled.");if(1===la)la=B(),la.value="true"===la.value,ma=A(la);else if(5===la)la=B(),la.value=null,ma=A(la);else if(r("/")||r("/\x3d")){var Ea;
Xa=null;V();la=ua;ma=Ga[ua];u("/"===ma,"Regular expression literal must start with a slash");Aa=Ga[ua++];for(Qa=Da=!1;ua<Fa;)if(ma=Ga[ua++],Aa+=ma,"\\"===ma)ma=Ga[ua++],aa(ma.charCodeAt(0))&&z({},"Invalid regular expression: missing /"),Aa+=ma;else if(aa(ma.charCodeAt(0)))z({},"Invalid regular expression: missing /");else if(Da)"]"===ma&&(Da=!1);else if("/"===ma){Qa=!0;break}else"["===ma&&(Da=!0);Qa||z({},"Invalid regular expression: missing /");ma=Aa.substr(1,Aa.length-2);for(Ea=Qa="";ua<Fa;){Da=
Ga[ua];if(!S(Da.charCodeAt(0)))break;++ua;"\\"===Da&&ua<Fa?z({},"Unexpected token %0","ILLEGAL"):(Ea+=Da,Qa+=Da)}0<=Ea.search(/[^gimuy]/g)&&z({},"Invalid regular expression",Ea);Da=Ea;Ea=I(ma,Da);ma=A({literal:Aa+Qa,value:Ea,regex:{pattern:ma,flags:Da},start:la,end:ua});v()}else ba(B())}return ma}function E(){var la;for(la=Z();;)if(r(".")){K(".");ua=Xa.start;var ma=B();3===ma.type||4===ma.type||1===ma.type||5===ma.type||ba(ma);ma=N(ma.value);la=J(".",la,ma)}else if(r("(")){ma=[];K("(");if(!r(")"))for(;ua<
Fa;){ma.push(fa());if(r(")"))break;K(",")}K(")");const Aa=new h("CallExpression");Aa.callee=la;Aa.arguments=ma;la=Aa}else if(r("["))K("["),ma=ja(),K("]"),la=J("[",la,ma);else break;if(7===Xa.type&&(r("++")||r("--")))throw Error("Disabled.");return la}function C(){if(7!==Xa.type&&4!==Xa.type)var la=E();else{if(r("++")||r("--"))throw Error("Disabled.");if(r("+")||r("-")||r("~")||r("!")){var ma=B();la=C();ma=ma.value;const Aa=new h("UnaryExpression");Aa.operator=ma;Aa.argument=la;Aa.prefix=!0;la=Aa}else{if(4===
Xa.type&&"delete"===Xa.value||4===Xa.type&&"void"===Xa.value||4===Xa.type&&"typeof"===Xa.value)throw Error("Disabled.");la=E()}}return la}function W(la){let ma=0;if(7!==la.type&&4!==la.type)return 0;switch(la.value){case "||":ma=1;break;case "\x26\x26":ma=2;break;case "|":ma=3;break;case "^":ma=4;break;case "\x26":ma=5;break;case "\x3d\x3d":case "!\x3d":case "\x3d\x3d\x3d":case "!\x3d\x3d":ma=6;break;case "\x3c":case "\x3e":case "\x3c\x3d":case "\x3e\x3d":case "instanceof":case "in":ma=7;break;case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":ma=
8;break;case "+":case "-":ma=9;break;case "*":case "/":case "%":ma=11}return ma}function fa(){var la=Xa;var ma=C();var Aa=Xa;var Da=W(Aa);if(0===Da)var Qa=ma;else{Aa.prec=Da;B();la=[la,Xa];var Ea=C();for(Qa=[ma,Aa,Ea];0<(Da=W(Xa));){for(;2<Qa.length&&Da<=Qa[Qa.length-2].prec;)Ea=Qa.pop(),Aa=Qa.pop().value,ma=Qa.pop(),la.pop(),ma=O(Aa,ma,Ea),Qa.push(ma);Aa=B();Aa.prec=Da;Qa.push(Aa);la.push(Xa);ma=C();Qa.push(ma)}Da=Qa.length-1;ma=Qa[Da];for(la.pop();1<Da;)la.pop(),ma=O(Qa[Da-1].value,Qa[Da-2],ma),
Da-=2;Qa=ma}r("?")&&(B(),la=fa(),K(":"),Da=fa(),ma=new h("ConditionalExpression"),ma.test=Qa,ma.consequent=la,ma.alternate=Da,Qa=ma);return Qa}function ja(){const la=fa();if(r(","))throw Error("Disabled.");return la}function Ba(la){function ma(Aa,Da,Qa){return Ea=>{let kb=la(Ea[0]);Da&&(kb=Da+"("+kb+")",0===Da.lastIndexOf("new ",0)&&(kb="("+kb+")"));return kb+"."+Aa+(0>Qa?"":0===Qa?"()":"("+Ea.slice(1).map(la).join(",")+")")}}return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",
asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(Aa){3>Aa.length&&f.error("Missing arguments to clamp function.");3<Aa.length&&f.error("Too many arguments to clamp function.");Aa=Aa.map(la);return"Math.max("+Aa[1]+", Math.min("+Aa[2]+","+Aa[0]+"))"},now:"Date.now",utc:"Date.UTC",
datetime:"new Date",date:ma("getDate","new Date",0),day:ma("getDay","new Date",0),year:ma("getFullYear","new Date",0),month:ma("getMonth","new Date",0),hours:ma("getHours","new Date",0),minutes:ma("getMinutes","new Date",0),seconds:ma("getSeconds","new Date",0),milliseconds:ma("getMilliseconds","new Date",0),time:ma("getTime","new Date",0),timezoneoffset:ma("getTimezoneOffset","new Date",0),utcdate:ma("getUTCDate","new Date",0),utcday:ma("getUTCDay","new Date",0),utcyear:ma("getUTCFullYear","new Date",
0),utcmonth:ma("getUTCMonth","new Date",0),utchours:ma("getUTCHours","new Date",0),utcminutes:ma("getUTCMinutes","new Date",0),utcseconds:ma("getUTCSeconds","new Date",0),utcmilliseconds:ma("getUTCMilliseconds","new Date",0),length:ma("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:ma("toUpperCase","String",0),lower:ma("toLowerCase","String",0),substring:ma("substring","String"),split:ma("split","String"),trim:ma("trim","String",0),regexp:"RegExp",test:ma("test","RegExp"),if:function(Aa){3>
Aa.length&&f.error("Missing arguments to if function.");3<Aa.length&&f.error("Too many arguments to if function.");Aa=Aa.map(la);return"("+Aa[0]+"?"+Aa[1]+":"+Aa[2]+")"}}}h.prototype.visit=function(la){let ma,Aa,Da;if(la(this))return 1;ma=l(this);Aa=0;for(Da=ma.length;Aa<Da;++Aa)if(ma[Aa].visit(la))return 1};var Ga,ua,Fa,Xa,Sa=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,
eb=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B2\u08E4-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA69D\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2D\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;
const Va={"if":1,"in":1,"do":1,"var":1,"for":1,"new":1,"try":1,let:1,"this":1,"else":1,"case":1,"void":1,"with":1,"enum":1,"while":1,"break":1,"catch":1,"throw":1,"const":1,yield:1,"class":1,"super":1,"return":1,"typeof":1,"delete":1,"switch":1,"export":1,"import":1,"public":1,"static":1,"default":1,"finally":1,"extends":1,"package":1,"private":1,"function":1,"continue":1,"debugger":1,"interface":1,"protected":1,"instanceof":1,"implements":1},La={"if":1};var Ra={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",
LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};k.ASTNode=h;k.ArrayExpression="ArrayExpression";k.BinaryExpression="BinaryExpression";k.CallExpression="CallExpression";k.ConditionalExpression="ConditionalExpression";k.Identifier="Identifier";k.Literal="Literal";k.LogicalExpression="LogicalExpression";k.MemberExpression="MemberExpression";k.ObjectExpression="ObjectExpression";
k.Property="Property";k.RawCode="RawCode";k.UnaryExpression="UnaryExpression";k.codegenExpression=function(la){function ma(Ia){if(f.isString(Ia))return Ia;const bb=xa[Ia.type];null==bb&&f.error("Unsupported type: "+Ia.type);return bb(Ia)}function Aa(Ia){Ia={code:ma(Ia),globals:Object.keys(Wb),fields:Object.keys(sa)};Wb={};sa={};return Ia}la=la||{};const Da=la.allowed?f.toSet(la.allowed):{},Qa=la.forbidden?f.toSet(la.forbidden):{},Ea=la.constants||Ra,kb=(la.functions||Ba)(ma),cb=la.globalvar,Mb=la.fieldvar,
Gb=f.isFunction(cb)?cb:Ia=>`${cb}["${Ia}"]`;let Wb={},sa={},ra=0;const xa={Literal:Ia=>Ia.raw,Identifier:Ia=>{Ia=Ia.name;if(0<ra)return Ia;if(f.hasOwnProperty(Qa,Ia))return f.error("Illegal identifier: "+Ia);if(f.hasOwnProperty(Ea,Ia))return Ea[Ia];if(f.hasOwnProperty(Da,Ia))return Ia;Wb[Ia]=1;return Gb(Ia)},MemberExpression:Ia=>{const bb=!Ia.computed,Hb=ma(Ia.object);bb&&(ra+=1);Ia=ma(Ia.property);if(Hb===Mb){var zb=sa;var mb=(mb=Ia&&Ia.length-1)&&('"'===Ia[0]&&'"'===Ia[mb]||"'"===Ia[0]&&"'"===Ia[mb])?
Ia.slice(1,-1):Ia;zb[mb]=1}bb&&--ra;return Hb+(bb?"."+Ia:"["+Ia+"]")},CallExpression:Ia=>{"Identifier"!==Ia.callee.type&&f.error("Illegal callee type: "+Ia.callee.type);const bb=Ia.callee.name;Ia=Ia.arguments;const Hb=f.hasOwnProperty(kb,bb)&&kb[bb];Hb||f.error("Unrecognized function: "+bb);return f.isFunction(Hb)?Hb(Ia):Hb+"("+Ia.map(ma).join(",")+")"},ArrayExpression:Ia=>"["+Ia.elements.map(ma).join(",")+"]",BinaryExpression:Ia=>"("+ma(Ia.left)+" "+Ia.operator+" "+ma(Ia.right)+")",UnaryExpression:Ia=>
"("+Ia.operator+ma(Ia.argument)+")",ConditionalExpression:Ia=>"("+ma(Ia.test)+"?"+ma(Ia.consequent)+":"+ma(Ia.alternate)+")",LogicalExpression:Ia=>"("+ma(Ia.left)+Ia.operator+ma(Ia.right)+")",ObjectExpression:Ia=>"{"+Ia.properties.map(ma).join(",")+"}",Property:Ia=>{ra+=1;const bb=ma(Ia.key);--ra;return bb+":"+ma(Ia.value)}};Aa.functions=kb;Aa.constants=Ea;return Aa};k.constants=Ra;k.functions=Ba;k.parseExpression=function(la){Ga=la;ua=0;Fa=Ga.length;Xa=null;v();la=ja();if(2!==Xa.type)throw Error("Unexpect token after expression.");
return la};Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[548]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(503),da(547)):"function"===typeof define&&define.amd?define(["exports","vega-util","vega-expression"],f):(k="undefined"!==typeof globalThis?globalThis:k||self,f(k.vega={},k.vega,k.vega))})(this,function(k,f,h){function l(S){return(V,F)=>{V=S(V);return V<F?-1:V>F?1:V>=F?0:NaN}}function u(S,V){var F=V.fields;V=V.values;for(var t=F.length,w=0,x,I;w<t;++w)if(I=F[w],I.getter=f.field.getter||f.field(I.field),
x=I.getter(S),f.isDate(x)&&(x=f.toNumber(x)),f.isDate(V[w])&&(V[w]=f.toNumber(V[w])),f.isDate(V[w][0])&&(V[w]=V[w].map(f.toNumber)),"E"===I.type){if(f.isArray(V[w])?0>V[w].indexOf(x):x!==V[w])return!1}else if("R"===I.type){if(!f.inrange(x,V[w]))return!1}else if("R-RE"===I.type){if(!f.inrange(x,V[w],!0,!1))return!1}else if("R-E"===I.type){if(!f.inrange(x,V[w],!1,!1))return!1}else if("R-LE"===I.type&&!f.inrange(x,V[w],!1,!0))return!1;return!0}const q=f.field("_vgsid_"),D=function(S){function V(w,x,
I,R){null==I&&(I=0);null==R&&(R=w.length);for(;I<R;){const B=I+R>>>1;0>t(w[B],x)?I=B+1:R=B}return I}let F=S,t=S;1===S.length&&(F=(w,x)=>S(w)-x,t=l(S));return{left:V,center:function(w,x,I,R){null==I&&(I=0);null==R&&(R=w.length);R=V(w,x,I,R-1);return R>I&&F(w[R-1],x)>-F(w[R],x)?R-1:R},right:function(w,x,I,R){null==I&&(I=0);null==R&&(R=w.length);for(;I<R;){const B=I+R>>>1;0<t(w[B],x)?R=B:I=B+1}return I}}}(q),U=D.left,aa=D.right;var X={E_union:function(S,V){if(!S.length)return V;for(var F=0,t=V.length;F<
t;++F)0>S.indexOf(V[F])&&S.push(V[F]);return S},E_intersect:function(S,V){return S.length?S.filter(F=>0<=V.indexOf(F)):V},R_union:function(S,V){var F=f.toNumber(V[0]),t=f.toNumber(V[1]);F>t&&(F=V[1],t=V[0]);if(!S.length)return[F,t];S[0]>F&&(S[0]=F);S[1]<t&&(S[1]=t);return S},R_intersect:function(S,V){var F=f.toNumber(V[0]),t=f.toNumber(V[1]);F>t&&(F=V[1],t=V[0]);if(!S.length)return[F,t];if(t<S[0]||S[1]<F)return[];S[0]<F&&(S[0]=F);S[1]>t&&(S[1]=t);return S}};k.selectionIdTest=function(S,V,F){var t=
this.context.data[S];S=t?t.values.value:[];t=t?t["index:unit"]&&t["index:unit"].value:void 0;F="intersect"===F;V=q(V);const w=U(S,V);if(w===S.length||q(S[w])!==V)return!1;if(t&&F){if(1===t.size)return!0;if(aa(S,V)-w<t.size)return!1}return!0};k.selectionResolve=function(S,V,F,t){S=(S=this.context.data[S])?S.values.value:[];for(var w={},x={},I={},R,B,v,O,N,A,J=S.length,T=0,z,ba;T<J;++T){R=S[T];v=R.unit;B=R.fields;R=R.values;z=0;for(ba=B.length;z<ba;++z)O=B[z],N=w[O.field]||(w[O.field]={}),A=N[v]||(N[v]=
[]),I[O.field]=O=O.type.charAt(0),O=X[O+"_union"],N[v]=O(A,f.array(R[z]));F&&(A=x[v]||(x[v]=[]),A.push(f.array(R).reduce((K,r,Y)=>(K[B[Y].field]=r,K),{})))}V=V||"union";Object.keys(w).forEach(K=>{w[K]=Object.keys(w[K]).map(r=>w[K][r]).reduce((r,Y)=>void 0===r?Y:X[I[K]+"_"+V](r,Y))});S=Object.keys(x);F&&S.length&&(w[t?"vlPoint":"vlMulti"]="union"===V?{["or"]:S.reduce((K,r)=>(K.push(...x[r]),K),[])}:{["and"]:S.map(K=>({["or"]:x[K]}))});return w};k.selectionTest=function(S,V,F){var t=this.context.data[S];
S=t?t.values.value:[];t=t?t["index:unit"]&&t["index:unit"].value:void 0;F="intersect"===F;for(var w=S.length,x=0,I,R,B,v;x<w;++x)if(I=S[x],t&&F){if(R=R||{},B=R[v=I.unit]||0,-1!==B){I=u(V,I);R[v]=I?-1:++B;if(I&&1===t.size)return!0;if(!I&&B===t.get(v).count)return!1}}else if(I=u(V,I),F^I)return I;return w&&F};k.selectionTuples=function(S,V){return S.map(F=>f.extend({values:V.fields.map(t=>(t.getter||(t.getter=f.field(t.field)))(F.datum))},V))};k.selectionVisitor=function(S,V,F,t){V[0].type!==h.Literal&&
f.error("First argument to selection functions must be a string literal.");S=V[0].value;V=2<=V.length&&f.peek(V).value;const w=":"+S;"intersect"!==V||f.hasOwnProperty(t,"@unit")||(t["@unit"]=F.getData(S).indataRef(F,"unit"));f.hasOwnProperty(t,w)||(t[w]=F.getData(S).tuplesRef())};Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[549]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(503),da(547),da(530),da(523),da(517),da(526),da(527),da(548),da(518),da(509),da(506)):"function"===typeof define&&define.amd?define("exports vega-util vega-expression d3-geo d3-color vega-dataflow vega-scale vega-scenegraph vega-selections vega-statistics vega-time d3-array".split(" "),f):(k="undefined"!==typeof globalThis?globalThis:k||self,f(k.vega={},k.vega,k.vega,k.d3,k.d3,k.vega,k.vega,
k.vega,k.vega,k.vega,k.vega,k.d3))})(this,function(k,f,h,l,u,q,D,U,aa,X,S,V){function F(Dc){return(Dc=this.context.data[Dc])?Dc.values.value:[]}function t(Dc,jd,Qd){return(Qd=(Dc=this.context.data[Dc]["index:"+jd])?Dc.value.get(Qd):void 0)?Qd.count:Qd}function w(Dc,jd){const Qd=this.context.dataflow;Qd.pulse(this.context.data[Dc].input,Qd.changeset().remove(f.truthy).insert(jd));return 1}function x(Dc,jd,Qd){if(Dc){const ae=this.context.dataflow;ae.pulse(Dc.mark.source,ae.changeset().encode(Dc,jd))}return void 0!==
Qd?Qd:Dc}function I(Dc,jd,Qd){if(!Number.isInteger(Dc)||!Number.isInteger(jd))return"";Vd.setYear(2E3);Vd.setMonth(Dc);Vd.setDate(jd);return Rc.call(this,Vd,Qd)}function R(Dc){return I.call(this,Dc,1,"%B")}function B(Dc){return I.call(this,Dc,1,"%b")}function v(Dc){return I.call(this,0,2+Dc,"%A")}function O(Dc){return I.call(this,0,2+Dc,"%a")}function N(Dc,jd,Qd,ae){jd[0].type!==h.Literal&&f.error("First argument to data functions must be a string literal.");Dc=jd[0].value;jd=":"+Dc;if(!f.hasOwnProperty(jd,
ae))try{ae[jd]=Qd.getData(Dc).tuplesRef()}catch(te){}}function A(Dc,jd,Qd,ae){jd[0].type!==h.Literal&&f.error("First argument to indata must be a string literal.");jd[1].type!==h.Literal&&f.error("Second argument to indata must be a string literal.");Dc=jd[0].value;jd=jd[1].value;const te="@"+jd;f.hasOwnProperty(te,ae)||(ae[te]=Qd.getData(Dc).indataRef(Qd,jd))}function J(Dc,jd,Qd,ae){if(jd[0].type===h.Literal)T(Qd,ae,jd[0].value);else for(Dc in Qd.scales)T(Qd,ae,Dc)}function T(Dc,jd,Qd){const ae=
"%"+Qd;if(!f.hasOwnProperty(jd,ae))try{jd[ae]=Dc.scaleRef(Qd)}catch(te){}}function z(Dc,jd){let Qd;return f.isFunction(Dc)?Dc:f.isString(Dc)?(Qd=jd.scales[Dc])&&Qd.value:void 0}function ba(Dc,jd,Qd){jd.__bandwidth=te=>te&&te.bandwidth?te.bandwidth():0;Qd._bandwidth=J;Qd._range=J;Qd._scale=J;const ae=te=>"_["+(te.type===h.Literal?f.stringValue("%"+te.value):f.stringValue("%")+"+"+Dc(te))+"]";return{_bandwidth:te=>`this.__bandwidth(${ae(te[0])})`,_range:te=>`${ae(te[0])}.range()`,_scale:te=>`${ae(te[0])}(${Dc(te[1])})`}}
function K(Dc,jd){return function(Qd,ae,te){return Qd?(Qd=z(Qd,(te||this).context))&&Qd.path[Dc](ae):jd(ae)}}function r(Dc){const jd=this.context.group;let Qd=!1;if(jd)for(;Dc;){if(Dc===jd){Qd=!0;break}Dc=Dc.mark.group}return Qd}function Y(Dc,jd,Qd){try{Dc[jd].apply(Dc,["EXPRESSION"].concat([].slice.call(Qd)))}catch(ae){Dc.warn(ae)}return Qd[Qd.length-1]}function Z(){return Y(this.context.dataflow,"warn",arguments)}function E(){return Y(this.context.dataflow,"info",arguments)}function C(){return Y(this.context.dataflow,
"debug",arguments)}function W(Dc){Dc/=255;return.03928>=Dc?Dc/12.92:Math.pow((Dc+.055)/1.055,2.4)}function fa(Dc){var jd=u.rgb(Dc);Dc=W(jd.r);const Qd=W(jd.g);jd=W(jd.b);return.2126*Dc+.7152*Qd+.0722*jd}function ja(Dc,jd){Dc=fa(Dc);jd=fa(jd);return(Math.max(Dc,jd)+.05)/(Math.min(Dc,jd)+.05)}function Ba(){const Dc=[].slice.call(arguments);Dc.unshift({});return f.extend(...Dc)}function Ga(Dc,jd){if(Dc===jd||Dc!==Dc&&jd!==jd)Dc=!0;else if(f.isArray(Dc))if(f.isArray(jd)&&Dc.length===jd.length)a:{for(let Qd=
0,ae=Dc.length;Qd<ae;++Qd)if(!Ga(Dc[Qd],jd[Qd])){Dc=!1;break a}Dc=!0}else Dc=!1;else Dc=f.isObject(Dc)&&f.isObject(jd)?ua(Dc,jd):!1;return Dc}function ua(Dc,jd){for(const Qd in Dc)if(!Ga(Dc[Qd],jd[Qd]))return!1;return!0}function Fa(Dc){return jd=>ua(Dc,jd)}function Xa(Dc,jd,Qd,ae,te,Bb){const $b=this.context.dataflow,Gc=this.context.data[Dc],Jc=Gc.input;Dc=$b.stamp();let ud=Gc.changes,Zc;if(!1===$b._trigger||!(Jc.value.length||jd||ae))return 0;if(!ud||ud.stamp<Dc)Gc.changes=ud=$b.changeset(),ud.stamp=
Dc,$b.runAfter(()=>{Gc.modified=!0;$b.pulse(Jc,ud).run()},!0,1);Qd&&(Qd=!0===Qd?f.truthy:f.isArray(Qd)||q.isTuple(Qd)?Qd:Fa(Qd),ud.remove(Qd));jd&&ud.insert(jd);ae&&(Qd=Fa(ae),Jc.value.some(Qd)?ud.remove(Qd):ud.insert(ae));if(te)for(Zc in Bb)ud.modify(te,Zc,Bb[Zc]);return 1}function Sa(Dc){var jd=Dc.touches;Dc=jd[0].clientX-jd[1].clientX;jd=jd[0].clientY-jd[1].clientY;return Math.sqrt(Dc*Dc+jd*jd)}function eb(Dc){Dc=Dc.touches;return Math.atan2(Dc[0].clientY-Dc[1].clientY,Dc[0].clientX-Dc[1].clientX)}
function Va(Dc,jd){jd=bd[jd]||(bd[jd]=f.field(jd));return f.isArray(Dc)?Dc.map(jd):jd(Dc)}function La(Dc){return f.isArray(Dc)||ArrayBuffer.isView(Dc)?Dc:null}function Ra(Dc){return La(Dc)||(f.isString(Dc)?Dc:null)}function la(Dc,...jd){return La(Dc).join(...jd)}function ma(Dc,...jd){return Ra(Dc).indexOf(...jd)}function Aa(Dc,...jd){return Ra(Dc).lastIndexOf(...jd)}function Da(Dc,...jd){return Ra(Dc).slice(...jd)}function Qa(Dc,jd,Qd){f.isFunction(Qd)&&f.error("Function argument passed to replace.");
return String(Dc).replace(jd,Qd)}function Ea(Dc){return La(Dc).slice().reverse()}function kb(Dc,jd,Qd){return D.bandSpace(Dc||0,jd||0,Qd||0)}function cb(Dc,jd){return(Dc=z(Dc,(jd||this).context))&&Dc.bandwidth?Dc.bandwidth():0}function Mb(Dc,jd){return(Dc=z(Dc,(jd||this).context))?Dc.copy():void 0}function Gb(Dc,jd){return(Dc=z(Dc,(jd||this).context))?Dc.domain():[]}function Wb(Dc,jd,Qd){return(Dc=z(Dc,(Qd||this).context))?f.isArray(jd)?(Dc.invertRange||Dc.invert)(jd):(Dc.invert||Dc.invertExtent)(jd):
void 0}function sa(Dc,jd){return(Dc=z(Dc,(jd||this).context))&&Dc.range?Dc.range():[]}function ra(Dc,jd,Qd){return(Dc=z(Dc,(Qd||this).context))?Dc(jd):void 0}function xa(Dc,jd,Qd,ae,te){Dc=z(Dc,(te||this).context);const Bb=U.Gradient(jd,Qd);jd=Dc.domain();Qd=jd[0];te=f.peek(jd);let $b=f.identity;te-Qd?$b=D.scaleFraction(Dc,Qd,te):Dc=(Dc.interpolator?D.scale("sequential")().interpolator(Dc.interpolator()):D.scale("linear")().interpolate(Dc.interpolate()).range(Dc.range())).domain([Qd=0,te=1]);Dc.ticks&&
(jd=Dc.ticks(+ae||15),Qd!==jd[0]&&jd.unshift(Qd),te!==f.peek(jd)&&jd.push(te));jd.forEach(Gc=>Bb.stop($b(Gc),Dc(Gc)));return Bb}function Ia(Dc,jd,Qd){const ae=z(Dc,(Qd||this).context);return function(te){return ae?ae.path.context(te)(jd):""}}function bb(Dc){let jd=null;return function(Qd){return Qd?U.pathRender(Qd,jd=jd||U.pathParse(Dc)):Dc}}function Hb(Dc,jd){Dc=F.call(jd,Dc);return Dc.root&&Dc.root.lookup||{}}function zb(Dc,jd,Qd){Dc=Hb(Dc,this);jd=Dc[jd];Qd=Dc[Qd];return jd&&Qd?jd.path(Qd).map(Bd):
void 0}function mb(Dc,jd){return(Dc=Hb(Dc,this)[jd])?Dc.ancestors().map(Bd):void 0}function Jb(){const Dc="undefined"!==typeof window&&window||null;return Dc?Dc.screen:{}}function Eb(){const Dc="undefined"!==typeof window&&window||null;return Dc?[Dc.innerWidth,Dc.innerHeight]:[void 0,void 0]}function Db(){var Dc=this.context.dataflow;return(Dc=Dc.container&&Dc.container())?[Dc.clientWidth,Dc.clientHeight]:[void 0,void 0]}function bc(Dc){let jd=null;if(Dc){const Qd=f.array(Dc.marktype),ae=f.array(Dc.markname);
jd=te=>(!Qd.length||Qd.some(Bb=>te.marktype===Bb))&&(!ae.length||ae.some(Bb=>te.name===Bb))}return jd}function jc(Dc,jd,Qd){if(1===arguments.length)return Ld[Dc];Ld[Dc]=jd;Qd&&(Ee[Dc]=Qd);nd&&(nd.functions[Dc]="this."+Dc);return this}var Tc=Dc=>function(jd,Qd){return this.context.dataflow.locale()[Dc](Qd)(jd)};const ub=Tc("format"),Rc=Tc("timeFormat"),Gd=Tc("utcFormat"),Kd=Tc("timeParse");Tc=Tc("utcParse");const Vd=new Date(2E3,0,1),ze=K("area",l.geoArea),ee=K("bounds",l.geoBounds);l=K("centroid",
l.geoCentroid);const bd={},Bd=Dc=>Dc.data,Ld={random(){return X.random()},cumulativeNormal:X.cumulativeNormal,cumulativeLogNormal:X.cumulativeLogNormal,cumulativeUniform:X.cumulativeUniform,densityNormal:X.densityNormal,densityLogNormal:X.densityLogNormal,densityUniform:X.densityUniform,quantileNormal:X.quantileNormal,quantileLogNormal:X.quantileLogNormal,quantileUniform:X.quantileUniform,sampleNormal:X.sampleNormal,sampleLogNormal:X.sampleLogNormal,sampleUniform:X.sampleUniform,isArray:f.isArray,
isBoolean:f.isBoolean,isDate:f.isDate,isDefined(Dc){return void 0!==Dc},isNumber:f.isNumber,isObject:f.isObject,isRegExp:f.isRegExp,isString:f.isString,isTuple:q.isTuple,isValid(Dc){return null!=Dc&&Dc===Dc},toBoolean:f.toBoolean,toDate:f.toDate,toNumber:f.toNumber,toString:f.toString,indexof:ma,join:la,lastindexof:Aa,replace:Qa,reverse:Ea,slice:Da,flush:f.flush,lerp:f.lerp,merge:Ba,pad:f.pad,peek:f.peek,pluck:Va,span:f.span,inrange:f.inrange,truncate:f.truncate,rgb:u.rgb,lab:u.lab,hcl:u.hcl,hsl:u.hsl,
luminance:fa,contrast:ja,sequence:V.range,format:ub,utcFormat:Gd,utcParse:Tc,utcOffset:S.utcOffset,utcSequence:S.utcSequence,timeFormat:Rc,timeParse:Kd,timeOffset:S.timeOffset,timeSequence:S.timeSequence,timeUnitSpecifier:S.timeUnitSpecifier,monthFormat:R,monthAbbrevFormat:B,dayFormat:v,dayAbbrevFormat:O,quarter:f.quarter,utcquarter:f.utcquarter,week:S.week,utcweek:S.utcweek,dayofyear:S.dayofyear,utcdayofyear:S.utcdayofyear,warn:Z,info:E,debug:C,extent:f.extent,inScope:r,intersect:function(Dc,jd,
Qd){if(!Dc)return[];const [ae,te]=Dc;Dc=(new U.Bounds).set(ae[0],ae[1],te[0],te[1]);Qd=Qd||this.context.dataflow.scenegraph().root;return U.intersect(Qd,Dc,bc(jd))},clampRange:f.clampRange,pinchDistance:Sa,pinchAngle:eb,screen:Jb,containerSize:Db,windowSize:Eb,bandspace:kb,setdata:w,pathShape:bb,panLinear:f.panLinear,panLog:f.panLog,panPow:f.panPow,panSymlog:f.panSymlog,zoomLinear:f.zoomLinear,zoomLog:f.zoomLog,zoomPow:f.zoomPow,zoomSymlog:f.zoomSymlog,encode:x,modify:Xa},fe="view item group xy x y".split(" "),
Ee={},dd={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:Dc=>`_[${f.stringValue("$"+Dc)}]`,functions:function(Dc){const jd=h.functions(Dc);fe.forEach(Qd=>jd[Qd]="event.vega."+Qd);for(const Qd in Ld)jd[Qd]="this."+Qd;f.extend(jd,ba(Dc,Ld,Ee));return jd},constants:h.constants,visitors:Ee},nd=h.codegenExpression(dd);jc("bandwidth",cb,J);jc("copy",Mb,J);jc("domain",Gb,J);jc("range",sa,J);jc("invert",Wb,J);jc("scale",ra,J);jc("gradient",xa,J);jc("geoArea",ze,J);jc("geoBounds",
ee,J);jc("geoCentroid",l,J);jc("geoShape",Ia,J);jc("indata",t,A);jc("data",F,N);jc("treePath",zb,N);jc("treeAncestors",mb,N);jc("vlSelectionTest",aa.selectionTest,aa.selectionVisitor);jc("vlSelectionIdTest",aa.selectionIdTest,aa.selectionVisitor);jc("vlSelectionResolve",aa.selectionResolve,aa.selectionVisitor);jc("vlSelectionTuples",aa.selectionTuples);k.DataPrefix=":";k.IndexPrefix="@";k.ScalePrefix="%";k.SignalPrefix="$";k.bandspace=kb;k.bandwidth=cb;k.codeGenerator=nd;k.codegenParams=dd;k.containerSize=
Db;k.contrast=ja;k.copy=Mb;k.data=F;k.dataVisitor=N;k.dayAbbrevFormat=O;k.dayFormat=v;k.debug=C;k.domain=Gb;k.encode=x;k.expressionFunction=jc;k.format=ub;k.functionContext=Ld;k.geoArea=ze;k.geoBounds=ee;k.geoCentroid=l;k.geoShape=Ia;k.inScope=r;k.indata=t;k.indataVisitor=A;k.indexof=ma;k.info=E;k.invert=Wb;k.join=la;k.lastindexof=Aa;k.luminance=fa;k.merge=Ba;k.modify=Xa;k.monthAbbrevFormat=B;k.monthFormat=R;k.parseExpression=function(Dc,jd){const Qd={};let ae;try{Dc=f.isString(Dc)?Dc:f.stringValue(Dc)+
"",ae=h.parseExpression(Dc)}catch(te){f.error("Expression parse error: "+Dc)}ae.visit(te=>{if(te.type===h.CallExpression){var Bb=te.callee.name,$b=dd.visitors[Bb];$b&&$b(Bb,te.arguments,jd,Qd)}});Dc=nd(ae);Dc.globals.forEach(te=>{const Bb="$"+te;!f.hasOwnProperty(Qd,Bb)&&jd.getSignal(te)&&(Qd[Bb]=jd.signalRef(te))});return{$expr:f.extend({code:Dc.code},jd.options.ast?{ast:ae}:null),$fields:Dc.fields,$params:Qd}};k.pathShape=bb;k.pinchAngle=eb;k.pinchDistance=Sa;k.pluck=Va;k.range=sa;k.replace=Qa;
k.reverse=Ea;k.scale=ra;k.scaleGradient=xa;k.scaleVisitor=J;k.screen=Jb;k.setdata=w;k.slice=Da;k.timeFormat=Rc;k.timeParse=Kd;k.treeAncestors=mb;k.treePath=zb;k.utcFormat=Gd;k.utcParse=Tc;k.warn=Z;k.windowSize=Eb;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[550]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(503),da(517)):"function"===typeof define&&define.amd?define(["exports","vega-util","vega-dataflow"],f):(k="undefined"!==typeof globalThis?globalThis:k||self,f(k.vega={},k.vega,k.vega))})(this,function(k,f,h){function l(F,t,w){";"!==w[w.length-1]&&(w="return("+w+");");t=Function(...t.concat(w));return F&&F.functions?t.bind(F.functions):t}function u(F,t,w){if(!F||!f.isObject(F))return F;for(let x=
0,I=S.length,R;x<I;++x)if(R=S[x],f.hasOwnProperty(F,R.key))return R.parse(F,t,w);return F}function q(F,t,w,x){this.dataflow=F;this.transforms=t;this.events=F.events.bind(F);this.expr=x||X;this.signals={};this.scales={};this.nodes={};this.data={};this.fn={};w&&(this.functions=Object.create(w),this.functions.context=this)}function D(F){this.dataflow=F.dataflow;this.transforms=F.transforms;this.events=F.events;this.expr=F.expr;this.signals=Object.create(F.signals);this.scales=Object.create(F.scales);
this.nodes=Object.create(F.nodes);this.data=Object.create(F.data);this.fn=Object.create(F.fn);F.functions&&(this.functions=Object.create(F.functions),this.functions.context=this)}const U=f.toSet(["rule"]),aa=f.toSet(["group","image","rect"]);var X={operator:(F,t)=>l(F,["_"],t.code),parameter:(F,t)=>l(F,["datum","_"],t.code),event:(F,t)=>l(F,["event"],t.code),handler:(F,t)=>l(F,["_","event"],`var datum=event.item&&event.item.datum;return ${t.code};`),encode:(F,t)=>{const {marktype:w,channels:x}=t;
t="var o\x3ditem,datum\x3do.datum,m\x3d0,$;";for(var I in x){const R="o["+f.stringValue(I)+"]";t+=`$=${x[I].code};if(${R}!==$)${R}=$,m=1;`}I="";U[w]||(x.x2&&(x.x?(aa[w]&&(I+="if(o.x\x3eo.x2)$\x3do.x,o.x\x3do.x2,o.x2\x3d$;"),I+="o.width\x3do.x2-o.x;"):I+="o.x\x3do.x2-(o.width||0);"),x.xc&&(I+="o.x\x3do.xc-(o.width||0)/2;"),x.y2&&(x.y?(aa[w]&&(I+="if(o.y\x3eo.y2)$\x3do.y,o.y\x3do.y2,o.y2\x3d$;"),I+="o.height\x3do.y2-o.y;"):I+="o.y\x3do.y2-(o.height||0);"),x.yc&&(I+="o.y\x3do.yc-(o.height||0)/2;"));
t+=I;return l(F,["item","_"],t+"return m;")},codegen:{get(F){F=`[${F.map(f.stringValue).join("][")}]`;const t=Function("_",`return _${F};`);t.path=F;return t},comparator(F,t){let w;F=Function("a","b","var u, v; return "+F.map((x,I)=>{const R=t[I];let B;x.path?(B=`a${x.path}`,x=`b${x.path}`):((w=w||{})["f"+I]=x,B=`this.f${I}(a)`,x=`this.f${I}(b)`);I=-R;return`((u = ${B}) < (v = ${x}) || u == null) && v != null ? ${I}
  : (u > v || v == null) && u != null ? ${R}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${I}
  : v !== v && u === u ? ${R} : `}).join("")+"0;");return w?F.bind(w):F}}},S=[{key:"$ref",parse:function(F,t){return t.get(F.$ref)||f.error("Operator not defined: "+F.$ref)}},{key:"$key",parse:function(F,t){const w="k:"+F.$key+"_"+!!F.$flat;return t.fn[w]||(t.fn[w]=f.key(F.$key,F.$flat,t.expr.codegen))}},{key:"$expr",parse:function(F,t,w){F.$params&&t.parseParameters(F.$params,w);w="e:"+F.$expr.code+"_"+F.$name;return t.fn[w]||(t.fn[w]=f.accessor(t.parameterExpression(F.$expr),F.$fields,F.$name))}},
{key:"$field",parse:function(F,t){if(!F.$field)return null;const w="f:"+F.$field+"_"+F.$name;return t.fn[w]||(t.fn[w]=f.field(F.$field,F.$name,t.expr.codegen))}},{key:"$encode",parse:function(F,t){F=F.$encode;const w={};for(const x in F){const I=F[x];w[x]=f.accessor(t.encodeExpression(I.$expr),I.$fields);w[x].output=I.$output}return w}},{key:"$compare",parse:function(F,t){const w="c:"+F.$compare+"_"+F.$order,x=f.array(F.$compare).map(I=>I&&I.$tupleid?h.tupleid:I);return t.fn[w]||(t.fn[w]=f.compare(x,
F.$order,t.expr.codegen))}},{key:"$context",parse:function(F,t){return t}},{key:"$subflow",parse:function(F,t){const w=F.$subflow;return function(x,I,R){const B=t.fork().parse(w);x=B.get(w.operators[0].id);(I=B.signals.parent)&&I.set(R);x.detachSubflow=()=>t.detach(B);return x}}},{key:"$tupleid",parse:function(){return h.tupleid}}];const V={skip:!0};q.prototype=D.prototype={fork(){const F=new D(this);(this.subcontext||(this.subcontext=[])).push(F);return F},detach(F){this.subcontext=this.subcontext.filter(w=>
w!==F);const t=Object.keys(F.nodes);for(const w of t)F.nodes[w]._targets=null;for(const w of t)F.nodes[w].detach();F.nodes=null},get(F){return this.nodes[F]},set(F,t){return this.nodes[F]=t},add(F,t){const w=this,x=w.dataflow,I=F.value;w.set(F.id,t);"collect"===(F.type+"").toLowerCase()&&I&&(I.$ingest?x.ingest(t,I.$ingest,I.$format):I.$request?x.preload(t,I.$request,I.$format):x.pulse(t,x.changeset().insert(I)));F.root&&(w.root=t);if(F.parent){let R=w.get(F.parent.$ref);R?(x.connect(R,[t]),t.targets().add(R)):
(w.unresolved=w.unresolved||[]).push(()=>{R=w.get(F.parent.$ref);x.connect(R,[t]);t.targets().add(R)})}F.signal&&(w.signals[F.signal]=t);F.scale&&(w.scales[F.scale]=t);if(F.data)for(const R in F.data){const B=w.data[R]||(w.data[R]={});F.data[R].forEach(v=>B[v]=t)}},resolve(){(this.unresolved||[]).forEach(F=>F());delete this.unresolved;return this},operator(F,t){this.add(F,this.dataflow.add(F.value,t))},transform(F,t){this.add(F,this.dataflow.add(this.transforms[(t+"").toLowerCase()]))},stream(F,t){this.set(F.id,
t)},update(F,t,w,x,I){this.dataflow.on(t,w,x,I,F.options)},operatorExpression(F){return this.expr.operator(this,F)},parameterExpression(F){return this.expr.parameter(this,F)},eventExpression(F){return this.expr.event(this,F)},handlerExpression(F){return this.expr.handler(this,F)},encodeExpression(F){return this.expr.encode(this,F)},parse:function(F){const t=this,w=F.operators||[];F.background&&(t.background=F.background);F.eventConfig&&(t.eventConfig=F.eventConfig);F.locale&&(t.locale=F.locale);w.forEach(x=>
t.parseOperator(x));w.forEach(x=>t.parseOperatorParameters(x));(F.streams||[]).forEach(x=>t.parseStream(x));(F.updates||[]).forEach(x=>t.parseUpdate(x));return t.resolve()},parseOperator:function(F){"operator"!==(F.type+"").toLowerCase()&&F.type?this.transform(F,F.type):this.operator(F,F.update?this.operatorExpression(F.update):null)},parseOperatorParameters:function(F){if(F.params){const t=this.get(F.id);t||f.error("Invalid operator id: "+F.id);this.dataflow.connect(t,t.parameters(this.parseParameters(F.params),
F.react,F.initonly))}},parseParameters:function(F,t){t=t||{};const w=this;for(const x in F){const I=F[x];t[x]=f.isArray(I)?I.map(R=>u(R,w,t)):u(I,w,t)}return t},parseStream:function(F){var t=this,w=null!=F.filter?t.eventExpression(F.filter):void 0,x=null!=F.stream?t.get(F.stream):void 0;if(F.source)x=t.events(F.source,F.type,w);else if(F.merge){var I=F.merge.map(R=>t.get(R));x=I[0].merge.apply(I[0],I.slice(1))}F.between&&(I=F.between.map(R=>t.get(R)),x=x.between(I[0],I[1]));F.filter&&(x=x.filter(w));
null!=F.throttle&&(x=x.throttle(+F.throttle));null!=F.debounce&&(x=x.debounce(+F.debounce));null==x&&f.error("Invalid stream definition: "+JSON.stringify(F));F.consume&&x.consume(!0);t.stream(F,x)},parseUpdate:function(F){var t=f.isObject(t=F.source)?t.$ref:t;t=this.get(t);var w=F.update,x=void 0;t||f.error("Source not defined: "+F.source);var I=F.target&&F.target.$expr?this.eventExpression(F.target.$expr):this.get(F.target);w&&w.$expr&&(w.$params&&(x=this.parseParameters(w.$params)),w=this.handlerExpression(w.$expr));
this.update(F,t,I,w,x)},getState:function(F){var t=this,w={};if(F.signals){var x=w.signals={};Object.keys(t.signals).forEach(R=>{const B=t.signals[R];F.signals(R,B)&&(x[R]=B.value)})}if(F.data){var I=w.data={};Object.keys(t.data).forEach(R=>{const B=t.data[R];F.data(R,B)&&(I[R]=B.input.value)})}t.subcontext&&!1!==F.recurse&&(w.subcontext=t.subcontext.map(R=>R.getState(F)));return w},setState:function(F){var t=this,w=t.dataflow,x=F.data,I=F.signals;Object.keys(I||{}).forEach(R=>{w.update(t.signals[R],
I[R],V)});Object.keys(x||{}).forEach(R=>{w.pulse(t.data[R].input,w.changeset().remove(f.truthy).insert(x[R]))});(F.subcontext||[]).forEach((R,B)=>{(B=t.subcontext[B])&&B.setState(R)})}};k.context=function(F,t,w,x){return new q(F,t,w,x)};Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[551]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(503),da(517),da(527),da(506),da(549),da(550),da(536),da(511)):"function"===typeof define&&define.amd?define("exports vega-util vega-dataflow vega-scenegraph d3-array vega-functions vega-runtime d3-timer vega-format".split(" "),f):(k="undefined"!==typeof globalThis?globalThis:k||self,f(k.vega={},k.vega,k.vega,k.vega,k.d3,k.vega,k.vega,k.d3,k.vega))})(this,function(k,f,h,l,u,q,D,U,aa){function X(xa){const Ia=
xa.container();Ia&&(Ia.setAttribute("role","graphics-document"),Ia.setAttribute("aria-roleDescription","visualization"),S(Ia,xa.description()))}function S(xa,Ia){xa&&(null==Ia?xa.removeAttribute("aria-label"):xa.setAttribute("aria-label",Ia))}function V(xa){xa.add(null,Ia=>{xa._background=Ia.bg;xa._resize=1;return Ia.bg},{bg:xa._signals.background})}function F(xa){const Ia=xa._signals.cursor||(xa._signals.cursor=xa.add({user:"default",item:null}));xa.on(xa.events("view","mousemove"),Ia,(bb,Hb)=>{const zb=
(bb=Ia.value)?f.isString(bb)?bb:bb.user:"default";Hb=Hb.item&&Hb.item.cursor||null;return bb&&zb===bb.user&&Hb==bb.item?bb:{user:zb,item:Hb}});xa.add(null,function(bb){bb=bb.cursor;let Hb=this.value;f.isString(bb)||(Hb=bb.item,bb=bb.user);t(xa,bb&&"default"!==bb?bb:Hb||bb);return Hb},{cursor:Ia})}function t(xa,Ia){if(xa=xa.globalCursor()?"undefined"!==typeof document&&document.body:xa.container())return null==Ia?xa.style.removeProperty("cursor"):xa.style.cursor=Ia}function w(xa,Ia){xa=xa._runtime.data;
f.hasOwnProperty(xa,Ia)||f.error("Unrecognized data set: "+Ia);return xa[Ia]}function x(xa,Ia){h.isChangeSet(Ia)||f.error("Second argument to changes must be a changeset.");xa=w(this,xa);xa.modified=!0;return this.pulse(xa.input,Ia)}function I(xa){var Ia=xa.padding();return Math.max(0,xa._viewWidth+Ia.left+Ia.right)}function R(xa){var Ia=xa.padding();return Math.max(0,xa._viewHeight+Ia.top+Ia.bottom)}function B(xa){var Ia=xa.padding();xa=xa._origin;return[Ia.left+xa[0],Ia.top+xa[1]]}function v(xa){var Ia=
B(xa),bb=I(xa),Hb=R(xa);xa._renderer.background(xa.background());xa._renderer.resize(bb,Hb,Ia);xa._handler.origin(Ia);xa._resizeListeners.forEach(zb=>{try{zb(bb,Hb)}catch(mb){xa.error(mb)}})}function O(xa,Ia,bb){function Hb(Jb){var Eb=mb,Db;if(Jb)for(Db=Ia;Db;Db=Db.mark.group)if(Db.mark.name===Jb){Eb=Db;break}return Eb&&Eb.mark&&Eb.mark.interactive?Eb:{}}function zb(Jb){if(!Jb)return bb;f.isString(Jb)&&(Jb=Hb(Jb));const Eb=bb.slice();for(;Jb;)Eb[0]-=Jb.x||0,Eb[1]-=Jb.y||0,Jb=Jb.mark&&Jb.mark.group;
return Eb}const mb=Ia?"group"===Ia.mark.marktype?Ia:Ia.mark.group:null;return{view:f.constant(xa),item:f.constant(Ia||{}),group:Hb,xy:zb,x:Jb=>zb(Jb)[0],y:Jb=>zb(Jb)[1]}}function N(xa){xa=f.extend({defaults:{}},xa);const Ia=(bb,Hb)=>{Hb.forEach(zb=>{f.isArray(bb[zb])&&(bb[zb]=f.toSet(bb[zb]))})};Ia(xa.defaults,["prevent","allow"]);Ia(xa,["view","window","selector"]);return xa}function A(xa,Ia,bb,Hb){xa._eventListeners.push({type:bb,sources:f.array(Ia),handler:Hb})}function J(xa,Ia,bb){const Hb=xa._eventConfig&&
xa._eventConfig[Ia];return!1===Hb||f.isObject(Hb)&&!Hb[bb]?(xa.warn(`Blocked ${Ia} ${bb} event listener.`),!1):!0}function T(xa){return xa.item}function z(xa){return xa.item.mark.source}function ba(xa){return function(Ia,bb){return bb.vega.view().changeset().encode(bb.item,xa)}}function K(xa,Ia,bb){xa=document.createElement(xa);for(const Hb in Ia)xa.setAttribute(Hb,Ia[Hb]);null!=bb&&(xa.textContent=bb);return xa}function r(xa,Ia,bb){if(Ia){var Hb=bb.param,zb=bb.state;zb||(zb=bb.state={elements:null,
active:!1,set:null,update:mb=>{mb!=xa.signal(Hb.signal)&&xa.runAsync(null,()=>{zb.source=!0;xa.signal(Hb.signal,mb)})}},Hb.debounce&&(zb.update=f.debounce(Hb.debounce,zb.update)));(null==Hb.input&&Hb.element?Y:Z)(zb,Ia,Hb,xa);zb.active||(xa.on(xa._signals[Hb.signal],null,()=>{zb.source?zb.source=!1:zb.set(xa.signal(Hb.signal))}),zb.active=!0);return zb}}function Y(xa,Ia,bb,Hb){const zb=bb.event||"input",mb=()=>xa.update(Ia.value);Hb.signal(bb.signal,Ia.value);Ia.addEventListener(zb,mb);A(Hb,Ia,zb,
mb);xa.set=Jb=>{Ia.value=Jb;Jb=Ia.dispatchEvent;var Eb="undefined"!==typeof Event?new Event(zb):{type:zb};Jb.call(Ia,Eb)}}function Z(xa,Ia,bb,Hb){Hb=Hb.signal(bb.signal);const zb=K("div",{"class":"vega-bind"}),mb="radio"===bb.input?zb:zb.appendChild(K("label"));mb.appendChild(K("span",{"class":"vega-bind-name"},bb.name||bb.signal));Ia.appendChild(zb);Ia=E;switch(bb.input){case "checkbox":Ia=C;break;case "select":Ia=W;break;case "radio":Ia=fa;break;case "range":Ia=ja}Ia(xa,mb,bb,Hb)}function E(xa,
Ia,bb,Hb){const zb=K("input");for(const mb in bb)"signal"!==mb&&"element"!==mb&&zb.setAttribute("input"===mb?"type":mb,bb[mb]);zb.setAttribute("name",bb.signal);zb.value=Hb;Ia.appendChild(zb);zb.addEventListener("input",()=>xa.update(zb.value));xa.elements=[zb];xa.set=mb=>zb.value=mb}function C(xa,Ia,bb,Hb){bb={type:"checkbox",name:bb.signal};Hb&&(bb.checked=!0);const zb=K("input",bb);Ia.appendChild(zb);zb.addEventListener("change",()=>xa.update(zb.checked));xa.elements=[zb];xa.set=mb=>zb.checked=
!!mb||null}function W(xa,Ia,bb,Hb){const zb=K("select",{name:bb.signal}),mb=bb.labels||[];bb.options.forEach((Jb,Eb)=>{const Db={value:Jb};Ba(Jb,Hb)&&(Db.selected=!0);zb.appendChild(K("option",Db,(mb[Eb]||Jb)+""))});Ia.appendChild(zb);zb.addEventListener("change",()=>{xa.update(bb.options[zb.selectedIndex])});xa.elements=[zb];xa.set=Jb=>{for(let Eb=0,Db=bb.options.length;Eb<Db;++Eb)if(Ba(bb.options[Eb],Jb)){zb.selectedIndex=Eb;break}}}function fa(xa,Ia,bb,Hb){const zb=K("span",{"class":"vega-bind-radio"}),
mb=bb.labels||[];Ia.appendChild(zb);xa.elements=bb.options.map((Jb,Eb)=>{var Db={type:"radio",name:bb.signal,value:Jb};Ba(Jb,Hb)&&(Db.checked=!0);Db=K("input",Db);Db.addEventListener("change",()=>xa.update(Jb));Eb=K("label",{},(mb[Eb]||Jb)+"");Eb.prepend(Db);zb.appendChild(Eb);return Db});xa.set=Jb=>{const Eb=xa.elements,Db=Eb.length;for(let bc=0;bc<Db;++bc)Ba(Eb[bc].value,Jb)&&(Eb[bc].checked=!0)}}function ja(xa,Ia,bb,Hb){Hb=void 0!==Hb?Hb:(+bb.max+ +bb.min)/2;const zb=null!=bb.max?bb.max:Math.max(100,
+Hb)||100,mb=bb.min||Math.min(0,zb,+Hb)||0,Jb=bb.step||u.tickStep(mb,zb,100),Eb=K("input",{type:"range",name:bb.signal,min:mb,max:zb,step:Jb});Eb.value=Hb;const Db=K("span",{},+Hb);Ia.appendChild(Eb);Ia.appendChild(Db);Ia=()=>{Db.textContent=Eb.value;xa.update(+Eb.value)};Eb.addEventListener("input",Ia);Eb.addEventListener("change",Ia);xa.elements=[Eb];xa.set=bc=>{Eb.value=bc;Db.textContent=bc}}function Ba(xa,Ia){return xa===Ia||xa+""===Ia+""}function Ga(xa,Ia,bb,Hb,zb,mb){Ia=Ia||new Hb(xa.loader());
return Ia.initialize(bb,I(xa),R(xa),B(xa),zb,mb).background(xa.background())}function ua(xa,Ia){return Ia?function(){try{Ia.apply(this,arguments)}catch(bb){xa.error(bb)}}:null}function Fa(xa,Ia,bb,Hb){const zb=(new Hb(xa.loader(),ua(xa,xa.tooltip()))).scene(xa.scenegraph().root).initialize(bb,B(xa),xa);Ia&&Ia.handlers().forEach(mb=>{zb.on(mb.type,mb.handler)});return zb}function Xa(xa,Ia,bb){if("string"===typeof Ia)if("undefined"!==typeof document){if(Ia=document.querySelector(Ia),!Ia)return xa.error("Signal bind element not found: "+
Ia),null}else return xa.error("DOM document instance not found."),null;if(Ia&&bb)try{Ia.innerHTML=""}catch(Hb){Ia=null,xa.error(Hb)}return Ia}function Sa(xa){f.isObject(xa)?xa={top:+xa.top||0,bottom:+xa.bottom||0,left:+xa.left||0,right:+xa.right||0}:(xa=+xa||0,xa={top:xa,bottom:xa,left:xa,right:xa});return xa}async function eb(xa,Ia,bb,Hb){var zb=l.renderModule(Ia);(zb=zb&&zb.headless)||f.error("Unrecognized renderer type: "+Ia);await xa.runAsync();return Ga(xa,null,null,zb,bb,Hb).renderAsync(xa._scenegraph.root)}
function Va(xa,Ia,bb){return D.context(xa,h.transforms,q.functionContext,bb).parse(Ia)}function La(xa,Ia){var bb=xa.autosize();xa=xa.padding();return Ia-(bb&&"padding"===bb.contains?xa.left+xa.right:0)}function Ra(xa,Ia){var bb=xa.autosize();xa=xa.padding();return Ia-(bb&&"padding"===bb.contains?xa.top+xa.bottom:0)}function la(xa){function Ia(){xa._autosize=xa._resize=1}var bb=xa._signals,Hb=bb.width,zb=bb.height;bb=bb.padding;xa._resizeWidth=xa.add(null,Jb=>{xa._width=Jb.size;xa._viewWidth=La(xa,
Jb.size);Ia()},{size:Hb});xa._resizeHeight=xa.add(null,Jb=>{xa._height=Jb.size;xa._viewHeight=Ra(xa,Jb.size);Ia()},{size:zb});const mb=xa.add(null,Ia,{pad:bb});xa._resizeWidth.rank=Hb.rank+1;xa._resizeHeight.rank=zb.rank+1;mb.rank=bb.rank+1}function ma(xa,Ia){return Ia.modified&&f.isArray(Ia.input.value)&&xa.indexOf("_:vega:_")}function Aa(xa,Ia){return!("parent"===xa||Ia instanceof h.transforms.proxy)}function Da(xa,Ia,bb,Hb){if(xa=xa.element())Ia=xa.setAttribute,Hb=null==Hb?"":f.isArray(Hb)?"["+
Hb.map(Ea).join(", ")+"]":f.isObject(Hb)&&!f.isDate(Hb)?Qa(Hb):Hb+"",Ia.call(xa,"title",Hb)}function Qa(xa){return Object.keys(xa).map(Ia=>{const bb=xa[Ia];return Ia+": "+(f.isArray(bb)?"["+bb.map(Ea).join(", ")+"]":Ea(bb))}).join("\n")}function Ea(xa){return f.isArray(xa)?"[â€¦]":f.isObject(xa)&&!f.isDate(xa)?"{â€¦}":xa}function kb(xa,Ia){Ia=Ia||{};h.Dataflow.call(this);Ia.loader&&this.loader(Ia.loader);Ia.logger&&this.logger(Ia.logger);null!=Ia.logLevel&&this.logLevel(Ia.logLevel);if(Ia.locale||xa.locale){var bb=
f.extend({},xa.locale,Ia.locale);this.locale(aa.locale(bb.number,bb.time))}this._elBind=this._el=null;this._renderType=Ia.renderer||l.RenderType.Canvas;this._scenegraph=new l.Scenegraph;bb=this._scenegraph.root;this._renderer=null;this._tooltip=Ia.tooltip||Da;this._redraw=!0;this._handler=(new l.CanvasHandler).scene(bb);this._preventDefault=this._globalCursor=!1;this._timers=[];this._eventListeners=[];this._resizeListeners=[];this._eventConfig=N(xa.eventConfig);this.globalCursor(this._eventConfig.globalCursor);
const Hb=Va(this,xa,Ia.expr);this._runtime=Hb;this._signals=Hb.signals;this._bind=(xa.bindings||[]).map(zb=>({state:null,param:f.extend({},zb)}));Hb.root&&Hb.root.set(bb);bb.source=Hb.data.root.input;this.pulse(Hb.data.root.input,this.changeset().insert(bb.items));this._width=this.width();this._height=this.height();this._viewWidth=La(this,this._width);this._viewHeight=Ra(this,this._height);this._origin=[0,0];this._resize=0;this._autosize=1;la(this);V(this);F(this);this.description(xa.description);
Ia.hover&&this.hover();Ia.container&&this.initialize(Ia.container,Ia.bind)}function cb(xa,Ia){return f.hasOwnProperty(xa._signals,Ia)?xa._signals[Ia]:f.error("Unrecognized signal name: "+f.stringValue(Ia))}function Mb(xa,Ia){xa=(xa._targets||[]).filter(bb=>bb._update&&bb._update.handler===Ia);return xa.length?xa[0]:null}function Gb(xa,Ia,bb,Hb){let zb=Mb(bb,Hb);zb||(zb=ua(xa,()=>Hb(Ia,bb.value)),zb.handler=Hb,xa.on(bb,null,zb));return xa}function Wb(xa,Ia,bb){(bb=Mb(Ia,bb))&&Ia._targets.remove(bb);
return xa}const sa={trap:!1};var ra={skip:!0};f.inherits(kb,h.Dataflow,{async evaluate(xa,Ia,bb){await h.Dataflow.prototype.evaluate.call(this,xa,Ia);if(this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,v(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(Hb){this.error(Hb)}bb&&h.asyncCallback(this,bb);return this},dirty(xa){this._redraw=!0;this._renderer&&this._renderer.dirty(xa)},description(xa){if(arguments.length){const Ia=null!=xa?
xa+"":null;Ia!==this._desc&&S(this._el,this._desc=Ia);return this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(xa,Ia,bb){const Hb=cb(this,xa);return 1===arguments.length?Hb.value:this.update(Hb,Ia,bb)},width(xa){return arguments.length?this.signal("width",xa):this.signal("width")},height(xa){return arguments.length?this.signal("height",xa):this.signal("height")},padding(xa){return arguments.length?this.signal("padding",
Sa(xa)):Sa(this.signal("padding"))},autosize(xa){return arguments.length?this.signal("autosize",xa):this.signal("autosize")},background(xa){return arguments.length?this.signal("background",xa):this.signal("background")},renderer(xa){if(!arguments.length)return this._renderType;l.renderModule(xa)||f.error("Unrecognized renderer type: "+xa);xa!==this._renderType&&(this._renderType=xa,this._resetRenderer());return this},tooltip(xa){if(!arguments.length)return this._tooltip;xa!==this._tooltip&&(this._tooltip=
xa,this._resetRenderer());return this},loader(xa){if(!arguments.length)return this._loader;xa!==this._loader&&(h.Dataflow.prototype.loader.call(this,xa),this._resetRenderer());return this},resize(){this._autosize=1;return this.touch(cb(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:function(xa,Ia,bb,Hb,zb,mb){this.runAfter(Jb=>{let Eb=0;Jb._autosize=0;Jb.width()!==bb&&(Eb=1,Jb.signal("width",bb,ra),Jb._resizeWidth.skip(!0));
Jb.height()!==Hb&&(Eb=1,Jb.signal("height",Hb,ra),Jb._resizeHeight.skip(!0));Jb._viewWidth!==xa&&(Jb._resize=1,Jb._viewWidth=xa);Jb._viewHeight!==Ia&&(Jb._resize=1,Jb._viewHeight=Ia);if(Jb._origin[0]!==zb[0]||Jb._origin[1]!==zb[1])Jb._resize=1,Jb._origin=zb;Eb&&Jb.run("enter");mb&&Jb.runAfter(Db=>Db.resize())},!1,1)},addEventListener(xa,Ia,bb){let Hb=Ia;bb&&!1===bb.trap||(Hb=ua(this,Ia),Hb.raw=Ia);this._handler.on(xa,Hb);return this},removeEventListener(xa,Ia){for(var bb=this._handler.handlers(xa),
Hb=bb.length,zb,mb;0<=--Hb;)if(mb=bb[Hb].type,zb=bb[Hb].handler,xa===mb&&(Ia===zb||Ia===zb.raw)){this._handler.off(mb,zb);break}return this},addResizeListener(xa){const Ia=this._resizeListeners;0>Ia.indexOf(xa)&&Ia.push(xa);return this},removeResizeListener(xa){var Ia=this._resizeListeners;xa=Ia.indexOf(xa);0<=xa&&Ia.splice(xa,1);return this},addSignalListener(xa,Ia){return Gb(this,xa,cb(this,xa),Ia)},removeSignalListener(xa,Ia){return Wb(this,cb(this,xa),Ia)},addDataListener(xa,Ia){return Gb(this,
xa,w(this,xa).values,Ia)},removeDataListener(xa,Ia){return Wb(this,w(this,xa).values,Ia)},globalCursor(xa){if(arguments.length){if(this._globalCursor!==!!xa){const Ia=t(this,null);this._globalCursor=!!xa;Ia&&t(this,Ia)}return this}return this._globalCursor},preventDefault(xa){return arguments.length?(this._preventDefault=xa,this):this._preventDefault},timer:function(xa,Ia){this._timers.push(U.interval(function(bb){xa({timestamp:Date.now(),elapsed:bb})},Ia))},events:function(xa,Ia,bb){var Hb=this,
zb=new h.EventStream(bb);bb=function(Db,bc){Hb.runAsync(null,()=>{var jc;if(jc="view"===xa){var Tc=Hb._eventConfig.defaults;jc=Tc.prevent;Tc=Tc.allow;jc=!1===jc||!0===Tc?!1:!0===jc||!1===Tc?!0:jc?jc[Ia]:Tc?!Tc[Ia]:Hb.preventDefault()}jc&&Db.preventDefault();jc=zb.receive;Tc=(Tc=Hb._renderer)&&Tc.canvas();if(Tc){var ub=B(Hb);var Rc=Db.changedTouches?Db.changedTouches[0]:Db;Rc=l.point(Rc,Tc);Rc[0]-=ub[0];Rc[1]-=ub[1]}Db.dataflow=Hb;Db.item=bc;Db.vega=O(Hb,bc,Rc);jc.call(zb,Db)})};var mb;if("timer"===
xa)J(Hb,"timer",Ia)&&Hb.timer(bb,Ia);else if("view"===xa)J(Hb,"view",Ia)&&Hb.addEventListener(Ia,bb,sa);else if("window"===xa?J(Hb,"window",Ia)&&"undefined"!==typeof window&&(mb=[window]):"undefined"!==typeof document&&J(Hb,"selector",Ia)&&(mb=document.querySelectorAll(xa)),mb){for(var Jb=0,Eb=mb.length;Jb<Eb;++Jb)mb[Jb].addEventListener(Ia,bb);A(Hb,mb,Ia,bb)}else Hb.warn("Can not resolve event source: "+xa);return zb},finalize:function(){var xa=this._tooltip,Ia=this._timers,bb=this._eventListeners,
Hb;for(Hb=Ia.length;0<=--Hb;)Ia[Hb].stop();for(Hb=bb.length;0<=--Hb;){var zb=bb[Hb];for(Ia=zb.sources.length;0<=--Ia;)zb.sources[Ia].removeEventListener(zb.type,zb.handler)}xa&&xa.call(this,this._handler,null,null,null);return this},hover:function(xa,Ia){xa=[xa||"hover"];Ia=[Ia||"update",xa[0]];this.on(this.events("view","mouseover",T),z,ba(xa));this.on(this.events("view","mouseout",T),z,ba(Ia));return this},data:function(xa,Ia){return 2>arguments.length?w(this,xa).values.value:x.call(this,xa,h.changeset().remove(f.truthy).insert(Ia))},
change:x,insert:function(xa,Ia){return x.call(this,xa,h.changeset().insert(Ia))},remove:function(xa,Ia){return x.call(this,xa,h.changeset().remove(Ia))},scale:function(xa){var Ia=this._runtime.scales;f.hasOwnProperty(Ia,xa)||f.error("Unrecognized scale or projection: "+xa);return Ia[xa].value},initialize:function(xa,Ia){const bb=this;var Hb=bb._renderType;const zb=bb._eventConfig.bind;var mb=l.renderModule(Hb);xa=bb._el=xa?Xa(bb,xa,!0):null;X(bb);mb||bb.error("Unrecognized renderer type: "+Hb);Hb=
mb.handler||l.CanvasHandler;mb=xa?mb.renderer:mb.headless;bb._renderer=mb?Ga(bb,bb._renderer,xa,mb):null;bb._handler=Fa(bb,bb._handler,xa,Hb);bb._redraw=!0;xa&&"none"!==zb&&(Ia=Ia?bb._elBind=Xa(bb,Ia,!0):xa.appendChild(K("form",{"class":"vega-bindings"})),bb._bind.forEach(Jb=>{Jb.param.element&&"container"!==zb&&(Jb.element=Xa(bb,Jb.param.element,!!Jb.param.input))}),bb._bind.forEach(Jb=>{r(bb,Jb.element||Ia,Jb)}));return bb},toImageURL:async function(xa,Ia){xa!==l.RenderType.Canvas&&xa!==l.RenderType.SVG&&
xa!==l.RenderType.PNG&&f.error("Unrecognized image type: "+xa);Ia=await eb(this,xa,Ia);xa===l.RenderType.SVG?(xa=Ia.svg(),xa=new Blob([xa],{type:"image/svg+xml"}),xa=window.URL.createObjectURL(xa)):xa=Ia.canvas().toDataURL("image/png");return xa},toCanvas:async function(xa,Ia){return(await eb(this,l.RenderType.Canvas,xa,Ia)).canvas()},toSVG:async function(xa){return(await eb(this,l.RenderType.SVG,xa)).svg()},getState:function(xa){return this._runtime.getState(xa||{data:ma,signals:Aa,recurse:!0})},
setState:function(xa){this.runAsync(null,Ia=>{Ia._trigger=!1;Ia._runtime.setState(xa)},Ia=>{Ia._trigger=!0});return this}});k.View=kb;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[552]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa):"function"===typeof define&&define.amd?define(["exports"],f):(k="undefined"!==typeof globalThis?globalThis:k||self,f(k.vega={}))})(this,function(k){function f(X,S,V,F,t){const w=X.length;let x=0,I;for(;S<w;++S)if(I=X[S],x||I!==V)t&&0<=t.indexOf(I)?--x:F&&0<=F.indexOf(I)&&++x;else break;return S}function h(X){const S=[],V=X.length;let F=0,t=0;for(;t<V;)t=f(X,t,",","[{","]}"),S.push(X.substring(F,
t).trim()),F=++t;if(0===S.length)throw"Empty event selector: "+X;return S}function l(X){if("["===X[0]){var S=X;var V=S.length;X=f(S,1,"]","[","]");if(X===V)throw"Empty between selector: "+S;V=h(S.substring(1,X));if(2!==V.length)throw"Between selector must have two elements: "+S;S=S.slice(X+1).trim();if("\x3e"!==S[0])throw"Expected '\x3e' after between selector: "+S;V=V.map(l);S=l(S.slice(1).trim());S.between?S={between:V,stream:S}:S.between=V}else{V={source:U};const F=[];let t=[0,0],w=0,x=0,I=X.length,
R=0,B;if("}"===X[I-1]){R=X.lastIndexOf("{");if(0<=R){try{t=u(X.substring(R+1,I-1))}catch(v){throw"Invalid throttle specification: "+X;}X=X.slice(0,R).trim();I=X.length}else throw"Unmatched right brace: "+X;R=0}if(!I)throw X;"@"===X[0]&&(w=++R);B=f(X,R,":");B<I&&(F.push(X.substring(x,B).trim()),x=R=++B);R=f(X,R,"[");if(R===I)F.push(X.substring(x,I).trim());else if(F.push(X.substring(x,R).trim()),S=[],x=++R,x===I)throw"Unmatched left bracket: "+X;for(;R<I;){R=f(X,R,"]");if(R===I)throw"Unmatched left bracket: "+
X;S.push(X.substring(x,R).trim());if(R<I-1&&"["!==X[++R])throw"Expected left bracket: "+X;x=++R}if(!(I=F.length)||q.test(F[I-1]))throw"Invalid event selector: "+X;1<I?(V.type=F[1],w?V.markname=F[0].slice(1):aa[F[0]]?V.marktype=F[0]:V.source=F[0]):V.type=F[0];"!"===V.type.slice(-1)&&(V.consume=!0,V.type=V.type.slice(0,-1));null!=S&&(V.filter=S);t[0]&&(V.throttle=t[0]);t[1]&&(V.debounce=t[1]);S=V}return S}function u(X){const S=X.split(",");if(!X.length||2<S.length)throw X;return S.map(V=>{V=+V;if(V!==
V)throw X;return V})}const q=/[[\]{}]/,D={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let U,aa;k.parseSelector=function(X,S,V){U=S||"view";aa=V||D;return h(X.trim()).map(l)};Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[553]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(503),da(549),da(552),da(526),da(517)):"function"===typeof define&&define.amd?define("exports vega-util vega-functions vega-event-selector vega-scale vega-dataflow".split(" "),f):(k="undefined"!==typeof globalThis?globalThis:k||self,f(k.vega={},k.vega,k.vega,k.vega,k.vega,k.vega))})(this,function(k,f,h,l,u,q){function D(jb){return f.isObject(jb)?jb:{type:jb||"pad"}}function U(jb){f.isObject(jb)?
jb=jb.signal?jb:{top:+jb.top||0,bottom:+jb.bottom||0,left:+jb.left||0,right:+jb.right||0}:(jb=+jb||0,jb={top:jb,bottom:jb,left:jb,right:jb});return jb}function aa(jb,Qb,pc,Qc){return null!=pc?(f.isObject(pc)&&!f.isArray(pc)||f.isArray(pc)&&pc.length&&f.isObject(pc[0])?jb.update[Qb]=pc:jb[Qc||"enter"][Qb]={value:pc},1):0}function X(jb,Qb,pc){for(const Qc in Qb)aa(jb,Qc,Qb[Qc]);for(const Qc in pc)aa(jb,Qc,pc[Qc],"update")}function S(jb,Qb,pc){for(const Qc in Qb)pc&&f.hasOwnProperty(pc,Qc)||(jb[Qc]=
f.extend(jb[Qc]||{},Qb[Qc]));return jb}function V(jb,Qb){return Qb&&(Qb.enter&&Qb.enter[jb]||Qb.update&&Qb.update[jb])}function F(jb,Qb,pc,Qc,Cc){const vd={},Wd={};let we,ue;ue="lineBreak";"text"!==Qb||null==Cc[ue]||V(ue,jb)||t(vd,ue,Cc[ue]);if("legend"==pc||String(pc).startsWith("axis"))pc=null;pc="frame"===pc?Cc.group:"mark"===pc?f.extend({},Cc.mark,Cc[Qb]):null;for(ue in pc)(Qb=V(ue,jb)||("fill"===ue||"stroke"===ue)&&(V("fill",jb)||V("stroke",jb)))||t(vd,ue,pc[ue]);f.array(Qc).forEach(sd=>{sd=
Cc.style&&Cc.style[sd];for(const Fe in sd)V(Fe,jb)||t(vd,Fe,sd[Fe])});jb=f.extend({},jb);for(ue in vd)pc=vd[ue],pc.signal?(we=we||{})[ue]=pc:Wd[ue]=pc;jb.enter=f.extend(Wd,jb.enter);we&&(jb.update=f.extend(we,jb.update));return jb}function t(jb,Qb,pc){jb[Qb]=pc&&pc.signal?{signal:pc.signal}:{value:pc}}function w(jb){if(null!=jb.gradient)return x(jb);if(jb.signal)var Qb=`(${jb.signal})`;else jb.color?(Qb=jb.color,Qb=Qb.c?qf("hcl",Qb.h,Qb.c,Qb.l):Qb.h||Qb.s?qf("hsl",Qb.h,Qb.s,Qb.l):Qb.l||Qb.a?qf("lab",
Qb.l,Qb.a,Qb.b):Qb.r||Qb.g||Qb.b?qf("rgb",Qb.r,Qb.g,Qb.b):null):Qb=null!=jb.field?R(jb.field):void 0!==jb.value?f.stringValue(jb.value):void 0;if(null!=jb.scale){const pc=$e(jb.scale);null!=jb.range?Qb=`lerp(_range(${pc}), ${+jb.range})`:(void 0!==Qb&&(Qb=`_scale(${pc}, ${Qb})`),jb.band&&(Qb=(Qb?Qb+"+":"")+`_bandwidth(${pc})`+(1===+jb.band?"":"*"+I(jb.band)),jb.extra&&(Qb=`(datum.extra ? _scale(${pc}, datum.extra.value) : ${Qb})`)),null==Qb&&(Qb="0"))}void 0===Qb&&(Qb=null);null!=jb.exponent&&(Qb=
`pow(${Qb},${I(jb.exponent)})`);null!=jb.mult&&(Qb+=`*${I(jb.mult)}`);null!=jb.offset&&(Qb+=`+${I(jb.offset)}`);jb.round&&(Qb=`round(${Qb})`);return Qb}function x(jb){const Qb=[jb.start,jb.stop,jb.count].map(pc=>null==pc?null:f.stringValue(pc));for(;Qb.length&&null==f.peek(Qb);)Qb.pop();Qb.unshift($e(jb.gradient));return`gradient(${Qb.join(",")})`}function I(jb){return f.isObject(jb)?"("+w(jb)+")":jb}function R(jb){return B(f.isObject(jb)?jb:{datum:jb})}function B(jb){let Qb;if(jb.signal){Qb="datum";
var pc=jb.signal}else if(jb.group||jb.parent){pc=Math.max(1,jb.level||1);for(Qb="item";0<pc--;)Qb+=".mark.group";jb.parent?(pc=jb.parent,Qb+=".datum"):pc=jb.group}else jb.datum?(Qb="datum",pc=jb.datum):f.error("Invalid field reference: "+f.stringValue(jb));jb.signal||(pc=f.isString(pc)?f.splitAccessPath(pc).map(f.stringValue).join("]["):B(pc));return Qb+"["+pc+"]"}function v(jb){let Qb="";jb.forEach(pc=>{const Qc=w(pc);Qb+=pc.test?`(${pc.test})?${Qc}:`:Qc});":"===f.peek(Qb)&&(Qb+="null");return Qb}
function O(jb,Qb,pc,Qc,Cc,vd){const Wd={};vd=vd||{};vd.encoders={$encode:Wd};jb=F(jb,Qb,pc,Qc,Cc.config);for(const Fe in jb){pc=jb[Fe];Qc=Qb;var we=vd,ue=Cc;const Ge={},Me={};for(const rf in pc)if(null!=pc[rf]){var sd=pc[rf];sd=f.isArray(sd)?v(sd):w(sd);Ge[rf]=N(sd,ue,we,Me)}pc={$expr:{marktype:Qc,channels:Ge},$fields:Object.keys(Me),$output:Object.keys(pc)};Wd[Fe]=pc}return vd}function N(jb,Qb,pc,Qc){jb=h.parseExpression(jb,Qb);jb.$fields.forEach(Cc=>Qc[Cc]=1);f.extend(pc,jb.$params);return jb.$expr}
function A(jb,Qb){f.error(jb+' for "outer" push: '+f.stringValue(Qb))}function J(jb,Qb){const pc=jb.name;if("outer"===jb.push)Qb.signals[pc]||A("No prior signal definition",pc),Ye.forEach(Qc=>{void 0!==jb[Qc]&&A("Invalid property ",Qc)});else{const Qc=Qb.addSignal(pc,jb.value);!1===jb.react&&(Qc.react=!1);jb.bind&&Qb.addBinding(pc,jb.bind)}}function T(jb,Qb,pc,Qc){this.id=-1;this.type=jb;this.value=Qb;this.params=pc;Qc&&(this.parent=Qc)}function z(jb){const Qb={$ref:jb.id};0>jb.id&&(jb.refs=jb.refs||
[]).push(Qb);return Qb}function ba(jb,Qb){return Qb?{$field:jb,$name:Qb}:{$field:jb}}function K(jb,Qb){jb={$key:jb};Qb&&(jb.$flat=!0);return jb}function r(jb,Qb){return(jb&&jb.signal?"$"+jb.signal:jb||"")+(jb&&Qb?"_":"")+(Qb&&Qb.signal?"$"+Qb.signal:Qb||"")}function Y(jb){return jb&&jb.signal}function Z(jb){if(Y(jb))return!0;if(f.isObject(jb))for(const Qb in jb)if(Z(jb[Qb]))return!0;return!1}function E(jb,Qb){return null!=jb?jb:Qb}function C(jb){return jb&&jb.signal||jb}function W(jb,Qb){return(jb.merge?
fa:jb.stream?ja:jb.type?Ba:f.error("Invalid stream specification: "+f.stringValue(jb)))(jb,Qb)}function fa(jb,Qb){const pc=jb.merge.map(Qc=>W(Qc,Qb));jb=Ga({merge:pc},jb,Qb);return Qb.addStream(jb).id}function ja(jb,Qb){const pc=W(jb.stream,Qb);jb=Ga({stream:pc},jb,Qb);return Qb.addStream(jb).id}function Ba(jb,Qb){if("timer"===jb.type){var pc=Qb.event("timer",jb.throttle);jb={between:jb.between,filter:jb.filter}}else pc=jb.source,pc=Qb.event.call(Qb,"scope"===pc?"view":pc||"view",jb.type);jb=Ga({stream:pc},
jb,Qb);return 1===Object.keys(jb).length?pc:Qb.addStream(jb).id}function Ga(jb,Qb,pc){let Qc=Qb.between;Qc&&(2!==Qc.length&&f.error('Stream "between" parameter must have 2 entries: '+f.stringValue(Qb)),jb.between=[W(Qc[0],pc),W(Qc[1],pc)]);Qc=Qb.filter?[].concat(Qb.filter):[];if(Qb.marktype||Qb.markname||Qb.markrole){var Cc=Qc,vd=Qb.marktype,Wd=Qb.markname,we=Qb.markrole;Cc.push.call(Cc,"event.item"+(vd&&"*"!==vd?"\x26\x26event.item.mark.marktype\x3d\x3d\x3d'"+vd+"'":"")+(we?"\x26\x26event.item.mark.role\x3d\x3d\x3d'"+
we+"'":"")+(Wd?"\x26\x26event.item.mark.name\x3d\x3d\x3d'"+Wd+"'":""))}"scope"===Qb.source&&Qc.push("inScope(event.item)");Qc.length&&(jb.filter=h.parseExpression("("+Qc.join(")\x26\x26(")+")",pc).$expr);null!=(Qc=Qb.throttle)&&(jb.throttle=+Qc);null!=(Qc=Qb.debounce)&&(jb.debounce=+Qc);Qb.consume&&(jb.consume=!0);return jb}function ua(jb,Qb,pc){const Qc=jb.encode,Cc={target:pc};pc=jb.events;let vd=jb.update,Wd=[];pc||f.error("Signal update missing events specification.");f.isString(pc)&&(pc=l.parseSelector(pc,
Qb.isSubscope()?"scope":"view"));pc=f.array(pc).filter(we=>we.signal||we.scale?(Wd.push(we),0):1);1<Wd.length&&(Wd=[Fa(Wd)]);pc.length&&Wd.push(1<pc.length?{merge:pc}:pc[0]);null!=Qc&&(vd&&f.error("Signal encode and update are mutually exclusive."),vd="encode(item(),"+f.stringValue(Qc)+")");Cc.update=f.isString(vd)?h.parseExpression(vd,Qb):null!=vd.expr?h.parseExpression(vd.expr,Qb):null!=vd.value?vd.value:null!=vd.signal?{$expr:jg,$params:{$value:Qb.signalRef(vd.signal)}}:f.error("Invalid signal update specification.");
jb.force&&(Cc.options={force:!0});Wd.forEach(we=>{var ue=Qb.addUpdate,sd=f.extend;we={source:we.signal?Qb.signalRef(we.signal):we.scale?Qb.scaleRef(we.scale):W(we,Qb)};return ue.call(Qb,sd.call(f,we,Cc))})}function Fa(jb){return{signal:"["+jb.map(Qb=>Qb.scale?'scale("'+Qb.scale+'")':Qb.signal)+"]"}}function Xa(jb,Qb){const pc=Qb.getSignal(jb.name);let Qc=jb.update;jb.init&&(Qc?f.error("Signals can not include both init and update expressions."):(Qc=jb.init,pc.initonly=!0));Qc&&(Qc=h.parseExpression(Qc,
Qb),pc.update=Qc.$expr,pc.params=Qc.$params);jb.on&&jb.on.forEach(Cc=>ua(Cc,Qb,pc.id))}function Sa(jb,Qb){return f.isObject(jb)?jb.signal?Qb.signalRef(jb.signal):f.error("Unsupported object: "+f.stringValue(jb)):jb}function eb(jb,Qb){return jb.signal?Qb.signalRef(jb.signal):jb.map(pc=>Sa(pc,Qb))}function Va(jb){f.error("Can not find data set: "+f.stringValue(jb))}function La(jb,Qb,pc){if(jb)return jb.signal?pc.signalRef(jb.signal):(f.isArray(jb)?Ra:jb.fields?ma:la)(jb,Qb,pc);null==Qb.domainMin&&null==
Qb.domainMax||f.error("No scale domain defined for domainMin/domainMax to override.")}function Ra(jb,Qb,pc){return jb.map(Qc=>Sa(Qc,pc))}function la(jb,Qb,pc){const Qc=pc.getData(jb.data);Qc||Va(jb.data);return u.isDiscrete(Qb.type)?Qc.valuesRef(pc,jb.field,Da(jb.sort,!1)):u.isQuantile(Qb.type)?Qc.domainRef(pc,jb.field):Qc.extentRef(pc,jb.field)}function ma(jb,Qb,pc){const Qc=jb.data,Cc=jb.fields.reduce((vd,Wd)=>{if(f.isString(Wd))Wd={data:Qc,field:Wd};else if(f.isArray(Wd)||Wd.signal){var we=Wd;
Wd="_:vega:_"+be++;const ue=pf({});f.isArray(we)?ue.value={$ingest:we}:we.signal&&(we="setdata("+f.stringValue(Wd)+","+we.signal+")",ue.params.input=pc.signalRef(we));pc.addDataPipeline(Wd,[ue,Pg({})]);Wd={data:Wd,field:"data"}}vd.push(Wd);return vd},[]);return(u.isDiscrete(Qb.type)?Aa:u.isQuantile(Qb.type)?Qa:Ea)(jb,pc,Cc)}function Aa(jb,Qb,pc){const Qc=Da(jb.sort,!0);jb=pc.map(vd=>{const Wd=Qb.getData(vd.data);Wd||Va(vd.data);return Wd.countsRef(Qb,vd.field,Qc)});const Cc={groupby:af,pulse:jb};
Qc&&(jb=Qc.op||"count",pc=Qc.field?r(jb,Qc.field):"count",Cc.ops=[Kf[jb]],Cc.fields=[Qb.fieldRef(pc)],Cc.as=[pc]);jb=Qb.add(If(Cc));jb=Qb.add(pf({pulse:z(jb)}));pc=Qb.add(Yf({field:af,sort:Qb.sortRef(Qc),pulse:z(jb)}));return z(pc)}function Da(jb,Qb){jb&&(jb.field||jb.op?jb.field||"count"===jb.op?Qb&&jb.field&&jb.op&&!Kf[jb.op]&&f.error("Multiple domain scales can not be sorted using "+jb.op):f.error("No field provided for sort aggregate op: "+jb.op):f.isObject(jb)?jb.field="key":jb={field:"key"});
return jb}function Qa(jb,Qb,pc){jb=pc.map(Qc=>{const Cc=Qb.getData(Qc.data);Cc||Va(Qc.data);return Cc.domainRef(Qb,Qc.field)});return z(Qb.add(Id({values:jb})))}function Ea(jb,Qb,pc){jb=pc.map(Qc=>{const Cc=Qb.getData(Qc.data);Cc||Va(Qc.data);return Cc.extentRef(Qb,Qc.field)});return z(Qb.add(Xc({extents:jb})))}function kb(jb,Qb,pc){const Qc=Qb.config.range;let Cc=jb.range;if(Cc.signal)return Qb.signalRef(Cc.signal);if(f.isString(Cc)){if(Qc&&f.hasOwnProperty(Qc,Cc))return jb=f.extend({},jb,{range:Qc[Cc]}),
kb(jb,Qb,pc);"width"===Cc?Cc=[0,{signal:"width"}]:"height"===Cc?Cc=u.isDiscrete(jb.type)?[0,{signal:"height"}]:[{signal:"height"},0]:f.error("Unrecognized scale range value: "+f.stringValue(Cc))}else{if(Cc.scheme){pc.scheme=f.isArray(Cc.scheme)?eb(Cc.scheme,Qb):Sa(Cc.scheme,Qb);Cc.extent&&(pc.schemeExtent=eb(Cc.extent,Qb));Cc.count&&(pc.schemeCount=Sa(Cc.count,Qb));return}if(Cc.step){pc.rangeStep=Sa(Cc.step,Qb);return}if(u.isDiscrete(jb.type)&&!f.isArray(Cc))return La(Cc,jb,Qb);f.isArray(Cc)||f.error("Unsupported range type: "+
f.stringValue(Cc))}return Cc.map(vd=>(f.isArray(vd)?eb:Sa)(vd,Qb))}function cb(jb,Qb,pc){return f.isArray(jb)?jb.map(Qc=>cb(Qc,Qb,pc)):f.isObject(jb)?jb.signal?pc.signalRef(jb.signal):"fit"===Qb?jb:f.error("Unsupported parameter object: "+f.stringValue(jb)):jb}function Mb(jb){jb.type="group";jb.interactive=jb.interactive||!1;return jb}function Gb(jb,Qb){const pc=(Qc,Cc)=>E(jb[Qc],E(Qb[Qc],Cc));pc.isVertical=Qc=>"vertical"===E(jb.direction,Qb.direction||(Qc?Qb.symbolDirection:Qb.gradientDirection));
pc.gradientLength=()=>E(jb.gradientLength,Qb.gradientLength||Qb.gradientWidth);pc.gradientThickness=()=>E(jb.gradientThickness,Qb.gradientThickness||Qb.gradientHeight);pc.entryColumns=()=>E(jb.columns,E(Qb.columns,+pc.isVertical(!0)));return pc}function Wb(jb,Qb){return(jb=Qb&&(Qb.update&&Qb.update[jb]||Qb.enter&&Qb.enter[jb]))&&jb.signal?jb:jb?jb.value:null}function sa(jb,Qb,pc){return`item.anchor === '${"start"}' ? ${jb} : item.anchor === '${"end"}' ? ${Qb} : ${pc}`}function ra(jb,Qb){return Qb?
jb?f.isObject(jb)?Object.assign({},jb,{offset:ra(jb.offset,Qb)}):{value:jb,offset:Qb}:Qb:jb}function xa(jb,Qb){Qb?(jb.name=Qb.name,jb.style=Qb.style||jb.style,jb.interactive=!!Qb.interactive,jb.encode=S(jb.encode,Qb,Ue)):jb.interactive=!1;return jb}function Ia(jb,Qb,pc,Qc){jb=Gb(jb,pc);var Cc=jb.isVertical();pc=jb.gradientThickness();const vd=jb.gradientLength();let Wd,we,ue;Cc?(Cc=[0,1],we=[0,0],ue=pc,pc=vd):(Cc=[0,0],we=[1,0],ue=vd);Qb={enter:Wd={opacity:Pf,x:Pf,y:Pf,width:Ad(ue),height:Ad(pc)},
update:f.extend({},Wd,{opacity:Ig,fill:{gradient:Qb,start:Cc,stop:we}}),exit:{opacity:Pf}};X(Qb,{stroke:jb("gradientStrokeColor"),strokeWidth:jb("gradientStrokeWidth")},{opacity:jb("gradientOpacity")});return xa({type:"rect",role:"legend-gradient",encode:Qb},Qc)}function bb(jb,Qb,pc,Qc,Cc){jb=Gb(jb,pc);const vd=jb.isVertical();pc=jb.gradientThickness();const Wd=jb.gradientLength();var we;let ue,sd,Fe,Ge="";vd?(we="y",sd="y2",ue="x",Fe="width",Ge="1-"):(we="x",sd="x2",ue="y",Fe="height");Qb={opacity:Pf,
fill:{scale:Qb,field:"value"}};Qb[we]={signal:Ge+"datum.perc",mult:Wd};Qb[ue]=Pf;Qb[sd]={signal:Ge+"datum.perc2",mult:Wd};Qb[Fe]=Ad(pc);we={enter:Qb,update:f.extend({},Qb,{opacity:Ig}),exit:{opacity:Pf}};X(we,{stroke:jb("gradientStrokeColor"),strokeWidth:jb("gradientStrokeWidth")},{opacity:jb("gradientOpacity")});return xa({type:"rect",role:"legend-band",key:"value",from:Cc,encode:we},Qc)}function Hb(jb,Qb,pc,Qc){const Cc=Gb(jb,Qb);var vd=Cc.isVertical();const Wd=Ad(Cc.gradientThickness()),we=Cc.gradientLength();
let ue=Cc("labelOverlap"),sd,Fe,Ge,Me="";const rf={enter:sd={opacity:Pf},update:Fe={opacity:Ig,text:{field:"label"}},exit:{opacity:Pf}};X(rf,{fill:Cc("labelColor"),fillOpacity:Cc("labelOpacity"),font:Cc("labelFont"),fontSize:Cc("labelFontSize"),fontStyle:Cc("labelFontStyle"),fontWeight:Cc("labelFontWeight"),limit:E(jb.labelLimit,Qb.gradientLabelLimit)});vd?(sd.align={value:"left"},sd.baseline=Fe.baseline={signal:'datum.perc\x3c\x3d0?"bottom":datum.perc\x3e\x3d1?"top":"middle"'},vd="y",Ge="x",Me="1-"):
(sd.align=Fe.align={signal:'datum.perc\x3c\x3d0?"left":datum.perc\x3e\x3d1?"right":"center"'},sd.baseline={value:"top"},vd="x",Ge="y");sd[vd]=Fe[vd]={signal:Me+"datum.perc",mult:we};sd[Ge]=Fe[Ge]=Wd;Wd.offset=E(jb.labelOffset,Qb.gradientLabelOffset)||0;ue=ue?{separation:Cc("labelSeparation"),method:ue,order:"datum.index"}:void 0;return xa({type:"text",role:"legend-label",style:"guide-label",key:"value",from:Qc,encode:rf,overlap:ue},pc)}function zb(jb,Qb,pc,Qc,Cc){var vd=Gb(jb,Qb);const Wd=pc.entries,
we=!(!Wd||!Wd.interactive),ue=Wd?Wd.name:void 0,sd=vd("clipHeight"),Fe=vd("symbolOffset"),Ge={data:"value"},Me=`(${Cc}) ? datum.${"offset"} : datum.${"size"}`,rf=sd?Ad(sd):{field:"size"},Ma=`max(1, ${Cc})`;let lb,vb;rf.mult=.5;var nb={enter:lb={opacity:Pf,x:{signal:Me,mult:.5,offset:Fe},y:rf},update:vb={opacity:Ig,x:lb.x,y:lb.y},exit:{opacity:Pf}};let ac=null,yc=null;jb.fill||(ac=Qb.symbolBaseFillColor,yc=Qb.symbolBaseStrokeColor);X(nb,{fill:vd("symbolFillColor",ac),shape:vd("symbolType"),size:vd("symbolSize"),
stroke:vd("symbolStrokeColor",yc),strokeDash:vd("symbolDash"),strokeDashOffset:vd("symbolDashOffset"),strokeWidth:vd("symbolStrokeWidth")},{opacity:vd("symbolOpacity")});he.forEach(Mc=>{jb[Mc]&&(vb[Mc]=lb[Mc]={scale:jb[Mc],field:"value"})});Qb=xa({type:"symbol",role:"legend-symbol",key:"value",from:Ge,clip:sd?!0:void 0,encode:nb},pc.symbols);nb=Ad(Fe);nb.offset=vd("labelOffset");nb={enter:lb={opacity:Pf,x:{signal:Me,offset:nb},y:rf},update:vb={opacity:Ig,text:{field:"label"},x:lb.x,y:lb.y},exit:{opacity:Pf}};
X(nb,{align:vd("labelAlign"),baseline:vd("labelBaseline"),fill:vd("labelColor"),fillOpacity:vd("labelOpacity"),font:vd("labelFont"),fontSize:vd("labelFontSize"),fontStyle:vd("labelFontStyle"),fontWeight:vd("labelFontWeight"),limit:vd("labelLimit")});pc=xa({type:"text",role:"legend-label",style:"guide-label",key:"value",from:Ge,encode:nb},pc.labels);nb={enter:{noBound:{value:!sd},width:Pf,height:sd?Ad(sd):Pf,opacity:Pf},exit:{opacity:Pf},update:vb={opacity:Ig,row:{signal:null},column:{signal:null}}};
vd.isVertical(!0)?(vd=`ceil(item.mark.items.length / ${Ma})`,vb.row.signal=`${"datum.index"}%${vd}`,vb.column.signal=`floor(${"datum.index"} / ${vd})`,vd={field:["row","datum.index"]}):(vb.row.signal=`floor(${"datum.index"} / ${Ma})`,vb.column.signal=`${"datum.index"} % ${Ma}`,vd={field:"datum.index"});vb.column.signal=`(${Cc})?${vb.column.signal}:${"datum.index"}`;Qc={facet:{data:Qc,name:"value",groupby:"index"}};return Mb({role:"scope",from:Qc,encode:S(nb,Wd,Ue),marks:[Qb,pc],name:ue,interactive:we,
sort:vd})}function mb(jb,Qb){jb=Gb(jb,Qb);return{align:jb("gridAlign"),columns:jb.entryColumns(),center:{row:!0,column:!1},padding:{row:jb("rowPadding"),column:jb("columnPadding")}}}function Jb(jb,Qb,pc,Qc){Qb=Gb(jb,Qb);const Cc={enter:{opacity:Pf},update:{opacity:Ig,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:Pf}};X(Cc,{orient:Qb("titleOrient"),_anchor:Qb("titleAnchor"),anchor:{signal:'item._anchor || ((item.orient \x3d\x3d\x3d "left" || item.orient \x3d\x3d\x3d "right") ? "middle" : "start")'},
angle:{signal:'datum.vgrad \x26\x26 (item.orient \x3d\x3d\x3d "left" || item.orient \x3d\x3d\x3d "right") ? (item.orient \x3d\x3d\x3d "left" ? -90 : 90) : 0'},align:{signal:fc},baseline:{signal:lc},text:jb.title,fill:Qb("titleColor"),fillOpacity:Qb("titleOpacity"),font:Qb("titleFont"),fontSize:Qb("titleFontSize"),fontStyle:Qb("titleFontStyle"),fontWeight:Qb("titleFontWeight"),limit:Qb("titleLimit"),lineHeight:Qb("titleLineHeight")},{align:Qb("titleAlign"),baseline:Qb("titleBaseline")});return xa({type:"text",
role:"legend-title",style:"guide-title",from:Qc,encode:Cc},pc)}function Eb(jb,Qb){let pc;f.isObject(jb)&&(jb.signal?pc=jb.signal:jb.path?pc="pathShape("+Db(jb.path)+")":jb.sphere&&(pc="geoShape("+Db(jb.sphere)+', {type: "Sphere"})'));return pc?Qb.signalRef(pc):!!jb}function Db(jb){return f.isObject(jb)&&jb.signal?jb.signal:f.stringValue(jb)}function bc(jb){const Qb=jb.role||"";return Qb.indexOf("axis")&&Qb.indexOf("legend")&&Qb.indexOf("title")?"group"===jb.type?"scope":Qb||"mark":Qb}function jc(jb){return{marktype:jb.type,
name:jb.name||void 0,role:jb.role||bc(jb),zindex:+jb.zindex||void 0,aria:jb.aria,description:jb.description}}function Tc(jb,Qb){return jb&&jb.signal?Qb.signalRef(jb.signal):!1===jb?!1:!0}function ub(jb,Qb){const pc=q.definition(jb.type);pc||f.error("Unrecognized transform type: "+f.stringValue(jb.type));var Qc=pc.type.toLowerCase();var Cc=Rc(pc,jb,Qb);Qc=new T(Qc,null,Cc,void 0);jb.signal&&Qb.addSignal(jb.signal,Qb.proxy(Qc));Qc.metadata=pc.metadata||{};return Qc}function Rc(jb,Qb,pc){const Qc={},
Cc=jb.params.length;for(let vd=0;vd<Cc;++vd){const Wd=jb.params[vd];Qc[Wd.name]=Gd(Wd,Qb,pc)}return Qc}function Gd(jb,Qb,pc){const Qc=jb.type,Cc=Qb[jb.name];if("index"===Qc)return Vd(jb,Qb,pc);if(void 0===Cc)jb.required&&f.error("Missing required "+f.stringValue(Qb.type)+" parameter: "+f.stringValue(jb.name));else return"param"===Qc?ze(jb,Qb,pc):"projection"===Qc?pc.projectionRef(Qb[jb.name]):jb.array&&!Y(Cc)?Cc.map(vd=>Kd(jb,vd,pc)):Kd(jb,Cc,pc)}function Kd(jb,Qb,pc){const Qc=jb.type;return Y(Qb)?
"expr"===Qc?f.error("Expression references can not be signals."):"field"===Qc?pc.fieldRef(Qb):"compare"===Qc?pc.compareRef(Qb):pc.signalRef(Qb.signal):(jb=jb.expr||"field"===Qc)&&Qb&&Qb.expr?pc.exprRef(Qb.expr,Qb.as):jb&&Qb&&Qb.field?ba(Qb.field,Qb.as):"expr"===Qc?h.parseExpression(Qb,pc):"data"===Qc?z(pc.getData(Qb).values):"field"===Qc?ba(Qb):"compare"===Qc?pc.compareRef(Qb):Qb}function Vd(jb,Qb,pc){f.isString(Qb.from)||f.error('Lookup "from" parameter must be a string literal.');return pc.getData(Qb.from).lookupRef(pc,
Qb.key)}function ze(jb,Qb,pc){Qb=Qb[jb.name];return jb.array?(f.isArray(Qb)||f.error("Expected an array of sub-parameters. Instead: "+f.stringValue(Qb)),Qb.map(Qc=>ee(jb,Qc,pc))):ee(jb,Qb,pc)}function ee(jb,Qb,pc){const Qc=jb.params.length;let Cc;for(let vd=0;vd<Qc;++vd){Cc=jb.params[vd];for(const Wd in Cc.key)if(Cc.key[Wd]!==Qb[Wd]){Cc=null;break}if(Cc)break}Cc||f.error("Unsupported parameter: "+f.stringValue(Qb));jb=f.extend(Rc(Cc,Qb,pc),Cc.key);return z(pc.add(nf(jb)))}function bd(jb,Qb,pc){let Qc,
Cc,vd,Wd;if(!jb)vd=z(pc.add(pf(null,[{}])));else if(Qc=jb.facet)Qb||f.error("Only group marks can be faceted."),null!=Qc.field?vd=Wd=Bd(Qc,pc):(jb.data?Wd=z(pc.getData(jb.data).aggregate):(Qb=ub(f.extend({type:"aggregate",groupby:f.array(Qc.groupby)},Qc.aggregate),pc),Qb.params.key=pc.keyRef(Qc.groupby),Qb.params.pulse=Bd(Qc,pc),vd=Wd=z(pc.add(Qb))),Cc=pc.keyRef(Qc.groupby,!0));vd||(vd=Bd(jb,pc));return{key:Cc,pulse:vd,parent:Wd}}function Bd(jb,Qb){return jb.$ref?jb:jb.data&&jb.data.$ref?jb.data:
z(Qb.getData(jb.data).output)}function Ld(jb,Qb,pc,Qc,Cc){this.scope=jb;this.input=Qb;this.output=pc;this.values=Qc;this.aggregate=Cc;this.index={}}function fe(jb){return f.isString(jb)?jb:null}function Ee(jb,Qb,pc){const Qc=r(pc.op,pc.field);let Cc;if(Qb.ops)for(let vd=0,Wd=Qb.as.length;vd<Wd;++vd){if(Qb.as[vd]===Qc)return}else Qb.ops=["count"],Qb.fields=[null],Qb.as=["count"];pc.op&&(Qb.ops.push((Cc=pc.op.signal)?jb.signalRef(Cc):pc.op),Qb.fields.push(jb.fieldRef(pc.field)),Qb.as.push(Qc))}function dd(jb,
Qb,pc,Qc,Cc,vd,Wd){pc=Qb[pc]||(Qb[pc]={});var we=f.isObject(vd)?("descending"===vd.order?"-":"+")+r(vd.op,vd.field):"";let ue=fe(Cc);if(null!=ue){jb=Qb.scope;ue+=we?"|"+we:"";var sd=pc[ue]}sd||(sd=vd?{field:af,pulse:Qb.countsRef(jb,Cc,vd)}:{field:jb.fieldRef(Cc),pulse:z(Qb.output)},we&&(sd.sort=jb.sortRef(vd)),jb=jb.add(new T(Qc,void 0,sd,void 0)),Wd&&(Qb.index[Cc]=jb),sd=z(jb),null!=ue&&(pc[ue]=sd));return sd}function nd(jb,Qb,pc){var Qc=jb.from.facet;const Cc=Qc.name,vd=Bd(Qc,Qb);let Wd;Qc.name||
f.error("Facet must have a name: "+f.stringValue(Qc));Qc.data||f.error("Facet must reference a data set: "+f.stringValue(Qc));Qc.field?Wd=Qb.add(Se({field:Qb.fieldRef(Qc.field),pulse:vd})):Qc.groupby?Wd=Qb.add(zc({key:Qb.keyRef(Qc.groupby),group:z(Qb.proxy(pc.parent)),pulse:vd})):f.error("Facet must specify groupby or field: "+f.stringValue(Qc));Qb=Qb.fork();pc=Qb.add(pf());Qc=Qb.add(Pg({pulse:z(pc)}));Qb.addData(Cc,new Ld(Qb,pc,pc,Qc));Qb.addSignal("parent",null);Wd.params.subflow={$subflow:Qb.parse(jb).toRuntime()}}
function Dc(jb,Qb,pc){pc=Qb.add(Se({pulse:pc.pulse}));Qb=Qb.fork();Qb.add(Pg());Qb.addSignal("parent",null);pc.params.subflow={$subflow:Qb.parse(jb).toRuntime()}}function jd(jb,Qb,pc){const Qc=jb.remove,Cc=jb.insert,vd=jb.toggle,Wd=jb.modify,we=jb.values,ue=Qb.add(new T("operator",void 0,void 0,void 0));jb="if("+jb.trigger+',modify("'+pc+'",'+[Cc,Qc,vd,Wd,we].map(sd=>null==sd?"null":sd).join(",")+"),0)";Qb=h.parseExpression(jb,Qb);ue.update=Qb.$expr;ue.params=Qb.$params}function Qd(jb,Qb){var pc=
bc(jb),Qc="group"===jb.type,Cc=jb.from&&jb.from.facet;const vd=jb.overlap;let Wd=jb.layout||"scope"===pc||"frame"===pc,we,ue,sd,Fe,Ge,Me;const rf="mark"===pc||Wd||Cc,Ma=bd(jb.from,Qc,Qb);ue=Qb.add(wg({key:Ma.key||(jb.key?ba(jb.key):void 0),pulse:Ma.pulse,clean:!Qc}));const lb=z(ue);ue=sd=Qb.add(pf({pulse:lb}));ue=Qb.add(Xb({markdef:jc(jb),interactive:Tc(jb.interactive,Qb),clip:Eb(jb.clip,Qb),context:{$context:!0},groups:Qb.lookup(),parent:Qb.signals.parent?Qb.signalRef("parent"):null,index:Qb.markpath(),
pulse:z(ue)}));var vb=z(ue);ue=Fe=Qb.add(Tf(O(jb.encode,jb.type,pc,jb.style,Qb,{mod:!1,pulse:vb})));ue.params.parent=Qb.encode();jb.transform&&jb.transform.forEach(ac=>{ac=ub(ac,Qb);const yc=ac.metadata;(yc.generates||yc.changes)&&f.error("Mark transforms should not generate new data.");yc.nomod||(Fe.params.mod=!0);ac.params.pulse=z(ue);Qb.add(ue=ac)});jb.sort&&(ue=Qb.add(dh({sort:Qb.compareRef(jb.sort),pulse:z(ue)})));pc=z(ue);if(Cc||Wd)Wd=Qb.add(Zg({layout:Qb.objectProperty(jb.layout),legends:Qb.legends,
mark:vb,pulse:pc})),Me=z(Wd);const nb=Qb.add(zg({mark:vb,pulse:Me||pc}));vb=z(nb);Qc&&(rf&&(we=Qb.operators,we.pop(),Wd&&we.pop()),Qb.pushState(pc,Me||vb,lb),Cc?nd(jb,Qb,Ma):rf?Dc(jb,Qb,Ma):Qb.parse(jb),Qb.popState(),rf&&(Wd&&we.push(Wd),we.push(nb)));vd&&(vb=ae(vd,vb,Qb));Qc=Qb.add(Jf({pulse:vb}));Cc=Qb.add(Pg({pulse:z(Qc)},void 0,Qb.parent()));null!=jb.name&&(Ge=jb.name,Qb.addData(Ge,new Ld(Qb,sd,Qc,Cc)),jb.on&&jb.on.forEach(ac=>{(ac.insert||ac.remove||ac.toggle)&&f.error("Marks only support modify triggers.");
jd(ac,Qb,Ge)}))}function ae(jb,Qb,pc){const Qc=jb.method,Cc=jb.bound,vd=jb.separation;Qb={separation:Y(vd)?pc.signalRef(vd.signal):vd,method:Y(Qc)?pc.signalRef(Qc.signal):Qc,pulse:Qb};jb.order&&(Qb.sort=pc.compareRef({field:jb.order}));Cc&&(jb=Cc.tolerance,Qb.boundTolerance=Y(jb)?pc.signalRef(jb.signal):+jb,Qb.boundScale=pc.scaleRef(Cc.scale),Qb.boundOrient=Cc.orient);return z(pc.add(Td(Qb)))}function te(jb,Qb){const pc=Qb.config.legend,Qc=jb.encode||{},Cc=Gb(jb,pc),vd=Qc.legend||{},Wd=vd.name||void 0,
we=vd.interactive,ue=vd.style,sd={};let Fe=0,Ge,Me;he.forEach(nb=>jb[nb]?(sd[nb]=jb[nb],Fe=Fe||jb[nb]):0);Fe||f.error("Missing valid scale for legend.");var rf=Bb(jb,Qb.scaleType(Fe));const Ma={title:null!=jb.title,scales:sd,type:rf,vgrad:"symbol"!==rf&&Cc.isVertical()},lb=z(Qb.add(pf(null,[Ma]))),vb=z(Qb.add(m(Me={type:rf,scale:Qb.scaleRef(Fe),count:Qb.objectProperty(Cc("tickCount")),limit:Qb.property(Cc("symbolLimit")),values:Qb.objectProperty(jb.values),minstep:Qb.property(jb.tickMinStep),formatType:Qb.property(jb.formatType),
formatSpecifier:Qb.property(jb.format)})));"gradient"===rf?(rf=[Ia(jb,Fe,pc,Qc.gradient),Hb(jb,pc,Qc.labels,vb)],Me.count=Me.count||Qb.signalRef(`max(2,2*floor((${C(Cc.gradientLength())})/100))`)):"discrete"===rf?rf=[bb(jb,Fe,pc,Qc.gradient,vb),Hb(jb,pc,Qc.labels,vb)]:(Ge=mb(jb,pc),rf=[zb(jb,pc,Qc,vb,C(Ge.columns))],Me.size=Jc(jb,Qb,rf[0].marks));rf=[Mb({role:"legend-entry",from:lb,encode:{enter:{x:{value:0},y:{value:0}}},marks:rf,layout:Ge,interactive:we})];Ma.title&&rf.push(Jb(jb,pc,Qc.title,lb));
return Qd(Mb({role:"legend",from:lb,encode:S(Gc(Cc,jb,pc),vd,Ue),marks:rf,aria:Cc("aria"),description:Cc("description"),zindex:Cc("zindex"),name:Wd,interactive:we,style:ue}),Qb)}function Bb(jb,Qb){let pc=jb.type||"symbol";jb.type||1!==$b(jb)||!jb.fill&&!jb.stroke||(pc=u.isContinuous(Qb)?"gradient":u.isDiscretizing(Qb)?"discrete":"symbol");return"gradient"!==pc?pc:u.isDiscretizing(Qb)?"discrete":"gradient"}function $b(jb){return he.reduce((Qb,pc)=>Qb+(jb[pc]?1:0),0)}function Gc(jb,Qb,pc){const Qc=
{enter:{},update:{}};X(Qc,{orient:jb("orient"),offset:jb("offset"),padding:jb("padding"),titlePadding:jb("titlePadding"),cornerRadius:jb("cornerRadius"),fill:jb("fillColor"),stroke:jb("strokeColor"),strokeWidth:pc.strokeWidth,strokeDash:pc.strokeDash,x:jb("legendX"),y:jb("legendY"),format:Qb.format,formatType:Qb.formatType});return Qc}function Jc(jb,Qb,pc){const Qc=C(ud("size",jb,pc));jb=C(ud("strokeWidth",jb,pc));(pc=Wb("fontSize",pc[1].encode))||(pc=(pc=Qb.config.style["guide-label"])&&pc.fontSize);
pc=C(pc);return h.parseExpression(`max(ceil(sqrt(${Qc})+${jb}),${pc})`,Qb)}function ud(jb,Qb,pc){return Qb[jb]?`scale("${Qb[jb]}",datum)`:Wb(jb,pc[0].encode)}function Zc(jb,Qb){jb=f.isString(jb)?{text:jb}:jb;const pc=Gb(jb,Qb.config.title);var Qc=jb.encode||{},Cc=Qc.group||{};const vd=Cc.name||void 0,Wd=Cc.interactive,we=Cc.style,ue=[],sd=z(Qb.add(pf(null,[{}])));var Fe=ue.push,Ge=jb;var Me=(Me=jb.encode)&&Me.title||f.extend({name:jb.name,interactive:jb.interactive,style:jb.style},Me);var rf={value:0};
rf={enter:{opacity:rf},update:{opacity:{value:1}},exit:{opacity:rf}};X(rf,{text:Ge.text,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:pc("dx"),dy:pc("dy"),fill:pc("color"),font:pc("font"),fontSize:pc("fontSize"),fontStyle:pc("fontStyle"),fontWeight:pc("fontWeight"),lineHeight:pc("lineHeight")},{align:pc("align"),angle:pc("angle"),baseline:pc("baseline")});Ge=xa({type:"text",role:"title-text",style:"group-title",
from:sd,encode:rf},Me);Fe.call(ue,Ge);jb.subtitle&&(Fe=ue.push,Qc=Qc.subtitle,Ge={value:0},Ge={enter:{opacity:Ge},update:{opacity:{value:1}},exit:{opacity:Ge}},X(Ge,{text:jb.subtitle,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:pc("dx"),dy:pc("dy"),fill:pc("subtitleColor"),font:pc("subtitleFont"),fontSize:pc("subtitleFontSize"),fontStyle:pc("subtitleFontStyle"),fontWeight:pc("subtitleFontWeight"),lineHeight:pc("subtitleLineHeight")},
{align:pc("align"),angle:pc("angle"),baseline:pc("baseline")}),jb=xa({type:"text",role:"title-subtitle",style:"group-subtitle",from:sd,encode:Ge},Qc),Fe.call(ue,jb));jb={enter:{},update:{}};X(jb,{orient:pc("orient"),anchor:pc("anchor"),align:{signal:Ya},angle:{signal:'item.orient\x3d\x3d\x3d"left"?-90:item.orient\x3d\x3d\x3d"right"?90:0'},limit:pc("limit"),frame:pc("frame"),offset:pc("offset")||0,padding:pc("subtitlePadding")});Cc=S(jb,Cc,Ue);return Qd(Mb({role:"title",from:sd,encode:Cc,marks:ue,
aria:pc("aria"),description:pc("description"),zindex:pc("zindex"),name:vd,interactive:Wd,style:we}),Qb)}function xd(jb,Qb){const pc=[];jb.transform&&jb.transform.forEach(Qc=>{pc.push(ub(Qc,Qb))});jb.on&&jb.on.forEach(Qc=>{jd(Qc,Qb,jb.name)});Qb.addDataPipeline(jb.name,Sd(jb,Qb,pc))}function Sd(jb,Qb,pc){const Qc=[];let Cc=null,vd=!1,Wd=!1,we,ue,sd,Fe;jb.values?Y(jb.values)||Z(jb.format)?(Qc.push(Be(Qb,jb)),Qc.push(Cc=ie())):Qc.push(Cc=ie({$ingest:jb.values,$format:jb.format})):jb.url?Z(jb.url)||Z(jb.format)?
(Qc.push(Be(Qb,jb)),Qc.push(Cc=ie())):Qc.push(Cc=ie({$request:jb.url,$format:jb.format})):jb.source&&(Cc=we=f.array(jb.source).map(Ge=>z(Qb.getData(Ge).output)),Qc.push(null));jb=0;for(ue=pc.length;jb<ue;++jb)sd=pc[jb],Fe=sd.metadata,Cc||Fe.source||Qc.push(Cc=ie()),Qc.push(sd),Fe.generates&&(Wd=!0),Fe.modifies&&!Wd&&(vd=!0),Fe.source?Cc=sd:Fe.changes&&(Cc=null);we&&(ue=we.length-1,Qc[0]=jf({derive:vd,pulse:ue?we:we[0]}),(vd||ue)&&Qc.splice(1,0,ie()));Cc||Qc.push(ie());Qc.push(Pg({}));return Qc}function ie(jb){jb=
pf({},jb);jb.metadata={source:!0};return jb}function Be(jb,Qb){return Na({url:Qb.url?jb.property(Qb.url):void 0,async:Qb.async?jb.property(Qb.async):void 0,values:Qb.values?jb.property(Qb.values):void 0,format:jb.objectProperty(Qb.format)})}function uc(jb,Qb,pc,Qc){let Cc;if(Qb&&f.hasOwnProperty(Qb,jb))return Qb[jb];if(f.hasOwnProperty(pc,jb))return pc[jb];if(jb.startsWith("title")){switch(jb){case "titleColor":Cc="fill";break;case "titleFont":case "titleFontSize":case "titleFontWeight":Cc=jb[5].toLowerCase()+
jb.slice(6)}return Qc["guide-title"][Cc]}if(jb.startsWith("label")){switch(jb){case "labelColor":Cc="fill";break;case "labelFont":case "labelFontSize":Cc=jb[5].toLowerCase()+jb.slice(6)}return Qc["guide-label"][Cc]}return null}function Oc(jb){const Qb={};for(const pc of jb)if(pc)for(const Qc in pc)Qb[Qc]=1;return Object.keys(Qb)}function Nd(jb,Qb,pc,Qc,Cc){return{signal:'flush(range("'+jb+'"), scale("'+jb+'", datum.value), '+Qb+","+pc+","+Qc+","+Cc+")"}}function Od(jb,Qb,pc,Qc){const Cc=(Wd,we)=>
null!=Wd?(pc.update[we]=ed(Ad(Wd),pc.update[we]),!1):V(we,Qc)?!1:!0,vd=Cc(jb("titleX"),"x");jb=Cc(jb("titleY"),"y");pc.enter.auto=jb===vd?Ad(jb):Pc(Qb,Ad(jb),Ad(vd))}function pe(jb,Qb,pc){const Qc=f.array(jb.signals),Cc=f.array(jb.scales);pc||Qc.forEach(vd=>J(vd,Qb));f.array(jb.projections).forEach(vd=>{const Wd=Qb.config.projection||{},we={};for(const ue in vd)"name"!==ue&&(we[ue]=cb(vd[ue],ue,Qb));for(const ue in Wd)null==we[ue]&&(we[ue]=cb(Wd[ue],ue,Qb));Qb.addProjection(vd.name,we)});Cc.forEach(vd=>
{const Wd=vd.type||"linear";u.isValidScaleType(Wd)||f.error("Unrecognized scale type: "+f.stringValue(Wd));Qb.addScale(vd.name,{type:Wd,domain:void 0})});f.array(jb.data).forEach(vd=>xd(vd,Qb));Cc.forEach(vd=>{const Wd=Qb.getScale(vd.name).params;let we;Wd.domain=La(vd.domain,vd,Qb);null!=vd.range&&(Wd.range=kb(vd,Qb,Wd));if(null!=vd.interpolate){var ue=vd.interpolate;Wd.interpolate=Sa(ue.type||ue);null!=ue.gamma&&(Wd.interpolateGamma=Sa(ue.gamma))}null!=vd.nice&&(ue=vd.nice,ue=f.isObject(ue)?{interval:Sa(ue.interval),
step:Sa(ue.step)}:Sa(ue),Wd.nice=ue);null!=vd.bins&&(ue=vd.bins,ue=ue.signal||f.isArray(ue)?eb(ue,Qb):Qb.objectProperty(ue),Wd.bins=ue);for(we in vd)f.hasOwnProperty(Wd,we)||"name"===we||(Wd[we]=Sa(vd[we],Qb))});(pc||Qc).forEach(vd=>Xa(vd,Qb));f.array(jb.axes).forEach(vd=>{var Wd=Qb.config,we=Wd.style,ue=Wd.axis,sd="band"===Qb.scaleType(vd.scale)&&Wd.axisBand,Fe=vd.orient,Ge;if(Y(Fe)){const gc=Oc([Wd.axisX,Wd.axisY]),Ac=Oc([Wd.axisTop,Wd.axisBottom,Wd.axisLeft,Wd.axisRight]);var Me={};for(Ge of gc)Me[Ge]=
Pc(Fe,uc(Ge,Wd.axisX,ue,we),uc(Ge,Wd.axisY,ue,we));var rf={};for(Ge of Ac){var Ma=rf,lb=Ge,vb=Fe.signal,nb=uc(Ge,Wd.axisTop,ue,we),ac=uc(Ge,Wd.axisBottom,ue,we),yc=uc(Ge,Wd.axisLeft,ue,we),Mc=uc(Ge,Wd.axisRight,ue,we);var md={signal:(null!=yc?`${vb} === '${"left"}' ? (${vc(yc)}) : `:"")+(null!=ac?`${vb} === '${"bottom"}' ? (${vc(ac)}) : `:"")+(null!=Mc?`${vb} === '${"right"}' ? (${vc(Mc)}) : `:"")+(null!=nb?`${vb} === '${"top"}' ? (${vc(nb)}) : `:"")+"(null)"};Ma[lb]=md}}else Me="top"===Fe||"bottom"===
Fe?Wd.axisX:Wd.axisY,rf=Wd["axis"+Fe[0].toUpperCase()+Fe.slice(1)];var yd=Me||rf||sd?f.extend({},ue,Me,rf,sd):ue;const ne=vd.encode||{},Le=ne.axis||{},Qe=Le.name||void 0,Xe=Le.interactive,Ed=Le.style,kf=Gb(vd,yd),og=kf("tickBand");let kg=kf("tickOffset"),Uf,dg;og?og.signal?(Uf={signal:`(${og.signal}) === 'extent' ? 1 : 0.5`},dg={signal:`(${og.signal}) === 'extent'`},f.isObject(kg)||(kg={signal:`(${og.signal}) === 'extent' ? 0 : ${kg}`})):"extent"===og?(Uf=1,dg=!0,kg=0):(Uf=.5,dg=!1):(Uf=kf("bandPosition"),
dg=kf("tickExtra"));var tg=dg;var fh=Uf;var sb=kg;const tb={scale:vd.scale,ticks:!!kf("ticks"),labels:!!kf("labels"),grid:!!kf("grid"),domain:!!kf("domain"),title:null!=vd.title},Lb=z(Qb.add(pf({},[tb]))),Vb=z(Qb.add(hg({scale:Qb.scaleRef(vd.scale),extra:Qb.property(tg),count:Qb.objectProperty(vd.tickCount),values:Qb.objectProperty(vd.values),minstep:Qb.property(vd.tickMinStep),formatType:Qb.property(vd.formatType),formatSpecifier:Qb.property(vd.format)}))),hc=[];let dc;if(tb.grid){var Fc=hc.push,
Yc=ne.grid;const gc=Gb(vd,yd),Ac=vd.orient,Uc=vd.gridScale,y=rc(Ac,1,-1);a:{var Nc=vd.offset,fd=y;if(1!==fd)if(f.isObject(Nc)){let Pe=Nc=f.extend({},Nc);for(;null!=Pe.mult;)if(f.isObject(Pe.mult))Pe=Pe.mult=f.extend({},Pe.mult);else{Pe.mult=Y(fd)?{signal:`(${Pe.mult}) * (${fd.signal})`}:Pe.mult*fd;var mc=Nc;break a}Pe.mult=fd}else Nc=Y(fd)?{signal:`(${fd.signal}) * (${Nc||0})`}:fd*(Nc||0);mc=Nc}const wa=mc;let fb,Ib,kc;const $c={enter:fb={opacity:Pf},update:kc={opacity:Ig},exit:Ib={opacity:Pf}};X($c,
{stroke:gc("gridColor"),strokeCap:gc("gridCap"),strokeDash:gc("gridDash"),strokeDashOffset:gc("gridDashOffset"),strokeOpacity:gc("gridOpacity"),strokeWidth:gc("gridWidth")});const zd={scale:vd.scale,field:"value",band:fh,extra:tg,offset:sb,round:gc("tickRound")},rd=Pc(Ac,{signal:"height"},{signal:"width"}),Zd=Uc?{scale:Uc,range:0,mult:y,offset:wa}:{value:0,offset:wa},ve=Uc?{scale:Uc,range:1,mult:y,offset:wa}:f.extend(rd,{mult:y,offset:wa});fb.x=kc.x=Pc(Ac,zd,Zd);fb.y=kc.y=$a(Ac,zd,Zd);fb.x2=kc.x2=
$a(Ac,ve);fb.y2=kc.y2=Pc(Ac,ve);Ib.x=Pc(Ac,zd);Ib.y=$a(Ac,zd);var wd=xa({type:"rule",role:"axis-grid",key:"value",from:Vb,encode:$c},Yc);Fc.call(hc,wd)}if(tb.ticks){dc=kf("tickSize");var Xd=hc.push,ce=ne.ticks,De=dc;const gc=Gb(vd,yd),Ac=vd.orient,Uc=rc(Ac,-1,1);let y,wa,fb;const Ib={enter:y={opacity:Pf},update:fb={opacity:Ig},exit:wa={opacity:Pf}};X(Ib,{stroke:gc("tickColor"),strokeCap:gc("tickCap"),strokeDash:gc("tickDash"),strokeDashOffset:gc("tickDashOffset"),strokeOpacity:gc("tickOpacity"),strokeWidth:gc("tickWidth")});
const kc=Ad(De);kc.mult=Uc;const $c={scale:vd.scale,field:"value",band:fh,extra:tg,offset:sb,round:gc("tickRound")};fb.y=y.y=Pc(Ac,Pf,$c);fb.y2=y.y2=Pc(Ac,kc);wa.x=Pc(Ac,$c);fb.x=y.x=$a(Ac,Pf,$c);fb.x2=y.x2=$a(Ac,kc);wa.y=$a(Ac,$c);var Ua=xa({type:"rule",role:"axis-tick",key:"value",from:Vb,encode:Ib},ce);Xd.call(hc,Ua)}if(tb.labels){dc=tb.ticks?dc:0;var pb=hc.push,Rb=ne.labels,ec=dc;const gc=Gb(vd,yd),Ac=vd.orient,Uc=vd.scale,y=rc(Ac,-1,1),wa=C(gc("labelFlush")),fb=C(gc("labelFlushOffset")),Ib=gc("labelAlign"),
kc=gc("labelBaseline");let $c=0===wa||!!wa,zd;const rd=Ad(ec);rd.mult=y;rd.offset=Ad(gc("labelPadding")||0);rd.offset.mult=y;const Zd={scale:Uc,field:"value",band:.5,offset:ra(sb,gc("labelOffset"))};var Sc=$c?Nd(Uc,wa,'"left"','"right"','"center"'):{value:"center"},kd=Ac;var Fd=Y(kd)?cc(`${kd.signal} === '${"right"}'`,"left","right"):"right"===kd?{value:"left"}:{value:"right"};const ve=Pc(Ac,Sc,Fd),Pe=Pc(Ac,xb(Ac,"bottom","top"),$c?Nd(Uc,wa,'"top"','"bottom"','"middle"'):{value:"middle"}),hf=Nd(Uc,
wa,`-(${fb})`,fb,0);$c=$c&&fb;const eg={opacity:Pf,x:Pc(Ac,Zd,rd),y:$a(Ac,Zd,rd)},Sf={enter:eg,update:zd={opacity:Ig,text:{field:"label"},x:eg.x,y:eg.y,align:ve,baseline:Pe},exit:{opacity:Pf,x:eg.x,y:eg.y}};X(Sf,{dx:!Ib&&$c?Pc(Ac,hf):null,dy:!kc&&$c?$a(Ac,hf):null});X(Sf,{angle:gc("labelAngle"),fill:gc("labelColor"),fillOpacity:gc("labelOpacity"),font:gc("labelFont"),fontSize:gc("labelFontSize"),fontWeight:gc("labelFontWeight"),fontStyle:gc("labelFontStyle"),limit:gc("labelLimit"),lineHeight:gc("labelLineHeight")},
{align:Ib,baseline:kc});const gg=gc("labelBound");let vf=gc("labelOverlap");vf=vf||gg?{separation:gc("labelSeparation"),method:vf,order:"datum.index",bound:gg?{scale:Uc,orient:Ac,tolerance:gg}:null}:void 0;zd.align!==ve&&(zd.align=ed(zd.align,ve));zd.baseline!==Pe&&(zd.baseline=ed(zd.baseline,Pe));var Yd=xa({type:"text",role:"axis-label",style:"guide-label",key:"value",from:Vb,encode:Sf,overlap:vf},Rb);pb.call(hc,Yd)}if(tb.domain){var je=hc.push,re=ne.domain;const gc=Gb(vd,yd),Ac=vd.orient;let Uc,
y;const wa={enter:Uc={opacity:Pf},update:y={opacity:Ig},exit:{opacity:Pf}};X(wa,{stroke:gc("domainColor"),strokeCap:gc("domainCap"),strokeDash:gc("domainDash"),strokeDashOffset:gc("domainDashOffset"),strokeWidth:gc("domainWidth"),strokeOpacity:gc("domainOpacity")});const fb={scale:vd.scale,range:0},Ib={scale:vd.scale,range:1};Uc.x=y.x=Pc(Ac,fb,Pf);Uc.x2=y.x2=Pc(Ac,Ib);Uc.y=y.y=$a(Ac,fb,Pf);Uc.y2=y.y2=$a(Ac,Ib);var xe=xa({type:"rule",role:"axis-domain",from:Lb,encode:wa},re);je.call(hc,xe)}if(tb.title){var Af=
hc.push,Qf=ne.title;const gc=Gb(vd,yd),Ac=vd.orient,Uc=rc(Ac,-1,1);let y,wa;const fb={enter:y={opacity:Pf,anchor:Ad(gc("titleAnchor",null)),align:{signal:Ya}},update:wa=f.extend({},y,{opacity:Ig,text:Ad(vd.title)}),exit:{opacity:Pf}},Ib={signal:`lerp(range("${vd.scale}"), ${sa(0,1,.5)})`};wa.x=Pc(Ac,Ib);wa.y=$a(Ac,Ib);var Hc=y,td=Uc;var id=Y(td)?{signal:`(${td.signal}) * ${90}`}:{value:90*td};Hc.angle=Pc(Ac,Pf,id);y.baseline=Pc(Ac,xb(Ac,"bottom","top"),{value:"bottom"});wa.angle=y.angle;wa.baseline=
y.baseline;X(fb,{fill:gc("titleColor"),fillOpacity:gc("titleOpacity"),font:gc("titleFont"),fontSize:gc("titleFontSize"),fontStyle:gc("titleFontStyle"),fontWeight:gc("titleFontWeight"),limit:gc("titleLimit"),lineHeight:gc("titleLineHeight")},{align:gc("titleAlign"),angle:gc("titleAngle"),baseline:gc("titleBaseline")});Od(gc,Ac,fb,Qf);fb.update.align=ed(fb.update.align,y.align);fb.update.angle=ed(fb.update.angle,y.angle);fb.update.baseline=ed(fb.update.baseline,y.baseline);var ke=xa({type:"text",role:"axis-title",
style:"guide-title",from:Lb,encode:fb},Qf);Af.call(hc,ke)}const Ob={enter:{},update:{}};X(Ob,{orient:kf("orient"),offset:kf("offset")||0,position:E(vd.position,0),titlePadding:kf("titlePadding"),minExtent:kf("minExtent"),maxExtent:kf("maxExtent"),range:{signal:`abs(span(range("${vd.scale}")))`},translate:kf("translate"),format:vd.format,formatType:vd.formatType});return Qd(Mb({role:"axis",from:Lb,encode:S(Ob,Le,Ue),marks:hc,aria:kf("aria"),description:kf("description"),zindex:kf("zindex"),name:Qe,
interactive:Xe,style:Ed}),Qb)});f.array(jb.marks).forEach(vd=>Qd(vd,Qb));f.array(jb.legends).forEach(vd=>te(vd,Qb));jb.title&&Zc(jb.title,Qb);Qb.parseLambdas();return Qb}function ye(jb,Qb){var pc=Qb.config;const Qc=z(Qb.root=Qb.add(new T("operator",void 0,void 0,void 0))),Cc=od(jb,pc);Cc.forEach(we=>J(we,Qb));Qb.description=jb.description||pc.description;Qb.eventConfig=pc.events;Qb.legends=Qb.objectProperty(pc.legend&&pc.legend.layout);Qb.locale=pc.locale;pc=Qb.add(pf());const vd=Qb.add(Tf(O(S({enter:{x:{value:0},
y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},jb.encode),"group","frame",jb.style,Qb,{pulse:z(pc)}))),Wd=Qb.add(Zg({layout:Qb.objectProperty(jb.layout),legends:Qb.legends,autosize:Qb.signalRef("autosize"),mark:Qc,pulse:z(vd)}));Qb.operators.pop();Qb.pushState(z(vd),z(Wd),null);pe(jb,Qb,Cc);Qb.operators.push(Wd);jb=Qb.add(zg({mark:Qc,pulse:z(Wd)}));jb=Qb.add(Jf({pulse:z(jb)}));jb=Qb.add(Pg({pulse:z(jb)}));Qb.addData("root",new Ld(Qb,pc,pc,jb));return Qb}function me(jb,Qb){return Qb&&
Qb.signal?{name:jb,update:Qb.signal}:{name:jb,value:Qb}}function od(jb,Qb){const pc=Wd=>E(jb[Wd],Qb[Wd]),Qc=[me("background",pc("background")),me("autosize",D(pc("autosize"))),me("padding",U(pc("padding"))),me("width",pc("width")||0),me("height",pc("height")||0)],Cc=Qc.reduce((Wd,we)=>(Wd[we.name]=we,Wd),{}),vd={};f.array(jb.signals).forEach(Wd=>{f.hasOwnProperty(Cc,Wd.name)?Wd=f.extend(Cc[Wd.name],Wd):Qc.push(Wd);vd[Wd.name]=Wd});f.array(Qb.signals).forEach(Wd=>{f.hasOwnProperty(vd,Wd.name)||f.hasOwnProperty(Cc,
Wd.name)||Qc.push(Wd)});return Qc}function hd(jb,Qb){this.config=jb||{};this.options=Qb||{};this.bindings=[];this.field={};this.signals={};this.lambdas={};this.scales={};this.events={};this.data={};this.streams=[];this.updates=[];this.operators=[];this.locale=this.eventConfig=null;this._subid=this._id=0;this._nextsub=[0];this._parent=[];this._encode=[];this._lookup=[];this._markpath=[]}function ge(jb){this.config=jb.config;this.options=jb.options;this.legends=jb.legends;this.field=Object.create(jb.field);
this.signals=Object.create(jb.signals);this.lambdas=Object.create(jb.lambdas);this.scales=Object.create(jb.scales);this.events=Object.create(jb.events);this.data=Object.create(jb.data);this.streams=[];this.updates=[];this.operators=[];this._id=0;this._subid=++jb._nextsub[0];this._nextsub=jb._nextsub;this._parent=jb._parent.slice();this._encode=jb._encode.slice();this._lookup=jb._lookup.slice();this._markpath=jb._markpath}function $d(jb){return(f.isArray(jb)?cd:Ie)(jb)}function cd(jb){const Qb=jb.length;
let pc="[";for(let Qc=0;Qc<Qb;++Qc){const Cc=jb[Qc];pc+=(0<Qc?",":"")+(f.isObject(Cc)?Cc.signal||$d(Cc):f.stringValue(Cc))}return pc+"]"}function Ie(jb){let Qb="{",pc=0,Qc,Cc;for(Qc in jb)Cc=jb[Qc],Qb+=(1<++pc?",":"")+f.stringValue(Qc)+":"+(f.isObject(Cc)?Cc.signal||$d(Cc):f.stringValue(Cc));return Qb+"}"}function Je(){return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:"#4c78a8"},area:{fill:"#4c78a8"},
image:null,line:{stroke:"#4c78a8",strokeWidth:2},path:{stroke:"#4c78a8"},rect:{fill:"#4c78a8"},rule:{stroke:"#000"},shape:{stroke:"#4c78a8"},symbol:{fill:"#4c78a8",size:64},text:{fill:"#000",font:"sans-serif",fontSize:11},trail:{fill:"#4c78a8",size:2},style:{"guide-label":{fill:"#000",font:"sans-serif",fontSize:10},"guide-title":{fill:"#000",font:"sans-serif",fontSize:11,fontWeight:"bold"},"group-title":{fill:"#000",font:"sans-serif",fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:"#000",font:"sans-serif",
fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:"#ddd"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:"#888",grid:!1,gridWidth:1,gridColor:"#ddd",labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:"#888",tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,
titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:"#ddd",gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",
symbolBaseStrokeColor:"#888",titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:"circle square triangle-up cross diamond triangle-right triangle-down triangle-left".split(" ")}}}const Ad=jb=>f.isObject(jb)&&!f.isArray(jb)?f.extend({},
jb):{value:jb},$e=jb=>f.isString(jb)?f.stringValue(jb):jb.signal?`(${jb.signal})`:R(jb),qf=(jb,Qb,pc,Qc)=>`(${jb}(${[Qb,pc,Qc].map(w).join(",")})+'')`,Ye=["value","update","init","react","bind"],af=ba("key"),jg={code:"_.$value",ast:{type:"Identifier",value:"value"}},oe=jb=>(Qb,pc,Qc)=>new T(jb,pc,Qb||void 0,Qc),If=oe("aggregate"),hg=oe("axisticks"),zg=oe("bound"),pf=oe("collect"),bg=oe("compare"),wg=oe("datajoin"),Tf=oe("encode"),sg=oe("expression"),zc=oe("facet"),Wa=oe("field"),Ha=oe("key"),m=oe("legendentries"),
Na=oe("load"),Xb=oe("mark"),Xc=oe("multiextent"),Id=oe("multivalues"),Td=oe("overlap"),nf=oe("params"),Se=oe("prefacet"),Rd=oe("projection"),Vf=oe("proxy"),jf=oe("relay"),Jf=oe("render"),Xf=oe("scale"),Pg=oe("sieve"),dh=oe("sortitems"),Zg=oe("viewlayout"),Yf=oe("values");let be=0;const Kf={min:"min",max:"max",count:"sum"},he="size shape fill stroke strokeWidth strokeDash opacity".split(" "),Ue={name:1,style:1,interactive:1},Pf={value:0},Ig={value:1},Ya=sa(f.stringValue("left"),f.stringValue("right"),
f.stringValue("center")),Cb=sa('"top"','"bottom"','"middle"'),fc=`datum.vgrad && ${'item.orient \x3d\x3d\x3d "right"'} ? (${sa('"right"','"left"','"center"')}) : (${'(item.orient \x3d\x3d\x3d "left" || item.orient \x3d\x3d\x3d "right")'} && !(datum.vgrad && ${'item.orient \x3d\x3d\x3d "left"'})) ? "left" : ${Ya}`,lc=`${'(item.orient \x3d\x3d\x3d "left" || item.orient \x3d\x3d\x3d "right")'} ? (datum.vgrad ? (${'item.orient \x3d\x3d\x3d "right"'} ? "bottom" : "top") : ${Cb}) : "top"`;Ld.fromEntries=
function(jb,Qb){const pc=Qb.length,Qc=Qb[pc-1],Cc=Qb[pc-2];let vd=Qb[0],Wd=null,we=1;vd&&"load"===vd.type&&(vd=Qb[1]);for(jb.add(Qb[0]);we<pc;++we)Qb[we].params.pulse=z(Qb[we-1]),jb.add(Qb[we]),"aggregate"===Qb[we].type&&(Wd=Qb[we]);return new Ld(jb,vd,Cc,Qc,Wd)};Ld.prototype={countsRef(jb,Qb,pc){const Qc=this.counts||(this.counts={}),Cc=fe(Qb);if(null!=Cc){jb=this.scope;var vd=Qc[Cc]}vd?pc&&pc.field&&Ee(jb,vd.agg.params,pc):(vd={groupby:jb.fieldRef(Qb,"key"),pulse:z(this.output)},pc&&pc.field&&Ee(jb,
vd,pc),pc=jb.add(If(vd)),vd=jb.add(pf({pulse:z(pc)})),vd={agg:pc,ref:z(vd)},null!=Cc&&(Qc[Cc]=vd));return vd.ref},tuplesRef(){return z(this.values)},extentRef(jb,Qb){return dd(jb,this,"extent","extent",Qb,!1)},domainRef(jb,Qb){return dd(jb,this,"domain","values",Qb,!1)},valuesRef(jb,Qb,pc){return dd(jb,this,"vals","values",Qb,pc||!0)},lookupRef(jb,Qb){return dd(jb,this,"lookup","tupleindex",Qb,!1)},indataRef(jb,Qb){return dd(jb,this,"indata","tupleindex",Qb,!0,!0)}};const rc=(jb,Qb,pc)=>{Y(jb)?(jb=
jb.signal,Qb=cc(`${jb} === '${"left"}' || ${jb} === '${"top"}'`,Qb,pc)):Qb="left"===jb||"top"===jb?Qb:pc;return Qb},Pc=(jb,Qb,pc)=>{Y(jb)?(jb=jb.signal,Qb=Nb(`${jb} === '${"top"}' || ${jb} === '${"bottom"}'`,Qb,pc)):Qb="bottom"===jb||"top"===jb?Qb:pc;return Qb},$a=(jb,Qb,pc)=>{Y(jb)?(jb=jb.signal,Qb=Nb(`${jb} !== '${"top"}' && ${jb} !== '${"bottom"}'`,Qb,pc)):Qb="bottom"===jb||"top"===jb?pc:Qb;return Qb},xb=(jb,Qb,pc)=>Y(jb)?cc(`${jb.signal} === '${"top"}'`,Qb,pc):"top"===jb?{value:Qb}:{value:pc},
Nb=(jb,Qb,pc)=>{Qb=null!=Qb?Ad(Qb):Qb;pc=null!=pc?Ad(pc):pc;if(null!=Qb&&1!==Object.keys(Qb).length||null!=pc&&1!==Object.keys(pc).length)return[f.extend({test:jb},Qb)].concat(pc||[]);Qb=Qb?Qb.signal||f.stringValue(Qb.value):null;pc=pc?pc.signal||f.stringValue(pc.value):null;return{signal:`${jb} ? (${Qb}) : (${pc})`}},cc=(jb,Qb,pc)=>({signal:`${jb} ? (${vc(Qb)}) : (${vc(pc)})`}),vc=jb=>Y(jb)?jb.signal:null==jb?null:f.stringValue(jb),ed=(jb,Qb)=>{const pc=jb.signal;return pc&&pc.endsWith("(null)")?
{signal:pc.slice(0,-6)+Qb.signal}:jb};hd.prototype=ge.prototype={parse(jb){return pe(jb,this)},fork(){return new ge(this)},isSubscope(){return 0<this._subid},toRuntime(){this.finish();return{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(jb){this.operators.push(jb);jb.id=this.id();jb.refs&&(jb.refs.forEach(Qb=>{Qb.$ref=
jb.id}),jb.refs=null);return jb},proxy(jb){jb=jb instanceof T?z(jb):jb;return this.add(Vf({value:jb}))},addStream(jb){this.streams.push(jb);jb.id=this.id();return jb},addUpdate(jb){this.updates.push(jb);return jb},finish(){function jb(Qc,Cc,vd){Qc&&(Qc=Qc.data||(Qc.data={}),Cc=Qc[Cc]||(Qc[Cc]=[]),Cc.push(vd))}let Qb,pc;this.root&&(this.root.root=!0);for(Qb in this.signals)this.signals[Qb].signal=Qb;for(Qb in this.scales)this.scales[Qb].scale=Qb;for(Qb in this.data){pc=this.data[Qb];jb(pc.input,Qb,
"input");jb(pc.output,Qb,"output");jb(pc.values,Qb,"values");for(const Qc in pc.index)jb(pc.index[Qc],Qb,"index:"+Qc)}return this},pushState(jb,Qb,pc){this._encode.push(z(this.add(Pg({pulse:jb}))));this._parent.push(Qb);this._lookup.push(pc?z(this.proxy(pc)):null);this._markpath.push(-1)},popState(){this._encode.pop();this._parent.pop();this._lookup.pop();this._markpath.pop()},parent(){return f.peek(this._parent)},encode(){return f.peek(this._encode)},lookup(){return f.peek(this._lookup)},markpath(){const jb=
this._markpath;return++jb[jb.length-1]},fieldRef(jb,Qb){if(f.isString(jb))return ba(jb,Qb);jb.signal||f.error("Unsupported field reference: "+f.stringValue(jb));jb=jb.signal;var pc=this.field[jb];pc||(pc={name:this.signalRef(jb)},Qb&&(pc.as=Qb),this.field[jb]=pc=z(this.add(Wa(pc))));return pc},compareRef(jb){let Qb=!1;const pc=Cc=>Y(Cc)?(Qb=!0,this.signalRef(Cc.signal)):Cc&&Cc.expr?(Qb=!0,this.exprRef(Cc.expr)):Cc,Qc=f.array(jb.field).map(pc);jb=f.array(jb.order).map(pc);return Qb?z(this.add(bg({fields:Qc,
orders:jb}))):{$compare:Qc,$order:jb}},keyRef(jb,Qb){let pc=!1;const Qc=this.signals;jb=f.array(jb).map(Cc=>Y(Cc)?(pc=!0,z(Qc[Cc.signal])):Cc);return pc?z(this.add(Ha({fields:jb,flat:Qb}))):K(jb,Qb)},sortRef(jb){if(!jb)return jb;const Qb=r(jb.op,jb.field);jb=jb.order||"ascending";return jb.signal?z(this.add(bg({fields:Qb,orders:this.signalRef(jb.signal)}))):{$compare:Qb,$order:jb}},event(jb,Qb){const pc=jb+":"+Qb;if(!this.events[pc]){const Qc=this.id();this.streams.push({id:Qc,source:jb,type:Qb});
this.events[pc]=Qc}return this.events[pc]},hasOwnSignal(jb){return f.hasOwnProperty(this.signals,jb)},addSignal(jb,Qb){this.hasOwnSignal(jb)&&f.error("Duplicate signal name: "+f.stringValue(jb));Qb=Qb instanceof T?Qb:this.add(new T("operator",Qb,void 0,void 0));return this.signals[jb]=Qb},getSignal(jb){this.signals[jb]||f.error("Unrecognized signal name: "+f.stringValue(jb));return this.signals[jb]},signalRef(jb){if(this.signals[jb])return z(this.signals[jb]);f.hasOwnProperty(this.lambdas,jb)||(this.lambdas[jb]=
this.add(new T("operator",null,void 0,void 0)));return z(this.lambdas[jb])},parseLambdas(){const jb=Object.keys(this.lambdas);for(let pc=0,Qc=jb.length;pc<Qc;++pc){var Qb=jb[pc];const Cc=h.parseExpression(Qb,this);Qb=this.lambdas[Qb];Qb.params=Cc.$params;Qb.update=Cc.$expr}},property(jb){return jb&&jb.signal?this.signalRef(jb.signal):jb},objectProperty(jb){return jb&&f.isObject(jb)?this.signalRef(jb.signal||$d(jb)):jb},exprRef(jb,Qb){jb={expr:h.parseExpression(jb,this)};Qb&&(jb.expr.$name=Qb);return z(this.add(sg(jb)))},
addBinding(jb,Qb){this.bindings||f.error("Nested signals do not support binding: "+f.stringValue(jb));this.bindings.push(f.extend({signal:jb},Qb))},addScaleProj(jb,Qb){f.hasOwnProperty(this.scales,jb)&&f.error("Duplicate scale or projection name: "+f.stringValue(jb));this.scales[jb]=this.add(Qb)},addScale(jb,Qb){this.addScaleProj(jb,Xf(Qb))},addProjection(jb,Qb){this.addScaleProj(jb,Rd(Qb))},getScale(jb){this.scales[jb]||f.error("Unrecognized scale name: "+f.stringValue(jb));return this.scales[jb]},
scaleRef(jb){return z(this.getScale(jb))},scaleType(jb){return this.getScale(jb).params.type},projectionRef(jb){return this.scaleRef(jb)},projectionType(jb){return this.scaleType(jb)},addData(jb,Qb){f.hasOwnProperty(this.data,jb)&&f.error("Duplicate data set name: "+f.stringValue(jb));return this.data[jb]=Qb},getData(jb){this.data[jb]||f.error("Undefined data set name: "+f.stringValue(jb));return this.data[jb]},addDataPipeline(jb,Qb){f.hasOwnProperty(this.data,jb)&&f.error("Duplicate data set name: "+
f.stringValue(jb));return this.addData(jb,Ld.fromEntries(this,Qb))}};k.AxisDomainRole="axis-domain";k.AxisGridRole="axis-grid";k.AxisLabelRole="axis-label";k.AxisRole="axis";k.AxisTickRole="axis-tick";k.AxisTitleRole="axis-title";k.DataScope=Ld;k.FrameRole="frame";k.LegendEntryRole="legend-entry";k.LegendLabelRole="legend-label";k.LegendRole="legend";k.LegendSymbolRole="legend-symbol";k.LegendTitleRole="legend-title";k.MarkRole="mark";k.Scope=hd;k.ScopeRole="scope";k.config=Je;k.parse=function(jb,
Qb,pc){f.isObject(jb)||f.error("Input Vega specification must be an object.");Qb=f.mergeConfig(Je(),Qb,jb.config);return ye(jb,new hd(Qb,pc)).toRuntime()};k.signal=J;k.signalUpdates=Xa;k.stream=W;Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[554]=function(Pa,da,gb,oa){function k(z){if(z&&z.__esModule)return z;var ba=Object.create(null);z&&Object.keys(z).forEach(function(K){if("default"!==K){var r=Object.getOwnPropertyDescriptor(z,K);Object.defineProperty(ba,K,r.get?r:{enumerable:!0,get:function(){return z[K]}})}});ba["default"]=z;return Object.freeze(ba)}Object.defineProperty(oa,"__esModule",{value:!0});var f=da(503),h=da(517),l=da(519),u=da(528),q=da(529),D=da(533),U=da(538),aa=da(540),X=da(541),S=da(542),V=da(544);gb=
da(545);Pa=da(546);var F=da(518),t=da(509),w=da(516),x=da(527),I=da(526),R=da(532),B=da(551),v=da(511),O=da(549),N=da(553),A=da(550),J=da(547),T=da(552);da=k(l);u=k(u);q=k(q);D=k(D);U=k(U);aa=k(aa);X=k(X);S=k(S);V=k(V);gb=k(gb);Pa=k(Pa);f.extend(h.transforms,da,u,q,D,U,X,aa,S,V,gb,Pa);Object.defineProperty(oa,"Dataflow",{enumerable:!0,get:function(){return h.Dataflow}});Object.defineProperty(oa,"EventStream",{enumerable:!0,get:function(){return h.EventStream}});Object.defineProperty(oa,"MultiPulse",
{enumerable:!0,get:function(){return h.MultiPulse}});Object.defineProperty(oa,"Operator",{enumerable:!0,get:function(){return h.Operator}});Object.defineProperty(oa,"Parameters",{enumerable:!0,get:function(){return h.Parameters}});Object.defineProperty(oa,"Pulse",{enumerable:!0,get:function(){return h.Pulse}});Object.defineProperty(oa,"Transform",{enumerable:!0,get:function(){return h.Transform}});Object.defineProperty(oa,"changeset",{enumerable:!0,get:function(){return h.changeset}});Object.defineProperty(oa,
"definition",{enumerable:!0,get:function(){return h.definition}});Object.defineProperty(oa,"ingest",{enumerable:!0,get:function(){return h.ingest}});Object.defineProperty(oa,"isTuple",{enumerable:!0,get:function(){return h.isTuple}});Object.defineProperty(oa,"transform",{enumerable:!0,get:function(){return h.transform}});Object.defineProperty(oa,"transforms",{enumerable:!0,get:function(){return h.transforms}});Object.defineProperty(oa,"tupleid",{enumerable:!0,get:function(){return h.tupleid}});Object.defineProperty(oa,
"interpolate",{enumerable:!0,get:function(){return I.interpolate}});Object.defineProperty(oa,"interpolateColors",{enumerable:!0,get:function(){return I.interpolateColors}});Object.defineProperty(oa,"interpolateRange",{enumerable:!0,get:function(){return I.interpolateRange}});Object.defineProperty(oa,"quantizeInterpolator",{enumerable:!0,get:function(){return I.quantizeInterpolator}});Object.defineProperty(oa,"scale",{enumerable:!0,get:function(){return I.scale}});Object.defineProperty(oa,"scheme",
{enumerable:!0,get:function(){return I.scheme}});Object.defineProperty(oa,"projection",{enumerable:!0,get:function(){return R.projection}});Object.defineProperty(oa,"View",{enumerable:!0,get:function(){return B.View}});Object.defineProperty(oa,"defaultLocale",{enumerable:!0,get:function(){return v.defaultLocale}});Object.defineProperty(oa,"formatLocale",{enumerable:!0,get:function(){return v.numberFormatDefaultLocale}});Object.defineProperty(oa,"locale",{enumerable:!0,get:function(){return v.locale}});
Object.defineProperty(oa,"resetDefaultLocale",{enumerable:!0,get:function(){return v.resetDefaultLocale}});Object.defineProperty(oa,"timeFormatLocale",{enumerable:!0,get:function(){return v.timeFormatDefaultLocale}});Object.defineProperty(oa,"expressionFunction",{enumerable:!0,get:function(){return O.expressionFunction}});Object.defineProperty(oa,"parse",{enumerable:!0,get:function(){return N.parse}});Object.defineProperty(oa,"runtimeContext",{enumerable:!0,get:function(){return A.context}});Object.defineProperty(oa,
"codegenExpression",{enumerable:!0,get:function(){return J.codegenExpression}});Object.defineProperty(oa,"parseExpression",{enumerable:!0,get:function(){return J.parseExpression}});Object.defineProperty(oa,"parseSelector",{enumerable:!0,get:function(){return T.parseSelector}});oa.version="5.21.0";Object.keys(f).forEach(function(z){"default"===z||oa.hasOwnProperty(z)||Object.defineProperty(oa,z,{enumerable:!0,get:function(){return f[z]}})});Object.keys(F).forEach(function(z){"default"===z||oa.hasOwnProperty(z)||
Object.defineProperty(oa,z,{enumerable:!0,get:function(){return F[z]}})});Object.keys(t).forEach(function(z){"default"===z||oa.hasOwnProperty(z)||Object.defineProperty(oa,z,{enumerable:!0,get:function(){return t[z]}})});Object.keys(w).forEach(function(z){"default"===z||oa.hasOwnProperty(z)||Object.defineProperty(oa,z,{enumerable:!0,get:function(){return w[z]}})});Object.keys(x).forEach(function(z){"default"===z||oa.hasOwnProperty(z)||Object.defineProperty(oa,z,{enumerable:!0,get:function(){return x[z]}})})};
shadow$provide[555]=function(Pa,da,gb,oa){var k=da(515).Buffer;(function(f,h){"object"===typeof oa&&"undefined"!==typeof gb?h(oa):"function"===typeof define&&define.amd?define(["exports"],h):(f="undefined"!==typeof globalThis?globalThis:f||self,h(f.vegaLite={}))})(this,function(f){function h(P,za,H){P.fields=za||[];P.fname=H;return P}function l(P){return 1===P.length?ul(P[0]):tk(P)}function u(P){function za(){H.push(Ab+P.substring(Pb,nc));Ab="";Pb=nc+1}const H=[],ha=P.length;let Ca=null,db=0,Ab="",
Pb,nc,Kc;P+="";for(Pb=nc=0;nc<ha;++nc)if(Kc=P[nc],"\\"===Kc)Ab+=P.substring(Pb,nc),Ab+=P.substring(++nc,++nc),Pb=nc;else if(Kc===Ca)za(),Ca=null,db=-1;else if(!Ca)if(Pb===db&&'"'===Kc)Pb=nc+1,Ca=Kc;else if(Pb===db&&"'"===Kc)Pb=nc+1,Ca=Kc;else if("."===Kc&&!db)nc>Pb?za():Pb=nc+1;else if("["===Kc)nc>Pb&&za(),db=Pb=nc+1;else if("]"===Kc){if(!db)throw Error("Access path missing open bracket: "+P);0<db&&za();db=0;Pb=nc+1}if(db)throw Error("Access path missing closing bracket: "+P);if(Ca)throw Error("Access path missing closing quote: "+
P);nc>Pb&&(nc++,za());return H}function q(P,za,H){za=[za].concat([].slice.call(H));console[P].apply(console,za)}function D(P){return P===Object(P)}function U(...P){return P.reduce((za,H)=>{for(const ha in H)"signals"===ha?za.signals=X(za.signals,H.signals):aa(za,ha,H[ha],"legend"===ha?{layout:1}:"style"===ha?!0:null);return za},{})}function aa(P,za,H,ha){if("__proto__"!==za){var Ca;if(D(H)&&!Jg(H))for(Ca in P=D(P[za])?P[za]:P[za]={},H)ha&&(!0===ha||ha[Ca])?aa(P,Ca,H[Ca]):"__proto__"!==Ca&&(P[Ca]=
H[Ca]);else P[za]=H}}function X(P,za){function H(db){ha[db.name]||(ha[db.name]=1,Ca.push(db))}if(null==P)return za;const ha={},Ca=[];za.forEach(H);P.forEach(H);return Ca}function S(P){return null!=P?Jg(P)?P:[P]:[]}function V(P){return"boolean"===typeof P}function F(P){return"number"===typeof P}function t(P){return"string"===typeof P}function w(P){return Jg(P)?"["+P.map(w)+"]":D(P)||t(P)?JSON.stringify(P).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):P}function x(P){const za={},H=P.length;
for(let ha=0;ha<H;++ha)za[P[ha]]=!0;return za}function I(P,za){if(P.not)I(P.not,za);else if(P.and)for(const H of P.and)I(H,za);else if(P.or)for(const H of P.or)I(H,za);else za(P)}function R(P,za){return P.not?{not:R(P.not,za)}:P.and?{and:P.and.map(H=>R(H,za))}:P.or?{or:P.or.map(H=>R(H,za))}:za(P)}function B(P,za){const H={};for(const ha of za)$g.call(P,ha)&&(H[ha]=P[ha]);return H}function v(P,za){P={...P};for(const H of za)delete P[H];return P}function O(P){if(F(P))return P;P=t(P)?P:Ij(P);if(250>
P.length)return P;let za=0;for(let H=0;H<P.length;H++){const ha=P.charCodeAt(H);za=(za<<5)-za+ha;za&=za}return za}function N(P){return!1===P||null===P}function A(P,za){return-1<P.indexOf(za)}function J(P,za){let H=0;for(const [ha,Ca]of P.entries())if(za(Ca,ha,H++))return!0;return!1}function T(P,za){let H=0;for(const [ha,Ca]of P.entries())if(!za(Ca,ha,H++))return!1;return!0}function z(P,...za){for(const ha of za){za=P;var H=null!==ha&&void 0!==ha?ha:{};for(const Ca of sf(H))aa(za,Ca,H[Ca],!0)}return P}
function ba(P,za){const H=[],ha={};for(const Ca of P)P=za(Ca),P in ha||(ha[P]=1,H.push(Ca));return H}function K(P,za){if(P.size!==za.size)return!1;for(const H of P)if(!za.has(H))return!1;return!0}function r(P,za){for(const H of P)if(za.has(H))return!0;return!1}function Y(P){const za=new Set;for(const H of P){const ha=u(H).map((Ca,db)=>0===db?Ca:"[".concat(Ca,"]"));P=ha.map((Ca,db)=>ha.slice(0,db+1).join(""));for(const Ca of P)za.add(Ca)}return za}function Z(P,za){return void 0===P||void 0===za?!0:
r(Y(P),Y(za))}function E(P){return 0===sf(P).length}function C(P){return!0===P||!1===P}function W(P){const za=P.replace(/\W/g,"_");return(P.match(/^\d+/)?"_":"")+za}function fa(P,za){return P.not?"!("+fa(P.not,za)+")":P.and?"("+P.and.map(H=>fa(H,za)).join(") \x26\x26 (")+")":P.or?"("+P.or.map(H=>fa(H,za)).join(") || (")+")":za(P)}function ja(P,za){if(0===za.length)return!0;const H=za.shift();H in P&&ja(P[H],za)&&delete P[H];return E(P)}function Ba(P){return P.charAt(0).toUpperCase()+P.substr(1)}function Ga(P,
za="datum"){P=u(P);const H=[];for(let ha=1;ha<=P.length;ha++){const Ca="[".concat(P.slice(0,ha).map(w).join("]["),"]");H.push("".concat(za).concat(Ca))}return H.join(" \x26\x26 ")}function ua(P,za="datum"){return"".concat(za,"[").concat(w(u(P).join(".")),"]")}function Fa(P){return P.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Xa(P){return"".concat(u(P).map(Fa).join("\\."))}function Sa(P,za,H){return P.replace(new RegExp(za.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$\x26"),"g"),H)}function eb(P){return"".concat(u(P).join("."))}
function Va(P){return P?u(P).length:0}function La(...P){for(const za of P)if(void 0!==za)return za}function Ra(P){const za=++Nk;return P?String(P)+za:za}function la(P){return ma(P)?P:"__".concat(P)}function ma(P){return 0===P.indexOf("__")}function Aa(P){if(void 0!==P)return(P%360+360)%360}function Da(P){return F(P)?!0:!isNaN(P)&&!isNaN(parseFloat(P))}function Qa(P){return P&&P.condition}function Ea(P){return!!P&&!!P.argmin}function kb(P){return!!P&&!!P.argmax}function cb(P){return t(P)&&!!bj[P]}
function Mb(P){return t(P)&&A(vl,P)}function Gb(P){switch(P){case "latitude":return"y";case "latitude2":return"y2";case "longitude":return"x";case "longitude2":return"x2"}}function Wb(P){return"color"===P||"fill"===P||"stroke"===P}function sa(P){return ra(P)!==P}function ra(P){switch(P){case "x2":return"x";case "y2":return"y";case "latitude2":return"latitude";case "longitude2":return"longitude";case "theta2":return"theta";case "radius2":return"radius"}return P}function xa(P){if(P in nl)switch(P){case "theta":return"startAngle";
case "theta2":return"endAngle";case "radius":return"outerRadius";case "radius2":return"innerRadius"}return P}function Ia(P){switch(P){case "x":return"x2";case "y":return"y2";case "latitude":return"latitude2";case "longitude":return"longitude2";case "theta":return"theta2";case "radius":return"radius2"}}function bb(P){switch(P){case "x":case "x2":return"width";case "y":case "y2":return"height"}}function Hb(P){switch(P){case "x":return"xOffset";case "y":return"yOffset";case "x2":return"x2Offset";case "y2":return"y2Offset";
case "theta":return"thetaOffset";case "radius":return"radiusOffset";case "theta2":return"theta2Offset";case "radius2":return"radius2Offset"}}function zb(P){return"width"===P?"x":"y"}function mb(P){switch(P){case "color":case "fill":case "stroke":case "description":case "detail":case "key":case "tooltip":case "href":case "order":case "opacity":case "fillOpacity":case "strokeOpacity":case "strokeWidth":case "facet":case "row":case "column":return em;case "x":case "y":case "latitude":case "longitude":return pm;
case "x2":case "y2":case "latitude2":case "longitude2":return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case "size":return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case "strokeDash":return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",
geoshape:"always"};case "shape":return{point:"always",geoshape:"always"};case "text":return{text:"always"};case "angle":return{point:"always",square:"always",text:"always"};case "url":return{image:"always"};case "theta":return{text:"always",arc:"always"};case "radius":return{text:"always",arc:"always"};case "theta2":case "radius2":return{arc:"always"}}}function Jb(P){switch(P){case "facet":case "row":case "column":case "shape":case "strokeDash":case "text":case "tooltip":case "href":case "url":case "description":return"discrete";
case "color":case "fill":case "stroke":return"flexible"}}function Eb(P){V(P)&&(P=vb(P,void 0));return"bin"+sf(P).map(za=>jc(P[za])?W("_".concat(za,"_").concat(fi(P[za]))):W("_".concat(za,"_").concat(P[za]))).join("")}function Db(P){return!0===P||D(P)&&!P.binned}function bc(P){return"binned"===P||D(P)&&!0===P.binned}function jc(P){return null===P||void 0===P?void 0:P.selection}function Tc(P){switch(P){case "row":case "column":case "size":case "color":case "fill":case "stroke":case "strokeWidth":case "opacity":case "fillOpacity":case "strokeOpacity":case "shape":return 6;
case "strokeDash":return 4;default:return 10}}function ub(P,za,H){za in P?Object.defineProperty(P,za,{value:H,enumerable:!0,configurable:!0,writable:!0}):P[za]=H;return P}function Rc(P,za,H){za=za.get(P);if(!za)throw new TypeError("attempted to set private field on non-instance");if(za.set)za.set.call(P,H);else{if(!za.writable)throw new TypeError("attempted to set read only private field");za.value=H}return H}function Gd(P){return"Invalid specification ".concat(JSON.stringify(P),'. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".')}
function Kd(P){return"".concat("width"==P?"Width":"Height",' "container" only works for single views and layered views.')}function Vd(P){const za="width"==P?"x":"y";return"".concat("width"==P?"Width":"Height",' "container" only works well with autosize "fit" or "fit-').concat(za,'".')}function ze(P){return P?'Dropping "fit-'.concat(P,'" because spec has discrete ').concat(bb(P),"."):'Dropping "fit" because spec has discrete size.'}function ee(P){return"Unknown field for ".concat(P,". Cannot calculate view size.")}
function bd(P){return'Cannot project a selection on encoding channel "'.concat(P,'", which has no field.')}function Bd(P,za){return'Cannot project a selection on encoding channel "'.concat(P,'" as it uses an aggregate function ("').concat(za,'").')}function Ld(P){return"Selection not supported for ".concat(P," yet.")}function fe(P){return'The "columns" property cannot be used when "'.concat(P,'" has nested row/column.')}function Ee(P,za,H){return'An ancestor parsed field "'.concat(P,'" as ').concat(H,
" but a child wants to parse the field as ").concat(za,".")}function dd(P){return"Config.customFormatTypes is not true, thus custom format type and format for channel ".concat(P," are dropped.")}function nd(P,za){const {fill:H,stroke:ha}=za;return"Dropping color ".concat(P," as the plot also has ").concat(H&&ha?"fill and stroke":H?"fill":"stroke",".")}function Dc(P,za){return"Dropping ".concat(kh(P),' from channel "').concat(za,'" since it does not contain any data field, datum, value, or signal.')}
function jd(P,za,H){return"".concat(P,' dropped as it is incompatible with "').concat(za,'"').concat(H?" when ".concat(H):"",".")}function Qd(P){return"".concat(P,"-encoding is dropped as ").concat(P," is not a valid encoding channel.")}function ae(P,za){return'Using discrete channel "'.concat(P,'" to encode "').concat(za,'" field can be misleading as it does not encode ').concat("ordinal"===za?"order":"magnitude",".")}function te(P,za,H){return"".concat(H,"-scale's \"").concat(za,'" is dropped as it does not work with ').concat(P,
" scale.")}function Bb(P){return'The step for "'.concat(P,'" is dropped because the ').concat("width"===P?"x":"y"," is continuous.")}function $b(P){return'Cannot stack "'.concat(P,'" if there is already "').concat(P,'2".')}function Gc(P,za){return"Invalid ".concat(P,": ").concat(kh(za),".")}function Jc(P){return"1D error band does not support ".concat(P,".")}function ud(P){return"Channel ".concat(P,' is required for "binned" bin.')}function Zc(...P){ql.warn(...P)}function xd(P){if(P&&D(P))for(const za of Tb)if(za in
P)return!0;return!1}function Sd(P){Da(P)&&(P=+P);if(F(P))return P-1;var za=P.toLowerCase();const H=Gk.indexOf(za);if(-1!==H)return H;za=za.substr(0,3);za=$l.indexOf(za);if(-1!==za)return za;throw Error(Gc("month",P));}function ie(P){Da(P)&&(P=+P);if(F(P))return P%7;var za=P.toLowerCase();const H=ea.indexOf(za);if(-1!==H)return H;za=za.substr(0,3);za=va.indexOf(za);if(-1!==za)return za;throw Error(Gc("day",P));}function Be(P,za){const H=[];za&&void 0!==P.day&&1<sf(P).length&&(Zc("Dropping day from datetime ".concat(kh(P),
" as day cannot be combined with other units.")),P=Rf(P),delete P.day);void 0!==P.year?H.push(P.year):H.push(2012);if(void 0!==P.month){var ha=za?Sd(P.month):P.month;H.push(ha)}else if(void 0!==P.quarter){if(za)if(ha=P.quarter,Da(ha)&&(ha=+ha),F(ha))4<ha&&Zc(Gc("quarter",ha)),--ha;else throw Error(Gc("quarter",ha));else ha=P.quarter;H.push(F(ha)?3*ha:ha+"*3")}else H.push(0);void 0!==P.date?H.push(P.date):void 0!==P.day?(za=za?ie(P.day):P.day,H.push(F(za)?za+1:za+"+1")):H.push(1);for(const Ca of["hours",
"minutes","seconds","milliseconds"])za=P[Ca],H.push("undefined"===typeof za?0:za);return H}function uc(P){const za=Be(P,!0).join(", ");return P.utc?"utc(".concat(za,")"):"datetime(".concat(za,")")}function Oc(P){const za=Be(P,!0);return P.utc?+new Date(Date.UTC(...za)):+new Date(...za)}function Nd(P){const za=[];for(const H of Tb)Od(P,H)&&za.push(H);return za}function Od(P,za){const H=P.indexOf(za);return 0>H||0<H&&"seconds"===za&&"i"===P.charAt(H-1)||P.length>H+3&&"day"===za&&"o"===P.charAt(H+3)||
0<H&&"year"===za&&"f"===P.charAt(H-1)?!1:!0}function pe(P,za,{end:H}={end:!1}){const ha=Ga(za),Ca=P.startsWith("utc")?"utc":"";za={};for(const Ab of Tb)if(Od(P,Ab)){var db=Ab;db="quarter"===db?"(".concat(Ca,"quarter(").concat(ha,")-1)"):"".concat(Ca).concat(db,"(").concat(ha,")");za[Ab]=db;db=Ab}H&&(za[db]+="+1");P=Be(za,!1).join(", ");return za.utc?"utc(".concat(P,")"):"datetime(".concat(P,")")}function ye(P){if(P)return P=Nd(P),"timeUnitSpecifier(".concat(Ij(P),", ").concat(Ij(qc),")")}function me(P){if(P){var za;
t(P)?za={unit:P}:D(P)&&(za={...P,...(P.unit?{unit:P.unit}:{})});za.unit.startsWith("utc")&&(za.utc=!0,za.unit=za.unit.substr(3));return za}}function od(P){const {utc:za,...H}=me(P);return H.unit?(za?"utc":"")+sf(H).map(ha=>W("".concat("unit"===ha?"":"_".concat(ha,"_")).concat(H[ha]))).join(""):(za?"utc":"")+"timeunit"+sf(H).map(ha=>W("_".concat(ha,"_").concat(H[ha]))).join("")}function hd(P){return P&&!!P.signal}function ge(P){return!!P.step}function $d(P){return Jg(P)?!1:"field"in P&&"data"in P}
function cd(P){return P&&!!P.field&&void 0!==P.equal}function Ie(P){return P&&!!P.field&&void 0!==P.lt}function Je(P){return P&&!!P.field&&void 0!==P.lte}function Ad(P){return P&&!!P.field&&void 0!==P.gt}function $e(P){return P&&!!P.field&&void 0!==P.gte}function qf(P){return P&&P.field&&(Jg(P.range)&&2===P.range.length||hd(P.range))?!0:!1}function Ye(P){return P&&!!P.field&&(Jg(P.oneOf)||Jg(P.in))}function af(P){return Ye(P)||cd(P)||qf(P)||Ie(P)||Ad(P)||Je(P)||$e(P)}function jg(P,za){return yc(P,
{timeUnit:za,wrapTime:!0})}function oe(P,za){return P.map(H=>jg(H,za))}function If(P,za=!0){var H,{field:ha}=P;const Ca=null===(H=me(P.timeUnit))||void 0===H?void 0:H.unit;H=Ca?"time("+pe(Ca,ha)+")":Cc(P,{expr:"datum"});if(cd(P))return H+"\x3d\x3d\x3d"+jg(P.equal,Ca);if(Ie(P))return za=P.lt,"".concat(H,"\x3c").concat(jg(za,Ca));if(Ad(P))return za=P.gt,"".concat(H,"\x3e").concat(jg(za,Ca));if(Je(P))return za=P.lte,"".concat(H,"\x3c\x3d").concat(jg(za,Ca));if($e(P))return za=P.gte,"".concat(H,"\x3e\x3d").concat(jg(za,
Ca));if(Ye(P))return"indexof([".concat(oe(P.oneOf,Ca).join(","),"], ").concat(H,") !\x3d\x3d -1");if(P&&P.field&&void 0!==P.valid)return hg(H,P.valid);if(qf(P)){({range:ha}=P);P=hd(ha)?{signal:"".concat(ha.signal,"[0]")}:ha[0];ha=hd(ha)?{signal:"".concat(ha.signal,"[1]")}:ha[1];if(null!==P&&null!==ha&&za)return"inrange("+H+", ["+jg(P,Ca)+", "+jg(ha,Ca)+"])";za=[];null!==P&&za.push("".concat(H," \x3e\x3d ").concat(jg(P,Ca)));null!==ha&&za.push("".concat(H," \x3c\x3d ").concat(jg(ha,Ca)));return 0<
za.length?za.join(" \x26\x26 "):"true"}throw Error("Invalid field predicate: ".concat(JSON.stringify(P)));}function hg(P,za=!0){return za?"isValid(".concat(P,") \x26\x26 isFinite(+").concat(P,")"):"!isValid(".concat(P,") || !isFinite(+").concat(P,")")}function zg(P){if(af(P)&&P.timeUnit){var za;return{...P,timeUnit:null===(za=me(P.timeUnit))||void 0===za?void 0:za.unit}}return P}function pf(P){if(P)switch(P=P.toLowerCase(),P){case "q":case "quantitative":return"quantitative";case "t":case "temporal":return"temporal";
case "o":case "ordinal":return"ordinal";case "n":case "nominal":return"nominal";case "geojson":return"geojson"}}function bg(P){return null===P||void 0===P?void 0:P.selection}function wg(P,za){switch(za){case "type":case "domain":case "reverse":case "range":return!0;case "scheme":case "interpolate":return!A(["point","band","identity"],P);case "bins":return!A(["point","band","identity","ordinal"],P);case "round":return P in uf||"band"===P||"point"===P;case "padding":case "rangeMin":case "rangeMax":return P in
uf||A(["point","band"],P);case "paddingOuter":case "align":return A(["point","band"],P);case "paddingInner":return"band"===P;case "domainMax":case "domainMid":case "domainMin":case "clamp":return P in uf;case "nice":return P in uf||"quantize"===P||"threshold"===P;case "exponent":return"pow"===P;case "base":return"log"===P;case "constant":return"symlog"===P;case "zero":return P in Ce&&!A(["log","time","utc","threshold","quantile"],P)}}function Tf(P,za){switch(za){case "interpolate":case "scheme":case "domainMid":if(!Wb(P))return'Cannot use the scale property "'.concat(P,
'" with non-color channel.')}}function sg(P,za){if(!el[P])return!1;switch(P){case "x":case "y":case "theta":case "radius":return za in uf||A(["band","point"],za);case "size":case "strokeWidth":case "opacity":case "fillOpacity":case "strokeOpacity":case "angle":return za in uf||za in gh||A(["band","point","ordinal"],za);case "color":case "fill":case "stroke":return"band"!==za;case "strokeDash":return"ordinal"===za||za in gh;case "shape":return"ordinal"===za}}function zc(P){return P&&!!P.expr}function Wa(P){const za=
sf(P||{}),H={};for(const ha of za)H[ha]=Qe(P[ha]);return H}function Ha(P){return A(["line","area","trail"],P)}function m(P){return P.type}function Na(P){const {channel:za,channelDef:H,markDef:ha,scale:Ca,config:db}=P;P=nf(P);return rc(H)&&!Mb(H.aggregate)&&Ca&&Ca.get("type")in uf&&!1===Ca.get("zero")?Xb({fieldDef:H,channel:za,markDef:ha,ref:P,config:db}):P}function Xb({fieldDef:P,channel:za,markDef:H,ref:ha,config:Ca}){if(Ha(H.type)||null===Uf("invalid",H,Ca))return ha;P=Xc(P,!0);za="y"===ra(za)?
{field:{group:"height"}}:{value:0};return[{test:P,...za},ha]}function Xc(P,za=!0){return hg(t(P)?P:Cc(P,{expr:"datum"}),!za)}function Id(P,za,H,ha){const Ca={};za&&(Ca.scale=za);$a(P)?({datum:P}=P,xd(P)?Ca.signal=uc(P):hd(P)?Ca.signal=P.signal:zc(P)?Ca.signal=P.expr:Ca.value=P):Ca.field=Cc(P,H);if(ha){const {offset:db,band:Ab}=ha;db&&(Ca.offset=db);Ab&&(Ca.band=Ab)}return Ca}function Td({scaleName:P,fieldOrDatumDef:za,fieldOrDatumDef2:H,offset:ha,startSuffix:Ca,band:db=.5}){const Ab=0<db&&1>db?"datum":
void 0;Ca=Cc(za,{expr:Ab,suffix:Ca});H=void 0!==H?Cc(H,{expr:Ab}):Cc(za,{suffix:"end",expr:Ab});za={};0===db||1===db?(za.scale=P,za.field=0===db?Ca:H):(db="".concat(db," * ").concat(Ca," + ").concat(1-db," * ").concat(H),za.signal='scale("'.concat(P,'", ').concat(db,")"));ha&&(za.offset=ha);return za}function nf({channel:P,channelDef:za,channel2Def:H,markDef:ha,config:Ca,scaleName:db,scale:Ab,stack:Pb,offset:nc,defaultRef:Kc,band:ad}){if(za){if(cc(za)){var ld,Pd;if(vc(za)){var Oe;ad=null!==(Oe=ad)&&
void 0!==Oe?Oe:Ya({channel:P,fieldDef:za,fieldDef2:H,markDef:ha,stack:Pb,config:Ca,isMidPoint:!0});const {bin:Ae,timeUnit:gf,type:bf}=za;if(Db(Ae)||ad&&gf&&"temporal"===bf)return Pb&&Pb.impute?Id(za,db,{binSuffix:"mid"},{offset:nc}):ad?Td({scaleName:db,fieldOrDatumDef:za,band:ad,offset:nc}):Id(za,db,md(za,P)?{binSuffix:"range"}:{},{offset:nc});if(bc(Ae)){if(rc(H))return Td({scaleName:db,fieldOrDatumDef:za,fieldOrDatumDef2:H,band:ad,offset:nc});Zc(ud("x"===P?"x2":"y2"))}}P=null===Ab||void 0===Ab?void 0:
Ab.get("type");return Id(za,db,P in qe?{binSuffix:"range"}:{},{offset:nc,band:"band"===P?null!==(ld=null!==(Pd=ad)&&void 0!==Pd?Pd:za.band)&&void 0!==ld?ld:.5:void 0})}if(ed(za))return db=nc?{offset:nc}:{},{...Se(P,za.value),...db}}"function"===typeof Kc&&(Kc=Kc());return Kc?{...Kc,...(nc?{offset:nc}:{})}:Kc}function Se(P,za){return A(["x","x2"],P)&&"width"===za?{field:{group:"width"}}:A(["y","y2"],P)&&"height"===za?{field:{group:"height"}}:Ed(za)}function Rd(P){return P&&"number"!==P&&"time"!==P}
function Vf(P,za,H){return"".concat(P,"(").concat(za).concat(H?", ".concat(JSON.stringify(H)):"",")")}function jf({fieldOrDatumDef:P,format:za,formatType:H,expr:ha,normalizeStack:Ca,config:db}){if(Rd(H))return Xf({fieldOrDatumDef:P,format:za,formatType:H,expr:ha,config:db});Ca=Jf(P,ha,Ca);if(ac(P)){var Ab,Pb;H=rc(P)?null===(Ab=me(P.timeUnit))||void 0===Ab?void 0:Ab.unit:void 0;db=db.timeFormat;P=jb(P)&&(null===(Pb=P.scale)||void 0===Pb?void 0:Pb.type)===le.UTC;!H||za?(za=t(za)?za:db,Ca="".concat(P?
"utc":"time","Format(").concat(Ca,", '").concat(za,"')")):H?(Pb=ye(H),P=P||H.startsWith("utc"),Ca="".concat(P?"utc":"time","Format(").concat(Ca,", ").concat(Pb,")")):Ca=void 0;return Ca?{signal:Ca}:void 0}za=Zg(Pc(P),za,db);return rc(P)&&Db(P.bin)?(Pb=Cc(P,{expr:ha,binSuffix:"end"}),{signal:Kf(Ca,Pb,za,H,db)}):za||"quantitative"===Pc(P)?{signal:"".concat(Yf(Ca,za))}:{signal:"isValid(".concat(Ca,") ? ").concat(Ca,' : ""+').concat(Ca)}}function Jf(P,za,H){if(rc(P))return H?"".concat(Cc(P,{expr:za,suffix:"end"}),
"-").concat(Cc(P,{expr:za,suffix:"start"})):Cc(P,{expr:za});({datum:P}=P);P=xd(P)?uc(P):"".concat(JSON.stringify(P));return P}function Xf({fieldOrDatumDef:P,format:za,formatType:H,expr:ha,normalizeStack:Ca,config:db,field:Ab}){var Pb;Ab=null!==(Pb=Ab)&&void 0!==Pb?Pb:Jf(P,ha,Ca);return rc(P)&&Db(P.bin)?(P=Cc(P,{expr:ha,binSuffix:"end"}),{signal:Kf(Ab,P,za,H,db)}):{signal:Vf(H,Ab,za)}}function Pg(P,za,H,ha,Ca,db){if(!Rd(ha)){if(ac(P)){var Ab;P=rc(P)?null===(Ab=me(P.timeUnit))||void 0===Ab?void 0:Ab.unit:
void 0;H=H?H:P?{signal:ye(P)}:db?void 0:Ca.timeFormat;return H}return Zg(za,H,Ca)}}function dh(P,za,H){if(P&&(hd(P)||"number"===P||"time"===P))return P;if(ac(za)&&"time"!==H&&"utc"!==H)return"time"}function Zg(P,za,H){if(t(za))return za;if("quantitative"===P)return H.numberFormat}function Yf(P,za){return"format(".concat(P,', "').concat(za||"",'")')}function be(P,za,H,ha){var Ca;return Rd(H)?Vf(H,P,za):Yf(P,null!==(Ca=t(za)?za:void 0)&&void 0!==Ca?Ca:ha.numberFormat)}function Kf(P,za,H,ha,Ca){const db=
be(P,H,ha,Ca);za=be(za,H,ha,Ca);return"".concat(hg(P,!1),' ? "null" : ').concat(db,' + "').concat(" â€“ ",'" + ').concat(za)}function he(P){return!!P&&("count"===P.op||!!P.field)}function Ue(P){return!!P&&Jg(P)}function Pf(P){return"row"in P||"column"in P}function Ig(P){const {field:za,timeUnit:H,bin:ha,aggregate:Ca}=P;return{...(H?{timeUnit:H}:{}),...(ha?{bin:ha}:{}),...(Ca?{aggregate:Ca}:{}),field:za}}function Ya({channel:P,fieldDef:za,fieldDef2:H,markDef:ha,stack:Ca,config:db,isMidPoint:Ab}){if(cc(za)&&
void 0!==za.band)return za.band;if(rc(za)){const {timeUnit:Pb,bin:nc}=za;if(Pb&&!H)return Ab?dg("timeUnitBandPosition",ha,db):A(["rect","bar","image","arc"],ha.type)?dg("timeUnitBand",ha,db):0;if(Db(nc))return A(["rect","bar","image","arc"],ha.type)&&!Ab?1:.5}if((null===Ca||void 0===Ca?void 0:Ca.fieldChannel)===P&&Ab)return.5}function Cb(P,za,H,ha,Ca,db){return Db(za.bin)||za.timeUnit&&vc(za)&&"temporal"===za.type?!!Ya({channel:P,fieldDef:za,fieldDef2:H,stack:ha,markDef:Ca,config:db}):!1}function fc(P){P=
P&&P.condition;return!!P&&!Jg(P)&&rc(P)}function lc(P){P=P&&P.condition;return!!P&&!Jg(P)&&cc(P)}function rc(P){return!!P&&(!!P.field||"count"===P.aggregate)}function Pc(P){return P&&P.type}function $a(P){return!!P&&"datum"in P}function xb(P){return vc(P)&&!vd(P)||Nb(P)}function Nb(P){return $a(P)&&F(P.datum)}function cc(P){return rc(P)||$a(P)}function vc(P){return!!P&&("field"in P||"count"===P.aggregate)&&"type"in P}function ed(P){return P&&"value"in P&&"value"in P}function jb(P){return!!P&&("scale"in
P||"sort"in P)}function Qb(P){return P&&("axis"in P||"stack"in P||"impute"in P)}function pc(P){return!!P&&("format"in P||"formatType"in P)}function Qc(P){return v(P,["legend","axis","header","scale"])}function Cc(P,za={}){let H=P.field;const ha=za.prefix;let Ca=za.suffix,db="";if("count"===P.aggregate)H=la("count");else{let Kc;if(!za.nofn)if("op"in P)Kc=P.op;else{const {bin:ad,aggregate:ld,timeUnit:Pd}=P;if(Db(ad)){var Ab,Pb;Kc=Eb(ad);Ca=(null!==(Ab=za.binSuffix)&&void 0!==Ab?Ab:"")+(null!==(Pb=za.suffix)&&
void 0!==Pb?Pb:"")}else if(ld)kb(ld)?(db='["'.concat(H,'"]'),H="argmax_".concat(ld.argmax)):Ea(ld)?(db='["'.concat(H,'"]'),H="argmin_".concat(ld.argmin)):Kc=String(ld);else if(Pd){var nc;Kc=od(Pd);Ca=(!A(["range","mid"],za.binSuffix)&&za.binSuffix||"")+(null!==(nc=za.suffix)&&void 0!==nc?nc:"")}}Kc&&(H=H?"".concat(Kc,"_").concat(H):Kc)}Ca&&(H="".concat(H,"_").concat(Ca));ha&&(H="".concat(ha,"_").concat(H));return za.forAs?eb(H):za.expr?ua(H,za.expr)+db:Xa(H)+db}function vd(P){switch(P.type){case "nominal":case "ordinal":case "geojson":return!0;
case "quantitative":return rc(P)&&!!P.bin;case "temporal":return!1}throw Error('Invalid field type "'.concat(P.type,'".'));}function Wd(P,za){const {field:H,bin:ha,timeUnit:Ca,aggregate:db}=P;if("count"===db)return za.countTitle;if(Db(ha))return"".concat(H," (binned)");if(Ca){var Ab;if(P=null===(Ab=me(Ca))||void 0===Ab?void 0:Ab.unit)return"".concat(H," (").concat(Nd(P).join("-"),")")}else if(db)return kb(db)?"".concat(H," for max ").concat(db.argmax):Ea(db)?"".concat(H," for min ").concat(db.argmin):
"".concat(Ba(db)," of ").concat(H);return H}function we(P,za,{allowDisabling:H,includeDefault:ha=!0}){var Ca;const db=null===(Ca=ue(P))||void 0===Ca?void 0:Ca.title;if(!rc(P))return db;za=ha?jm(P,za):void 0;if(H)return La(db,P.title,za);var Ab;return null!==(Ab=null!==db&&void 0!==db?db:P.title)&&void 0!==Ab?Ab:za}function ue(P){if(Qb(P)&&P.axis)return P.axis;if(P&&"legend"in P&&P.legend)return P.legend;if(P&&"header"in P&&P.header)return P.header}function sd(P){if(pc(P)){const {format:Ca,formatType:db}=
P;return{format:Ca,formatType:db}}var za;P=null!==(za=ue(P))&&void 0!==za?za:{};const {format:H,formatType:ha}=P;return{format:H,formatType:ha}}function Fe(P,za){var H;switch(za){case "latitude":case "longitude":return"quantitative";case "row":case "column":case "facet":case "shape":case "strokeDash":return"nominal";case "order":return"ordinal"}if("sort"in P&&Jg(P.sort))return"ordinal";const {aggregate:ha,bin:Ca,timeUnit:db}=P;if(db)return"temporal";if(Ca||ha&&!kb(ha)&&!Ea(ha))return"quantitative";
if(jb(P)&&(null===(H=P.scale)||void 0===H?0:H.type))switch(Ze[P.scale.type]){case "numeric":case "discretizing":return"quantitative";case "time":return"temporal"}return"nominal"}function Ge(P){if(rc(P))return P;if(fc(P))return P.condition}function Me(P){if(cc(P))return P;if(lc(P))return P.condition}function rf(P,za,H,ha={}){return t(P)||F(P)||V(P)?(H=t(P)?"string":F(P)?"number":"boolean",za="Channel ".concat(za," is a ").concat(H,". Converted to {value: ").concat(kh(P),"}."),Zc(za),{value:P}):cc(P)?
Ma(P,za,H,ha):lc(P)?{...P,condition:Ma(P.condition,za,H,ha)}:P}function Ma(P,za,H,ha){if(pc(P)){const {format:Ca,formatType:db,...Ab}=P;if(Rd(db)&&!H.customFormatTypes)return Zc(dd(za)),Ma(Ab,za,H,ha)}else{const Ca=Qb(P)?"axis":P&&"legend"in P?"legend":P&&"header"in P?"header":null;if(Ca&&P[Ca]){const {format:db,formatType:Ab,...Pb}=P[Ca];if(Rd(Ab)&&!H.customFormatTypes)return Zc(dd(za)),Ma({...P,[Ca]:Pb},za,H,ha)}}if(rc(P))return lb(P,za,ha);za=P.type;za||({datum:za}=P,za=F(za)?"quantitative":t(za)?
"nominal":xd(za)?"temporal":void 0,P={...P,type:za});return P}function lb(P,za,{compositeMark:H=!1}={}){const {aggregate:ha,timeUnit:Ca,bin:db,field:Ab}=P;P={...P};H||!ha||cb(ha)||kb(ha)||Ea(ha)||(Zc('Invalid aggregation operator "'.concat(ha,'".')),delete P.aggregate);Ca&&(P.timeUnit=me(Ca));Ab&&(P.field="".concat(Ab));Db(db)&&(P.bin=vb(db,za));!bc(db)||za in Wc||Zc("Channel ".concat(za,' should not be used with "binned" bin.'));if(vc(P)){({type:H}=P);const Pb=pf(H);H!==Pb&&(P.type=Pb);"quantitative"!==
H&&Mb(ha)&&(H='Invalid field type "'.concat(H,'" for aggregate: "').concat(ha,'", using "quantitative" instead.'),Zc(H),P.type="quantitative")}else sa(za)||(H=Fe(P,za),P.type=H);if(vc(P)){const {compatible:Pb,warning:nc}=nb(P,za)||{};!1===Pb&&Zc(nc)}if("sort"in P&&t(P.sort)){({sort:za}=P);if(za in Gn)return{...P,sort:{encoding:za}};H=za.substr(1);if("-"===za.charAt(0)&&H in Gn)return{...P,sort:{encoding:H,order:"descending"}}}if(P&&"header"in P){({header:za}=P);const {orient:Pb,...nc}=za;if(Pb)return{...P,
header:{...nc,labelOrient:za.labelOrient||Pb,titleOrient:za.titleOrient||Pb}}}return P}function vb(P,za){return V(P)?{maxbins:Tc(za)}:"binned"===P?{binned:!0}:P.maxbins||P.step?P:{...P,maxbins:Tc(za)}}function nb(P,za){const H=P.type;if("geojson"===H&&"shape"!==za)return{compatible:!1,warning:"Channel ".concat(za," should not be used with a geojson data.")};switch(za){case "row":case "column":case "facet":return vd(P)?am:{compatible:!1,warning:"".concat(za," encoding should be discrete (ordinal / nominal / binned).")};
case "x":case "y":case "color":case "fill":case "stroke":case "text":case "detail":case "key":case "tooltip":case "href":case "url":case "angle":case "theta":case "radius":case "description":return am;case "longitude":case "longitude2":case "latitude":case "latitude2":return"quantitative"!==H?{compatible:!1,warning:"Channel ".concat(za," should be used with a quantitative field only, not ").concat(P.type," field.")}:am;case "opacity":case "fillOpacity":case "strokeOpacity":case "strokeWidth":case "size":case "theta2":case "radius2":case "x2":case "y2":return"nominal"!==
H||P.sort?am:{compatible:!1,warning:"Channel ".concat(za," should not be used with an unsorted discrete field.")};case "strokeDash":return A(["ordinal","nominal"],P.type)?am:{compatible:!1,warning:"StrokeDash channel should be used with only discrete data."};case "shape":return A(["ordinal","nominal","geojson"],P.type)?am:{compatible:!1,warning:"Shape channel should be used with only either discrete or geojson data."};case "order":return"nominal"!==P.type||"sort"in P?am:{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}}}
function ac(P){var {formatType:za}=sd(P),H;if(!(H="time"===za)){if(za=!za)za=P&&("temporal"===P.type||rc(P)&&!!P.timeUnit);H=za}return H}function yc(P,{timeUnit:za,type:H,wrapTime:ha,undefinedIfExprNotRequired:Ca}){var db;H=(za=za&&(null===(db=me(za))||void 0===db?void 0:db.unit))||"temporal"===H;let Ab;zc(P)?Ab=P.expr:hd(P)?Ab=P.signal:xd(P)?(H=!0,Ab=uc(P)):(t(P)||F(P))&&H&&(Ab="datetime(".concat(JSON.stringify(P),")"),Za[za]&&(F(P)&&1E4>P||t(P)&&isNaN(Date.parse(P)))&&(Ab=uc({[za]:P})));return Ab?
ha&&H?"time(".concat(Ab,")"):Ab:Ca?void 0:JSON.stringify(P)}function Mc(P,za){const {type:H}=P;return za.map(ha=>{const Ca=yc(ha,{timeUnit:rc(P)?P.timeUnit:void 0,type:H,undefinedIfExprNotRequired:!0});return void 0!==Ca?{signal:Ca}:ha})}function md(P,za){return Db(P.bin)?!!el[za]&&A(["ordinal","nominal"],P.type):(console.warn("Only call this method for binned field defs."),!1)}function yd(P){const {anchor:za,frame:H,offset:ha,orient:Ca,color:db,subtitleColor:Ab,subtitleFont:Pb,subtitleFontSize:nc,
subtitleFontStyle:Kc,subtitleFontWeight:ad,subtitleLineHeight:ld,subtitlePadding:Pd,...Oe}=P;P={...Oe,...(db?{fill:db}:{})};const Ae={...(za?{anchor:za}:{}),...(H?{frame:H}:{}),...(ha?{offset:ha}:{}),...(Ca?{orient:Ca}:{})},gf={...(Ab?{subtitleColor:Ab}:{}),...(Pb?{subtitleFont:Pb}:{}),...(nc?{subtitleFontSize:nc}:{}),...(Kc?{subtitleFontStyle:Kc}:{}),...(ad?{subtitleFontWeight:ad}:{}),...(ld?{subtitleLineHeight:ld}:{}),...(Pd?{subtitlePadding:Pd}:{})},bf=B(P,["align","baseline","dx","dy","limit"]);
return{titleMarkConfig:P,subtitleMarkConfig:bf,nonMark:Ae,subtitle:gf}}function ne(P){return t(P)||Jg(P)&&t(P[0])}function Le(P){const za=Jg(P.condition)?P.condition.map(Xe):Xe(P.condition);return{...Qe(P),condition:za}}function Qe(P){if(zc(P)){const {expr:za,...H}=P;return{signal:za,...H}}return P}function Xe(P){if(zc(P)){const {expr:za,...H}=P;return{signal:za,...H}}return P}function Ed(P){if(zc(P)){const {expr:za,...H}=P;return{signal:za,...H}}return hd(P)?P:void 0!==P?{value:P}:void 0}function kf(P){return hd(P)?
P.signal:w(P.value)}function og(P){return hd(P)?P.signal:null==P?null:w(P)}function kg(P){var za;return[].concat(P.type,null!==(za=P.style)&&void 0!==za?za:[])}function Uf(P,za,H,ha={}){const {vgChannel:Ca,ignoreVgConfig:db}=ha;if(Ca&&void 0!==za[Ca])return za[Ca];if(void 0!==za[P])return za[P];if(!db||Ca&&Ca!==P)return dg(P,za,H,ha)}function dg(P,za,H,{vgChannel:ha}={}){return La(ha?tg(P,za,H.style):void 0,tg(P,za,H.style),ha?H[za.type][ha]:void 0,H[za.type][P],ha?H.mark[ha]:H.mark[P])}function tg(P,
za,H){return fh(P,kg(za),H)}function fh(P,za,H){za=S(za);let ha;for(const Ca of za)(za=H[Ca])&&void 0!==za[P]&&(ha=za[P]);return ha}function sb(P,za){return S(P).reduce((H,ha)=>{var Ca;H.field.push(Cc(ha,za));H.order.push(null!==(Ca=ha.sort)&&void 0!==Ca?Ca:"ascending");return H},{field:[],order:[]})}function tb(P,za){const H=[...P];za.forEach(ha=>{for(const Ca of H)if(ok(Ca,ha))return;H.push(ha)});return H}function Lb(P,za){return ok(P,za)||!za?P:P?[...S(P),...S(za)].join(", "):za}function Vb(P,
za){const H=P.value;za=za.value;if(null==H||null===za)return{explicit:P.explicit,value:null};if((ne(H)||hd(H))&&(ne(za)||hd(za)))return{explicit:P.explicit,value:Lb(H,za)};if(ne(H)||hd(H))return{explicit:P.explicit,value:H};if(ne(za)||hd(za))return{explicit:P.explicit,value:za};if(!(ne(H)||hd(H)||ne(za)||hd(za)))return{explicit:P.explicit,value:tb(H,za)};throw Error("It should never reach here");}function hc(P){return"mark"in P}function dc(P,za){return(P=P&&P[za])?Jg(P)?J(P,H=>!!H.field):rc(P)||fc(P):
!1}function Fc(P){return J($k,za=>dc(P,za)?(za=P[za],Jg(za)?J(za,H=>!!H.aggregate):(za=Ge(za))&&!!za.aggregate):!1)}function Yc(P,za){const H=[],ha=[],Ca=[],db=[],Ab={};Xd(P,(Pb,nc)=>{if(rc(Pb)){const {field:ad,aggregate:ld,bin:Pd,timeUnit:Oe,...Ae}=Pb;if(ld||Oe||Pd){var Kc=ue(Pb);Kc=Kc&&Kc.title;let gf=Cc(Pb,{forAs:!0});Kc={...(Kc?[]:{title:we(Pb,za,{allowDisabling:!0})}),...Ae,field:gf};if(ld){let bf;kb(ld)?(bf="argmax",gf=Cc({op:"argmax",field:ld.argmax},{forAs:!0}),Kc.field="".concat(gf,".").concat(ad)):
Ea(ld)?(bf="argmin",gf=Cc({op:"argmin",field:ld.argmin},{forAs:!0}),Kc.field="".concat(gf,".").concat(ad)):"boxplot"!==ld&&"errorbar"!==ld&&"errorband"!==ld&&(bf=ld);bf&&(Pb={op:bf,as:gf},ad&&(Pb.field=ad),db.push(Pb))}else H.push(gf),vc(Pb)&&Db(Pd)?(ha.push({bin:Pd,field:ad,as:gf}),H.push(Cc(Pb,{binSuffix:"end"})),md(Pb,nc)&&H.push(Cc(Pb,{binSuffix:"range"})),nc in Wc&&(Ab[nc+"2"]={field:gf+"_end"}),Kc.bin="binned",sa(nc)||(Kc.type="quantitative")):Oe&&(Ca.push({timeUnit:Oe,field:ad,as:gf}),(Pb=
vc(Pb)&&"temporal"!==Pb.type&&"time")&&("text"===nc||"tooltip"===nc?Kc.formatType=Pb:Sb[nc]?Kc.legend={formatType:Pb,...Kc.legend}:nc in Wc&&(Kc.axis={formatType:Pb,...Kc.axis})));Ab[nc]=Kc}else H.push(ad),Ab[nc]=P[nc]}else Ab[nc]=P[nc]});return{bins:ha,timeUnits:Ca,aggregate:db,groupby:H,encoding:Ab}}function Nc(P,za,H){H=mb(za)[H];return H&&("binned"!==H||(H=P["x2"===za?"x":"y"],rc(H)&&rc(P[za])&&bc(H.bin)))?!0:!1}function fd(P,za,H,ha){return sf(P).reduce((Ca,db)=>{if(!yl[db])return Zc(Qd(db)),
Ca;const Ab=P[db];"angle"!==db||"arc"!==za||P.theta||(Zc("Arc marks uses theta channel rather than angle, replacing angle with theta."),db="theta");if(!Nc(P,db,za))return Zc(jd(db,za)),Ca;if("size"===db&&"line"===za){const Pb=Ge(P[db]);if(null===Pb||void 0===Pb?0:Pb.aggregate)return Zc("Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead."),Ca}if("color"===db&&(H?"fill"in P:"stroke"in P))return Zc(nd("encoding",{fill:"fill"in P,stroke:"stroke"in P})),Ca;
if("detail"===db||"order"===db&&!Jg(Ab)&&!ed(Ab)||"tooltip"===db&&Jg(Ab))Ab&&(Ca[db]=S(Ab).reduce((Pb,nc)=>{rc(nc)?Pb.push(lb(nc,db)):Zc(Dc(nc,db));return Pb},[]));else{if("tooltip"===db&&null===Ab)Ca[db]=null;else if(!(rc(Ab)||$a(Ab)||ed(Ab)||Ab&&"condition"in Ab||hd(Ab)))return Zc(Dc(Ab,db)),Ca;Ca[db]=rf(Ab,db,ha)}return Ca},{})}function mc(P,za){const H={};for(const ha of sf(P)){const Ca=rf(P[ha],ha,za,{compositeMark:!0});H[ha]=Ca}return H}function wd(P){const za=[];for(const H of sf(P))if(dc(P,
H)){const ha=S(P[H]);for(const Ca of ha)rc(Ca)?za.push(Ca):fc(Ca)&&za.push(Ca.condition)}return za}function Xd(P,za,H){if(P)for(const ha of sf(P)){const Ca=P[ha];if(Jg(Ca))for(const db of Ca)za.call(H,db,ha);else za.call(H,Ca,ha)}}function ce(P,za,H,ha){return P?sf(P).reduce((Ca,db)=>{const Ab=P[db];return Jg(Ab)?Ab.reduce((Pb,nc)=>za.call(ha,Pb,nc,db),Ca):za.call(ha,Ca,Ab,db)},H):H}function De(P,za){return sf(za).reduce((H,ha)=>{switch(ha){case "x":case "y":case "href":case "description":case "url":case "x2":case "y2":case "theta":case "theta2":case "radius":case "radius2":case "latitude":case "longitude":case "latitude2":case "longitude2":case "text":case "shape":case "angle":case "tooltip":return H;
case "order":if("line"===P||"trail"===P)return H;case "detail":case "key":ha=za[ha];if(Jg(ha)||rc(ha))for(var Ca of S(ha))Ca.aggregate||H.push(Cc(Ca,{}));return H;case "size":if("trail"===P)return H;case "color":case "fill":case "stroke":case "opacity":case "fillOpacity":case "strokeOpacity":case "strokeDash":case "strokeWidth":return(Ca=Ge(za[ha]))&&!Ca.aggregate&&H.push(Cc(Ca,{})),H}},[])}function Ua(P,za,H,ha=!0){if("tooltip"in H)return{tooltip:H.tooltip};P=P.map(({fieldPrefix:Ca,titlePrefix:db})=>
{const Ab=ha?" of ".concat(pb(za)):"";return{field:Ca+za.field,type:za.type,title:hd(db)?{signal:db+'"'.concat(escape(Ab),'"')}:db+Ab}});H=wd(H).map(Qc);return{tooltip:[...P,...ba(H,O)]}}function pb(P){const {title:za,field:H}=P;return La(za,H)}function Rb(P,za,H,ha,Ca){const {scale:db,axis:Ab}=H;return({partName:Pb,mark:nc,positionPrefix:Kc,endPositionPrefix:ad,extraEncoding:ld={}})=>{const Pd=pb(H);return ec(P,Pb,Ca,{mark:nc,encoding:{[za]:{field:Kc+"_"+H.field,type:H.type,...(void 0!==Pd?{title:Pd}:
{}),...(void 0!==db?{scale:db}:{}),...(void 0!==Ab?{axis:Ab}:{})},...(t(ad)?{[za+"2"]:{field:ad+"_"+H.field}}:{}),...ha,...ld}})}}function ec(P,za,H,ha){const {clip:Ca,color:db,opacity:Ab}=P,Pb=P.type;return P[za]||void 0===P[za]&&H[za]?[{...ha,mark:{...H[za],...(Ca?{clip:Ca}:{}),...(db?{color:db}:{}),...(Ab?{opacity:Ab}:{}),...(m(ha.mark)?ha.mark:{type:ha.mark}),style:"".concat(Pb,"-").concat(za),...(V(P[za])?{}:P[za])}}]:[]}function Sc(P,za,H){({encoding:P}=P);za="vertical"===za?"y":"x";const ha=
P[za+"2"],Ca=P[za+"Error"],db=P[za+"Error2"];return{continuousAxisChannelDef:kd(P[za],H),continuousAxisChannelDef2:kd(ha,H),continuousAxisChannelDefError:kd(Ca,H),continuousAxisChannelDefError2:kd(db,H),continuousAxis:za}}function kd(P,za){if(P&&P.aggregate){const {aggregate:H,...ha}=P;H!==za&&(P="Continuous axis should not have customized aggregation function ".concat(H,"; ").concat(za," already agregates the axis."),Zc(P));return ha}return P}function Fd(P,za){const {mark:H,encoding:ha}=P,{x:Ca,
y:db}=ha;if(m(H)&&H.orient)return H.orient;if(xb(Ca)){if(xb(db)){P=rc(Ca)&&Ca.aggregate;const Ab=rc(db)&&db.aggregate;if(!P&&Ab===za)return"vertical";if(Ab||P!==za){if(P===za&&Ab===za)throw Error("Both x and y cannot have aggregate");return ac(db)&&!ac(Ca)?"horizontal":"vertical"}}return"horizontal"}if(xb(db))return"vertical";throw Error("Need a valid continuous axis for ".concat(za,"s"));}function Yd(P){return F(P)?"tukey":P}function je(P,{config:za}){var H;P={...P,encoding:mc(P.encoding,za)};const {mark:ha,
encoding:Ca,selection:db,projection:Ab,...Pb}=P;var nc=m(ha)?ha:{type:ha};db&&Zc(Ld("boxplot"));var Kc=null!==(H=nc.extent)&&void 0!==H?H:za.boxplot.extent,ad=Uf("size",nc,za);H=Yd(Kc);var ld=P;P=Fd(ld,"boxplot");const {continuousAxisChannelDef:Pd,continuousAxis:Oe}=Sc(ld,P,"boxplot");var Ae=Pd.field;const gf=Yd(Kc);var bf=[...re(Ae),{op:"median",field:Ae,as:"mid_box_"+Ae},{op:"min",field:Ae,as:("min-max"===gf?"lower_whisker_":"min_")+Ae},{op:"max",field:Ae,as:("min-max"===gf?"upper_whisker_":"max_")+
Ae}];Ae="min-max"===gf||"tukey"===gf?[]:[{calculate:'datum["upper_box_'.concat(Ae,'"] - datum["lower_box_').concat(Ae,'"]'),as:"iqr_"+Ae},{calculate:'min(datum["upper_box_'.concat(Ae,'"] + datum["iqr_').concat(Ae,'"] * ').concat(Kc,', datum["max_').concat(Ae,'"])'),as:"upper_whisker_"+Ae},{calculate:'max(datum["lower_box_'.concat(Ae,'"] - datum["iqr_').concat(Ae,'"] * ').concat(Kc,', datum["min_').concat(Ae,'"])'),as:"lower_whisker_"+Ae}];({...ld}=ld.encoding);var Te;{const {tooltip:om,...Zm}=ld;
if(om){var xf;if(Jg(om)){for(var Hg of om)Hg.aggregate?(Te||(Te=[]),Te.push(Hg)):(xf||(xf=[]),xf.push(Hg));Te&&(Zm.tooltip=Te)}else om.aggregate?Zm.tooltip=om:xf=om;Jg(xf)&&1===xf.length&&(xf=xf[0]);Te={customTooltipWithoutAggregatedField:xf,filteredEncoding:Zm}}else Te={filteredEncoding:Zm}}const {customTooltipWithoutAggregatedField:Df,filteredEncoding:yf}=Te,{bins:Wg,timeUnits:tj,aggregate:zk,groupby:rk,encoding:qi}=Yc(yf,za);Te=[...Wg,...tj,{aggregate:[...zk,...bf],groupby:rk},...Ae];const {bins:uj,
timeUnits:Il,transform:Wl,continuousAxisChannelDef:$i,continuousAxis:dm,groupby:eo,aggregate:Xm,encodingWithoutContinuousAxis:Ym,ticksOrient:fo,boxOrient:go,customTooltipWithoutAggregatedField:ho}={bins:Wg,timeUnits:tj,transform:Te,groupby:rk,aggregate:zk,continuousAxisChannelDef:Pd,continuousAxis:Oe,encodingWithoutContinuousAxis:qi,ticksOrient:"vertical"===P?"horizontal":"vertical",boxOrient:P,customTooltipWithoutAggregatedField:Df},{color:io,size:Gm,...zn}=Ym;P=Rb(nc,dm,$i,zn,za.boxplot);Te=Rb(nc,
dm,$i,Ym,za.boxplot);xf=Rb(nc,dm,$i,{...zn,...(Gm?{size:Gm}:{})},za.boxplot);Hg=Ua([{fieldPrefix:"min-max"===H?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:"min-max"===H?"lower_whisker_":"min_",titlePrefix:"Min"}],$i,Ym);bf={type:"tick",color:"black",opacity:1,orient:fo,invalid:null,aria:!1};ld="min-max"===H?Hg:Ua([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},
{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],$i,Ym);P=[...P({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:ld}),...P({partName:"rule",mark:{type:"rule",invalid:null,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:ld}),...P({partName:"ticks",mark:bf,positionPrefix:"lower_whisker",extraEncoding:ld}),...P({partName:"ticks",mark:bf,positionPrefix:"upper_whisker",extraEncoding:ld})];
ad=[...("tukey"!==H?P:[]),...Te({partName:"box",mark:{type:"bar",...(ad?{size:ad}:{}),orient:go,invalid:null,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:Hg}),...xf({partName:"median",mark:{type:"tick",invalid:null,...(D(za.boxplot.median)&&za.boxplot.median.color?{color:za.boxplot.median.color}:{}),...(ad?{size:ad}:{}),orient:fo,aria:!1},positionPrefix:"mid_box",extraEncoding:Hg})];if("min-max"===H){var Jl;return{...Pb,transform:(null!==(Jl=Pb.transform)&&
void 0!==Jl?Jl:[]).concat(Wl),layer:ad}}Jl='datum["lower_box_'.concat($i.field,'"]');H='datum["upper_box_'.concat($i.field,'"]');Te="(".concat(H," - ").concat(Jl,")");Jl="".concat(Jl," - ").concat(Kc," * ").concat(Te);Te="".concat(H," + ").concat(Kc," * ").concat(Te);xf='datum["'.concat($i.field,'"]');Kc={joinaggregate:re($i.field),groupby:eo};H={transform:[{filter:"(".concat(Jl," \x3c\x3d ").concat(xf,") \x26\x26 (").concat(xf," \x3c\x3d ").concat(Te,")")},{aggregate:[{op:"min",field:$i.field,as:"lower_whisker_"+
$i.field},{op:"max",field:$i.field,as:"upper_whisker_"+$i.field},{op:"min",field:"lower_box_"+$i.field,as:"lower_box_"+$i.field},{op:"max",field:"upper_box_"+$i.field,as:"upper_box_"+$i.field},...Xm],groupby:eo}],layer:P};const {tooltip:jo,...So}=zn,{scale:ko,axis:An}=$i;P=pb($i);Hg=v(An,["title"]);za=ec(nc,"outliers",za.boxplot,{transform:[{filter:"(".concat(xf," \x3c ").concat(Jl,") || (").concat(xf," \x3e ").concat(Te,")")}],mark:"point",encoding:{[dm]:{field:$i.field,type:$i.type,...(void 0!==
P?{title:P}:{}),...(void 0!==ko?{scale:ko}:{}),...(E(Hg)?{}:{axis:Hg})},...So,...(io?{color:io}:{}),...(ho?{tooltip:ho}:{})}})[0];nc=[...uj,...Il,Kc];za?za={transform:nc,layer:[za,H]}:(za=H,za.transform.unshift(...nc));return{...Pb,layer:[za,{transform:Wl,layer:ad}]}}function re(P){return[{op:"q1",field:P,as:"lower_box_"+P},{op:"q3",field:P,as:"upper_box_"+P}]}function xe(P,{config:za}){P={...P,encoding:mc(P.encoding,za)};const {transform:H,continuousAxisChannelDef:ha,continuousAxis:Ca,encodingWithoutContinuousAxis:db,
ticksOrient:Ab,markDef:Pb,outerSpec:nc,tooltipEncoding:Kc}=Qf(P,"errorbar",za);delete db.size;P=Rb(Pb,Ca,ha,db,za.errorbar);za=Pb.thickness;var ad=Pb.size;ad={type:"tick",orient:Ab,aria:!1,...(void 0!==za?{thickness:za}:{}),...(void 0!==ad?{size:ad}:{})};P=[...P({partName:"ticks",mark:ad,positionPrefix:"lower",extraEncoding:Kc}),...P({partName:"ticks",mark:ad,positionPrefix:"upper",extraEncoding:Kc}),...P({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...(void 0!==za?{size:za}:
{})},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:Kc})];return{...nc,transform:H,...(1<P.length?{layer:P}:{...P[0]})}}function Af(P,za){var {encoding:H}=P;if(!(!cc(H.x)&&!cc(H.y)||cc(H.x2)||cc(H.y2)||cc(H.xError)||cc(H.xError2)||cc(H.yError)||cc(H.yError2)))return{orient:Fd(P,za),inputType:"raw"};var ha=cc(H.x2)||cc(H.y2);var Ca=cc(H.xError)||cc(H.xError2)||cc(H.yError)||cc(H.yError2);P=H.x;const db=H.y;if(ha){if(Ca)throw Error("".concat(za," cannot be both type aggregated-upper-lower and aggregated-error"));
ha=H.x2;H=H.y2;if(cc(ha)&&cc(H))throw Error("".concat(za," cannot have both x2 and y2"));if(cc(ha)){if(xb(P))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw Error("Both x and x2 have to be quantitative in ".concat(za));}if(cc(H)){if(xb(db))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw Error("Both y and y2 have to be quantitative in ".concat(za));}}else{ha=H.xError;Ca=H.yError;const Ab=H.yError2;if(cc(H.xError2)&&!cc(ha))throw Error("".concat(za," cannot have xError2 without xError"));
if(cc(Ab)&&!cc(Ca))throw Error("".concat(za," cannot have yError2 without yError"));if(cc(ha)&&cc(Ca))throw Error("".concat(za," cannot have both xError and yError with both are quantiative"));if(cc(ha)){if(xb(P))return{orient:"horizontal",inputType:"aggregated-error"};throw Error("All x, xError, and xError2 (if exist) have to be quantitative");}if(cc(Ca)){if(xb(db))return{orient:"vertical",inputType:"aggregated-error"};throw Error("All y, yError, and yError2 (if exist) have to be quantitative");
}}throw Error("No ranged axis");}function Qf(P,za,H){var ha;const {mark:Ca,encoding:db,selection:Ab,projection:Pb,...nc}=P,Kc=m(Ca)?Ca:{type:Ca};Ab&&Zc(Ld(za));const {orient:ad,inputType:ld}=Af(P,za),{continuousAxisChannelDef:Pd,continuousAxisChannelDef2:Oe,continuousAxisChannelDefError:Ae,continuousAxisChannelDefError2:gf,continuousAxis:bf}=Sc(P,ad,za);var Te=[];P=[];var xf=Pd.field,Hg=!1;if("raw"===ld){var Df=Kc.center?Kc.center:Kc.extent?"iqr"===Kc.extent?"median":"mean":H.errorbar.center;var yf=
Kc.extent?Kc.extent:"mean"===Df?"stderr":"iqr";"median"===Df!==("iqr"===yf)&&(Te=yf,Te="".concat(Df," is not usually used with ").concat(Te," for ").concat(za,"."),Zc(Te));"stderr"===yf||"stdev"===yf?(Te=[{op:yf,field:xf,as:"extent_"+xf},{op:Df,field:xf,as:"center_"+xf}],P=[{calculate:'datum["center_'.concat(xf,'"] + datum["extent_').concat(xf,'"]'),as:"upper_"+xf},{calculate:'datum["center_'.concat(xf,'"] - datum["extent_').concat(xf,'"]'),as:"lower_"+xf}],xf={fieldPrefix:"center_",titlePrefix:Ba(Df)},
Hg=yf,Hg={fieldPrefix:"upper_",titlePrefix:Ba(Df)+" + "+Hg},Df=Ba(Df)+" - "+yf,Df=[xf,Hg,{fieldPrefix:"lower_",titlePrefix:Df}],Hg=!0):("ci"===yf?(Df="mean",yf="ci0",za="ci1"):(Df="median",yf="q1",za="q3"),Te=[{op:yf,field:xf,as:"lower_"+xf},{op:za,field:xf,as:"upper_"+xf},{op:Df,field:xf,as:"center_"+xf}],Df=[{fieldPrefix:"upper_",titlePrefix:we({field:xf,aggregate:za,type:"quantitative"},H,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:we({field:xf,aggregate:yf,type:"quantitative"},H,{allowDisabling:!1})},
{fieldPrefix:"center_",titlePrefix:we({field:xf,aggregate:Df,type:"quantitative"},H,{allowDisabling:!1})}])}else{if(Kc.center||Kc.extent){za=Kc.center;var Wg=Kc.extent;za="".concat(Wg?"extent ":"").concat(Wg&&za?"and ":"").concat(za?"center ":"").concat(Wg&&za?"are ":"is ","not needed when data are aggregated.");Zc(za)}"aggregated-upper-lower"===ld?(Df=[],P=[{calculate:'datum["'.concat(Oe.field,'"]'),as:"upper_"+xf},{calculate:'datum["'.concat(xf,'"]'),as:"lower_"+xf}]):"aggregated-error"===ld&&(Df=
[{fieldPrefix:"",titlePrefix:xf}],P=[{calculate:'datum["'.concat(xf,'"] + datum["').concat(Ae.field,'"]'),as:"upper_"+xf}],gf?P.push({calculate:'datum["'.concat(xf,'"] + datum["').concat(gf.field,'"]'),as:"lower_"+xf}):P.push({calculate:'datum["'.concat(xf,'"] - datum["').concat(Ae.field,'"]'),as:"lower_"+xf}));for(yf of P)Df.push({fieldPrefix:yf.as.substring(0,6),titlePrefix:Sa(Sa(yf.calculate,'datum["',""),'"]',"")})}const {errorBarSpecificAggregate:tj,postAggregateCalculates:zk,tooltipSummary:rk,
tooltipTitleWithFieldName:qi}={postAggregateCalculates:P,errorBarSpecificAggregate:Te,tooltipSummary:Df,tooltipTitleWithFieldName:Hg};({...P}=db);const {bins:uj,timeUnits:Il,aggregate:Wl,groupby:$i,encoding:dm}=Yc(P,H);H=[...Wl,...tj];P="raw"!==ld?[]:$i;Te=Ua(rk,Pd,dm,qi);return{transform:[...(null!==(ha=nc.transform)&&void 0!==ha?ha:[]),...uj,...Il,...(0===H.length?[]:[{aggregate:H,groupby:P}]),...zk],groupby:P,continuousAxisChannelDef:Pd,continuousAxis:bf,encodingWithoutContinuousAxis:dm,ticksOrient:"vertical"===
ad?"horizontal":"vertical",markDef:Kc,outerSpec:nc,tooltipEncoding:Te}}function Hc(P,{config:za}){P={...P,encoding:mc(P.encoding,za)};const {transform:H,continuousAxisChannelDef:ha,continuousAxis:Ca,encodingWithoutContinuousAxis:db,markDef:Ab,outerSpec:Pb,tooltipEncoding:nc}=Qf(P,"errorband",za);za=Rb(Ab,Ca,ha,db,za.errorband);P=void 0!==P.encoding.x&&void 0!==P.encoding.y;let Kc={type:P?"area":"rect"},ad={type:P?"line":"rule"};const ld={...(Ab.interpolate?{interpolate:Ab.interpolate}:{}),...(Ab.tension&&
Ab.interpolate?{tension:Ab.tension}:{})};P?(Kc={...Kc,...ld,ariaRoleDescription:"errorband"},ad={...ad,...ld,aria:!1}):Ab.interpolate?Zc(Jc("interpolate")):Ab.tension&&Zc(Jc("tension"));return{...Pb,transform:H,layer:[...za({partName:"band",mark:Kc,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:nc}),...za({partName:"borders",mark:ad,positionPrefix:"lower",extraEncoding:nc}),...za({partName:"borders",mark:ad,positionPrefix:"upper",extraEncoding:nc})]}}function td(P,za,H){za=new bm(P,
za);Hn[P]={normalizer:za,parts:H}}function id(P){const za=[];for(const H of P||[]){const {expr:ha,bind:Ca,...db}=H;Ca&&ha?za.push({...db,bind:Ca,init:ha}):za.push({...db,...(ha?{update:ha}:{}),...(Ca?{bind:Ca}:{})})}return za}function ke(P){return!!P&&("legend"===P||!!P.legend)}function Ob(P){return ke(P)&&D(P)}function gc(P,za){const H={};for(const ha of Qh)P&&void 0!==P[ha]&&(H[ha]=Qe(P[ha]));za&&(H.params=P.params);return H}function Ac(P){return D(P)&&void 0!==P.step}function Uc(P){return P.view||
P.width||P.height}function y(P,za,H){const ha={},{spacing:Ca,columns:db}=H[za];void 0!==Ca&&(ha.spacing=Ca);void 0!==db&&("facet"in P&&!Pf(P.facet)||"concat"in P)&&(ha.columns=db);"vconcat"in P&&(ha.columns=1);for(const nc of to)if(void 0!==P[nc])if("spacing"===nc){var Ab,Pb;za=P[nc];ha[nc]=F(za)?za:{row:null!==(Ab=za.row)&&void 0!==Ab?Ab:Ca,column:null!==(Pb=za.column)&&void 0!==Pb?Pb:Ca}}else ha[nc]=P[nc];return ha}function wa(P,za){var H;return null!==(H=P[za])&&void 0!==H?H:P["width"===za?"continuousWidth":
"continuousHeight"]}function fb(P,za){P=Ib(P,za);return Ac(P)?P.step:20}function Ib(P,za){var H;za=null!==(H=P[za])&&void 0!==H?H:P["width"===za?"discreteWidth":"discreteHeight"];return La(za,{step:P.step})}function kc(P={}){return{signals:[{name:"color",value:D(P)?{...fn,...P}:fn}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},
"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function $c(P){var za=sf(P||{});const H={};for(const ha of za)za=
P[ha],H[ha]=Qa(za)?Le(za):Qe(za);return H}function zd(P={}){const {color:za,font:H,fontSize:ha,...Ca}=P;P=H?{text:{font:H},style:{"guide-label":{font:H},"guide-title":{font:H},"group-title":{font:H},"group-subtitle":{font:H}}}:{};var db=za?kc(za):{};var Ab=ha?{signals:[{name:"fontSize",value:D(ha)?{...Ln,...ha}:Ln}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},
"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}:{};P=U({},uo,P,db,Ab,Ca||{});db=v(P,wm);for(var Pb of["background","lineBreak","padding"])P[Pb]&&(db[Pb]=Qe(P[Pb]));for(var nc of Lm)P[nc]&&(db[nc]=Wa(P[nc]));for(var Kc of Ii)P[Kc]&&(db[Kc]=$c(P[Kc]));for(const ad of Mm)P[ad]&&(db[ad]=Wa(P[ad]));P.legend&&(db.legend=Wa(P.legend));P.scale&&(db.scale=Wa(P.scale));if(P.style){Pb=P.style;nc=sf(Pb);Kc={};for(const ad of nc)Kc[ad]=$c(Pb[ad]);db.style=Kc}P.title&&(db.title=Wa(P.title));P.view&&
(db.view=Wa(P.view));return db}function rd(P){P=Rf(P);for(var za of vo)delete P[za];if(P.axis)for(var H in P.axis)Qa(P.axis[H])&&delete P.axis[H];if(P.legend)for(var ha of In)delete P.legend[ha];if(P.mark){for(var Ca of Fn)delete P.mark[Ca];P.mark.tooltip&&D(P.mark.tooltip)&&delete P.mark.tooltip}P.params&&(P.signals=(P.signals||[]).concat(id(P.params)),delete P.params);for(var db of Mn){for(const ld of Fn)delete P[db][ld];if(za=gn[db])for(const ld of za)delete P[db][ld];H=za=void 0;ha=P;Ca=db;var Ab=
void 0,Pb=ha[Ca];"view"===Ca&&(Ab="cell");Pb={...Pb,...ha.style[null!==(H=Ab)&&void 0!==H?H:Ca]};E(Pb)||(ha.style[null!==(za=Ab)&&void 0!==za?za:Ca]=Pb);delete ha[Ca]}for(const ld of sf(Hn))delete P[ld];db=P;const {titleMarkConfig:nc,subtitleMarkConfig:Kc,subtitle:ad}=yd(db.title);E(nc)||(db.style["group-title"]={...db.style["group-title"],...nc});E(Kc)||(db.style["group-subtitle"]={...db.style["group-subtitle"],...Kc});E(ad)?delete db.title:db.title=ad;for(const ld in P)D(P[ld])&&E(P[ld])&&delete P[ld];
return E(P)?void 0:P}function Zd(P,za){const H="x"===za?"y":"radius";var ha=P[za];P=P[H];if(rc(ha)&&rc(P))if("quantitative"===Pc(ha)&&"quantitative"===Pc(P)){if(ha.stack)return za;if(P.stack)return H;const Ab=rc(ha)&&!!ha.aggregate,Pb=rc(P)&&!!P.aggregate;if(Ab!==Pb)return Ab?za:H;var Ca,db;ha=null===(Ca=ha.scale)||void 0===Ca?void 0:Ca.type;Ca=null===(db=P.scale)||void 0===db?void 0:db.type;if(ha&&"linear"!==ha)return H;if(Ca&&"linear"!==Ca)return za}else{if("quantitative"===Pc(ha))return za;if("quantitative"===
Pc(P))return H}else{if("quantitative"===Pc(ha))return za;if("quantitative"===Pc(P))return H}}function ve(P){switch(P){case "x":return"y";case "y":return"x";case "theta":return"radius";case "radius":return"theta"}}function Pe(P,za,H={}){P=m(P)?P.type:P;if(!Bl.has(P))return null;const ha=Zd(za,"x")||Zd(za,"theta");if(!ha)return null;const Ca=za[ha];var db=rc(Ca)?Cc(Ca,{}):void 0;let Ab=ve(ha),Pb=za[Ab],nc=rc(Pb)?Cc(Pb,{}):void 0;nc===db&&(Ab=Pb=nc=void 0);db=wc.reduce((ad,ld)=>{if("tooltip"!==ld&&dc(za,
ld)){var Pd=za[ld];for(const Oe of S(Pd)){Pd=Ge(Oe);if(Pd.aggregate)continue;const Ae=Cc(Pd,{});Ae&&Ae===nc||ad.push({channel:ld,fieldDef:Pd})}}return ad},[]);let Kc;void 0!==Ca.stack?Kc=V(Ca.stack)?Ca.stack?"zero":null:Ca.stack:0<db.length&&xo.has(P)&&(Kc="zero");if(!(Kc&&Kc in wo)||Fc(za)&&0===db.length)return null;if(Ca.scale&&Ca.scale.type&&Ca.scale.type!==le.LINEAR){if(H.disallowNonLinearStack)return null;Zc("Cannot stack non-linear scale (".concat(Ca.scale.type,")."))}if(cc(za[Ia(ha)]))return void 0!==
Ca.stack&&Zc($b(ha)),null;rc(Ca)&&Ca.aggregate&&!A(Zk,Ca.aggregate)&&Zc('Stacking is applied even though the aggregate function is non-summative ("'.concat(Ca.aggregate,'").'));return{groupbyChannel:Pb?Ab:void 0,groupbyField:nc,fieldChannel:ha,impute:null===Ca.impute?!1:Ha(P),stackBy:db,offset:Kc}}function hf(P,za={},H){if("transparent"===P.point)return{opacity:0};if(P.point)return D(P.point)?P.point:{};if(void 0!==P.point)return null;if(za.point||H.shape)return D(za.point)?za.point:{}}function eg(P,
za={}){if(P.line)return!0===P.line?{}:P.line;if(void 0!==P.line)return null;if(za.line)return!0===za.line?{}:za.line}function Sf(P,za){return za?ug(P,za):P}function gg(P,za,H){const ha=za[P];if(ha&&!t(ha)&&"repeat"in ha){if(ha.repeat in H)return{...za,[P]:H[ha.repeat]};Zc('Unknown repeated value "'.concat(ha.repeat,'".'))}else return za}function vf(P,za){P=gg("field",P,za);if(void 0!==P){if(null===P)return null;"sort"in P&&he(P.sort)&&(za=gg("field",P.sort,za),P={...P,...(za?{sort:za}:{})});return P}}
function df(P,za){if(rc(P))return vf(P,za);za=gg("datum",P,za);za===P||za.type||(za.type="nominal");return za}function Gf(P,za){if(cc(P)){if(za=df(P,za))return za;if(P&&"condition"in P)return{condition:P.condition}}else{if(lc(P)){if(za=df(P.condition,za))return{...P,condition:za};const {condition:H,...ha}=P;return ha}return P}}function ug(P,za){const H={};for(const Ca in P)if($g.call(P,Ca)){var ha=P[Ca];Jg(ha)?H[Ca]=ha.map(db=>Gf(db,za)).filter(db=>db):(ha=Gf(ha,za),void 0!==ha&&(H[Ca]=ha))}return H}
function Ng({parentEncoding:P,encoding:za={},layer:H}){let ha={};if(P){var Ca=new Set([...sf(P),...sf(za)]);for(const db of Ca){Ca=za[db];const Ab=P[db];if(cc(Ca))ha[db]={...Ab,...Ca};else if(lc(Ca))ha[db]={...Ca,condition:{...Ab,...Ca.condition}};else if(Ca||null===Ca)ha[db]=Ca;else if(H||ed(Ab)||hd(Ab)||cc(Ab)||Jg(Ab))ha[db]=Ab}}else ha=za;return!ha||E(ha)?void 0:ha}function Vg(P){const {parentProjection:za,projection:H}=P;if(za&&H){const {parentProjection:ha,projection:Ca}={parentProjection:za,
projection:H};P="Layer's shared projection ".concat(kh(ha)," is overridden by a child projection ").concat(kh(Ca),".");Zc(P)}return null!==H&&void 0!==H?H:za}function ch(P,za){void 0===za&&(za=zd(P.config));const H=Mg(P,za),{width:ha,height:Ca}=P;{let {width:db,height:Ab}={width:ha,height:Ca,autosize:P.autosize};P=hc(H)||"layer"in H;const Pb={};P?"container"==db&&"container"==Ab?(Pb.type="fit",Pb.contains="padding"):"container"==db?(Pb.type="fit-x",Pb.contains="padding"):"container"==Ab&&(Pb.type=
"fit-y",Pb.contains="padding"):("container"==db&&(Zc(Kd("width")),db=void 0),"container"==Ab&&(Zc(Kd("height")),Ab=void 0));za={type:"pad",...Pb,...(za?Ef(za.autosize):{}),...Ef(H.autosize)};"fit"!==za.type||P||(Zc('Autosize "fit" only works for single views and layered views.'),za.type="pad");"container"==db&&"fit"!=za.type&&"fit-x"!=za.type&&Zc(Vd("width"));"container"==Ab&&"fit"!=za.type&&"fit-y"!=za.type&&Zc(Vd("height"));za=ok(za,{type:"pad"})?void 0:za}return{...H,...(za?{autosize:za}:{})}}
function Mg(P,za={}){return Bo.map(P,{config:za})}function Ef(P){return t(P)?{type:P}:null!==P&&void 0!==P?P:{}}function Sh(P){return{explicit:!0,value:P}}function Dg(P){return{explicit:!1,value:P}}function qg(P){return(za,H,ha,Ca)=>{const db=P(za.value,H.value);return 0<db?za:0>db?H:Nf(za,H,ha,Ca)}}function Nf(P,za,H,ha){if(P.explicit&&za.explicit){var Ca=P.value;za=za.value;H="Conflicting ".concat(ha.toString(),' property "').concat(H.toString(),'" (').concat(kh(Ca)," and ").concat(kh(za),"). Using ").concat(kh(Ca),
".");Zc(H)}return P}function nh(P,za,H,ha,Ca=Nf){return void 0===P||void 0===P.value?za:P.explicit&&!za.explicit?P:za.explicit&&!P.explicit?za:ok(P.value,za.value)?P:Ca(P,za,H,ha)}function si(P){return"name"in P&&!("url"in P)&&!("values"in P)&&!oh(P)}function oh(P){return P&&("sequence"in P||"sphere"in P||"graticule"in P)}function jj(P){return P.map(za=>"filter"in za?{filter:R(za.filter,zg)}:za)}function Ki(P,za,H){Pn=za||"view";Qk=H||Co;return Kj(P.trim()).map(rj)}function Bi(P,za,H,ha,Ca){const db=
P.length;let Ab=0,Pb;for(;za<db;++za)if(Pb=P[za],Ab||Pb!==H)Ca&&0<=Ca.indexOf(Pb)?--Ab:ha&&0<=ha.indexOf(Pb)&&++Ab;else break;return za}function Kj(P){const za=[],H=P.length;let ha=0,Ca=0;for(;Ca<H;)Ca=Bi(P,Ca,",","[{","]}"),za.push(P.substring(ha,Ca).trim()),ha=++Ca;if(0===za.length)throw"Empty event selector: "+P;return za}function rj(P){if("["===P[0]){var za=P;var H=za.length;P=Bi(za,1,"]","[","]");if(P===H)throw"Empty between selector: "+za;H=Kj(za.substring(1,P));if(2!==H.length)throw"Between selector must have two elements: "+
za;za=za.slice(P+1).trim();if("\x3e"!==za[0])throw"Expected '\x3e' after between selector: "+za;H=H.map(rj);za=rj(za.slice(1).trim());za.between?za={between:H,stream:za}:za.between=H}else{H={source:Pn};const ha=[];let Ca=[0,0],db=0,Ab=0,Pb=P.length,nc=0,Kc;if("}"===P[Pb-1]){nc=P.lastIndexOf("{");if(0<=nc){try{Ca=vk(P.substring(nc+1,Pb-1))}catch(ad){throw"Invalid throttle specification: "+P;}P=P.slice(0,nc).trim();Pb=P.length}else throw"Unmatched right brace: "+P;nc=0}if(!Pb)throw P;"@"===P[0]&&(db=
++nc);Kc=Bi(P,nc,":");Kc<Pb&&(ha.push(P.substring(Ab,Kc).trim()),Ab=nc=++Kc);nc=Bi(P,nc,"[");if(nc===Pb)ha.push(P.substring(Ab,Pb).trim());else if(ha.push(P.substring(Ab,nc).trim()),za=[],Ab=++nc,Ab===Pb)throw"Unmatched left bracket: "+P;for(;nc<Pb;){nc=Bi(P,nc,"]");if(nc===Pb)throw"Unmatched left bracket: "+P;za.push(P.substring(Ab,nc).trim());if(nc<Pb-1&&"["!==P[++nc])throw"Expected left bracket: "+P;Ab=++nc}if(!(Pb=ha.length)||Ql.test(ha[Pb-1]))throw"Invalid event selector: "+P;1<Pb?(H.type=ha[1],
db?H.markname=ha[0].slice(1):Qk[ha[0]]?H.marktype=ha[0]:H.source=ha[0]):H.type=ha[0];"!"===H.type.slice(-1)&&(H.consume=!0,H.type=H.type.slice(0,-1));null!=za&&(H.filter=za);Ca[0]&&(H.throttle=Ca[0]);Ca[1]&&(H.debounce=Ca[1]);za=H}return za}function vk(P){const za=P.split(",");if(!P.length||2<za.length)throw P;return za.map(H=>{H=+H;if(H!==H)throw P;return H})}function gk(P,za,H,ha){var Ca=!!za&&"condition"in za&&za.condition;za=ha(za);return Ca?(Ca=S(Ca).map(db=>{const Ab=ha(db);return{test:db.selection?
Ph(P,db.selection):hi(P,db.test),...Ab}}),{[H]:[...Ca,...(void 0!==za?[za]:[])]}):void 0!==za?{[H]:za}:{}}function qj(P,za="text"){return gk(P,P.encoding[za],za,H=>vh(H,P.config))}function vh(P,za,H="datum"){if(P){if(ed(P))return Ed(P.value);if(cc(P)){const {format:ha,formatType:Ca}=sd(P);return jf({fieldOrDatumDef:P,format:ha,formatType:Ca,expr:H,config:za})}}}function Ek(P,za={}){const {encoding:H,markDef:ha,config:Ca,stack:db}=P,Ab=H.tooltip;if(Jg(Ab))return{tooltip:Lf({tooltip:Ab},db,Ca,za)};
const Pb=za.reactiveGeom?"datum.datum":"datum";return gk(P,Ab,"tooltip",nc=>{const Kc=vh(nc,Ca,Pb);if(Kc)return Kc;if(null!==nc){nc=Uf("tooltip",ha,Ca);!0===nc&&(nc={content:"encoding"});if(t(nc))return{value:nc};if(D(nc))return hd(nc)?nc:"encoding"===nc.content?Lf(H,db,Ca,za):{signal:Pb}}})}function Lj(P,za,H,{reactiveGeom:ha}={}){function Ca(nc,Kc){var ad,ld=ra(Kc);nc=vc(nc)?nc:{...nc,type:P[ld].type};ld=nc.title||jm(nc,H);ld=S(ld).join(", ");if(Kc in Wc){const Ae="x"===Kc?"x2":"y2";var Pd=Ge(P[Ae]);
if(bc(nc.bin)&&Pd){var Oe=Cc(nc,{expr:Ab});Pd=Cc(Pd,{expr:Ab});const {format:gf,formatType:bf}=sd(nc);Oe=Kf(Oe,Pd,gf,bf,H);db[Ae]=!0}else if(za&&za.fieldChannel===Kc&&"normalize"===za.offset){const {format:gf,formatType:bf}=sd(nc);Oe=jf({fieldOrDatumDef:nc,format:gf,formatType:bf,expr:Ab,config:H,normalizeStack:!0}).signal}}Oe=null!==(ad=Oe)&&void 0!==ad?ad:vh(nc,H,Ab).signal;Pb.push({channel:Kc,key:ld,value:Oe})}const db={},Ab=ha?"datum.datum":"datum",Pb=[];Xd(P,(nc,Kc)=>{rc(nc)?Ca(nc,Kc):fc(nc)&&
Ca(nc.condition,Kc)});ha={};for(const {channel:nc,key:Kc,value:ad}of Pb)db[nc]||ha[Kc]||(ha[Kc]=ad);return ha}function Lf(P,za,H,{reactiveGeom:ha}={}){P=Lj(P,za,H,{reactiveGeom:ha});P=fi(P).map(([Ca,db])=>'"'.concat(Ca,'": ').concat(db));return 0<P.length?{signal:"{".concat(P.join(", "),"}")}:void 0}function Ai(P){const {encoding:za,markDef:H,config:ha,stack:Ca}=P;var db=za.description;if(db)return gk(P,db,"description",Ab=>vh(Ab,P.config));db=Uf("description",H,ha);if(null!=db)return{description:Ed(db)};
if(!1===ha.aria)return{};db=Lj(za,Ca,ha);if(!E(db))return{description:{signal:fi(db).map(([Ab,Pb],nc)=>'"'.concat(0<nc?"; ":"").concat(Ab,': " + (').concat(Pb,")")).join(" + ")}}}function wi(P,za,H={}){const {markDef:ha,encoding:Ca,config:db}=za,{vgChannel:Ab}=H;let {defaultRef:Pb,defaultValue:nc}=H;if(void 0===Pb){var Kc;nc=null!==(Kc=nc)&&void 0!==Kc?Kc:Uf(P,ha,db,{vgChannel:Ab,ignoreVgConfig:!0});void 0!==nc&&(Pb=Ed(nc))}return gk(za,Ca[P],null!==Ab&&void 0!==Ab?Ab:P,ad=>nf({channel:P,channelDef:ad,
markDef:ha,config:db,scaleName:za.scaleName(P),scale:za.getScaleComponent(P),stack:null,defaultRef:Pb}))}function uk(P,za={filled:void 0}){var H,ha,Ca,db;const {markDef:Ab,encoding:Pb,config:nc}=P,{type:Kc}=Ab;za=null!==(H=za.filled)&&void 0!==H?H:Uf("filled",Ab,nc);H=A(["bar","point","circle","square","geoshape"],Kc)?"transparent":void 0;H=null!==(ha=null!==(Ca=Uf(!0===za?"color":void 0,Ab,nc,{vgChannel:"fill"}))&&void 0!==Ca?Ca:nc.mark[!0===za&&"color"])&&void 0!==ha?ha:H;ha=null!==(db=Uf(!1===
za?"color":void 0,Ab,nc,{vgChannel:"stroke"}))&&void 0!==db?db:nc.mark[!1===za&&"color"];db=za?"fill":"stroke";Ca={...(H?{fill:Ed(H)}:{}),...(ha?{stroke:Ed(ha)}:{})};Ab.color&&(za?Ab.fill:Ab.stroke)&&Zc(nd("property",{fill:"fill"in Ab,stroke:"stroke"in Ab}));return{...Ca,...wi("color",P,{vgChannel:db,defaultValue:za?H:ha}),...wi("fill",P,{defaultValue:Pb.fill?H:void 0}),...wi("stroke",P,{defaultValue:Pb.stroke?ha:void 0})}}function Yk(P){const {encoding:za,mark:H}=P,ha=za.order;return!Ha(H)&&ed(ha)?
gk(P,ha,"zindex",Ca=>Ed(Ca.value)):{}}function Oi(P,za){P=Hb(P);if(za=za[P])return za}function Vh(P,za,{defaultPos:H,vgChannel:ha,isMidPoint:Ca}){const {encoding:db,markDef:Ab,config:Pb,stack:nc}=za,Kc=db[P],ad=db[Ia(P)],ld=za.scaleName(P),Pd=za.getScaleComponent(P),Oe=Oi(P,Ab);H=hk({model:za,defaultPos:H,channel:P,scaleName:ld,scale:Pd});if(!Kc&&P in Wc&&(db.latitude||db.longitude))za={field:za.getName(P)};else a:{za={channel:P,channelDef:Kc,channel2Def:ad,markDef:Ab,config:Pb,isMidPoint:Ca,scaleName:ld,
scale:Pd,stack:nc,offset:Oe,defaultRef:H};const {channel:Ae,channelDef:gf,isMidPoint:bf,scaleName:Te,stack:xf,offset:Hg,markDef:Df,config:yf}=za;if(cc(gf)&&xf&&Ae===xf.fieldChannel){if(rc(gf)&&(za=Ya({channel:Ae,fieldDef:gf,isMidPoint:bf,markDef:Df,stack:xf,config:yf}),void 0!==za)){za=Td({scaleName:Te,fieldOrDatumDef:gf,startSuffix:"start",band:za,offset:Hg});break a}za=Id(gf,Te,{suffix:"end"},{offset:Hg})}else za=Na(za)}return za?{[ha||P]:za}:void 0}function hk({model:P,defaultPos:za,channel:H,
scaleName:ha,scale:Ca}){const {markDef:db,config:Ab}=P;return()=>{const Pb=ra(H);var nc=xa(H);nc=Uf(H,db,Ab,{vgChannel:nc});if(void 0!==nc)return Se(H,nc);switch(za){case "zeroOrMin":case "zeroOrMax":if(ha&&(nc=Ca.get("type"),!A([le.LOG,le.TIME,le.UTC],nc)&&Ca.domainDefinitelyIncludesZero()))return{scale:ha,value:0};if("zeroOrMin"===za)return"y"===Pb?{field:{group:"height"}}:{value:0};switch(Pb){case "radius":return{signal:"min(".concat(P.width.signal,",").concat(P.height.signal,")/2")};case "theta":return{signal:"2*PI"};
case "x":return{field:{group:"width"}};case "y":return{value:0}}break;case "mid":return{...P[bb(H)],mult:.5}}}}function eh(P,za,H,ha="middle"){if("radius"===P||"theta"===P)return xa(P);var Ca="x"===P?"align":"baseline";za=Uf(Ca,za,H);hd(za)?(Zc("The ".concat(Ca," for range marks cannot be an expression")),Ca=void 0):Ca=za;return"x"===P?Do[Ca||("top"===ha?"left":"center")]:Eo[Ca||ha]}function ai(P,za,{defaultPos:H,defaultPos2:ha,range:Ca}){return Ca?Oj(P,za,{defaultPos:H,defaultPos2:ha}):Vh(P,za,{defaultPos:H})}
function Oj(P,za,{defaultPos:H,defaultPos2:ha}){const {markDef:Ca,config:db}=za,Ab=Ia(P);var Pb=bb(P);{const {encoding:ad,mark:ld,markDef:Pd,stack:Oe,config:Ae}=za;var nc=ra(Ab);const gf=bb(Ab),bf=xa(Ab);var Kc=ad[nc];const Te=za.scaleName(nc),xf=za.getScaleComponent(nc);nc=Ab in ad||Ab in Pd?Oi(Ab,za.markDef):Oi(nc,za.markDef);Kc||"x2"!==Ab&&"y2"!==Ab||!ad.latitude&&!ad.longitude?(Kc=Ok({channel:Ab,channelDef:Kc,channel2Def:ad[Ab],markDef:Pd,config:Ae,scaleName:Te,scale:xf,stack:Oe,offset:nc,defaultRef:void 0}),
ha=void 0!==Kc?{[bf]:Kc}:oj(Ab,Pd)||oj(Ab,{[Ab]:tg(Ab,Pd,Ae.style),[gf]:tg(gf,Pd,Ae.style)})||oj(Ab,Ae[ld])||oj(Ab,Ae.mark)||{[bf]:hk({model:za,defaultPos:ha,channel:Ab,scaleName:Te,scale:xf})()}):ha={[bf]:{field:za.getName(Ab)}}}Pb=ha[Pb]?eh(P,Ca,db):xa(P);return{...Vh(P,za,{defaultPos:H,vgChannel:Pb}),...ha}}function Ok({channel:P,channelDef:za,channel2Def:H,markDef:ha,config:Ca,scaleName:db,scale:Ab,stack:Pb,offset:nc,defaultRef:Kc}){return cc(za)&&Pb&&P.charAt(0)===Pb.fieldChannel.charAt(0)?Id(za,
db,{suffix:"start"},{offset:nc}):Na({channel:P,channelDef:H,scaleName:db,scale:Ab,stack:Pb,markDef:ha,config:Ca,offset:nc,defaultRef:Kc})}function oj(P,za){const H=bb(P),ha=xa(P);if(void 0!==za[ha])return{[ha]:Se(P,za[ha])};if(void 0!==za[P])return{[ha]:Se(P,za[P])};if(za[H])return{[H]:Se(P,za[H])}}function Th(P,za,H){var ha,Ca;const {config:db,encoding:Ab,markDef:Pb,stack:nc}=P;var Kc=Ia(za),ad=bb(za),ld=Ab[za];Kc=Ab[Kc];var Pd=P.getScaleComponent(za),Oe=Pd?Pd.get("type"):void 0,Ae=P.scaleName(za);
const gf=Pb.orient;ad=null!==(ha=null!==(Ca=Ab[ad])&&void 0!==Ca?Ca:Ab.size)&&void 0!==ha?ha:Uf("size",Pb,db,{vgChannel:ad});ha="bar"===H&&("x"===za?"vertical"===gf:"horizontal"===gf);if(rc(ld)&&(Db(ld.bin)||bc(ld.bin)||ld.timeUnit&&!Kc)&&!ad&&!(Oe in qe)){var bf,Te;H=Ya({channel:za,fieldDef:ld,stack:nc,markDef:Pb,config:db});P=null===(bf=P.component.axes[za])||void 0===bf?void 0:bf[0];P=null!==(Te=null===P||void 0===P?void 0:P.get("translate"))&&void 0!==Te?Te:.5;return Xh({fieldDef:ld,fieldDef2:Kc,
channel:za,markDef:Pb,scaleName:Ae,band:H,axisTranslate:P,spacing:za in Wc?Uf("binSpacing",Pb,db):void 0,reverse:Pd.get("reverse"),config:db})}if((cc(ld)&&Oe in qe||ha)&&!Kc){{var xf;const {markDef:Df,encoding:yf,config:Wg,stack:tj}=P;bf=Df.orient;Pd=P.scaleName(za);Ae=P.getScaleComponent(za);Te=bb(za);Kc=Ia(za);bf="horizontal"===bf&&"y"===za||"vertical"===bf&&"x"===za;ha=Uf(bf?"size":Te,Df,Wg,{vgChannel:Te});var Hg;if(yf.size||void 0!==ha)bf?Hg=wi("size",P,{vgChannel:Te,defaultValue:ha}):Zc('Cannot apply size to non-oriented mark "'.concat(Df.type,
'".'));bf=null!==(xf=cc(ld)?Ya({channel:za,fieldDef:ld,markDef:Df,stack:tj,config:Wg}):void 0)&&void 0!==xf?xf:1;Hg||(Oe=Te,xf=Pd,ha=Ae,Hg=Wg,Ca=bf,ha?(Oe=ha.get("type"),"point"===Oe||"band"===Oe?void 0!==Hg[H].discreteBandSize?H={value:Hg[H].discreteBandSize}:Oe===le.POINT?(H=ha.get("range"),H=ge(H)&&F(H.step)?{value:H.step-2}:{value:18}):H={scale:xf,band:Ca}:H={value:Hg[H].continuousBandSize}):(xf=fb(Hg.view,Oe),H=La(Hg[H].discreteBandSize,xf-2),H=void 0!==H?{value:H}:void 0),Hg={[Te]:H});ha="band"!==
(null===Ae||void 0===Ae?void 0:Ae.get("type"))||!("band"in Hg[Te]);H=eh(za,Df,Wg,ha?"middle":"top");xf=Oi(za,Df);za=Na({channel:za,channelDef:ld,markDef:Df,config:Wg,scaleName:Pd,scale:Ae,stack:tj,offset:xf,defaultRef:hk({model:P,defaultPos:"mid",channel:za,scaleName:Pd,scale:Ae}),band:ha?.5:(1-bf)/2});Te?za={[H]:za,...Hg}:(ld=xa(Kc),P=Hg[Te],P=xf?{...P,offset:xf}:P,za={[H]:za,[ld]:Jg(za)?[za[0],{...za[1],offset:P}]:{...za,offset:P}})}return za}return Oj(za,P,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}
function Xi(P,za,H,ha,Ca){if(P in nl)return 0;P="x"===P||"y2"===P?-za/2:za/2;if(hd(H)||hd(Ca)||hd(ha))return H=og(H),Ca=og(Ca),ha=(ha=og(ha))?"".concat(ha," + "):"",H=H?"(".concat(H," ? -1 : 1) * "):"",P=Ca?"(".concat(Ca," + ").concat(P,")"):P,{signal:ha+H+P};Ca=Ca||0;return ha+(H?-Ca-P:+Ca+P)}function Xh({fieldDef:P,fieldDef2:za,channel:H,band:ha,scaleName:Ca,markDef:db,spacing:Ab=0,axisTranslate:Pb,reverse:nc,config:Kc}){const ad=Ia(H),ld=xa(H),Pd=xa(ad),Oe=Oi(H,db);if(Db(P.bin)||P.timeUnit)return{[Pd]:Zh({channel:H,
fieldDef:P,scaleName:Ca,markDef:db,band:(1-ha)/2,offset:Xi(ad,Ab,nc,Pb,Oe),config:Kc}),[ld]:Zh({channel:H,fieldDef:P,scaleName:Ca,markDef:db,band:1-(1-ha)/2,offset:Xi(H,Ab,nc,Pb,Oe),config:Kc})};if(bc(P.bin)){ha=Id(P,Ca,{},{offset:Xi(ad,Ab,nc,Pb,Oe)});if(rc(za))return{[Pd]:ha,[ld]:Id(za,Ca,{},{offset:Xi(H,Ab,nc,Pb,Oe)})};if(D(P.bin)&&P.bin.step)return{[Pd]:ha,[ld]:{signal:'scale("'.concat(Ca,'", ').concat(Cc(P,{expr:"datum"})," + ").concat(P.bin.step,")"),offset:Xi(H,Ab,nc,Pb,Oe)}}}Zc(ud(ad))}function Zh({channel:P,
fieldDef:za,scaleName:H,markDef:ha,band:Ca,offset:db,config:Ab}){H=Td({scaleName:H,fieldOrDatumDef:za,band:Ca,offset:db});return Xb({fieldDef:za,channel:P,markDef:ha,ref:H,config:Ab})}function cj(P,za){const {fill:H,stroke:ha}="include"===za.color?uk(P):{};za={...ni(P.markDef,za)};var Ca={...Wh(P,"fill",H)},db={...Wh(P,"stroke",ha)},Ab={...wi("opacity",P)},Pb={...wi("fillOpacity",P)},nc={...wi("strokeOpacity",P)},Kc={...wi("strokeWidth",P)},ad={...wi("strokeDash",P)},ld={...Yk(P)},Pd={...Ek(P)},Oe=
{...qj(P,"href")};{const {markDef:gf,config:bf}=P,Te=Uf("aria",gf,bf);if(!1===Te)P={};else{{const {mark:xf,markDef:Hg,config:Df}=P;if(!1===Df.aria)var Ae={};else Ae=Uf("ariaRoleDescription",Hg,Df),Ae=null!=Ae?{ariaRoleDescription:{value:Ae}}:xf in qd?{}:{ariaRoleDescription:{value:xf}}}P={...(Te?{aria:Te}:{}),...Ae,...Ai(P)}}}return{...za,...Ca,...db,...Ab,...Pb,...nc,...Kc,...ad,...ld,...Pd,...Oe,...P}}function Wh(P,za,H){const {config:ha,mark:Ca,markDef:db}=P;return"hide"===Uf("invalid",db,ha)&&
H&&!Ha(Ca)&&(P=Pj(P,{invalid:!0,channels:sl}))?{[za]:[{test:P,value:null},...S(H)]}:H?{[za]:H}:{}}function ni(P,za){return Vc.reduce((H,ha)=>{Fo.has(ha)||void 0===P[ha]||"ignore"===za[ha]||(H[ha]=Ed(P[ha]));return H},{})}function Pj(P,{invalid:za=!1,channels:H}){H=H.reduce((ha,Ca)=>{var db=P.getScaleComponent(Ca);db&&(db=db.get("type"),(Ca=P.vgField(Ca,{expr:"datum"}))&&db in Ce&&(ha[Ca]=!0));return ha},{});H=sf(H);if(0<H.length){const ha=za?"||":"\x26\x26";return H.map(Ca=>Xc(Ca,za)).join(" ".concat(ha,
" "))}}function Kh(P){const {config:za,markDef:H}=P;return Uf("invalid",H,za)&&(P=Ri(P,{channels:Hd}))?{defined:{signal:P}}:{}}function Ri(P,{invalid:za=!1,channels:H}){H=H.reduce((ha,Ca)=>{var db=P.getScaleComponent(Ca);db&&(db=db.get("type"),(Ca=P.vgField(Ca,{expr:"datum"}))&&db in Ce&&(ha[Ca]=!0));return ha},{});H=sf(H);if(0<H.length){const ha=za?"||":"\x26\x26";return H.map(Ca=>Xc(Ca,za)).join(" ".concat(ha," "))}}function oi(P,za){if(void 0!==za)return{[P]:Ed(za)}}function lh(P,za){P=w(P.scaleName(za));
return"domain(".concat(P,")")}function Xj(P){var za;return P.parent&&Fh(P.parent)&&(null!==(za=!P.parent.parent)&&void 0!==za?za:Xj(P.parent.parent))}function Oh(P,za,H){var ha;const Ca=null===(ha=P.fieldDef(za))||void 0===ha?void 0:ha.field;ri(P,db=>{var Ab;const Pb=null!==(Ab=db.project.hasField[Ca])&&void 0!==Ab?Ab:db.project.hasChannel[za];if(Pb&&Rn.has(db)){var nc;Ab=null!==(nc=H.get("selections"))&&void 0!==nc?nc:[];Ab.push(db.name);H.set("selections",Ab,!1);Pb.hasLegend=!0}})}function Mh(P,
za,H,ha,Ca){var db,Ab=za.name,Pb=Ab+"_translate_anchor";Ab+="_translate_delta";var nc=H.channel;const Kc=El.has(za);za=Ca.filter(ld=>ld.name===H.signals[Kc?"data":"visual"])[0];ha=P.getSizeSignalRef(ha).signal;P=P.getScaleComponent(nc);Ca=P.get("type");const ad=Kc&&"x"===nc?"-":"";Pb="".concat(Pb,".extent_").concat(nc);nc="".concat(ad).concat(Ab,".").concat(nc," / ")+(Kc?"".concat(ha):"span(".concat(Pb,")"));Pb="".concat(Kc?"log"===Ca?"panLog":"pow"===Ca?"panPow":"panLinear":"panLinear","(").concat(Pb,
", ").concat(nc)+(Kc&&"pow"===Ca?", ".concat(null!==(db=P.get("exponent"))&&void 0!==db?db:1):"")+")";za.on.push({events:{signal:Ab},update:Kc?Pb:"clampRange(".concat(Pb,", 0, ").concat(ha,")")})}function ui(P,za,H,ha,Ca){var db,Ab=za.name;const Pb=H.channel,nc=El.has(za);za=Ca.filter(ld=>ld.name===H.signals[nc?"data":"visual"])[0];ha=P.getSizeSignalRef(ha).signal;Ca=P.getScaleComponent(Pb);const Kc=Ca.get("type"),ad=nc?lh(P,Pb):za.name;P=Ab+"_zoom_delta";Ab="".concat(Ab).concat("_zoom_anchor",".").concat(Pb);
Ab="".concat(nc?"log"===Kc?"zoomLog":"pow"===Kc?"zoomPow":"zoomLinear":"zoomLinear","(").concat(ad,", ").concat(Ab,", ").concat(P)+(nc&&"pow"===Kc?", ".concat(null!==(db=Ca.get("exponent"))&&void 0!==db?db:1):"")+")";za.on.push({events:{signal:P},update:nc?Ab:"clampRange(".concat(Ab,", 0, ").concat(ha,")")})}function Ti(P,za){for(const H of km)H.has(P)&&za(H)}function Kg(P,za=!0,H=hh){return Jg(P)?(P=P.map(ha=>Kg(ha,za,H)),za?"[".concat(P.join(", "),"]"):P):xd(P)?za?H(uc(P)):H(Oc(P)):za?H(JSON.stringify(P)):
P}function Mj(P,za){ri(P,(H,ha)=>{const Ca=H.name;let db=ha.modifyExpr(P,H);za.push(...ha.signals(P,H));Ti(H,Ab=>{Ab.signals&&(za=Ab.signals(P,H,za));Ab.modifyExpr&&(db=Ab.modifyExpr(P,H,db))});za.push({name:Ca+"_modify",on:[{events:{signal:H.name+"_tuple"},update:"modify(".concat(w(H.name+"_store"),", ").concat(db,")")}]})});return ph(za)}function Bk(P,za){P.component.selection&&sf(P.component.selection).length&&(P=w(P.getName("cell")),za.unshift({name:"facet",value:{},on:[{events:Ki("mousemove",
"scope"),update:"isTuple(facet) ? facet : group(".concat(P,").datum")}]}));return ph(za)}function bk(P,za){let H=!1;ri(P,(ha,Ca)=>{const db=ha.name,Ab=w(db+"_store");if(0===za.filter(Pb=>Pb.name===db).length){const Pb="global"===ha.resolve?"union":ha.resolve,nc="multi"===ha.type?", true)":")";za.push({name:ha.name,update:"".concat("vlSelectionResolve","(").concat(Ab,", ").concat(w(Pb)).concat(nc)})}H=!0;Ca.topLevelSignals&&(za=Ca.topLevelSignals(P,ha,za));Ti(ha,Pb=>{Pb.topLevelSignals&&(za=Pb.topLevelSignals(P,
ha,za))})});H&&0===za.filter(ha=>"unit"===ha.name).length&&za.unshift({name:"unit",value:{},on:[{events:"mousemove",update:"isTuple(group()) ? group() : unit"}]});return ph(za)}function Rj(P,za){const H=[...za];ri(P,ha=>{const Ca={name:ha.name+"_store"};if(ha.init){const db=ha.project.items.map(Pb=>{const {signals:nc,...Kc}=Pb;return Kc}),Ab=ha.init.map(Pb=>Kg(Pb,!1));Ca.values="interval"===ha.type?[{unit:Fi(P,{escape:!1}),fields:db,values:Ab}]:Ab.map(Pb=>({unit:Fi(P,{escape:!1}),fields:db,values:Pb}))}H.filter(db=>
db.name===ha.name+"_store").length||H.push(Ca)});return H}function Ak(P,za){ri(P,(H,ha)=>{za=ha.marks?ha.marks(P,H,za):za;Ti(H,Ca=>{Ca.marks&&(za=Ca.marks(P,H,za))})});return za}function Xg(P,za){for(const H of P.children)pg(H)&&(za=Ak(H,za));return za}function ph(P){return P.map(za=>{za.on&&!za.on.length&&delete za.on;return za})}function xh(P,za,H,ha){const Ca=H.channel,db=H.signals.visual;H=H.signals.data;const Ab=El.has(za),Pb=w(P.scaleName(Ca));var nc=P.getScaleComponent(Ca);nc=nc?nc.get("type"):
void 0;const Kc=Pd=>"scale(".concat(Pb,", ").concat(Pd,")"),ad=P.getSizeSignalRef("x"===Ca?"width":"height").signal,ld="".concat(Ca,"(unit)");P=ki(za,(Pd,Oe)=>[...Pd,{events:Oe.between[0],update:"[".concat(ld,", ").concat(ld,"]")},{events:Oe,update:"[".concat(db,"[0], clamp(").concat(ld,", 0, ").concat(ad,")]")}]);P.push({events:{signal:za.name+"_scale_trigger"},update:nc in Ce?"[".concat(Kc("".concat(H,"[0]")),", ").concat(Kc("".concat(H,"[1]")),"]"):"[0, 0]"});return Ab?[{name:H,on:[]}]:[{name:db,
...(ha?{init:Kg(ha,!0,Kc)}:{value:[]}),on:P},{name:H,...(ha?{init:Kg(ha)}:{}),on:[{events:{signal:db},update:"".concat(db,"[0] \x3d\x3d\x3d ").concat(db,"[1] ? null : invert(").concat(Pb,", ").concat(db,")")}]}]}function ki(P,za){return P.events.reduce((H,ha)=>ha.between?za(H,ha):(Zc("".concat(ha," is not an ordered event stream for interval selections.")),H),[])}function Hh(P,za){const H=za.name;var ha=H+"_tuple_fields";const Ca=za.project.items.map(db=>{const Ab=P.fieldDef(db.channel);return Ab&&
Ab.bin?"[".concat("(item().isVoronoi ? datum.datum : datum)","[").concat(w(P.vgField(db.channel,{})),"], ")+"".concat("(item().isVoronoi ? datum.datum : datum)","[").concat(w(P.vgField(db.channel,{binSuffix:"end"})),"]]"):"".concat("(item().isVoronoi ? datum.datum : datum)","[").concat(w(db.field),"]")}).join(", ");ha="unit: ".concat(Fi(P),", fields: ").concat(ha,", values");za=za.events;return[{name:H+"_tuple",on:za?[{events:za,update:"datum \x26\x26 item().mark.marktype !\x3d\x3d 'group' ? {".concat(ha,
": [").concat(Ca,"]} : null"),force:!0}]:[]}]}function ri(P,za){if(P=P.component.selection)for(const H of Pi(P))if(!0===za(H,jn[H.type]))break}function Fi(P,{escape:za}={escape:!0}){za=za?w(P.name):P.name;for(P=P.parent;P&&!fg(P);)P=P.parent;if(P){const {facet:H}=P;for(const ha of Wj)H[ha]&&(za+=" + '__facet_".concat(ha,"_' + (facet[").concat(w(P.vgField(ha)),"])"))}return za}function dj(P){let za=!1;ri(P,H=>{za=za||H.project.items.some(ha=>"_vgsid_"===ha.field)});return za}function Yg(P){this.type=
P}function xg(P){switch(P.type){case "ArrayExpression":return P.elements;case "BinaryExpression":case "LogicalExpression":return[P.left,P.right];case "CallExpression":return[P.callee].concat(P.arguments);case "ConditionalExpression":return[P.test,P.consequent,P.alternate];case "MemberExpression":return[P.object,P.property];case "ObjectExpression":return P.properties;case "Property":return[P.key,P.value];case "UnaryExpression":return[P.argument];default:return[]}}function vg(P,za){if(!P)throw Error("ASSERT: "+
za);}function ej(P){return 48<=P&&57>=P}function Sj(P){return 0<="0123456789abcdefABCDEF".indexOf(P)}function ei(P){return 0<="01234567".indexOf(P)}function Lh(P){return 10===P||13===P||8232===P||8233===P}function dk(P){return 36===P||95===P||65<=P&&90>=P||97<=P&&122>=P||92===P||128<=P&&kn.test(String.fromCharCode(P))}function kk(P){return 36===P||95===P||65<=P&&90>=P||97<=P&&122>=P||48<=P&&57>=P||92===P||128<=P&&Ho.test(String.fromCharCode(P))}function sj(){for(;of<ak;){const P=Tg.charCodeAt(of);
if(32===P||9===P||11===P||12===P||160===P||5760<=P&&0<=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(P)||Lh(P))++of;else break}}function mi(P){var za=0;var H="u"===P?4:2;for(P=0;P<H;++P)if(of<ak&&Sj(Tg[of])){var ha=Tg[of++];za=16*za+"0123456789abcdef".indexOf(ha.toLowerCase())}else Ag({},"Unexpected token %0","ILLEGAL");return String.fromCharCode(za)}function Cj(){var P=Tg.charCodeAt(of++);var za=String.fromCharCode(P);92===P&&(117!==Tg.charCodeAt(of)&&
Ag({},"Unexpected token %0","ILLEGAL"),++of,(P=mi("u"))&&"\\"!==P&&dk(P.charCodeAt(0))||Ag({},"Unexpected token %0","ILLEGAL"),za=P);for(;of<ak;){P=Tg.charCodeAt(of);if(!kk(P))break;++of;za+=String.fromCharCode(P);92===P&&(za=za.substr(0,za.length-1),117!==Tg.charCodeAt(of)&&Ag({},"Unexpected token %0","ILLEGAL"),++of,(P=mi("u"))&&"\\"!==P&&kk(P.charCodeAt(0))||Ag({},"Unexpected token %0","ILLEGAL"),za+=P)}return za}function Ch(){var P=of,za=Tg.charCodeAt(of),H=Tg[of];switch(za){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++of,
{type:7,value:String.fromCharCode(za),start:P,end:of};default:var ha=Tg.charCodeAt(of+1);if(61===ha)switch(za){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return of+=2,{type:7,value:String.fromCharCode(za)+String.fromCharCode(ha),start:P,end:of};case 33:case 61:return of+=2,61===Tg.charCodeAt(of)&&++of,{type:7,value:Tg.slice(P,of),start:P,end:of}}}za=Tg.substr(of,4);if("\x3e\x3e\x3e\x3d"===za)return of+=4,{type:7,value:za,start:P,end:of};za=za.substr(0,3);if("\x3e\x3e\x3e"===
za||"\x3c\x3c\x3d"===za||"\x3e\x3e\x3d"===za)return of+=3,{type:7,value:za,start:P,end:of};za=za.substr(0,2);if(H===za[1]&&0<="+-\x3c\x3e\x26|".indexOf(H)||"\x3d\x3e"===za)return of+=2,{type:7,value:za,start:P,end:of};if(0<="\x3c\x3e\x3d!+-*%\x26|^/".indexOf(H))return++of,{type:7,value:H,start:P,end:of};Ag({},"Unexpected token %0","ILLEGAL")}function ck(){var P=Tg[of];vg(ej(P.charCodeAt(0))||"."===P,"Numeric literal must start with a decimal digit or a decimal point");var za=of;var H="";if("."!==
P){H=Tg[of++];P=Tg[of];if("0"===H){if("x"===P||"X"===P){++of;for(H="";of<ak&&Sj(Tg[of]);)H+=Tg[of++];0===H.length&&Ag({},"Unexpected token %0","ILLEGAL");dk(Tg.charCodeAt(of))&&Ag({},"Unexpected token %0","ILLEGAL");return{type:6,value:parseInt("0x"+H,16),start:za,end:of}}if(ei(P)){for(H="0"+Tg[of++];of<ak&&ei(Tg[of]);)H+=Tg[of++];(dk(Tg.charCodeAt(of))||ej(Tg.charCodeAt(of)))&&Ag({},"Unexpected token %0","ILLEGAL");return{type:6,value:parseInt(H,8),octal:!0,start:za,end:of}}P&&ej(P.charCodeAt(0))&&
Ag({},"Unexpected token %0","ILLEGAL")}for(;ej(Tg.charCodeAt(of));)H+=Tg[of++];P=Tg[of]}if("."===P){for(H+=Tg[of++];ej(Tg.charCodeAt(of));)H+=Tg[of++];P=Tg[of]}if("e"===P||"E"===P){H+=Tg[of++];P=Tg[of];if("+"===P||"-"===P)H+=Tg[of++];if(ej(Tg.charCodeAt(of)))for(;ej(Tg.charCodeAt(of));)H+=Tg[of++];else Ag({},"Unexpected token %0","ILLEGAL")}dk(Tg.charCodeAt(of))&&Ag({},"Unexpected token %0","ILLEGAL");return{type:6,value:parseFloat(H),start:za,end:of}}function Ik(P,za){let H=P;0<=za.indexOf("u")&&
(H=H.replace(/\\u\{([0-9a-fA-F]+)\}/g,(ha,Ca)=>{if(1114111>=parseInt(Ca,16))return"x";Ag({},"Invalid regular expression")}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(H)}catch(ha){Ag({},"Invalid regular expression")}try{return new RegExp(P,za)}catch(ha){return null}}function Ej(){sj();if(of>=ak)return{type:2,start:of,end:of};var P=Tg.charCodeAt(of);if(dk(P)){P=of;if(92===Tg.charCodeAt(of))var za=Cj();else a:{for(za=of++;of<ak;){var H=Tg.charCodeAt(of);if(92===H){of=za;za=Cj();
break a}if(kk(H))++of;else break}za=Tg.slice(za,of)}return{type:1===za.length?3:Sn.hasOwnProperty(za)?4:"null"===za?5:"true"===za||"false"===za?1:3,value:za,start:P,end:of}}if(40===P||41===P||59===P)return Ch();if(39===P||34===P){var ha="";H=!1;P=Tg[of];vg("'"===P||'"'===P,"String literal must starts with a quote");za=of;for(++of;of<ak;){var Ca=Tg[of++];if(Ca===P){P="";break}else if("\\"===Ca)if((Ca=Tg[of++])&&Lh(Ca.charCodeAt(0)))"\r"===Ca&&"\n"===Tg[of]&&++of;else switch(Ca){case "u":case "x":if("{"===
Tg[of]){++of;var db=Tg[of];Ca=0;for("}"===db&&Ag({},"Unexpected token %0","ILLEGAL");of<ak;){db=Tg[of++];if(!Sj(db))break;Ca=16*Ca+"0123456789abcdef".indexOf(db.toLowerCase())}(1114111<Ca||"}"!==db)&&Ag({},"Unexpected token %0","ILLEGAL");Ca=65535>=Ca?String.fromCharCode(Ca):String.fromCharCode((Ca-65536>>10)+55296,(Ca-65536&1023)+56320);ha+=Ca}else ha+=mi(Ca);break;case "n":ha+="\n";break;case "r":ha+="\r";break;case "t":ha+="\t";break;case "b":ha+="\b";break;case "f":ha+="\f";break;case "v":ha+=
"\x0B";break;default:ei(Ca)?(db="01234567".indexOf(Ca),0!==db&&(H=!0),of<ak&&ei(Tg[of])&&(H=!0,db=8*db+"01234567".indexOf(Tg[of++]),0<="0123".indexOf(Ca)&&of<ak&&ei(Tg[of])&&(db=8*db+"01234567".indexOf(Tg[of++]))),ha+=String.fromCharCode(db)):ha+=Ca}else if(Lh(Ca.charCodeAt(0)))break;else ha+=Ca}""!==P&&Ag({},"Unexpected token %0","ILLEGAL");return{type:8,value:ha,octal:H,start:za,end:of}}return 46===P?ej(Tg.charCodeAt(of+1))?ck():Ch():ej(P)?ck():Ch()}function Qi(){const P=di;of=P.end;di=Ej();of=
P.end;return P}function qk(){const P=of;di=Ej();of=P}function Ji(P,za,H){const ha=new Yg("||"===P||"\x26\x26"===P?"LogicalExpression":"BinaryExpression");ha.operator=P;ha.left=za;ha.right=H;return ha}function lj(P){const za=new Yg("Identifier");za.name=P;return za}function Yj(P){const za=new Yg("Literal");za.value=P.value;za.raw=Tg.slice(P.start,P.end);P.regex&&("//"===za.raw&&(za.raw="/(?:)/"),za.regex=P.regex);return za}function vj(P,za,H){const ha=new Yg("MemberExpression");ha.computed="["===P;
ha.object=za;ha.property=H;ha.computed||(H.member=!0);return ha}function Tj(P,za,H){const ha=new Yg("Property");ha.key=za;ha.value=H;ha.kind=P;return ha}function Ag(P,za){var H=Array.prototype.slice.call(arguments,2),ha=za.replace(/%(\d)/g,(db,Ab)=>{vg(Ab<H.length,"Message reference must be in range");return H[Ab]});var Ca=Error(ha);Ca.index=of;Ca.description=ha;throw Ca;}function ti(P){2===P.type&&Ag(P,"Unexpected end of input");6===P.type&&Ag(P,"Unexpected number");8===P.type&&Ag(P,"Unexpected string");
3===P.type&&Ag(P,"Unexpected identifier");4===P.type&&Ag(P,"Unexpected reserved word");Ag(P,"Unexpected token %0",P.value)}function $h(P){const za=Qi();7===za.type&&za.value===P||ti(za)}function Eh(P){return 7===di.type&&di.value===P}function Ck(){of=di.start;const P=Qi();return 8===P.type||6===P.type?(P.octal&&Ag(P,"Octal literals are not allowed in strict mode."),Yj(P)):lj(P.value)}function jk(){if(Eh("(")){$h("(");var P=mj();$h(")");return P}if(Eh("[")){P=[];of=di.start;for($h("[");!Eh("]");)Eh(",")?
(Qi(),P.push(null)):(P.push(rg()),Eh("]")||$h(","));Qi();var za=new Yg("ArrayExpression");za.elements=P;return za}if(Eh("{")){P=[];za={};var H=String;of=di.start;for($h("{");!Eh("}");){of=di.start;var ha=di;if(3===ha.type){var Ca=Ck();$h(":");ha=rg();ha=Tj("init",Ca,ha)}else 2===ha.type||7===ha.type?(ti(ha),ha=void 0):(Ca=Ck(),$h(":"),ha=rg(),ha=Tj("init",Ca,ha));Ca="Identifier"===ha.key.type?ha.key.name:H(ha.key.value);Ca="$"+Ca;Object.prototype.hasOwnProperty.call(za,Ca)?Ag({},"Duplicate data property in object literal not allowed in strict mode"):
za[Ca]=!0;P.push(ha);Eh("}")||$h(",")}$h("}");za=new Yg("ObjectExpression");za.properties=P;return za}P=di.type;of=di.start;if(3===P||Io[di.value])za=lj(Qi().value);else if(8===P||6===P)di.octal&&Ag(di,"Octal literals are not allowed in strict mode."),za=Yj(Qi());else{if(4===P)throw Error("Disabled.");if(1===P)P=Qi(),P.value="true"===P.value,za=Yj(P);else if(5===P)P=Qi(),P.value=null,za=Yj(P);else if(Eh("/")||Eh("/\x3d")){var db;di=null;sj();P=of;za=Tg[of];vg("/"===za,"Regular expression literal must start with a slash");
H=Tg[of++];for(Ca=ha=!1;of<ak;)if(za=Tg[of++],H+=za,"\\"===za)za=Tg[of++],Lh(za.charCodeAt(0))&&Ag({},"Invalid regular expression: missing /"),H+=za;else if(Lh(za.charCodeAt(0)))Ag({},"Invalid regular expression: missing /");else if(ha)"]"===za&&(ha=!1);else if("/"===za){Ca=!0;break}else"["===za&&(ha=!0);Ca||Ag({},"Invalid regular expression: missing /");za=H.substr(1,H.length-2);for(db=Ca="";of<ak;){ha=Tg[of];if(!kk(ha.charCodeAt(0)))break;++of;"\\"===ha&&of<ak?Ag({},"Unexpected token %0","ILLEGAL"):
(db+=ha,Ca+=ha)}0<=db.search(/[^gimuy]/g)&&Ag({},"Invalid regular expression",db);ha=db;db=Ik(za,ha);za=Yj({literal:H+Ca,value:db,regex:{pattern:za,flags:ha},start:P,end:of});qk()}else ti(Qi())}return za}function Qj(){var P;for(P=jk();;)if(Eh(".")){$h(".");of=di.start;var za=Qi();3===za.type||4===za.type||1===za.type||5===za.type||ti(za);za=lj(za.value);P=vj(".",P,za)}else if(Eh("(")){za=[];$h("(");if(!Eh(")"))for(;of<ak;){za.push(rg());if(Eh(")"))break;$h(",")}$h(")");const H=new Yg("CallExpression");
H.callee=P;H.arguments=za;P=H}else if(Eh("["))$h("["),za=mj(),$h("]"),P=vj("[",P,za);else break;if(7===di.type&&(Eh("++")||Eh("--")))throw Error("Disabled.");return P}function Li(){if(7!==di.type&&4!==di.type)var P=Qj();else{if(Eh("++")||Eh("--"))throw Error("Disabled.");if(Eh("+")||Eh("-")||Eh("~")||Eh("!")){var za=Qi();P=Li();za=za.value;const H=new Yg("UnaryExpression");H.operator=za;H.argument=P;H.prefix=!0;P=H}else{if(4===di.type&&"delete"===di.value||4===di.type&&"void"===di.value||4===di.type&&
"typeof"===di.value)throw Error("Disabled.");P=Qj()}}return P}function aj(P){let za=0;if(7!==P.type&&4!==P.type)return 0;switch(P.value){case "||":za=1;break;case "\x26\x26":za=2;break;case "|":za=3;break;case "^":za=4;break;case "\x26":za=5;break;case "\x3d\x3d":case "!\x3d":case "\x3d\x3d\x3d":case "!\x3d\x3d":za=6;break;case "\x3c":case "\x3e":case "\x3c\x3d":case "\x3e\x3d":case "instanceof":case "in":za=7;break;case "\x3c\x3c":case "\x3e\x3e":case "\x3e\x3e\x3e":za=8;break;case "+":case "-":za=
9;break;case "*":case "/":case "%":za=11}return za}function rg(){var P=di;var za=Li();var H=di;var ha=aj(H);if(0===ha)var Ca=za;else{H.prec=ha;Qi();P=[P,di];var db=Li();for(Ca=[za,H,db];0<(ha=aj(di));){for(;2<Ca.length&&ha<=Ca[Ca.length-2].prec;)db=Ca.pop(),H=Ca.pop().value,za=Ca.pop(),P.pop(),za=Ji(H,za,db),Ca.push(za);H=Qi();H.prec=ha;Ca.push(H);P.push(di);za=Li();Ca.push(za)}ha=Ca.length-1;za=Ca[ha];for(P.pop();1<ha;)P.pop(),za=Ji(Ca[ha-1].value,Ca[ha-2],za),ha-=2;Ca=za}Eh("?")&&(Qi(),P=rg(),$h(":"),
ha=rg(),za=new Yg("ConditionalExpression"),za.test=Ca,za.consequent=P,za.alternate=ha,Ca=za);return Ca}function mj(){const P=rg();if(Eh(","))throw Error("Disabled.");return P}function Rk(P){Tg=P;of=0;ak=Tg.length;di=null;qk();P=mj();if(2!==di.type)throw Error("Unexpect token after expression.");return P}function wj(P){const za=[];if("Identifier"===P.type)return[P.name];if("Literal"===P.type)return[P.value];"MemberExpression"===P.type&&(za.push(...wj(P.object)),za.push(...wj(P.property)));return za}
function Gi(P){return"MemberExpression"===P.object.type?Gi(P.object):"datum"===P.object.name}function Fj(P){P=Rk(P);const za=new Set;P.visit(H=>{"MemberExpression"===H.type&&Gi(H)&&za.add(wj(H).slice(1).join("."))});return za}function fj(P,za){const H={},ha=P.config.selection;for(const db of sf(null!==za&&void 0!==za?za:{})){const Ab=Rf(za[db]),{fields:Pb,encodings:nc,...Kc}=ha[Ab.type];for(const Pd in Kc)if(!("encodings"===Pd&&Ab.fields||"fields"===Pd&&Ab.encodings)&&("mark"===Pd&&(Ab[Pd]={...Kc[Pd],
...Ab[Pd]}),void 0===Ab[Pd]||!0===Ab[Pd])){var Ca;Ab[Pd]=null!==(Ca=Kc[Pd])&&void 0!==Ca?Ca:Ab[Pd]}const ad=W(db),ld=H[ad]={...Ab,name:ad,events:t(Ab.on)?Ki(Ab.on,"scope"):Rf(Ab.on)};Ti(ld,Pd=>{Pd.has(ld)&&Pd.parse&&Pd.parse(P,ld,Ab,za[db])})}return H}function Ph(P,za,H,ha="datum"){const Ca=[];za=fa(za,function(db){var Ab=W(db);db=P.getSelectionComponent(Ab,db);Ab=w(Ab+"_store");if(db.project.timeUnit){const Pb=null!==H&&void 0!==H?H:P.component.data.raw,nc=db.project.timeUnit.clone();Pb.parent?nc.insertAsParentOf(Pb):
Pb.parent=nc}"none"!==db.empty&&Ca.push(Ab);return"vlSelectionTest(".concat(Ab,", ").concat(ha)+("global"===db.resolve?")":", ".concat(w(db.resolve),")"))});return(Ca.length?"!("+Ca.map(db=>"length(data(".concat(db,"))")).join(" || ")+") || ":"")+"(".concat(za,")")}function sh(P,za){const H=za.encoding;let ha=za.field;if(!H&&!ha)ha=P.project.items[0].field,1<P.project.items.length&&Zc('A "field" or "encoding" must be specified when using a selection as a scale domain. '+'Using "field": '.concat(w(ha),
"."));else if(H&&!ha){const Ca=P.project.items.filter(db=>db.channel===H);!Ca.length||1<Ca.length?(ha=P.project.items[0].field,Zc((Ca.length?"Multiple ":"No ")+"matching ".concat(w(H)," encoding found for selection ").concat(w(za.selection),". ")+'Using "field": '.concat(w(ha),"."))):ha=Ca[0].field}return"".concat(P.name,"[").concat(w(ha),"]")}function uh(P,za){ri(P,H=>{const ha=H.name,Ca=P.getName("lookup_".concat(ha));P.component.data.outputNodes[Ca]=H.materialized=new Nj(new Rl(za,P,{selection:ha}),
Ca,Si.Lookup,P.component.data.outputNodeRefCounts)})}function hi(P,za,H){return fa(za,ha=>t(ha)?ha:(null===ha||void 0===ha?0:ha.selection)?Ph(P,ha.selection,H):If(ha))}function ii(P,za){if(P)return Jg(P)&&!ne(P)?P.map(H=>jm(H,za)).join(", "):P}function Gj(P,za,H,ha){var Ca,db,Ab;P.encode=null!==(Ca=P.encode)&&void 0!==Ca?Ca:{};P.encode[za]=null!==(db=P.encode[za])&&void 0!==db?db:{};P.encode[za].update=null!==(Ab=P.encode[za].update)&&void 0!==Ab?Ab:{};P.encode[za].update[H]=ha}function Ih(P,za,H,
ha={header:!1}){const {disable:Ca,orient:db,scale:Ab,labelExpr:Pb,title:nc,zindex:Kc,...ad}=P.combine();if(!Ca){for(const gf in ad){var ld=ij[gf],Pd=ad[gf];if(ld&&ld!==za&&"both"!==ld)delete ad[gf];else if(Qa(Pd)){const {condition:bf,...Te}=Pd;Pd=S(bf);if(ld=Uh[gf]){const {vgProp:xf,part:Hg}=ld;Pd=[...Pd.map(Df=>{const {test:yf,...Wg}=Df;return{test:hi(null,yf),...Wg}}),Te];Gj(ad,Hg,xf,Pd);delete ad[gf]}else null===ld&&(Pd={signal:Pd.map(xf=>{const {test:Hg,...Df}=xf;return"".concat(hi(null,Hg)," ? ").concat(kf(Df),
" : ")}).join("")+kf(Te)},ad[gf]=Pd)}else if(hd(Pd)&&(ld=Uh[gf])){const {vgProp:bf,part:Te}=ld;Gj(ad,Te,bf,Pd);delete ad[gf]}}if("grid"===za){if(ad.grid)return ad.encode&&({grid:H}=ad.encode,ad.encode={...(H?{grid:H}:{})},E(ad.encode)&&delete ad.encode),{scale:Ab,orient:db,...ad,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:La(Kc,0)}}else if(ha.header||!P.mainExtracted){if(void 0!==Pb){var Oe,Ae;za=Pb;(null===(Oe=ad.encode)||void 0===Oe?0:null===(Ae=Oe.labels)||void 0===Ae?0:
Ae.update)&&hd(ad.encode.labels.update.text)&&(za=Sa(Pb,"datum.label",ad.encode.labels.update.text.signal));Gj(ad,"labels","text",{signal:za})}null===ad.labelAlign&&delete ad.labelAlign;if(ad.encode){for(const gf of li)P.hasAxisPart(gf)||delete ad.encode[gf];E(ad.encode)&&delete ad.encode}P=ii(nc,H);return{scale:Ab,orient:db,grid:!1,...(P?{title:P}:{}),...ad,...(!1===H.aria?{aria:!1}:{}),zindex:La(Kc,0)}}}}function nj(P){const {axes:za}=P.component,H=[];for(const ha of Hd)if(za[ha])for(const Ca of za[ha])if(!Ca.get("disable")&&
!Ca.get("gridScale")){const db="x"===ha?"height":"width",Ab=P.getSizeSignalRef(db).signal;db!==Ab&&H.push({name:db,update:Ab})}return H}function hj(P,za){const {x:H=[],y:ha=[]}=P;return[...H.map(Ca=>Ih(Ca,"grid",za)),...ha.map(Ca=>Ih(Ca,"grid",za)),...H.map(Ca=>Ih(Ca,"main",za)),...ha.map(Ca=>Ih(Ca,"main",za))].filter(Ca=>Ca)}function ji(P,za,H,ha){return Object.assign.apply(null,[{},...P.map(Ca=>{if("axisOrient"===Ca){Ca="x"===H?"bottom":"left";const db=za["x"===H?"axisBottom":"axisLeft"]||{},Ab=
za["x"===H?"axisTop":"axisRight"]||{},Pb=new Set([...sf(db),...sf(Ab)]),nc={};for(const Kc of Pb.values())nc[Kc]={signal:"".concat(ha.signal,' \x3d\x3d\x3d "').concat(Ca,'" ? ').concat(og(db[Kc])," : ").concat(og(Ab[Kc]))};return nc}return za[Ca]})])}function ek(P,za,H,ha){var Ca="band"===za?["axisDiscrete","axisBand"]:"point"===za?["axisDiscrete","axisPoint"]:za in Qg?["axisQuantitative"]:"time"===za||"utc"===za?["axisTemporal"]:[];const db="x"===P?"axisX":"axisY";za=hd(H)?"axisOrient":"axis"+Ba(H);
Ca=[...Ca,...Ca.map(Ab=>db+Ab.substr(4))];za=["axis",za,db];return{vlOnlyAxisConfig:ji(Ca,ha,P,H),vgAxisConfig:ji(za,ha,P,H),axisConfigStyle:Uj([...za,...Ca],ha)}}function Uj(P,za){const H=[{}];for(const Ca of P){var ha;if(P=null===(ha=za[Ca])||void 0===ha?void 0:ha.style){P=S(P);for(const db of P)H.push(za.style[db])}}return Object.assign.apply(null,H)}function Jk(P,za,H,ha={}){za=fh(P,H,za);if(void 0!==za)return{configFrom:"style",configValue:za};for(const db of["vlOnlyAxisConfig","vgAxisConfig",
"axisConfigStyle"]){var Ca;if(void 0!==(null===(Ca=ha[db])||void 0===Ca?void 0:Ca[P]))return{configFrom:db,configValue:ha[db][P]}}return{}}function Hj(P,za,H,ha,Ca){const db=null===za||void 0===za?void 0:za.labelAngle;if(void 0!==db)return hd(db)?db:Aa(db);({configValue:za}=Jk("labelAngle",ha,null===za||void 0===za?void 0:za.style,Ca));if(void 0!==za)return Aa(za);if("x"===H&&A(["nominal","ordinal"],P.type)&&(!rc(P)||!P.timeUnit))return 270}function kj(P){return"(((".concat(P.signal," % 360) + 360) % 360)")}
function Fk(P,za,H,ha){if(void 0!==P)return"x"===H?hd(P)?(ha=kj(P),za=hd(za)?"(".concat(za.signal,' \x3d\x3d\x3d "top")'):"top"===za,{signal:"(45 \x3c ".concat(ha," \x26\x26 ").concat(ha," \x3c 135) || (225 \x3c ").concat(ha," \x26\x26 ").concat(ha,' \x3c 315) ? "middle" :')+"(".concat(ha," \x3c\x3d 45 || 315 \x3c\x3d ").concat(ha,") \x3d\x3d\x3d ").concat(za,' ? "bottom" : "top"')}):45<P&&135>P||225<P&&315>P?"middle":hd(za)?(ha=45>=P||315<=P?"\x3d\x3d\x3d":"!\x3d\x3d",{signal:"".concat(za.signal,
" ").concat(ha,' "top" ? "bottom" : "top"')}):(45>=P||315<=P)===("top"===za)?"bottom":"top":hd(P)?(P=kj(P),za=hd(za)?"(".concat(za.signal,' \x3d\x3d\x3d "left")'):"left"===za,ha=ha?'"middle"':"null",{signal:"".concat(P," \x3c\x3d 45 || 315 \x3c\x3d ").concat(P," || (135 \x3c\x3d ").concat(P," \x26\x26 ").concat(P," \x3c\x3d 225) ? ").concat(ha," : (45 \x3c\x3d ").concat(P," \x26\x26 ").concat(P," \x3c\x3d 135) \x3d\x3d\x3d ").concat(za,' ? "top" : "bottom"')}):45>=P||315<=P||135<=P&&225>=P?ha?"middle":
null:hd(za)?(ha=45<=P&&135>=P?"\x3d\x3d\x3d":"!\x3d\x3d",{signal:"".concat(za.signal," ").concat(ha,' "left" ? "top" : "bottom"')}):(45<=P&&135>=P)===("left"===za)?"top":"bottom"}function wh(P,za,H){if(void 0!==P){var ha=(H="x"===H)?0:90,Ca=H?"bottom":"left";return hd(P)?(P=kj(P),za=hd(za)?"(".concat(za.signal,' \x3d\x3d\x3d "').concat(Ca,'")'):za===Ca,{signal:"(".concat(ha?"("+P+" + 90)":P," % 180 \x3d\x3d\x3d 0) ? ").concat(H?null:'"center"'," :")+"(".concat(ha," \x3c ").concat(P," \x26\x26 ").concat(P,
" \x3c ").concat(180+ha,") \x3d\x3d\x3d ").concat(za,' ? "left" : "right"')}):0===(P+ha)%180?H?null:"center":hd(za)?(H=ha<P&&P<180+ha?"\x3d\x3d\x3d":"!\x3d\x3d",za="".concat(za.signal," ").concat(H,' "').concat(Ca,'"'),{signal:"".concat(za,' ? "left" : "right"')}):(ha<P&&P<180+ha)===(za===Ca)?"left":"right"}}function gj({fieldOrDatumDef:P,scaleType:za,size:H,values:ha}){if(!(ha||za in qe)&&"log"!==za){if(rc(P)){var Ca;if(Db(P.bin))return{signal:"ceil(".concat(H.signal,"/10)")};if(P.timeUnit&&A(["month",
"hours","day","quarter"],null===(Ca=me(P.timeUnit))||void 0===Ca?void 0:Ca.unit))return}return{signal:"ceil(".concat(H.signal,"/40)")}}}function ik(P,za){var H="x"===za?"x2":"y2";za=P.fieldDef(za);P=P.fieldDef(H);H=za?za.title:void 0;P=P?P.title:void 0;if(H&&P)return Lb(H,P);if(H)return H;if(P)return P;if(void 0!==H)return H;if(void 0!==P)return P}function Mi(P,za,H){return Cc(P,{prefix:za,suffix:"sort_index",...(null!==H&&void 0!==H?H:{})})}function Kk(P,za){return A(["top","bottom"],za)?"column":
A(["left","right"],za)?"row":"row"===P?"row":"column"}function xj(P,za,H,ha){return La((za||{})[P],("row"===ha?H.headerRow:"column"===ha?H.headerColumn:H.headerFacet)[P],H.header[P])}function Rh(P,za,H,ha){const Ca={};for(const db of P)P=xj(db,za||{},H,ha),void 0!==P&&(Ca[db]=P);return Ca}function Ni(P,za,H="middle"){switch(H){case "start":return{align:"left"};case "end":return{align:"right"}}return(P=wh(za,"row"===P?"left":"top","row"===P?"y":"x"))?{align:P}:{}}function vi(P,za){return(P=Fk(P,"row"===
za?"left":"top","row"===za?"y":"x",!0))?{baseline:P}:{}}function Wf(P,za,H){const {format:ha,formatType:Ca,labelAngle:db,labelAnchor:Ab,labelOrient:Pb,labelExpr:nc}=Rh("format formatType labelAngle labelAnchor labelOrient labelExpr".split(" "),P.header,H,za),Kc=jf({fieldOrDatumDef:P,format:ha,formatType:Ca,expr:"parent",config:H}).signal,ad=Kk(za,Pb);return{text:{signal:nc?Sa(Sa(nc,"datum.label",Kc),"datum.value",Cc(P,{expr:"parent"})):Kc},...("row"===za?{orient:"left"}:{}),style:"guide-label",frame:"group",
...vi(db,ad),...Ni(ad,db,Ab),...Dj(H,P,za,so,en)}}function Dj(P,za,H,ha,Ca){const db={};for(const Ab of ha)Ca[Ab]&&(ha=xj(Ab,null===za||void 0===za?void 0:za.header,P,H),void 0!==ha&&(db[Ca[Ab]]=ha));return db}function Dk(P){return[...Ci(P,"width"),...Ci(P,"height"),...Ci(P,"childWidth"),...Ci(P,"childHeight")]}function Ci(P,za){var H="width"===za?"x":"y",ha=P.component.layoutSize.get(za);if(!ha||"merged"===ha)return[];za=P.getSizeSignalRef(za).signal;if("step"===ha){if(ha=P.getScaleComponent(H)){var Ca=
ha.get("type");const db=ha.get("range");if(Ca in qe&&ge(db))return Ca=P.scaleName(H),fg(P.parent)&&"independent"===P.parent.component.resolve.scale[H]?[{name:Ca+"_step",value:db.step}]:[{name:Ca+"_step",value:db.step},{name:za,update:Hi(Ca,ha,"domain('".concat(Ca,"').length"))}]}throw Error("layout size is step although width/height is not step.");}return"container"==ha?(H=(ha=za.endsWith("width"))?"containerSize()[0]":"containerSize()[1]",P=wa(P.config.view,ha?"width":"height"),P="isFinite(".concat(H,
") ? ").concat(H," : ").concat(P),[{name:za,init:P,on:[{update:P,events:"window:resize"}]}]):[{name:za,value:ha}]}function Hi(P,za,H){const ha=za.get("type"),Ca=za.get("padding"),db=La(za.get("paddingOuter"),Ca);za=za.get("paddingInner");za="band"===ha?void 0!==za?za:Ca:1;return"bandspace(".concat(H,", ").concat(og(za),", ").concat(og(db),") * ").concat(P,"_step")}function wk(P){return"childWidth"===P?"width":"childHeight"===P?"height":P}function Di(P,za){return sf(P).reduce((H,ha)=>({...H,...gk(za,
P[ha],ha,Ca=>Ed(Ca.value))}),{})}function Dh(P,za){const H=za in Wc?"axis":"legend";return"independent"===P.scale[za]?("shared"===P[H][za]&&Zc('Setting the scale to be independent for "'.concat(za,'" means we also have to set the guide (axis or legend) to be independent.')),"independent"):P[H][za]||"shared"}function bi(P){return Yb(P,(za,H)=>Math.max(za,H.value))}function wb(P){return Yb(P,(za,H)=>La(za,H.value))}function Yb(P,za){const H=P&&P.condition;if(H&&(Jg(H)||ed(H)))return S(P.condition).reduce(za,
P.value);if(ed(P))return P.value}function oc(P,za,H){P=za.get("selections");if(null!==P&&void 0!==P&&P.length){var ha=w(H.field);return P.map(Ca=>{const db=w(W(Ca)+"_store");return"(!length(data(".concat(db,")) || (").concat(Ca,"[").concat(ha,"] \x26\x26 indexof(").concat(Ca,"[").concat(ha,"], datum.value) \x3e\x3d 0))")}).join(" || ")}}function tc({channel:P,timeUnit:za,scaleType:H}){if(Wb(P)){if(A(["quarter","month","day"],za))return"symbol";if(H in uf)return"gradient"}return"symbol"}function xc({legendConfig:P,
legendType:za,orient:H,legend:ha}){var Ca,db;if(null!==(Ca=null!==(db=ha.direction)&&void 0!==db?db:P[za?"gradientDirection":"symbolDirection"])&&void 0!==Ca)P=Ca;else a:switch(H){case "top":case "bottom":P="horizontal";break a;case "left":case "right":case "none":case void 0:P=void 0;break a;default:P="gradient"===za?"horizontal":void 0}return P}function qa({legendConfig:P,model:za,direction:H,orient:ha,scaleType:Ca}){const {gradientHorizontalMaxLength:db,gradientHorizontalMinLength:Ab,gradientVerticalMaxLength:Pb,
gradientVerticalMinLength:nc}=P;if(Ca in uf)return"horizontal"===H?"top"===ha||"bottom"===ha?ka(za,"width",Ab,db):Ab:ka(za,"height",nc,Pb)}function ka(P,za,H,ha){P=P.getSizeSignalRef(za).signal;return{signal:"clamp(".concat(P,", ").concat(H,", ").concat(ha,")")}}function Ja(P){var za;if(pg(P)){var {encoding:H}=P,ha={};for(const bf of["color",...Kn]){var Ca=Me(H[bf]);if(Ca&&P.getScaleComponent(bf)&&("shape"!==bf||!rc(Ca)||"geojson"!==Ca.type)){{Ca=void 0;var db=void 0,Ab=void 0;var Pb=void 0;var nc=
P,Kc=bf;let Te=nc.legend(Kc);const {markDef:xf,encoding:Hg,config:Df}=nc;var ad=Df.legend;b:{var ld=nc;var Pd=Kc,Oe=ld.scaleName(Pd);if("trail"===ld.mark){if("color"===Pd){ld={stroke:Oe};break b}if("size"===Pd){ld={strokeWidth:Oe};break b}}ld="color"===Pd?ld.markDef.filled?{fill:Oe}:{stroke:Oe}:{[Pd]:Oe}}ld=new Tn({},ld);Oh(nc,Kc,ld);Pd=void 0!==Te?!Te:ad.disable;ld.set("disable",Pd,void 0!==Te);if(Pd)Ca=ld;else{Te=Te||{};Oe=nc.getScaleComponent(Kc).get("type");Pd=Me(Hg[Kc]);var Ae=rc(Pd)?null===
(Pb=me(Pd.timeUnit))||void 0===Pb?void 0:Pb.unit:void 0,gf=Te.orient||Df.legend.orient||"right";Pb={legend:Te,channel:Kc,timeUnit:Ae,scaleType:Oe};({legend:Ae}=Pb);Pb=La(Ae.type,tc(Pb));Ae=xc({legend:Te,legendType:Pb,orient:gf,legendConfig:ad});ad={legend:Te,channel:Kc,model:nc,markDef:xf,encoding:Hg,fieldOrDatumDef:Pd,legendConfig:ad,config:Df,scaleType:Oe,orient:gf,legendType:Pb,direction:Ae};for(const yf of ym)if(!("gradient"===Pb&&yf.startsWith("symbol")||"symbol"===Pb&&yf.startsWith("gradient"))&&
(Oe=yf in nn?nn[yf](ad):Te[yf],void 0!==Oe)){b:{gf=nc.fieldDef(Kc);switch(yf){case "disable":gf=void 0!==Te;break b;case "values":gf=!(null===Te||void 0===Te||!Te.values);break b;case "title":if("title"===yf&&Oe===(null===gf||void 0===gf?void 0:gf.title)){gf=!0;break b}}gf=Oe===(Te||{})[yf]}(gf||void 0===Df.legend[yf])&&ld.set(yf,Oe,gf)}ad=null!==(Ab=null===(db=Te)||void 0===db?void 0:db.encoding)&&void 0!==Ab?Ab:{};db=ld.get("selections");Ab={};Kc={fieldOrDatumDef:Pd,model:nc,channel:Kc,legendCmpt:ld,
legendType:Pb};for(const yf of"labels legend title symbols gradient entries".split(" "))Pb=Di(null!==(za=ad[yf])&&void 0!==za?za:{},nc),Pb=yf in Un?Un[yf](Pb,Kc):Pb,void 0===Pb||E(Pb)||(Ab[yf]={...((null===db||void 0===db?0:db.length)&&rc(Pd)?{name:"".concat(W(Pd.field),"_legend_").concat(yf)}:{}),...((null===db||void 0===db?0:db.length)?{interactive:!!db}:{}),update:Pb});E(Ab)||ld.set("encode",Ab,!(null===(Ca=Te)||void 0===Ca||!Ca.encoding));Ca=ld}}ha[bf]=Ca}}za=ha}else{const {legends:bf,resolve:Te}=
P.component;for(H of P.children){Ja(H);for(ha of sf(H.component.legends))Te.legend[ha]=Dh(P.component.resolve,ha),"shared"===Te.legend[ha]&&(bf[ha]=G(bf[ha],H.component.legends[ha]),bf[ha]||(Te.legend[ha]="independent",delete bf[ha]))}for(Ca of sf(bf))for(nc of P.children)nc.component.legends[Ca]&&"shared"===Te.legend[Ca]&&delete nc.component.legends[Ca];za=bf}return P.component.legends=za}function G(P,za){if(!P)return za.clone();var H=P.getWithExplicit("orient");const ha=za.getWithExplicit("orient");
if(!H.explicit||!ha.explicit||H.value===ha.value){var Ca=!1;for(const Kc of ym)H=nh(P.getWithExplicit(Kc),za.getWithExplicit(Kc),Kc,"legend",(ad,ld)=>{switch(Kc){case "symbolType":return ad="circle"===ld.value?ld:ad,ad;case "title":return Vb(ad,ld);case "type":return Ca=!0,Dg("symbol")}return Nf(ad,ld,Kc,"legend")}),P.setWithExplicit(Kc,H);if(Ca){var db,Ab,Pb,nc;(null===(db=P.implicit)||void 0===db?0:null===(Ab=db.encode)||void 0===Ab?0:Ab.gradient)&&ja(P.implicit,["encode","gradient"]);(null===(Pb=
P.explicit)||void 0===Pb?0:null===(nc=Pb.encode)||void 0===nc?0:nc.gradient)&&ja(P.explicit,["encode","gradient"])}return P}}function ca(P){const za=P.component.legends,H={};for(const Ca of sf(za)){var ha=P.getScaleComponent(Ca);ha=kh(ha.get("domains"));if(H[ha])for(const db of H[ha])G(db,za[Ca])||H[ha].push(za[Ca]);else H[ha]=[za[Ca].clone()]}return Pi(H).flat().map(Ca=>{{var db=P.config,Ab;const {disable:Oe,labelExpr:Ae,selections:gf,...bf}=Ca.combine();if(Oe)var Pb=void 0;else{!1===db.aria&&void 0==
bf.aria&&(bf.aria=!1);if(null===(Ab=bf.encode)||void 0===Ab?0:Ab.symbols){Ca=bf.encode.symbols.update;!Ca.fill||"transparent"===Ca.fill.value||Ca.stroke||bf.stroke||(Ca.stroke={value:"transparent"});for(var nc of Kn)bf[nc]&&delete Ca[nc]}bf.title||delete bf.title;if(void 0!==Ae){var Kc,ad;nc=Ae;(null===(Kc=bf.encode)||void 0===Kc?0:null===(ad=Kc.labels)||void 0===ad?0:ad.update)&&hd(bf.encode.labels.update.text)&&(nc=Sa(Ae,"datum.label",bf.encode.labels.update.text.signal));Kc=bf;ad={signal:nc};var ld,
Pd;Kc.encode=null!==(Pb=Kc.encode)&&void 0!==Pb?Pb:{};Kc.encode.labels=null!==(ld=Kc.encode.labels)&&void 0!==ld?ld:{};Kc.encode.labels.update=null!==(Pd=Kc.encode.labels.update)&&void 0!==Pd?Pd:{};Kc.encode.labels.update.text=ad}Pb=bf}}return Pb}).filter(Ca=>void 0!==Ca)}function ya(P){return P.children.reduce((za,H)=>za.concat(H.assembleProjections()),Ka(P))}function Ka(P){var za=P.component.projection;if(!za||za.merged)return[];const H=za.combine(),{name:ha}=H;if(za.data){const Ca={signal:"[".concat(za.size.map(db=>
db.signal).join(", "),"]")};za=za.data.reduce((db,Ab)=>{Ab=hd(Ab)?Ab.signal:"data('".concat(P.lookupDataSource(Ab),"')");A(db,Ab)||db.push(Ab);return db},[]);if(0>=za.length)throw Error("Projection's fit didn't find any data sources");return[{name:ha,size:Ca,fit:{signal:1<za.length?"[".concat(za.join(", "),"]"):za[0]},...H}]}return[{name:ha,translate:{signal:"[width / 2, height / 2]"},...H}]}function ab(P){var za=P.component;if(pg(P))if(P.hasProjection){var H;const db=P.specifiedProjection;var ha=
!(db&&(null!=db.scale||null!=db.translate));const Ab=ha?[P.getSizeSignalRef("width"),P.getSizeSignalRef("height")]:void 0;if(ha){ha=[];const {encoding:Pb}=P;for(Ca of[["longitude","latitude"],["longitude2","latitude2"]])(Me(Pb[Ca[0]])||Me(Pb[Ca[1]]))&&ha.push({signal:P.getName("geojson_".concat(ha.length))});P.channelHasField("shape")&&"geojson"===P.typedFieldDef("shape").type&&ha.push({signal:P.getName("geojson_".concat(ha.length))});0===ha.length&&ha.push(P.requestDataName(Si.Main));var Ca=ha}else Ca=
void 0;P=new on(P.projectionName(!0),{...(null!==(H=P.config.projection)&&void 0!==H?H:{}),...(null!==db&&void 0!==db?db:{})},Ab,Ca)}else P=void 0;else P=rb(P);za.projection=P}function ob(P,za){const H=T(Ko,ha=>!$g.call(P.explicit,ha)&&!$g.call(za.explicit,ha)||$g.call(P.explicit,ha)&&$g.call(za.explicit,ha)&&kh(P.get(ha))===kh(za.get(ha))?!0:!1);if(kh(P.size)===kh(za.size)){if(H)return P;if(kh(P.explicit)===kh({}))return za;if(kh(za.explicit)===kh({}))return P}return null}function rb(P){if(0!==P.children.length){var za;
for(var H of P.children)ab(H);H=T(P.children,ha=>{if(ha=ha.component.projection){if(za)return(ha=ob(za,ha))&&(za=ha),!!ha;za=ha}return!0});if(za&&H){H=P.projectionName(!0);const ha=new on(H,za.specifiedProjection,za.size,Rf(za.data));for(const Ca of P.children)if(P=Ca.component.projection)P.isFit&&ha.data.push(...Ca.component.projection.data),Ca.renameProjection(P.get("name"),H),P.merged=!0;return ha}}}function Fb(P,za){return"".concat(Eb(P),"_").concat(za)}function qb(P,za,H){var ha;H=null!==(ha=
vb(H,void 0))&&void 0!==ha?ha:{};za=Fb(H,za);return P.getName("".concat(za,"_bins"))}function Ub(P,za,H){let ha;ha="as"in P?t(P.as)?[P.as,"".concat(P.as,"_end")]:[P.as[0],P.as[1]]:[Cc(P,{forAs:!0}),Cc(P,{binSuffix:"end",forAs:!0})];za={...vb(za,void 0)};const Ca=Fb(za,P.field);var db={signal:H.getName("".concat(Ca,"_bins")),extentSignal:H.getName("".concat(Ca,"_extent"))};const {signal:Ab,extentSignal:Pb}=db;if(jc(za.extent)){var nc=za.extent;db=nc.selection;nc=sh(H.getSelectionComponent(W(db),db),
nc);delete za.extent}return{key:Ca,binComponent:{bin:za,field:P.field,as:[ha],...(Ab?{signal:Ab}:{}),...(Pb?{extentSignal:Pb}:{}),...(nc?{span:nc}:{})}}}function Zb(P){return"'"===P[0]&&"'"===P[P.length-1]||'"'===P[0]&&'"'===P[P.length-1]?P.slice(1,-1):P}function Ec(P,za){P=Ga(P);if("number"===za)return"toNumber(".concat(P,")");if("boolean"===za)return"toBoolean(".concat(P,")");if("string"===za)return"toString(".concat(P,")");if("date"===za)return"toDate(".concat(P,")");if("flatten"===za)return P;
if(0===za.indexOf("date:"))return za=Zb(za.slice(5,za.length)),"timeParse(".concat(P,",'").concat(za,"')");if(0===za.indexOf("utc:"))return za=Zb(za.slice(4,za.length)),"utcParse(".concat(P,",'").concat(za,"')");Zc('Unrecognized parse "'.concat(za,'".'));return null}function n(P){const za={};I(P.filter,H=>{if(af(H)){let Ca=null;if(cd(H))Ca=Qe(H.equal);else if(Je(H))Ca=Qe(H.lte);else if(Ie(H))Ca=Qe(H.lt);else if(Ad(H))Ca=Qe(H.gt);else if($e(H))Ca=Qe(H.gte);else if(qf(H))Ca=H.range[0];else if(Ye(H)){var ha;
Ca=(null!==(ha=H.oneOf)&&void 0!==ha?ha:H["in"])[0]}Ca&&(xd(Ca)?za[H.field]="date":F(Ca)?za[H.field]="number":t(Ca)&&(za[H.field]="string"));H.timeUnit&&(za[H.field]="date")}});return za}function Q(P){function za(ha){if(ac(ha))H[ha.field]="date";else{var Ca;if(Ca="quantitative"===ha.type)Ca=ha.aggregate,Ca=t(Ca)&&A(["min","max"],Ca);Ca?H[ha.field]="number":1<Va(ha.field)?ha.field in H||(H[ha.field]="flatten"):jb(ha)&&he(ha.sort)&&1<Va(ha.sort.field)&&(ha.sort.field in H||(H[ha.sort.field]="flatten"))}}
const H={};(pg(P)||fg(P))&&P.forEachFieldDef((ha,Ca)=>{vc(ha)?za(ha):(Ca=ra(Ca),Ca=P.fieldDef(Ca),za({...ha,type:Ca.type}))});if(pg(P)){const {mark:ha,markDef:Ca,encoding:db}=P;if(Ha(ha)&&!P.encoding.order){const Ab=db["horizontal"===Ca.orient?"y":"x"];!rc(Ab)||"quantitative"!==Ab.type||Ab.field in H||(H[Ab.field]="number")}}return H}function ta(P){return P instanceof Tl||P instanceof Om||P instanceof zm}function pa(P){return P.stack.stackBy.reduce((za,H)=>{(H=Cc(H.fieldDef))&&za.push(H);return za},
[])}function Oa(P){return Jg(P)&&P.every(za=>t(za))&&1<P.length}function hb(P){function za(H){if(!(H instanceof lm)){const ha=H.clone();if(ha instanceof Nj){const Ca="scale_"+ha.getSource();ha.setSource(Ca);P.model.component.data.outputNodes[Ca]=ha}else(ha instanceof jl||ha instanceof Hl||ha instanceof Am||ha instanceof Gl)&&ha.addDimensions(P.fields);for(const Ca of H.children.flatMap(za))Ca.parent=ha;return[ha]}return H.children.flatMap(za)}return za}function yb(P){if(P instanceof lm)if(1!==P.numChildren()||
P.children[0]instanceof Nj){var za=P.model.component.data.main;Kb(za);const H=hb(P);P=P.children.map(H).flat();for(const ha of P)ha.parent=za}else za=P.children[0],(za instanceof jl||za instanceof Hl||za instanceof Am||za instanceof Gl)&&za.addDimensions(P.fields),za.swapWithParent(),yb(P);else P.children.map(yb)}function Kb(P){if(P instanceof Nj&&P.type===Si.Main&&1===P.numChildren()){const za=P.children[0];za instanceof lm||(za.swapWithParent(),Kb(P))}}function ic(P){for(const za of P){for(const H of za.children)if(H.parent!==
za)return!1;if(!ic(za.children))return!1}return!0}function Bc(P,za){let H=!1;for(const ha of za)H=P.optimize(ha)||H;return H}function Lc(P,za,H){let ha=P.sources,Ca=!1;Ca=Bc(new Mo,ha)||Ca;Ca=Bc(new Lo(za),ha)||Ca;ha=ha.filter(db=>0<db.numChildren());Ca=Bc(new Wn,ha)||Ca;ha=ha.filter(db=>0<db.numChildren());H||(Ca=Bc(new No,ha)||Ca,Ca=Bc(new Xn(za),ha)||Ca,Ca=Bc(new qn,ha)||Ca,Ca=Bc(new Qm,ha)||Ca,Ca=Bc(new Po,ha)||Ca,Ca=Bc(new Oo,ha)||Ca,Ca=Bc(new Vn,ha)||Ca,Ca=Bc(new Qo,ha)||Ca);P.sources=ha;return Ca}
function gd(P){const za=P.component.scales;for(const Kc of sf(za)){var H=P,ha=Kc,Ca=H.getScaleComponent(ha).get("type"),{encoding:db}=H;var Ab=H.scaleDomain(ha);var Pb=H.typedFieldDef(ha),nc=H.config.scale;if("unaggregated"===Ab){const {valid:ad,reason:ld}=ff(Pb,Ca);ad||(Zc(ld),Ab=void 0)}else void 0===Ab&&nc.useUnaggregatedDomain&&({valid:Pb}=ff(Pb,Ca),Pb&&(Ab="unaggregated"));Ab!==H.scaleDomain(ha)&&(H.specifiedScales[ha]={...H.specifiedScales[ha],domain:Ab});H="x"===ha&&Me(db.x2)?Me(db.x)?nh(cf(Ca,
Ab,H,"x"),cf(Ca,Ab,H,"x2"),"domain","scale",Ff):cf(Ca,Ab,H,"x2"):"y"===ha&&Me(db.y2)?Me(db.y)?nh(cf(Ca,Ab,H,"y"),cf(Ca,Ab,H,"y2"),"domain","scale",Ff):cf(Ca,Ab,H,"y2"):cf(Ca,Ab,H,ha);za[Kc].setWithExplicit("domains",H);db=void 0;ha=P.component.scales[Kc];Ab=P.specifiedScales[Kc].domain;Ca=null===(db=P.fieldDef(Kc))||void 0===db?void 0:db.bin;db=bg(Ab)&&Ab;Ca=D(Ca)&&jc(Ca.extent)&&Ca.extent;(db||Ca)&&ha.set("selectionExtent",null!==db&&void 0!==db?db:Ca,!0);if(P.component.data.isFaceted){for(ha=P;!fg(ha)&&
ha.parent;)ha=ha.parent;if("shared"===ha.component.resolve.scale[Kc])for(const ad of H.value)$d(ad)&&(ad.data="scale_"+ad.data.replace("scale_",""))}}}function Dd(P){for(var za of P.children){var H=za;pg(H)?gd(H):Dd(H)}H=P.component.scales;for(const Ca of sf(H)){let db;za=null;for(const Ab of P.children){var ha=Ab.component.scales[Ca];ha&&(db=void 0===db?ha.getWithExplicit("domains"):nh(db,ha.getWithExplicit("domains"),"domains","scale",Ff),ha=ha.get("selectionExtent"),za&&ha&&za.selection!==ha.selection&&
Zc("The same selection must be used to override scale domains in a layered view."),za=ha)}H[Ca].setWithExplicit("domains",db);za&&H[Ca].set("selectionExtent",za,!0)}}function Jd(P,za,H){return P.map(ha=>{ha=yc(ha,{timeUnit:H,type:za});return{signal:"{data: ".concat(ha,"}")}})}function se(P,za,H){var ha;H=null===(ha=me(H))||void 0===ha?void 0:ha.unit;return"temporal"===za||H?Jd(P,za,H):[P]}function cf(P,za,H,ha){var {encoding:Ca}=H;Ca=Me(Ca[ha]);const {type:db}=Ca,Ab=Ca.timeUnit;if(za&&za.unionWith)return ha=
cf(P,void 0,H,ha),za=se(za.unionWith,db,Ab),Sh([...ha.value,...za]);if(hd(za))return Sh([za]);if(za&&"unaggregated"!==za&&!bg(za))return Sh(se(za,db,Ab));var Pb=H.stack;if(Pb&&ha===Pb.fieldChannel){if("normalize"===Pb.offset)return Dg([[0,1]]);za=H.requestDataName(Si.Main);return Dg([{data:za,field:H.vgField(ha,{suffix:"start"})},{data:za,field:H.vgField(ha,{suffix:"end"})}])}Pb=el[ha]&&rc(Ca)?Hf(H,ha,P):void 0;if($a(Ca))return ha=se([Ca.datum],db,Ab),Dg(ha);if("unaggregated"===za)return ha=H.requestDataName(Si.Main),
{field:za}=Ca,Dg([{data:ha,field:Cc({field:za,aggregate:"min"})},{data:ha,field:Cc({field:za,aggregate:"max"})}]);if(Db(Ca.bin)){if(P in qe)return"bin-ordinal"===P?Dg([]):Dg([{data:C(Pb)?H.requestDataName(Si.Main):H.requestDataName(Si.Raw),field:H.vgField(ha,md(Ca,ha)?{binSuffix:"range"}:{}),sort:!0!==Pb&&D(Pb)?Pb:{field:H.vgField(ha,{}),op:"min"}}]);({bin:za}=Ca);if(Db(za)){const nc=qb(H,Ca.field,za);return Dg([new yk(()=>{const Kc=H.getSignalName(nc);return"[".concat(Kc,".start, ").concat(Kc,".stop]")})])}return Dg([{data:H.requestDataName(Si.Main),
field:H.vgField(ha,{})}])}return Ca.timeUnit&&A(["time","utc"],P)&&Cb(ha,Ca,pg(H)?H.encoding[Ia(ha)]:void 0,H.stack,H.markDef,H.config)?(za=H.requestDataName(Si.Main),Dg([{data:za,field:H.vgField(ha)},{data:za,field:H.vgField(ha,{suffix:"end"})}])):Pb?Dg([{data:C(Pb)?H.requestDataName(Si.Main):H.requestDataName(Si.Raw),field:H.vgField(ha),sort:Pb}]):Dg([{data:H.requestDataName(Si.Main),field:H.vgField(ha)}])}function lf(P,za){const {op:H,field:ha,order:Ca}=P;return{op:null!==H&&void 0!==H?H:za?"sum":
"min",...(ha?{field:Xa(ha)}:{}),...(Ca?{order:Ca}:{})}}function Hf(P,za,H){if(H in qe){var ha=P.fieldDef(za);H=ha.sort;if(Ue(H))return{op:"min",field:Mi(ha,za),order:"ascending"};({stack:ha}=P);var Ca=ha?[...(ha.groupbyField?[ha.groupbyField]:[]),...ha.stackBy.map(db=>db.fieldDef.field)]:void 0;if(he(H))return P=ha&&!A(Ca,H.field),lf(H,P);if(H&&H.encoding){const {encoding:db,order:Ab}=H;P=P.fieldDef(db);const {aggregate:Pb,field:nc}=P;za=ha&&!A(Ca,nc);if(Ea(Pb)||kb(Pb))return lf({field:Cc(P),order:Ab},
za);if(cb(Pb)||!Pb)return lf({op:Pb,field:nc,order:Ab},za)}else{if("descending"===H)return{op:"min",field:P.vgField(za),order:"descending"};if(A(["ascending",void 0],H))return!0}}}function ff(P,za){const {aggregate:H,type:ha}=P;return H?t(H)&&!Nl[H]?{valid:!1,reason:'Unaggregated domain not applicable for "'.concat(H,'" since it produces values outside the origin domain of the source data.')}:"quantitative"===ha&&"log"===za?{valid:!1,reason:"Unaggregated domain is currently unsupported for log scale (".concat(kh(P),
").")}:{valid:!0}:{valid:!1,reason:"Using unaggregated domain with raw field has no effect (".concat(kh(P),").")}}function Ff(P,za,H,ha){if(P.explicit&&za.explicit){var Ca=P.value,db=za.value;H="Conflicting ".concat(ha.toString(),' property "').concat(H.toString(),'" (').concat(kh(Ca)," and ").concat(kh(db),"). Using the union of the two domains.");Zc(H)}return{explicit:P.explicit,value:[...P.value,...za.value]}}function lg(P){var za=ba(P.map(Ca=>{if($d(Ca)){const {sort:db,...Ab}=Ca;return Ab}return Ca}),
O),H=ba(P.map(Ca=>{if($d(Ca))return Ca=Ca.sort,void 0===Ca||C(Ca)||("op"in Ca&&"count"===Ca.op&&delete Ca.field,"ascending"===Ca.order&&delete Ca.order),Ca}).filter(Ca=>void 0!==Ca),O);if(0!==za.length){if(1===za.length){za=P[0];if($d(za)&&0<H.length){var ha=H[0];1<H.length?(Zc("Domains that should be unioned has conflicting sort properties. Sort will be set to true."),ha=!0):D(ha)&&"field"in ha&&za.field===ha.field&&(ha=ha.order?{order:ha.order}:!0);return{...za,sort:ha}}return za}H=ba(H.map(Ca=>
{if(C(Ca)||!("op"in Ca)||t(Ca.op)&&Ca.op in Uk)return Ca;Zc("Dropping sort property ".concat(kh(Ca),' as unioned domains only support boolean or op "count", "min", and "max".'));return!0}),O);1===H.length?ha=H[0]:1<H.length&&(Zc("Domains that should be unioned has conflicting sort properties. Sort will be set to true."),ha=!0);H=ba(P.map(Ca=>$d(Ca)?Ca.data:null),Ca=>Ca);return 1===H.length&&null!==H[0]?{data:H[0],fields:za.map(Ca=>Ca.field),...(ha?{sort:ha}:{})}:{fields:za,...(ha?{sort:ha}:{})}}}
function ag(P){if($d(P)&&t(P.field))return P.field;var za=Jg(P)?!1:"fields"in P&&!("data"in P);if(za){let H;for(const ha of P.fields)if($d(ha)&&t(ha.field))if(!H)H=ha.field;else if(H!==ha.field)return Zc("Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect."),H;Zc("Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.");
return H}za=Jg(P)?!1:"fields"in P&&"data"in P;if(za)return Zc("Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect."),P=P.fields[0],t(P)?P:void 0}function ig(P,za){za=P.component.scales[za].get("domains").map(H=>{$d(H)&&(H.data=P.lookupDataSource(H.data));return H});return lg(za)}function Mf(P){return Fh(P)||mh(P)?P.children.reduce((za,H)=>za.concat(Mf(H)),cg(P)):cg(P)}function cg(P){return sf(P.component.scales).reduce((za,
H)=>{var ha=P.component.scales[H];if(ha.merged)return za;ha=ha.combine();const {name:Ca,type:db,selectionExtent:Ab,domains:Pb,range:nc,reverse:Kc,...ad}=ha;ha=ha.range;H in Wc?ge(ha)&&(ha={step:{signal:Ca+"_step"}}):D(ha)&&$d(ha)&&(ha={...ha,data:P.lookupDataSource(ha.data)});if(Ab){var ld=Ab.selection;ld=P.getSelectionComponent(ld,W(ld));ld={signal:sh(ld,Ab)}}H=ig(P,H);za.push({name:Ca,type:db,...(H?{domain:H}:{}),...(ld?{domainRaw:ld}:{}),range:ha,...(void 0!==Kc?{reverse:Kc}:{}),...ad});return za},
[])}function Of(P){return"x"===P?"width":"y"===P?"height":void 0}function Fg(P,za){const H=P.fieldDef(za);if(H&&H.bin&&Db(H.bin)){const ha=qb(P,H.field,H.bin);za=Of(za);const Ca=P.getName(za);return new yk(()=>{var db=P.getSignalName(ha);db="(".concat(db,".stop - ").concat(db,".start) / ").concat(db,".step");return"".concat(P.getSignalName(Ca)," / (").concat(db,")")})}}function Rg(P,za){const H=za.specifiedScales[P];var {size:ha}=za,Ca=za.getScaleComponent(P).get("type");for(var db of Yn)if(void 0!==
H[db]){const nc=wg(Ca,db),Kc=Tf(P,db);if(nc)if(Kc)Zc(Kc);else switch(db){case "range":Ca=H.range;if(Jg(Ca)){if(P in Wc)return Sh(Ca.map(ad=>{if("width"===ad||"height"===ad){ad=za.getName(ad);const ld=za.getSignalName.bind(za);return yk.fromName(ld,ad)}return ad}))}else if(D(Ca))return Sh({data:za.requestDataName(Si.Main),field:Ca.field,sort:{op:"min",field:za.vgField(P)}});return Sh(Ca);case "scheme":return Sh(Bg(H[db]))}else Zc(te(Ca,db,P))}if("x"===P||"y"===P)if(db="x"===P?"width":"height",ha=ha[db],
Ac(ha)){if(Ca in qe)return Sh({step:ha.step});Zc(Bb(db))}const {rangeMin:Ab,rangeMax:Pb}=H;P=Eg(P,za);return(void 0!==Ab||void 0!==Pb)&&wg(Ca,"rangeMin")&&Jg(P)&&2===P.length?Sh([null!==Ab&&void 0!==Ab?Ab:P[0],null!==Pb&&void 0!==Pb?Pb:P[1]]):Dg(P)}function Bg(P){return!t(P)&&P.name?{scheme:P.name,...v(P,["name"])}:{scheme:P}}function Eg(P,za){const {size:H,config:ha,mark:Ca,encoding:db}=za;var Ab=za.getSignalName.bind(za),{type:Pb}=Me(db[P]);const nc=za.getScaleComponent(P).get("type"),{domain:Kc,
domainMid:ad}=za.specifiedScales[P];switch(P){case "x":case "y":if(A(["point","band"],nc))if("x"===P&&!H.width){if(Pb=Ib(ha.view,"width"),Ac(Pb))return Pb}else if("y"===P&&!H.height&&(Pb=Ib(ha.view,"height"),Ac(Pb)))return Pb;Pb=Of(P);Pb=za.getName(Pb);return"y"===P&&nc in Ce?[yk.fromName(Ab,Pb),0]:[0,yk.fromName(Ab,Pb)];case "size":return Ab=za.component.scales[P].get("zero"),Ab=ih(Ca,Ab,ha),Pb=Pk(Ca,H,za,ha),nc in gh?rh(Ab,Pb,xi(nc,ha,Kc,P)):[Ab,Pb];case "theta":return[0,2*Math.PI];case "angle":return[0,
360];case "radius":return[0,new yk(()=>{const ld=za.getSignalName("width"),Pd=za.getSignalName("height");return"min(".concat(ld,",").concat(Pd,")/2")})];case "strokeWidth":return[ha.scale.minStrokeWidth,ha.scale.maxStrokeWidth];case "strokeDash":return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case "shape":return"symbol";case "color":case "fill":case "stroke":return"ordinal"===nc?"nominal"===Pb?"category":"ordinal":void 0!==ad?"diverging":"rect"===Ca||"geoshape"===Ca?"heatmap":"ramp";case "opacity":case "fillOpacity":case "strokeOpacity":return[ha.scale.minOpacity,
ha.scale.maxOpacity]}throw Error("Scale range undefined for channel ".concat(P));}function xi(P,za,H,ha){switch(P){case "quantile":return za.scale.quantileCount;case "quantize":return za.scale.quantizeCount;case "threshold":if(void 0!==H&&Jg(H))return H.length+1;Zc("Domain for ".concat(ha," is required for threshold scale."));return 3}}function rh(P,za,H){const ha=()=>{const Ca=og(za),db=og(P),Ab="(".concat(Ca," - ").concat(db,") / (").concat(H," - 1)");return"sequence(".concat(db,", ").concat(Ca,
" + ").concat(Ab,", ").concat(Ab,")")};return hd(za)?new yk(ha):{signal:ha()}}function ih(P,za,H){if(za)return hd(za)?{signal:"".concat(za.signal," ? 0 : ").concat(ih(P,!1,H))}:0;switch(P){case "bar":case "tick":return H.scale.minBandSize;case "line":case "trail":case "rule":return H.scale.minStrokeWidth;case "text":return H.scale.minFontSize;case "point":case "square":case "circle":return H.scale.minSize}throw Error(jd("size",P));}function Pk(P,za,H,ha){H={x:Fg(H,"x"),y:Fg(H,"y")};switch(P){case "bar":case "tick":if(void 0!==
ha.scale.maxBandSize)return ha.scale.maxBandSize;const Ca=Cd(za,H,ha.view);return F(Ca)?Ca-1:new yk(()=>"".concat(Ca.signal," - 1"));case "line":case "trail":case "rule":return ha.scale.maxStrokeWidth;case "text":return ha.scale.maxFontSize;case "point":case "square":case "circle":if(ha.scale.maxSize)return ha.scale.maxSize;const db=Cd(za,H,ha.view);return F(db)?Math.pow(.95*db,2):new yk(()=>"pow(".concat(.95," * ").concat(db.signal,", 2)"))}throw Error(jd("size",P));}function Cd(P,za,H){const ha=
Ac(P.width)?P.width.step:fb(H,"width"),Ca=Ac(P.height)?P.height.step:fb(H,"height");return za.x||za.y?new yk(()=>"min(".concat([za.x?za.x.signal:ha,za.y?za.y.signal:Ca].join(", "),")")):Math.min(ha,Ca)}function Ne(P,za){if(pg(P)){const Ab=P.component.scales,{config:Pb,encoding:nc,markDef:Kc,specifiedScales:ad}=P;for(const ld of sf(Ab)){var H=ad[ld];const Pd=Ab[ld];var ha=P.getScaleComponent(ld),Ca=Me(nc[ld]),db=H[za];const Oe=ha.get("type"),Ae=ha.get("padding");ha=ha.get("paddingInner");const gf=
wg(Oe,za),bf=Tf(ld,za);void 0!==db&&(gf?bf&&Zc(bf):Zc(te(Oe,za,ld)));if(gf&&void 0===bf)if(void 0!==db)switch(db=Ca.timeUnit,Ca=Ca.type,za){case "domainMax":case "domainMin":xd(H[za])||"temporal"===Ca||db?Pd.set(za,{signal:yc(H[za],{type:Ca,timeUnit:db})},!0):Pd.set(za,H[za],!0);break;default:Pd.copyKeyFromObject(za,H)}else H=za in Zn?Zn[za]({model:P,channel:ld,fieldOrDatumDef:Ca,scaleType:Oe,scalePadding:Ae,scalePaddingInner:ha,domain:H.domain,markDef:Kc,config:Pb}):Pb.scale[za],void 0!==H&&Pd.set(za,
H,!1)}}else mf(P,za)}function Ve(P){if(pg(P)){const za=P.component.scales;for(const H of sl){const ha=za[H];if(!ha)continue;const Ca=Rg(H,P);ha.setWithExplicit("range",Ca)}}else mf(P,"range")}function mf(P,za){const H=P.component.scales;for(var ha of P.children)"range"===za?Ve(ha):Ne(ha,za);for(const Ca of sf(H)){let db;for(const Ab of P.children)if(ha=Ab.component.scales[Ca])ha=ha.getWithExplicit(za),db=nh(db,ha,za,"scale",qg((Pb,nc)=>{switch(za){case "range":if(Pb.step&&nc.step)return Pb.step-nc.step}return 0}));
H[Ca].setWithExplicit(za,db)}}function We(P,za){const H=za.bin;if(Db(H)){const ha=qb(P,za.field,H);return new yk(()=>P.getSignalName(ha))}if(bc(H)&&D(H)&&void 0!==H.step)return{step:H.step}}function Zf(P,za,H){var ha;switch(za.type){case "nominal":case "ordinal":if(Wb(P)||"discrete"===Jb(P))return"shape"===P&&"ordinal"===za.type&&Zc(ae(P,"ordinal")),"ordinal";if(P in Wc){if(A(["rect","bar","image","rule"],H))return"band"}else if("arc"===H&&P in Ud)return"band";return void 0!==za.band||Qb(za)&&(null===
(ha=za.axis)||void 0===ha?0:ha.tickBand)?"band":"point";case "temporal":if(!Wb(P)){if("discrete"===Jb(P))return Zc(ae(P,"temporal")),"ordinal";if(rc(za)&&za.timeUnit&&me(za.timeUnit).utc)return"utc"}return"time";case "quantitative":if(Wb(P)){if(rc(za)&&Db(za.bin))return"bin-ordinal"}else if("discrete"===Jb(P))return Zc(ae(P,"quantitative")),"ordinal";return"linear";case "geojson":return}throw Error('Invalid field type "'.concat(za.type,'".'));}function ng(P,{ignoreRange:za}={}){Cf(P);pg(P)?gd(P):
Dd(P);for(const H of Bh)Ne(P,H);za||Ve(P)}function Cf(P){if(pg(P))P.component.scales=Cg(P);else{var za=P.component;const Pb=P.component.scales={},nc={};var H=P.component.resolve;for(const Kc of P.children){Cf(Kc);for(const ad of sf(Kc.component.scales)){var ha,Ca=H.scale;if(null!==(ha=H.scale[ad])&&void 0!==ha)var db=ha;else{db=ad;var Ab=P;if(Fh(Ab)||fg(Ab))db="shared";else if(mh(Ab))db=db in Wc?"independent":"shared";else throw Error("invalid model type for resolve");}Ca[ad]=db;if("shared"===H.scale[ad])if(Ca=
nc[ad],db=Kc.component.scales[ad].getWithExplicit("type"),Ca){Ab=Ze[Ca.value];const ld=Ze[db.value];Ab===ld||"ordinal-position"===Ab&&"time"===ld||"ordinal-position"===ld&&"time"===Ab?nc[ad]=nh(Ca,db,"type","scale",mm):(H.scale[ad]="independent",delete nc[ad])}else nc[ad]=db}}for(const Kc of sf(nc)){ha=P.scaleName(Kc,!0);Pb[Kc]=new Rm(ha,nc[Kc]);for(const ad of P.children)if(H=ad.component.scales[Kc])ad.renameScale(H.get("name"),ha),H.merged=!0}za.scales=Pb}}function Cg(P){const {encoding:za,mark:H}=
P;return sl.reduce((ha,Ca)=>{var db=Me(za[Ca]);if(db&&H===Dn&&"shape"===Ca&&"geojson"===db.type)return ha;let Ab=db&&db.scale;if(db&&null!==Ab&&!1!==Ab){var Pb;Ab=null!==(Pb=Ab)&&void 0!==Pb?Pb:{};var nc=Ab;Pb=Zf(Ca,db,H);({type:nc}=nc);if(el[Ca]){if(void 0!==nc)if(sg(Ca,nc)){var Kc;if(Kc=rc(db))Kc=nc,db=db.type,Kc=!(A(["ordinal","nominal"],db)?void 0===Kc||Kc in qe:"temporal"===db?A([le.TIME,le.UTC,void 0],Kc):"quantitative"===db?A([le.LOG,le.POW,le.SQRT,le.SYMLOG,le.QUANTILE,le.QUANTIZE,le.THRESHOLD,
le.LINEAR,void 0],Kc):1);Kc?(db=Pb,db='FieldDef does not work with "'.concat(nc,'" scale. We are using "').concat(db,'" scale instead.'),Zc(db)):Pb=nc}else db=nc,nc=Pb,db='Channel "'.concat(Ca,'" does not work with "').concat(db,'" scale. We are using "').concat(nc,'" scale instead.'),Zc(db)}else Pb=null;ha[Ca]=new Rm(P.scaleName(Ca+"",!0),{value:Pb,explicit:Ab.type===Pb})}return ha},{})}function pg(P){return"unit"===(null===P||void 0===P?void 0:P.type)}function fg(P){return"facet"===(null===P||void 0===
P?void 0:P.type)}function mh(P){return"concat"===(null===P||void 0===P?void 0:P.type)}function Fh(P){return"layer"===(null===P||void 0===P?void 0:P.type)}function Gh(P){function za(ha,Ca){ha instanceof Tl&&!(ha.isGenerator||"url"in ha.data)&&(P.push(Ca),Ca={name:null,source:Ca.name,transform:[]});if(ha instanceof xk)if(ha.parent instanceof Tl&&!Ca.source){var db;Ca.format={...(null!==(db=Ca.format)&&void 0!==db?db:{}),parse:ha.assembleFormatParse()};Ca.transform.push(...ha.assembleTransforms(!0))}else Ca.transform.push(...ha.assembleTransforms());
if(ha instanceof lm){Ca.name||(Ca.name="data_".concat(H++));!Ca.source||0<Ca.transform.length?(P.push(Ca),ha.data=Ca.name):ha.data=Ca.source;for(const Ab of ha.assemble())P.push(Ab)}else switch((ha instanceof Om||ha instanceof zm||ha instanceof Sm||ha instanceof Rl||ha instanceof xm||ha instanceof Um||ha instanceof Cm||ha instanceof jl||ha instanceof Vm||ha instanceof Am||ha instanceof Gl||ha instanceof Tm||ha instanceof Bm||ha instanceof tn||ha instanceof un||ha instanceof nm||ha instanceof vn||
ha instanceof Sl||ha instanceof wn||ha instanceof Dm)&&Ca.transform.push(ha.assemble()),(ha instanceof Fl||ha instanceof Hk||ha instanceof Vl||ha instanceof Hl)&&Ca.transform.push(...ha.assemble()),ha instanceof Nj&&(Ca.source&&0===Ca.transform.length?ha.setSource(Ca.source):ha.parent instanceof Nj?ha.setSource(Ca.name):(Ca.name||(Ca.name="data_".concat(H++)),ha.setSource(Ca.name),1===ha.numChildren()&&(P.push(Ca),Ca={name:null,source:Ca.name,transform:[]}))),ha.numChildren()){case 0:ha instanceof
Nj&&(!Ca.source||0<Ca.transform.length)&&P.push(Ca);break;case 1:za(ha.children[0],Ca);break;default:Ca.name||(Ca.name="data_".concat(H++));db=Ca.name;!Ca.source||0<Ca.transform.length?P.push(Ca):db=Ca.source;for(const Ab of ha.children)za(Ab,{name:null,source:db,transform:[]})}}let H=0;return za}function th(P){const za=[],H=Gh(za);for(const ha of P.children)H(ha,{source:P.name,name:null,transform:[]});return za}function yi(P,za){const H=[];var ha=Gh(H);let Ca=0;for(const Pb of P.sources){Pb.hasName()||
(Pb.dataName="source_".concat(Ca++));const nc=Pb.assemble();ha(Pb,nc)}for(const Pb of H)0===Pb.transform.length&&delete Pb.transform;ha=0;for(const [Pb,nc]of H.entries()){var db;0!==(null!==(db=nc.transform)&&void 0!==db?db:[]).length||nc.source||H.splice(ha++,0,H.splice(Pb,1)[0])}for(const Pb of H)for(const nc of null!==(Ab=Pb.transform)&&void 0!==Ab?Ab:[]){var Ab;"lookup"===nc.type&&(nc.from=P.outputNodes[nc.from].getSource())}for(const Pb of H)Pb.name in za&&(Pb.values=za[Pb.name]);return H}function Ui(P,
za,H){za="row"===za?"height":"width";return{labels:H,sizeSignal:P.child.component.layoutSize.get(za)?P.child.getSizeSignalRef(za):void 0,axes:[]}}function Lk(P,za){var {child:H}=P;if(H.component.axes[za]){const {layoutHeaders:Ca,resolve:db}=P.component;db.axis[za]=Dh(db,za);if("shared"===db.axis[za]){const Ab="x"===za?"column":"row",Pb=Ca[Ab];for(const nc of H.component.axes[za]){var ha;za=nc.get("orient");za="top"===za||"left"===za||hd(za)?"header":"footer";Pb[za]=null!==(ha=Pb[za])&&void 0!==ha?
ha:[Ui(P,Ab,!1)];(H=Ih(nc,"main",P.config,{header:!0}))&&Pb[za][0].axes.push(H);nc.mainExtracted=!0}}}}function al(P){for(const za of P.children)za.parseLayoutSize()}function hl(P,za){const H=wk(za),ha=zb(H),Ca=P.component.resolve,db=P.component.layoutSize;let Ab;for(const Pb of P.children){const nc=Pb.component.layoutSize.getWithExplicit(H),Kc=Ca.scale[ha];if("independent"===Kc&&"step"===nc.value){Ab=void 0;break}if(Ab){if("independent"===Kc&&Ab.value!==nc.value){Ab=void 0;break}Ab=nh(Ab,nc,H,"")}else Ab=
nc}if(Ab){for(const Pb of P.children)P.renameSignal(Pb.getName(H),P.getName(za)),Pb.component.layoutSize.set(H,"merged",!1);db.setWithExplicit(za,Ab)}else db.setWithExplicit(za,{explicit:!1,value:void 0})}function Ol(P,za){const H=P.config;var ha=P.getScaleComponent("width"===za?"x":"y");if(ha)return P=ha.get("type"),ha=ha.get("range"),P in qe?(za=Ib(H.view,za),ge(ha)||Ac(za)?"step":za):wa(H.view,za);if(P.hasProjection||"arc"===P.mark)return wa(H.view,za);za=Ib(H.view,za);return Ac(za)?za.step:za}
function Sk(P,za,H){return Cc(za,{suffix:"by_".concat(Cc(P)),...(null!==H&&void 0!==H?H:{})})}function ah(P,za){for(const Pb of za){var H,ha,Ca,db;za=Pb.data;if(P.name&&Pb.hasName()&&P.name!==Pb.dataName)continue;const nc=null===(H=P.format)||void 0===H?void 0:H.mesh;var Ab=null===(ha=za.format)||void 0===ha?void 0:ha.feature;if(nc&&Ab)continue;const Kc=null===(Ca=P.format)||void 0===Ca?void 0:Ca.feature;if(!Kc&&!Ab||Kc===Ab)if(Ab=null===(db=za.format)||void 0===db?void 0:db.mesh,!nc&&!Ab||nc===Ab)if("values"in
P&&"values"in za){if(ok(P.values,za.values))return Pb}else if("url"in P&&"url"in za){if(P.url===za.url)return Pb}else if(si(P)&&P.name===Pb.dataName)return Pb}return null}function tl(P,za){if(P.data||!P.parent){if(null===P.data)return P=new Tl({values:[]}),za.push(P),P;const H=ah(P.data,za);if(H)return oh(P.data)||(H.data.format=z({},P.data.format,H.data.format)),!H.hasName()&&P.data.name&&(H.dataName=P.data.name),H;P=new Tl(P.data);za.push(P);return P}return P.parent.component.data.facetRoot?P.parent.component.data.facetRoot:
P.parent.component.data.main}function kl(P){var za,H,ha,Ca=tl(P,P.component.data.sources);const {outputNodes:db,outputNodeRefCounts:Ab}=P.component.data,Pb=P.parent?P.parent.component.data.ancestorParse.clone():new On,nc=P.data;oh(nc)?("sequence"in nc?Ca=new zm(Ca,nc.sequence):"graticule"in nc&&(Ca=new Om(Ca,nc.graticule)),Pb.parseNothing=!0):null===(null===nc||void 0===nc?void 0:null===(za=nc.format)||void 0===za?void 0:za.parse)&&(Pb.parseNothing=!0);Ca=null!==(H=xk.makeExplicit(Ca,P,Pb))&&void 0!==
H?H:Ca;Ca=new Sl(Ca);za=P.parent&&Fh(P.parent);if((pg(P)||fg(P))&&za){var Kc;Ca=null!==(Kc=Fl.makeFromEncoding(Ca,P))&&void 0!==Kc?Kc:Ca}if(0<P.transforms.length){Kc=0;for(const yf of P.transforms){var ad=H=void 0;if("calculate"in yf)ad=Ca=new xm(Ca,yf),H="derived";else if("filter"in yf){var ld;ad=n(yf);ad=Ca=null!==(ld=xk.makeWithAncestors(Ca,{},ad,Pb))&&void 0!==ld?ld:Ca;Ca=new Rl(Ca,P,yf.filter)}else if("bin"in yf)ad=Ca=Fl.makeFromTransform(Ca,yf,P),H="number";else if("timeUnit"in yf)H="date",
void 0===Pb.getWithExplicit(yf.field).value&&(Ca=new xk(Ca,{[yf.field]:H}),Pb.set(yf.field,H,!1)),ad=Ca=Hk.makeFromTransform(Ca,yf);else if("aggregate"in yf)ad=Ca=jl.makeFromTransform(Ca,yf),H="number",dj(P)&&(Ca=new Sl(Ca));else if("lookup"in yf)ad=Ca=Vm.make(Ca,P,yf,Kc++),H="derived";else if("window"in yf)ad=Ca=new Am(Ca,yf),H="number";else if("joinaggregate"in yf)ad=Ca=new Gl(Ca,yf),H="number";else if("stack"in yf)ad=Ca=Hl.makeFromTransform(Ca,yf),H="derived";else if("fold"in yf)ad=Ca=new Tm(Ca,
yf),H="derived";else if("flatten"in yf)ad=Ca=new Bm(Ca,yf),H="derived";else if("pivot"in yf)ad=Ca=new Dm(Ca,yf),H="derived";else if("sample"in yf)Ca=new wn(Ca,yf);else if("impute"in yf)ad=Ca=Vl.makeFromTransform(Ca,yf),H="derived";else if("density"in yf)ad=Ca=new tn(Ca,yf),H="derived";else if("quantile"in yf)ad=Ca=new nm(Ca,yf),H="derived";else if("regression"in yf)ad=Ca=new vn(Ca,yf),H="derived";else if("loess"in yf)ad=Ca=new un(Ca,yf),H="derived";else{Zc("Ignoring an invalid transform: ".concat(kh(yf),
"."));continue}if(ad&&void 0!==H)for(const Wg of null!==(Pd=ad.producedFields())&&void 0!==Pd?Pd:[]){var Pd;Pb.set(Wg,H,!1)}}}ld={};if(pg(P)&&P.component.selection)for(var Oe of sf(P.component.selection)){Pd=P.component.selection[Oe];for(const yf of Pd.project.items)!yf.channel&&1<Va(yf.field)&&(ld[yf.field]="flatten")}Oe=Q(P);Ca=null!==(ha=xk.makeWithAncestors(Ca,{},{...ld,...Oe},Pb))&&void 0!==ha?ha:Ca;pg(P)&&(Ca=Cm.parseAll(Ca,P),Ca=Um.parseAll(Ca,P));if(pg(P)||fg(P)){var Ae;if(!za){var gf;Ca=
null!==(gf=Fl.makeFromEncoding(Ca,P))&&void 0!==gf?gf:Ca}Ca=null!==(Ae=Hk.makeFromEncoding(Ca,P))&&void 0!==Ae?Ae:Ca;Ca=xm.parseAllForSortIndex(Ca,P)}Ae=P.getDataName(Si.Raw);ha=new Nj(Ca,Ae,Si.Raw,Ab);Ca=db[Ae]=ha;if(pg(P)){var bf,Te;if(Ae=jl.makeFromEncoding(Ca,P))Ca=Ae,dj(P)&&(Ca=new Sl(Ca));Ca=null!==(bf=Vl.makeFromEncoding(Ca,P))&&void 0!==bf?bf:Ca;Ca=null!==(Te=Hl.makeFromEncoding(Ca,P))&&void 0!==Te?Te:Ca}if(pg(P)){var xf;Ca=null!==(xf=Sm.make(Ca,P))&&void 0!==xf?xf:Ca}Te=P.getDataName(Si.Main);
bf=new Nj(Ca,Te,Si.Main,Ab);Ca=db[Te]=bf;pg(P)&&uh(P,bf);xf=null;if(fg(P)){var Hg;Te=P.getName("facet");{xf=Ca;const {row:yf,column:Wg}=P.facet;if(yf&&Wg){Ae=null;for(Df of[yf,Wg])if(he(Df.sort)){const {field:tj,op:zk="min"}=Df.sort;xf=Ae=new Gl(xf,{joinaggregate:[{op:zk,field:tj,as:Sk(Df,Df.sort,{forAs:!0})}],groupby:[Cc(Df)]})}var Df=Ae}else Df=null}Ca=null!==(Hg=Df)&&void 0!==Hg?Hg:Ca;xf=new lm(Ca,P,Te,bf.getSource());db[Te]=xf}return{...P.component.data,outputNodes:db,outputNodeRefCounts:Ab,raw:ha,
main:bf,facetRoot:xf,ancestorParse:Pb}}function ll(P){return Hd.reduce((za,H)=>{P.component.scales[H]&&(za[H]=[mk(H,P)]);return za},{})}function ml(P,za){if(P){if(P.length!==za.length)return;const H=P.length;for(let ha=0;ha<H;ha++){const Ca=P[ha],db=za[ha];if(!!Ca!==!!db)return;if(Ca&&db){const Ab=Ca.getWithExplicit("orient"),Pb=db.getWithExplicit("orient");if(Ab.explicit&&Pb.explicit&&Ab.value!==Pb.value)return;P[ha]=pk(Ca,db)}}}else return za.map(H=>H.clone());return P}function pk(P,za){for(const H of yn){const ha=
nh(P.getWithExplicit(H),za.getWithExplicit(H),H,"axis",(Ca,db)=>{switch(H){case "title":return Vb(Ca,db);case "gridScale":return{explicit:Ca.explicit,value:La(Ca.value,db.value)}}return Nf(Ca,db,H,"axis")});P.setWithExplicit(H,ha)}return P}function gl(P,za,H,ha,Ca){if("disable"===za)return void 0!==H;H=H||{};switch(za){case "titleAngle":case "labelAngle":return P===(hd(H.labelAngle)?H.labelAngle:Aa(H.labelAngle));case "values":return!!H.values;case "encode":return!!H.encoding||!!H.labelAngle;case "title":if(P===
ik(ha,Ca))return!0}return P===H[za]}function mk(P,za){var H,ha,Ca,db,Ab;let Pb=za.axis(P);const nc=new ao;var Kc=Me(za.encoding[P]);const {mark:ad,config:ld}=za;var Pd=(null===(H=Pb)||void 0===H?void 0:H.orient)||(null===(ha=ld["x"===P?"axisX":"axisY"])||void 0===ha?void 0:ha.orient)||(null===(Ca=ld.axis)||void 0===Ca?void 0:Ca.orient)||("x"===P?"bottom":"left");ha=za.getScaleComponent(P).get("type");H=ek(P,ha,Pd,za.config);Ca=void 0!==Pb?!Pb:Jk("disable",ld.style,null===(db=Pb)||void 0===db?void 0:
db.style,H).configValue;nc.set("disable",Ca,void 0!==Pb);if(Ca)return nc;Pb=Pb||{};db=Hj(Kc,Pb,P,ld.style,H);Kc={fieldOrDatumDef:Kc,axis:Pb,channel:P,model:za,scaleType:ha,orient:Pd,labelAngle:db,mark:ad,config:ld};for(const Ae of yn)if(Pd=Ae in ln?ln[Ae](Kc):gi[Ae]?Pb[Ae]:void 0,db=void 0!==Pd,ha=gl(Pd,Ae,Pb,za,P),db&&ha)nc.set(Ae,Pd,ha);else{const {configValue:gf,configFrom:bf}=gi[Ae]&&"values"!==Ae?Jk(Ae,ld.style,Pb.style,H):{};Ca=void 0!==gf;db&&!Ca?nc.set(Ae,Pd,ha):("vgAxisConfig"!==bf||bo.has(Ae)&&
Ca||Qa(gf)||hd(gf))&&nc.set(Ae,gf,!1)}const Oe=null!==(Ab=Pb.encoding)&&void 0!==Ab?Ab:{};Ab=li.reduce((Ae,gf)=>{var bf;if(!nc.hasAxisPart(gf))return Ae;var Te=Di(null!==(bf=Oe[gf])&&void 0!==bf?bf:{},za);if("labels"===gf){{var xf;const {encoding:Hg,config:Df}=za;bf=null!==(xf=Me(Hg[P]))&&void 0!==xf?xf:Me(Hg[Ia(P)]);xf=za.axis(P)||{};const {format:yf,formatType:Wg}=xf;Te=Rd(Wg)?{text:Xf({fieldOrDatumDef:bf,field:"datum.value",format:yf,formatType:Wg,config:Df}),...Te}:Te}}void 0===Te||E(Te)||(Ae[gf]=
{update:Te});return Ae},{});E(Ab)||nc.set("encode",Ab,!!Pb.encoding||void 0!==Pb.labelAngle);return nc}function lk({encoding:P,size:za}){for(const H of Hd){const ha=bb(H);Ac(za[ha])&&xb(P[H])&&(delete za[ha],Zc(Bb(ha)))}return za}function Kl(P,za,{graticule:H}){if(H)return!1;za=dg("filled",P,za);P=P.type;return La(za,P!==hm&&P!==Im&&P!==Jm)}function Pl(P,za,H){switch(P){case hm:case um:case cn:case Km:case mo:case Cn:return}const {x:ha,y:Ca,x2:db,y2:Ab}=za;switch(P){case tm:if(rc(ha)&&(bc(ha.bin)||
rc(Ca)&&Ca.aggregate&&!ha.aggregate))break;if(rc(Ca)&&(bc(Ca.bin)||rc(ha)&&ha.aggregate&&!Ca.aggregate))return"horizontal";if(Ab||db){if(H)return H;if(!db&&(rc(ha)&&"quantitative"===ha.type&&!Db(ha.bin)||Nb(ha)))return"horizontal";if(!Ab&&(rc(Ca)&&"quantitative"===Ca.type&&!Db(Ca.bin)||Nb(Ca)))break}case Jm:if(!(!db||rc(ha)&&bc(ha.bin)||!Ab||rc(Ca)&&bc(Ca.bin)))return;case Hm:if(Ab){if(rc(Ca)&&bc(Ca.bin))return"horizontal";break}else if(db)if(rc(ha)&&bc(ha.bin))break;else return"horizontal";else if(P===
Jm)if(ha&&!Ca)break;else if(Ca&&!ha)return"horizontal";case Im:case bn:za=xb(ha);var Pb=xb(Ca);if(za&&!Pb)return"tick"!==P?"horizontal":"vertical";if(!za&&Pb)return"tick"!==P?"vertical":"horizontal";if(za&&Pb){za="temporal"===ha.type;Pb="temporal"===Ca.type;if(za&&!Pb)return"tick"!==P?"vertical":"horizontal";if(!za&&Pb)return"tick"!==P?"horizontal":"vertical";if(!ha.aggregate&&Ca.aggregate)return"tick"!==P?"vertical":"horizontal";if(ha.aggregate&&!Ca.aggregate)return"tick"!==P?"horizontal":"vertical";
if(H)return H}else{if(H)return H;return}}return"vertical"}function Wi(P,za){var H={...cj(P,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"})},ha={...Vh("x",P,{defaultPos:"mid"})},Ca={...Vh("y",P,{defaultPos:"mid"})},db={...wi("size",P)},Ab={...wi("angle",P)};P=za?{shape:{value:za}}:wi("shape",P);return{...H,...ha,...Ca,...db,...Ab,...P}}function fm(P){if(A([Im,Hm,no],P.mark)){var za=De(P.mark,P.encoding);if(0<za.length)return Vj(P,za)}else if(A([tm],
P.mark)&&(za=Md.some(H=>Uf(H,P.markDef,P.config)),P.stack&&!P.fieldDef("size")&&za))return Tk(P);return nk(P)}function Vj(P,za){return[{name:P.getName("pathgroup"),type:"group",from:{facet:{name:"faceted_path_"+P.requestDataName(Si.Main),data:P.requestDataName(Si.Main),groupby:za}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:nk(P,{fromPrefix:"faceted_path_"})}]}function Tk(P){const [za]=nk(P,{fromPrefix:"stack_group_"}),H=P.scaleName(P.stack.fieldChannel),
ha=(nc={})=>P.vgField(P.stack.fieldChannel,nc);var Ca=(nc,Kc)=>{Kc=[ha({prefix:"min",suffix:"start",expr:Kc}),ha({prefix:"max",suffix:"start",expr:Kc}),ha({prefix:"min",suffix:"end",expr:Kc}),ha({prefix:"max",suffix:"end",expr:Kc})];return"".concat(nc,"(").concat(Kc.map(ad=>"scale('".concat(H,"',").concat(ad,")")).join(","),")")};let db;"x"===P.stack.fieldChannel?(Ca={...B(za.encode.update,["y","yc","y2","height",...Md]),x:{signal:Ca("min","datum")},x2:{signal:Ca("max","datum")},clip:{value:!0}},
db={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},za.encode.update={...v(za.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(Ca={...B(za.encode.update,["x","xc","x2","width"]),y:{signal:Ca("min","datum")},y2:{signal:Ca("max","datum")},clip:{value:!0}},db={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},za.encode.update={...v(za.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(var Ab of Md){var Pb=dg(Ab,P.markDef,P.config);za.encode.update[Ab]?
(Ca[Ab]=za.encode.update[Ab],delete za.encode.update[Ab]):Pb&&(Ca[Ab]=Ed(Pb));Pb&&(za.encode.update[Ab]={value:0})}Ab=P.fieldDef(P.stack.groupbyChannel);Pb=Cc(Ab)?[Cc(Ab)]:[];((null===Ab||void 0===Ab?0:Ab.bin)||(null===Ab||void 0===Ab?0:Ab.timeUnit))&&Pb.push(Cc(Ab,{binSuffix:"end"}));Ca="stroke strokeWidth strokeJoin strokeCap strokeDash strokeDashOffset strokeMiterLimit strokeOpacity".split(" ").reduce((nc,Kc)=>{if(za.encode.update[Kc])return{...nc,[Kc]:za.encode.update[Kc]};const ad=dg(Kc,P.markDef,
P.config);return void 0!==ad?{...nc,[Kc]:Ed(ad)}:nc},Ca);Ca.stroke&&(Ca.strokeForeground={value:!0},Ca.strokeOffset={value:0});return[{type:"group",from:{facet:{data:P.requestDataName(Si.Main),name:"stack_group_"+P.requestDataName(Si.Main),groupby:Pb,aggregate:{fields:[ha({suffix:"start"}),ha({suffix:"start"}),ha({suffix:"end"}),ha({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:Ca},marks:[{type:"group",encode:{update:db},marks:[za]}]}]}function Mk(P){const {encoding:za,stack:H,mark:ha,
markDef:Ca,config:db}=P;var Ab=za.order;if(!(!Jg(Ab)&&ed(Ab)&&N(Ab.value)||!Ab&&N(Uf("order",Ca,db)))){if((Jg(Ab)||rc(Ab))&&!H)return sb(Ab,{expr:"datum"});if(Ha(ha)){const Pb="horizontal"===Ca.orient?"y":"x",nc=za[Pb];if(rc(nc)){Ab=nc.sort;if(Jg(Ab))return{field:Cc(nc,{prefix:Pb,suffix:"sort_index",expr:"datum"})};if(he(Ab))return{field:Cc({aggregate:Fc(P.encoding)?Ab.op:void 0,field:Ab.field},{expr:"datum"})};if(Ab&&Ab.encoding)return P=P.fieldDef(Ab.encoding),{field:Cc(P,{expr:"datum"}),order:Ab.order};
if(null!==Ab)return{field:Cc(nc,{binSuffix:P.stack&&P.stack.impute?"mid":void 0,expr:"datum"})}}}}}function nk(P,za={fromPrefix:""}){const {mark:H,markDef:ha,encoding:Ca,config:db}=P;var Ab=ha.clip;var Pb=P.getScaleComponent("x");var nc=P.getScaleComponent("y");Pb=Pb&&Pb.get("selectionExtent")||nc&&nc.get("selectionExtent")?!0:void 0;nc=P.component.projection;Ab=La(Ab,Pb,nc&&!nc.isFit?!0:void 0);Pb=kg(ha);nc=Ca.key;const Kc=Mk(P);var ad;if(P.component.selection){for(var ld=ad=sf(P.component.selection).length,
Pd=P.parent;Pd&&0===ld;)ld=sf(Pd.component.selection).length,Pd=Pd.parent;ad=ld?{interactive:0<ad||!!P.encoding.tooltip}:null}else ad=null;ld=Uf("aria",ha,db);Pd=Wm[H].postEncodingTransform?Wm[H].postEncodingTransform(P):null;return[{name:P.getName("marks"),type:Wm[H].vgMark,...(Ab?{clip:!0}:{}),...(Pb?{style:Pb}:{}),...(nc?{key:nc.field}:{}),...(Kc?{sort:Kc}:{}),...(ad?ad:{}),...(!1===ld?{aria:ld}:{}),from:{data:za.fromPrefix+P.requestDataName(Si.Main)},encode:{update:Wm[H].encodeEntry(P)},...(Pd?
{transform:Pd}:{})}]}function Vi(P,za,H,ha,Ca){if("facet"in P)return new Em(P,za,H,Ca);if("layer"in P)return new co(P,za,H,ha,Ca);if(hc(P))return new Fm(P,za,H,ha,Ca);if("vconcat"in P||"hconcat"in P||"concat"in P)return new xn(P,za,H,Ca);throw Error(Gd(P));}function Ml(P,za,H={},ha){const Ca=P.config?rd(P.config):void 0;H=[].concat(P.assembleSelectionData([]),yi(P.component.data,H));const db=P.assembleProjections(),Ab=P.assembleTitle(),Pb=P.assembleGroupStyle(),nc=P.assembleGroupEncodeEntry(!0);let Kc=
P.assembleLayoutSignals();Kc=Kc.filter(Pd=>"width"!==Pd.name&&"height"!==Pd.name||void 0===Pd.value?!0:(za[Pd.name]=+Pd.value,!1));const {params:ad,...ld}=za;return{$schema:"https://vega.github.io/schema/vega/v5.json",...(P.description?{description:P.description}:{}),...ld,...(Ab?{title:Ab}:{}),...(Pb?{style:Pb}:{}),...(nc?{encode:{update:nc}}:{}),data:H,...(0<db.length?{projections:db}:{}),...P.assembleGroup([...Kc,...P.assembleSelectionTopLevelSignals([]),...id(ad)]),...(Ca?{config:Ca}:{}),...(ha?
{usermeta:ha}:{})}}const ul=P=>function(za){return za[P]},tk=P=>{const za=P.length;return function(H){for(let ha=0;ha<za;++ha)H=H[P[ha]];return H}};(function(P,za,H){const ha=u(P);P=1===ha.length?ha[0]:P;return h((H&&H.get||l)(ha),[P],za||P)})("id");const hh=h(P=>P,[],"identity");h(()=>0,[],"zero");h(()=>1,[],"one");h(()=>!0,[],"true");h(()=>!1,[],"false");var Jg=Array.isArray;const $g=Object.prototype.hasOwnProperty;Array.prototype.flat||Object.defineProperty(Array.prototype,"flat",{configurable:!0,
value:function H(za){var ha=isNaN(za)?1:Number(za);return ha?Array.prototype.reduce.call(this,function(Ca,db){return Array.isArray(db)?Ca.push.apply(Ca,H.call(db,ha-1)):Ca.push(db),Ca},[]):Array.prototype.slice.call(this)},writable:!0});Array.prototype.flatMap||Object.defineProperty(Array.prototype,"flatMap",{configurable:!0,value:function(za){return Array.prototype.map.apply(this,arguments).flat()},writable:!0});var Ij=function(za,H){H||(H={});"function"===typeof H&&(H={cmp:H});var ha="boolean"===
typeof H.cycles?H.cycles:!1,Ca=H.cmp&&function(Ab){return function(Pb){return function(nc,Kc){return Ab({key:nc,value:Pb[nc]},{key:Kc,value:Pb[Kc]})}}}(H.cmp),db=[];return function nc(Pb){Pb&&Pb.toJSON&&"function"===typeof Pb.toJSON&&(Pb=Pb.toJSON());if(void 0!==Pb){if("number"==typeof Pb)return isFinite(Pb)?""+Pb:"null";if("object"!==typeof Pb)return JSON.stringify(Pb);var Kc;if(Array.isArray(Pb)){var ad="[";for(Kc=0;Kc<Pb.length;Kc++)Kc&&(ad+=","),ad+=nc(Pb[Kc])||"null";return ad+"]"}if(null===
Pb)return"null";if(-1!==db.indexOf(Pb)){if(ha)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON");}var ld=db.push(Pb)-1,Pd=Object.keys(Pb).sort(Ca&&Ca(Pb));ad="";for(Kc=0;Kc<Pd.length;Kc++){var Oe=Pd[Kc],Ae=nc(Pb[Oe]);Ae&&(ad&&(ad+=","),ad+=JSON.stringify(Oe)+":"+Ae)}db.splice(ld,1);return"{"+ad+"}"}}(za)};const ok=function Ca(H,ha){if(H===ha)return!0;if(H&&ha&&"object"==typeof H&&"object"==typeof ha){if(H.constructor!==ha.constructor)return!1;var db;if(Array.isArray(H)){var Ab=
H.length;if(Ab!=ha.length)return!1;for(db=Ab;0!==db--;)if(!Ca(H[db],ha[db]))return!1;return!0}if(H.constructor===RegExp)return H.source===ha.source&&H.flags===ha.flags;if(H.valueOf!==Object.prototype.valueOf)return H.valueOf()===ha.valueOf();if(H.toString!==Object.prototype.toString)return H.toString()===ha.toString();var Pb=Object.keys(H);Ab=Pb.length;if(Ab!==Object.keys(ha).length)return!1;for(db=Ab;0!==db--;)if(!Object.prototype.hasOwnProperty.call(ha,Pb[db]))return!1;for(db=Ab;0!==db--;)if(Ab=
Pb[db],!Ca(H[Ab],ha[Ab]))return!1;return!0}return H!==H&&ha!==ha},Rf=function(H,ha,Ca){return Ca={path:ha,exports:{},require:function(db,Ab){throw Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs");}},H(Ca,Ca.exports),Ca.exports}(function(H){var ha=function(){function Ca(ld,Pd){return null!=Pd&&ld instanceof Pd}function db(ld,Pd,Oe,Ae,gf){function bf(Df,yf){if(null===Df)return null;if(0===yf||"object"!=typeof Df)return Df;if(Ca(Df,nc))var Wg=new nc;else if(Ca(Df,Kc))Wg=
new Kc;else if(Ca(Df,ad))Wg=new ad(function(uj,Il){Df.then(function(Wl){uj(bf(Wl,yf-1))},function(Wl){Il(bf(Wl,yf-1))})});else if(db.__isArray(Df))Wg=[];else if(db.__isRegExp(Df))Wg=new RegExp(Df.source,Pb(Df)),Df.lastIndex&&(Wg.lastIndex=Df.lastIndex);else if(db.__isDate(Df))Wg=new Date(Df.getTime());else{if(Hg&&k.isBuffer(Df))return Wg=k.allocUnsafe?k.allocUnsafe(Df.length):new k(Df.length),Df.copy(Wg),Wg;if(Ca(Df,Error))Wg=Object.create(Df);else if("undefined"==typeof Ae){var tj=Object.getPrototypeOf(Df);
Wg=Object.create(tj)}else Wg=Object.create(Ae),tj=Ae}if(Pd){var zk=Te.indexOf(Df);if(-1!=zk)return xf[zk];Te.push(Df);xf.push(Wg)}Ca(Df,nc)&&Df.forEach(function(uj,Il){Il=bf(Il,yf-1);uj=bf(uj,yf-1);Wg.set(Il,uj)});Ca(Df,Kc)&&Df.forEach(function(uj){uj=bf(uj,yf-1);Wg.add(uj)});for(var rk in Df){var qi;tj&&(qi=Object.getOwnPropertyDescriptor(tj,rk));qi&&null==qi.set||(Wg[rk]=bf(Df[rk],yf-1))}if(Object.getOwnPropertySymbols)for(zk=Object.getOwnPropertySymbols(Df),rk=0;rk<zk.length;rk++)if(qi=zk[rk],
tj=Object.getOwnPropertyDescriptor(Df,qi),!tj||tj.enumerable||gf)Wg[qi]=bf(Df[qi],yf-1),tj.enumerable||Object.defineProperty(Wg,qi,{enumerable:!1});if(gf)for(zk=Object.getOwnPropertyNames(Df),rk=0;rk<zk.length;rk++)qi=zk[rk],tj=Object.getOwnPropertyDescriptor(Df,qi),tj&&tj.enumerable||(Wg[qi]=bf(Df[qi],yf-1),Object.defineProperty(Wg,qi,{enumerable:!1}));return Wg}"object"===typeof Pd&&(Oe=Pd.depth,Ae=Pd.prototype,gf=Pd.includeNonEnumerable,Pd=Pd.circular);var Te=[],xf=[],Hg="undefined"!=typeof k;
"undefined"==typeof Pd&&(Pd=!0);"undefined"==typeof Oe&&(Oe=Infinity);return bf(ld,Oe)}function Ab(ld){return Object.prototype.toString.call(ld)}function Pb(ld){var Pd="";ld.global&&(Pd+="g");ld.ignoreCase&&(Pd+="i");ld.multiline&&(Pd+="m");return Pd}try{var nc=Map}catch(ld){nc=function(){}}try{var Kc=Set}catch(ld){Kc=function(){}}try{var ad=Promise}catch(ld){ad=function(){}}db.clonePrototype=function(ld){if(null===ld)return null;var Pd=function(){};Pd.prototype=ld;return new Pd};db.__objToStr=Ab;
db.__isDate=function(ld){return"object"===typeof ld&&"[object Date]"===Ab(ld)};db.__isArray=function(ld){return"object"===typeof ld&&"[object Array]"===Ab(ld)};db.__isRegExp=function(ld){return"object"===typeof ld&&"[object RegExp]"===Ab(ld)};db.__getRegExpFlags=Pb;return db}();H.exports&&(H.exports=ha)});Set.prototype.toJSON=function(){return"Set(".concat([...this].map(H=>Ij(H)).join(","),")")};const kh=Ij,sf=Object.keys,Pi=Object.values,fi=Object.entries;let Nk=42;const Uh={labelAlign:{part:"labels",
vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},
gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}},li=["domain","grid","labels","ticks","title"],ij={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",
gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",
labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"main",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",
titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},Yh={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,
gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,
tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},gi={...Yh,style:1,labelExpr:1,encoding:1},Ii=sf({axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,
axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1}),bj={argmax:1,argmin:1,average:1,count:1,distinct:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Uk={count:1,min:1,max:1},vl=["count","valid","missing","distinct"],Zk=["count","sum","distinct","valid","missing"],Nl=x("mean average median q1 q3 min max".split(" ")),nl={theta:1,theta2:1,radius:1,radius2:1},
wl={longitude:1,longitude2:1,latitude:1,latitude2:1},sk=sf(wl),xl={x:1,y:1,x2:1,y2:1,...nl,...wl,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1},Yl={row:1,column:1,facet:1},Wj=sf(Yl),yl={...xl,...Yl},$k=sf(yl),{order:dl,detail:Zl,tooltip:ol,...bl}=yl,{row:zl,column:bh,facet:yj,...tf}=bl,Aj="x2 y2 latitude2 longitude2 theta2 radius2".split(" "),{x:cl,y:pl,x2:zj,y2:Xk,
latitude:pj,longitude:Ll,latitude2:Vk,longitude2:Nh,theta:M,theta2:p,radius:na,radius2:ib,...Sb}=xl,wc=sf(Sb),Wc={x:1,y:1},Hd=sf(Wc),Ud={theta:1,radius:1},He=sf(Ud),{text:zf,tooltip:mg,href:Og,url:Ah,description:Jj,detail:fk,key:Bj,order:Wk,...fl}=Sb,Al=sf(fl),el={...Wc,...Ud,...fl},sl=sf(el),em={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},
{geoshape:Bn,...pm}=em,rm=function(H,ha){let Ca=H||0;return{level(db){return arguments.length?(Ca=+db,this):Ca},error(){1<=Ca&&q(ha||"error","ERROR",arguments);return this},warn(){2<=Ca&&q(ha||"warn","WARN",arguments);return this},info(){3<=Ca&&q(ha||"log","INFO",arguments);return this},debug(){4<=Ca&&q(ha||"log","DEBUG",arguments);return this}}}(2);let ql=rm;const Gk="january february march april may june july august september october november december".split(" "),$l=Gk.map(H=>H.substr(0,3)),ea=
"sunday monday tuesday wednesday thursday friday saturday".split(" "),va=ea.map(H=>H.substr(0,3)),Za={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Tb=sf(Za),qc={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "},Vc=sf({aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,
startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1}),qd={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,
shape:1,symbol:1,text:1,trail:1},Md=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"],le={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},Ze={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",
sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"},yg={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0},qh="linear log pow sqrt symlog time utc".split(" "),uf=x(qh),Qg=x(["linear","log","pow","sqrt","symlog"]),gh=x(["quantile","quantize",
"threshold"]),jh=qh.concat(["quantile","quantize","threshold","sequential","identity"]),Ce=x(jh),qe=x(["ordinal","bin-ordinal","point","band"]),{type:Ke,domain:wf,range:Bf,rangeMax:yh,rangeMin:Lg,scheme:zh,...Jh}={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},Bh=sf(Jh),zi={arc:"arc",area:"area",bar:"bar",image:"image",
line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},qm=zi.arc,Hm=zi.area,tm=zi.bar,Cn=zi.image,Im=zi.line,hm=zi.point,mo=zi.rect,Jm=zi.rule,Km=zi.text,bn=zi.tick,no=zi.trail,um=zi.circle,cn=zi.square,Dn=zi.geoshape,im=sf(zi);x(im);const En="stroke strokeWidth strokeDash strokeDashOffset strokeOpacity strokeJoin strokeMiterLimit fill fillOpacity".split(" "),Fn=sf({color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,
timeUnitBand:1,timeUnitBandPosition:1}),Lm=sf({mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1}),oo={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},Gn={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1},dn=(H,ha)=>{switch(ha.fieldTitle){case "plain":return H.field;case "functional":{const {aggregate:Ca,bin:db,
timeUnit:Ab,field:Pb}=H;kb(Ca)?H="".concat(Pb," for argmax(").concat(Ca.argmax,")"):Ea(Ca)?H="".concat(Pb," for argmin(").concat(Ca.argmin,")"):(H=me(Ab),H=(H=Ca||(null===H||void 0===H?void 0:H.unit)||(null===H||void 0===H?void 0:H.maxbins)&&"timeunit"||Db(db)&&"bin")?H.toUpperCase()+"("+Pb+")":Pb)}return H;default:return Wd(H,ha)}};let jm=dn;const am={compatible:!0};class bm{constructor(H,ha){this.name=H;this.run=ha}hasMatchingType(H){return hc(H)?(H=H.mark,(m(H)?H.type:H)===this.name):!1}}const po=
new bm("boxplot",je),qo=new bm("errorbar",xe),vm=new bm("errorband",Hc),Hn={};td("boxplot",je,["box","median","outliers","rule","ticks"]);td("errorbar",xe,["ticks","rule"]);td("errorband",Hc,["band","borders"]);const In=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],Jn={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",
titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},en={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},ro=sf(Jn),so=sf(en),Mm=sf({header:1,headerRow:1,headerColumn:1,
headerFacet:1}),Kn="size shape fill stroke strokeDash strokeWidth opacity".split(" "),Qh=["background","padding"],to=sf({align:1,bounds:1,center:1,columns:1,spacing:1}),uo={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:{continuousWidth:200,continuousHeight:200,step:20},mark:{color:"#4c78a8",invalid:"filter",timeUnitBand:1},arc:{},area:{},bar:{binSpacing:1,continuousBandSize:5,timeUnitBandPosition:.5},circle:{},geoshape:{},image:{},line:{},point:{},rect:{binSpacing:0,
continuousBandSize:5,timeUnitBandPosition:.5},rule:{color:"black"},square:{},text:{color:"black"},tick:{thickness:1},trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:{pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4},
projection:{},legend:{gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:{single:{on:"click",fields:["_vgsid_"],resolve:"global",empty:"all",clear:"dblclick"},multi:{on:"click",fields:["_vgsid_"],toggle:"event.shiftKey",resolve:"global",empty:"all",clear:"dblclick"},interval:{on:"[mousedown, window:mouseup] \x3e window:mousemove!",
encodings:["x","y"],translate:"[mousedown, window:mouseup] \x3e window:mousemove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}},style:{},title:{},facet:{spacing:20},concat:{spacing:20}},rl="#4c78a8 #f58518 #e45756 #72b7b2 #54a24b #eeca3b #b279a2 #ff9da6 #9d755d #bab0ac".split(" "),Ln={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},fn={blue:rl[0],orange:rl[1],red:rl[2],teal:rl[3],green:rl[4],yellow:rl[5],purple:rl[6],pink:rl[7],
brown:rl[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"},wm=[...Lm,...Ii,...Mm,"background","padding","legend","lineBreak","scale","style","title","view"],Mn=["view",...im],vo="color fontSize background padding facet concat numberFormat timeFormat countTitle header axisQuantitative axisTemporal axisDiscrete axisPoint axisXBand axisXPoint axisXDiscrete axisXQuantitative axisXTemporal axisYBand axisYPoint axisYDiscrete axisYQuantitative axisYTemporal scale selection overlay".split(" "),
gn={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize"],line:["point"],tick:["bandSize","thickness"]};class Nn{map(H,ha){return"facet"in H?this.mapFacet(H,ha):"repeat"in H?this.mapRepeat(H,ha):"hconcat"in H?this.mapHConcat(H,ha):"vconcat"in H?this.mapVConcat(H,ha):"concat"in H?this.mapConcat(H,ha):this.mapLayerOrUnit(H,ha)}mapLayerOrUnit(H,
ha){if("layer"in H)return this.mapLayer(H,ha);if(hc(H))return this.mapUnit(H,ha);throw Error(Gd(H));}mapLayer(H,ha){return{...H,layer:H.layer.map(Ca=>this.mapLayerOrUnit(Ca,ha))}}mapHConcat(H,ha){return{...H,hconcat:H.hconcat.map(Ca=>this.map(Ca,ha))}}mapVConcat(H,ha){return{...H,vconcat:H.vconcat.map(Ca=>this.map(Ca,ha))}}mapConcat(H,ha){const {concat:Ca,...db}=H;return{...db,concat:Ca.map(Ab=>this.map(Ab,ha))}}mapFacet(H,ha){return{...H,spec:this.map(H.spec,ha)}}mapRepeat(H,ha){return{...H,spec:this.map(H.spec,
ha)}}}const wo={zero:1,center:1,normalize:1},Bl=new Set([qm,tm,Hm,Jm,hm,um,cn,Im,Km,bn]),xo=new Set([tm,Hm,qm]);class yo{constructor(){ub(this,"name","path-overlay")}hasMatchingType(H,ha){if(hc(H)){const {mark:Ca,encoding:db}=H;H=m(Ca)?Ca:{type:Ca};switch(H.type){case "line":case "rule":case "trail":return!!hf(H,ha[H.type],db);case "area":return!!hf(H,ha[H.type],db)||!!eg(H,ha[H.type])}}return!1}run(H,ha,Ca){var {config:db}=ha;const {selection:Ab,projection:Pb,mark:nc,encoding:Kc,...ad}=H;H=mc(Kc,
db);const ld=m(nc)?nc:{type:nc},Pd=hf(ld,db[ld.type],H),Oe="area"===ld.type&&eg(ld,db[ld.type]);const {point:Ae,line:gf,...bf}={...("area"===ld.type&&void 0===ld.opacity&&void 0===ld.fillOpacity?{opacity:.7}:{}),...ld};var Te=1<sf(bf).length?bf:bf.type;Te=[{...(Ab?{selection:Ab}:{}),mark:Te,encoding:v(H,["shape"])}];const xf=Pe(ld,H);let Hg=H;if(xf){const {fieldChannel:Df,offset:yf}=xf;Hg={...H,[Df]:{...H[Df],...(yf?{stack:yf}:{})}}}Oe&&Te.push({...(Pb?{projection:Pb}:{}),mark:{type:"line",...B(ld,
["clip","interpolate","tension","tooltip"]),...Oe},encoding:Hg});Pd&&Te.push({...(Pb?{projection:Pb}:{}),mark:{type:"point",opacity:1,filled:!0,...B(ld,["clip","tooltip"]),...Pd},encoding:Hg});for(const Df of["line","area","rule","trail"])db[Df]&&(db={...db,[Df]:v(db[Df],["point","line"])});return Ca({...ad,layer:Te},{...ha,config:db})}}class Nm{constructor(){ub(this,"name","RangeStep")}hasMatchingType(H){if(hc(H)&&H.encoding)for(const Ca of Hd){const db=H.encoding[Ca];if(db&&cc(db)){var ha;if(null===
db||void 0===db?0:null===(ha=db.scale)||void 0===ha?0:ha.rangeStep)return!0}}return!1}run(H){const ha={};let Ca={...H.encoding};for(const Ab of Hd){const Pb=bb(Ab),nc=Ca[Ab];if(nc&&cc(nc)){var db;if(null===nc||void 0===nc?0:null===(db=nc.scale)||void 0===db?0:db.rangeStep){const {scale:Kc,...ad}=nc,{rangeStep:ld,...Pd}=Kc;ha[Pb]={step:Kc.rangeStep};Zc('Scale\'s "rangeStep" is deprecated and will be removed in Vega-Lite 5.0. Please use "width"/"height": {"step": ...} instead. See https://vega.github.io/vega-lite/docs/size.html.');
Ca={...Ca,[Ab]:{...ad,...(E(Pd)?{}:{scale:Pd})}}}}}return{...ha,...H,encoding:Ca}}}class zo{constructor(){ub(this,"name","RuleForRangedLine")}hasMatchingType(H){if(hc(H)){const {encoding:ha,mark:Ca}=H;if("line"===Ca)for(const db of Aj)if(H=ra(db),H=ha[H],ha[db]&&(rc(H)&&!bc(H.bin)||$a(H)))return!0}return!1}run(H,ha,Ca){var {encoding:db}=H,Ab=!!db.x2;db="Line mark is for continuous lines and thus cannot be used with ".concat(Ab&&db.y2?"x2 and y2":Ab?"x2":"y2",". We will use the rule mark (line segments) instead.");
Zc(db);return Ca({...H,mark:"rule"},ha)}}class Ao extends Nn{constructor(...H){super(...H);ub(this,"nonFacetUnitNormalizers",[po,qo,vm,new yo,new zo,new Nm])}map(H,ha){if(hc(H)){const Ca=dc(H.encoding,"row"),db=dc(H.encoding,"column"),Ab=dc(H.encoding,"facet");if(Ca||db||Ab)return this.mapFacetedUnit(H,ha)}return super.map(H,ha)}mapUnit(H,ha){const {parentEncoding:Ca,parentProjection:db}=ha;var Ab=Sf(H.encoding,ha.repeater);H={...H,...(Ab?{encoding:Ab}:{})};if(Ca||db)return this.mapUnitWithParentEncodingOrProjection(H,
ha);Ab=this.mapLayerOrUnit.bind(this);for(const Pb of this.nonFacetUnitNormalizers)if(Pb.hasMatchingType(H,ha.config))return Pb.run(H,ha,Ab);return H}mapRepeat(H,ha){return!Jg(H.repeat)&&H.repeat.layer?this.mapLayerRepeat(H,ha):this.mapNonLayerRepeat(H,ha)}mapLayerRepeat(H,ha){const {repeat:Ca,spec:db,...Ab}=H,{row:Pb,column:nc,layer:Kc}=Ca,{repeater:ad={},repeaterPrefix:ld=""}=ha;return Pb||nc?this.mapRepeat({...H,repeat:{...(Pb?{row:Pb}:{}),...(nc?{column:nc}:{})},spec:{repeat:{layer:Kc},spec:db}},
ha):{...Ab,layer:Kc.map(Pd=>{var Oe={...ad,layer:Pd};Pd=(db.name||"")+ld+"child__layer_".concat(W(Pd));Oe=this.mapLayerOrUnit(db,{...ha,repeater:Oe,repeaterPrefix:Pd});Oe.name=Pd;return Oe})}}mapNonLayerRepeat(H,ha){var Ca;const {repeat:db,spec:Ab,data:Pb,...nc}=H;!Jg(db)&&H.columns&&(H=v(H,["columns"]),Zc(fe("repeat")));const Kc=[],{repeater:ad={},repeaterPrefix:ld=""}=ha,Pd=!Jg(db)&&db.row||[ad?ad.row:null],Oe=!Jg(db)&&db.column||[ad?ad.column:null];var Ae=Jg(db)&&db||[ad?ad.repeat:null];for(const bf of Ae)for(const Te of Pd)for(const xf of Oe){var gf=
{repeat:bf,row:Te,column:xf,layer:ad.layer};Ae=(Ab.name||"")+ld+"child__"+(Jg(db)?"".concat(W(bf)):(db.row?"row_".concat(W(Te)):"")+(db.column?"column_".concat(W(xf)):""));gf=this.map(Ab,{...ha,repeater:gf,repeaterPrefix:Ae});gf.name=Ae;Kc.push(v(gf,["data"]))}H=Jg(db)?H.columns:db.column?db.column.length:1;return{data:null!==(Ca=Ab.data)&&void 0!==Ca?Ca:Pb,align:"all",...nc,columns:H,concat:Kc}}mapFacet(H,ha){const {facet:Ca}=H;Pf(Ca)&&H.columns&&(H=v(H,["columns"]),Zc(fe("facet")));return super.mapFacet(H,
ha)}mapUnitWithParentEncodingOrProjection(H,ha){const {encoding:Ca,projection:db}=H,{parentEncoding:Ab,parentProjection:Pb,config:nc}=ha,Kc=Vg({parentProjection:Pb,projection:db});ha=Ng({parentEncoding:Ab,encoding:Sf(Ca,ha.repeater)});return this.mapUnit({...H,...(Kc?{projection:Kc}:{}),...(ha?{encoding:ha}:{})},{config:nc})}mapFacetedUnit(H,ha){const {row:Ca,column:db,facet:Ab,...Pb}=H.encoding,{mark:nc,width:Kc,projection:ad,height:ld,view:Pd,selection:Oe,encoding:Ae,...gf}=H,{facetMapping:bf,layout:Te}=
this.getFacetMappingAndLayout({row:Ca,column:db,facet:Ab},ha);H=Sf(Pb,ha.repeater);return this.mapFacet({...gf,...Te,facet:bf,spec:{...(Kc?{width:Kc}:{}),...(ld?{height:ld}:{}),...(Pd?{view:Pd}:{}),...(ad?{projection:ad}:{}),mark:nc,encoding:H,...(Oe?{selection:Oe}:{})}},ha)}getFacetMappingAndLayout(H,ha){const {row:Ca,column:db,facet:Ab}=H;if(Ca||db){Ab&&(ha=[...(Ca?["row"]:[]),...(db?["column"]:[])],ha="Facet encoding dropped as ".concat(ha.join(" and ")," ").concat(1<ha.length?"are":"is"," also specified."),
Zc(ha));ha={};const Oe={};for(const Ae of["row","column"]){const gf=H[Ae];if(gf){const {align:bf,center:Te,spacing:xf,columns:Hg,...Df}=gf;ha[Ae]=Df;for(const yf of["align","center","spacing"])if(void 0!==gf[yf]){var Pb;Oe[yf]=null!==(Pb=Oe[yf])&&void 0!==Pb?Pb:{};Oe[yf][Ae]=gf[yf]}}}return{facetMapping:ha,layout:Oe}}const {align:nc,center:Kc,spacing:ad,columns:ld,...Pd}=Ab;H=(H=ha.repeater)?Pf(Pd)?ug(Pd,H):vf(Pd,H):Pd;return{facetMapping:H,layout:{...(nc?{align:nc}:{}),...(Kc?{center:Kc}:{}),...(ad?
{spacing:ad}:{}),...(ld?{columns:ld}:{})}}}mapLayer(H,{parentEncoding:ha,parentProjection:Ca,...db}){const {encoding:Ab,projection:Pb,...nc}=H;H={...db,parentEncoding:Ng({parentEncoding:ha,encoding:Ab,layer:!0}),parentProjection:Vg({parentProjection:Ca,projection:Pb})};return super.mapLayer(nc,H)}}const Bo=new Ao;class Cl{constructor(H={},ha={}){this.explicit=H;this.implicit=ha}clone(){return new Cl(Rf(this.explicit),Rf(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(H){return La(this.explicit[H],
this.implicit[H])}getWithExplicit(H){return void 0!==this.explicit[H]?{explicit:!0,value:this.explicit[H]}:void 0!==this.implicit[H]?{explicit:!1,value:this.implicit[H]}:{explicit:!1,value:void 0}}setWithExplicit(H,ha){void 0!==ha.value&&this.set(H,ha.value,ha.explicit)}set(H,ha,Ca){delete this[Ca?"implicit":"explicit"][H];this[Ca?"explicit":"implicit"][H]=ha;return this}copyKeyFromSplit(H,ha){void 0!==ha.explicit[H]?this.set(H,ha.explicit[H],!0):void 0!==ha.implicit[H]&&this.set(H,ha.implicit[H],
!1)}copyKeyFromObject(H,ha){void 0!==ha[H]&&this.set(H,ha[H],!0)}copyAll(H){for(const ha of sf(H.combine())){const Ca=H.getWithExplicit(ha);this.setWithExplicit(ha,Ca)}}}class On extends Cl{constructor(H={},ha={},Ca=!1){super(H,ha);this.explicit=H;this.implicit=ha;this.parseNothing=Ca}clone(){const H=super.clone();H.parseNothing=this.parseNothing;return H}}let Si;(function(H){H[H.Raw=0]="Raw";H[H.Main=1]="Main";H[H.Row=2]="Row";H[H.Column=3]="Column";H[H.Lookup=4]="Lookup"})(Si||(Si={}));const Ql=
/[[\]{}]/,Co={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let Pn,Qk;const Do={left:"x",center:"xc",right:"x2"},Eo={top:"y",middle:"yc",bottom:"y2"},Fo=new Set(["aria"]),hn={has:H=>"interval"!==H.type&&H.nearest,parse:(H,ha)=>{if(ha.events)for(const Ca of ha.events)Ca.markname=H.getName("voronoi")},marks:(H,ha,Ca)=>{const {x:db,y:Ab}=ha.project.hasChannel;ha=H.mark;if(Ha(ha))return Zc('The "nearest" transform is not supported for '.concat(ha," marks.")),
Ca;ha={name:H.getName("voronoi"),type:"path",interactive:!0,from:{data:H.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...Ek(H,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:db||!Ab?"datum.datum.x || 0":"0"},y:{expr:Ab||!db?"datum.datum.y || 0":"0"},size:[H.getSizeSignalRef("width"),H.getSizeSignalRef("height")]}]};let Pb=0,nc=!1;Ca.forEach((Kc,ad)=>{var ld;Kc=null!==(ld=Kc.name)&&void 0!==ld?ld:"";Kc===
H.component.mark[0].name?Pb=ad:0<=Kc.indexOf("voronoi")&&(nc=!0)});nc||Ca.splice(Pb+1,0,ha);return Ca}};class Ei{constructor(H,ha){this.debugName=ha;ub(this,"_children",[]);ub(this,"_parent",null);ub(this,"_hash",void 0);H&&(this.parent=H)}clone(){throw Error("Cannot clone node");}get parent(){return this._parent}set parent(H){(this._parent=H)&&H.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(H,ha){-1<this._children.indexOf(H)?Zc("Attempt to add the same child twice."):
void 0!==ha?this._children.splice(ha,0,H):this._children.push(H)}removeChild(H){H=this._children.indexOf(H);this._children.splice(H,1);return H}remove(){let H=this._parent.removeChild(this);for(const ha of this._children)ha._parent=this._parent,this._parent.addChild(ha,H++)}insertAsParentOf(H){const ha=H.parent;ha.removeChild(this);this.parent=ha;H.parent=this}swapWithParent(){const H=this._parent,ha=H.parent;for(const Ca of this._children)Ca.parent=H;this._children=[];H.removeChild(this);H.parent.removeChild(H);
this.parent=ha;H.parent=this}}class Nj extends Ei{clone(){const H=new this.constructor;H.debugName="clone_"+this.debugName;H._source=this._source;H._name="clone_"+this._name;H.type=this.type;H.refCounts=this.refCounts;H.refCounts[H._name]=0;return H}constructor(H,ha,Ca,db){super(H,ha);this.type=Ca;this.refCounts=db;ub(this,"_source",void 0);ub(this,"_name",void 0);this._source=this._name=ha;!this.refCounts||this._name in this.refCounts||(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){void 0===
this._hash&&(this._hash="Output ".concat(Ra()));return this._hash}getSource(){this.refCounts[this._name]++;return this._source}isRequired(){return!!this.refCounts[this._name]}setSource(H){this._source=H}}class Hk extends Ei{clone(){return new Hk(null,Rf(this.formula))}constructor(H,ha){super(H);this.formula=ha}static makeFromEncoding(H,ha){const Ca=ha.reduceFieldDef((db,Ab,Pb)=>{const {field:nc,timeUnit:Kc}=Ab,ad=pg(ha)?ha.encoding[Ia(Pb)]:void 0;Pb=pg(ha)&&Cb(Pb,Ab,ad,ha.stack,ha.markDef,ha.config);
Kc&&(Ab=Cc(Ab,{forAs:!0}),db[O({as:Ab,field:nc,timeUnit:Kc})]={as:Ab,field:nc,timeUnit:Kc,...(Pb?{band:!0}:{})});return db},{});return E(Ca)?null:new Hk(H,Ca)}static makeFromTransform(H,ha){const {timeUnit:Ca,...db}={...ha};ha=me(Ca);ha={...db,timeUnit:ha};return new Hk(H,{[O(ha)]:ha})}merge(H){this.formula={...this.formula};for(const ha in H.formula)if(!this.formula[ha]||H.formula[ha].band)this.formula[ha]=H.formula[ha];for(const ha of H.children)H.removeChild(ha),ha.parent=this;H.remove()}removeFormulas(H){const ha=
{};for(const [Ca,db]of fi(this.formula))H.has(db.as)||(ha[Ca]=db);this.formula=ha}producedFields(){return new Set(Pi(this.formula).map(H=>H.as))}dependentFields(){return new Set(Pi(this.formula).map(H=>H.field))}hash(){return"TimeUnit ".concat(O(this.formula))}assemble(){const H=[];for(const ha of Pi(this.formula)){const {field:Ca,as:db,timeUnit:Ab}=ha,{unit:Pb,utc:nc,...Kc}=me(Ab);H.push({field:Xa(Ca),type:"timeunit",...(Pb?{units:Nd(Pb)}:{}),...(nc?{timezone:"utc"}:{}),...Kc,as:[db,"".concat(db,
"_end")]})}return H}}class Go{constructor(...H){ub(this,"hasChannel",void 0);ub(this,"hasField",void 0);ub(this,"timeUnit",void 0);ub(this,"items",void 0);this.items=H;this.hasChannel={};this.hasField={}}}const Qn={has:H=>"single"===H.type&&"global"===H.resolve&&H.bind&&"scales"!==H.bind&&!ke(H.bind),parse:(H,ha,Ca,db)=>{db.on||delete ha.events;db.clear||delete ha.clear},topLevelSignals:(H,ha,Ca)=>{const db=ha.name;H=ha.project;const Ab=ha.bind,Pb=ha.init&&ha.init[0],nc=hn.has(ha)?"(item().isVoronoi ? datum.datum : datum)":
"datum";H.items.forEach((Kc,ad)=>{const ld=W("".concat(db,"_").concat(Kc.field));if(!Ca.filter(Ae=>Ae.name===ld).length){var Pd,Oe;Ca.unshift({name:ld,...(Pb?{init:Kg(Pb[ad])}:{value:null}),on:ha.events?[{events:ha.events,update:"datum \x26\x26 item().mark.marktype !\x3d\x3d 'group' ? ".concat(nc,"[").concat(w(Kc.field),"] : null")}]:[],bind:null!==(Pd=null!==(Oe=Ab[Kc.field])&&void 0!==Oe?Oe:Ab[Kc.channel])&&void 0!==Pd?Pd:Ab})}});return Ca},signals:(H,ha,Ca)=>{const db=ha.name;var Ab=ha.project;
H=Ca.filter(nc=>nc.name===db+"_tuple")[0];ha=db+"_tuple_fields";Ab=Ab.items.map(nc=>W("".concat(db,"_").concat(nc.field)));const Pb=Ab.map(nc=>"".concat(nc," !\x3d\x3d null")).join(" \x26\x26 ");Ab.length&&(H.update="".concat(Pb," ? {fields: ").concat(ha,", values: [").concat(Ab.join(", "),"]} : null"));delete H.value;delete H.on;return Ca}},Dl={has:H=>"multi"===H.type&&!!H.toggle,signals:(H,ha,Ca)=>Ca.concat({name:ha.name+"_toggle",value:!1,on:[{events:ha.events,update:ha.toggle}]}),modifyExpr:(H,
ha)=>{const Ca=ha.name+"_tuple",db=ha.name+"_toggle";return"".concat(db," ? null : ").concat(Ca,", ")+("global"===ha.resolve?"".concat(db," ? null : true, "):"".concat(db," ? null : {unit: ").concat(Fi(H),"}, "))+"".concat(db," ? ").concat(Ca," : null")}},El={has:H=>"interval"===H.type&&"global"===H.resolve&&H.bind&&"scales"===H.bind,parse:(H,ha)=>{const Ca=ha.scales=[];for(const Ab of ha.project.items){var db=Ab.channel;if(!el[db])continue;const Pb=(db=H.getScaleComponent(db))?db.get("type"):void 0;
db&&Pb in Ce?(db.set("selectionExtent",{selection:ha.name,field:Ab.field},!0),Ca.push(Ab)):Zc("Scale bindings are currently only supported for scales with unbinned, continuous domains.")}},topLevelSignals:(H,ha,Ca)=>{const db=ha.scales.filter(Pb=>0===Ca.filter(nc=>nc.name===Pb.signals.data).length);if(!H.parent||Xj(H)||0===db.length)return Ca;H=Ca.filter(Pb=>Pb.name===ha.name)[0];let Ab=H.update;if(0<=Ab.indexOf("vlSelectionResolve"))H.update="{".concat(db.map(Pb=>"".concat(w(Pb.field),": ").concat(Pb.signals.data)).join(", "),
"}");else{for(const Pb of db){const nc="".concat(w(Pb.field),": ").concat(Pb.signals.data);0>Ab.indexOf(nc)&&(Ab="".concat(Ab.substring(0,Ab.length-1),", ").concat(nc,"}"))}H.update=Ab}return Ca.concat(db.map(Pb=>({name:Pb.signals.data})))},signals:(H,ha,Ca)=>{if(H.parent&&!Xj(H))for(const db of ha.scales)H=Ca.filter(Ab=>Ab.name===db.signals.data)[0],H.push="outer",delete H.value,delete H.update;return Ca}},Rn={has:H=>{const ha="global"===H.resolve&&H.bind&&ke(H.bind);H=1===H.project.items.length&&
"_vgsid_"!==H.project.items[0].field;ha&&!H&&Zc("Legend bindings are only supported for selections over an individual field or encoding channel.");return ha&&H},parse:(H,ha,Ca,db)=>{db.on||delete ha.events;db.clear||delete ha.clear;if(db.on||db.clear)for(const Pb of ha.events){var Ab;Pb.filter=S(null!==(Ab=Pb.filter)&&void 0!==Ab?Ab:[]);0>Pb.filter.indexOf('event.item \x26\x26 indexof(event.item.mark.role, "legend") \x3c 0')&&Pb.filter.push('event.item \x26\x26 indexof(event.item.mark.role, "legend") \x3c 0')}H=
Ob(ha.bind)?ha.bind.legend:"click";H=t(H)?Ki(H,"view"):S(H);ha.bind={legend:{merge:H}}},topLevelSignals:(H,ha,Ca)=>{H=ha.name;const db=Ob(ha.bind)&&ha.bind.legend,Ab=nc=>Kc=>{Kc=Rf(Kc);Kc.markname=nc;return Kc};for(const nc of ha.project.items){if(!nc.hasLegend)continue;var Pb="".concat(W(nc.field),"_legend");const Kc="".concat(H,"_").concat(Pb);0===Ca.filter(ad=>ad.name===Kc).length&&(Pb=db.merge.map(Ab("".concat(Pb,"_symbols"))).concat(db.merge.map(Ab("".concat(Pb,"_labels")))).concat(db.merge.map(Ab("".concat(Pb,
"_entries")))),Ca.unshift({name:Kc,...(ha.init?{}:{value:null}),on:[{events:Pb,update:"datum.value || item().items[0].items[0].datum.value",force:!0},{events:db.merge,update:"!event.item || !datum ? null : ".concat(Kc),force:!0}]}))}return Ca},signals:(H,ha,Ca)=>{const db=ha.name;var Ab=ha.project;H=Ca.find(Kc=>Kc.name===db+"_tuple");var Pb=db+"_tuple_fields";Ab=Ab.items.filter(Kc=>Kc.hasLegend).map(Kc=>W("".concat(db,"_").concat(W(Kc.field),"_legend")));const nc=Ab.map(Kc=>"".concat(Kc," !\x3d\x3d null")).join(" \x26\x26 ");
Pb="".concat(nc," ? {fields: ").concat(Pb,", values: [").concat(Ab.join(", "),"]} : null");ha.events&&0<Ab.length?H.on.push({events:Ab.map(Kc=>({signal:Kc})),update:Pb}):0<Ab.length&&(H.update=Pb,delete H.value,delete H.on);H=Ca.find(Kc=>Kc.name===db+"_toggle");Pb=Ob(ha.bind)&&ha.bind.legend;H&&(ha.events?H.on.push({...H.on[0],events:Pb}):H.on[0].events=Pb);return Ca}},km=[{has:()=>!0,parse:(H,ha,Ca)=>{var db;const Ab=ha.name,Pb=null!==(db=ha.project)&&void 0!==db?db:ha.project=new Go,nc={};db={};
const Kc=new Set,ad=(Ae,gf)=>{Ae="visual"===gf?Ae.channel:Ae.field;let bf=W("".concat(Ab,"_").concat(Ae));for(let Te=1;Kc.has(bf);Te++)bf=W("".concat(Ab,"_").concat(Ae,"_").concat(Te));Kc.add(bf);return{[gf]:bf}};if(!Ca.fields&&!Ca.encodings){const Ae=H.config.selection[Ca.type];if(Ca.init)for(const gf of S(Ca.init))for(const bf of sf(gf))tf[bf]?(Ca.encodings||(Ca.encodings=[])).push(bf):"interval"===Ca.type?(Zc('Interval selections should be initialized using "x" and/or "y" keys.'),Ca.encodings=
Ae.encodings):(Ca.fields||(Ca.fields=[])).push(bf);else Ca.encodings=Ae.encodings,Ca.fields=Ae.fields}for(var ld of null!==(Pd=Ca.fields)&&void 0!==Pd?Pd:[]){var Pd;Pd={type:"E",field:ld};Pd.signals={...ad(Pd,"data")};Pb.items.push(Pd);Pb.hasField[ld]=Pd}for(const Ae of null!==(Oe=Ca.encodings)&&void 0!==Oe?Oe:[]){var Oe;(ld=H.fieldDef(Ae))?(Oe=ld.field,ld.aggregate?Zc(Bd(Ae,ld.aggregate)):Oe?(ld.timeUnit&&(Oe=H.vgField(Ae),Pd={timeUnit:ld.timeUnit,as:Oe,field:ld.field},db[O(Pd)]=Pd),nc[Oe]||(Pd=
"E","interval"===ha.type?H.getScaleComponent(Ae).get("type")in Ce&&(Pd="R"):ld.bin&&(Pd="R-RE"),ld={field:Oe,channel:Ae,type:Pd},ld.signals={...ad(ld,"data"),...ad(ld,"visual")},Pb.items.push(nc[Oe]=ld),Pb.hasField[Oe]=Pb.hasChannel[Ae]=nc[Oe])):Zc(bd(Ae))):Zc(bd(Ae))}Ca.init&&(H=Ae=>Pb.items.map(gf=>void 0!==Ae[gf.channel]?Ae[gf.channel]:Ae[gf.field]),"interval"===Ca.type?ha.init=H(Ca.init):(Ca=S(Ca.init),ha.init=Ca.map(H)));E(db)||(Pb.timeUnit=new Hk(null,db))},signals:(H,ha,Ca)=>{const db=ha.name+
"_tuple_fields";return 0<Ca.filter(Ab=>Ab.name===db).length?Ca:Ca.concat({name:db,value:ha.project.items.map(Ab=>{const {signals:Pb,hasLegend:nc,...Kc}=Ab;Kc.field=Xa(Kc.field);return Kc})})}},Dl,El,Rn,{has:H=>"interval"===H.type&&H.translate,signals:(H,ha,Ca)=>{const db=ha.name,Ab=El.has(ha),Pb=db+"_translate_anchor",{x:nc,y:Kc}=ha.project.hasChannel;let ad=Ki(ha.translate,"scope");Ab||(ad=ad.map(ld=>(ld.between[0].markname=db+"_brush",ld)));Ca.push({name:Pb,value:{},on:[{events:ad.map(ld=>ld.between[0]),
update:"{x: x(unit), y: y(unit)"+(void 0!==nc?", extent_x: "+(Ab?lh(H,"x"):"slice(".concat(nc.signals.visual,")")):"")+(void 0!==Kc?", extent_y: "+(Ab?lh(H,"y"):"slice(".concat(Kc.signals.visual,")")):"")+"}"}]},{name:db+"_translate_delta",value:{},on:[{events:ad,update:"{x: ".concat(Pb,".x - x(unit), y: ").concat(Pb,".y - y(unit)}")}]});void 0!==nc&&Mh(H,ha,nc,"width",Ca);void 0!==Kc&&Mh(H,ha,Kc,"height",Ca);return Ca}},{has:H=>"interval"===H.type&&H.zoom,signals:(H,ha,Ca)=>{const db=ha.name,Ab=
El.has(ha),Pb=db+"_zoom_delta",{x:nc,y:Kc}=ha.project.hasChannel,ad=w(H.scaleName("x")),ld=w(H.scaleName("y"));let Pd=Ki(ha.zoom,"scope");Ab||(Pd=Pd.map(Oe=>(Oe.markname=db+"_brush",Oe)));Ca.push({name:db+"_zoom_anchor",on:[{events:Pd,update:Ab?"{"+[ad?"x: invert(".concat(ad,", x(unit))"):"",ld?"y: invert(".concat(ld,", y(unit))"):""].filter(Oe=>!!Oe).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:Pb,on:[{events:Pd,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]});void 0!==
nc&&ui(H,ha,nc,"width",Ca);void 0!==Kc&&ui(H,ha,Kc,"height",Ca);return Ca}},Qn,hn,{has:H=>void 0!==H.clear&&!1!==H.clear,parse:(H,ha,Ca)=>{Ca.clear&&(ha.clear=t(Ca.clear)?Ki(Ca.clear,"scope"):Ca.clear)},topLevelSignals:(H,ha,Ca)=>{if(Qn.has(ha))for(const db of ha.project.items)H=Ca.findIndex(Ab=>Ab.name===W("".concat(ha.name,"_").concat(db.field))),-1!==H&&Ca[H].on.push({events:ha.clear,update:"null"});return Ca},signals:(H,ha,Ca)=>{function db(Ab,Pb){-1!==Ab&&Ca[Ab].on&&Ca[Ab].on.push({events:ha.clear,
update:Pb})}if("interval"===ha.type)for(const Ab of ha.project.items)H=Ca.findIndex(Pb=>Pb.name===Ab.signals.visual),db(H,"[0, 0]"),-1===H&&(H=Ca.findIndex(Pb=>Pb.name===Ab.signals.data),db(H,"null"));else H=Ca.findIndex(Ab=>Ab.name===ha.name+"_tuple"),db(H,"null"),Dl.has(ha)&&(H=Ca.findIndex(Ab=>Ab.name===ha.name+"_toggle"),db(H,"false"));return Ca}}],jn={single:{signals:Hh,modifyExpr:(H,ha)=>ha.name+"_tuple, "+("global"===ha.resolve?"true":"{unit: ".concat(Fi(H),"}"))},multi:{signals:Hh,modifyExpr:(H,
ha)=>ha.name+"_tuple, "+("global"===ha.resolve?"null":"{unit: ".concat(Fi(H),"}"))},interval:{signals:(H,ha)=>{const Ca=ha.name;var db=Ca+"_tuple_fields",Ab=El.has(ha);const Pb=[],nc=[],Kc=[];if(ha.translate&&!Ab){const ad="!event.item || event.item.mark.name !\x3d\x3d ".concat(w(Ca+"_brush"));ki(ha,(ld,Pd)=>{var Oe;Pd=S(null!==(Oe=Pd.between[0].filter)&&void 0!==Oe?Oe:Pd.between[0].filter=[]);0>Pd.indexOf(ad)&&Pd.push(ad);return ld})}ha.project.items.forEach((ad,ld)=>{const Pd=ad.channel;if("x"!==
Pd&&"y"!==Pd)Zc("Interval selections only support x and y encoding channels.");else{ld=xh(H,ha,ad,ha.init?ha.init[ld]:null);var Oe=ad.signals.data;ad=ad.signals.visual;var Ae=w(H.scaleName(Pd)),gf=H.getScaleComponent(Pd).get("type")in Ce?"+":"";Pb.push(...ld);nc.push(Oe);Kc.push({scaleName:H.scaleName(Pd),expr:"(!isArray(".concat(Oe,") || ")+"(".concat(gf,"invert(").concat(Ae,", ").concat(ad,")[0] \x3d\x3d\x3d ").concat(gf).concat(Oe,"[0] \x26\x26 ")+"".concat(gf,"invert(").concat(Ae,", ").concat(ad,
")[1] \x3d\x3d\x3d ").concat(gf).concat(Oe,"[1]))")})}});Ab||Pb.push({name:Ca+"_scale_trigger",value:{},on:[{events:Kc.map(ad=>({scale:ad.scaleName})),update:Kc.map(ad=>ad.expr).join(" \x26\x26 ")+" ? ".concat(Ca+"_scale_trigger"," : {}")}]});Ab=ha.init;db="unit: ".concat(Fi(H),", fields: ").concat(db,", values");return Pb.concat({name:Ca+"_tuple",...(Ab?{init:"{".concat(db,": ").concat(Kg(Ab),"}")}:{}),on:[{events:[{signal:nc.join(" || ")}],update:nc.join(" \x26\x26 ")+" ? {".concat(db,": [").concat(nc,
"]} : null")}]})},modifyExpr:(H,ha)=>ha.name+"_tuple, "+("global"===ha.resolve?"true":"{unit: ".concat(Fi(H),"}")),marks:(H,ha,Ca)=>{const db=ha.name,{x:Ab,y:Pb}=ha.project.hasChannel,nc=Ab&&Ab.signals.visual,Kc=Pb&&Pb.signals.visual,ad="data(".concat(w(ha.name+"_store"),")");if(El.has(ha))return Ca;const ld={x:void 0!==Ab?{signal:"".concat(nc,"[0]")}:{value:0},y:void 0!==Pb?{signal:"".concat(Kc,"[0]")}:{value:0},x2:void 0!==Ab?{signal:"".concat(nc,"[1]")}:{field:{group:"width"}},y2:void 0!==Pb?{signal:"".concat(Kc,
"[1]")}:{field:{group:"height"}}};if("global"===ha.resolve)for(const bf of sf(ld))ld[bf]=[{test:"".concat(ad,".length \x26\x26 ").concat(ad,"[0].unit \x3d\x3d\x3d ").concat(Fi(H)),...ld[bf]},{value:0}];const {fill:Pd,fillOpacity:Oe,cursor:Ae,...gf}=ha.mark;H=sf(gf).reduce((bf,Te)=>{bf[Te]=[{test:[void 0!==Ab&&"".concat(nc,"[0] !\x3d\x3d ").concat(nc,"[1]"),void 0!==Pb&&"".concat(Kc,"[0] !\x3d\x3d ").concat(Kc,"[1]")].filter(xf=>xf).join(" \x26\x26 "),value:gf[Te]},{value:null}];return bf},{});return[{name:db+
"_brush_bg",type:"rect",clip:!0,encode:{enter:{fill:{value:Pd},fillOpacity:{value:Oe}},update:ld}},...Ca,{name:db+"_brush",type:"rect",clip:!0,encode:{enter:{...(Ae?{cursor:{value:Ae}}:{}),fill:{value:"transparent"}},update:{...ld,...H}}}]}}};Yg.prototype.visit=function(H){let ha,Ca,db;if(H(this))return 1;ha=xg(this);Ca=0;for(db=ha.length;Ca<db;++Ca)if(ha[Ca].visit(H))return 1};var Tg,of,ak,di,kn=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B2\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,
Ho=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B2\u08E4-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58\u0C59\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D60-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA69D\uA69F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA7AD\uA7B0\uA7B1\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB5F\uAB64\uAB65\uABC0-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2D\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/;
const Sn={"if":1,"in":1,"do":1,"var":1,"for":1,"new":1,"try":1,let:1,"this":1,"else":1,"case":1,"void":1,"with":1,"enum":1,"while":1,"break":1,"catch":1,"throw":1,"const":1,yield:1,"class":1,"super":1,"return":1,"typeof":1,"delete":1,"switch":1,"export":1,"import":1,"public":1,"static":1,"default":1,"finally":1,"extends":1,"package":1,"private":1,"function":1,"continue":1,"debugger":1,"interface":1,"protected":1,"instanceof":1,"implements":1},Io={"if":1};class Rl extends Ei{clone(){return new Rl(null,
this.model,Rf(this.filter))}constructor(H,ha,Ca){super(H);this.model=ha;this.filter=Ca;ub(this,"expr",void 0);ub(this,"_dependentFields",void 0);this.expr=hi(this.model,this.filter,this);this._dependentFields=Fj(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return"Filter ".concat(this.expr)}}const ln={scale:({model:H,channel:ha})=>H.scaleName(ha),format:({fieldOrDatumDef:H,config:ha,axis:Ca})=>{const {format:db,
formatType:Ab}=Ca;return Pg(H,H.type,db,Ab,ha,!0)},formatType:({axis:H,fieldOrDatumDef:ha,scaleType:Ca})=>{({formatType:H}=H);return dh(H,ha,Ca)},grid:({fieldOrDatumDef:H,axis:ha,scaleType:Ca})=>{if(rc(H)&&bc(H.bin))return!1;var db;return null!==(db=ha.grid)&&void 0!==db?db:!(Ca in qe)&&rc(H)&&!Db(null===H||void 0===H?void 0:H.bin)},gridScale:({model:H,channel:ha})=>{ha="x"===ha?"y":"x";H=H.getScaleComponent(ha)?H.scaleName(ha):void 0;return H},labelAlign:({axis:H,labelAngle:ha,orient:Ca,channel:db})=>
H.labelAlign||wh(ha,Ca,db),labelAngle:({labelAngle:H})=>H,labelBaseline:({axis:H,labelAngle:ha,orient:Ca,channel:db})=>H.labelBaseline||Fk(ha,Ca,db),labelFlush:({axis:H,fieldOrDatumDef:ha,channel:Ca})=>{var db;H=null!==(db=H.labelFlush)&&void 0!==db?db:"x"===Ca&&A(["quantitative","temporal"],ha.type)?!0:void 0;return H},labelOverlap:({axis:H,fieldOrDatumDef:ha,scaleType:Ca})=>{var db;null!==(db=H.labelOverlap)&&void 0!==db?Ca=db:(H=ha.type,db=rc(ha)&&!!ha.timeUnit,ha=rc(ha)?ha.sort:void 0,Ca=db&&
!D(ha)||"nominal"!==H&&"ordinal"!==H?"log"===Ca||"symlog"===Ca?"greedy":!0:void 0);return Ca},orient:({orient:H})=>H,tickCount:({channel:H,model:ha,axis:Ca,fieldOrDatumDef:db,scaleType:Ab})=>{var Pb;ha=(H="x"===H?"width":"y"===H?"height":void 0)?ha.getSizeSignalRef(H):void 0;return null!==(Pb=Ca.tickCount)&&void 0!==Pb?Pb:gj({fieldOrDatumDef:db,scaleType:Ab,size:ha,values:Ca.values})},title:({axis:H,model:ha,channel:Ca})=>{if(void 0!==H.title)return H.title;H=ik(ha,Ca);if(void 0!==H)return H;H=ha.typedFieldDef(Ca);
ha=ha.fieldDef("x"===Ca?"x2":"y2");return tb(H?[Ig(H)]:[],rc(ha)?[Ig(ha)]:[])},values:({axis:H,fieldOrDatumDef:ha})=>{H=H.values;ha=Jg(H)?Mc(ha,H):hd(H)?H:void 0;return ha},zindex:({axis:H,fieldOrDatumDef:ha,mark:Ca})=>{var db;H=null!==(db=H.zindex)&&void 0!==db?db:"rect"===Ca&&vd(ha)?1:0;return H}};class xm extends Ei{clone(){return new xm(null,Rf(this.transform))}constructor(H,ha){super(H);this.transform=ha;ub(this,"_dependentFields",void 0);this._dependentFields=Fj(this.transform.calculate)}static parseAllForSortIndex(H,
ha){ha.forEachFieldDef((Ca,db)=>{if(jb(Ca)&&Ue(Ca.sort)){const {field:Pb,timeUnit:nc}=Ca;var Ab=Ca.sort;Ab=Ab.map((Kc,ad)=>"".concat(If({field:Pb,timeUnit:nc,equal:Kc})," ? ").concat(ad," : ")).join("")+Ab.length;H=new xm(H,{calculate:Ab,as:Mi(Ca,db,{forAs:!0})})}});return H}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return"Calculate ".concat(O(this.transform))}}
const il=["row","column"],mn=["header","footer"],Jo={column:{start:0,end:1},row:{start:1,end:0}},ym=sf({aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,
labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1,
disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1});class Tn extends Cl{}const Un={symbols:function(H,{fieldOrDatumDef:ha,model:Ca,channel:db,legendCmpt:Ab,legendType:Pb}){var nc,Kc,ad,ld;if("symbol"===Pb){var {markDef:Pd,encoding:Oe,config:Ae,mark:gf}=Ca;Pb=Pd.filled&&"trail"!==gf;var bf={};for(var Te of En){const Wg=dg(Te,Ca.markDef,Ca.config);void 0!==Wg&&(bf[Te]=Ed(Wg))}Te={...bf,...uk(Ca,{filled:Pb})};bf=null!==(nc=Ab.get("symbolOpacity"))&&
void 0!==nc?nc:Ae.legend.symbolOpacity;nc=null!==(Kc=Ab.get("symbolFillColor"))&&void 0!==Kc?Kc:Ae.legend.symbolFillColor;Kc=null!==(ad=Ab.get("symbolStrokeColor"))&&void 0!==ad?ad:Ae.legend.symbolStrokeColor;ad=void 0===bf?null!==(ld=bi(Oe.opacity))&&void 0!==ld?ld:Pd.opacity:void 0;if(Te.fill)if("fill"===db||Pb&&"color"===db)delete Te.fill;else if(Te.fill.field)if(nc)delete Te.fill;else{var xf;Te.fill=Ed(null!==(xf=Ae.legend.symbolBaseFillColor)&&void 0!==xf?xf:"black");Te.fillOpacity=Ed(null!==
ad&&void 0!==ad?ad:1)}else if(Jg(Te.fill)){var Hg,Df,yf;if(ld=null!==(Hg=null!==(Df=wb(null!==(yf=Oe.fill)&&void 0!==yf?yf:Oe.color))&&void 0!==Df?Df:Pd.fill)&&void 0!==Hg?Hg:Pb&&Pd.color)Te.fill=Ed(ld)}Te.stroke&&("stroke"===db||!Pb&&"color"===db?delete Te.stroke:Te.stroke.field||Kc?delete Te.stroke:Jg(Te.stroke)&&(Hg=La(wb(Oe.stroke||Oe.color),Pd.stroke,Pb?Pd.color:void 0))&&(Te.stroke={value:Hg}));"opacity"!==db&&((ha=rc(ha)&&oc(Ca,Ab,ha))?Te.opacity=[{test:ha,...Ed(null!==ad&&void 0!==ad?ad:1)},
Ed(Ae.legend.unselectedOpacity)]:ad&&(Te.opacity=Ed(ad)));Te={...Te,...H};return E(Te)?void 0:Te}},gradient:function(H,{model:ha,legendType:Ca,legendCmpt:db}){var Ab;if("gradient"===Ca){var {config:Pb,markDef:nc,encoding:Kc}=ha;ha={};if(db=void 0===(null!==(Ab=db.get("gradientOpacity"))&&void 0!==Ab?Ab:Pb.legend.gradientOpacity)?bi(Kc.opacity)||nc.opacity:void 0)ha.opacity=Ed(db);ha={...ha,...H};return E(ha)?void 0:ha}},labels:function(H,{fieldOrDatumDef:ha,model:Ca,channel:db,legendCmpt:Ab}){db=
Ca.legend(db)||{};const Pb=Ca.config;Ca=(Ca=rc(ha)?oc(Ca,Ab,ha):void 0)?[{test:Ca,value:1},{value:Pb.legend.unselectedOpacity}]:void 0;const {format:nc,formatType:Kc}=db;ha=Rd(Kc)?Xf({fieldOrDatumDef:ha,field:"datum.value",format:nc,formatType:Kc,config:Pb}):void 0;H={...(Ca?{opacity:Ca}:{}),...(ha?{text:ha}:{}),...H};return E(H)?void 0:H},entries:function(H,{legendCmpt:ha}){ha=ha.get("selections");return(null===ha||void 0===ha?0:ha.length)?{...H,fill:{value:"transparent"}}:H}},nn={direction:({direction:H})=>
H,format:({fieldOrDatumDef:H,legend:ha,config:Ca})=>{const {format:db,formatType:Ab}=ha;return Pg(H,H.type,db,Ab,Ca,!1)},formatType:({legend:H,fieldOrDatumDef:ha,scaleType:Ca})=>{({formatType:H}=H);return dh(H,ha,Ca)},gradientLength:H=>{var ha,Ca;const {legend:db,legendConfig:Ab}=H;return null!==(ha=null!==(Ca=db.gradientLength)&&void 0!==Ca?Ca:Ab.gradientLength)&&void 0!==ha?ha:qa(H)},labelOverlap:({legend:H,legendConfig:ha,scaleType:Ca})=>{var db,Ab;H=null!==(db=null!==(Ab=H.labelOverlap)&&void 0!==
Ab?Ab:ha.labelOverlap)&&void 0!==db?db:A(["quantile","threshold","log","symlog"],Ca)?"greedy":void 0;return H},symbolType:({legend:H,markDef:ha,channel:Ca,encoding:db})=>{var Ab;if(null!==(Ab=H.symbolType)&&void 0!==Ab)var Pb=Ab;else a:{H=ha.type;ha=ha.shape;if("shape"!==Ca&&(Ca=null!==(Pb=wb(db.shape))&&void 0!==Pb?Pb:ha)){Pb=Ca;break a}switch(H){case "bar":case "rect":case "image":case "square":Pb="square";break a;case "line":case "trail":case "rule":Pb="stroke";break a;case "arc":case "point":case "circle":case "tick":case "geoshape":case "area":case "text":Pb=
"circle";break a}Pb=void 0}return Pb},title:({fieldOrDatumDef:H,config:ha})=>we(H,ha,{allowDisabling:!0}),type:({legendType:H,scaleType:ha,channel:Ca})=>{if(Wb(Ca)&&ha in uf){if("gradient"===H)return}else if("symbol"===H)return;return H},values:({fieldOrDatumDef:H,legend:ha})=>{ha=ha.values;H=Jg(ha)?Mc(H,ha):hd(ha)?ha:void 0;return H}},Ko="type clipAngle clipExtent center rotate precision reflectX reflectY coefficient distance fraction lobes parallel radius ratio spacing tilt".split(" ");class on extends Cl{constructor(H,
ha,Ca,db){super({...ha},{name:H});this.specifiedProjection=ha;this.size=Ca;this.data=db;ub(this,"merged",!1)}get isFit(){return!!this.data}}class Fl extends Ei{clone(){return new Fl(null,Rf(this.bins))}constructor(H,ha){super(H);this.bins=ha}static makeFromEncoding(H,ha){const Ca=ha.reduceFieldDef((db,Ab,Pb)=>{if(vc(Ab)&&Db(Ab.bin)){const {key:Pd,binComponent:Oe}=Ub(Ab,Ab.bin,ha);var nc={...db[Pd]};var Kc=ha.config;if(md(Ab,Pb)){var ad,ld;Pb=pg(ha)?null!==(ad=null!==(ld=ha.axis(Pb))&&void 0!==ld?
ld:ha.legend(Pb))&&void 0!==ad?ad:{}:{};ad=Cc(Ab,{expr:"datum"});ld=Cc(Ab,{expr:"datum",binSuffix:"end"});Ab={formulaAs:Cc(Ab,{binSuffix:"range",forAs:!0}),formula:Kf(ad,ld,Pb.format,Pb.formatType,Kc)}}else Ab={};db[Pd]={...Oe,...nc,...Ab}}return db},{});return E(Ca)?null:new Fl(H,Ca)}static makeFromTransform(H,ha,Ca){const {key:db,binComponent:Ab}=Ub(ha,ha.bin,Ca);return new Fl(H,{[db]:Ab})}merge(H,ha){for(const Ca of sf(H.bins))Ca in this.bins?(ha(H.bins[Ca].signal,this.bins[Ca].signal),this.bins[Ca].as=
ba([...this.bins[Ca].as,...H.bins[Ca].as],O)):this.bins[Ca]=H.bins[Ca];for(const Ca of H.children)H.removeChild(Ca),Ca.parent=this;H.remove()}producedFields(){return new Set(Pi(this.bins).map(H=>H.as).flat(2))}dependentFields(){return new Set(Pi(this.bins).map(H=>H.field))}hash(){return"Bin ".concat(O(this.bins))}assemble(){return Pi(this.bins).flatMap(H=>{const ha=[],[Ca,...db]=H.as,{extent:Ab,...Pb}=H.bin;var nc={type:"bin",field:Xa(H.field),as:Ca,signal:H.signal,...(jc(Ab)?{extent:null}:{extent:Ab}),
...(H.span?{span:{signal:"span(".concat(H.span,")")}}:{}),...Pb};!Ab&&H.extentSignal&&(ha.push({type:"extent",field:Xa(H.field),signal:H.extentSignal}),nc.extent={signal:H.extentSignal});ha.push(nc);for(const Kc of db)for(nc=0;2>nc;nc++)ha.push({type:"formula",expr:Cc({field:Ca[nc]},{expr:"datum"}),as:Kc[nc]});H.formula&&ha.push({type:"formula",expr:H.formula,as:H.formulaAs});return ha})}}class jl extends Ei{clone(){return new jl(null,new Set(this.dimensions),Rf(this.measures))}constructor(H,ha,Ca){super(H);
this.dimensions=ha;this.measures=Ca}get groupBy(){return this.dimensions}static makeFromEncoding(H,ha){let Ca=!1;ha.forEachFieldDef(Pb=>{Pb.aggregate&&(Ca=!0)});const db={},Ab=new Set;if(!Ca)return null;ha.forEachFieldDef((Pb,nc)=>{const {aggregate:Kc,field:ad}=Pb;if(Kc)if("count"===Kc){var ld;db["*"]=null!==(ld=db["*"])&&void 0!==ld?ld:{};db["*"].count=new Set([Cc(Pb,{forAs:!0})])}else{if(Ea(Kc)||kb(Kc)){var Pd;Pb=Ea(Kc)?"argmin":"argmax";ld=Kc[Pb];db[ld]=null!==(Pd=db[ld])&&void 0!==Pd?Pd:{};db[ld][Pb]=
new Set([Cc({op:Pb,field:ld},{forAs:!0})])}else{var Oe;db[ad]=null!==(Oe=db[ad])&&void 0!==Oe?Oe:{};db[ad][Kc]=new Set([Cc(Pb,{forAs:!0})])}if(el[nc]&&"unaggregated"===ha.scaleDomain(nc)){var Ae;db[ad]=null!==(Ae=db[ad])&&void 0!==Ae?Ae:{};db[ad].min=new Set([Cc({field:ad,aggregate:"min"},{forAs:!0})]);db[ad].max=new Set([Cc({field:ad,aggregate:"max"},{forAs:!0})])}}else Pd=pg(ha)?ha.encoding[Ia(nc)]:void 0,vc(Pb)&&pg(ha)&&Cb(nc,Pb,Pd,ha.stack,ha.markDef,ha.config)?(Ab.add(Cc(Pb,{})),Ab.add(Cc(Pb,
{suffix:"end"})),Pb.bin&&md(Pb,nc)&&Ab.add(Cc(Pb,{binSuffix:"range"}))):nc in wl?(nc=Gb(nc),Ab.add(ha.getName(nc))):Ab.add(Cc(Pb))});return 0===Ab.size+sf(db).length?null:new jl(H,Ab,db)}static makeFromTransform(H,ha){const Ca=new Set,db={};for(const Kc of ha.aggregate){const {op:ad,field:ld,as:Pd}=Kc;if(ad)if("count"===ad){var Ab;db["*"]=null!==(Ab=db["*"])&&void 0!==Ab?Ab:{};db["*"].count=new Set([Pd?Pd:Cc(Kc,{forAs:!0})])}else{var Pb;db[ld]=null!==(Pb=db[ld])&&void 0!==Pb?Pb:{};db[ld][ad]=new Set([Pd?
Pd:Cc(Kc,{forAs:!0})])}}for(const Kc of null!==(nc=ha.groupby)&&void 0!==nc?nc:[]){var nc;Ca.add(Kc)}return 0===Ca.size+sf(db).length?null:new jl(H,Ca,db)}merge(H){if(K(this.dimensions,H.dimensions)){var ha=this.measures;H=H.measures;for(const db of sf(H)){const Ab=H[db];for(const Pb of sf(Ab))if(db in ha){var Ca;ha[db][Pb]=new Set([...(null!==(Ca=ha[db][Pb])&&void 0!==Ca?Ca:[]),...Ab[Pb]])}else ha[db]={[Pb]:Ab[Pb]}}return!0}ql.debug(...["different dimensions, cannot merge"]);return!1}addDimensions(H){H.forEach(this.dimensions.add,
this.dimensions)}dependentFields(){return new Set([...this.dimensions,...sf(this.measures)])}producedFields(){const H=new Set;for(const ha of sf(this.measures))for(const Ca of sf(this.measures[ha])){const db=this.measures[ha][Ca];0===db.size?H.add("".concat(Ca,"_").concat(ha)):db.forEach(H.add,H)}return H}hash(){return"Aggregate ".concat(O({dimensions:this.dimensions,measures:this.measures}))}assemble(){const H=[],ha=[],Ca=[];for(const db of sf(this.measures))for(const Ab of sf(this.measures[db]))for(const Pb of this.measures[db][Ab])Ca.push(Pb),
H.push(Ab),ha.push("*"===db?null:Xa(db));return{type:"aggregate",groupby:[...this.dimensions].map(Xa),ops:H,fields:ha,as:Ca}}}class lm extends Ei{constructor(H,ha,Ca,db){super(H);this.model=ha;this.name=Ca;this.data=db;ub(this,"column",void 0);ub(this,"row",void 0);ub(this,"facet",void 0);ub(this,"childModel",void 0);for(const Ab of Wj)if(H=ha.facet[Ab]){const {bin:Pb,sort:nc}=H;this[Ab]={name:ha.getName("".concat(Ab,"_domain")),fields:[Cc(H),...(Db(Pb)?[Cc(H,{binSuffix:"end"})]:[])],...(he(nc)?{sortField:nc}:
Jg(nc)?{sortIndexField:Mi(H,Ab)}:{})}}this.childModel=ha.child}hash(){let H="Facet";for(const ha of Wj)this[ha]&&(H+=" ".concat(ha.charAt(0),":").concat(O(this[ha])));return H}get fields(){const H=[];for(const Ca of Wj){var ha;(null===(ha=this[Ca])||void 0===ha?0:ha.fields)&&H.push(...this[Ca].fields)}return H}dependentFields(){const H=new Set(this.fields);for(const ha of Wj)this[ha]&&(this[ha].sortField&&H.add(this[ha].sortField.field),this[ha].sortIndexField&&H.add(this[ha].sortIndexField));return H}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const H=
{};for(const db of Hd){var ha=this.childModel.component.scales[db];if(ha&&!ha.merged){var Ca=ha.get("type");ha=ha.get("range");Ca in qe&&ge(ha)&&(Ca=ig(this.childModel,db),(Ca=ag(Ca))?H[db]=Ca:Zc(ee(db)))}}return H}assembleRowColumnHeaderData(H,ha,Ca){const db={row:"y",column:"x"}[H],Ab=[],Pb=[],nc=[];Ca&&Ca[db]&&(ha?(Ab.push("distinct_".concat(Ca[db])),Pb.push("max")):(Ab.push(Ca[db]),Pb.push("distinct")),nc.push("distinct_".concat(Ca[db])));const {sortField:Kc,sortIndexField:ad}=this[H];if(Kc){const {op:ld=
"min",field:Pd}=Kc;Ab.push(Pd);Pb.push(ld);nc.push(Cc(Kc,{forAs:!0}))}else ad&&(Ab.push(ad),Pb.push("max"),nc.push(ad));return{name:this[H].name,source:null!==ha&&void 0!==ha?ha:this.data,transform:[{type:"aggregate",groupby:this[H].fields,...(Ab.length?{fields:Ab,ops:Pb,as:nc}:{})}]}}assembleFacetHeaderData(H){const {columns:ha}=this.model.layout,{layoutHeaders:Ca}=this.model.component,db=[],Ab={};for(const Pd of il){for(const Oe of mn){var Pb,nc=null!==(Pb=Ca[Pd]&&Ca[Pd][Oe])&&void 0!==Pb?Pb:[];
for(const Ae of nc){var Kc;if(0<(null===(Kc=Ae.axes)||void 0===Kc?void 0:Kc.length)){Ab[Pd]=!0;break}}}Ab[Pd]&&(nc='length(data("'.concat(this.facet.name,'"))'),nc="row"===Pd?ha?{signal:"ceil(".concat(nc," / ").concat(ha,")")}:1:ha?{signal:"min(".concat(nc,", ").concat(ha,")")}:{signal:nc},db.push({name:"".concat(this.facet.name,"_").concat(Pd),transform:[{type:"sequence",start:0,stop:nc}]}))}const {row:ad,column:ld}=Ab;(ad||ld)&&db.unshift(this.assembleRowColumnHeaderData("facet",null,H));return db}assemble(){const H=
[];var ha=null;const Ca=this.getChildIndependentFieldsWithStep(),{column:db,row:Ab,facet:Pb}=this;if(db&&Ab&&(Ca.x||Ca.y)){var nc,Kc;ha="cross_".concat(this.column.name,"_").concat(this.row.name);const ad=[].concat(null!==(nc=Ca.x)&&void 0!==nc?nc:[],null!==(Kc=Ca.y)&&void 0!==Kc?Kc:[]);nc=ad.map(()=>"distinct");H.push({name:ha,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:ad,ops:nc}]})}for(const ad of["column","row"])this[ad]&&H.push(this.assembleRowColumnHeaderData(ad,
ha,Ca));Pb&&(ha=this.assembleFacetHeaderData(Ca))&&H.push(...ha);return H}}class xk extends Ei{clone(){return new xk(null,Rf(this._parse))}constructor(H,ha){super(H);ub(this,"_parse",void 0);this._parse=ha}hash(){return"Parse ".concat(O(this._parse))}static makeExplicit(H,ha,Ca){let db={};ha=ha.data;!oh(ha)&&ha&&ha.format&&ha.format.parse&&(db=ha.format.parse);return this.makeWithAncestors(H,db,{},Ca)}static makeWithAncestors(H,ha,Ca,db){for(var Ab of sf(Ca)){const nc=db.getWithExplicit(Ab);void 0!==
nc.value&&(nc.explicit||nc.value===Ca[Ab]||"derived"===nc.value||"flatten"===Ca[Ab]?delete Ca[Ab]:Zc(Ee(Ab,Ca[Ab],nc.value)))}for(var Pb of sf(ha))Ab=db.get(Pb),void 0!==Ab&&(Ab===ha[Pb]?delete ha[Pb]:Zc(Ee(Pb,ha[Pb],Ab)));ha=new Cl(ha,Ca);db.copyAll(ha);Ca={};for(const nc of sf(ha.combine()))Pb=ha.get(nc),null!==Pb&&(Ca[nc]=Pb);return 0===sf(Ca).length||db.parseNothing?null:new xk(H,Ca)}get parse(){return this._parse}merge(H){this._parse={...this._parse,...H.parse};H.remove()}assembleFormatParse(){const H=
{};for(const ha of sf(this._parse)){const Ca=this._parse[ha];1===Va(ha)&&(H[ha]=Ca)}return H}producedFields(){return new Set(sf(this._parse))}dependentFields(){return new Set(sf(this._parse))}assembleTransforms(H=!1){return sf(this._parse).filter(ha=>H?1<Va(ha):!0).map(ha=>{const Ca=Ec(ha,this._parse[ha]);return Ca?{type:"formula",expr:Ca,as:eb(ha)}:null}).filter(ha=>null!==ha)}}class Sl extends Ei{clone(){return new Sl(null)}constructor(H){super(H)}dependentFields(){return new Set}producedFields(){return new Set(["_vgsid_"])}hash(){return"Identifier"}assemble(){return{type:"identifier",
as:"_vgsid_"}}}class Om extends Ei{clone(){return new Om(null,this.params)}constructor(H,ha){super(H);this.params=ha}dependentFields(){return new Set}producedFields(){}hash(){return"Graticule ".concat(O(this.params))}assemble(){return{type:"graticule",...(!0===this.params?{}:this.params)}}}class zm extends Ei{clone(){return new zm(null,this.params)}constructor(H,ha){super(H);this.params=ha}dependentFields(){return new Set}producedFields(){var H;return new Set([null!==(H=this.params.as)&&void 0!==
H?H:"data"])}hash(){return"Hash ".concat(O(this.params))}assemble(){return{type:"sequence",...this.params}}}class Tl extends Ei{constructor(H){var ha;super(null);ub(this,"_data",void 0);ub(this,"_name",void 0);ub(this,"_generator",void 0);H=null!==(ha=H)&&void 0!==ha?ha:{name:"source"};let Ca;oh(H)||(Ca=H.format?{...v(H.format,["parse"])}:{});if("values"in H)this._data={values:H.values};else if("url"in H)this._data={url:H.url},Ca.type||(ha=/(?:\.([^.]+))?$/.exec(H.url)[1],A(["json","csv","tsv","dsv",
"topojson"],ha)||(ha="json"),Ca.type=ha);else if("sphere"in H)this._data={values:[{type:"Sphere"}]};else if(si(H)||oh(H))this._data={};this._generator=oh(H);H.name&&(this._name=H.name);Ca&&!E(Ca)&&(this._data.format=Ca)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(H){this._name=H}set parent(H){throw Error("Source nodes have to be roots.");}remove(){throw Error("Source nodes are roots and cannot be removed.");
}hash(){throw Error("Cannot hash sources");}assemble(){return{name:this._name,...this._data,transform:[]}}}var Pm=new WeakMap;class cm{constructor(){Pm.set(this,{writable:!0,value:void 0});Rc(this,Pm,!1)}setModified(){Rc(this,Pm,!0)}get modifiedFlag(){var H=Pm.get(this);if(!H)throw new TypeError("attempted to get private field on non-instance");H=H.get?H.get.call(this):H.value;return H}}class Ul extends cm{getNodeDepths(H,ha,Ca){Ca.set(H,ha);for(const db of H.children)this.getNodeDepths(db,ha+1,Ca);
return Ca}optimize(H){H=[...this.getNodeDepths(H,0,new Map).entries()].sort((ha,Ca)=>Ca[1]-ha[1]);for(const ha of H)this.run(ha[0]);return this.modifiedFlag}}class pn extends cm{optimize(H){this.run(H);for(const ha of H.children)this.optimize(ha);return this.modifiedFlag}}class Vn extends pn{mergeNodes(H,ha){const Ca=ha.shift();for(const db of ha)H.removeChild(db),db.parent=Ca,db.remove()}run(H){const ha=H.children.map(db=>db.hash()),Ca={};for(let db=0;db<ha.length;db++)void 0===Ca[ha[db]]?Ca[ha[db]]=
[H.children[db]]:Ca[ha[db]].push(H.children[db]);for(const db of sf(Ca))1<Ca[db].length&&(this.setModified(),this.mergeNodes(H,Ca[db]))}}class Lo extends pn{constructor(H){super();ub(this,"requiresSelectionId",void 0);this.requiresSelectionId=H&&dj(H)}run(H){!(H instanceof Sl)||this.requiresSelectionId&&(ta(H.parent)||H.parent instanceof jl||H.parent instanceof xk)||(this.setModified(),H.remove())}}class qn extends cm{optimize(H){this.run(H,new Set);return this.modifiedFlag}run(H,ha){let Ca=new Set;
H instanceof Hk&&(Ca=H.producedFields(),r(Ca,ha)&&(this.setModified(),H.removeFormulas(ha),0===H.producedFields.length&&H.remove()));for(const db of H.children)this.run(db,new Set([...ha,...Ca]))}}class Mo extends pn{constructor(){super()}run(H){H instanceof Nj&&!H.isRequired()&&(this.setModified(),H.remove())}}class No extends Ul{run(H){if(!(ta(H)||1<H.numChildren()))for(const ha of H.children)ha instanceof xk&&(H instanceof xk?(this.setModified(),H.merge(ha)):Z(H.producedFields(),ha.dependentFields())||
(this.setModified(),ha.swapWithParent()))}}class Qm extends Ul{run(H){const ha=[...H.children];var Ca=H.children.filter(Ab=>Ab instanceof xk);if(1<H.numChildren()&&1<=Ca.length){const Ab={};var db=new Set;for(const Pb of Ca){Ca=Pb.parse;for(const nc of sf(Ca))nc in Ab?Ab[nc]!==Ca[nc]&&db.add(nc):Ab[nc]=Ca[nc]}for(const Pb of db)delete Ab[Pb];if(!E(Ab)){this.setModified();db=new xk(H,Ab);for(const Pb of ha){if(Pb instanceof xk)for(const nc of sf(Ab))delete Pb.parse[nc];H.removeChild(Pb);Pb.parent=
db;Pb instanceof xk&&0===sf(Pb.parse).length&&Pb.remove()}}}}}class Wn extends Ul{run(H){H instanceof Nj||0<H.numChildren()||H instanceof lm||H instanceof Tl||(this.setModified(),H.remove())}}class Oo extends Ul{run(H){H=H.children.filter(Ca=>Ca instanceof Hk);const ha=H.pop();for(const Ca of H)this.setModified(),ha.merge(Ca)}}class Po extends Ul{run(H){var ha=H.children.filter(Ab=>Ab instanceof jl);const Ca={};for(var db of ha)ha=O(db.groupBy),ha in Ca||(Ca[ha]=[]),Ca[ha].push(db);for(const Ab of sf(Ca))if(db=
Ca[Ab],1<db.length){ha=db.pop();for(const Pb of db)ha.merge(Pb)&&(H.removeChild(Pb),Pb.parent=ha,Pb.remove(),this.setModified())}}}class Xn extends Ul{constructor(H){super();this.model=H}run(H){var ha=!(ta(H)||H instanceof Rl||H instanceof xk||H instanceof Sl);const Ca=[],db=[];for(const Ab of H.children)Ab instanceof Fl&&(ha&&!Z(H.producedFields(),Ab.dependentFields())?Ca.push(Ab):db.push(Ab));if(0<Ca.length){ha=Ca.pop();for(const Ab of Ca)ha.merge(Ab,this.model.renameSignal.bind(this.model));this.setModified();
H instanceof Fl?H.merge(ha,this.model.renameSignal.bind(this.model)):ha.swapWithParent()}if(1<db.length){H=db.pop();for(const Ab of db)H.merge(Ab,this.model.renameSignal.bind(this.model));this.setModified()}}}class Qo extends Ul{run(H){var ha=[...H.children];if(J(ha,Ab=>Ab instanceof Nj)&&!(1>=H.numChildren())){var Ca=[];for(const Ab of ha)if(Ab instanceof Nj){for(ha=Ab;1===ha.numChildren();){const [Pb]=ha.children;if(Pb instanceof Nj)ha=Pb;else break}Ca.push(...ha.children);if(db)H.removeChild(Ab),
Ab.parent=db.parent,db.parent.removeChild(db),db.parent=ha,this.setModified();else var db=ha}else Ca.push(Ab);if(Ca.length){this.setModified();for(const Ab of Ca)Ab.parent.removeChild(Ab),Ab.parent=db}}}}class Gl extends Ei{clone(){return new Gl(null,Rf(this.transform))}constructor(H,ha){super(H);this.transform=ha}addDimensions(H){this.transform.groupby=ba(this.transform.groupby.concat(H),ha=>ha)}dependentFields(){const H=new Set;this.transform.groupby&&this.transform.groupby.forEach(H.add,H);this.transform.joinaggregate.map(ha=>
ha.field).filter(ha=>void 0!==ha).forEach(H.add,H);return H}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(H){var ha;return null!==(ha=H.as)&&void 0!==ha?ha:Cc(H)}hash(){return"JoinAggregateTransform ".concat(O(this.transform))}assemble(){const H=[],ha=[],Ca=[];for(var db of this.transform.joinaggregate)ha.push(db.op),Ca.push(this.getDefaultName(db)),H.push(void 0===db.field?null:db.field);db=this.transform.groupby;return{type:"joinaggregate",
as:Ca,ops:ha,fields:H,...(void 0!==db?{groupby:db}:{})}}}class Hl extends Ei{clone(){return new Hl(null,Rf(this._stack))}constructor(H,ha){super(H);ub(this,"_stack",void 0);this._stack=ha}static makeFromTransform(H,ha){const {stack:Ca,groupby:db,as:Ab,offset:Pb="zero"}=ha;var nc=[];const Kc=[];if(void 0!==ha.sort)for(const ad of ha.sort)nc.push(ad.field),Kc.push(La(ad.order,"ascending"));nc={field:nc,order:Kc};ha=Oa(Ab)?Ab:t(Ab)?[Ab,Ab+"_end"]:[ha.stack+"_start",ha.stack+"_end"];return new Hl(H,{stackField:Ca,
groupby:db,offset:Pb,sort:nc,facetby:[],as:ha})}static makeFromEncoding(H,ha){var Ca=ha.stack,{encoding:db}=ha;if(!Ca)return null;const {groupbyChannel:Ab,fieldChannel:Pb,offset:nc,impute:Kc}=Ca;let ad;Ab&&(ad=Ge(db[Ab]));Ca=pa(ha);db=ha.encoding.order;db=Jg(db)||rc(db)?sb(db):Ca.reduce((ld,Pd)=>{ld.field.push(Pd);ld.order.push("y"===Pb?"descending":"ascending");return ld},{field:[],order:[]});return new Hl(H,{dimensionFieldDef:ad,stackField:ha.vgField(Pb),facetby:[],stackby:Ca,sort:db,offset:nc,
impute:Kc,as:[ha.vgField(Pb,{suffix:"start",forAs:!0}),ha.vgField(Pb,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(H){this._stack.facetby.push(...H)}dependentFields(){const H=new Set;H.add(this._stack.stackField);this.getGroupbyFields().forEach(H.add,H);this._stack.facetby.forEach(H.add,H);this._stack.sort.field.forEach(H.add,H);return H}producedFields(){return new Set(this._stack.as)}hash(){return"Stack ".concat(O(this._stack))}getGroupbyFields(){const {dimensionFieldDef:H,
impute:ha,groupby:Ca}=this._stack;return H?H.bin?ha?[Cc(H,{binSuffix:"mid"})]:[Cc(H,{}),Cc(H,{binSuffix:"end"})]:[Cc(H)]:null!==Ca&&void 0!==Ca?Ca:[]}assemble(){const H=[],{facetby:ha,dimensionFieldDef:Ca,stackField:db,stackby:Ab,sort:Pb,offset:nc,impute:Kc,as:ad}=this._stack;if(Kc&&Ca){const {band:ld=.5,bin:Pd}=Ca;Pd&&H.push({type:"formula",expr:"".concat(ld,"*")+Cc(Ca,{expr:"datum"})+"+".concat(1-ld,"*")+Cc(Ca,{expr:"datum",binSuffix:"end"}),as:Cc(Ca,{binSuffix:"mid",forAs:!0})});H.push({type:"impute",
field:db,groupby:[...Ab,...ha],key:Cc(Ca,{binSuffix:"mid"}),method:"value",value:0})}H.push({type:"stack",groupby:[...this.getGroupbyFields(),...ha],field:db,sort:Pb,as:ad,offset:nc});return H}}class Am extends Ei{clone(){return new Am(null,Rf(this.transform))}constructor(H,ha){super(H);this.transform=ha}addDimensions(H){this.transform.groupby=ba(this.transform.groupby.concat(H),ha=>ha)}dependentFields(){var H,ha;const Ca=new Set;(null!==(H=this.transform.groupby)&&void 0!==H?H:[]).forEach(Ca.add,
Ca);(null!==(ha=this.transform.sort)&&void 0!==ha?ha:[]).forEach(db=>Ca.add(db.field));this.transform.window.map(db=>db.field).filter(db=>void 0!==db).forEach(Ca.add,Ca);return Ca}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(H){var ha;return null!==(ha=H.as)&&void 0!==ha?ha:Cc(H)}hash(){return"WindowTransform ".concat(O(this.transform))}assemble(){const H=[],ha=[],Ca=[],db=[];for(var Ab of this.transform.window)ha.push(Ab.op),Ca.push(this.getDefaultName(Ab)),
db.push(void 0===Ab.param?null:Ab.param),H.push(void 0===Ab.field?null:Ab.field);Ab=this.transform.frame;const Pb=this.transform.groupby;if(Ab&&null===Ab[0]&&null===Ab[1]&&ha.every(ld=>cb(ld)))return{type:"joinaggregate",as:Ca,ops:ha,fields:H,...(void 0!==Pb?{groupby:Pb}:{})};const nc=[],Kc=[];if(void 0!==this.transform.sort)for(const ld of this.transform.sort){var ad;nc.push(ld.field);Kc.push(null!==(ad=ld.order)&&void 0!==ad?ad:"ascending")}ad=this.transform.ignorePeers;return{type:"window",params:db,
as:Ca,ops:ha,fields:H,sort:{field:nc,order:Kc},...(void 0!==ad?{ignorePeers:ad}:{}),...(void 0!==Pb?{groupby:Pb}:{}),...(void 0!==Ab?{frame:Ab}:{})}}}class yk{constructor(H){ub(this,"signal",void 0);Object.defineProperty(this,"signal",{enumerable:!0,get:H})}static fromName(H,ha){return new yk(()=>H(ha))}}class Rm extends Cl{constructor(H,ha){super({},{name:H});ub(this,"merged",!1);this.setWithExplicit("type",ha)}domainDefinitelyIncludesZero(){return!1!==this.get("zero")?!0:J(this.get("domains"),H=>
Jg(H)&&2===H.length&&0>=H[0]&&0<=H[1])}}const Yn=["range","scheme"],Zn={bins:({model:H,fieldOrDatumDef:ha})=>rc(ha)?We(H,ha):void 0,interpolate:({channel:H,fieldOrDatumDef:ha})=>{ha=ha.type;H=A(["color","fill","stroke"],H)&&"nominal"!==ha?"hcl":void 0;return H},nice:({scaleType:H,channel:ha,fieldOrDatumDef:Ca})=>{var db;H=(null===(db=Ge(Ca))||void 0===db?0:db.bin)||A([le.TIME,le.UTC],H)?void 0:ha in Wc?!0:void 0;return H},padding:({channel:H,scaleType:ha,fieldOrDatumDef:Ca,markDef:db,config:Ab})=>
{a:{var Pb=Ab.scale;Ab=Ab.bar;if(H in Wc){if(ha in uf){if(void 0!==Pb.continuousPadding){H=Pb.continuousPadding;break a}const {type:nc,orient:Kc}=db;if("bar"===nc&&(!rc(Ca)||!Ca.bin&&!Ca.timeUnit)&&("vertical"===Kc&&"x"===H||"horizontal"===Kc&&"y"===H)){H=Ab.continuousBandSize;break a}}if(ha===le.POINT){H=Pb.pointPadding;break a}}H=void 0}return H},paddingInner:({scalePadding:H,channel:ha,markDef:Ca,config:db})=>{if(void 0!==H)H=void 0;else if(ha in Wc){const {bandPaddingInner:Ab,barBandPaddingInner:Pb,
rectBandPaddingInner:nc}=db.scale;H=La(Ab,"bar"===Ca.type?Pb:nc)}else H=void 0;return H},paddingOuter:({scalePadding:H,channel:ha,scaleType:Ca,scalePaddingInner:db,config:Ab})=>{void 0!==H?db=void 0:ha in Wc&&Ca===le.BAND?({bandPaddingOuter:H}=Ab.scale,db=La(H,hd(db)?{signal:"".concat(db.signal,"/2")}:db/2)):db=void 0;return db},reverse:({fieldOrDatumDef:H,scaleType:ha,channel:Ca,config:db})=>{H=rc(H)?H.sort:void 0;db=db.scale;ha="x"===Ca&&void 0!==db.xReverse?ha in Ce&&"descending"===H?hd(db.xReverse)?
{signal:"!".concat(db.xReverse.signal)}:!db.xReverse:db.xReverse:ha in Ce&&"descending"===H?!0:void 0;return ha},zero:({channel:H,fieldOrDatumDef:ha,domain:Ca,markDef:db,scaleType:Ab})=>{a:if(Ca&&"unaggregated"!==Ca&&Ab in Ce){if(Jg(Ca)&&(H=Ca[Ca.length-1],0>=Ca[0]&&0<=H)){Ca=!0;break a}Ca=!1}else if("size"!==H||"quantitative"!==ha.type||Ab in gh)if(rc(ha)&&ha.bin||!A([...Hd,...He],H))Ca=!1;else{const {orient:Pb,type:nc}=db;Ca=A(["bar","area","line","trail"],nc)&&("horizontal"===Pb&&"y"===H||"vertical"===
Pb&&"x"===H)?!1:!0}else Ca=!0;return Ca}},mm=qg((H,ha)=>yg[H]-yg[ha]);class rn{constructor(){ub(this,"nameMap",void 0);this.nameMap={}}rename(H,ha){this.nameMap[H]=ha}has(H){return void 0!==this.nameMap[H]}get(H){for(;this.nameMap[H]&&H!==this.nameMap[H];)H=this.nameMap[H];return H}}class sn{constructor(H,ha,Ca,db,Ab,Pb,nc){var Kc,ad;this.type=ha;this.parent=Ca;this.config=Ab;ub(this,"name",void 0);ub(this,"size",void 0);ub(this,"title",void 0);ub(this,"description",void 0);ub(this,"data",void 0);
ub(this,"transforms",void 0);ub(this,"layout",void 0);ub(this,"scaleNameMap",void 0);ub(this,"projectionNameMap",void 0);ub(this,"signalNameMap",void 0);ub(this,"component",void 0);ub(this,"view",void 0);ub(this,"children",[]);ub(this,"correctDataNames",ld=>{ld.from&&ld.from.data&&(ld.from.data=this.lookupDataSource(ld.from.data));ld.from&&ld.from.facet&&ld.from.facet.data&&(ld.from.facet.data=this.lookupDataSource(ld.from.facet.data));return ld});this.parent=Ca;this.config=Ab;this.view=Wa(nc);this.name=
null!==(Kc=H.name)&&void 0!==Kc?Kc:db;this.title=ne(H.title)?{text:H.title}:H.title?this.initTitle(H.title):void 0;this.scaleNameMap=Ca?Ca.scaleNameMap:new rn;this.projectionNameMap=Ca?Ca.projectionNameMap:new rn;this.signalNameMap=Ca?Ca.signalNameMap:new rn;this.data=H.data;this.description=H.description;this.transforms=jj(null!==(ad=H.transform)&&void 0!==ad?ad:[]);this.layout="layer"===ha||"unit"===ha?{}:y(H,ha,Ab);this.component={data:{sources:Ca?Ca.component.data.sources:[],outputNodes:Ca?Ca.component.data.outputNodes:
{},outputNodeRefCounts:Ca?Ca.component.data.outputNodeRefCounts:{},isFaceted:"facet"in H||Ca&&Ca.component.data.isFaceted&&void 0===H.data},layoutSize:new Cl,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...(Pb?Rf(Pb):{})},selection:null,scales:null,projection:null,axes:{},legends:{}}}initTitle(H){const ha=sf(H),Ca={text:Qe(H.text)};for(const db of ha)Ca[db]=Qe(H[db]);return Ca}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale();
this.parseLayoutSize();this.renameTopLevelLayoutSizeSignal();this.parseSelections();this.parseProjection();this.parseData();this.parseAxesAndHeaders();this.parseLegends();this.parseMarkGroup()}parseScale(){ng(this)}parseProjection(){ab(this)}renameTopLevelLayoutSizeSignal(){"width"!==this.getName("width")&&this.renameSignal(this.getName("width"),"width");"height"!==this.getName("height")&&this.renameSignal(this.getName("height"),"height")}parseLegends(){Ja(this)}assembleGroupStyle(){if("unit"===this.type||
"layer"===this.type){var H,ha;return null!==(H=null===(ha=this.view)||void 0===ha?void 0:ha.style)&&void 0!==H?H:"cell"}}assembleEncodeFromView(H){const {style:ha,...Ca}=H;H={};for(const db of sf(Ca)){const Ab=Ca[db];void 0!==Ab&&(H[db]=Ed(Ab))}return H}assembleGroupEncodeEntry(H){let ha={};this.view&&(ha=this.assembleEncodeFromView(this.view));if(!H&&(this.description&&(ha.description=Ed(this.description)),"unit"===this.type||"layer"===this.type)){var Ca;return{width:this.getSizeSignalRef("width"),
height:this.getSizeSignalRef("height"),...(null!==(Ca=ha)&&void 0!==Ca?Ca:{})}}return E(ha)?void 0:ha}assembleLayout(){if(this.layout){var {spacing:H,...ha}=this.layout,{component:Ca,config:db}=this;var Ab=Ca.layoutHeaders;var Pb={};for(const Kc of Wj){var nc=Ab[Kc];if(null===nc||void 0===nc?0:nc.facetFieldDef){const {titleAnchor:ad,titleOrient:ld}=Rh(["titleAnchor","titleOrient"],nc.facetFieldDef.header,db,Kc);nc=Kk(Kc,ld);const Pd=Jo[nc][ad];void 0!==Pd&&(Pb[nc]=Pd)}}Ab=E(Pb)?void 0:Pb;return{padding:H,
...this.assembleDefaultLayout(),...ha,...(Ab?{titleBand:Ab}:{})}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){var {layoutHeaders:H}=this.component,ha=[];for(var Ca of Wj)if(H[Ca].title){var db=ha,Ab=db.push;var Pb=Ca;var nc=this.component.layoutHeaders[Pb].title,Kc=this.config?this.config:void 0,ad=this.component.layoutHeaders[Pb].facetFieldDef?this.component.layoutHeaders[Pb].facetFieldDef:void 0;const {titleAnchor:bf,titleAngle:Te,titleOrient:xf}=Rh(["titleAnchor","titleAngle","titleOrient"],
ad.header,Kc,Pb);var ld=Kk(Pb,xf),Pd=Aa(Te);Pb={name:"".concat(Pb,"-title"),type:"group",role:"".concat(ld,"-title"),title:{text:nc,...("row"===Pb?{orient:"left"}:{}),style:"guide-title",...vi(Pd,ld),...Ni(ld,Pd,bf),...Dj(Kc,ad,Pb,ro,Jn)}};Ab.call(db,Pb)}for(const bf of il){H=ha;ha=H.concat;db=bf;Ab=this.component.layoutHeaders[db];Ca=[];for(const Te of mn)if(Ab[Te])for(const xf of Ab[Te]){a:{ad=void 0;Pb=db;var Oe=Te,Ae=Ab;if(nc=xf){Kc=null;({facetFieldDef:gf}=Ae);ld=this.config?this.config:void 0;
gf&&nc.labels&&({labelOrient:Pd}=Rh(["labelOrient"],gf.header,ld,Pb),"row"===Pb&&!A(["top","bottom"],Pd)||"column"===Pb&&!A(["left","right"],Pd))&&(Kc=Wf(gf,Pb,ld));Pd=fg(this)&&!Pf(this.facet);const Hg=nc.axes,Df=0<(null===Hg||void 0===Hg?void 0:Hg.length);if(Kc||Df){const yf="row"===Pb?"height":"width";ld=this.getName("".concat(Pb,"_").concat(Oe));Oe="".concat(Pb,"-").concat(Oe);if(Ae.facetFieldDef){Ae={data:this.getName(Pb+"_domain")};{const {sort:Wg}=gf;var gf=he(Wg)?{field:Cc(Wg,{expr:"datum"}),
order:null!==(ad=Wg.order)&&void 0!==ad?ad:"ascending"}:Jg(Wg)?{field:Mi(gf,Pb,{expr:"datum"}),order:"ascending"}:{field:Cc(gf,{expr:"datum"}),order:null!==Wg&&void 0!==Wg?Wg:"ascending"}}ad={from:Ae,sort:gf}}else ad={};Pb={name:ld,type:"group",role:Oe,...ad,...(Df&&Pd?{from:{data:this.getName("facet_domain_".concat(Pb))}}:{}),...(Kc?{title:Kc}:{}),...(nc.sizeSignal?{encode:{update:{[yf]:nc.sizeSignal}}}:{}),...(Df?{axes:Hg}:{})};break a}}Pb=null}null!=Pb&&Ca.push(Pb)}ha=ha.call(H,Ca)}return ha}assembleAxes(){return hj(this.component.axes,
this.config)}assembleLegends(){return ca(this)}assembleProjections(){var H=Fh(this)||mh(this)?ya(this):Ka(this);return H}assembleTitle(){var H;const {encoding:ha,...Ca}=null!==(H=this.title)&&void 0!==H?H:{};H={...yd(this.config.title).nonMark,...Ca,...(ha?{encode:{update:ha}}:{})};if(H.text){if(A(["unit","layer"],this.type)){if(A(["middle",void 0],H.anchor)){var db;H.frame=null!==(db=H.frame)&&void 0!==db?db:"group"}}else{var Ab;H.anchor=null!==(Ab=H.anchor)&&void 0!==Ab?Ab:"start"}return E(H)?void 0:
H}}assembleGroup(H=[]){const ha={};H=H.concat(this.assembleSignals());0<H.length&&(ha.signals=H);if(H=this.assembleLayout())ha.layout=H;ha.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());H=!this.parent||fg(this.parent)?Mf(this):[];0<H.length&&(ha.scales=H);H=this.assembleAxes();0<H.length&&(ha.axes=H);H=this.assembleLegends();0<H.length&&(ha.legends=H);return ha}getName(H){return W((this.name?this.name+"_":"")+H)}getDataName(H){return this.getName(Si[H].toLowerCase())}requestDataName(H){H=
this.getDataName(H);const ha=this.component.data.outputNodeRefCounts;ha[H]=(ha[H]||0)+1;return H}getSizeSignalRef(H){if(fg(this.parent)){var ha=wk(H),Ca=zb(ha);if((ha=this.component.scales[Ca])&&!ha.merged){var db=ha.get("type");const Ab=ha.get("range");if(db in qe&&ge(Ab)){H=ha.get("name");db=ig(this,Ca);if(db=ag(db))return Ca=Cc({aggregate:"distinct",field:db},{expr:"datum"}),{signal:Hi(H,ha,Ca)};Zc(ee(Ca));return null}}}return{signal:this.signalNameMap.get(this.getName(H))}}lookupDataSource(H){const ha=
this.component.data.outputNodes[H];return ha?ha.getSource():H}getSignalName(H){return this.signalNameMap.get(H)}renameSignal(H,ha){this.signalNameMap.rename(H,ha)}renameScale(H,ha){this.scaleNameMap.rename(H,ha)}renameProjection(H,ha){this.projectionNameMap.rename(H,ha)}scaleName(H,ha){if(ha)return this.getName(H);if(yl[H]&&el[H]&&this.component.scales[H]||this.scaleNameMap.has(this.getName(H)))return this.scaleNameMap.get(this.getName(H))}projectionName(H){if(H)return this.getName("projection");
if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(H){if(!this.component.scales)throw Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const ha=this.component.scales[H];return ha&&!ha.merged?ha:this.parent?this.parent.getScaleComponent(H):void 0}getSelectionComponent(H,
ha){let Ca=this.component.selection[H];!Ca&&this.parent&&(Ca=this.parent.getSelectionComponent(H,ha));if(!Ca)throw Error('Cannot find a selection named "'.concat(ha,'".'));return Ca}hasAxisOrientSignalRef(){var H,ha;return(null===(H=this.component.axes.x)||void 0===H?void 0:H.some(Ca=>Ca.hasOrientSignalRef()))||(null===(ha=this.component.axes.y)||void 0===ha?void 0:ha.some(Ca=>Ca.hasOrientSignalRef()))}}class $n extends sn{vgField(H,ha={}){if(H=this.fieldDef(H))return Cc(H,ha)}reduceFieldDef(H,ha){return ce(this.getMapping(),
(Ca,db,Ab)=>(db=Ge(db))?H(Ca,db,Ab):Ca,ha)}forEachFieldDef(H,ha){Xd(this.getMapping(),(Ca,db)=>{(Ca=Ge(Ca))&&H(Ca,db)},ha)}}class tn extends Ei{clone(){return new tn(null,Rf(this.transform))}constructor(H,ha){var Ca,db,Ab;super(H);this.transform=ha;this.transform=Rf(ha);H=null!==(Ca=this.transform.as)&&void 0!==Ca?Ca:[void 0,void 0];this.transform.as=[null!==(db=H[0])&&void 0!==db?db:"value",null!==(Ab=H[1])&&void 0!==Ab?Ab:"density"]}dependentFields(){var H;return new Set([this.transform.density,
...(null!==(H=this.transform.groupby)&&void 0!==H?H:[])])}producedFields(){return new Set(this.transform.as)}hash(){return"DensityTransform ".concat(O(this.transform))}assemble(){const {density:H,...ha}=this.transform;return{type:"kde",field:H,...ha}}}class Sm extends Ei{clone(){return new Sm(null,{...this.filter})}constructor(H,ha){super(H);this.filter=ha}static make(H,ha){const {config:Ca,mark:db,markDef:Ab}=ha;if("filter"!==Uf("invalid",Ab,Ca))return null;const Pb=ha.reduceFieldDef((nc,Kc,ad)=>
{(ad=!!el[ad]&&ha.getScaleComponent(ad))&&ad.get("type")in Ce&&"count"!==Kc.aggregate&&!Ha(db)&&(nc[Kc.field]=Kc);return nc},{});return sf(Pb).length?new Sm(H,Pb):null}dependentFields(){return new Set(sf(this.filter))}producedFields(){return new Set}hash(){return"FilterInvalid ".concat(O(this.filter))}assemble(){const H=sf(this.filter).reduce((ha,Ca)=>{Ca=this.filter[Ca];const db=Cc(Ca,{expr:"datum"});null!==Ca&&("temporal"===Ca.type?ha.push("(isDate(".concat(db,") || (isValid(").concat(db,") \x26\x26 isFinite(+").concat(db,
")))")):"quantitative"===Ca.type&&(ha.push("isValid(".concat(db,")")),ha.push("isFinite(+".concat(db,")"))));return ha},[]);return 0<H.length?{type:"filter",expr:H.join(" \x26\x26 ")}:null}}class Bm extends Ei{clone(){return new Bm(this.parent,Rf(this.transform))}constructor(H,ha){super(H);this.transform=ha;this.transform=Rf(ha);const {flatten:Ca,as:db=[]}=this.transform;this.transform.as=Ca.map((Ab,Pb)=>{var nc;return null!==(nc=db[Pb])&&void 0!==nc?nc:Ab})}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return"FlattenTransform ".concat(O(this.transform))}assemble(){const {flatten:H,
as:ha}=this.transform;return{type:"flatten",fields:H,as:ha}}}class Tm extends Ei{clone(){return new Tm(null,Rf(this.transform))}constructor(H,ha){var Ca,db,Ab;super(H);this.transform=ha;this.transform=Rf(ha);H=null!==(Ca=this.transform.as)&&void 0!==Ca?Ca:[void 0,void 0];this.transform.as=[null!==(db=H[0])&&void 0!==db?db:"key",null!==(Ab=H[1])&&void 0!==Ab?Ab:"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return"FoldTransform ".concat(O(this.transform))}assemble(){const {fold:H,
as:ha}=this.transform;return{type:"fold",fields:H,as:ha}}}class Cm extends Ei{clone(){return new Cm(null,Rf(this.fields),this.geojson,this.signal)}static parseAll(H,ha){if(ha.component.projection&&!ha.component.projection.isFit)return H;let Ca=0;for(var db of[["longitude","latitude"],["longitude2","latitude2"]]){const Ab=db.map(Pb=>{Pb=Me(ha.encoding[Pb]);return rc(Pb)?Pb.field:$a(Pb)?{expr:"".concat(Pb.datum)}:ed(Pb)?{expr:"".concat(Pb.value)}:void 0});if(Ab[0]||Ab[1])H=new Cm(H,Ab,null,ha.getName("geojson_".concat(Ca++)))}ha.channelHasField("shape")&&
(db=ha.typedFieldDef("shape"),"geojson"===db.type&&(H=new Cm(H,null,db.field,ha.getName("geojson_".concat(Ca++)))));return H}constructor(H,ha,Ca,db){super(H);this.fields=ha;this.geojson=Ca;this.signal=db}dependentFields(){var H;const ha=(null!==(H=this.fields)&&void 0!==H?H:[]).filter(t);return new Set([...(this.geojson?[this.geojson]:[]),...ha])}producedFields(){return new Set}hash(){return"GeoJSON ".concat(this.geojson," ").concat(this.signal," ").concat(O(this.fields))}assemble(){return{type:"geojson",
...(this.fields?{fields:this.fields}:{}),...(this.geojson?{geojson:this.geojson}:{}),signal:this.signal}}}class Um extends Ei{clone(){return new Um(null,this.projection,Rf(this.fields),Rf(this.as))}constructor(H,ha,Ca,db){super(H);this.projection=ha;this.fields=Ca;this.as=db}static parseAll(H,ha){if(!ha.projectionName())return H;for(const Ca of[["longitude","latitude"],["longitude2","latitude2"]]){const db=Ca.map(Pb=>{Pb=Me(ha.encoding[Pb]);return rc(Pb)?Pb.field:$a(Pb)?{expr:"".concat(Pb.datum)}:
ed(Pb)?{expr:"".concat(Pb.value)}:void 0}),Ab="longitude2"===Ca[0]?"2":"";if(db[0]||db[1])H=new Um(H,ha.projectionName(),db,[ha.getName("x"+Ab),ha.getName("y"+Ab)])}return H}dependentFields(){return new Set(this.fields.filter(t))}producedFields(){return new Set(this.as)}hash(){return"Geopoint ".concat(this.projection," ").concat(O(this.fields)," ").concat(O(this.as))}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Vl extends Ei{clone(){return new Vl(null,
Rf(this.transform))}constructor(H,ha){super(H);this.transform=ha}dependentFields(){var H;return new Set([this.transform.impute,this.transform.key,...(null!==(H=this.transform.groupby)&&void 0!==H?H:[])])}producedFields(){return new Set([this.transform.impute])}processSequence(H){const {start:ha=0,stop:Ca,step:db}=H;H=[ha,Ca,...(db?[db]:[])].join();return{signal:"sequence(".concat(H,")")}}static makeFromTransform(H,ha){return new Vl(H,ha)}static makeFromEncoding(H,ha){const Ca=ha.encoding;var db=Ca.x;
const Ab=Ca.y;if(rc(db)&&rc(Ab)){const Pb=db.impute?db:Ab.impute?Ab:void 0;if(void 0===Pb)return;db=db.impute?Ab:Ab.impute?db:void 0;const {method:nc,value:Kc,frame:ad,keyvals:ld}=Pb.impute;ha=De(ha.mark,Ca);return new Vl(H,{impute:Pb.field,key:db.field,...(nc?{method:nc}:{}),...(void 0!==Kc?{value:Kc}:{}),...(ad?{frame:ad}:{}),...(void 0!==ld?{keyvals:ld}:{}),...(ha.length?{groupby:ha}:{})})}return null}hash(){return"Impute ".concat(O(this.transform))}assemble(){const {impute:H,key:ha,keyvals:Ca,
method:db,groupby:Ab,value:Pb,frame:nc=[null,null]}=this.transform,Kc={type:"impute",field:H,key:ha,...(Ca?{keyvals:void 0!==(null===Ca||void 0===Ca?void 0:Ca.stop)?this.processSequence(Ca):Ca}:{}),method:"value",...(Ab?{groupby:Ab}:{}),value:db&&"value"!==db?null:Pb};if(db&&"value"!==db){const ad={type:"window",as:["imputed_".concat(H,"_value")],ops:[db],fields:[H],frame:nc,ignorePeers:!1,...(Ab?{groupby:Ab}:{})},ld={type:"formula",expr:"datum.".concat(H," \x3d\x3d\x3d null ? datum.imputed_").concat(H,
"_value : datum.").concat(H),as:H};return[Kc,ad,ld]}return[Kc]}}class un extends Ei{clone(){return new un(null,Rf(this.transform))}constructor(H,ha){var Ca,db,Ab;super(H);this.transform=ha;this.transform=Rf(ha);H=null!==(Ca=this.transform.as)&&void 0!==Ca?Ca:[void 0,void 0];this.transform.as=[null!==(db=H[0])&&void 0!==db?db:ha.on,null!==(Ab=H[1])&&void 0!==Ab?Ab:ha.loess]}dependentFields(){var H;return new Set([this.transform.loess,this.transform.on,...(null!==(H=this.transform.groupby)&&void 0!==
H?H:[])])}producedFields(){return new Set(this.transform.as)}hash(){return"LoessTransform ".concat(O(this.transform))}assemble(){const {loess:H,on:ha,...Ca}=this.transform;return{type:"loess",x:ha,y:H,...Ca}}}class Vm extends Ei{clone(){return new Vm(null,Rf(this.transform),this.secondary)}constructor(H,ha,Ca){super(H);this.transform=ha;this.secondary=Ca}static make(H,ha,Ca,db){const Ab=ha.component.data.sources,{from:Pb}=Ca;var nc=null;if("data"in Pb)nc=ah(Pb.data,Ab),nc||(nc=new Tl(Pb.data),Ab.push(nc)),
db=ha.getName("lookup_".concat(db)),nc=new Nj(nc,db,Si.Lookup,ha.component.data.outputNodeRefCounts),ha.component.data.outputNodes[db]=nc;else if("selection"in Pb&&(db=Pb.selection,Ca={as:db,...Ca},nc=ha.getSelectionComponent(W(db),db).materialized,!nc))throw Error('Cannot define and lookup the "'.concat(db,'" selection in the same view. ')+"Try moving the lookup into a second, layered view?");return new Vm(H,Ca,nc.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?
S(this.transform.as):this.transform.from.fields)}hash(){return"Lookup ".concat(O({transform:this.transform,secondary:this.secondary}))}assemble(){if(this.transform.from.fields)var H={values:this.transform.from.fields,...(this.transform.as?{as:S(this.transform.as)}:{})};else H=this.transform.as,t(H)||(Zc('If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.'),H="_lookup"),H={as:[H]};return{type:"lookup",from:this.secondary,
key:this.transform.from.key,fields:[this.transform.lookup],...H,...(this.transform.default?{default:this.transform.default}:{})}}}class nm extends Ei{clone(){return new nm(null,Rf(this.transform))}constructor(H,ha){var Ca,db,Ab;super(H);this.transform=ha;this.transform=Rf(ha);H=null!==(Ca=this.transform.as)&&void 0!==Ca?Ca:[void 0,void 0];this.transform.as=[null!==(db=H[0])&&void 0!==db?db:"prob",null!==(Ab=H[1])&&void 0!==Ab?Ab:"value"]}dependentFields(){var H;return new Set([this.transform.quantile,
...(null!==(H=this.transform.groupby)&&void 0!==H?H:[])])}producedFields(){return new Set(this.transform.as)}hash(){return"QuantileTransform ".concat(O(this.transform))}assemble(){const {quantile:H,...ha}=this.transform;return{type:"quantile",field:H,...ha}}}class vn extends Ei{clone(){return new vn(null,Rf(this.transform))}constructor(H,ha){var Ca,db,Ab;super(H);this.transform=ha;this.transform=Rf(ha);H=null!==(Ca=this.transform.as)&&void 0!==Ca?Ca:[void 0,void 0];this.transform.as=[null!==(db=H[0])&&
void 0!==db?db:ha.on,null!==(Ab=H[1])&&void 0!==Ab?Ab:ha.regression]}dependentFields(){var H;return new Set([this.transform.regression,this.transform.on,...(null!==(H=this.transform.groupby)&&void 0!==H?H:[])])}producedFields(){return new Set(this.transform.as)}hash(){return"RegressionTransform ".concat(O(this.transform))}assemble(){const {regression:H,on:ha,...Ca}=this.transform;return{type:"regression",x:ha,y:H,...Ca}}}class Dm extends Ei{clone(){return new Dm(null,Rf(this.transform))}constructor(H,
ha){super(H);this.transform=ha}addDimensions(H){var ha;this.transform.groupby=ba((null!==(ha=this.transform.groupby)&&void 0!==ha?ha:[]).concat(H),Ca=>Ca)}producedFields(){}dependentFields(){var H;return new Set([this.transform.pivot,this.transform.value,...(null!==(H=this.transform.groupby)&&void 0!==H?H:[])])}hash(){return"PivotTransform ".concat(O(this.transform))}assemble(){const {pivot:H,value:ha,groupby:Ca,limit:db,op:Ab}=this.transform;return{type:"pivot",field:H,value:ha,...(void 0!==db?{limit:db}:
{}),...(void 0!==Ab?{op:Ab}:{}),...(void 0!==Ca?{groupby:Ca}:{})}}}class wn extends Ei{clone(){return new wn(null,Rf(this.transform))}constructor(H,ha){super(H);this.transform=ha}dependentFields(){return new Set}producedFields(){return new Set}hash(){return"SampleTransform ".concat(O(this.transform))}assemble(){return{type:"sample",size:this.transform.sample}}}class Em extends $n{constructor(H,ha,Ca,db){super(H,"facet",ha,Ca,db,H.resolve);ub(this,"facet",void 0);ub(this,"child",void 0);ub(this,"children",
void 0);this.child=Vi(H.spec,this,this.getName("child"),void 0,db);this.children=[this.child];this.facet=this.initFacet(H.facet)}initFacet(H){if(!Pf(H))return{facet:this.initFacetFieldDef(H,"facet")};var ha=sf(H);const Ca={};for(const db of ha){if(!A(["row","column"],db)){Zc(jd(db,"facet"));break}ha=H[db];if(void 0===ha.field){Zc(Dc(ha,db));break}Ca[db]=this.initFacetFieldDef(ha,db)}return Ca}initFacetFieldDef(H,ha){const {header:Ca,...db}=H;H=lb(db,ha);Ca&&(H.header=Wa(Ca));return H}channelHasField(H){return!!this.facet[H]}fieldDef(H){return this.facet[H]}parseData(){this.component.data=
kl(this);this.child.parseData()}parseLayoutSize(){al(this)}parseSelections(){this.child.parseSelections();this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders();for(const Ab of Wj){var H=void 0,ha=Ab;const {facet:Pb,config:nc,child:Kc,component:ad}=this;if(this.channelHasField(ha)){const ld=Pb[ha];var Ca=xj("title",null,nc,ha);Ca=we(ld,nc,{allowDisabling:!0,includeDefault:void 0===Ca||!!Ca});Kc.component.layoutHeaders[ha].title&&
(Ca=Jg(Ca)?Ca.join(", "):Ca,Ca+=" / "+Kc.component.layoutHeaders[ha].title,Kc.component.layoutHeaders[ha].title=null);var db=xj("labelOrient",ld,nc,ha);const Pd=null!==(H=ld.header)&&void 0!==H?H:{};H=La(Pd.labels,nc.header.labels,!0);db=A(["bottom","right"],db)?"footer":"header";ad.layoutHeaders[ha]={title:Ca,facetFieldDef:ld,[db]:"facet"===ha?[]:[Ui(this,ha,H)]}}}Lk(this,"x");Lk(this,"y")}assembleSelectionTopLevelSignals(H){return this.child.assembleSelectionTopLevelSignals(H)}assembleSignals(){this.child.assembleSignals();
return[]}assembleSelectionData(H){return this.child.assembleSelectionData(H)}getHeaderLayoutMixins(){const H={};for(const nc of Wj)for(const Kc of mn){const ad=this.component.layoutHeaders[nc];var ha=ad[Kc],{facetFieldDef:Ca}=ad;if(Ca&&(Ca=xj("titleOrient",Ca.header,this.config,nc),A(["right","bottom"],Ca))){var db;Ca=Kk(nc,Ca);H.titleAnchor=null!==(db=H.titleAnchor)&&void 0!==db?db:{};H.titleAnchor[Ca]="end"}if(null===ha||void 0===ha?0:ha[0]){ha="row"===nc?"height":"width";Ca="header"===Kc?"headerBand":
"footerBand";if("facet"!==nc&&!this.child.component.layoutSize.get(ha)){var Ab;H[Ca]=null!==(Ab=H[Ca])&&void 0!==Ab?Ab:{};H[Ca][nc]=.5}if(ad.title){var Pb;H.offset=null!==(Pb=H.offset)&&void 0!==Pb?Pb:{};H.offset["row"===nc?"rowTitle":"columnTitle"]=10}}}return H}assembleDefaultLayout(){const {column:H,row:ha}=this.facet,Ca=H?this.columnDistinctSignal():ha?1:void 0;let db="all";ha||"independent"!==this.component.resolve.scale.x?H||"independent"!==this.component.resolve.scale.y||(db="none"):db="none";
return{...this.getHeaderLayoutMixins(),...(Ca?{columns:Ca}:{}),bounds:"full",align:db}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof Em)){const H=this.getName("column_domain");return{signal:"length(data('".concat(H,"'))")}}}assembleGroup(H){return this.parent&&this.parent instanceof Em?{...(this.channelHasField("column")?{encode:{update:{columns:{field:Cc(this.facet.column,{prefix:"distinct"})}}}}:{}),...super.assembleGroup(H)}:
super.assembleGroup(H)}getCardinalityAggregateForChild(){const H=[],ha=[],Ca=[];if(this.child instanceof Em){if(this.child.channelHasField("column")){var db=Cc(this.child.facet.column);H.push(db);ha.push("distinct");Ca.push("distinct_".concat(db))}}else for(db of Hd){var Ab=this.child.component.scales[db];if(Ab&&!Ab.merged){var Pb=Ab.get("type");Ab=Ab.get("range");Pb in qe&&ge(Ab)&&(Pb=ig(this.child,db),(Pb=ag(Pb))?(H.push(Pb),ha.push("distinct"),Ca.push("distinct_".concat(Pb))):Zc(ee(db)))}}return{fields:H,
ops:ha,as:Ca}}assembleFacet(){const {name:H,data:ha}=this.component.data.facetRoot,{row:Ca,column:db}=this.facet,{fields:Ab,ops:Pb,as:nc}=this.getCardinalityAggregateForChild(),Kc=[];for(var ad of Wj){var ld=this.facet[ad];if(ld){Kc.push(Cc(ld));const {bin:Pd,sort:Oe}=ld;Db(Pd)&&Kc.push(Cc(ld,{binSuffix:"end"}));if(he(Oe)){const {field:Ae,op:gf="min"}=Oe;ld=Sk(ld,Oe);Ca&&db?(Ab.push(ld),Pb.push("max")):(Ab.push(Ae),Pb.push(gf));nc.push(ld)}else Jg(Oe)&&(ld=Mi(ld,ad),Ab.push(ld),Pb.push("max"),nc.push(ld))}}ad=
!!Ca&&!!db;return{name:H,data:ha,groupby:Kc,...(ad||0<Ab.length?{aggregate:{...(ad?{cross:ad}:{}),...(Ab.length?{fields:Ab,ops:Pb,as:nc}:{})}}:{})}}facetSortFields(H){var {facet:ha}=this;return(ha=ha[H])?he(ha.sort)?[Sk(ha,ha.sort,{expr:"datum"})]:Jg(ha.sort)?[Mi(ha,H,{expr:"datum"})]:[Cc(ha,{expr:"datum"})]:[]}facetSortOrder(H){const {facet:ha}=this;return(H=ha[H])?({sort:H}=H,[(he(H)?H.order:!Jg(H)&&H)||"ascending"]):[]}assembleLabelTitle(){const {facet:H,config:ha}=this;if(H.facet)return Wf(H.facet,
"facet",ha);const Ca={row:["top","bottom"],column:["left","right"]};for(const Ab of il)if(H[Ab]){var db;const Pb=xj("labelOrient",null===(db=H[Ab])||void 0===db?void 0:db.header,ha,Ab);if(A(Ca[Ab],Pb))return Wf(H[Ab],Ab,ha)}}assembleMarks(){const {child:H}=this,ha=th(this.component.data.facetRoot),Ca=H.assembleGroupEncodeEntry(!1),db=this.assembleLabelTitle()||H.assembleTitle(),Ab=H.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...(db?{title:db}:{}),...(Ab?{style:Ab}:{}),from:{facet:this.assembleFacet()},
sort:{field:Wj.map(Pb=>this.facetSortFields(Pb)).flat(),order:Wj.map(Pb=>this.facetSortOrder(Pb)).flat()},...(0<ha.length?{data:ha}:{}),...(Ca?{encode:{update:Ca}}:{}),...H.assembleGroup(Bk(this,[]))}]}getMapping(){return this.facet}}class xn extends sn{constructor(H,ha,Ca,db){var Ab,Pb,nc,Kc;super(H,"concat",ha,Ca,db,H.resolve);ub(this,"children",void 0);"shared"!==(null===(Ab=H.resolve)||void 0===Ab?void 0:null===(Pb=Ab.axis)||void 0===Pb?void 0:Pb.x)&&"shared"!==(null===(nc=H.resolve)||void 0===
nc?void 0:null===(Kc=nc.axis)||void 0===Kc?void 0:Kc.y)||Zc("Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).");this.children=this.getChildren(H).map((ad,ld)=>Vi(ad,this,this.getName("concat_"+ld),void 0,db))}parseData(){this.component.data=kl(this);for(const H of this.children)H.parseData()}parseSelections(){this.component.selection={};for(const H of this.children){H.parseSelections();for(const ha of sf(H.component.selection))this.component.selection[ha]=
H.component.selection[ha]}}parseMarkGroup(){for(const H of this.children)H.parseMarkGroup()}parseAxesAndHeaders(){for(const H of this.children)H.parseAxesAndHeaders()}getChildren(H){return"vconcat"in H?H.vconcat:"hconcat"in H?H.hconcat:H.concat}parseLayoutSize(){al(this);const H=void 0===this.layout.columns?"height":"childHeight";hl(this,1===this.layout.columns?"width":"childWidth");hl(this,H)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(H){return this.children.reduce((ha,Ca)=>Ca.assembleSelectionTopLevelSignals(ha),
H)}assembleSignals(){this.children.forEach(H=>H.assembleSignals());return[]}assembleLayoutSignals(){const H=Dk(this);for(const ha of this.children)H.push(...ha.assembleLayoutSignals());return H}assembleSelectionData(H){return this.children.reduce((ha,Ca)=>Ca.assembleSelectionData(ha),H)}assembleMarks(){return this.children.map(H=>{const ha=H.assembleTitle(),Ca=H.assembleGroupStyle(),db=H.assembleGroupEncodeEntry(!1);return{type:"group",name:H.getName("group"),...(ha?{title:ha}:{}),...(Ca?{style:Ca}:
{}),...(db?{encode:{update:db}}:{}),...H.assembleGroup()}})}assembleDefaultLayout(){const H=this.layout.columns;return{...(null!=H?{columns:H}:{}),bounds:"full",align:"each"}}}const yn=sf({disable:1,gridScale:1,scale:1,...Yh,labelExpr:1,encode:1});class ao extends Cl{constructor(H={},ha={},Ca=!1){super();this.explicit=H;this.implicit=ha;this.mainExtracted=Ca}clone(){return new ao(Rf(this.explicit),Rf(this.implicit),this.mainExtracted)}hasAxisPart(H){if("axis"===H)return!0;if("grid"===H||"title"===
H)return!!this.get(H);H=this.get(H);return!(!1===H||null===H)}hasOrientSignalRef(){return hd(this.explicit.orient)}}const Ro={bottom:"top",top:"bottom",left:"right",right:"left"},bo=new Set("grid translate format formatType orient labelExpr tickCount position tickMinStep".split(" ")),Wm={arc:{vgMark:"arc",encodeEntry:H=>({...cj(H,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Vh("x",H,{defaultPos:"mid"}),...Vh("y",H,{defaultPos:"mid"}),...Th(H,
"radius","arc"),...Th(H,"theta","arc")})},area:{vgMark:"area",encodeEntry:H=>({...cj(H,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...ai("x",H,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"horizontal"===H.markDef.orient}),...ai("y",H,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:"vertical"===H.markDef.orient}),...Kh(H)})},bar:{vgMark:"rect",encodeEntry:H=>({...cj(H,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",
size:"ignore",theta:"ignore"}),...Th(H,"x","bar"),...Th(H,"y","bar")})},circle:{vgMark:"symbol",encodeEntry:H=>Wi(H,"circle")},geoshape:{vgMark:"shape",encodeEntry:H=>({...cj(H,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:H=>{var {encoding:ha}=H;ha=ha.shape;return[{type:"geoshape",projection:H.projectionName(),...(ha&&rc(ha)&&"geojson"===ha.type?{field:Cc(ha,{expr:"datum"})}:{})}]}},image:{vgMark:"image",encodeEntry:H=>({...cj(H,
{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Th(H,"x","image"),...Th(H,"y","image"),...qj(H,"url")})},line:{vgMark:"line",encodeEntry:H=>({...cj(H,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...Vh("x",H,{defaultPos:"mid"}),...Vh("y",H,{defaultPos:"mid"}),...wi("size",H,{vgChannel:"strokeWidth"}),...Kh(H)})},point:{vgMark:"symbol",encodeEntry:H=>Wi(H)},rect:{vgMark:"rect",encodeEntry:H=>({...cj(H,
{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Th(H,"x","rect"),...Th(H,"y","rect")})},rule:{vgMark:"rule",encodeEntry:H=>{var {markDef:ha}=H;ha=ha.orient;return H.encoding.x||H.encoding.y||H.encoding.latitude||H.encoding.longitude?{...cj(H,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ai("x",H,{defaultPos:"horizontal"===ha?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"vertical"!==ha}),...ai("y",
H,{defaultPos:"vertical"===ha?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:"horizontal"!==ha}),...wi("size",H,{vgChannel:"strokeWidth"})}:{}}},square:{vgMark:"symbol",encodeEntry:H=>Wi(H,"square")},text:{vgMark:"text",encodeEntry:H=>{var {config:ha}=H,Ca={...cj(H,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"})},db={...Vh("x",H,{defaultPos:"mid"})},Ab={...Vh("y",H,{defaultPos:"mid"})},Pb={...qj(H)},nc={...wi("size",H,{vgChannel:"fontSize"})},Kc=
{...wi("angle",H)};var ad=void 0===Uf("align",H.markDef,ha)?"center":void 0;ad={...oi("align",ad)};ha=void 0===Uf("baseline",H.markDef,ha)?"middle":void 0;return{...Ca,...db,...Ab,...Pb,...nc,...Kc,...ad,...oi("baseline",ha),...Vh("radius",H,{defaultPos:null,isMidPoint:!0}),...Vh("theta",H,{defaultPos:null,isMidPoint:!0})}}},tick:{vgMark:"rect",encodeEntry:H=>{const {config:ha,markDef:Ca}=H;var db=Ca.orient;const Ab="horizontal"===db?"width":"height";db="horizontal"===db?"height":"width";var Pb={...cj(H,
{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"})},nc={...Vh("x",H,{defaultPos:"mid",vgChannel:"xc"})},Kc={...Vh("y",H,{defaultPos:"mid",vgChannel:"yc"})},ad;{const {config:Pd,markDef:Oe}=H;var {orient:ld}=Oe;const Ae="horizontal"===ld?"width":"height";ld=H.getScaleComponent("horizontal"===ld?"x":"y");const gf=null!==(ad=Uf("size",Oe,Pd,{vgChannel:Ae}))&&void 0!==ad?ad:Pd.tick.bandSize;ad=void 0!==gf?gf:(ad=ld?ld.get("range"):void 0)&&ge(ad)&&F(ad.step)?
3*ad.step/4:3*fb(Pd.view,Ae)/4}return{...Pb,...nc,...Kc,...wi("size",H,{defaultValue:ad,vgChannel:Ab}),[db]:Ed(Uf("thickness",Ca,ha))}}},trail:{vgMark:"trail",encodeEntry:H=>({...cj(H,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...Vh("x",H,{defaultPos:"mid"}),...Vh("y",H,{defaultPos:"mid"}),...wi("size",H),...Kh(H)})}};class Fm extends $n{constructor(H,ha,Ca,db={},Ab){super(H,"unit",ha,Ca,Ab,void 0,Uc(H)?H.view:void 0);ub(this,"markDef",void 0);
ub(this,"encoding",void 0);ub(this,"specifiedScales",{});ub(this,"stack",void 0);ub(this,"specifiedAxes",{});ub(this,"specifiedLegends",{});ub(this,"specifiedProjection",{});ub(this,"selection",{});ub(this,"children",[]);var Pb=m(H.mark)?{...H.mark}:{type:H.mark};ha=Pb.type;void 0===Pb.filled&&(Pb.filled=Kl(Pb,Ab,{graticule:H.data&&"graticule"in H.data}));Ca=this.encoding=fd(H.encoding||{},ha,Pb.filled,Ab);Pb=Wa(Pb);var nc=Uf("orient",Pb,Ab);Pb.orient=Pl(Pb.type,Ca,nc);void 0!==nc&&nc!==Pb.orient&&
(nc='Specified orient "'.concat(Pb.orient,'" overridden with "').concat(nc,'".'),Zc(nc));if("bar"===Pb.type&&Pb.orient&&(nc=Uf("cornerRadiusEnd",Pb,Ab),void 0!==nc)){const ad="horizontal"===Pb.orient&&Ca.x2||"vertical"===Pb.orient&&Ca.y2?["cornerRadius"]:oo[Pb.orient];for(var Kc of ad)Pb[Kc]=nc;void 0!==Pb.cornerRadiusEnd&&delete Pb.cornerRadiusEnd}void 0===Uf("opacity",Pb,Ab)&&(Kc=A([hm,bn,um,cn],Pb.type)&&!Fc(Ca)?.7:void 0,Pb.opacity=Kc);void 0===Uf("cursor",Pb,Ab)&&(Ab=Ca.href||Pb.href||Uf("href",
Pb,Ab)?"pointer":Pb.cursor,Pb.cursor=Ab);this.markDef=Pb;this.size=lk({encoding:Ca,size:Uc(H)?{...db,...(H.width?{width:H.width}:{}),...(H.height?{height:H.height}:{})}:db});this.stack=Pe(ha,Ca);this.specifiedScales=this.initScales(ha,Ca);this.specifiedAxes=this.initAxes(Ca);this.specifiedLegends=this.initLegends(Ca);this.specifiedProjection=H.projection;this.selection=H.selection}get hasProjection(){const {encoding:H}=this,ha=this.mark===Dn,Ca=H&&sk.some(db=>cc(H[db]));return ha||Ca}scaleDomain(H){return(H=
this.specifiedScales[H])?H.domain:void 0}axis(H){return this.specifiedAxes[H]}legend(H){return this.specifiedLegends[H]}initScales(H,ha){return sl.reduce((Ca,db)=>{const Ab=Me(ha[db]);if(Ab){var Pb;Ca[db]=this.initScale(null!==(Pb=Ab.scale)&&void 0!==Pb?Pb:{})}return Ca},{})}initScale(H){const {domain:ha,range:Ca}=H;H=Wa(H);Jg(ha)&&(H.domain=ha.map(Qe));Jg(Ca)&&(H.range=Ca.map(Qe));return H}initAxes(H){return Hd.reduce((ha,Ca)=>{var db=H[Ca];if(cc(db)||"x"===Ca&&cc(H.x2)||"y"===Ca&&cc(H.y2))db=cc(db)?
db.axis:void 0,ha[Ca]=db?this.initAxis({...db}):db;return ha},{})}initAxis(H){var ha=sf(H);const Ca={};for(const db of ha)ha=H[db],Ca[db]=Qa(ha)?Le(ha):Qe(ha);return Ca}initLegends(H){return Al.reduce((ha,Ca)=>{var db=Me(H[Ca]),Ab;if(Ab=db)a:{switch(Ca){case "color":case "fill":case "stroke":case "size":case "shape":case "opacity":case "strokeWidth":case "strokeDash":Ab=!0;break a;case "fillOpacity":case "strokeOpacity":case "angle":Ab=!1;break a}Ab=void 0}Ab&&(db=db.legend,ha[Ca]=db?Wa(db):db);return ha},
{})}parseData(){this.component.data=kl(this)}parseLayoutSize(){const {size:H,component:ha}=this;for(const db of Hd){const Ab=bb(db);if(H[Ab]){var Ca=H[Ab];ha.layoutSize.set(Ab,Ac(Ca)?"step":Ca,!0)}else Ca=Ol(this,Ab),ha.layoutSize.set(Ab,Ca,!1)}}parseSelections(){this.component.selection=fj(this,this.selection)}parseMarkGroup(){this.component.mark=fm(this)}parseAxesAndHeaders(){this.component.axes=ll(this)}assembleSelectionTopLevelSignals(H){return bk(this,H)}assembleSignals(){return[...nj(this),
...Mj(this,[])]}assembleSelectionData(H){return Rj(this,H)}assembleLayout(){return null}assembleLayoutSignals(){return Dk(this)}assembleMarks(){var H;let ha=null!==(H=this.component.mark)&&void 0!==H?H:[];this.parent&&Fh(this.parent)||(ha=Ak(this,ha));return ha.map(this.correctDataNames)}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(H){return dc(this.encoding,H)}fieldDef(H){return Ge(this.encoding[H])}typedFieldDef(H){H=this.fieldDef(H);return vc(H)?H:null}}
class co extends sn{constructor(H,ha,Ca,db,Ab){super(H,"layer",ha,Ca,Ab,H.resolve,H.view);ub(this,"children",void 0);const Pb={...db,...(H.width?{width:H.width}:{}),...(H.height?{height:H.height}:{})};this.children=H.layer.map((nc,Kc)=>{if("layer"in nc)return new co(nc,this,this.getName("layer_"+Kc),Pb,Ab);if(hc(nc))return new Fm(nc,this,this.getName("layer_"+Kc),Pb,Ab);throw Error(Gd(nc));})}parseData(){this.component.data=kl(this);for(const H of this.children)H.parseData()}parseLayoutSize(){al(this);
hl(this,"width");hl(this,"height")}parseSelections(){this.component.selection={};for(const H of this.children){H.parseSelections();for(const ha of sf(H.component.selection))this.component.selection[ha]=H.component.selection[ha]}}parseMarkGroup(){for(const H of this.children)H.parseMarkGroup()}parseAxesAndHeaders(){const {axes:H,resolve:ha}=this.component,Ca={top:0,bottom:0,right:0,left:0};for(var db of this.children){db.parseAxesAndHeaders();for(const Pb of sf(db.component.axes))ha.axis[Pb]=Dh(this.component.resolve,
Pb),"shared"===ha.axis[Pb]&&(H[Pb]=ml(H[Pb],db.component.axes[Pb]),H[Pb]||(ha.axis[Pb]="independent",delete H[Pb]))}for(const Pb of Hd){for(const nc of this.children)if(nc.component.axes[Pb]){if("independent"===ha.axis[Pb]){var Ab;H[Pb]=(null!==(Ab=H[Pb])&&void 0!==Ab?Ab:[]).concat(nc.component.axes[Pb]);for(const Kc of nc.component.axes[Pb]){const {value:ad,explicit:ld}=Kc.getWithExplicit("orient");hd(ad)||(0<Ca[ad]&&!ld&&(db=Ro[ad],Ca[ad]>Ca[db]&&Kc.set("orient",db,!1)),Ca[ad]++)}}delete nc.component.axes[Pb]}if("independent"===
ha.axis[Pb]&&H[Pb]&&1<H[Pb].length)for(const nc of H[Pb])nc.get("grid")&&!nc.explicit.grid&&(nc.implicit.grid=!1)}}assembleSelectionTopLevelSignals(H){return this.children.reduce((ha,Ca)=>Ca.assembleSelectionTopLevelSignals(ha),H)}assembleSignals(){return this.children.reduce((H,ha)=>H.concat(ha.assembleSignals()),nj(this))}assembleLayoutSignals(){return this.children.reduce((H,ha)=>H.concat(ha.assembleLayoutSignals()),Dk(this))}assembleSelectionData(H){return this.children.reduce((ha,Ca)=>Ca.assembleSelectionData(ha),
H)}assembleTitle(){let H=super.assembleTitle();if(H)return H;for(const ha of this.children)if(H=ha.assembleTitle())return H}assembleLayout(){return null}assembleMarks(){return Xg(this,this.children.flatMap(H=>H.assembleMarks()))}assembleLegends(){return this.children.reduce((H,ha)=>H.concat(ha.assembleLegends()),ca(this))}}f.accessPathDepth=Va;f.accessPathWithDatum=Ga;f.compile=function(H,ha={}){ha.logger&&(ql=ha.logger);ha.fieldTitle&&(jm=ha.fieldTitle);try{const Pd=zd(U(ha.config,H.config)),Oe=
ch(H,Pd),Ae=Vi(Oe,null,"",void 0,Pd);Ae.parse();var Ca=Ae.component.data,db=Ae;ic(Ca.sources);let gf=0,bf=0;for(var Ab=0;5>Ab&&Lc(Ca,db,!0);Ab++)gf++;Ca.sources.map(yb);for(Ab=0;5>Ab&&Lc(Ca,db,!1);Ab++)bf++;ic(Ca.sources);5===Math.max(gf,bf)&&Zc("Maximum optimization runs(".concat(5,") reached."));var Pb=Oe.autosize;Ca=Pd;db=Ae;const Te=db.component.layoutSize.get("width"),xf=db.component.layoutSize.get("height");void 0===Pb?(Pb={type:"pad"},db.hasAxisOrientSignalRef()&&(Pb.resize=!0)):t(Pb)&&(Pb=
{type:Pb});var nc;if(nc=Te&&xf){var Kc=Pb.type;nc="fit"===Kc||"fit-x"===Kc||"fit-y"===Kc}if(nc)if("step"===Te&&"step"===xf)Zc(ze()),Pb.type="pad";else if("step"===Te||"step"===xf){Kc="step"===Te?"width":"height";Zc(ze(zb(Kc)));nc=Pb;var ad=(Kc="width"===Kc?"height":"width","fit-".concat(zb(Kc)));nc.type=ad}var ld={...(1===sf(Pb).length&&Pb.type?"pad"===Pb.type?{}:{autosize:Pb.type}:{autosize:Pb}),...gc(Ca,!1),...gc(H,!0)};return{spec:Ml(Ae,ld,H.datasets,H.usermeta),normalized:Oe}}finally{ha.logger&&
(ql=rm),ha.fieldTitle&&(jm=dn)}};f.contains=A;f.deepEqual=ok;f.deleteNestedProperty=ja;f.duplicate=Rf;f.entries=fi;f.every=T;f.fieldIntersection=Z;f.flatAccessWithDatum=ua;f.getFirstDefined=La;f.hasIntersection=r;f.hash=O;f.internalField=la;f.isBoolean=C;f.isEmpty=E;f.isEqual=function(H,ha){const Ca=sf(H),db=sf(ha);if(Ca.length!==db.length)return!1;for(const Ab of Ca)if(H[Ab]!==ha[Ab])return!1;return!0};f.isInternalField=ma;f.isNullOrFalse=N;f.isNumeric=Da;f.keys=sf;f.logicalExpr=fa;f.mergeDeep=z;
f.normalize=ch;f.normalizeAngle=Aa;f.omit=v;f.pick=B;f.prefixGenerator=Y;f.removePathFromField=eb;f.replaceAll=Sa;f.replacePathInField=Xa;f.resetIdCounter=function(){Nk=42};f.setEqual=K;f.some=J;f.stringify=kh;f.titleCase=Ba;f.unique=ba;f.uniqueId=Ra;f.vals=Pi;f.varName=W;f.version="4.17.0";Object.defineProperty(f,"__esModule",{value:!0})})};
shadow$provide[556]=function(Pa,da,gb,oa){function k(){throw Error("setTimeout has not been defined");}function f(){throw Error("clearTimeout has not been defined");}function h(w){if(aa===setTimeout)return setTimeout(w,0);if((aa===k||!aa)&&setTimeout)return aa=setTimeout,setTimeout(w,0);try{return aa(w,0)}catch(x){try{return aa.call(null,w,0)}catch(I){return aa.call(this,w,0)}}}function l(w){if(X===clearTimeout)return clearTimeout(w);if((X===f||!X)&&clearTimeout)return X=clearTimeout,clearTimeout(w);
try{return X(w)}catch(x){try{return X.call(null,w)}catch(I){return X.call(this,w)}}}function u(){V&&F&&(V=!1,F.length?S=F.concat(S):t=-1,S.length&&q())}function q(){if(!V){var w=h(u);V=!0;for(var x=S.length;x;){F=S;for(S=[];++t<x;)F&&F[t].run();t=-1;x=S.length}F=null;V=!1;l(w)}}function D(w,x){this.fun=w;this.array=x}function U(){}Pa=gb.exports={};try{var aa="function"===typeof setTimeout?setTimeout:k}catch(w){aa=k}try{var X="function"===typeof clearTimeout?clearTimeout:f}catch(w){X=f}var S=[],V=
!1,F,t=-1;Pa.nextTick=function(w){var x=Array(arguments.length-1);if(1<arguments.length)for(var I=1;I<arguments.length;I++)x[I-1]=arguments[I];S.push(new D(w,x));1!==S.length||V||h(q)};D.prototype.run=function(){this.fun.apply(null,this.array)};Pa.title="browser";Pa.browser=!0;Pa.env={};Pa.argv=[];Pa.version="";Pa.versions={};Pa.on=U;Pa.addListener=U;Pa.once=U;Pa.off=U;Pa.removeListener=U;Pa.removeAllListeners=U;Pa.emit=U;Pa.prependListener=U;Pa.prependOnceListener=U;Pa.listeners=function(w){return[]};
Pa.binding=function(w){throw Error("process.binding is not supported");};Pa.cwd=function(){return"/"};Pa.chdir=function(w){throw Error("process.chdir is not supported");};Pa.umask=function(){return 0}};
shadow$provide[557]=function(Pa,da,gb,oa){var k=da(556);(function(f,h){"object"===typeof oa&&"undefined"!==typeof gb?gb.exports=h(da(554),da(555)):"function"===typeof define&&define.amd?define(["vega","vega-lite"],h):(f="undefined"!==typeof globalThis?globalThis:f||self,f.vegaEmbed=h(f.vega,f.vegaLite))})(this,function(f,h){function l($a){if($a&&$a.__esModule)return $a;var xb=Object.create(null);$a&&Object.keys($a).forEach(function(Nb){if("default"!==Nb){var cc=Object.getOwnPropertyDescriptor($a,
Nb);Object.defineProperty(xb,Nb,cc.get?cc:{enumerable:!0,get:function(){return $a[Nb]}})}});xb["default"]=$a;return Object.freeze(xb)}function u($a){if(Array.isArray($a)){var xb=Array($a.length);for($a=0;$a<xb.length;$a++)xb[$a]=""+$a;return xb}if(Object.keys)return Object.keys($a);xb=[];for(var Nb in $a)eb.call($a,Nb)&&xb.push(Nb);return xb}function q($a){switch(typeof $a){case "object":return JSON.parse(JSON.stringify($a));case "undefined":return null;default:return $a}}function D($a){for(var xb=
0,Nb=$a.length,cc;xb<Nb;)if(cc=$a.charCodeAt(xb),48<=cc&&57>=cc)xb++;else return!1;return!0}function U($a){return-1===$a.indexOf("/")&&-1===$a.indexOf("~")?$a:$a.replace(/~/g,"~0").replace(/\//g,"~1")}function aa($a){return $a.replace(/~1/g,"/").replace(/~0/g,"~")}function X($a){if(void 0===$a)return!0;if($a)if(Array.isArray($a))for(var xb=0,Nb=$a.length;xb<Nb;xb++){if(X($a[xb]))return!0}else if("object"===typeof $a){Nb=u($a);var cc=Nb.length;for(xb=0;xb<cc;xb++)if(X($a[Nb[xb]]))return!0}return!1}
function S($a,xb){$a=[$a];for(var Nb in xb){var cc="object"===typeof xb[Nb]?JSON.stringify(xb[Nb],null,2):xb[Nb];"undefined"!==typeof cc&&$a.push(Nb+": "+cc)}return $a.join("\n")}function V($a,xb){if(""==xb)return $a;xb={op:"_get",path:xb};F($a,xb);return xb.value}function F($a,xb,Nb,cc,vc,ed){void 0===Nb&&(Nb=!1);void 0===cc&&(cc=!0);void 0===vc&&(vc=!0);void 0===ed&&(ed=0);Nb&&("function"==typeof Nb?Nb(xb,0,$a,xb.path):w(xb,0));if(""===xb.path){vc={newDocument:$a};if("add"===xb.op)return vc.newDocument=
xb.value,vc;if("replace"===xb.op)return vc.newDocument=xb.value,vc.removed=$a,vc;if("move"===xb.op||"copy"===xb.op)return vc.newDocument=V($a,xb.from),"move"===xb.op&&(vc.removed=$a),vc;if("test"===xb.op){vc.test=I($a,xb.value);if(!1===vc.test)throw new La("Test operation failed","TEST_OPERATION_FAILED",ed,xb,$a);vc.newDocument=$a;return vc}if("remove"===xb.op)return vc.removed=$a,vc.newDocument=null,vc;if("_get"===xb.op)return xb.value=$a,vc;if(Nb)throw new La("Operation `op` property is not one of operations defined in RFC-6902",
"OPERATION_OP_INVALID",ed,xb,$a);return vc}cc||($a=q($a));cc=(xb.path||"").split("/");var jb=$a,Qb=1,pc=cc.length,Qc=void 0,Cc;for(Cc="function"==typeof Nb?Nb:w;;){var vd=cc[Qb];if(vc&&"__proto__"==vd)throw new TypeError("JSON-Patch: modifying `__proto__` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");Nb&&void 0===Qc&&(void 0===jb[vd]?Qc=cc.slice(0,Qb).join("/"):Qb==
pc-1&&(Qc=xb.path),void 0!==Qc&&Cc(xb,0,$a,Qc));Qb++;if(Array.isArray(jb)){if("-"===vd)vd=jb.length;else{if(Nb&&!D(vd))throw new La("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",ed,xb,$a);D(vd)&&(vd=~~vd)}if(Qb>=pc){if(Nb&&"add"===xb.op&&vd>jb.length)throw new La("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",ed,xb,$a);
vc=la[xb.op].call(xb,jb,vd,$a);if(!1===vc.test)throw new La("Test operation failed","TEST_OPERATION_FAILED",ed,xb,$a);return vc}}else if(vd&&-1!=vd.indexOf("~")&&(vd=aa(vd)),Qb>=pc){vc=Ra[xb.op].call(xb,jb,vd,$a);if(!1===vc.test)throw new La("Test operation failed","TEST_OPERATION_FAILED",ed,xb,$a);return vc}jb=jb[vd]}}function t($a,xb,Nb,cc,vc){void 0===cc&&(cc=!0);void 0===vc&&(vc=!0);if(Nb&&!Array.isArray(xb))throw new La("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");cc||($a=q($a));
cc=Array(xb.length);for(var ed=0,jb=xb.length;ed<jb;ed++)cc[ed]=F($a,xb[ed],Nb,!0,vc,ed),$a=cc[ed].newDocument;cc.newDocument=$a;return cc}function w($a,xb,Nb,cc){if("object"!==typeof $a||null===$a||Array.isArray($a))throw new La("Operation is not an object","OPERATION_NOT_AN_OBJECT",xb,$a,Nb);if(Ra[$a.op]){if("string"!==typeof $a.path)throw new La("Operation `path` property is not a string","OPERATION_PATH_INVALID",xb,$a,Nb);if(0!==$a.path.indexOf("/")&&0<$a.path.length)throw new La('Operation `path` property must start with "/"',
"OPERATION_PATH_INVALID",xb,$a,Nb);if("move"!==$a.op&&"copy"!==$a.op||"string"===typeof $a.from)if("add"!==$a.op&&"replace"!==$a.op&&"test"!==$a.op||void 0!==$a.value){if(("add"===$a.op||"replace"===$a.op||"test"===$a.op)&&X($a.value))throw new La("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",xb,$a,Nb);if(Nb)if("add"==$a.op){var vc=$a.path.split("/").length;cc=cc.split("/").length;if(vc!==cc+1&&vc!==cc)throw new La("Cannot perform an `add` operation at the desired path",
"OPERATION_PATH_CANNOT_ADD",xb,$a,Nb);}else if("replace"===$a.op||"remove"===$a.op||"_get"===$a.op){if($a.path!==cc)throw new La("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",xb,$a,Nb);}else if(("move"===$a.op||"copy"===$a.op)&&(vc=x([{op:"_get",path:$a.from,value:void 0}],Nb))&&"OPERATION_PATH_UNRESOLVABLE"===vc.name)throw new La("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",xb,$a,Nb);}else throw new La("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)",
"OPERATION_VALUE_REQUIRED",xb,$a,Nb);else throw new La("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",xb,$a,Nb);}else throw new La("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",xb,$a,Nb);}function x($a,xb,Nb){try{if(!Array.isArray($a))throw new La("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(xb)t(q(xb),q($a),Nb||!0);else{Nb=Nb||w;for(var cc=0;cc<$a.length;cc++)Nb($a[cc],
cc,xb,void 0)}}catch(vc){if(vc instanceof La)return vc;throw vc;}}function I($a,xb){if($a===xb)return!0;if($a&&xb&&"object"==typeof $a&&"object"==typeof xb){var Nb=Array.isArray($a),cc=Array.isArray(xb);if(Nb&&cc){var vc=$a.length;if(vc!=xb.length)return!1;for(Nb=vc;0!==Nb--;)if(!I($a[Nb],xb[Nb]))return!1;return!0}if(Nb!=cc)return!1;cc=Object.keys($a);vc=cc.length;if(vc!==Object.keys(xb).length)return!1;for(Nb=vc;0!==Nb--;)if(!xb.hasOwnProperty(cc[Nb]))return!1;for(Nb=vc;0!==Nb--;)if(vc=cc[Nb],!I($a[vc],
xb[vc]))return!1;return!0}return $a!==$a&&xb!==xb}function R($a,xb){void 0===xb&&(xb=!1);var Nb=Aa.get($a.object);B(Nb.value,$a.object,$a.patches,"",xb);$a.patches.length&&t(Nb.value,$a.patches);xb=$a.patches;0<xb.length&&($a.patches=[],$a.callback&&$a.callback(xb));return xb}function B($a,xb,Nb,cc,vc){if(xb!==$a){"function"===typeof xb.toJSON&&(xb=xb.toJSON());for(var ed=u(xb),jb=u($a),Qb=!1,pc=jb.length-1;0<=pc;pc--){var Qc=jb[pc],Cc=$a[Qc];if(!eb.call(xb,Qc)||void 0===xb[Qc]&&void 0!==Cc&&!1===
Array.isArray(xb))Array.isArray($a)===Array.isArray(xb)?(vc&&Nb.push({op:"test",path:cc+"/"+U(Qc),value:q(Cc)}),Nb.push({op:"remove",path:cc+"/"+U(Qc)}),Qb=!0):(vc&&Nb.push({op:"test",path:cc,value:$a}),Nb.push({op:"replace",path:cc,value:xb}));else{var vd=xb[Qc];"object"==typeof Cc&&null!=Cc&&"object"==typeof vd&&null!=vd?B(Cc,vd,Nb,cc+"/"+U(Qc),vc):Cc!==vd&&(vc&&Nb.push({op:"test",path:cc+"/"+U(Qc),value:q(Cc)}),Nb.push({op:"replace",path:cc+"/"+U(Qc),value:q(vd)}))}}if(Qb||ed.length!=jb.length)for(pc=
0;pc<ed.length;pc++)Qc=ed[pc],eb.call($a,Qc)||void 0===xb[Qc]||Nb.push({op:"add",path:cc+"/"+U(Qc),value:q(xb[Qc])})}}function v($a){var xb=this;xb instanceof v||(xb=new v);xb.tail=null;xb.head=null;xb.length=0;if($a&&"function"===typeof $a.forEach)$a.forEach(function(vc){xb.push(vc)});else if(0<arguments.length)for(var Nb=0,cc=arguments.length;Nb<cc;Nb++)xb.push(arguments[Nb]);return xb}function O($a,xb,Nb,cc){if(!(this instanceof O))return new O($a,xb,Nb,cc);this.list=cc;this.value=$a;xb?(xb.next=
this,this.prev=xb):this.prev=null;Nb?(Nb.prev=this,this.next=Nb):this.next=null}function N($a){const [xb,Nb]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec($a).slice(1,3);return{library:xb,version:Nb}}function A($a,xb,Nb){$a.fields=xb||[];$a.fname=Nb;return $a}function J($a){return 1===$a.length?dh($a[0]):Zg($a)}function T($a){function xb(){Nb.push(jb+$a.substring(Qb,pc));jb="";Qb=pc+1}const Nb=[],cc=$a.length;let vc=null,ed=0,jb="",Qb,pc,Qc;$a+="";for(Qb=pc=0;pc<cc;++pc)if(Qc=$a[pc],"\\"===Qc)jb+=
$a.substring(Qb,pc),jb+=$a.substring(++pc,++pc),Qb=pc;else if(Qc===vc)xb(),vc=null,ed=-1;else if(!vc)if(Qb===ed&&'"'===Qc)Qb=pc+1,vc=Qc;else if(Qb===ed&&"'"===Qc)Qb=pc+1,vc=Qc;else if("."===Qc&&!ed)pc>Qb?xb():Qb=pc+1;else if("["===Qc)pc>Qb&&xb(),ed=Qb=pc+1;else if("]"===Qc){if(!ed)throw Error("Access path missing open bracket: "+$a);0<ed&&xb();ed=0;Qb=pc+1}if(ed)throw Error("Access path missing closing bracket: "+$a);if(vc)throw Error("Access path missing closing quote: "+$a);pc>Qb&&(pc++,xb());return Nb}
function z($a,xb){var Nb={},cc;for(cc in $a)Object.prototype.hasOwnProperty.call($a,cc)&&0>xb.indexOf(cc)&&(Nb[cc]=$a[cc]);if(null!=$a&&"function"===typeof Object.getOwnPropertySymbols){var vc=0;for(cc=Object.getOwnPropertySymbols($a);vc<cc.length;vc++)0>xb.indexOf(cc[vc])&&Object.prototype.propertyIsEnumerable.call($a,cc[vc])&&(Nb[cc[vc]]=$a[cc[vc]])}return Nb}function ba($a,xb,Nb){if(Yf($a))return`[${$a.map(vc=>xb("string"===typeof vc?vc:JSON.stringify(vc,K(Nb)))).join(", ")}]`;if($a===Object($a)){let vc=
"";const {title:ed,image:jb}=$a;$a=z($a,["title","image"]);ed&&(vc+=`<h2>${xb(ed)}</h2>`);jb&&(vc+=`<img src="${xb(jb)}">`);var cc=Object.keys($a);if(0<cc.length){vc+="\x3ctable\x3e";for(const Qb of cc)cc=$a[Qb],void 0!==cc&&(cc===Object(cc)&&(cc=JSON.stringify(cc,K(Nb))),vc+=`<tr><td class="key">${xb(Qb)}:</td><td class="value">${xb(cc)}</td></tr>`);vc+="\x3c/table\x3e"}return vc||"{}"}return xb($a)}function K($a){const xb=[];return function(Nb,cc){if("object"!==typeof cc||null===cc)return cc;Nb=
xb.indexOf(this)+1;xb.length=Nb;if(xb.length>$a)return"[Object]";if(0<=xb.indexOf(cc))return"[Circular]";xb.push(cc);return cc}}function r($a,xb,Nb){function cc(pc){pc.source===ed&&(Qb=0,$a.removeEventListener("message",cc,!1))}function vc(){0>=Qb||(ed.postMessage(Nb,jb),setTimeout(vc,250),--Qb)}const ed=$a.open(xb),{origin:jb}=new URL(xb);let Qb=40;$a.addEventListener("message",cc,!1);setTimeout(vc,250)}function Y($a,...xb){for(const cc of xb){xb=$a;var Nb=cc;for(const vc of Object.keys(Nb))f.writeConfig(xb,
vc,Nb[vc],!0)}return $a}function Z($a,xb,Nb,cc){xb=`<html><head>${xb}</head><body><pre><code class="json">`;Nb=`</code></pre>${Nb}</body></html>`;const vc=window.open("");vc.document.write(xb+$a+Nb);vc.document.title=`${fc[cc]} JSON Source`}function E($a,xb){if($a.$schema){$a=N($a.$schema);if(xb&&xb!==$a.library){var Nb;console.warn(`The given visualization spec is written in ${fc[$a.library]}, but mode argument sets ${null!==(Nb=fc[xb])&&void 0!==Nb?Nb:xb}.`)}xb=$a.library;jf.satisfies(lc[xb],`^${$a.version.slice(1)}`)||
console.warn(`The input spec uses ${fc[xb]} ${$a.version}, but the current version of ${fc[xb]} is v${lc[xb]}.`);return xb}return"mark"in $a||"encoding"in $a||"layer"in $a||"hconcat"in $a||"vconcat"in $a||"facet"in $a||"repeat"in $a?"vega-lite":"marks"in $a||"signals"in $a||"scales"in $a||"axes"in $a?"vega":null!==xb&&void 0!==xb?xb:"vega"}function C($a){return $a&&"load"in $a?$a:Ue.loader($a)}function W($a){var xb;return null!==(xb=$a.usermeta&&$a.usermeta.embedOptions)&&void 0!==xb?xb:{}}async function fa($a,
xb,Nb={}){var cc,vc;let ed;f.isString(xb)&&(ed=C(Nb.loader),xb=JSON.parse(await ed.load(xb)));const jb=W(xb).loader;if(!ed||jb){var Qb;ed=C(null!==(Qb=Nb.loader)&&void 0!==Qb?Qb:jb)}Qb=await ja(W(xb),ed);Nb=await ja(Nb,ed);Nb={...Y(Nb,Qb),config:f.mergeConfig(null!==(cc=Nb.config)&&void 0!==cc?cc:{},null!==(vc=Qb.config)&&void 0!==vc?vc:{})};return await Ga($a,xb,Nb,ed)}async function ja($a,xb){var Nb;const cc=f.isString($a.config)?JSON.parse(await xb.load($a.config)):null!==(Nb=$a.config)&&void 0!==
Nb?Nb:{};xb=f.isString($a.patch)?JSON.parse(await xb.load($a.patch)):$a.patch;return{...$a,...(xb?{patch:xb}:{}),...(cc?{config:cc}:{})}}function Ba($a){$a=$a.getRootNode?$a.getRootNode():document;if($a instanceof ShadowRoot)return{root:$a,rootContainer:$a};var xb;return{root:document,rootContainer:null!==(xb=document.head)&&void 0!==xb?xb:document.body}}async function Ga($a,xb,Nb={},cc){var vc,ed,jb,Qb,pc;const Qc=Nb.theme?f.mergeConfig(Pg[Nb.theme],null!==(vc=Nb.config)&&void 0!==vc?vc:{}):Nb.config;
vc=f.isBoolean(Nb.actions)?Nb.actions:Y({},Ya,null!==(ed=Nb.actions)&&void 0!==ed?ed:{});ed={...Cb,...Nb.i18n};const Cc=null!==(jb=Nb.renderer)&&void 0!==jb?jb:"canvas";jb=null!==(Qb=Nb.logLevel)&&void 0!==Qb?Qb:Ue.Warn;Qb=null!==(pc=Nb.downloadFileName)&&void 0!==pc?pc:"visualization";pc="string"===typeof $a?document.querySelector($a):$a;if(!pc)throw Error(`${$a} does not exist`);if(!1!==Nb.defaultStyle){const {root:Me,rootContainer:rf}=Ba(pc);Me.getElementById("vega-embed-style")||($a=document.createElement("style"),
$a.id="vega-embed-style",$a.innerText=void 0===Nb.defaultStyle||!0===Nb.defaultStyle?'.vega-embed {\n  position: relative;\n  display: inline-block;\n  box-sizing: border-box; }\n  .vega-embed.has-actions {\n    padding-right: 38px; }\n  .vega-embed details:not([open]) \x3e :not(summary) {\n    display: none !important; }\n  .vega-embed summary {\n    list-style: none;\n    position: absolute;\n    top: 0;\n    right: 0;\n    padding: 6px;\n    z-index: 1000;\n    background: white;\n    box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);\n    color: #1b1e23;\n    border: 1px solid #aaa;\n    border-radius: 999px;\n    opacity: 0.2;\n    transition: opacity 0.4s ease-in;\n    outline: none;\n    cursor: pointer;\n    line-height: 0px; }\n    .vega-embed summary::-webkit-details-marker {\n      display: none; }\n    .vega-embed summary:active {\n      box-shadow: #aaa 0px 0px 0px 1px inset; }\n    .vega-embed summary svg {\n      width: 14px;\n      height: 14px; }\n  .vega-embed details[open] summary {\n    opacity: 0.7; }\n  .vega-embed:hover summary,\n  .vega-embed:focus summary {\n    opacity: 1 !important;\n    transition: opacity 0.2s ease; }\n  .vega-embed .vega-actions {\n    position: absolute;\n    z-index: 1001;\n    top: 35px;\n    right: -9px;\n    display: flex;\n    flex-direction: column;\n    padding-bottom: 8px;\n    padding-top: 8px;\n    border-radius: 4px;\n    box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);\n    border: 1px solid #d9d9d9;\n    background: white;\n    animation-duration: 0.15s;\n    animation-name: scale-in;\n    animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);\n    text-align: left; }\n    .vega-embed .vega-actions a {\n      padding: 8px 16px;\n      font-family: sans-serif;\n      font-size: 14px;\n      font-weight: 600;\n      white-space: nowrap;\n      color: #434a56;\n      text-decoration: none; }\n      .vega-embed .vega-actions a:hover {\n        background-color: #f7f7f9;\n        color: black; }\n    .vega-embed .vega-actions::before, .vega-embed .vega-actions::after {\n      content: "";\n      display: inline-block;\n      position: absolute; }\n    .vega-embed .vega-actions::before {\n      left: auto;\n      right: 14px;\n      top: -16px;\n      border: 8px solid #0000;\n      border-bottom-color: #d9d9d9; }\n    .vega-embed .vega-actions::after {\n      left: auto;\n      right: 15px;\n      top: -14px;\n      border: 7px solid #0000;\n      border-bottom-color: #fff; }\n  .vega-embed .chart-wrapper.fit-x {\n    width: 100%; }\n  .vega-embed .chart-wrapper.fit-y {\n    height: 100%; }\n\n.vega-embed-wrapper {\n  max-width: 100%;\n  overflow: auto;\n  padding-right: 14px; }\n\n@keyframes scale-in {\n  from {\n    opacity: 0;\n    transform: scale(0.6); }\n  to {\n    opacity: 1;\n    transform: scale(1); } }\n'.toString():
Nb.defaultStyle,rf.appendChild($a))}const vd=E(xb,Nb.mode);let Wd=rc[vd](xb,Qc);"vega-lite"===vd&&Wd.$schema&&($a=N(Wd.$schema),jf.satisfies(lc.vega,`^${$a.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${$a.version}, but current version is v${lc.vega}.`));pc.classList.add("vega-embed");vc&&pc.classList.add("has-actions");pc.innerHTML="";let we=pc;vc&&($a=document.createElement("div"),$a.classList.add("chart-wrapper"),pc.appendChild($a),we=$a);($a=Nb.patch)&&(Wd=$a instanceof Function?
$a(Wd):t(Wd,$a,!0,!1).newDocument);Nb.formatLocale&&Ue.formatLocale(Nb.formatLocale);Nb.timeFormatLocale&&Ue.timeFormatLocale(Nb.timeFormatLocale);({ast:$a}=Nb);const ue=Ue.parse(Wd,"vega-lite"===vd?{}:Qc,{ast:$a}),sd=new (Nb.viewClass||Ue.View)(ue,{loader:cc,logLevel:jb,renderer:Cc,...($a?{expr:Ue.expressionInterpreter}:{})});sd.addSignalListener("autosize",(Me,rf)=>{({type:Me}=rf);"fit-x"==Me?(we.classList.add("fit-x"),we.classList.remove("fit-y")):"fit-y"==Me?(we.classList.remove("fit-x"),we.classList.add("fit-y")):
"fit"==Me?we.classList.add("fit-x","fit-y"):we.classList.remove("fit-x","fit-y")});!1!==Nb.tooltip&&(cc="function"===typeof Nb.tooltip?Nb.tooltip:(new Kf(!0===Nb.tooltip?{}:Nb.tooltip)).call,sd.tooltip(cc));({hover:cc}=Nb);void 0===cc&&(cc="vega"===vd);if(cc){const {hoverSet:Me,updateSet:rf}="boolean"===typeof cc?{}:cc;sd.hover(Me,rf)}Nb&&(null!=Nb.width&&sd.width(Nb.width),null!=Nb.height&&sd.height(Nb.height),null!=Nb.padding&&sd.padding(Nb.padding));await sd.initialize(we,Nb.bind).runAsync();let Fe;
if(!1!==vc){jb=pc;if(!1!==Nb.defaultStyle){const Me=document.createElement("details");Me.title=ed.CLICK_TO_VIEW_ACTIONS;pc.append(Me);jb=Me;cc=document.createElement("summary");cc.innerHTML='\n\x3csvg viewBox\x3d"0 0 16 16" fill\x3d"currentColor" stroke\x3d"none" stroke-width\x3d"1" stroke-linecap\x3d"round" stroke-linejoin\x3d"round"\x3e\n  \x3ccircle r\x3d"2" cy\x3d"8" cx\x3d"2"\x3e\x3c/circle\x3e\n  \x3ccircle r\x3d"2" cy\x3d"8" cx\x3d"8"\x3e\x3c/circle\x3e\n  \x3ccircle r\x3d"2" cy\x3d"8" cx\x3d"14"\x3e\x3c/circle\x3e\n\x3c/svg\x3e';
Me.append(cc);Fe=rf=>{Me.contains(rf.target)||Me.removeAttribute("open")};document.addEventListener("click",Fe)}cc=document.createElement("div");jb.append(cc);cc.classList.add("vega-actions");if(!0===vc||!1!==vc.export)for(const Me of["svg","png"])if(!0===vc||!0===vc.export||vc.export[Me])pc=ed[`${Me.toUpperCase()}_ACTION`],jb=document.createElement("a"),jb.text=pc,jb.href="#",jb.target="_blank",jb.download=`${Qb}.${Me}`,jb.addEventListener("mousedown",async function(rf){rf.preventDefault();this.href=
await sd.toImageURL(Me,Nb.scaleFactor)}),cc.append(jb);if(!0===vc||!1!==vc.source)Qb=document.createElement("a"),Qb.text=ed.SOURCE_ACTION,Qb.href="#",Qb.addEventListener("click",function(Me){var rf,Ma;Z(cb(xb),null!==(rf=Nb.sourceHeader)&&void 0!==rf?rf:"",null!==(Ma=Nb.sourceFooter)&&void 0!==Ma?Ma:"",vd);Me.preventDefault()}),cc.append(Qb);"vega-lite"!==vd||!0!==vc&&!1===vc.compiled||(Qb=document.createElement("a"),Qb.text=ed.COMPILED_ACTION,Qb.href="#",Qb.addEventListener("click",function(Me){var rf,
Ma;Z(cb(Wd),null!==(rf=Nb.sourceHeader)&&void 0!==rf?rf:"",null!==(Ma=Nb.sourceFooter)&&void 0!==Ma?Ma:"","vega");Me.preventDefault()}),cc.append(Qb));if(!0===vc||!1!==vc.editor){var Ge;const Me=null!==(Ge=Nb.editorUrl)&&void 0!==Ge?Ge:"https://vega.github.io/editor/";Ge=document.createElement("a");Ge.text=ed.EDITOR_ACTION;Ge.href="#";Ge.addEventListener("click",function(rf){r(window,Me,{config:Qc,mode:vd,renderer:Cc,spec:cb(xb)});rf.preventDefault()});cc.append(Ge)}}return{view:sd,spec:xb,vgSpec:Wd,
finalize:function(){Fe&&document.removeEventListener("click",Fe);sd.finalize()}}}async function ua($a,xb={}){var Nb;const cc=document.createElement("div");cc.classList.add("vega-embed-wrapper");const vc=document.createElement("div");cc.appendChild(vc);const ed=!0===xb.actions||!1===xb.actions?xb.actions:{export:!0,source:!1,compiled:!0,editor:!0,...(null!==(Nb=xb.actions)&&void 0!==Nb?Nb:{})};$a=await fa(vc,$a,{actions:ed,...(null!==xb&&void 0!==xb?xb:{})});cc.value=$a.view;return cc}var Fa=l(f),
Xa=l(h),Sa=function(){var $a=function(xb,Nb){$a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(cc,vc){cc.__proto__=vc}||function(cc,vc){for(var ed in vc)vc.hasOwnProperty(ed)&&(cc[ed]=vc[ed])};return $a(xb,Nb)};return function(xb,Nb){function cc(){this.constructor=xb}$a(xb,Nb);xb.prototype=null===Nb?Object.create(Nb):(cc.prototype=Nb.prototype,new cc)}}(),eb=Object.prototype.hasOwnProperty,Va=function($a){function xb(Nb,cc,vc,ed,jb){var Qb=this.constructor,pc=$a.call(this,S(Nb,{name:cc,
index:vc,operation:ed,tree:jb}))||this;pc.name=cc;pc.index=vc;pc.operation=ed;pc.tree=jb;Object.setPrototypeOf(pc,Qb.prototype);pc.message=S(Nb,{name:cc,index:vc,operation:ed,tree:jb});return pc}Sa(xb,$a);return xb}(Error),La=Va,Ra={add:function($a,xb,Nb){$a[xb]=this.value;return{newDocument:Nb}},remove:function($a,xb,Nb){var cc=$a[xb];delete $a[xb];return{newDocument:Nb,removed:cc}},replace:function($a,xb,Nb){var cc=$a[xb];$a[xb]=this.value;return{newDocument:Nb,removed:cc}},move:function($a,xb,
Nb){($a=V(Nb,this.path))&&($a=q($a));xb=F(Nb,{op:"remove",path:this.from}).removed;F(Nb,{op:"add",path:this.path,value:xb});return{newDocument:Nb,removed:$a}},copy:function($a,xb,Nb){$a=V(Nb,this.from);F(Nb,{op:"add",path:this.path,value:q($a)});return{newDocument:Nb}},test:function($a,xb,Nb){return{newDocument:Nb,test:I($a[xb],this.value)}},_get:function($a,xb,Nb){this.value=$a[xb];return{newDocument:Nb}}},la={add:function($a,xb,Nb){D(xb)?$a.splice(xb,0,this.value):$a[xb]=this.value;return{newDocument:Nb,
index:xb}},remove:function($a,xb,Nb){$a=$a.splice(xb,1);return{newDocument:Nb,removed:$a[0]}},replace:function($a,xb,Nb){var cc=$a[xb];$a[xb]=this.value;return{newDocument:Nb,removed:cc}},move:Ra.move,copy:Ra.copy,test:Ra.test,_get:Ra._get},ma=Object.freeze({__proto__:null,JsonPatchError:La,deepClone:q,getValueByPointer:V,applyOperation:F,applyPatch:t,applyReducer:function($a,xb,Nb){var cc=F($a,xb);if(!1===cc.test)throw new La("Test operation failed","TEST_OPERATION_FAILED",Nb,xb,$a);return cc.newDocument},
validator:w,validate:x,_areEquals:I}),Aa=new WeakMap,Da=function(){return function($a){this.observers=new Map;this.obj=$a}}(),Qa=function(){return function($a,xb){this.callback=$a;this.observer=xb}}(),Ea=Object.freeze({__proto__:null,unobserve:function($a,xb){xb.unobserve()},observe:function($a,xb){var Nb=Aa.get($a);if(Nb){var cc=Nb.observers.get(xb);var vc=cc&&cc.observer}else Nb=new Da($a),Aa.set($a,Nb);if(vc)return vc;vc={};Nb.value=q($a);if(xb){vc.callback=xb;vc.next=null;var ed=function(){R(vc)},
jb=function(){clearTimeout(vc.next);vc.next=setTimeout(ed)};"undefined"!==typeof window&&(window.addEventListener("mouseup",jb),window.addEventListener("keyup",jb),window.addEventListener("mousedown",jb),window.addEventListener("keydown",jb),window.addEventListener("change",jb))}vc.patches=[];vc.object=$a;vc.unobserve=function(){R(vc);clearTimeout(vc.next);Nb.observers.delete(vc.callback);"undefined"!==typeof window&&(window.removeEventListener("mouseup",jb),window.removeEventListener("keyup",jb),
window.removeEventListener("mousedown",jb),window.removeEventListener("keydown",jb),window.removeEventListener("change",jb))};Nb.observers.set(xb,new Qa(xb,vc));return vc},generate:R,compare:function($a,xb,Nb){void 0===Nb&&(Nb=!1);var cc=[];B($a,xb,cc,"",Nb);return cc}});Object.assign({},ma,Ea,{JsonPatchError:Va,deepClone:q,escapePathComponent:U,unescapePathComponent:aa});var kb=/("(?:[^\\"]|\\.)*")|[:,]/g,cb=function($a,xb){xb=xb||{};var Nb=JSON.stringify([1],void 0,void 0===xb.indent?2:xb.indent).slice(2,
-3);var cc=""===Nb?Infinity:void 0===xb.maxLength?80:xb.maxLength;var vc=xb.replacer;return function Qc(jb,Qb,pc){jb&&"function"===typeof jb.toJSON&&(jb=jb.toJSON());var Cc=JSON.stringify(jb,vc);if(void 0===Cc)return Cc;pc=cc-Qb.length-pc;if(Cc.length<=pc){var vd=Cc.replace(kb,function(rf,Ma){return Ma||rf+" "});if(vd.length<=pc)return vd}null!=vc&&(jb=JSON.parse(Cc),vc=void 0);if("object"===typeof jb&&null!==jb){var Wd=Qb+Nb;var we=[];var ue=0;if(Array.isArray(jb)){var sd="[";vd="]";for(pc=jb.length;ue<
pc;ue++)we.push(Qc(jb[ue],Wd,ue===pc-1?0:1)||"null")}else{sd="{";vd="}";var Fe=Object.keys(jb);for(pc=Fe.length;ue<pc;ue++){var Ge=Fe[ue];var Me=JSON.stringify(Ge)+": ";Ge=Qc(jb[Ge],Wd,Me.length+(ue===pc-1?0:1));void 0!==Ge&&we.push(Me+Ge)}}if(0<we.length)return[sd,Nb+we.join(",\n"+Wd),vd].join("\n"+Qb)}return Cc}($a,"",0)},Mb={exports:{}},Gb={SEMVER_SPEC_VERSION:"2.0.0",MAX_LENGTH:256,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER||9007199254740991,MAX_SAFE_COMPONENT_LENGTH:16},Wb="object"===typeof k&&
k.env&&k.env.NODE_DEBUG&&/\bsemver\b/i.test(k.env.NODE_DEBUG)?(...$a)=>console.error("SEMVER",...$a):()=>{};(function($a,xb){const {MAX_SAFE_COMPONENT_LENGTH:Nb}=Gb;xb=$a.exports={};const cc=xb.re=[],vc=xb.src=[],ed=xb.t={};let jb=0;$a=(Qb,pc,Qc)=>{const Cc=jb++;Wb(Cc,pc);ed[Qb]=Cc;vc[Cc]=pc;cc[Cc]=new RegExp(pc,Qc?"g":void 0)};$a("NUMERICIDENTIFIER","0|[1-9]\\d*");$a("NUMERICIDENTIFIERLOOSE","[0-9]+");$a("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*");$a("MAINVERSION",`(${vc[ed.NUMERICIDENTIFIER]})\\.`+
`(${vc[ed.NUMERICIDENTIFIER]})\\.`+`(${vc[ed.NUMERICIDENTIFIER]})`);$a("MAINVERSIONLOOSE",`(${vc[ed.NUMERICIDENTIFIERLOOSE]})\\.`+`(${vc[ed.NUMERICIDENTIFIERLOOSE]})\\.`+`(${vc[ed.NUMERICIDENTIFIERLOOSE]})`);$a("PRERELEASEIDENTIFIER",`(?:${vc[ed.NUMERICIDENTIFIER]}|${vc[ed.NONNUMERICIDENTIFIER]})`);$a("PRERELEASEIDENTIFIERLOOSE",`(?:${vc[ed.NUMERICIDENTIFIERLOOSE]}|${vc[ed.NONNUMERICIDENTIFIER]})`);$a("PRERELEASE",`(?:-(${vc[ed.PRERELEASEIDENTIFIER]}(?:\\.${vc[ed.PRERELEASEIDENTIFIER]})*))`);$a("PRERELEASELOOSE",
`(?:-?(${vc[ed.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${vc[ed.PRERELEASEIDENTIFIERLOOSE]})*))`);$a("BUILDIDENTIFIER","[0-9A-Za-z-]+");$a("BUILD",`(?:\\+(${vc[ed.BUILDIDENTIFIER]}(?:\\.${vc[ed.BUILDIDENTIFIER]})*))`);$a("FULLPLAIN",`v?${vc[ed.MAINVERSION]}${vc[ed.PRERELEASE]}?${vc[ed.BUILD]}?`);$a("FULL",`^${vc[ed.FULLPLAIN]}$`);$a("LOOSEPLAIN",`[v=\\s]*${vc[ed.MAINVERSIONLOOSE]}${vc[ed.PRERELEASELOOSE]}?${vc[ed.BUILD]}?`);$a("LOOSE",`^${vc[ed.LOOSEPLAIN]}$`);$a("GTLT","((?:\x3c|\x3e)?\x3d?)");$a("XRANGEIDENTIFIERLOOSE",
`${vc[ed.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);$a("XRANGEIDENTIFIER",`${vc[ed.NUMERICIDENTIFIER]}|x|X|\\*`);$a("XRANGEPLAIN",`[v=\\s]*(${vc[ed.XRANGEIDENTIFIER]})`+`(?:\\.(${vc[ed.XRANGEIDENTIFIER]})`+`(?:\\.(${vc[ed.XRANGEIDENTIFIER]})`+`(?:${vc[ed.PRERELEASE]})?${vc[ed.BUILD]}?`+")?)?");$a("XRANGEPLAINLOOSE",`[v=\\s]*(${vc[ed.XRANGEIDENTIFIERLOOSE]})`+`(?:\\.(${vc[ed.XRANGEIDENTIFIERLOOSE]})`+`(?:\\.(${vc[ed.XRANGEIDENTIFIERLOOSE]})`+`(?:${vc[ed.PRERELEASELOOSE]})?${vc[ed.BUILD]}?`+")?)?");$a("XRANGE",
`^${vc[ed.GTLT]}\\s*${vc[ed.XRANGEPLAIN]}$`);$a("XRANGELOOSE",`^${vc[ed.GTLT]}\\s*${vc[ed.XRANGEPLAINLOOSE]}$`);$a("COERCE",`${"(^|[^\\d])(\\d{1,"}${Nb}})`+`(?:\\.(\\d{1,${Nb}}))?`+`(?:\\.(\\d{1,${Nb}}))?`+"(?:$|[^\\d])");$a("COERCERTL",vc[ed.COERCE],!0);$a("LONETILDE","(?:~\x3e?)");$a("TILDETRIM",`(\\s*)${vc[ed.LONETILDE]}\\s+`,!0);xb.tildeTrimReplace="$1~";$a("TILDE",`^${vc[ed.LONETILDE]}${vc[ed.XRANGEPLAIN]}$`);$a("TILDELOOSE",`^${vc[ed.LONETILDE]}${vc[ed.XRANGEPLAINLOOSE]}$`);$a("LONECARET","(?:\\^)");
$a("CARETTRIM",`(\\s*)${vc[ed.LONECARET]}\\s+`,!0);xb.caretTrimReplace="$1^";$a("CARET",`^${vc[ed.LONECARET]}${vc[ed.XRANGEPLAIN]}$`);$a("CARETLOOSE",`^${vc[ed.LONECARET]}${vc[ed.XRANGEPLAINLOOSE]}$`);$a("COMPARATORLOOSE",`^${vc[ed.GTLT]}\\s*(${vc[ed.LOOSEPLAIN]})$|^$`);$a("COMPARATOR",`^${vc[ed.GTLT]}\\s*(${vc[ed.FULLPLAIN]})$|^$`);$a("COMPARATORTRIM",`(\\s*)${vc[ed.GTLT]}\\s*(${vc[ed.LOOSEPLAIN]}|${vc[ed.XRANGEPLAIN]})`,!0);xb.comparatorTrimReplace="$1$2$3";$a("HYPHENRANGE",`^\\s*(${vc[ed.XRANGEPLAIN]})`+
"\\s+-\\s+"+`(${vc[ed.XRANGEPLAIN]})`+"\\s*$");$a("HYPHENRANGELOOSE",`^\\s*(${vc[ed.XRANGEPLAINLOOSE]})`+"\\s+-\\s+"+`(${vc[ed.XRANGEPLAINLOOSE]})`+"\\s*$");$a("STAR","(\x3c|\x3e)?\x3d?\\s*\\*");$a("GTE0","^\\s*\x3e\x3d\\s*0.0.0\\s*$");$a("GTE0PRE","^\\s*\x3e\x3d\\s*0.0.0-0\\s*$")})(Mb,Mb.exports);const sa=["includePrerelease","loose","rtl"];var ra=$a=>$a?"object"!==typeof $a?{loose:!0}:sa.filter(xb=>$a[xb]).reduce((xb,Nb)=>{xb[Nb]=!0;return xb},{}):{};const xa=/^[0-9]+$/,Ia=($a,xb)=>{const Nb=xa.test($a),
cc=xa.test(xb);Nb&&cc&&($a=+$a,xb=+xb);return $a===xb?0:Nb&&!cc?-1:cc&&!Nb?1:$a<xb?-1:1};var bb={compareIdentifiers:Ia,rcompareIdentifiers:($a,xb)=>Ia(xb,$a)};const {MAX_LENGTH:Hb,MAX_SAFE_INTEGER:zb}=Gb,{re:mb,t:Jb}=Mb.exports,{compareIdentifiers:Eb}=bb;class Db{constructor($a,xb){xb=ra(xb);if($a instanceof Db){if($a.loose===!!xb.loose&&$a.includePrerelease===!!xb.includePrerelease)return $a;$a=$a.version}else if("string"!==typeof $a)throw new TypeError(`Invalid Version: ${$a}`);if($a.length>Hb)throw new TypeError(`version is longer than ${Hb} characters`);
Wb("SemVer",$a,xb);this.options=xb;this.loose=!!xb.loose;this.includePrerelease=!!xb.includePrerelease;xb=$a.trim().match(xb.loose?mb[Jb.LOOSE]:mb[Jb.FULL]);if(!xb)throw new TypeError(`Invalid Version: ${$a}`);this.raw=$a;this.major=+xb[1];this.minor=+xb[2];this.patch=+xb[3];if(this.major>zb||0>this.major)throw new TypeError("Invalid major version");if(this.minor>zb||0>this.minor)throw new TypeError("Invalid minor version");if(this.patch>zb||0>this.patch)throw new TypeError("Invalid patch version");
this.prerelease=xb[4]?xb[4].split(".").map(Nb=>{if(/^[0-9]+$/.test(Nb)){const cc=+Nb;if(0<=cc&&cc<zb)return cc}return Nb}):[];this.build=xb[5]?xb[5].split("."):[];this.format()}format(){this.version=`${this.major}.${this.minor}.${this.patch}`;this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`);return this.version}toString(){return this.version}compare($a){Wb("SemVer.compare",this.version,this.options,$a);if(!($a instanceof Db)){if("string"===typeof $a&&$a===this.version)return 0;
$a=new Db($a,this.options)}return $a.version===this.version?0:this.compareMain($a)||this.comparePre($a)}compareMain($a){$a instanceof Db||($a=new Db($a,this.options));return Eb(this.major,$a.major)||Eb(this.minor,$a.minor)||Eb(this.patch,$a.patch)}comparePre($a){$a instanceof Db||($a=new Db($a,this.options));if(this.prerelease.length&&!$a.prerelease.length)return-1;if(!this.prerelease.length&&$a.prerelease.length)return 1;if(!this.prerelease.length&&!$a.prerelease.length)return 0;let xb=0;do{const Nb=
this.prerelease[xb],cc=$a.prerelease[xb];Wb("prerelease compare",xb,Nb,cc);if(void 0===Nb&&void 0===cc)return 0;if(void 0===cc)return 1;if(void 0===Nb)return-1;if(Nb!==cc)return Eb(Nb,cc)}while(++xb)}compareBuild($a){$a instanceof Db||($a=new Db($a,this.options));let xb=0;do{const Nb=this.build[xb],cc=$a.build[xb];Wb("prerelease compare",xb,Nb,cc);if(void 0===Nb&&void 0===cc)return 0;if(void 0===cc)return 1;if(void 0===Nb)return-1;if(Nb!==cc)return Eb(Nb,cc)}while(++xb)}inc($a,xb){switch($a){case "premajor":this.minor=
this.patch=this.prerelease.length=0;this.major++;this.inc("pre",xb);break;case "preminor":this.patch=this.prerelease.length=0;this.minor++;this.inc("pre",xb);break;case "prepatch":this.prerelease.length=0;this.inc("patch",xb);this.inc("pre",xb);break;case "prerelease":0===this.prerelease.length&&this.inc("patch",xb);this.inc("pre",xb);break;case "major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++;this.patch=this.minor=0;this.prerelease=[];break;case "minor":0===this.patch&&
0!==this.prerelease.length||this.minor++;this.patch=0;this.prerelease=[];break;case "patch":0===this.prerelease.length&&this.patch++;this.prerelease=[];break;case "pre":if(0===this.prerelease.length)this.prerelease=[0];else{for($a=this.prerelease.length;0<=--$a;)"number"===typeof this.prerelease[$a]&&(this.prerelease[$a]++,$a=-2);-1===$a&&this.prerelease.push(0)}xb&&(this.prerelease[0]===xb?isNaN(this.prerelease[1])&&(this.prerelease=[xb,0]):this.prerelease=[xb,0]);break;default:throw Error(`invalid increment argument: ${$a}`);
}this.format();this.raw=this.version;return this}}var bc=Db;const {MAX_LENGTH:jc}=Gb,{re:Tc,t:ub}=Mb.exports;var Rc=($a,xb)=>{xb=ra(xb);if($a instanceof bc)return $a;if("string"!==typeof $a||$a.length>jc||!(xb.loose?Tc[ub.LOOSE]:Tc[ub.FULL]).test($a))return null;try{return new bc($a,xb)}catch(Nb){return null}},Gd=($a,xb,Nb)=>(new bc($a,Nb)).compare(new bc(xb,Nb)),Kd=($a,xb,Nb)=>{$a=new bc($a,Nb);xb=new bc(xb,Nb);return $a.compare(xb)||$a.compareBuild(xb)},Vd=($a,xb,Nb)=>0<Gd($a,xb,Nb),ze=($a,xb,Nb)=>
0>Gd($a,xb,Nb),ee=($a,xb,Nb)=>0<=Gd($a,xb,Nb),bd=($a,xb,Nb)=>0>=Gd($a,xb,Nb),Bd=($a,xb,Nb,cc)=>{switch(xb){case "\x3d\x3d\x3d":return"object"===typeof $a&&($a=$a.version),"object"===typeof Nb&&(Nb=Nb.version),$a===Nb;case "!\x3d\x3d":return"object"===typeof $a&&($a=$a.version),"object"===typeof Nb&&(Nb=Nb.version),$a!==Nb;case "":case "\x3d":case "\x3d\x3d":return 0===Gd($a,Nb,cc);case "!\x3d":return 0!==Gd($a,Nb,cc);case "\x3e":return 0<Gd($a,Nb,cc);case "\x3e\x3d":return 0<=Gd($a,Nb,cc);case "\x3c":return 0>
Gd($a,Nb,cc);case "\x3c\x3d":return 0>=Gd($a,Nb,cc);default:throw new TypeError(`Invalid operator: ${xb}`);}};const {re:Ld,t:fe}=Mb.exports;var Ee=function($a){$a.prototype[Symbol.iterator]=function*(){for(let xb=this.head;xb;xb=xb.next)yield xb.value}};v.Node=O;v.create=v;v.prototype.removeNode=function($a){if($a.list!==this)throw Error("removing node which does not belong to this list");var xb=$a.next,Nb=$a.prev;xb&&(xb.prev=Nb);Nb&&(Nb.next=xb);$a===this.head&&(this.head=xb);$a===this.tail&&(this.tail=
Nb);$a.list.length--;$a.next=null;$a.prev=null;$a.list=null;return xb};v.prototype.unshiftNode=function($a){if($a!==this.head){$a.list&&$a.list.removeNode($a);var xb=this.head;$a.list=this;if($a.next=xb)xb.prev=$a;this.head=$a;this.tail||(this.tail=$a);this.length++}};v.prototype.pushNode=function($a){if($a!==this.tail){$a.list&&$a.list.removeNode($a);var xb=this.tail;$a.list=this;if($a.prev=xb)xb.next=$a;this.tail=$a;this.head||(this.head=$a);this.length++}};v.prototype.push=function(){for(var $a=
0,xb=arguments.length;$a<xb;$a++)this.tail=new O(arguments[$a],this.tail,null,this),this.head||(this.head=this.tail),this.length++;return this.length};v.prototype.unshift=function(){for(var $a=0,xb=arguments.length;$a<xb;$a++)this.head=new O(arguments[$a],null,this.head,this),this.tail||(this.tail=this.head),this.length++;return this.length};v.prototype.pop=function(){if(this.tail){var $a=this.tail.value;(this.tail=this.tail.prev)?this.tail.next=null:this.head=null;this.length--;return $a}};v.prototype.shift=
function(){if(this.head){var $a=this.head.value;(this.head=this.head.next)?this.head.prev=null:this.tail=null;this.length--;return $a}};v.prototype.forEach=function($a,xb){xb=xb||this;for(var Nb=this.head,cc=0;null!==Nb;cc++)$a.call(xb,Nb.value,cc,this),Nb=Nb.next};v.prototype.forEachReverse=function($a,xb){xb=xb||this;for(var Nb=this.tail,cc=this.length-1;null!==Nb;cc--)$a.call(xb,Nb.value,cc,this),Nb=Nb.prev};v.prototype.get=function($a){for(var xb=0,Nb=this.head;null!==Nb&&xb<$a;xb++)Nb=Nb.next;
if(xb===$a&&null!==Nb)return Nb.value};v.prototype.getReverse=function($a){for(var xb=0,Nb=this.tail;null!==Nb&&xb<$a;xb++)Nb=Nb.prev;if(xb===$a&&null!==Nb)return Nb.value};v.prototype.map=function($a,xb){xb=xb||this;for(var Nb=new v,cc=this.head;null!==cc;)Nb.push($a.call(xb,cc.value,this)),cc=cc.next;return Nb};v.prototype.mapReverse=function($a,xb){xb=xb||this;for(var Nb=new v,cc=this.tail;null!==cc;)Nb.push($a.call(xb,cc.value,this)),cc=cc.prev;return Nb};v.prototype.reduce=function($a,xb){var Nb=
this.head;if(1<arguments.length)var cc=xb;else if(this.head)Nb=this.head.next,cc=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var vc=0;null!==Nb;vc++)cc=$a(cc,Nb.value,vc),Nb=Nb.next;return cc};v.prototype.reduceReverse=function($a,xb){var Nb=this.tail;if(1<arguments.length)var cc=xb;else if(this.tail)Nb=this.tail.prev,cc=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var vc=this.length-1;null!==Nb;vc--)cc=$a(cc,
Nb.value,vc),Nb=Nb.prev;return cc};v.prototype.toArray=function(){for(var $a=Array(this.length),xb=0,Nb=this.head;null!==Nb;xb++)$a[xb]=Nb.value,Nb=Nb.next;return $a};v.prototype.toArrayReverse=function(){for(var $a=Array(this.length),xb=0,Nb=this.tail;null!==Nb;xb++)$a[xb]=Nb.value,Nb=Nb.prev;return $a};v.prototype.slice=function($a,xb){xb=xb||this.length;0>xb&&(xb+=this.length);$a=$a||0;0>$a&&($a+=this.length);var Nb=new v;if(xb<$a||0>xb)return Nb;0>$a&&($a=0);xb>this.length&&(xb=this.length);for(var cc=
0,vc=this.head;null!==vc&&cc<$a;cc++)vc=vc.next;for(;null!==vc&&cc<xb;cc++,vc=vc.next)Nb.push(vc.value);return Nb};v.prototype.sliceReverse=function($a,xb){xb=xb||this.length;0>xb&&(xb+=this.length);$a=$a||0;0>$a&&($a+=this.length);var Nb=new v;if(xb<$a||0>xb)return Nb;0>$a&&($a=0);xb>this.length&&(xb=this.length);for(var cc=this.length,vc=this.tail;null!==vc&&cc>xb;cc--)vc=vc.prev;for(;null!==vc&&cc>$a;cc--,vc=vc.prev)Nb.push(vc.value);return Nb};v.prototype.splice=function($a,xb,...Nb){$a>this.length&&
($a=this.length-1);0>$a&&($a=this.length+$a);for(var cc=0,vc=this.head;null!==vc&&cc<$a;cc++)vc=vc.next;$a=[];for(cc=0;vc&&cc<xb;cc++)$a.push(vc.value),vc=this.removeNode(vc);null===vc&&(vc=this.tail);vc!==this.head&&vc!==this.tail&&(vc=vc.prev);for(cc=0;cc<Nb.length;cc++)xb=vc,vc=Nb[cc],xb=xb===this.head?new O(vc,null,xb,this):new O(vc,xb,xb.next,this),null===xb.next&&(this.tail=xb),null===xb.prev&&(this.head=xb),this.length++,vc=xb;return $a};v.prototype.reverse=function(){for(var $a=this.head,
xb=this.tail,Nb=$a;null!==Nb;Nb=Nb.prev){var cc=Nb.prev;Nb.prev=Nb.next;Nb.next=cc}this.head=xb;this.tail=$a;return this};try{Ee(v)}catch($a){}const dd=Symbol("max"),nd=Symbol("length"),Dc=Symbol("lengthCalculator"),jd=Symbol("allowStale"),Qd=Symbol("maxAge"),ae=Symbol("dispose"),te=Symbol("noDisposeOnSet"),Bb=Symbol("lruList"),$b=Symbol("cache"),Gc=Symbol("updateAgeOnGet"),Jc=()=>1;class ud{constructor($a){"number"===typeof $a&&($a={max:$a});$a||($a={});if($a.max&&("number"!==typeof $a.max||0>$a.max))throw new TypeError("max must be a non-negative number");
this[dd]=$a.max||Infinity;const xb=$a.length||Jc;this[Dc]="function"!==typeof xb?Jc:xb;this[jd]=$a.stale||!1;if($a.maxAge&&"number"!==typeof $a.maxAge)throw new TypeError("maxAge must be a number");this[Qd]=$a.maxAge||0;this[ae]=$a.dispose;this[te]=$a.noDisposeOnSet||!1;this[Gc]=$a.updateAgeOnGet||!1;this.reset()}set max($a){if("number"!==typeof $a||0>$a)throw new TypeError("max must be a non-negative number");this[dd]=$a||Infinity;Sd(this)}get max(){return this[dd]}set allowStale($a){this[jd]=!!$a}get allowStale(){return this[jd]}set maxAge($a){if("number"!==
typeof $a)throw new TypeError("maxAge must be a non-negative number");this[Qd]=$a;Sd(this)}get maxAge(){return this[Qd]}set lengthCalculator($a){"function"!==typeof $a&&($a=Jc);$a!==this[Dc]&&(this[Dc]=$a,this[nd]=0,this[Bb].forEach(xb=>{xb.length=this[Dc](xb.value,xb.key);this[nd]+=xb.length}));Sd(this)}get lengthCalculator(){return this[Dc]}get length(){return this[nd]}get itemCount(){return this[Bb].length}rforEach($a,xb){xb=xb||this;for(let Nb=this[Bb].tail;null!==Nb;){const cc=Nb.prev;uc(this,
$a,Nb,xb);Nb=cc}}forEach($a,xb){xb=xb||this;for(let Nb=this[Bb].head;null!==Nb;){const cc=Nb.next;uc(this,$a,Nb,xb);Nb=cc}}keys(){return this[Bb].toArray().map($a=>$a.key)}values(){return this[Bb].toArray().map($a=>$a.value)}reset(){this[ae]&&this[Bb]&&this[Bb].length&&this[Bb].forEach($a=>this[ae]($a.key,$a.value));this[$b]=new Map;this[Bb]=new v;this[nd]=0}dump(){return this[Bb].map($a=>xd(this,$a)?!1:{k:$a.key,v:$a.value,e:$a.now+($a.maxAge||0)}).toArray().filter($a=>$a)}dumpLru(){return this[Bb]}set($a,
xb,Nb){if((Nb=Nb||this[Qd])&&"number"!==typeof Nb)throw new TypeError("maxAge must be a number");const cc=Nb?Date.now():0,vc=this[Dc](xb,$a);if(this[$b].has($a)){if(vc>this[dd])return ie(this,this[$b].get($a)),!1;const ed=this[$b].get($a).value;if(this[ae]&&!this[te])this[ae]($a,ed.value);ed.now=cc;ed.maxAge=Nb;ed.value=xb;this[nd]+=vc-ed.length;ed.length=vc;this.get($a);Sd(this);return!0}Nb=new Be($a,xb,vc,cc,Nb);if(Nb.length>this[dd]){if(this[ae])this[ae]($a,xb);return!1}this[nd]+=Nb.length;this[Bb].unshift(Nb);
this[$b].set($a,this[Bb].head);Sd(this);return!0}has($a){if(!this[$b].has($a))return!1;$a=this[$b].get($a).value;return!xd(this,$a)}get($a){return Zc(this,$a,!0)}peek($a){return Zc(this,$a,!1)}pop(){const $a=this[Bb].tail;if(!$a)return null;ie(this,$a);return $a.value}del($a){ie(this,this[$b].get($a))}load($a){this.reset();const xb=Date.now();for(let cc=$a.length-1;0<=cc;cc--){const vc=$a[cc];var Nb=vc.e||0;0===Nb?this.set(vc.k,vc.v):(Nb-=xb,0<Nb&&this.set(vc.k,vc.v,Nb))}}prune(){this[$b].forEach(($a,
xb)=>Zc(this,xb,!1))}}const Zc=($a,xb,Nb)=>{if(xb=$a[$b].get(xb)){const cc=xb.value;if(xd($a,cc)){if(ie($a,xb),!$a[jd])return}else Nb&&($a[Gc]&&(xb.value.now=Date.now()),$a[Bb].unshiftNode(xb));return cc.value}},xd=($a,xb)=>{if(!xb||!xb.maxAge&&!$a[Qd])return!1;const Nb=Date.now()-xb.now;return xb.maxAge?Nb>xb.maxAge:$a[Qd]&&Nb>$a[Qd]},Sd=$a=>{if($a[nd]>$a[dd])for(let xb=$a[Bb].tail;$a[nd]>$a[dd]&&null!==xb;){const Nb=xb.prev;ie($a,xb);xb=Nb}},ie=($a,xb)=>{if(xb){const Nb=xb.value;if($a[ae])$a[ae](Nb.key,
Nb.value);$a[nd]-=Nb.length;$a[$b].delete(Nb.key);$a[Bb].removeNode(xb)}};class Be{constructor($a,xb,Nb,cc,vc){this.key=$a;this.value=xb;this.length=Nb;this.now=cc;this.maxAge=vc||0}}const uc=($a,xb,Nb,cc)=>{let vc=Nb.value;xd($a,vc)&&(ie($a,Nb),$a[jd]||(vc=void 0));vc&&xb.call(cc,vc.value,vc.key,$a)};class Oc{constructor($a,xb){xb=pe(xb);if($a instanceof Oc)return $a.loose===!!xb.loose&&$a.includePrerelease===!!xb.includePrerelease?$a:new Oc($a.raw,xb);if($a instanceof ye)return this.raw=$a.value,
this.set=[[$a]],this.format(),this;this.options=xb;this.loose=!!xb.loose;this.includePrerelease=!!xb.includePrerelease;this.raw=$a;this.set=$a.split(/\s*\|\|\s*/).map(Nb=>this.parseRange(Nb.trim())).filter(Nb=>Nb.length);if(!this.set.length)throw new TypeError(`Invalid SemVer Range: ${$a}`);if(1<this.set.length)if($a=this.set[0],this.set=this.set.filter(Nb=>"\x3c0.0.0-0"!==Nb[0].value),0===this.set.length)this.set=[$a];else if(1<this.set.length)for(const Nb of this.set)if(1===Nb.length&&""===Nb[0].value){this.set=
[Nb];break}this.format()}format(){return this.range=this.set.map($a=>$a.join(" ").trim()).join("||").trim()}toString(){return this.range}parseRange($a){$a=$a.trim();const xb=`parseRange:${Object.keys(this.options).join(",")}:${$a}`;var Nb=Od.get(xb);if(Nb)return Nb;Nb=this.options.loose;$a=$a.replace(Nb?hd[ge.HYPHENRANGELOOSE]:hd[ge.HYPHENRANGE],If(this.options.includePrerelease));me("hyphen replace",$a);$a=$a.replace(hd[ge.COMPARATORTRIM],$d);me("comparator trim",$a,hd[ge.COMPARATORTRIM]);$a=$a.replace(hd[ge.TILDETRIM],
cd);$a=$a.replace(hd[ge.CARETTRIM],Ie);$a=$a.split(/\s+/).join(" ");const cc=Nb?hd[ge.COMPARATORLOOSE]:hd[ge.COMPARATOR];$a=$a.split(" ").map(ed=>{var jb=ed;ed=this.options;me("comp",jb,ed);jb=Ye(jb,ed);me("caret",jb);jb=$e(jb,ed);me("tildes",jb);jb=jg(jb,ed);me("xrange",jb);me("replaceStars",jb,ed);jb=jb.trim().replace(hd[ge.STAR],"");me("stars",jb);return jb}).join(" ").split(/\s+/).map(ed=>{var jb=this.options;me("replaceGTE0",ed,jb);return ed.trim().replace(hd[jb.includePrerelease?ge.GTE0PRE:
ge.GTE0],"")}).filter(this.options.loose?ed=>!!ed.match(cc):()=>!0).map(ed=>new ye(ed,this.options));$a.length;Nb=new Map;for(var vc of $a){if("\x3c0.0.0-0"===vc.value)return[vc];Nb.set(vc.value,vc)}1<Nb.size&&Nb.has("")&&Nb.delete("");vc=[...Nb.values()];Od.set(xb,vc);return vc}intersects($a,xb){if(!($a instanceof Oc))throw new TypeError("a Range is required");return this.set.some(Nb=>Je(Nb,xb)&&$a.set.some(cc=>Je(cc,xb)&&Nb.every(vc=>cc.every(ed=>vc.intersects(ed,xb)))))}test($a){if(!$a)return!1;
if("string"===typeof $a)try{$a=new od($a,this.options)}catch(ed){return!1}for(let ed=0;ed<this.set.length;ed++){a:{var xb=this.set[ed];var Nb=$a,cc=this.options;for(var vc=0;vc<xb.length;vc++)if(!xb[vc].test(Nb)){xb=!1;break a}if(Nb.prerelease.length&&!cc.includePrerelease){for(cc=0;cc<xb.length;cc++)if(me(xb[cc].semver),xb[cc].semver!==ye.ANY&&0<xb[cc].semver.prerelease.length&&(vc=xb[cc].semver,vc.major===Nb.major&&vc.minor===Nb.minor&&vc.patch===Nb.patch)){xb=!0;break a}xb=!1}else xb=!0}if(xb)return!0}return!1}}
var Nd=Oc;const Od=new ud({max:1E3}),pe=ra,ye=pf,me=Wb,od=bc,{re:hd,t:ge,comparatorTrimReplace:$d,tildeTrimReplace:cd,caretTrimReplace:Ie}=Mb.exports,Je=($a,xb)=>{let Nb=!0;$a=$a.slice();let cc=$a.pop();for(;Nb&&$a.length;)Nb=$a.every(vc=>cc.intersects(vc,xb)),cc=$a.pop();return Nb},Ad=$a=>!$a||"x"===$a.toLowerCase()||"*"===$a,$e=($a,xb)=>$a.trim().split(/\s+/).map(Nb=>qf(Nb,xb)).join(" "),qf=($a,xb)=>$a.replace(xb.loose?hd[ge.TILDELOOSE]:hd[ge.TILDE],(Nb,cc,vc,ed,jb)=>{me("tilde",$a,Nb,cc,vc,ed,
jb);Ad(cc)?Nb="":Ad(vc)?Nb=`>=${cc}.0.0 <${+cc+1}.0.0-0`:Ad(ed)?Nb=`>=${cc}.${vc}.0 <${cc}.${+vc+1}.0-0`:jb?(me("replaceTilde pr",jb),Nb=`>=${cc}.${vc}.${ed}-${jb} <${cc}.${+vc+1}.0-0`):Nb=`>=${cc}.${vc}.${ed} <${cc}.${+vc+1}.0-0`;me("tilde return",Nb);return Nb}),Ye=($a,xb)=>$a.trim().split(/\s+/).map(Nb=>af(Nb,xb)).join(" "),af=($a,xb)=>{me("caret",$a,xb);const Nb=xb.includePrerelease?"-0":"";return $a.replace(xb.loose?hd[ge.CARETLOOSE]:hd[ge.CARET],(cc,vc,ed,jb,Qb)=>{me("caret",$a,cc,vc,ed,jb,
Qb);Ad(vc)?cc="":Ad(ed)?cc=`>=${vc}.0.0${Nb} <${+vc+1}.0.0-0`:Ad(jb)?cc="0"===vc?`>=${vc}.${ed}.0${Nb} <${vc}.${+ed+1}.0-0`:`>=${vc}.${ed}.0${Nb} <${+vc+1}.0.0-0`:Qb?(me("replaceCaret pr",Qb),cc="0"===vc?"0"===ed?`>=${vc}.${ed}.${jb}-${Qb} <${vc}.${ed}.${+jb+1}-0`:`>=${vc}.${ed}.${jb}-${Qb} <${vc}.${+ed+1}.0-0`:`>=${vc}.${ed}.${jb}-${Qb} <${+vc+1}.0.0-0`):(me("no pr"),cc="0"===vc?"0"===ed?`>=${vc}.${ed}.${jb}${Nb} <${vc}.${ed}.${+jb+1}-0`:`>=${vc}.${ed}.${jb}${Nb} <${vc}.${+ed+1}.0-0`:`>=${vc}.${ed}.${jb} <${+vc+
1}.0.0-0`);me("caret return",cc);return cc})},jg=($a,xb)=>{me("replaceXRanges",$a,xb);return $a.split(/\s+/).map(Nb=>oe(Nb,xb)).join(" ")},oe=($a,xb)=>{$a=$a.trim();return $a.replace(xb.loose?hd[ge.XRANGELOOSE]:hd[ge.XRANGE],(Nb,cc,vc,ed,jb,Qb)=>{me("xRange",$a,Nb,cc,vc,ed,jb,Qb);const pc=Ad(vc),Qc=pc||Ad(ed);jb=Qc||Ad(jb);"\x3d"===cc&&jb&&(cc="");Qb=xb.includePrerelease?"-0":"";pc?Nb="\x3e"===cc||"\x3c"===cc?"\x3c0.0.0-0":"*":cc&&jb?(Qc&&(ed=0),jb=0,"\x3e"===cc?(cc="\x3e\x3d",Qc?(vc=+vc+1,ed=0):
ed=+ed+1,jb=0):"\x3c\x3d"===cc&&(cc="\x3c",Qc?vc=+vc+1:ed=+ed+1),"\x3c"===cc&&(Qb="-0"),Nb=`${cc+vc}.${ed}.${jb}${Qb}`):Qc?Nb=`>=${vc}.0.0${Qb} <${+vc+1}.0.0-0`:jb&&(Nb=`>=${vc}.${ed}.0${Qb} <${vc}.${+ed+1}.0-0`);me("xRange return",Nb);return Nb})},If=$a=>(xb,Nb,cc,vc,ed,jb,Qb,pc,Qc,Cc,vd,Wd,we)=>{Nb=Ad(cc)?"":Ad(vc)?`>=${cc}.0.0${$a?"-0":""}`:Ad(ed)?`>=${cc}.${vc}.0${$a?"-0":""}`:jb?`>=${Nb}`:`>=${Nb}${$a?"-0":""}`;pc=Ad(Qc)?"":Ad(Cc)?`<${+Qc+1}.0.0-0`:Ad(vd)?`<${Qc}.${+Cc+1}.0-0`:Wd?`<=${Qc}.${Cc}.${vd}-${Wd}`:
$a?`<${Qc}.${Cc}.${+vd+1}-0`:`<=${pc}`;return`${Nb} ${pc}`.trim()},hg=Symbol("SemVer ANY");class zg{static get ANY(){return hg}constructor($a,xb){xb=bg(xb);if($a instanceof zg){if($a.loose===!!xb.loose)return $a;$a=$a.value}zc("comparator",$a,xb);this.options=xb;this.loose=!!xb.loose;this.parse($a);this.value=this.semver===hg?"":this.operator+this.semver.version;zc("comp",this)}parse($a){const xb=$a.match(this.options.loose?wg[Tf.COMPARATORLOOSE]:wg[Tf.COMPARATOR]);if(!xb)throw new TypeError(`Invalid comparator: ${$a}`);
this.operator=void 0!==xb[1]?xb[1]:"";"\x3d"===this.operator&&(this.operator="");this.semver=xb[2]?new Wa(xb[2],this.options.loose):hg}toString(){return this.value}test($a){zc("Comparator.test",$a,this.options.loose);if(this.semver===hg||$a===hg)return!0;if("string"===typeof $a)try{$a=new Wa($a,this.options)}catch(xb){return!1}return sg($a,this.operator,this.semver,this.options)}intersects($a,xb){if(!($a instanceof zg))throw new TypeError("a Comparator is required");xb&&"object"===typeof xb||(xb=
{loose:!!xb,includePrerelease:!1});if(""===this.operator)return""===this.value?!0:(new Ha($a.value,xb)).test(this.value);if(""===$a.operator)return""===$a.value?!0:(new Ha(this.value,xb)).test($a.semver);const Nb=("\x3e\x3d"===this.operator||"\x3e"===this.operator)&&("\x3e\x3d"===$a.operator||"\x3e"===$a.operator),cc=("\x3c\x3d"===this.operator||"\x3c"===this.operator)&&("\x3c\x3d"===$a.operator||"\x3c"===$a.operator),vc=this.semver.version===$a.semver.version,ed=("\x3e\x3d"===this.operator||"\x3c\x3d"===
this.operator)&&("\x3e\x3d"===$a.operator||"\x3c\x3d"===$a.operator),jb=sg(this.semver,"\x3c",$a.semver,xb)&&("\x3e\x3d"===this.operator||"\x3e"===this.operator)&&("\x3c\x3d"===$a.operator||"\x3c"===$a.operator);$a=sg(this.semver,"\x3e",$a.semver,xb)&&("\x3c\x3d"===this.operator||"\x3c"===this.operator)&&("\x3e\x3d"===$a.operator||"\x3e"===$a.operator);return Nb||cc||vc&&ed||jb||$a}}var pf=zg;const bg=ra,{re:wg,t:Tf}=Mb.exports,sg=Bd,zc=Wb,Wa=bc,Ha=Nd;var m=($a,xb,Nb)=>{try{xb=new Nd(xb,Nb)}catch(cc){return!1}return xb.test($a)};
const Na=pf,{ANY:Xb}=Na;var Xc=($a,xb,Nb,cc)=>{$a=new bc($a,cc);xb=new Nd(xb,cc);let vc,ed,jb,Qb;switch(Nb){case "\x3e":vc=Vd;Nb=bd;ed=ze;jb="\x3e";Qb="\x3e\x3d";break;case "\x3c":vc=ze;Nb=ee;ed=Vd;jb="\x3c";Qb="\x3c\x3d";break;default:throw new TypeError('Must provide a hilo val of "\x3c" or "\x3e"');}if(m($a,xb,cc))return!1;for(let pc=0;pc<xb.set.length;++pc){let Qc=null,Cc=null;xb.set[pc].forEach(vd=>{vd.semver===Xb&&(vd=new Na("\x3e\x3d0.0.0"));Qc=Qc||vd;Cc=Cc||vd;vc(vd.semver,Qc.semver,cc)?Qc=
vd:ed(vd.semver,Cc.semver,cc)&&(Cc=vd)});if(Qc.operator===jb||Qc.operator===Qb||(!Cc.operator||Cc.operator===jb)&&Nb($a,Cc.semver)||Cc.operator===Qb&&ed($a,Cc.semver))return!1}return!0};const Id=pf,{ANY:Td}=Id,nf=($a,xb,Nb)=>{if($a===xb)return!0;if(1===$a.length&&$a[0].semver===Td){if(1===xb.length&&xb[0].semver===Td)return!0;$a=Nb.includePrerelease?[new Id("\x3e\x3d0.0.0-0")]:[new Id("\x3e\x3d0.0.0")]}if(1===xb.length&&xb[0].semver===Td){if(Nb.includePrerelease)return!0;xb=[new Id("\x3e\x3d0.0.0")]}var cc=
new Set;let vc,ed;for(const Qc of $a)"\x3e"===Qc.operator||"\x3e\x3d"===Qc.operator?vc=Se(vc,Qc,Nb):"\x3c"===Qc.operator||"\x3c\x3d"===Qc.operator?ed=Rd(ed,Qc,Nb):cc.add(Qc.semver);if(1<cc.size)return null;let jb;if(vc&&ed&&(jb=Gd(vc.semver,ed.semver,Nb),0<jb||0===jb&&("\x3e\x3d"!==vc.operator||"\x3c\x3d"!==ed.operator)))return null;for(const Qc of cc){if(vc&&!m(Qc,String(vc),Nb)||ed&&!m(Qc,String(ed),Nb))return null;for(const Cc of xb)if(!m(Qc,String(Cc),Nb))return!1;return!0}let Qb,pc;$a=ed&&!Nb.includePrerelease&&
ed.semver.prerelease.length?ed.semver:!1;cc=vc&&!Nb.includePrerelease&&vc.semver.prerelease.length?vc.semver:!1;$a&&1===$a.prerelease.length&&"\x3c"===ed.operator&&0===$a.prerelease[0]&&($a=!1);for(const Qc of xb){pc=pc||"\x3e"===Qc.operator||"\x3e\x3d"===Qc.operator;Qb=Qb||"\x3c"===Qc.operator||"\x3c\x3d"===Qc.operator;if(vc)if(cc&&Qc.semver.prerelease&&Qc.semver.prerelease.length&&Qc.semver.major===cc.major&&Qc.semver.minor===cc.minor&&Qc.semver.patch===cc.patch&&(cc=!1),"\x3e"===Qc.operator||"\x3e\x3d"===
Qc.operator){if(xb=Se(vc,Qc,Nb),xb===Qc&&xb!==vc)return!1}else if("\x3e\x3d"===vc.operator&&!m(vc.semver,String(Qc),Nb))return!1;if(ed)if($a&&Qc.semver.prerelease&&Qc.semver.prerelease.length&&Qc.semver.major===$a.major&&Qc.semver.minor===$a.minor&&Qc.semver.patch===$a.patch&&($a=!1),"\x3c"===Qc.operator||"\x3c\x3d"===Qc.operator){if(xb=Rd(ed,Qc,Nb),xb===Qc&&xb!==ed)return!1}else if("\x3c\x3d"===ed.operator&&!m(ed.semver,String(Qc),Nb))return!1;if(!Qc.operator&&(ed||vc)&&0!==jb)return!1}return vc&&
Qb&&!ed&&0!==jb||ed&&pc&&!vc&&0!==jb||cc||$a?!1:!0},Se=($a,xb,Nb)=>{if(!$a)return xb;Nb=Gd($a.semver,xb.semver,Nb);return 0<Nb?$a:0>Nb?xb:"\x3e"===xb.operator&&"\x3e\x3d"===$a.operator?xb:$a},Rd=($a,xb,Nb)=>{if(!$a)return xb;Nb=Gd($a.semver,xb.semver,Nb);return 0>Nb?$a:0<Nb?xb:"\x3c"===xb.operator&&"\x3c\x3d"===$a.operator?xb:$a},Vf=Mb.exports;var jf={re:Vf.re,src:Vf.src,tokens:Vf.t,SEMVER_SPEC_VERSION:Gb.SEMVER_SPEC_VERSION,SemVer:bc,compareIdentifiers:bb.compareIdentifiers,rcompareIdentifiers:bb.rcompareIdentifiers,
parse:Rc,valid:($a,xb)=>($a=Rc($a,xb))?$a.version:null,clean:($a,xb)=>($a=Rc($a.trim().replace(/^[=v]+/,""),xb))?$a.version:null,inc:($a,xb,Nb,cc)=>{"string"===typeof Nb&&(cc=Nb,Nb=void 0);try{return(new bc($a,Nb)).inc(xb,cc).version}catch(vc){return null}},diff:($a,xb)=>{if(0===Gd($a,xb,void 0))return null;$a=Rc($a);xb=Rc(xb);const Nb=$a.prerelease.length||xb.prerelease.length,cc=Nb?"pre":"";for(const vc in $a)if(("major"===vc||"minor"===vc||"patch"===vc)&&$a[vc]!==xb[vc])return cc+vc;return Nb?
"prerelease":""},major:($a,xb)=>(new bc($a,xb)).major,minor:($a,xb)=>(new bc($a,xb)).minor,patch:($a,xb)=>(new bc($a,xb)).patch,prerelease:($a,xb)=>($a=Rc($a,xb))&&$a.prerelease.length?$a.prerelease:null,compare:Gd,rcompare:($a,xb,Nb)=>Gd(xb,$a,Nb),compareLoose:($a,xb)=>Gd($a,xb,!0),compareBuild:Kd,sort:($a,xb)=>$a.sort((Nb,cc)=>Kd(Nb,cc,xb)),rsort:($a,xb)=>$a.sort((Nb,cc)=>Kd(cc,Nb,xb)),gt:Vd,lt:ze,eq:($a,xb,Nb)=>0===Gd($a,xb,Nb),neq:($a,xb,Nb)=>0!==Gd($a,xb,Nb),gte:ee,lte:bd,cmp:Bd,coerce:($a,xb)=>
{if($a instanceof bc)return $a;"number"===typeof $a&&($a=String($a));if("string"!==typeof $a)return null;xb=xb||{};let Nb=null;if(xb.rtl){let cc;for(;(cc=Ld[fe.COERCERTL].exec($a))&&(!Nb||Nb.index+Nb[0].length!==$a.length);)Nb&&cc.index+cc[0].length===Nb.index+Nb[0].length||(Nb=cc),Ld[fe.COERCERTL].lastIndex=cc.index+cc[1].length+cc[2].length;Ld[fe.COERCERTL].lastIndex=-1}else Nb=$a.match(Ld[fe.COERCE]);return null===Nb?null:Rc(`${Nb[2]}.${Nb[3]||"0"}.${Nb[4]||"0"}`,xb)},Comparator:pf,Range:Nd,satisfies:m,
toComparators:($a,xb)=>(new Nd($a,xb)).set.map(Nb=>Nb.map(cc=>cc.value).join(" ").trim().split(" ")),maxSatisfying:($a,xb,Nb)=>{let cc=null,vc=null,ed=null;try{ed=new Nd(xb,Nb)}catch(jb){return null}$a.forEach(jb=>{!ed.test(jb)||cc&&-1!==vc.compare(jb)||(cc=jb,vc=new bc(cc,Nb))});return cc},minSatisfying:($a,xb,Nb)=>{let cc=null,vc=null,ed=null;try{ed=new Nd(xb,Nb)}catch(jb){return null}$a.forEach(jb=>{!ed.test(jb)||cc&&1!==vc.compare(jb)||(cc=jb,vc=new bc(cc,Nb))});return cc},minVersion:($a,xb)=>
{$a=new Nd($a,xb);xb=new bc("0.0.0");if($a.test(xb))return xb;xb=new bc("0.0.0-0");if($a.test(xb))return xb;xb=null;for(let Nb=0;Nb<$a.set.length;++Nb){let cc=null;$a.set[Nb].forEach(vc=>{const ed=new bc(vc.semver.version);switch(vc.operator){case "\x3e":0===ed.prerelease.length?ed.patch++:ed.prerelease.push(0),ed.raw=ed.format();case "":case "\x3e\x3d":if(!cc||0<Gd(ed,cc,void 0))cc=ed;break;case "\x3c":case "\x3c\x3d":break;default:throw Error(`Unexpected operation: ${vc.operator}`);}});!cc||xb&&
!(0<Gd(xb,cc,void 0))||(xb=cc)}return xb&&$a.test(xb)?xb:null},validRange:($a,xb)=>{try{return(new Nd($a,xb)).range||"*"}catch(Nb){return null}},outside:Xc,gtr:($a,xb,Nb)=>Xc($a,xb,"\x3e",Nb),ltr:($a,xb,Nb)=>Xc($a,xb,"\x3c",Nb),intersects:($a,xb,Nb)=>{$a=new Nd($a,Nb);xb=new Nd(xb,Nb);return $a.intersects(xb)},simplifyRange:($a,xb,Nb)=>{var cc=[],vc=null;let ed=null;$a=$a.sort((jb,Qb)=>Gd(jb,Qb,Nb));for(const jb of $a)m(jb,xb,Nb)?(ed=jb,vc||(vc=jb)):(ed&&cc.push([vc,ed]),vc=ed=null);vc&&cc.push([vc,
null]);vc=[];for(const [jb,Qb]of cc)jb===Qb?vc.push(jb):Qb||jb!==$a[0]?Qb?jb===$a[0]?vc.push(`<=${Qb}`):vc.push(`${jb} - ${Qb}`):vc.push(`>=${jb}`):vc.push("*");cc=vc.join(" || ");return cc.length<("string"===typeof xb.raw?xb.raw:String(xb)).length?cc:xb},subset:($a,xb,Nb={})=>{if($a===xb)return!0;$a=new Nd($a,Nb);xb=new Nd(xb,Nb);let cc=!1;a:for(const vc of $a.set){for(const ed of xb.set)if($a=nf(vc,ed,Nb),cc=cc||null!==$a,$a)continue a;if(cc)return!1}return!0}};const Jf={"category-6":"#ec8431 #829eb1 #c89d29 #3580b1 #adc839 #ab7fb4".split(" "),
"fire-7":"#fbf2c7 #f9e39c #f8d36e #f4bb6a #e68a4f #d15a40 #ab4232".split(" "),"fireandice-6":"#e68a4f #f4bb6a #f9e39c #dadfe2 #a6b7c6 #849eae".split(" "),"ice-7":"#edefee #dadfe2 #c4ccd2 #a6b7c6 #849eae #607785 #47525d".split(" ")},Xf={"main-colors":"#1696d2 #d2d2d2 #000000 #fdbf11 #ec008b #55b748 #5c5859 #db2b27".split(" "),"shades-blue":"#CFE8F3 #A2D4EC #73BFE2 #46ABDB #1696D2 #12719E #0A4C6A #062635".split(" "),"shades-gray":"#F5F5F5 #ECECEC #E3E3E3 #DCDBDB #D2D2D2 #9D9D9D #696969 #353535".split(" "),
"shades-yellow":"#FFF2CF #FCE39E #FDD870 #FCCB41 #FDBF11 #E88E2D #CA5800 #843215".split(" "),"shades-magenta":"#F5CBDF #EB99C2 #E46AA7 #E54096 #EC008B #AF1F6B #761548 #351123".split(" "),"shades-green":"#DCEDD9 #BCDEB4 #98CF90 #78C26D #55B748 #408941 #2C5C2D #1A2E19".split(" "),"shades-black":"#D5D5D4 #ADABAC #848081 #5C5859 #332D2F #262223 #1A1717 #0E0C0D".split(" "),"shades-red":"#F8D5D4 #F1AAA9 #E9807D #E25552 #DB2B27 #A4201D #6E1614 #370B0A".split(" "),"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2",
"#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2",
"#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":"#1696d2 #ec008b #fdbf11 #000000 #d2d2d2 #55b748".split(" "),"six-groups-cat-2":"#1696d2 #d2d2d2 #ec008b #fdbf11 #332d2f #0a4c6a".split(" "),"six-groups-seq":"#cfe8f3 #a2d4ec #73bfe2 #46abdb #1696d2 #12719e".split(" "),"diverging-colors":"#ca5800 #fdbf11 #fdd870 #fff2cf #cfe8f3 #73bfe2 #1696d2 #0a4c6a".split(" ")};var Pg=Object.freeze({__proto__:null,dark:{background:"#333",
title:{color:"#fff",subtitleColor:"#fff"},style:{"guide-label":{fill:"#fff"},"guide-title":{fill:"#fff"}},axis:{domainColor:"#fff",gridColor:"#888",tickColor:"#fff"}},excel:{background:"#fff",arc:{fill:"#4572a7"},area:{fill:"#4572a7"},line:{stroke:"#4572a7",strokeWidth:2},path:{stroke:"#4572a7"},rect:{fill:"#4572a7"},shape:{stroke:"#4572a7"},symbol:{fill:"#4572a7",strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},
axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:"#4572a7 #aa4643 #8aa453 #71598e #4598ae #d98445 #94aace #d09393 #b9cc98 #a99cbc".split(" ")}},fivethirtyeight:{arc:{fill:"#30a2da"},area:{fill:"#30a2da"},axis:{domainColor:"#cbcbcb",grid:!0,gridColor:"#cbcbcb",gridWidth:1,labelColor:"#999",labelFontSize:10,titleColor:"#333",tickColor:"#cbcbcb",tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},
background:"#f0f0f0",group:{fill:"#f0f0f0"},legend:{labelColor:"#333",labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:"#333",titleFontSize:14,titlePadding:10},line:{stroke:"#30a2da",strokeWidth:2},path:{stroke:"#30a2da",strokeWidth:.5},rect:{fill:"#30a2da"},range:{category:"#30a2da #fc4f30 #e5ae38 #6d904f #8b8b8b #b96db8 #ff9e27 #56cc60 #52d2ca #52689e #545454 #9fe4f8".split(" "),diverging:"#cc0020 #e77866 #f6e7e1 #d6e8ed #91bfd9 #1d78b5".split(" "),heatmap:["#d6e8ed","#cee0e5",
"#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:"#30a2da"},bar:{binSpacing:2,fill:"#30a2da",stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},ggplot2:{group:{fill:"#e5e5e5"},arc:{fill:"#000"},area:{fill:"#000"},line:{stroke:"#000"},path:{stroke:"#000"},rect:{fill:"#000"},shape:{stroke:"#000"},symbol:{fill:"#000",size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,
titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:"#000000 #7F7F7F #1A1A1A #999999 #333333 #B0B0B0 #4D4D4D #C9C9C9 #666666 #DCDCDC".split(" ")}},googlecharts:{arc:{fill:"#3366CC"},area:{fill:"#3366CC"},path:{stroke:"#3366CC"},rect:{fill:"#3366CC"},shape:{stroke:"#3366CC"},symbol:{stroke:"#3366CC"},circle:{fill:"#3366CC"},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:"Arial, sans-serif",
fontSize:12},"guide-title":{font:"Arial, sans-serif",fontSize:12},"group-title":{font:"Arial, sans-serif",fontSize:12}},title:{font:"Arial, sans-serif",fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:"#ccc",tickColor:"#ccc",domain:!1,grid:!0},range:{category:"#4285F4 #DB4437 #F4B400 #0F9D58 #AB47BC #00ACC1 #FF7043 #9E9D24 #5C6BC0 #F06292 #00796B #C2185B".split(" "),heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},latimes:{background:"#ffffff",title:{anchor:"start",color:"#000000",font:"Benton Gothic Bold, sans-serif",
fontSize:22,fontWeight:"normal"},arc:{fill:"#82c6df"},area:{fill:"#82c6df"},line:{stroke:"#82c6df",strokeWidth:2},path:{stroke:"#82c6df"},rect:{fill:"#82c6df"},shape:{stroke:"#82c6df"},symbol:{fill:"#82c6df",size:30},axis:{labelFont:"Benton Gothic, sans-serif",labelFontSize:11.5,labelFontWeight:"normal",titleFont:"Benton Gothic Bold, sans-serif",titleFontSize:13,titleFontWeight:"normal"},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,
titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:"Benton Gothic, sans-serif",labelFontSize:11.5,symbolType:"square",titleFont:"Benton Gothic Bold, sans-serif",titleFontSize:13,titleFontWeight:"normal"},range:{category:Jf["category-6"],diverging:Jf["fireandice-6"],heatmap:Jf["fire-7"],ordinal:Jf["fire-7"],ramp:Jf["fire-7"]}},quartz:{background:"#f9f9f9",arc:{fill:"#ab5787"},area:{fill:"#ab5787"},line:{stroke:"#ab5787"},path:{stroke:"#ab5787"},rect:{fill:"#ab5787"},shape:{stroke:"#ab5787"},
symbol:{fill:"#ab5787",size:30},axis:{domainColor:"#979797",domainWidth:.5,gridWidth:.2,labelColor:"#979797",tickColor:"#979797",tickWidth:.2,titleColor:"#979797"},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:"#ab5787 #51b2e5 #703c5c #168dd9 #d190b6 #00609f #d365ba #154866 #666666 #c4c4c4".split(" ")}},urbaninstitute:{background:"#FFFFFF",title:{anchor:"start",fontSize:18,font:"Lato"},
axisX:{domain:!0,domainColor:"#000000",domainWidth:1,grid:!1,labelFontSize:12,labelFont:"Lato",labelAngle:0,tickColor:"#000000",tickSize:5,titleFontSize:12,titlePadding:10,titleFont:"Lato"},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:"#DEDDDD",gridWidth:1,labelFontSize:12,labelFont:"Lato",labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:"Lato",titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:"Lato",symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:"Lato",
orient:"right",offset:10},view:{stroke:"transparent"},range:{category:Xf["six-groups-cat-1"],diverging:Xf["diverging-colors"],heatmap:Xf["diverging-colors"],ordinal:Xf["six-groups-seq"],ramp:Xf["shades-blue"]},area:{fill:"#1696d2"},rect:{fill:"#1696d2"},line:{color:"#1696d2",stroke:"#1696d2",strokeWidth:5},trail:{color:"#1696d2",stroke:"#1696d2",strokeWidth:0,size:1},path:{stroke:"#1696d2",strokeWidth:.5},point:{filled:!0},text:{font:"Lato",color:"#1696d2",fontSize:11,align:"center",fontWeight:400,
size:11},style:{bar:{fill:"#1696d2",stroke:null}},arc:{fill:"#1696d2"},shape:{stroke:"#1696d2"},symbol:{fill:"#1696d2",size:30}},version:"2.10.0",vox:{background:"#fff",arc:{fill:"#3e5c69"},area:{fill:"#3e5c69"},line:{stroke:"#3e5c69"},path:{stroke:"#3e5c69"},rect:{fill:"#3e5c69"},shape:{stroke:"#3e5c69"},symbol:{fill:"#3e5c69"},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,
padding:1,symbolType:"square"},range:{category:"#3e5c69 #6793a6 #182429 #0570b0 #3690c0 #74a9cf #a6bddb #e2ddf2".split(" ")}}});const dh=$a=>function(xb){return xb[$a]},Zg=$a=>{const xb=$a.length;return function(Nb){for(let cc=0;cc<xb;++cc)Nb=Nb[$a[cc]];return Nb}};(function($a,xb,Nb){const cc=T($a);$a=1===cc.length?cc[0]:$a;return A((Nb&&Nb.get||J)(cc),[$a],xb||$a)})("id");A($a=>$a,[],"identity");A(()=>0,[],"zero");A(()=>1,[],"one");A(()=>!0,[],"true");A(()=>!1,[],"false");var Yf=Array.isArray;const be=
{offsetX:10,offsetY:10,id:"vg-tooltip-element",styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:function($a){return String($a).replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;")},maxDepth:2};class Kf{constructor($a){this.options=Object.assign(Object.assign({},be),$a);var xb=this.options.id;this.el=null;this.call=this.tooltipHandler.bind(this);if(!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){$a=document.createElement("style");$a.setAttribute("id",
this.options.styleId);if(!/^[A-Za-z]+[-:.\w]*$/.test(xb))throw Error("Invalid HTML ID");xb="#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black; }\n  #vg-tooltip-element.visible {\n    visibility: visible; }\n  #vg-tooltip-element h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 13px; }\n  #vg-tooltip-element img {\n    max-width: 200px;\n    max-height: 200px; }\n  #vg-tooltip-element table {\n    border-spacing: 0; }\n    #vg-tooltip-element table tr {\n      border: none; }\n      #vg-tooltip-element table tr td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-top: 2px;\n        padding-bottom: 2px; }\n        #vg-tooltip-element table tr td.key {\n          color: #808080;\n          max-width: 150px;\n          text-align: right;\n          padding-right: 4px; }\n        #vg-tooltip-element table tr td.value {\n          display: block;\n          max-width: 300px;\n          max-height: 7em;\n          text-align: left; }\n  #vg-tooltip-element.dark-theme {\n    background-color: rgba(32, 32, 32, 0.9);\n    border: 1px solid #f5f5f5;\n    color: white; }\n    #vg-tooltip-element.dark-theme td.key {\n      color: #bfbfbf; }\n".toString().replace("vg-tooltip-element",
xb);$a.innerHTML=xb;xb=document.head;0<xb.childNodes.length?xb.insertBefore($a,xb.childNodes[0]):xb.appendChild($a)}}tooltipHandler($a,xb,Nb,cc){this.el=document.getElementById(this.options.id);this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el));(null!=document.fullscreenElement?document.fullscreenElement:document.body).appendChild(this.el);if(null==cc||""===cc)this.el.classList.remove("visible",
`${this.options.theme}-theme`);else{this.el.innerHTML=ba(cc,this.options.sanitize,this.options.maxDepth);this.el.classList.add("visible",`${this.options.theme}-theme`);$a=this.el.getBoundingClientRect();var vc=this.options.offsetX;Nb=this.options.offsetY;cc=xb.clientX+vc;cc+$a.width>window.innerWidth&&(cc=+xb.clientX-vc-$a.width);vc=xb.clientY+Nb;vc+$a.height>window.innerHeight&&(vc=+xb.clientY-Nb-$a.height);var {x:ed,y:jb}={x:cc,y:vc};this.el.setAttribute("style",`top: ${jb}px; left: ${ed}px`)}}}
String.prototype.startsWith||(String.prototype.startsWith=function($a,xb){return this.substr(!xb||0>xb?0:+xb,$a.length)===$a});var he;const Ue=Fa;let Pf=Xa;const Ig="undefined"!==typeof window?window:void 0;void 0===Pf&&null!==Ig&&void 0!==Ig&&null!==(he=Ig.vl)&&void 0!==he&&he.compile&&(Pf=Ig.vl);const Ya={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},Cb={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",
SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},fc={vega:"Vega","vega-lite":"Vega-Lite"},lc={vega:Ue.version,"vega-lite":Pf?Pf.version:"not available"},rc={vega:$a=>$a,"vega-lite":($a,xb)=>Pf.compile($a,{config:xb}).spec},Pc=(...$a)=>{var xb;if(xb=1<$a.length){if(xb=f.isString($a[0]))xb=$a[0],xb=!(xb.startsWith("http://")||xb.startsWith("https://")||xb.startsWith("//"));xb=xb||$a[0]instanceof HTMLElement||3===$a.length}return xb?fa($a[0],$a[1],$a[2]):ua($a[0],$a[1])};Pc.vegaLite=Pf;Pc.vl=Pf;
Pc.container=ua;Pc.embed=fa;Pc.vega=Ue;Pc.default=fa;Pc.version="6.18.2";return Pc})};
shadow$provide[558]=function(Pa,da,gb,oa){oa.__esModule=!0;oa.default=function(k){const f={};return!!k&&"[object Function]"===f.toString.call(k)}};
shadow$provide[559]=function(Pa,da,gb,oa){oa.__esModule=!0;oa.default=function(h,l,u){u&&((0,f.default)(u)?u(h.data(l)):h.change(l,k.vega.changeset().remove(()=>!0).insert(u)))};var k=da(557),f=function(h){return h&&h.__esModule?h:{default:h}}(da(558))};
shadow$provide[560]=function(Pa,da,gb,oa){oa.__esModule=!0;oa.default=function(f,h){Object.keys(h).forEach(l=>{(0,k.default)(f,l,h[l])})};var k=function(f){return f&&f.__esModule?f:{default:f}}(da(559))};
shadow$provide[561]=function(Pa,da,gb,oa){oa.__esModule=!0;oa.default=function(k){const f=new Set;k.forEach(h=>{Object.keys(h).forEach(l=>{f.add(l)})});return f}};
shadow$provide[562]=function(Pa,da,gb,oa){oa.__esModule=!0;oa.NOOP=void 0;oa.NOOP=()=>{}};
shadow$provide[563]=function(Pa,da,gb,oa){oa.__esModule=!0;oa.default=function(k,f){const h=Object.keys(f);h.forEach(l=>{try{k.addSignalListener(l,f[l])}catch(u){console.warn("Cannot add invalid signal listener.",u)}});return 0<h.length}};
shadow$provide[564]=function(Pa,da,gb,oa){gb.exports=function l(f,h){if(f===h)return!0;if(f&&h&&"object"==typeof f&&"object"==typeof h){if(f.constructor!==h.constructor)return!1;var u;if(Array.isArray(f)){var q=f.length;if(q!=h.length)return!1;for(u=q;0!==u--;)if(!l(f[u],h[u]))return!1;return!0}if(f.constructor===RegExp)return f.source===h.source&&f.flags===h.flags;if(f.valueOf!==Object.prototype.valueOf)return f.valueOf()===h.valueOf();if(f.toString!==Object.prototype.toString)return f.toString()===
h.toString();var D=Object.keys(f);q=D.length;if(q!==Object.keys(h).length)return!1;for(u=q;0!==u--;)if(!Object.prototype.hasOwnProperty.call(h,D[u]))return!1;for(u=q;0!==u--;)if(q=D[u],!l(f[q],h[q]))return!1;return!0}return f!==f&&h!==h}};
shadow$provide[565]=function(Pa,da,gb,oa){function k(l){return l&&l.__esModule?l:{default:l}}oa.__esModule=!0;oa.default=function(l,u){if(l===u)return!1;const q={width:!1,height:!1,isExpensive:!1},D=(0,h.default)([l,u]);!D.has("width")||"width"in l&&"width"in u&&l.width===u.width||("width"in l&&"number"===typeof l.width?q.width=l.width:q.isExpensive=!0);!D.has("height")||"height"in l&&"height"in u&&l.height===u.height||("height"in l&&"number"===typeof l.height?q.height=l.height:q.isExpensive=!0);
D.delete("width");D.delete("height");[...D].some(U=>!(U in l)||!(U in u)||!(0,f.default)(l[U],u[U]))&&(q.isExpensive=!0);return!1!==q.width||!1!==q.height||q.isExpensive?q:!1};var f=k(da(564)),h=k(da(561))};
shadow$provide[566]=function(Pa,da,gb,oa){oa.__esModule=!0;oa.default=function(k,f){const h=Object.keys(f);h.forEach(l=>{try{k.removeSignalListener(l,f[l])}catch(u){console.warn("Cannot remove invalid signal listener.",u)}});return 0<h.length}};
shadow$provide[567]=function(Pa,da,gb,oa){oa.__esModule=!0;oa.default=function(k){const {spec:f,width:h,height:l}=k;return"undefined"!==typeof h&&"undefined"!==typeof l?{...f,width:h,height:l}:"undefined"!==typeof h?{...f,width:h}:"undefined"!==typeof l?{...f,height:l}:f}};
shadow$provide[568]=function(Pa,da,gb,oa){function k(F){return F&&F.__esModule?F:{default:F}}function f(F,t,w){t in F?Object.defineProperty(F,t,{value:w,enumerable:!0,configurable:!0,writable:!0}):F[t]=w;return F}oa.__esModule=!0;oa.default=void 0;Pa=k(da(21));var h=k(da(3)),l=k(da(557)),u=k(da(502)),q=k(da(561)),D=da(562),U=k(da(563)),aa=k(da(565)),X=k(da(566)),S=k(da(567));class V extends h.default.PureComponent{constructor(...F){super(...F);f(this,"containerRef",h.default.createRef());f(this,"resultPromise",
void 0);f(this,"handleError",t=>{const {onError:w=D.NOOP}=this.props;w(t);console.warn(t)});f(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(w=>{w&&t(w.view);return!0}).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(F){const t=(0,q.default)([this.props,F]);t.delete("className");t.delete("signalListeners");t.delete("spec");t.delete("style");t.delete("width");t.delete("height");if(Array.from(t).some(w=>this.props[w]!==F[w]))this.clearView(),this.createView();
else{const w=(0,aa.default)((0,S.default)(this.props),(0,S.default)(F)),{signalListeners:x}=this.props,{signalListeners:I}=F;if(w)if(w.isExpensive)this.clearView(),this.createView();else{const R=!(0,u.default)(x,I);this.modifyView(B=>{!1!==w.width&&B.width(w.width);!1!==w.height&&B.height(w.height);R&&(I&&(0,X.default)(B,I),x&&(0,U.default)(B,x));B.run()})}else(0,u.default)(x,I)||this.modifyView(R=>{I&&(0,X.default)(R,I);x&&(0,U.default)(R,x);R.run()})}}componentWillUnmount(){this.clearView()}createView(){const {spec:F,
onNewView:t,signalListeners:w={},width:x,height:I,...R}=this.props;if(this.containerRef.current){const B=(0,S.default)(this.props);this.resultPromise=(0,l.default)(this.containerRef.current,B,R).then(v=>{if(v){const {view:O}=v;(0,U.default)(O,w)&&O.run()}return v}).catch(this.handleError);t&&this.modifyView(t)}}clearView(){this.resultPromise&&this.resultPromise.then(F=>{F&&F.finalize()}).catch(this.handleError);this.resultPromise=void 0;return this}render(){const {className:F,style:t}=this.props;
return h.default.createElement("div",{ref:this.containerRef,className:F,style:t})}}oa.default=V;f(V,"propTypes",{className:Pa.default.string,onError:Pa.default.func})};
shadow$provide[569]=function(Pa,da,gb,oa){function k(X){return X&&X.__esModule?X:{default:X}}function f(){f=Object.assign||function(X){for(var S=1;S<arguments.length;S++){var V=arguments[S],F;for(F in V)Object.prototype.hasOwnProperty.call(V,F)&&(X[F]=V[F])}return X};return f.apply(this,arguments)}function h(X,S,V){S in X?Object.defineProperty(X,S,{value:V,enumerable:!0,configurable:!0,writable:!0}):X[S]=V;return X}oa.__esModule=!0;oa.default=void 0;k(da(21));var l=k(da(3)),u=k(da(502)),q=k(da(560)),
D=k(da(568)),U=da(562);class aa extends l.default.PureComponent{constructor(...X){super(...X);h(this,"vegaEmbed",l.default.createRef());h(this,"handleNewView",S=>{this.update();const {onNewView:V=U.NOOP}=this.props;V(S)})}componentDidMount(){this.update()}componentDidUpdate(X){(0,u.default)(this.props.data,X.data)||this.update()}update(){const {data:X}=this.props;this.vegaEmbed.current&&X&&0<Object.keys(X).length&&this.vegaEmbed.current.modifyView(S=>{(0,q.default)(S,X);S.resize().run()})}render(){const {data:X,
...S}=this.props;return l.default.createElement(D.default,f({ref:this.vegaEmbed},S,{onNewView:this.handleNewView}))}}oa.default=aa;h(aa,"defaultProps",{data:{}})};
shadow$provide[570]=function(Pa,da,gb,oa){function k(u){return u&&u.__esModule?u:{default:u}}function f(){f=Object.assign||function(u){for(var q=1;q<arguments.length;q++){var D=arguments[q],U;for(U in D)Object.prototype.hasOwnProperty.call(D,U)&&(u[U]=D[U])}return u};return f.apply(this,arguments)}oa.__esModule=!0;oa.default=function(u){return h.default.createElement(l.default,f({},u,{mode:"vega-lite"}))};var h=k(da(3)),l=k(da(569))};
shadow$provide[571]=function(Pa,da,gb,oa){function k(q){return q&&q.__esModule?q:{default:q}}function f(){f=Object.assign||function(q){for(var D=1;D<arguments.length;D++){var U=arguments[D],aa;for(aa in U)Object.prototype.hasOwnProperty.call(U,aa)&&(q[aa]=U[aa])}return q};return f.apply(this,arguments)}function h(q,D,U){D in q?Object.defineProperty(q,D,{value:U,enumerable:!0,configurable:!0,writable:!0}):q[D]=U;return q}oa.__esModule=!0;oa.default=function({mode:q,spec:D}){class U extends l.default.PureComponent{render(){return l.default.createElement(u.default,
f({mode:q,spec:D},this.props))}}h(U,"getSpec",function(){return D});return U};var l=k(da(3)),u=k(da(569))};
shadow$provide[572]=function(Pa,da,gb,oa){};
shadow$provide[573]=function(Pa,da,gb,oa){oa.__esModule=!0;var k=da(572);Object.keys(k).forEach(function(f){"default"!==f&&"__esModule"!==f&&(f in oa&&oa[f]===k[f]||(oa[f]=k[f]))})};
shadow$provide[574]=function(Pa,da,gb,oa){function k(l){return l&&l.__esModule?l:{default:l}}oa.__esModule=!0;var f={Vega:!0,VegaLite:!0,createClassFromSpec:!0};oa.createClassFromSpec=oa.VegaLite=oa.Vega=void 0;Pa=k(da(569));oa.Vega=Pa.default;Pa=k(da(570));oa.VegaLite=Pa.default;Pa=k(da(571));oa.createClassFromSpec=Pa.default;var h=da(573);Object.keys(h).forEach(function(l){"default"!==l&&"__esModule"!==l&&(Object.prototype.hasOwnProperty.call(f,l)||l in oa&&oa[l]===h[l]||(oa[l]=h[l]))})};
shadow$provide[575]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?f(oa,da(503)):"function"===typeof define&&define.amd?define(["exports","vega-util"],f):(k="undefined"!==typeof globalThis?globalThis:k||self,f(k.vegaTooltip={},k.vega))})(this,function(k,f){function h(F,t){var w={},x;for(x in F)Object.prototype.hasOwnProperty.call(F,x)&&0>t.indexOf(x)&&(w[x]=F[x]);if(null!=F&&"function"===typeof Object.getOwnPropertySymbols){var I=0;for(x=Object.getOwnPropertySymbols(F);I<
x.length;I++)0>t.indexOf(x[I])&&Object.prototype.propertyIsEnumerable.call(F,x[I])&&(w[x[I]]=F[x[I]])}return w}function l(F){return String(F).replace(/&/g,"\x26amp;").replace(/</g,"\x26lt;")}function u(F){if(!/^[A-Za-z]+[-:.\w]*$/.test(F))throw Error("Invalid HTML ID");return"#vg-tooltip-element {\n  visibility: hidden;\n  padding: 8px;\n  position: fixed;\n  z-index: 1000;\n  font-family: sans-serif;\n  font-size: 11px;\n  border-radius: 3px;\n  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);\n  /* The default theme is the light theme. */\n  background-color: rgba(255, 255, 255, 0.95);\n  border: 1px solid #d9d9d9;\n  color: black; }\n  #vg-tooltip-element.visible {\n    visibility: visible; }\n  #vg-tooltip-element h2 {\n    margin-top: 0;\n    margin-bottom: 10px;\n    font-size: 13px; }\n  #vg-tooltip-element img {\n    max-width: 200px;\n    max-height: 200px; }\n  #vg-tooltip-element table {\n    border-spacing: 0; }\n    #vg-tooltip-element table tr {\n      border: none; }\n      #vg-tooltip-element table tr td {\n        overflow: hidden;\n        text-overflow: ellipsis;\n        padding-top: 2px;\n        padding-bottom: 2px; }\n        #vg-tooltip-element table tr td.key {\n          color: #808080;\n          max-width: 150px;\n          text-align: right;\n          padding-right: 4px; }\n        #vg-tooltip-element table tr td.value {\n          display: block;\n          max-width: 300px;\n          max-height: 7em;\n          text-align: left; }\n  #vg-tooltip-element.dark-theme {\n    background-color: rgba(32, 32, 32, 0.9);\n    border: 1px solid #f5f5f5;\n    color: white; }\n    #vg-tooltip-element.dark-theme td.key {\n      color: #bfbfbf; }\n".toString().replace("vg-tooltip-element",
F)}function q(F,t,w){if(f.isArray(F))return"["+F.map(function(O){return t(f.isString(O)?O:U(O,w))}).join(", ")+"]";if(f.isObject(F)){var x="",I=F.title,R=F.image;F=h(F,["title","image"]);I&&(x+="\x3ch2\x3e"+t(I)+"\x3c/h2\x3e");R&&(x+='\x3cimg src\x3d"'+t(R)+'"\x3e');I=Object.keys(F);if(0<I.length){x+="\x3ctable\x3e";for(R=0;R<I.length;R++){var B=I[R],v=F[B];void 0!==v&&(f.isObject(v)&&(v=U(v,w)),x+='\x3ctr\x3e\x3ctd class\x3d"key"\x3e'+t(B)+':\x3c/td\x3e\x3ctd class\x3d"value"\x3e'+t(v)+"\x3c/td\x3e\x3c/tr\x3e")}x+=
"\x3c/table\x3e"}return x||"{}"}return t(F)}function D(F){var t=[];return function(w,x){if("object"!==typeof x||null===x)return x;w=t.indexOf(this)+1;t.length=w;if(t.length>F)return"[Object]";if(0<=t.indexOf(x))return"[Circular]";t.push(x);return x}}function U(F,t){return JSON.stringify(F,D(t))}function aa(F,t,w,x){var I=F.clientX+w;I+t.width>window.innerWidth&&(I=+F.clientX-w-t.width);w=F.clientY+x;w+t.height>window.innerHeight&&(w=+F.clientY-x-t.height);return{x:I,y:w}}var X=function(){X=Object.assign||
function(F){for(var t,w=1,x=arguments.length;w<x;w++){t=arguments[w];for(var I in t)Object.prototype.hasOwnProperty.call(t,I)&&(F[I]=t[I])}return F};return X.apply(this,arguments)},S={offsetX:10,offsetY:10,id:"vg-tooltip-element",styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:l,maxDepth:2},V=function(){function F(t){this.options=X(X({},S),t);var w=this.options.id;this.el=null;this.call=this.tooltipHandler.bind(this);this.options.disableDefaultStyle||document.getElementById(this.options.styleId)||
(t=document.createElement("style"),t.setAttribute("id",this.options.styleId),t.innerHTML=u(w),w=document.head,0<w.childNodes.length?w.insertBefore(t,w.childNodes[0]):w.appendChild(t))}F.prototype.tooltipHandler=function(t,w,x,I){this.el=document.getElementById(this.options.id);this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),document.body.appendChild(this.el));(null!=document.fullscreenElement?document.fullscreenElement:
document.body).appendChild(this.el);null==I||""===I?this.el.classList.remove("visible",this.options.theme+"-theme"):(this.el.innerHTML=q(I,this.options.sanitize,this.options.maxDepth),this.el.classList.add("visible",this.options.theme+"-theme"),t=aa(w,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY),this.el.setAttribute("style","top: "+t.y+"px; left: "+t.x+"px"))};return F}();k.DEFAULT_OPTIONS=S;k.Handler=V;k.calculatePosition=aa;k.createDefaultStyle=u;k.default=function(F,
t){t=new V(t);F.tooltip(t.call).run();return t};k.escapeHTML=l;k.formatValue=q;k.replacer=D;k.stringify=U;k.version="0.25.1";Object.defineProperty(k,"__esModule",{value:!0})})};
shadow$provide[576]=function(Pa,da,gb,oa){!function(k,f){"object"==typeof oa&&"object"==typeof gb?gb.exports=f():"function"==typeof define&&define.amd?define("Arrow",[],f):"object"==typeof oa?oa.Arrow=f():k.Arrow=f()}(window,function(){return function(k){function f(l){if(h[l])return h[l].exports;var u=h[l]={i:l,l:!1,exports:{}};return k[l].call(u.exports,u,u.exports,f),u.l=!0,u.exports}var h={};return f.m=k,f.c=h,f.d=function(l,u,q){f.o(l,u)||Object.defineProperty(l,u,{enumerable:!0,get:q})},f.r=
function(l){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"});Object.defineProperty(l,"__esModule",{value:!0})},f.t=function(l,u){if((1&u&&(l=f(l)),8&u)||4&u&&"object"==typeof l&&l&&l.__esModule)return l;var q=Object.create(null);if(f.r(q),Object.defineProperty(q,"default",{enumerable:!0,value:l}),2&u&&"string"!=typeof l)for(var D in l)f.d(q,D,function(U){return l[U]}.bind(null,D));return q},f.n=function(l){var u=l&&l.__esModule?function(){return l.default}:
function(){return l};return f.d(u,"a",u),u},f.o=function(l,u){return Object.prototype.hasOwnProperty.call(l,u)},f.p="",f(f.s=0)}([function(k,f,h){function l(M,p){var na={},ib;for(ib in M)Object.prototype.hasOwnProperty.call(M,ib)&&0>p.indexOf(ib)&&(na[ib]=M[ib]);if(null!=M&&"function"==typeof Object.getOwnPropertySymbols){var Sb=0;for(ib=Object.getOwnPropertySymbols(M);Sb<ib.length;Sb++)0>p.indexOf(ib[Sb])&&Object.prototype.propertyIsEnumerable.call(M,ib[Sb])&&(na[ib[Sb]]=M[ib[Sb]])}return na}function u(M,
p,na,ib){return new (na||(na=Promise))(function(Sb,wc){function Wc(He){try{Ud(ib.next(He))}catch(zf){wc(zf)}}function Hd(He){try{Ud(ib.throw(He))}catch(zf){wc(zf)}}function Ud(He){var zf;He.done?Sb(He.value):(zf=He.value,zf instanceof na?zf:new na(function(mg){mg(zf)})).then(Wc,Hd)}Ud((ib=ib.apply(M,p||[])).next())})}function q(M){var p="function"==typeof Symbol&&Symbol.iterator,na=p&&M[p],ib=0;if(na)return na.call(M);if(M&&"number"==typeof M.length)return{next:function(){return M&&ib>=M.length&&
(M=void 0),{value:M&&M[ib++],done:!M}}};throw new TypeError(p?"Object is not iterable.":"Symbol.iterator is not defined.");}function D(M){return this instanceof D?(this.v=M,this):new D(M)}function U(M,p,na){function ib(mg){He[mg]&&(Ud[mg]=function(Og){return new Promise(function(Ah,Jj){1<zf.push([mg,Og,Ah,Jj])||Sb(mg,Og)})})}function Sb(mg,Og){try{(Ah=He[mg](Og)).value instanceof D?Promise.resolve(Ah.value.v).then(wc,Wc):Hd(zf[0][2],Ah)}catch(Jj){Hd(zf[0][3],Jj)}var Ah}function wc(mg){Sb("next",mg)}
function Wc(mg){Sb("throw",mg)}function Hd(mg,Og){mg(Og);zf.shift();zf.length&&Sb(zf[0][0],zf[0][1])}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ud,He=na.apply(M,p||[]),zf=[];return Ud={},ib("next"),ib("throw"),ib("return"),Ud[Symbol.asyncIterator]=function(){return this},Ud}function aa(M){function p(Sb,wc){na[Sb]=M[Sb]?function(Wc){return(ib=!ib)?{value:D(M[Sb](Wc)),done:"return"===Sb}:wc?wc(Wc):Wc}:wc}var na,ib;return na={},p("next"),p("throw",function(Sb){throw Sb;
}),p("return"),na[Symbol.iterator]=function(){return this},na}function X(M){function p(Sb){na[Sb]=M[Sb]&&function(wc){return new Promise(function(Wc,Hd){(function(Ud,He,zf,mg){Promise.resolve(mg).then(function(Og){Ud({value:Og,done:zf})},He)})(Wc,Hd,(wc=M[Sb](wc)).done,wc.value)})}}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var na,ib=M[Symbol.asyncIterator];return ib?ib.call(M):(M=q(M),na={},p("next"),p("throw"),p("return"),na[Symbol.asyncIterator]=function(){return this},
na)}function S(M){if(void 0===M)return{};if(M===Object(M))return M;throw TypeError("Could not convert argument to dictionary");}function V(M){this.tokens=[].slice.call(M)}function F(M,p){if(M)throw TypeError("Decoder error");return p||65533}function t(M,p){if(!(this instanceof t))return new t(M,p);if("utf-8"!==(void 0!==M?(M+"").toLowerCase():"utf-8"))throw Error("Encoding not supported. Only utf-8 is supported");p=S(p);this._BOMseen=this._streaming=!1;this._decoder=null;this._fatal=!!p.fatal;this._ignoreBOM=
!!p.ignoreBOM;Object.defineProperty(this,"encoding",{value:"utf-8"});Object.defineProperty(this,"fatal",{value:this._fatal});Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}function w(M,p){if(!(this instanceof w))return new w(M,p);if("utf-8"!==(void 0!==M?(M+"").toLowerCase():"utf-8"))throw Error("Encoding not supported. Only utf-8 is supported");p=S(p);this._streaming=!1;this._encoder=null;this._options={fatal:!!p.fatal};Object.defineProperty(this,"encoding",{value:"utf-8"})}function x(M){var p=
M.fatal,na=0,ib=0,Sb=0,wc=128,Wc=191;this.handler=function(Hd,Ud){if(-1===Ud&&0!==Sb)return Sb=0,F(p);if(-1===Ud)return-1;if(0===Sb){if(0<=Ud&&127>=Ud)return Ud;if(194<=Ud&&223>=Ud)Sb=1,na=Ud-192;else if(224<=Ud&&239>=Ud)224===Ud&&(wc=160),237===Ud&&(Wc=159),Sb=2,na=Ud-224;else{if(!(240<=Ud&&244>=Ud))return F(p);240===Ud&&(wc=144);244===Ud&&(Wc=143);Sb=3;na=Ud-240}return na<<=6*Sb,null}if(!(wc<=Ud&&Ud<=Wc))return na=Sb=ib=0,wc=128,Wc=191,Hd.prepend(Ud),F(p);if(wc=128,Wc=191,na+=Ud-128<<6*(Sb-(ib+=
1)),ib!==Sb)return null;Hd=na;return na=Sb=ib=0,Hd}}function I(M){M.fatal;this.handler=function(p,na){if(-1===na)return-1;if(0<=na&&127>=na)return na;var ib,Sb;128<=na&&2047>=na?(ib=1,Sb=192):2048<=na&&65535>=na?(ib=2,Sb=224):65536<=na&&1114111>=na&&(ib=3,Sb=240);for(p=[(na>>6*ib)+Sb];0<ib;)p.push(128|63&na>>6*(ib-1)),--ib;return p}}function R(M,p,na=0,ib=p.byteLength){const Sb=M.byteLength,wc=new Uint8Array(M.buffer,M.byteOffset,Sb);p=new Uint8Array(p.buffer,p.byteOffset,Math.min(ib,Sb));return wc.set(p,
na),M}function B(M,p){M=function(Ud){const He=Ud[0]?[Ud[0]]:[];let zf,mg,Og,Ah;for(let Jj,fk,Bj=0,Wk=0,fl=Ud.length;++Bj<fl;)Jj=He[Wk],fk=Ud[Bj],!Jj||!fk||Jj.buffer!==fk.buffer||fk.byteOffset<Jj.byteOffset?fk&&(He[++Wk]=fk):({byteOffset:zf,byteLength:Og}=Jj,{byteOffset:mg,byteLength:Ah}=fk,zf+Og<mg||mg+Ah<zf?fk&&(He[++Wk]=fk):He[Wk]=new Uint8Array(Jj.buffer,zf,mg-zf+Ah));return He}(M);const na=M.reduce((Ud,He)=>Ud+He.byteLength,0);let ib,Sb,wc,Wc=0,Hd=-1;p=Math.min(p||1/0,na);for(let Ud=M.length;++Hd<
Ud;){if(ib=M[Hd],Sb=ib.subarray(0,Math.min(ib.length,p-Wc)),p<=Wc+Sb.length){Sb.length<ib.length?M[Hd]=ib.subarray(Sb.length):Sb.length===ib.length&&Hd++;wc?R(wc,Sb,Wc):wc=Sb;break}R(wc||(wc=new Uint8Array(p)),Sb,Wc);Wc+=Sb.length}return[wc||new Uint8Array(0),M.slice(Hd),na-(wc?wc.byteLength:0)]}function v(M,p){p=null!=p&&Object(p)===p&&"done"in p&&"value"in p?p.value:p;return p instanceof M?M===Uint8Array?new M(p.buffer,p.byteOffset,p.byteLength):p:p?("string"==typeof p&&(p=Ye.encode(p)),p instanceof
ArrayBuffer||p instanceof Xc?new M(p):p instanceof Xb?v(M,p.bytes()):ArrayBuffer.isView(p)?0>=p.byteLength?new M(0):new M(p.buffer,p.byteOffset,p.byteLength/M.BYTES_PER_ELEMENT):M.from(p)):new M(0)}function*O(M,p){const na=function*(ib){yield ib};p="string"==typeof p||ArrayBuffer.isView(p)||p instanceof ArrayBuffer||p instanceof Xc?na(p):sg(p)?p:na(p);return yield*Zg(function*(ib){let Sb=null;do Sb=ib.next(yield v(M,Sb));while(!Sb.done)}(p[Symbol.iterator]())),new M}function N(M,p){return U(this,
arguments,function*(){if(Tf(p))return yield D(yield D(yield*aa(X(N(M,yield D(p))))));var na=function(ib){return U(this,arguments,function*(){yield yield D(yield D(ib))})};na="string"==typeof p||ArrayBuffer.isView(p)||p instanceof ArrayBuffer||p instanceof Xc?na(p):sg(p)?function(ib){return U(this,arguments,function*(){yield D(yield*aa(X(Zg(function*(Sb){let wc=null;do wc=Sb.next(yield wc&&wc.value);while(!wc.done)}(ib[Symbol.iterator]())))))})}(p):zc(p)?p:na(p);return yield D(yield*aa(X(Zg(function(ib){return U(this,
arguments,function*(){let Sb=null;do Sb=yield D(ib.next(yield yield D(v(M,Sb))));while(!Sb.done)})}(na[Symbol.asyncIterator]()))))),yield D(new M)})}function A(M,p,na){if(0!==M){na=na.slice(0,p+1);for(let ib=-1;++ib<=p;)na[ib]+=M}return na}function J(M,p){let na=0;const ib=M.length;if(ib!==p.length)return!1;if(0<ib){do if(M[na]!==p[na])return!1;while(++na<ib)}return!0}function T(M,p,na,ib){return u(this,void 0,void 0,function*(){if(na>=ib)return{done:!1,value:new Uint8Array(p,0,ib)};const {done:Sb,
value:wc}=yield M.read(new Uint8Array(p,na,ib-na));return(na+=wc.byteLength)<ib&&!Sb?yield T(M,wc.buffer,na,ib):{done:Sb,value:new Uint8Array(wc.buffer,0,na)}})}function z(M,p,na,ib){return 0!=(na&1<<ib)}function ba(M,p,na,ib){return(na&1<<ib)>>ib}function K(M,p,na){return na?!!(M[p>>3]|=1<<p%8)||!0:!(M[p>>3]&=~(1<<p%8))&&!1}function r(M,p,na){const ib=na.byteLength+7&-8;if(0<M||na.byteLength<ib){const Sb=new Uint8Array(ib);return Sb.set(0==M%8?na.subarray(M>>3):Y(new Xd(na,M,p,null,z)).subarray(0,
ib)),Sb}return na}function Y(M){const p=[];let na=0,ib=0,Sb=0;for(const wc of M)wc&&(Sb|=1<<ib),8==++ib&&(p[na++]=Sb,Sb=ib=0);(0===na||0<ib)&&(p[na++]=Sb);M=new Uint8Array(p.length+7&-8);return M.set(p),M}function Z(M,p,na){if(0>=na-p)return 0;if(8>na-p){var ib=0;for(var Sb of new Xd(M,p,na-p,M,ba))ib+=Sb;return ib}ib=na>>3<<3;Sb=p+(0==p%8?0:8-p%8);return Z(M,p,Sb)+Z(M,ib,na)+E(M,Sb>>3,ib-Sb>>3)}function E(M,p,na){let ib=0;p|=0;const Sb=new DataView(M.buffer,M.byteOffset,M.byteLength);for(M=void 0===
na?M.byteLength:p+na;4<=M-p;)ib+=C(Sb.getUint32(p)),p+=4;for(;2<=M-p;)ib+=C(Sb.getUint16(p)),p+=2;for(;1<=M-p;)ib+=C(Sb.getUint8(p)),p+=1;return ib}function C(M){M|=0;return M-=M>>>1&1431655765,M=(858993459&M)+(M>>>2&858993459),16843009*(M+(M>>>4)&252645135)>>>24}function W(M){switch(M.typeId){case nb.Decimal:return 4;case nb.Timestamp:return 2;case nb.Date:case nb.Interval:return 1+M.unit;case nb.Int:case nb.Time:return+(32<M.bitWidth)+1;case nb.FixedSizeList:return M.listSize;case nb.FixedSizeBinary:return M.byteWidth;
default:return 1}}function fa(M){if(null===M)return"null";if(void 0===M)return"undefined";switch(typeof M){case "number":case "bigint":return""+M;case "string":return`"${M}"`}return"function"==typeof M[Symbol.toPrimitive]?M[Symbol.toPrimitive]("string"):ArrayBuffer.isView(M)?`[${M}]`:JSON.stringify(M)}function ja(M){if(!M||0>=M.length)return function(ib){return!0};let p="";const na=M.filter(ib=>ib==ib);return 0<na.length&&(p=`\n    switch (x) {${na.map(ib=>{ib="bigint"!=typeof ib?fa(ib):zg?fa(ib)+
"n":`"${fa(ib)}"`;return`\n        case ${ib}:`}).join("")}\n            return false;\n    }`),M.length!==na.length&&(p="if (x !\x3d\x3d x) return false;\n"+p),Function("x",p+"\nreturn true;")}function Ba(M){const p=(31744&M)>>10,na=(1023&M)/1024;M=Math.pow(-1,(32768&M)>>15);switch(p){case 31:return M*(na?NaN:1/0);case 0:return M*(na?6.103515625E-5*na:0)}return M*Math.pow(2,p-15)*(1+na)}function Ga(M){if(M!=M)return 32256;Lj[0]=M;M=(2147483648&Lf[1])>>16&65535;let p=2146435072&Lf[1],na=0;return 1089470464<=
p?0<Lf[0]?p=31744:(p=(2080374784&p)>>16,na=(1048575&Lf[1])>>10):1056964608>=p?(na=1048576+(1048575&Lf[1]),na=1048576+(na<<(p>>20)-998)>>21,p=0):(p=p-1056964608>>10,na=512+(1048575&Lf[1])>>10),M|p|65535&na}function ua(M,...p){return 0===p.length?Object.setPrototypeOf(v(this.TypedArray,M),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(M,...p),this.constructor.prototype)}function Fa(...M){return ua.apply(this,M)}function Xa(...M){return ua.apply(this,M)}function Sa(...M){return ua.apply(this,
M)}function eb(M){const {buffer:p,byteOffset:na,length:ib,signed:Sb}=M;M=new Int32Array(p,na,ib);let wc=0,Wc=0;const Hd=M.length;let Ud,He;for(;Wc<Hd;)He=M[Wc++],Ud=M[Wc++],Sb||(Ud>>>=0),wc+=(He>>>0)+Ud*Math.pow(Wc,32);return wc}function Va(M){let p="";const na=new Uint32Array(2);M=new Uint16Array(M.buffer,M.byteOffset,M.byteLength/2);const ib=new Uint32Array((M=(new Uint16Array(M)).reverse()).buffer);let Sb;const wc=M.length-1;do{for(na[0]=M[Sb=0];Sb<wc;)M[Sb++]=na[1]=na[0]/10,na[0]=(na[0]-10*na[1]<<
16)+M[Sb];M[Sb]=na[1]=na[0]/10;na[0]-=10*na[1];p=`${na[0]}${p}`}while(ib[0]||ib[1]||ib[2]||ib[3]);return p||"0"}function La(M,p){return new Map([...(M||new Map),...(p||new Map)])}function Ra(M,p=new Map){for(let na=-1,ib=M.length;++na<ib;){const Sb=M[na].type;if(ce.isDictionary(Sb))if(p.has(Sb.id)){if(p.get(Sb.id)!==Sb.dictionary)throw Error("Cannot create Schema containing two different dictionaries with the same Id");}else p.set(Sb.id,Sb.dictionary);Sb.children&&0<Sb.children.length&&Ra(Sb.children,
p)}return p}function la(M){switch(M.typeId){case nb.Null:return nb.Null;case nb.Int:const {bitWidth:p,isSigned:na}=M;switch(p){case 8:return na?nb.Int8:nb.Uint8;case 16:return na?nb.Int16:nb.Uint16;case 32:return na?nb.Int32:nb.Uint32;case 64:return na?nb.Int64:nb.Uint64}return nb.Int;case nb.Float:switch(M.precision){case we.HALF:return nb.Float16;case we.SINGLE:return nb.Float32;case we.DOUBLE:return nb.Float64}return nb.Float;case nb.Binary:return nb.Binary;case nb.Utf8:return nb.Utf8;case nb.Bool:return nb.Bool;
case nb.Decimal:return nb.Decimal;case nb.Time:switch(M.unit){case sd.SECOND:return nb.TimeSecond;case sd.MILLISECOND:return nb.TimeMillisecond;case sd.MICROSECOND:return nb.TimeMicrosecond;case sd.NANOSECOND:return nb.TimeNanosecond}return nb.Time;case nb.Timestamp:switch(M.unit){case sd.SECOND:return nb.TimestampSecond;case sd.MILLISECOND:return nb.TimestampMillisecond;case sd.MICROSECOND:return nb.TimestampMicrosecond;case sd.NANOSECOND:return nb.TimestampNanosecond}return nb.Timestamp;case nb.Date:switch(M.unit){case ue.DAY:return nb.DateDay;
case ue.MILLISECOND:return nb.DateMillisecond}return nb.Date;case nb.Interval:switch(M.unit){case Fe.DAY_TIME:return nb.IntervalDayTime;case Fe.YEAR_MONTH:return nb.IntervalYearMonth}return nb.Interval;case nb.Map:return nb.Map;case nb.List:return nb.List;case nb.Struct:return nb.Struct;case nb.Union:switch(M.mode){case Wd.Dense:return nb.DenseUnion;case Wd.Sparse:return nb.SparseUnion}return nb.Union;case nb.FixedSizeBinary:return nb.FixedSizeBinary;case nb.FixedSizeList:return nb.FixedSizeList;
case nb.Dictionary:return nb.Dictionary}throw Error(`Unrecognized type '${nb[M.typeId]}'`);}function ma(M){return 0>M&&(M=4294967295+M+1),"0x"+M.toString(16)}function Aa(M,p,na){const ib=M.length;p=-1<p?p:ib+p%ib;return na?na(M,p):p}function Da(M,p,na,ib){const {length:Sb=0}=M;p="number"!=typeof p?0:p;na="number"!=typeof na?Sb:na;return 0>p&&(p=(p%Sb+Sb)%Sb),0>na&&(na=(na%Sb+Sb)%Sb),na<p&&(wh=p,p=na,na=wh),na>Sb&&(na=Sb),ib?ib(M,p,na):[p,na]}function Qa(M){const p=typeof M;if("object"!==p||null===
M)return M!=M?ik:"bigint"!==p?na=>na===M:na=>gj+na===M;if(M instanceof Date){const na=M.valueOf();return ib=>ib instanceof Date&&ib.valueOf()===na}return ArrayBuffer.isView(M)?na=>!!na&&J(M,na):M instanceof Map?function(na){let ib=-1;const Sb=[];return na.forEach(wc=>Sb[++ib]=Qa(wc)),Ea(Sb)}(M):Array.isArray(M)?function(na){const ib=[];for(let Sb=-1,wc=na.length;++Sb<wc;)ib[Sb]=Qa(na[Sb]);return Ea(ib)}(M):M instanceof Qc?function(na){const ib=[];for(let Sb=-1,wc=na.length;++Sb<wc;)ib[Sb]=Qa(na.get(Sb));
return Ea(ib)}(M):function(na){const ib=Object.keys(na);if(0===ib.length)return()=>!1;const Sb=[];for(let wc=-1,Wc=ib.length;++wc<Wc;)Sb[wc]=Qa(na[ib[wc]]);return Ea(Sb,ib)}(M)}function Ea(M,p){return na=>{if(!na||"object"!=typeof na)return!1;switch(na.constructor){case Array:return function(ib,Sb){const wc=ib.length;if(Sb.length!==wc)return!1;for(let Wc=-1;++Wc<wc;)if(!ib[Wc](Sb[Wc]))return!1;return!0}(M,na);case Map:case Jk:case Hj:return kb(M,na,na.keys());case Object:case void 0:return kb(M,na,
p||Object.keys(na))}return na instanceof Qc&&function(ib,Sb){const wc=ib.length;if(Sb.length!==wc)return!1;for(let Wc=-1;++Wc<wc;)if(!ib[Wc](Sb.get(Wc)))return!1;return!0}(M,na)}}function kb(M,p,na){na=na[Symbol.iterator]();const ib=p instanceof Map?p.keys():Object.keys(p)[Symbol.iterator]();p=p instanceof Map?p.values():Object.values(p)[Symbol.iterator]();let Sb=0;const wc=M.length;let Wc=p.next(),Hd=na.next(),Ud=ib.next();for(;Sb<wc&&!Hd.done&&!Ud.done&&!Wc.done&&Hd.value===Ud.value&&M[Sb](Wc.value);++Sb,
Hd=na.next(),Ud=ib.next(),Wc=p.next());return!!(Sb===wc&&Hd.done&&Ud.done&&Wc.done)||(na.return&&na.return(),ib.return&&ib.return(),p.return&&p.return(),!1)}function cb(M,p,na,ib){let Sb,wc=-1;const Wc=p.length;for(;++wc<Wc;)Mi(Sb=p[wc])?ib=cb(M,Sb,na,ib).length:Sb instanceof M&&(na[ib++]=Sb);return na}function Mb(M,p,na,ib){let Sb,wc=-1;const Wc=p.length;for(;++wc<Wc;)Mi(Sb=p[wc])?ib=Mb(M,Sb,na,ib).length:Sb instanceof Rh?ib=Mb(M,Sb.chunks,na,ib).length:Sb instanceof M&&(na[ib++]=Sb);return na}function Gb(M,
p,na,ib){let Sb,wc=-1;const Wc=p.length;for(;++wc<Wc;)Mi(Sb=p[wc])?ib=Gb(M,Sb,na,ib).length:Sb instanceof M?ib=cb(Qc,Sb.schema.fields.map((Hd,Ud)=>Sb.getChildAt(Ud)),na,ib).length:Sb instanceof Qc&&(na[ib++]=Sb);return na}function Wb(M,p,na,ib){let Sb,wc=-1;const Wc=p.length;for(;++wc<Wc;)Mi(Sb=p[wc])?ib=Wb(M,Sb,na,ib).length:Sb instanceof M?ib=cb(Wf,Sb.schema.fields.map((Hd,Ud)=>Wf.new(Hd,Sb.getChildAt(Ud))),na,ib).length:Sb instanceof Wf&&(na[ib++]=Sb);return na}function sa(M,p){let na;var ib;switch(ib=
M.length){case 0:return p;case 1:if(na=p[0],!M[0])return p;if(Mi(M[0]))return sa(M[0],p);M[0]instanceof Ef||M[0]instanceof Qc||M[0]instanceof ce||([na,M]=Object.entries(M[0]).reduce(Kk,p));break;default:Mi(na=M[ib-1])?M=Mi(M[0])?M[0]:M.slice(0,ib-1):(M=Mi(M[0])?M[0]:M,na=[])}let Sb=ib=-1,wc=-1;const Wc=M.length;let Hd,Ud;const [He,zf]=p;for(;++wc<Wc;)Ud=M[wc],Ud instanceof Wf&&(zf[++Sb]=Ud)?He[++ib]=Ud.field.clone(na[wc],Ud.type,!0):({[wc]:Hd=wc}=na,Ud instanceof ce&&(zf[++Sb]=Ud)?He[++ib]=ph.new(Hd,
Ud,!0):Ud&&Ud.type&&(zf[++Sb]=Ud)&&(Ud instanceof Ef&&(zf[Sb]=Ud=Qc.new(Ud)),He[++ib]=ph.new(Hd,Ud.type,!0)));return p}function ra(M){return new bi(M.count,Ia(M.columns),bb(M.columns))}function xa(M,p){return(M.children||[]).filter(Boolean).map(na=>ph.fromJSON(na,p))}function Ia(M){return(M||[]).reduce((p,na)=>{return[...p,new oc(na.count,(ib=na.VALIDITY,(ib||[]).reduce((Sb,wc)=>Sb+ +(0===wc),0))),...Ia(na.children)];var ib},[])}function bb(M,p=[]){for(let na=-1,ib=(M||[]).length;++na<ib;){const Sb=
M[na];Sb.VALIDITY&&p.push(new Yb(p.length,Sb.VALIDITY.length));Sb.TYPE&&p.push(new Yb(p.length,Sb.TYPE.length));Sb.OFFSET&&p.push(new Yb(p.length,Sb.OFFSET.length));Sb.DATA&&p.push(new Yb(p.length,Sb.DATA.length));p=bb(Sb.children,p)}return p}function Hb(M){return new Map(Object.entries(M||{}))}function zb(M,p){const na=M.type.name;switch(na){case "NONE":case "null":return new De;case "binary":return new Hc;case "utf8":return new td;case "bool":return new id;case "list":return new eg((p||[])[0]);
case "struct":case "struct_":return new Sf(p||[])}switch(na){case "int":return p=M.type,new Ua(p.isSigned,p.bitWidth);case "floatingpoint":return new re(we[M.type.precision]);case "decimal":return p=M.type,new ke(p.scale,p.precision);case "date":return new Ob(ue[M.type.unit]);case "time":return p=M.type,new Uc(sd[p.unit],p.bitWidth);case "timestamp":return p=M.type,new kc(sd[p.unit],p.timezone);case "interval":return new ve(Fe[M.type.unit]);case "union":return M=M.type,new gg(Wd[M.mode],M.typeIds||
[],p||[]);case "fixedsizebinary":return new Gf(M.type.byteWidth);case "fixedsizelist":return new ug(M.type.listSize,(p||[])[0]);case "map":return new Ng((p||[])[0],M.type.keysSorted)}throw Error(`Unrecognized type: "${na}"`);}function mb(M,p){const na=[];for(let ib,Sb=-1,wc=-1,Wc=M.childrenLength();++Sb<Wc;)(ib=M.children(Sb))&&(na[++wc]=ph.decode(ib,p));return na}function Jb(M){const p=new Map;if(M)for(let na,ib,Sb=-1,wc=0|M.customMetadataLength();++Sb<wc;)(na=M.customMetadata(Sb))&&null!=(ib=na.key())&&
p.set(ib,na.value());return p}function Eb(M){return new Ua(M.isSigned(),M.bitWidth())}function Db(M,p){const na=M.typeType();switch(na){case Ge.NONE:case Ge.Null:return new De;case Ge.Binary:return new Hc;case Ge.Utf8:return new td;case Ge.Bool:return new id;case Ge.List:return new eg((p||[])[0]);case Ge.Struct_:return new Sf(p||[])}switch(na){case Ge.Int:return p=M.type(new Xe),new Ua(p.isSigned(),p.bitWidth());case Ge.FloatingPoint:return p=M.type(new Ed),new re(p.precision());case Ge.Decimal:return p=
M.type(new dg),new ke(p.scale(),p.precision());case Ge.Date:return p=M.type(new tg),new Ob(p.unit());case Ge.Time:return p=M.type(new fh),new Uc(p.unit(),p.bitWidth());case Ge.Timestamp:return p=M.type(new sb),new kc(p.unit(),p.timezone());case Ge.Interval:return p=M.type(new tb),new ve(p.unit());case Ge.Union:return M=M.type(new Qe),new gg(M.mode(),M.typeIdsArray()||[],p||[]);case Ge.FixedSizeBinary:return p=M.type(new kg),new Gf(p.byteWidth());case Ge.FixedSizeList:return M=M.type(new ne),new ug(M.listSize(),
(p||[])[0]);case Ge.Map:return M=M.type(new Le),new Ng((p||[])[0],M.keysSorted())}throw Error(`Unrecognized type: "${Ge[na]}" (${na})`);}function bc(M,p=0){for(let na=-1,ib=ab.length;++na<ib;)if(ab[na]!==M[p+na])return!1;return!0}function jc(M,p){return p instanceof M.constructor}function Tc(M,p){return M===p||jc(M,p)}function ub(M,p){return M===p||jc(M,p)&&M.bitWidth===p.bitWidth&&M.isSigned===p.isSigned}function Rc(M,p){return M===p||jc(M,p)&&M.precision===p.precision}function Gd(M,p){return M===
p||jc(M,p)&&M.unit===p.unit}function Kd(M,p){return M===p||jc(M,p)&&M.unit===p.unit&&M.timezone===p.timezone}function Vd(M,p){return M===p||jc(M,p)&&M.unit===p.unit&&M.bitWidth===p.bitWidth}function ze(M,p){return M===p||jc(M,p)&&M.mode===p.mode&&M.typeIds.every((na,ib)=>na===p.typeIds[ib])&&Ub.compareManyFields(M.children,p.children)}function ee(M,p){return M===p||jc(M,p)&&M.unit===p.unit}function bd(M,p){return Ub.compareSchemas(M,p)}function Bd(M){const p=M.byteLength+7&-8;return this.buffers.push(M),
this.bufferRegions.push(new Yb(this._byteLength,p)),this._byteLength+=p,this}function Ld(M){return Bd.call(this,M.values.subarray(0,M.length*M.stride))}function fe(M){const {length:p,values:na,valueOffsets:ib}=M;M=ib[0];const Sb=Math.min(ib[p]-M,na.byteLength-M);return Bd.call(this,A(-ib[0],p,ib)),Bd.call(this,na.subarray(M,M+Sb)),this}function Ee(M){const {length:p,valueOffsets:na}=M;return na&&Bd.call(this,A(na[0],p,na)),this.visit(M.getChildAt(0))}function dd(M){return this.visitMany(M.type.children.map((p,
na)=>M.getChildAt(na)).filter(Boolean))[0]}function*nd(M){for(const p of M)yield p.reduce((na,ib)=>`${na}${("0"+(255&ib).toString(16)).slice(-2)}`,"").toUpperCase()}function*Dc(M,p){for(let na=-1,ib=M.length/p;++na<ib;)yield""+eh.new(M.subarray((na+0)*p,(na+1)*p),!1)}function jd(M,p){let na=p;p instanceof Uh&&(na=p.chunks,M.reset(void 0,p.schema));for(const ib of na)M.write(ib);return M.finish()}function Qd(M,p){var na,ib,Sb,wc;return u(this,void 0,void 0,function*(){try{for(na=X(p);!(ib=yield na.next()).done;)M.write(ib.value)}catch(Wc){Sb=
{error:Wc}}finally{try{ib&&!ib.done&&(wc=na.return)&&(yield wc.call(na))}finally{if(Sb)throw Sb.error;}}return M.finish()})}function ae({name:M,type:p,nullable:na}){const ib=new Ec;return{name:M,nullable:na,type:ib.visit(p),children:(p.children||[]).map(ae),dictionary:ce.isDictionary(p)?{id:p.id,isOrdered:p.isOrdered,indexType:ib.visit(p.indices)}:void 0}}function te(M,p){return function(na,ib){const Sb=[...na.fields],wc=[],Wc={numBatches:ib.reduce((Ah,Jj)=>Math.max(Ah,Jj.length),0)};let Hd=0,Ud=
0,He=-1;const zf=ib.length;let mg,Og=[];for(;0<Wc.numBatches--;){Ud=1/0;for(He=-1;++He<zf;)Og[He]=mg=ib[He].shift(),Ud=Math.min(Ud,mg?mg.length:Ud);isFinite(Ud)&&(Og=Bb(Sb,Ud,Og,ib,Wc),0<Ud&&(wc[Hd++]=[Ud,Og.slice()]))}return[na=new Xg(Sb,na.metadata),wc.map(Ah=>new li(na,...Ah))]}(M,p.map(na=>na instanceof Rh?na.chunks.map(ib=>ib.data):[na.data]))}function Bb(M,p,na,ib,Sb){let wc,Wc,Hd=0,Ud=-1;const He=ib.length,zf=(p+63&-64)>>3;for(;++Ud<He;)(wc=na[Ud])&&(Hd=wc.length)>=p?Hd===p?na[Ud]=wc:(na[Ud]=
wc.slice(0,p),wc=wc.slice(p,Hd-p),Sb.numBatches=Math.max(Sb.numBatches,ib[Ud].unshift(wc))):((Wc=M[Ud]).nullable||(M[Ud]=Wc.clone({nullable:!0})),na[Ud]=wc?wc._changeLengthAndBackfillNullBitmap(p):Ef.new(Wc.type,0,p,p,[hb,hb,new Uint8Array(zf),hb]));return na}function $b(M){return function(){return M(this)}}function Gc(M){return function(p,na){return M(this,p,na)}}function Jc(M,p,na){if(void 0===p)return-1;if(null===p){a:{const {nullBitmap:Sb}=M.data;if(Sb&&!(0>=M.nullCount)){p=0;for(var ib of new Xd(Sb,
M.data.offset+(na||0),M.length,Sb,z)){if(!ib){M=p;break a}++p}}M=-1}return M}ib=Qa(p);for(let Sb=(na||0)-1,wc=M.length;++Sb<wc;)if(ib(M.get(Sb)))return Sb;return-1}function ud(M,p,na){p=Qa(p);for(let ib=(na||0)-1,Sb=M.length;++ib<Sb;)if(p(M.get(ib)))return ib;return-1}function Zc(M){if(0<M.nullCount)return function(Sb){const wc=tk.getVisitFn(Sb);return new Xd(Sb.data.nullBitmap,Sb.data.offset,Sb.length,Sb,(Wc,Hd,Ud,He)=>0!=(Ud&1<<He)?wc(Wc,Hd):null)}(M);const {type:p,typeId:na,length:ib}=M;return 1===
M.stride&&(na===nb.Timestamp||na===nb.Int&&64!==p.bitWidth||na===nb.Time&&64!==p.bitWidth||na===nb.Float&&0<p.precision)?M.data.values.subarray(0,ib)[Symbol.iterator]():new Ij(M,tk.getVisitFn(M))}function xd(M){const {type:p,length:na,stride:ib}=M;switch(p.typeId){case nb.Int:case nb.Float:case nb.Decimal:case nb.Time:case nb.Timestamp:return M.data.values.subarray(0,na*ib)}return[...ok.visit(M)]}function Sd(M,p){if(sg(p)||zc(p))return Qc.from({nullValues:[null,void 0],type:M(),values:p});const {values:na=
[],type:ib=M(),nullValues:Sb=[null,void 0]}=Object.assign({},p);return sg(na),Qc.from(Object.assign(Object.assign({nullValues:Sb},p),{type:ib}))}function*ie(M){M=gi.from(M);try{if(!M.open({autoDestroy:!1}).closed){do yield M;while(!M.reset().open().closed)}}finally{M.cancel()}}function Be(M){return U(this,arguments,function*(){const p=yield D(gi.from(M));try{if(!(yield D(p.open({autoDestroy:!1}))).closed){do yield yield D(p);while(!(yield D(p.reset().open())).closed)}}finally{yield D(p.cancel())}})}
function uc(M,p){function na(Wc,Hd){return u(this,void 0,void 0,function*(){let Ud=Wc.desiredSize,He;for(;!(He=yield Hd.next()).done;)if(Wc.enqueue(He.value),null!=Ud&&0>=--Ud)return;Wc.close()})}const ib=new aj;let Sb=null;const wc=new ReadableStream({cancel(){return u(this,void 0,void 0,function*(){yield ib.close()})},start(Wc){return u(this,void 0,void 0,function*(){yield na(Wc,Sb||(Sb=yield function(){return u(this,void 0,void 0,function*(){return yield(yield gi.from(ib)).open(p)})}()))})},pull(Wc){return u(this,
void 0,void 0,function*(){Sb?yield na(Wc,Sb):Wc.close()})}});return{writable:new WritableStream(ib,Object.assign({highWaterMark:16384},M)),readable:wc}}function Oc(M,p){function na(wc){return u(this,void 0,void 0,function*(){let Wc,Hd=wc.desiredSize;for(;Wc=yield Sb.read(Hd||null);)if(wc.enqueue(Wc),null!=Hd&&0>=(Hd-=Wc.byteLength))return;wc.close()})}const ib=new this(M),Sb=new mj(ib);p=new ReadableStream({type:"bytes",cancel(){return u(this,void 0,void 0,function*(){yield Sb.cancel()})},pull(wc){return u(this,
void 0,void 0,function*(){yield na(wc)})},start(wc){return u(this,void 0,void 0,function*(){yield na(wc)})}},Object.assign({highWaterMark:16384},p));return{writable:new WritableStream(ib,M),readable:p}}function Nd(M){return new dl(M)}function Od(M){return new Zl(M)}function pe(...M){return new bh(...M)}function ye(...M){return new yj(...M)}function me(M,p){return new zj(M,p)}h.r(f);var od={};h.r(od);h.d(od,"memcpy",function(){return R});h.d(od,"joinUint8Arrays",function(){return B});h.d(od,"toArrayBufferView",
function(){return v});h.d(od,"toInt8Array",function(){return Id});h.d(od,"toInt16Array",function(){return Td});h.d(od,"toInt32Array",function(){return nf});h.d(od,"toBigInt64Array",function(){return Se});h.d(od,"toUint8Array",function(){return Rd});h.d(od,"toUint16Array",function(){return Vf});h.d(od,"toUint32Array",function(){return jf});h.d(od,"toBigUint64Array",function(){return Jf});h.d(od,"toFloat32Array",function(){return Xf});h.d(od,"toFloat64Array",function(){return Pg});h.d(od,"toUint8ClampedArray",
function(){return dh});h.d(od,"toArrayBufferViewIterator",function(){return O});h.d(od,"toInt8ArrayIterator",function(){return Yf});h.d(od,"toInt16ArrayIterator",function(){return be});h.d(od,"toInt32ArrayIterator",function(){return Kf});h.d(od,"toUint8ArrayIterator",function(){return he});h.d(od,"toUint16ArrayIterator",function(){return Ue});h.d(od,"toUint32ArrayIterator",function(){return Pf});h.d(od,"toFloat32ArrayIterator",function(){return Ig});h.d(od,"toFloat64ArrayIterator",function(){return Ya});
h.d(od,"toUint8ClampedArrayIterator",function(){return Cb});h.d(od,"toArrayBufferViewAsyncIterator",function(){return N});h.d(od,"toInt8ArrayAsyncIterator",function(){return fc});h.d(od,"toInt16ArrayAsyncIterator",function(){return lc});h.d(od,"toInt32ArrayAsyncIterator",function(){return rc});h.d(od,"toUint8ArrayAsyncIterator",function(){return Pc});h.d(od,"toUint16ArrayAsyncIterator",function(){return $a});h.d(od,"toUint32ArrayAsyncIterator",function(){return xb});h.d(od,"toFloat32ArrayAsyncIterator",
function(){return Nb});h.d(od,"toFloat64ArrayAsyncIterator",function(){return cc});h.d(od,"toUint8ClampedArrayAsyncIterator",function(){return vc});h.d(od,"rebaseValueOffsets",function(){return A});h.d(od,"compareArrayLike",function(){return J});var hd={};h.r(hd);h.d(hd,"getBool",function(){return z});h.d(hd,"getBit",function(){return ba});h.d(hd,"setBool",function(){return K});h.d(hd,"truncateBitmap",function(){return r});h.d(hd,"packBools",function(){return Y});h.d(hd,"BitIterator",function(){return Xd});
h.d(hd,"popcnt_bit_range",function(){return Z});h.d(hd,"popcnt_array",function(){return E});h.d(hd,"popcnt_uint32",function(){return C});var ge={};h.r(ge);h.d(ge,"uint16ToFloat64",function(){return Ba});h.d(ge,"float64ToUint16",function(){return Ga});var $d={};h.r($d);h.d($d,"isArrowBigNumSymbol",function(){return Oi});h.d($d,"bignumToString",function(){return Vh});h.d($d,"bignumToBigInt",function(){return hk});h.d($d,"BN",function(){return eh});var cd={};h.r(cd);h.d(cd,"BaseInt64",function(){return Ph});
h.d(cd,"Uint64",function(){return sh});h.d(cd,"Int64",function(){return uh});h.d(cd,"Int128",function(){return hi});var Ie={};h.r(Ie);h.d(Ie,"clampIndex",function(){return Aa});h.d(Ie,"clampRange",function(){return Da});h.d(Ie,"createElementComparator",function(){return Qa});var Je={};h.r(Je);h.d(Je,"Value",function(){return $k});h.d(Je,"Literal",function(){return dl});h.d(Je,"Col",function(){return Zl});h.d(Je,"Predicate",function(){return ol});h.d(Je,"ComparisonPredicate",function(){return bl});
h.d(Je,"CombinationPredicate",function(){return zl});h.d(Je,"And",function(){return bh});h.d(Je,"Or",function(){return yj});h.d(Je,"Equals",function(){return tf});h.d(Je,"LTeq",function(){return Aj});h.d(Je,"GTeq",function(){return cl});h.d(Je,"Not",function(){return pl});h.d(Je,"CustomPredicate",function(){return zj});h.d(Je,"lit",function(){return Nd});h.d(Je,"col",function(){return Od});h.d(Je,"and",function(){return pe});h.d(Je,"or",function(){return ye});h.d(Je,"custom",function(){return me});
var Ad={};Ad.Offset;Ad.Table;Ad.SIZEOF_SHORT=2;Ad.SIZEOF_INT=4;Ad.FILE_IDENTIFIER_LENGTH=4;Ad.SIZE_PREFIX_LENGTH=4;Ad.Encoding={UTF8_BYTES:1,UTF16_STRING:2};Ad.int32=new Int32Array(2);Ad.float32=new Float32Array(Ad.int32.buffer);Ad.float64=new Float64Array(Ad.int32.buffer);Ad.isLittleEndian=1===(new Uint16Array((new Uint8Array([1,0])).buffer))[0];Ad.Long=function(M,p){this.low=0|M;this.high=0|p};Ad.Long.create=function(M,p){return 0==M&&0==p?Ad.Long.ZERO:new Ad.Long(M,p)};Ad.Long.prototype.toFloat64=
function(){return(this.low>>>0)+4294967296*this.high};Ad.Long.prototype.equals=function(M){return this.low==M.low&&this.high==M.high};Ad.Long.ZERO=new Ad.Long(0,0);Ad.Builder=function(M){M=M?M:1024;this.bb=Ad.ByteBuffer.allocate(M);this.space=M;this.minalign=1;this.vtable=null;this.vtable_in_use=0;this.isNested=!1;this.object_start=0;this.vtables=[];this.vector_num_elems=0;this.force_defaults=!1};Ad.Builder.prototype.clear=function(){this.bb.clear();this.space=this.bb.capacity();this.minalign=1;this.vtable=
null;this.vtable_in_use=0;this.isNested=!1;this.object_start=0;this.vtables=[];this.vector_num_elems=0;this.force_defaults=!1};Ad.Builder.prototype.forceDefaults=function(M){this.force_defaults=M};Ad.Builder.prototype.dataBuffer=function(){return this.bb};Ad.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())};Ad.Builder.prototype.prep=function(M,p){M>this.minalign&&(this.minalign=M);for(var na=1+~(this.bb.capacity()-this.space+
p)&M-1;this.space<na+M+p;){var ib=this.bb.capacity();this.bb=Ad.Builder.growByteBuffer(this.bb);this.space+=this.bb.capacity()-ib}this.pad(na)};Ad.Builder.prototype.pad=function(M){for(var p=0;p<M;p++)this.bb.writeInt8(--this.space,0)};Ad.Builder.prototype.writeInt8=function(M){this.bb.writeInt8(--this.space,M)};Ad.Builder.prototype.writeInt16=function(M){this.bb.writeInt16(this.space-=2,M)};Ad.Builder.prototype.writeInt32=function(M){this.bb.writeInt32(this.space-=4,M)};Ad.Builder.prototype.writeInt64=
function(M){this.bb.writeInt64(this.space-=8,M)};Ad.Builder.prototype.writeFloat32=function(M){this.bb.writeFloat32(this.space-=4,M)};Ad.Builder.prototype.writeFloat64=function(M){this.bb.writeFloat64(this.space-=8,M)};Ad.Builder.prototype.addInt8=function(M){this.prep(1,0);this.writeInt8(M)};Ad.Builder.prototype.addInt16=function(M){this.prep(2,0);this.writeInt16(M)};Ad.Builder.prototype.addInt32=function(M){this.prep(4,0);this.writeInt32(M)};Ad.Builder.prototype.addInt64=function(M){this.prep(8,
0);this.writeInt64(M)};Ad.Builder.prototype.addFloat32=function(M){this.prep(4,0);this.writeFloat32(M)};Ad.Builder.prototype.addFloat64=function(M){this.prep(8,0);this.writeFloat64(M)};Ad.Builder.prototype.addFieldInt8=function(M,p,na){(this.force_defaults||p!=na)&&(this.addInt8(p),this.slot(M))};Ad.Builder.prototype.addFieldInt16=function(M,p,na){(this.force_defaults||p!=na)&&(this.addInt16(p),this.slot(M))};Ad.Builder.prototype.addFieldInt32=function(M,p,na){(this.force_defaults||p!=na)&&(this.addInt32(p),
this.slot(M))};Ad.Builder.prototype.addFieldInt64=function(M,p,na){!this.force_defaults&&p.equals(na)||(this.addInt64(p),this.slot(M))};Ad.Builder.prototype.addFieldFloat32=function(M,p,na){(this.force_defaults||p!=na)&&(this.addFloat32(p),this.slot(M))};Ad.Builder.prototype.addFieldFloat64=function(M,p,na){(this.force_defaults||p!=na)&&(this.addFloat64(p),this.slot(M))};Ad.Builder.prototype.addFieldOffset=function(M,p,na){(this.force_defaults||p!=na)&&(this.addOffset(p),this.slot(M))};Ad.Builder.prototype.addFieldStruct=
function(M,p,na){p!=na&&(this.nested(p),this.slot(M))};Ad.Builder.prototype.nested=function(M){if(M!=this.offset())throw Error("FlatBuffers: struct must be serialized inline.");};Ad.Builder.prototype.notNested=function(){if(this.isNested)throw Error("FlatBuffers: object serialization must not be nested.");};Ad.Builder.prototype.slot=function(M){this.vtable[M]=this.offset()};Ad.Builder.prototype.offset=function(){return this.bb.capacity()-this.space};Ad.Builder.growByteBuffer=function(M){var p=M.capacity();
if(3221225472&p)throw Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var na=p<<1,ib=Ad.ByteBuffer.allocate(na);return ib.setPosition(na-p),ib.bytes().set(M.bytes(),na-p),ib};Ad.Builder.prototype.addOffset=function(M){this.prep(Ad.SIZEOF_INT,0);this.writeInt32(this.offset()-M+Ad.SIZEOF_INT)};Ad.Builder.prototype.startObject=function(M){this.notNested();null==this.vtable&&(this.vtable=[]);this.vtable_in_use=M;for(var p=0;p<M;p++)this.vtable[p]=0;this.isNested=!0;this.object_start=this.offset()};
Ad.Builder.prototype.endObject=function(){if(null==this.vtable||!this.isNested)throw Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var M=this.offset(),p=this.vtable_in_use-1;0<=p&&0==this.vtable[p];p--);for(var na=p+1;0<=p;p--)this.addInt16(0!=this.vtable[p]?M-this.vtable[p]:0);this.addInt16(M-this.object_start);na=(na+2)*Ad.SIZEOF_SHORT;this.addInt16(na);var ib=0,Sb=this.space;p=0;a:for(;p<this.vtables.length;p++){var wc=this.bb.capacity()-this.vtables[p];if(na==
this.bb.readInt16(wc)){for(var Wc=Ad.SIZEOF_SHORT;Wc<na;Wc+=Ad.SIZEOF_SHORT)if(this.bb.readInt16(Sb+Wc)!=this.bb.readInt16(wc+Wc))continue a;ib=this.vtables[p];break}}return ib?(this.space=this.bb.capacity()-M,this.bb.writeInt32(this.space,ib-M)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-M,this.offset()-M)),this.isNested=!1,M};Ad.Builder.prototype.finish=function(M,p,na){na=na?Ad.SIZE_PREFIX_LENGTH:0;if(p){if(this.prep(this.minalign,Ad.SIZEOF_INT+Ad.FILE_IDENTIFIER_LENGTH+
na),p.length!=Ad.FILE_IDENTIFIER_LENGTH)throw Error("FlatBuffers: file identifier must be length "+Ad.FILE_IDENTIFIER_LENGTH);for(var ib=Ad.FILE_IDENTIFIER_LENGTH-1;0<=ib;ib--)this.writeInt8(p.charCodeAt(ib))}this.prep(this.minalign,Ad.SIZEOF_INT+na);this.addOffset(M);na&&this.addInt32(this.bb.capacity()-this.space);this.bb.setPosition(this.space)};Ad.Builder.prototype.finishSizePrefixed=function(M,p){this.finish(M,p,!0)};Ad.Builder.prototype.requiredField=function(M,p){M=this.bb.capacity()-M;M-=
this.bb.readInt32(M);if(0==this.bb.readInt16(M+p))throw Error("FlatBuffers: field "+p+" must be set");};Ad.Builder.prototype.startVector=function(M,p,na){this.notNested();this.vector_num_elems=p;this.prep(Ad.SIZEOF_INT,M*p);this.prep(na,M*p)};Ad.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()};Ad.Builder.prototype.createString=function(M){if(M instanceof Uint8Array)var p=M;else{p=[];for(var na=0;na<M.length;){var ib=M.charCodeAt(na++);ib=55296>ib||
56320<=ib?ib:(ib<<10)+M.charCodeAt(na++)+-56613888;128>ib?p.push(ib):(2048>ib?p.push(ib>>6&31|192):(65536>ib?p.push(ib>>12&15|224):p.push(ib>>18&7|240,ib>>12&63|128),p.push(ib>>6&63|128)),p.push(63&ib|128))}}this.addInt8(0);this.startVector(1,p.length,1);this.bb.setPosition(this.space-=p.length);na=0;M=this.space;for(ib=this.bb.bytes();na<p.length;na++)ib[M++]=p[na];return this.endVector()};Ad.Builder.prototype.createLong=function(M,p){return Ad.Long.create(M,p)};Ad.ByteBuffer=function(M){this.bytes_=
M;this.position_=0};Ad.ByteBuffer.allocate=function(M){return new Ad.ByteBuffer(new Uint8Array(M))};Ad.ByteBuffer.prototype.clear=function(){this.position_=0};Ad.ByteBuffer.prototype.bytes=function(){return this.bytes_};Ad.ByteBuffer.prototype.position=function(){return this.position_};Ad.ByteBuffer.prototype.setPosition=function(M){this.position_=M};Ad.ByteBuffer.prototype.capacity=function(){return this.bytes_.length};Ad.ByteBuffer.prototype.readInt8=function(M){return this.readUint8(M)<<24>>24};
Ad.ByteBuffer.prototype.readUint8=function(M){return this.bytes_[M]};Ad.ByteBuffer.prototype.readInt16=function(M){return this.readUint16(M)<<16>>16};Ad.ByteBuffer.prototype.readUint16=function(M){return this.bytes_[M]|this.bytes_[M+1]<<8};Ad.ByteBuffer.prototype.readInt32=function(M){return this.bytes_[M]|this.bytes_[M+1]<<8|this.bytes_[M+2]<<16|this.bytes_[M+3]<<24};Ad.ByteBuffer.prototype.readUint32=function(M){return this.readInt32(M)>>>0};Ad.ByteBuffer.prototype.readInt64=function(M){return new Ad.Long(this.readInt32(M),
this.readInt32(M+4))};Ad.ByteBuffer.prototype.readUint64=function(M){return new Ad.Long(this.readUint32(M),this.readUint32(M+4))};Ad.ByteBuffer.prototype.readFloat32=function(M){return Ad.int32[0]=this.readInt32(M),Ad.float32[0]};Ad.ByteBuffer.prototype.readFloat64=function(M){return Ad.int32[Ad.isLittleEndian?0:1]=this.readInt32(M),Ad.int32[Ad.isLittleEndian?1:0]=this.readInt32(M+4),Ad.float64[0]};Ad.ByteBuffer.prototype.writeInt8=function(M,p){this.bytes_[M]=p};Ad.ByteBuffer.prototype.writeUint8=
function(M,p){this.bytes_[M]=p};Ad.ByteBuffer.prototype.writeInt16=function(M,p){this.bytes_[M]=p;this.bytes_[M+1]=p>>8};Ad.ByteBuffer.prototype.writeUint16=function(M,p){this.bytes_[M]=p;this.bytes_[M+1]=p>>8};Ad.ByteBuffer.prototype.writeInt32=function(M,p){this.bytes_[M]=p;this.bytes_[M+1]=p>>8;this.bytes_[M+2]=p>>16;this.bytes_[M+3]=p>>24};Ad.ByteBuffer.prototype.writeUint32=function(M,p){this.bytes_[M]=p;this.bytes_[M+1]=p>>8;this.bytes_[M+2]=p>>16;this.bytes_[M+3]=p>>24};Ad.ByteBuffer.prototype.writeInt64=
function(M,p){this.writeInt32(M,p.low);this.writeInt32(M+4,p.high)};Ad.ByteBuffer.prototype.writeUint64=function(M,p){this.writeUint32(M,p.low);this.writeUint32(M+4,p.high)};Ad.ByteBuffer.prototype.writeFloat32=function(M,p){Ad.float32[0]=p;this.writeInt32(M,Ad.int32[0])};Ad.ByteBuffer.prototype.writeFloat64=function(M,p){Ad.float64[0]=p;this.writeInt32(M,Ad.int32[Ad.isLittleEndian?0:1]);this.writeInt32(M+4,Ad.int32[Ad.isLittleEndian?1:0])};Ad.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<
this.position_+Ad.SIZEOF_INT+Ad.FILE_IDENTIFIER_LENGTH)throw Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var M="",p=0;p<Ad.FILE_IDENTIFIER_LENGTH;p++)M+=String.fromCharCode(this.readInt8(this.position_+Ad.SIZEOF_INT+p));return M};Ad.ByteBuffer.prototype.__offset=function(M,p){M-=this.readInt32(M);return p<this.readInt16(M)?this.readInt16(M+p):0};Ad.ByteBuffer.prototype.__union=function(M,p){return M.bb_pos=p+this.readInt32(p),M.bb=this,M};Ad.ByteBuffer.prototype.__string=
function(M,p){M+=this.readInt32(M);var na=this.readInt32(M),ib="",Sb=0;if(M+=Ad.SIZEOF_INT,p===Ad.Encoding.UTF8_BYTES)return this.bytes_.subarray(M,M+na);for(;Sb<na;){p=this.readUint8(M+Sb++);if(!(192>p)){var wc=this.readUint8(M+Sb++);if(224>p)p=(31&p)<<6|63&wc;else{var Wc=this.readUint8(M+Sb++);p=240>p?(15&p)<<12|(63&wc)<<6|63&Wc:(7&p)<<18|(63&wc)<<12|(63&Wc)<<6|63&this.readUint8(M+Sb++)}}ib+=65536>p?String.fromCharCode(p):String.fromCharCode(55296+((p-=65536)>>10),56320+(1023&p))}return ib};Ad.ByteBuffer.prototype.__indirect=
function(M){return M+this.readInt32(M)};Ad.ByteBuffer.prototype.__vector=function(M){return M+this.readInt32(M)+Ad.SIZEOF_INT};Ad.ByteBuffer.prototype.__vector_len=function(M){return this.readInt32(M+this.readInt32(M))};Ad.ByteBuffer.prototype.__has_identifier=function(M){if(M.length!=Ad.FILE_IDENTIFIER_LENGTH)throw Error("FlatBuffers: file identifier must be length "+Ad.FILE_IDENTIFIER_LENGTH);for(var p=0;p<Ad.FILE_IDENTIFIER_LENGTH;p++)if(M.charCodeAt(p)!=this.readInt8(this.position_+Ad.SIZEOF_INT+
p))return!1;return!0};Ad.ByteBuffer.prototype.createLong=function(M,p){return Ad.Long.create(M,p)};V.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():-1},prepend:function(M){if(Array.isArray(M))for(;M.length;)this.tokens.unshift(M.pop());else this.tokens.unshift(M)},push:function(M){if(Array.isArray(M))for(;M.length;)this.tokens.push(M.shift());else this.tokens.push(M)}};t.prototype={decode:function(M,p){M="object"==typeof M&&
M instanceof ArrayBuffer?new Uint8Array(M):"object"==typeof M&&"buffer"in M&&M.buffer instanceof ArrayBuffer?new Uint8Array(M.buffer,M.byteOffset,M.byteLength):new Uint8Array(0);p=S(p);this._streaming||(this._decoder=new x({fatal:this._fatal}),this._BOMseen=!1);this._streaming=!!p.stream;var na;M=new V(M);for(p=[];!M.endOfStream()&&-1!==(na=this._decoder.handler(M,M.read()));)null!==na&&(Array.isArray(na)?p.push.apply(p,na):p.push(na));if(!this._streaming){do{if(-1===(na=this._decoder.handler(M,M.read())))break;
null!==na&&(Array.isArray(na)?p.push.apply(p,na):p.push(na))}while(!M.endOfStream());this._decoder=null}p.length&&(-1===["utf-8"].indexOf(this.encoding)||this._ignoreBOM||this._BOMseen||(65279===p[0]?(this._BOMseen=!0,p.shift()):this._BOMseen=!0));na="";for(M=0;M<p.length;++M){var ib=p[M];na+=65535>=ib?String.fromCharCode(ib):String.fromCharCode(55296+((ib-=65536)>>10),56320+(1023&ib))}return na}};w.prototype={encode:function(M,p){M=M?M+"":"";p=S(p);this._streaming||(this._encoder=new I(this._options));
this._streaming=!!p.stream;var na;p=[];for(var ib=M+"",Sb=ib.length,wc=0,Wc=[];wc<Sb;){var Hd=ib.charCodeAt(wc);if(55296>Hd||57343<Hd)Wc.push(Hd);else if(56320<=Hd&&57343>=Hd)Wc.push(65533);else if(55296<=Hd&&56319>=Hd)if(wc===Sb-1)Wc.push(65533);else{var Ud=M.charCodeAt(wc+1);56320<=Ud&&57343>=Ud?(Wc.push(65536+((1023&Hd)<<10)+(1023&Ud)),wc+=1):Wc.push(65533)}wc+=1}for(M=new V(Wc);!M.endOfStream()&&-1!==(na=this._encoder.handler(M,M.read()));)Array.isArray(na)?p.push.apply(p,na):p.push(na);if(!this._streaming){for(;-1!==
(na=this._encoder.handler(M,M.read()));)Array.isArray(na)?p.push.apply(p,na):p.push(na);this._encoder=null}return new Uint8Array(p)}};const $e=new ("undefined"!=typeof TextDecoder?TextDecoder:t)("utf-8"),qf=M=>$e.decode(M),Ye=new ("undefined"!=typeof TextEncoder?TextEncoder:w),af=Object.freeze({done:!0,value:void 0});class jg{constructor(M){this._json=M}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class oe{tee(){return this._getDOMStream().tee()}pipe(M,
p){return this._getNodeStream().pipe(M,p)}pipeTo(M,p){return this._getDOMStream().pipeTo(M,p)}pipeThrough(M,p){return this._getDOMStream().pipeThrough(M,p)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class If extends oe{constructor(){super();this._values=[];this.resolvers=[];this._closedPromise=new Promise(M=>this._closedPromiseResolve=M)}get closed(){return this._closedPromise}cancel(M){return u(this,
void 0,void 0,function*(){yield this.return(M)})}write(M){this._ensureOpen()&&(0>=this.resolvers.length?this._values.push(M):this.resolvers.shift().resolve({done:!1,value:M}))}abort(M){this._closedPromiseResolve&&(0>=this.resolvers.length?this._error={error:M}:this.resolvers.shift().reject({done:!0,value:M}))}close(){if(this._closedPromiseResolve){const {resolvers:M}=this;for(;0<M.length;)M.shift().resolve(af);this._closedPromiseResolve();this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(M){return ed.toDOMStream(this._closedPromiseResolve||
this._error?this:this._values,M)}toNodeStream(M){return ed.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,M)}throw(M){return u(this,void 0,void 0,function*(){return yield this.abort(M),af})}return(M){return u(this,void 0,void 0,function*(){return yield this.close(),af})}read(M){return u(this,void 0,void 0,function*(){return(yield this.next(M,"read")).value})}peek(M){return u(this,void 0,void 0,function*(){return(yield this.next(M,"peek")).value})}next(...M){return 0<this._values.length?
Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((p,na)=>{this.resolvers.push({resolve:p,reject:na})}):Promise.resolve(af)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw Error(this+" is closed");}}const [hg,zg]=(()=>{function M(){throw p();}const p=()=>{throw Error("BigInt is not available in this environment");};return M.asIntN=()=>{throw p();},M.asUintN=()=>{throw p();},"undefined"!=
typeof BigInt?[BigInt,!0]:[M,!1]})(),[pf]=(()=>{const M=()=>{throw Error("BigInt64Array is not available in this environment");};return"undefined"!=typeof BigInt64Array?[BigInt64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw M();}static from(){throw M();}constructor(){throw M();}},!1]})(),[bg]=(()=>{const M=()=>{throw Error("BigUint64Array is not available in this environment");};return"undefined"!=typeof BigUint64Array?[BigUint64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw M();
}static from(){throw M();}constructor(){throw M();}},!1]})(),wg=M=>"function"==typeof M,Tf=M=>null!=M&&Object(M)===M&&wg(M.then),sg=M=>null!=M&&Object(M)===M&&wg(M[Symbol.iterator]),zc=M=>null!=M&&Object(M)===M&&wg(M[Symbol.asyncIterator]),Wa=M=>{var p;if(p=null!=M&&Object(M)===M)M=M.schema,p=null!=M&&Object(M)===M;return p},Ha=M=>null!=M&&Object(M)===M&&wg(M.stat)&&"number"==typeof M.fd,m=M=>null!=M&&Object(M)===M&&wg(M.cancel)&&wg(M.getReader)&&!(M instanceof oe),Na=M=>null!=M&&Object(M)===M&&wg(M.read)&&
wg(M.pipe)&&"boolean"==typeof M.readable&&!(M instanceof oe);var Xb=Ad.ByteBuffer;const Xc="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,Id=M=>v(Int8Array,M),Td=M=>v(Int16Array,M),nf=M=>v(Int32Array,M),Se=M=>v(pf,M),Rd=M=>v(Uint8Array,M),Vf=M=>v(Uint16Array,M),jf=M=>v(Uint32Array,M),Jf=M=>v(bg,M),Xf=M=>v(Float32Array,M),Pg=M=>v(Float64Array,M),dh=M=>v(Uint8ClampedArray,M),Zg=M=>(M.next(),M),Yf=M=>O(Int8Array,M),be=M=>O(Int16Array,M),Kf=M=>O(Int32Array,M),he=M=>O(Uint8Array,M),
Ue=M=>O(Uint16Array,M),Pf=M=>O(Uint32Array,M),Ig=M=>O(Float32Array,M),Ya=M=>O(Float64Array,M),Cb=M=>O(Uint8ClampedArray,M),fc=M=>N(Int8Array,M),lc=M=>N(Int16Array,M),rc=M=>N(Int32Array,M),Pc=M=>N(Uint8Array,M),$a=M=>N(Uint16Array,M),xb=M=>N(Uint32Array,M),Nb=M=>N(Float32Array,M),cc=M=>N(Float64Array,M),vc=M=>N(Uint8ClampedArray,M);var ed={fromIterable:M=>jb(function*(p){let na,ib,Sb,wc,Wc=!1,Hd=[],Ud=0;({cmd:Sb,size:wc}=yield null);p=O(Uint8Array,p)[Symbol.iterator]();try{do if({done:na,value:ib}=
isNaN(wc-Ud)?p.next(void 0):p.next(wc-Ud),!na&&0<ib.byteLength&&(Hd.push(ib),Ud+=ib.byteLength),na||wc<=Ud){do({cmd:Sb,size:wc}=yield"peek"===Sb?B(Hd,wc)[0]:([ib,Hd,Ud]=B(Hd,wc),ib));while(wc<Ud)}while(!na)}catch(He){(Wc=!0,"function"==typeof p.throw)&&p.throw(He)}finally{!1===Wc&&"function"==typeof p.return&&p.return(null)}return null}(M)),fromAsyncIterable:M=>jb(function(p){return U(this,arguments,function*(){let na,ib,Sb,wc,Wc=!1,Hd=[],Ud=0;({cmd:Sb,size:wc}=yield yield D(null));const He=N(Uint8Array,
p)[Symbol.asyncIterator]();try{do if({done:na,value:ib}=isNaN(wc-Ud)?yield D(He.next(void 0)):yield D(He.next(wc-Ud)),!na&&0<ib.byteLength&&(Hd.push(ib),Ud+=ib.byteLength),na||wc<=Ud){do({cmd:Sb,size:wc}=yield yield D("peek"===Sb?B(Hd,wc)[0]:([ib,Hd,Ud]=B(Hd,wc),ib)));while(wc<Ud)}while(!na)}catch(zf){(Wc=!0,"function"==typeof He.throw)&&(yield D(He.throw(zf)))}finally{!1===Wc&&"function"==typeof He.return&&(yield D(He.return(new Uint8Array(0))))}return yield D(null)})}(M)),fromDOMStream:M=>jb(function(p){return U(this,
arguments,function*(){let na,ib,Sb,wc=!1,Wc=!1,Hd=[],Ud=0;({cmd:ib,size:Sb}=yield yield D(null));const He=new Qb(p);try{do if({done:wc,value:na}=isNaN(Sb-Ud)?yield D(He.read(void 0)):yield D(He.read(Sb-Ud)),!wc&&0<na.byteLength&&(Hd.push(v(Uint8Array,na)),Ud+=na.byteLength),wc||Sb<=Ud){do({cmd:ib,size:Sb}=yield yield D("peek"===ib?B(Hd,Sb)[0]:([na,Hd,Ud]=B(Hd,Sb),na)));while(Sb<Ud)}while(!wc)}catch(zf){Wc=!0,yield D(He.cancel(zf))}finally{!1===Wc?yield D(He.cancel()):p.locked&&He.releaseLock()}return yield D(null)})}(M)),
fromNodeStream:M=>jb(function(p){return U(this,arguments,function*(){function na(Og,Ah){return Wc=mg=null,new Promise((Jj,fk)=>{for(const [Bj,Wk]of Og)p.off(Bj,Wk);try{const Bj=p.destroy;Bj&&Bj.call(p,Ah);Ah=void 0}catch(Bj){Ah=Bj||Ah}finally{null!=Ah?fk(Ah):Jj()}})}const ib=[];let Sb,wc,Wc,Hd="error",Ud=!1,He=null,zf=0,mg=[];if({cmd:Sb,size:wc}=yield yield D(null),p.isTTY)return yield yield D(new Uint8Array(0)),yield D(null);try{ib[0]=pc(p,"end");ib[1]=pc(p,"error");do{if(ib[2]=pc(p,"readable"),
[Hd,He]=yield D(Promise.race(ib.map(Og=>Og[2]))),"error"===Hd)break;if((Ud="end"===Hd)||(isFinite(wc-zf)?(Wc=v(Uint8Array,p.read(wc-zf)),Wc.byteLength<wc-zf&&(Wc=v(Uint8Array,p.read(void 0)))):Wc=v(Uint8Array,p.read(void 0)),0<Wc.byteLength&&(mg.push(Wc),zf+=Wc.byteLength)),Ud||wc<=zf){do({cmd:Sb,size:wc}=yield yield D("peek"===Sb?B(mg,wc)[0]:([Wc,mg,zf]=B(mg,wc),Wc)));while(wc<zf)}}while(!Ud)}finally{yield D(na(ib,"error"===Hd?He:null))}return yield D(null)})}(M)),toDOMStream(M,p){throw Error('"toDOMStream" not available in this environment');
},toNodeStream(M,p){throw Error('"toNodeStream" not available in this environment');}};const jb=M=>(M.next(),M);class Qb{constructor(M){this.source=M;this.defaultReader=this.byobReader=null;try{this.supportsBYOB=!!(this.reader=this.getBYOBReader())}catch(p){this.supportsBYOB=!(this.reader=this.getDefaultReader())}}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock();this.reader=this.byobReader=this.defaultReader=null}cancel(M){return u(this,
void 0,void 0,function*(){const {reader:p,source:na}=this;p&&(yield p.cancel(M).catch(()=>{}));na&&na.locked&&this.releaseLock()})}read(M){return u(this,void 0,void 0,function*(){if(0===M)return{done:null==this.reader,value:new Uint8Array(0)};const p=this.supportsBYOB&&"number"==typeof M?yield this.readFromBYOBReader(M):yield this.getDefaultReader().read();return!p.done&&(p.value=v(Uint8Array,p)),p})}getDefaultReader(){return this.byobReader&&this.releaseLock(),this.defaultReader||(this.defaultReader=
this.source.getReader(),this.defaultReader.closed.catch(()=>{})),this.reader=this.defaultReader}getBYOBReader(){return this.defaultReader&&this.releaseLock(),this.byobReader||(this.byobReader=this.source.getReader({mode:"byob"}),this.byobReader.closed.catch(()=>{})),this.reader=this.byobReader}readFromBYOBReader(M){return u(this,void 0,void 0,function*(){return yield T(this.getBYOBReader(),new ArrayBuffer(M),0,M)})}}const pc=(M,p)=>{const na=Sb=>ib([p,Sb]);let ib;return[p,na,new Promise(Sb=>(ib=Sb)&&
M.once(p,na))]};class Qc{}var Cc,vd,Wd,we,ue,sd,Fe,Ge,Me,rf,Ma,lb,vb,nb,ac,yc;Qc.prototype.data=null;(function(M){M[M.V1=0]="V1";M[M.V2=1]="V2";M[M.V3=2]="V3";M[M.V4=3]="V4";M[M.V5=4]="V5"})(Cc||(Cc={}));(function(M){M[M.UNUSED=0]="UNUSED";M[M.DICTIONARY_REPLACEMENT=1]="DICTIONARY_REPLACEMENT";M[M.COMPRESSED_BODY=2]="COMPRESSED_BODY"})(vd||(vd={}));(function(M){M[M.Sparse=0]="Sparse";M[M.Dense=1]="Dense"})(Wd||(Wd={}));(function(M){M[M.HALF=0]="HALF";M[M.SINGLE=1]="SINGLE";M[M.DOUBLE=2]="DOUBLE"})(we||
(we={}));(function(M){M[M.DAY=0]="DAY";M[M.MILLISECOND=1]="MILLISECOND"})(ue||(ue={}));(function(M){M[M.SECOND=0]="SECOND";M[M.MILLISECOND=1]="MILLISECOND";M[M.MICROSECOND=2]="MICROSECOND";M[M.NANOSECOND=3]="NANOSECOND"})(sd||(sd={}));(function(M){M[M.YEAR_MONTH=0]="YEAR_MONTH";M[M.DAY_TIME=1]="DAY_TIME"})(Fe||(Fe={}));(function(M){M[M.NONE=0]="NONE";M[M.Null=1]="Null";M[M.Int=2]="Int";M[M.FloatingPoint=3]="FloatingPoint";M[M.Binary=4]="Binary";M[M.Utf8=5]="Utf8";M[M.Bool=6]="Bool";M[M.Decimal=7]=
"Decimal";M[M.Date=8]="Date";M[M.Time=9]="Time";M[M.Timestamp=10]="Timestamp";M[M.Interval=11]="Interval";M[M.List=12]="List";M[M.Struct_=13]="Struct_";M[M.Union=14]="Union";M[M.FixedSizeBinary=15]="FixedSizeBinary";M[M.FixedSizeList=16]="FixedSizeList";M[M.Map=17]="Map";M[M.Duration=18]="Duration";M[M.LargeBinary=19]="LargeBinary";M[M.LargeUtf8=20]="LargeUtf8";M[M.LargeList=21]="LargeList"})(Ge||(Ge={}));(function(M){M[M.DenseArray=0]="DenseArray"})(Me||(Me={}));(function(M){M[M.Little=0]="Little";
M[M.Big=1]="Big"})(rf||(rf={}));class Mc{constructor(){this.bb=null;this.bb_pos=0}__init(M,p){return this.bb_pos=M,this.bb=p,this}static getRootAsNull(M,p){return(p||new Mc).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsNull(M,p){return M.setPosition(M.position()+Ad.SIZE_PREFIX_LENGTH),(p||new Mc).__init(M.readInt32(M.position())+M.position(),M)}static startNull(M){M.startObject(0)}static endNull(M){return M.endObject()}static createNull(M){return Mc.startNull(M),Mc.endNull(M)}}
class md{constructor(){this.bb=null;this.bb_pos=0}__init(M,p){return this.bb_pos=M,this.bb=p,this}static getRootAsStruct_(M,p){return(p||new md).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsStruct_(M,p){return M.setPosition(M.position()+Ad.SIZE_PREFIX_LENGTH),(p||new md).__init(M.readInt32(M.position())+M.position(),M)}static startStruct_(M){M.startObject(0)}static endStruct_(M){return M.endObject()}static createStruct_(M){return md.startStruct_(M),md.endStruct_(M)}}
class yd{constructor(){this.bb=null;this.bb_pos=0}__init(M,p){return this.bb_pos=M,this.bb=p,this}static getRootAsList(M,p){return(p||new yd).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsList(M,p){return M.setPosition(M.position()+Ad.SIZE_PREFIX_LENGTH),(p||new yd).__init(M.readInt32(M.position())+M.position(),M)}static startList(M){M.startObject(0)}static endList(M){return M.endObject()}static createList(M){return yd.startList(M),yd.endList(M)}}class ne{constructor(){this.bb=
null;this.bb_pos=0}__init(M,p){return this.bb_pos=M,this.bb=p,this}static getRootAsFixedSizeList(M,p){return(p||new ne).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsFixedSizeList(M,p){return M.setPosition(M.position()+Ad.SIZE_PREFIX_LENGTH),(p||new ne).__init(M.readInt32(M.position())+M.position(),M)}listSize(){const M=this.bb.__offset(this.bb_pos,4);return M?this.bb.readInt32(this.bb_pos+M):0}static startFixedSizeList(M){M.startObject(1)}static addListSize(M,p){M.addFieldInt32(0,
p,0)}static endFixedSizeList(M){return M.endObject()}static createFixedSizeList(M,p){return ne.startFixedSizeList(M),ne.addListSize(M,p),ne.endFixedSizeList(M)}}class Le{constructor(){this.bb=null;this.bb_pos=0}__init(M,p){return this.bb_pos=M,this.bb=p,this}static getRootAsMap(M,p){return(p||new Le).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsMap(M,p){return M.setPosition(M.position()+Ad.SIZE_PREFIX_LENGTH),(p||new Le).__init(M.readInt32(M.position())+M.position(),
M)}keysSorted(){const M=this.bb.__offset(this.bb_pos,4);return!!M&&!!this.bb.readInt8(this.bb_pos+M)}static startMap(M){M.startObject(1)}static addKeysSorted(M,p){M.addFieldInt8(0,+p,0)}static endMap(M){return M.endObject()}static createMap(M,p){return Le.startMap(M),Le.addKeysSorted(M,p),Le.endMap(M)}}class Qe{constructor(){this.bb=null;this.bb_pos=0}__init(M,p){return this.bb_pos=M,this.bb=p,this}static getRootAsUnion(M,p){return(p||new Qe).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsUnion(M,
p){return M.setPosition(M.position()+Ad.SIZE_PREFIX_LENGTH),(p||new Qe).__init(M.readInt32(M.position())+M.position(),M)}mode(){const M=this.bb.__offset(this.bb_pos,4);return M?this.bb.readInt16(this.bb_pos+M):Wd.Sparse}typeIds(M){const p=this.bb.__offset(this.bb_pos,6);return p?this.bb.readInt32(this.bb.__vector(this.bb_pos+p)+4*M):0}typeIdsLength(){const M=this.bb.__offset(this.bb_pos,6);return M?this.bb.__vector_len(this.bb_pos+M):0}typeIdsArray(){const M=this.bb.__offset(this.bb_pos,6);return M?
new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+M),this.bb.__vector_len(this.bb_pos+M)):null}static startUnion(M){M.startObject(2)}static addMode(M,p){M.addFieldInt16(0,p,Wd.Sparse)}static addTypeIds(M,p){M.addFieldOffset(1,p,0)}static createTypeIdsVector(M,p){M.startVector(4,p.length,4);for(let na=p.length-1;0<=na;na--)M.addInt32(p[na]);return M.endVector()}static startTypeIdsVector(M,p){M.startVector(4,p,4)}static endUnion(M){return M.endObject()}static createUnion(M,
p,na){return Qe.startUnion(M),Qe.addMode(M,p),Qe.addTypeIds(M,na),Qe.endUnion(M)}}class Xe{constructor(){this.bb=null;this.bb_pos=0}__init(M,p){return this.bb_pos=M,this.bb=p,this}static getRootAsInt(M,p){return(p||new Xe).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsInt(M,p){return M.setPosition(M.position()+Ad.SIZE_PREFIX_LENGTH),(p||new Xe).__init(M.readInt32(M.position())+M.position(),M)}bitWidth(){const M=this.bb.__offset(this.bb_pos,4);return M?this.bb.readInt32(this.bb_pos+
M):0}isSigned(){const M=this.bb.__offset(this.bb_pos,6);return!!M&&!!this.bb.readInt8(this.bb_pos+M)}static startInt(M){M.startObject(2)}static addBitWidth(M,p){M.addFieldInt32(0,p,0)}static addIsSigned(M,p){M.addFieldInt8(1,+p,0)}static endInt(M){return M.endObject()}static createInt(M,p,na){return Xe.startInt(M),Xe.addBitWidth(M,p),Xe.addIsSigned(M,na),Xe.endInt(M)}}class Ed{constructor(){this.bb=null;this.bb_pos=0}__init(M,p){return this.bb_pos=M,this.bb=p,this}static getRootAsFloatingPoint(M,
p){return(p||new Ed).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsFloatingPoint(M,p){return M.setPosition(M.position()+Ad.SIZE_PREFIX_LENGTH),(p||new Ed).__init(M.readInt32(M.position())+M.position(),M)}precision(){const M=this.bb.__offset(this.bb_pos,4);return M?this.bb.readInt16(this.bb_pos+M):we.HALF}static startFloatingPoint(M){M.startObject(1)}static addPrecision(M,p){M.addFieldInt16(0,p,we.HALF)}static endFloatingPoint(M){return M.endObject()}static createFloatingPoint(M,
p){return Ed.startFloatingPoint(M),Ed.addPrecision(M,p),Ed.endFloatingPoint(M)}}class kf{constructor(){this.bb=null;this.bb_pos=0}__init(M,p){return this.bb_pos=M,this.bb=p,this}static getRootAsUtf8(M,p){return(p||new kf).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsUtf8(M,p){return M.setPosition(M.position()+Ad.SIZE_PREFIX_LENGTH),(p||new kf).__init(M.readInt32(M.position())+M.position(),M)}static startUtf8(M){M.startObject(0)}static endUtf8(M){return M.endObject()}static createUtf8(M){return kf.startUtf8(M),
kf.endUtf8(M)}}class og{constructor(){this.bb=null;this.bb_pos=0}__init(M,p){return this.bb_pos=M,this.bb=p,this}static getRootAsBinary(M,p){return(p||new og).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsBinary(M,p){return M.setPosition(M.position()+Ad.SIZE_PREFIX_LENGTH),(p||new og).__init(M.readInt32(M.position())+M.position(),M)}static startBinary(M){M.startObject(0)}static endBinary(M){return M.endObject()}static createBinary(M){return og.startBinary(M),og.endBinary(M)}}
class kg{constructor(){this.bb=null;this.bb_pos=0}__init(M,p){return this.bb_pos=M,this.bb=p,this}static getRootAsFixedSizeBinary(M,p){return(p||new kg).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsFixedSizeBinary(M,p){return M.setPosition(M.position()+Ad.SIZE_PREFIX_LENGTH),(p||new kg).__init(M.readInt32(M.position())+M.position(),M)}byteWidth(){const M=this.bb.__offset(this.bb_pos,4);return M?this.bb.readInt32(this.bb_pos+M):0}static startFixedSizeBinary(M){M.startObject(1)}static addByteWidth(M,
p){M.addFieldInt32(0,p,0)}static endFixedSizeBinary(M){return M.endObject()}static createFixedSizeBinary(M,p){return kg.startFixedSizeBinary(M),kg.addByteWidth(M,p),kg.endFixedSizeBinary(M)}}class Uf{constructor(){this.bb=null;this.bb_pos=0}__init(M,p){return this.bb_pos=M,this.bb=p,this}static getRootAsBool(M,p){return(p||new Uf).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsBool(M,p){return M.setPosition(M.position()+Ad.SIZE_PREFIX_LENGTH),(p||new Uf).__init(M.readInt32(M.position())+
M.position(),M)}static startBool(M){M.startObject(0)}static endBool(M){return M.endObject()}static createBool(M){return Uf.startBool(M),Uf.endBool(M)}}class dg{constructor(){this.bb=null;this.bb_pos=0}__init(M,p){return this.bb_pos=M,this.bb=p,this}static getRootAsDecimal(M,p){return(p||new dg).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsDecimal(M,p){return M.setPosition(M.position()+Ad.SIZE_PREFIX_LENGTH),(p||new dg).__init(M.readInt32(M.position())+M.position(),
M)}precision(){const M=this.bb.__offset(this.bb_pos,4);return M?this.bb.readInt32(this.bb_pos+M):0}scale(){const M=this.bb.__offset(this.bb_pos,6);return M?this.bb.readInt32(this.bb_pos+M):0}bitWidth(){const M=this.bb.__offset(this.bb_pos,8);return M?this.bb.readInt32(this.bb_pos+M):128}static startDecimal(M){M.startObject(3)}static addPrecision(M,p){M.addFieldInt32(0,p,0)}static addScale(M,p){M.addFieldInt32(1,p,0)}static addBitWidth(M,p){M.addFieldInt32(2,p,128)}static endDecimal(M){return M.endObject()}static createDecimal(M,
p,na,ib){return dg.startDecimal(M),dg.addPrecision(M,p),dg.addScale(M,na),dg.addBitWidth(M,ib),dg.endDecimal(M)}}class tg{constructor(){this.bb=null;this.bb_pos=0}__init(M,p){return this.bb_pos=M,this.bb=p,this}static getRootAsDate(M,p){return(p||new tg).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsDate(M,p){return M.setPosition(M.position()+Ad.SIZE_PREFIX_LENGTH),(p||new tg).__init(M.readInt32(M.position())+M.position(),M)}unit(){const M=this.bb.__offset(this.bb_pos,
4);return M?this.bb.readInt16(this.bb_pos+M):ue.MILLISECOND}static startDate(M){M.startObject(1)}static addUnit(M,p){M.addFieldInt16(0,p,ue.MILLISECOND)}static endDate(M){return M.endObject()}static createDate(M,p){return tg.startDate(M),tg.addUnit(M,p),tg.endDate(M)}}class fh{constructor(){this.bb=null;this.bb_pos=0}__init(M,p){return this.bb_pos=M,this.bb=p,this}static getRootAsTime(M,p){return(p||new fh).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsTime(M,p){return M.setPosition(M.position()+
Ad.SIZE_PREFIX_LENGTH),(p||new fh).__init(M.readInt32(M.position())+M.position(),M)}unit(){const M=this.bb.__offset(this.bb_pos,4);return M?this.bb.readInt16(this.bb_pos+M):sd.MILLISECOND}bitWidth(){const M=this.bb.__offset(this.bb_pos,6);return M?this.bb.readInt32(this.bb_pos+M):32}static startTime(M){M.startObject(2)}static addUnit(M,p){M.addFieldInt16(0,p,sd.MILLISECOND)}static addBitWidth(M,p){M.addFieldInt32(1,p,32)}static endTime(M){return M.endObject()}static createTime(M,p,na){return fh.startTime(M),
fh.addUnit(M,p),fh.addBitWidth(M,na),fh.endTime(M)}}class sb{constructor(){this.bb=null;this.bb_pos=0}__init(M,p){return this.bb_pos=M,this.bb=p,this}static getRootAsTimestamp(M,p){return(p||new sb).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsTimestamp(M,p){return M.setPosition(M.position()+Ad.SIZE_PREFIX_LENGTH),(p||new sb).__init(M.readInt32(M.position())+M.position(),M)}unit(){const M=this.bb.__offset(this.bb_pos,4);return M?this.bb.readInt16(this.bb_pos+M):sd.SECOND}timezone(M){const p=
this.bb.__offset(this.bb_pos,6);return p?this.bb.__string(this.bb_pos+p,M):null}static startTimestamp(M){M.startObject(2)}static addUnit(M,p){M.addFieldInt16(0,p,sd.SECOND)}static addTimezone(M,p){M.addFieldOffset(1,p,0)}static endTimestamp(M){return M.endObject()}static createTimestamp(M,p,na){return sb.startTimestamp(M),sb.addUnit(M,p),sb.addTimezone(M,na),sb.endTimestamp(M)}}class tb{constructor(){this.bb=null;this.bb_pos=0}__init(M,p){return this.bb_pos=M,this.bb=p,this}static getRootAsInterval(M,
p){return(p||new tb).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsInterval(M,p){return M.setPosition(M.position()+Ad.SIZE_PREFIX_LENGTH),(p||new tb).__init(M.readInt32(M.position())+M.position(),M)}unit(){const M=this.bb.__offset(this.bb_pos,4);return M?this.bb.readInt16(this.bb_pos+M):Fe.YEAR_MONTH}static startInterval(M){M.startObject(1)}static addUnit(M,p){M.addFieldInt16(0,p,Fe.YEAR_MONTH)}static endInterval(M){return M.endObject()}static createInterval(M,p){return tb.startInterval(M),
tb.addUnit(M,p),tb.endInterval(M)}}class Lb{constructor(){this.bb=null;this.bb_pos=0}__init(M,p){return this.bb_pos=M,this.bb=p,this}static getRootAsKeyValue(M,p){return(p||new Lb).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsKeyValue(M,p){return M.setPosition(M.position()+Ad.SIZE_PREFIX_LENGTH),(p||new Lb).__init(M.readInt32(M.position())+M.position(),M)}key(M){const p=this.bb.__offset(this.bb_pos,4);return p?this.bb.__string(this.bb_pos+p,M):null}value(M){const p=
this.bb.__offset(this.bb_pos,6);return p?this.bb.__string(this.bb_pos+p,M):null}static startKeyValue(M){M.startObject(2)}static addKey(M,p){M.addFieldOffset(0,p,0)}static addValue(M,p){M.addFieldOffset(1,p,0)}static endKeyValue(M){return M.endObject()}static createKeyValue(M,p,na){return Lb.startKeyValue(M),Lb.addKey(M,p),Lb.addValue(M,na),Lb.endKeyValue(M)}}class Vb{constructor(){this.bb=null;this.bb_pos=0}__init(M,p){return this.bb_pos=M,this.bb=p,this}static getRootAsDictionaryEncoding(M,p){return(p||
new Vb).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsDictionaryEncoding(M,p){return M.setPosition(M.position()+Ad.SIZE_PREFIX_LENGTH),(p||new Vb).__init(M.readInt32(M.position())+M.position(),M)}id(){const M=this.bb.__offset(this.bb_pos,4);return M?this.bb.readInt64(this.bb_pos+M):this.bb.createLong(0,0)}indexType(M){const p=this.bb.__offset(this.bb_pos,6);return p?(M||new Xe).__init(this.bb.__indirect(this.bb_pos+p),this.bb):null}isOrdered(){const M=this.bb.__offset(this.bb_pos,
8);return!!M&&!!this.bb.readInt8(this.bb_pos+M)}dictionaryKind(){const M=this.bb.__offset(this.bb_pos,10);return M?this.bb.readInt16(this.bb_pos+M):Me.DenseArray}static startDictionaryEncoding(M){M.startObject(4)}static addId(M,p){M.addFieldInt64(0,p,M.createLong(0,0))}static addIndexType(M,p){M.addFieldOffset(1,p,0)}static addIsOrdered(M,p){M.addFieldInt8(2,+p,0)}static addDictionaryKind(M,p){M.addFieldInt16(3,p,Me.DenseArray)}static endDictionaryEncoding(M){return M.endObject()}static createDictionaryEncoding(M,
p,na,ib,Sb){return Vb.startDictionaryEncoding(M),Vb.addId(M,p),Vb.addIndexType(M,na),Vb.addIsOrdered(M,ib),Vb.addDictionaryKind(M,Sb),Vb.endDictionaryEncoding(M)}}class hc{constructor(){this.bb=null;this.bb_pos=0}__init(M,p){return this.bb_pos=M,this.bb=p,this}static getRootAsField(M,p){return(p||new hc).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsField(M,p){return M.setPosition(M.position()+Ad.SIZE_PREFIX_LENGTH),(p||new hc).__init(M.readInt32(M.position())+M.position(),
M)}name(M){const p=this.bb.__offset(this.bb_pos,4);return p?this.bb.__string(this.bb_pos+p,M):null}nullable(){const M=this.bb.__offset(this.bb_pos,6);return!!M&&!!this.bb.readInt8(this.bb_pos+M)}typeType(){const M=this.bb.__offset(this.bb_pos,8);return M?this.bb.readUint8(this.bb_pos+M):Ge.NONE}type(M){const p=this.bb.__offset(this.bb_pos,10);return p?this.bb.__union(M,this.bb_pos+p):null}dictionary(M){const p=this.bb.__offset(this.bb_pos,12);return p?(M||new Vb).__init(this.bb.__indirect(this.bb_pos+
p),this.bb):null}children(M,p){const na=this.bb.__offset(this.bb_pos,14);return na?(p||new hc).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+na)+4*M),this.bb):null}childrenLength(){const M=this.bb.__offset(this.bb_pos,14);return M?this.bb.__vector_len(this.bb_pos+M):0}customMetadata(M,p){const na=this.bb.__offset(this.bb_pos,16);return na?(p||new Lb).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+na)+4*M),this.bb):null}customMetadataLength(){const M=this.bb.__offset(this.bb_pos,16);
return M?this.bb.__vector_len(this.bb_pos+M):0}static startField(M){M.startObject(7)}static addName(M,p){M.addFieldOffset(0,p,0)}static addNullable(M,p){M.addFieldInt8(1,+p,0)}static addTypeType(M,p){M.addFieldInt8(2,p,Ge.NONE)}static addType(M,p){M.addFieldOffset(3,p,0)}static addDictionary(M,p){M.addFieldOffset(4,p,0)}static addChildren(M,p){M.addFieldOffset(5,p,0)}static createChildrenVector(M,p){M.startVector(4,p.length,4);for(let na=p.length-1;0<=na;na--)M.addOffset(p[na]);return M.endVector()}static startChildrenVector(M,
p){M.startVector(4,p,4)}static addCustomMetadata(M,p){M.addFieldOffset(6,p,0)}static createCustomMetadataVector(M,p){M.startVector(4,p.length,4);for(let na=p.length-1;0<=na;na--)M.addOffset(p[na]);return M.endVector()}static startCustomMetadataVector(M,p){M.startVector(4,p,4)}static endField(M){return M.endObject()}static createField(M,p,na,ib,Sb,wc,Wc,Hd){return hc.startField(M),hc.addName(M,p),hc.addNullable(M,na),hc.addTypeType(M,ib),hc.addType(M,Sb),hc.addDictionary(M,wc),hc.addChildren(M,Wc),
hc.addCustomMetadata(M,Hd),hc.endField(M)}}class dc{constructor(){this.bb=null;this.bb_pos=0}__init(M,p){return this.bb_pos=M,this.bb=p,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static createBuffer(M,p,na){return M.prep(8,16),M.writeInt64(na),M.writeInt64(p),M.offset()}}class Fc{constructor(){this.bb=null;this.bb_pos=0}__init(M,p){return this.bb_pos=M,this.bb=p,this}static getRootAsSchema(M,p){return(p||new Fc).__init(M.readInt32(M.position())+
M.position(),M)}static getSizePrefixedRootAsSchema(M,p){return M.setPosition(M.position()+Ad.SIZE_PREFIX_LENGTH),(p||new Fc).__init(M.readInt32(M.position())+M.position(),M)}endianness(){const M=this.bb.__offset(this.bb_pos,4);return M?this.bb.readInt16(this.bb_pos+M):rf.Little}fields(M,p){const na=this.bb.__offset(this.bb_pos,6);return na?(p||new hc).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+na)+4*M),this.bb):null}fieldsLength(){const M=this.bb.__offset(this.bb_pos,6);return M?this.bb.__vector_len(this.bb_pos+
M):0}customMetadata(M,p){const na=this.bb.__offset(this.bb_pos,8);return na?(p||new Lb).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+na)+4*M),this.bb):null}customMetadataLength(){const M=this.bb.__offset(this.bb_pos,8);return M?this.bb.__vector_len(this.bb_pos+M):0}features(M){const p=this.bb.__offset(this.bb_pos,10);return p?this.bb.readInt64(this.bb.__vector(this.bb_pos+p)+8*M):this.bb.createLong(0,0)}featuresLength(){const M=this.bb.__offset(this.bb_pos,10);return M?this.bb.__vector_len(this.bb_pos+
M):0}static startSchema(M){M.startObject(4)}static addEndianness(M,p){M.addFieldInt16(0,p,rf.Little)}static addFields(M,p){M.addFieldOffset(1,p,0)}static createFieldsVector(M,p){M.startVector(4,p.length,4);for(let na=p.length-1;0<=na;na--)M.addOffset(p[na]);return M.endVector()}static startFieldsVector(M,p){M.startVector(4,p,4)}static addCustomMetadata(M,p){M.addFieldOffset(2,p,0)}static createCustomMetadataVector(M,p){M.startVector(4,p.length,4);for(let na=p.length-1;0<=na;na--)M.addOffset(p[na]);
return M.endVector()}static startCustomMetadataVector(M,p){M.startVector(4,p,4)}static addFeatures(M,p){M.addFieldOffset(3,p,0)}static createFeaturesVector(M,p){M.startVector(8,p.length,8);for(let na=p.length-1;0<=na;na--)M.addInt64(p[na]);return M.endVector()}static startFeaturesVector(M,p){M.startVector(8,p,8)}static endSchema(M){return M.endObject()}static finishSchemaBuffer(M,p){M.finish(p)}static finishSizePrefixedSchemaBuffer(M,p){M.finish(p,void 0,!0)}static createSchema(M,p,na,ib,Sb){return Fc.startSchema(M),
Fc.addEndianness(M,p),Fc.addFields(M,na),Fc.addCustomMetadata(M,ib),Fc.addFeatures(M,Sb),Fc.endSchema(M)}}!function(M){M[M.LZ4_FRAME=0]="LZ4_FRAME";M[M.ZSTD=1]="ZSTD"}(Ma||(Ma={}));(function(M){M[M.BUFFER=0]="BUFFER"})(lb||(lb={}));(function(M){M[M.NONE=0]="NONE";M[M.Schema=1]="Schema";M[M.DictionaryBatch=2]="DictionaryBatch";M[M.RecordBatch=3]="RecordBatch";M[M.Tensor=4]="Tensor";M[M.SparseTensor=5]="SparseTensor"})(vb||(vb={}));class Yc{constructor(){this.bb=null;this.bb_pos=0}__init(M,p){return this.bb_pos=
M,this.bb=p,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static createFieldNode(M,p,na){return M.prep(8,16),M.writeInt64(na),M.writeInt64(p),M.offset()}}class Nc{constructor(){this.bb=null;this.bb_pos=0}__init(M,p){return this.bb_pos=M,this.bb=p,this}static getRootAsBodyCompression(M,p){return(p||new Nc).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsBodyCompression(M,p){return M.setPosition(M.position()+Ad.SIZE_PREFIX_LENGTH),
(p||new Nc).__init(M.readInt32(M.position())+M.position(),M)}codec(){const M=this.bb.__offset(this.bb_pos,4);return M?this.bb.readInt8(this.bb_pos+M):Ma.LZ4_FRAME}method(){const M=this.bb.__offset(this.bb_pos,6);return M?this.bb.readInt8(this.bb_pos+M):lb.BUFFER}static startBodyCompression(M){M.startObject(2)}static addCodec(M,p){M.addFieldInt8(0,p,Ma.LZ4_FRAME)}static addMethod(M,p){M.addFieldInt8(1,p,lb.BUFFER)}static endBodyCompression(M){return M.endObject()}static createBodyCompression(M,p,na){return Nc.startBodyCompression(M),
Nc.addCodec(M,p),Nc.addMethod(M,na),Nc.endBodyCompression(M)}}class fd{constructor(){this.bb=null;this.bb_pos=0}__init(M,p){return this.bb_pos=M,this.bb=p,this}static getRootAsRecordBatch(M,p){return(p||new fd).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsRecordBatch(M,p){return M.setPosition(M.position()+Ad.SIZE_PREFIX_LENGTH),(p||new fd).__init(M.readInt32(M.position())+M.position(),M)}length(){const M=this.bb.__offset(this.bb_pos,4);return M?this.bb.readInt64(this.bb_pos+
M):this.bb.createLong(0,0)}nodes(M,p){const na=this.bb.__offset(this.bb_pos,6);return na?(p||new Yc).__init(this.bb.__vector(this.bb_pos+na)+16*M,this.bb):null}nodesLength(){const M=this.bb.__offset(this.bb_pos,6);return M?this.bb.__vector_len(this.bb_pos+M):0}buffers(M,p){const na=this.bb.__offset(this.bb_pos,8);return na?(p||new dc).__init(this.bb.__vector(this.bb_pos+na)+16*M,this.bb):null}buffersLength(){const M=this.bb.__offset(this.bb_pos,8);return M?this.bb.__vector_len(this.bb_pos+M):0}compression(M){const p=
this.bb.__offset(this.bb_pos,10);return p?(M||new Nc).__init(this.bb.__indirect(this.bb_pos+p),this.bb):null}static startRecordBatch(M){M.startObject(4)}static addLength(M,p){M.addFieldInt64(0,p,M.createLong(0,0))}static addNodes(M,p){M.addFieldOffset(1,p,0)}static startNodesVector(M,p){M.startVector(16,p,8)}static addBuffers(M,p){M.addFieldOffset(2,p,0)}static startBuffersVector(M,p){M.startVector(16,p,8)}static addCompression(M,p){M.addFieldOffset(3,p,0)}static endRecordBatch(M){return M.endObject()}static createRecordBatch(M,
p,na,ib,Sb){return fd.startRecordBatch(M),fd.addLength(M,p),fd.addNodes(M,na),fd.addBuffers(M,ib),fd.addCompression(M,Sb),fd.endRecordBatch(M)}}class mc{constructor(){this.bb=null;this.bb_pos=0}__init(M,p){return this.bb_pos=M,this.bb=p,this}static getRootAsDictionaryBatch(M,p){return(p||new mc).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsDictionaryBatch(M,p){return M.setPosition(M.position()+Ad.SIZE_PREFIX_LENGTH),(p||new mc).__init(M.readInt32(M.position())+M.position(),
M)}id(){const M=this.bb.__offset(this.bb_pos,4);return M?this.bb.readInt64(this.bb_pos+M):this.bb.createLong(0,0)}data(M){const p=this.bb.__offset(this.bb_pos,6);return p?(M||new fd).__init(this.bb.__indirect(this.bb_pos+p),this.bb):null}isDelta(){const M=this.bb.__offset(this.bb_pos,8);return!!M&&!!this.bb.readInt8(this.bb_pos+M)}static startDictionaryBatch(M){M.startObject(3)}static addId(M,p){M.addFieldInt64(0,p,M.createLong(0,0))}static addData(M,p){M.addFieldOffset(1,p,0)}static addIsDelta(M,
p){M.addFieldInt8(2,+p,0)}static endDictionaryBatch(M){return M.endObject()}static createDictionaryBatch(M,p,na,ib){return mc.startDictionaryBatch(M),mc.addId(M,p),mc.addData(M,na),mc.addIsDelta(M,ib),mc.endDictionaryBatch(M)}}class wd{constructor(){this.bb=null;this.bb_pos=0}__init(M,p){return this.bb_pos=M,this.bb=p,this}static getRootAsMessage(M,p){return(p||new wd).__init(M.readInt32(M.position())+M.position(),M)}static getSizePrefixedRootAsMessage(M,p){return M.setPosition(M.position()+Ad.SIZE_PREFIX_LENGTH),
(p||new wd).__init(M.readInt32(M.position())+M.position(),M)}version(){const M=this.bb.__offset(this.bb_pos,4);return M?this.bb.readInt16(this.bb_pos+M):Cc.V1}headerType(){const M=this.bb.__offset(this.bb_pos,6);return M?this.bb.readUint8(this.bb_pos+M):vb.NONE}header(M){const p=this.bb.__offset(this.bb_pos,8);return p?this.bb.__union(M,this.bb_pos+p):null}bodyLength(){const M=this.bb.__offset(this.bb_pos,10);return M?this.bb.readInt64(this.bb_pos+M):this.bb.createLong(0,0)}customMetadata(M,p){const na=
this.bb.__offset(this.bb_pos,12);return na?(p||new Lb).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+na)+4*M),this.bb):null}customMetadataLength(){const M=this.bb.__offset(this.bb_pos,12);return M?this.bb.__vector_len(this.bb_pos+M):0}static startMessage(M){M.startObject(5)}static addVersion(M,p){M.addFieldInt16(0,p,Cc.V1)}static addHeaderType(M,p){M.addFieldInt8(1,p,vb.NONE)}static addHeader(M,p){M.addFieldOffset(2,p,0)}static addBodyLength(M,p){M.addFieldInt64(3,p,M.createLong(0,0))}static addCustomMetadata(M,
p){M.addFieldOffset(4,p,0)}static createCustomMetadataVector(M,p){M.startVector(4,p.length,4);for(let na=p.length-1;0<=na;na--)M.addOffset(p[na]);return M.endVector()}static startCustomMetadataVector(M,p){M.startVector(4,p,4)}static endMessage(M){return M.endObject()}static finishMessageBuffer(M,p){M.finish(p)}static finishSizePrefixedMessageBuffer(M,p){M.finish(p,void 0,!0)}static createMessage(M,p,na,ib,Sb,wc){return wd.startMessage(M),wd.addVersion(M,p),wd.addHeaderType(M,na),wd.addHeader(M,ib),
wd.addBodyLength(M,Sb),wd.addCustomMetadata(M,wc),wd.endMessage(M)}}!function(M){M[M.NONE=0]="NONE";M[M.Null=1]="Null";M[M.Int=2]="Int";M[M.Float=3]="Float";M[M.Binary=4]="Binary";M[M.Utf8=5]="Utf8";M[M.Bool=6]="Bool";M[M.Decimal=7]="Decimal";M[M.Date=8]="Date";M[M.Time=9]="Time";M[M.Timestamp=10]="Timestamp";M[M.Interval=11]="Interval";M[M.List=12]="List";M[M.Struct=13]="Struct";M[M.Union=14]="Union";M[M.FixedSizeBinary=15]="FixedSizeBinary";M[M.FixedSizeList=16]="FixedSizeList";M[M.Map=17]="Map";
M[M.Dictionary=-1]="Dictionary";M[M.Int8=-2]="Int8";M[M.Int16=-3]="Int16";M[M.Int32=-4]="Int32";M[M.Int64=-5]="Int64";M[M.Uint8=-6]="Uint8";M[M.Uint16=-7]="Uint16";M[M.Uint32=-8]="Uint32";M[M.Uint64=-9]="Uint64";M[M.Float16=-10]="Float16";M[M.Float32=-11]="Float32";M[M.Float64=-12]="Float64";M[M.DateDay=-13]="DateDay";M[M.DateMillisecond=-14]="DateMillisecond";M[M.TimestampSecond=-15]="TimestampSecond";M[M.TimestampMillisecond=-16]="TimestampMillisecond";M[M.TimestampMicrosecond=-17]="TimestampMicrosecond";
M[M.TimestampNanosecond=-18]="TimestampNanosecond";M[M.TimeSecond=-19]="TimeSecond";M[M.TimeMillisecond=-20]="TimeMillisecond";M[M.TimeMicrosecond=-21]="TimeMicrosecond";M[M.TimeNanosecond=-22]="TimeNanosecond";M[M.DenseUnion=-23]="DenseUnion";M[M.SparseUnion=-24]="SparseUnion";M[M.IntervalDayTime=-25]="IntervalDayTime";M[M.IntervalYearMonth=-26]="IntervalYearMonth"}(nb||(nb={}));(function(M){M[M.OFFSET=0]="OFFSET";M[M.DATA=1]="DATA";M[M.VALIDITY=2]="VALIDITY";M[M.TYPE=3]="TYPE"})(ac||(ac={}));class Xd{constructor(M,
p,na,ib,Sb){this.bytes=M;this.length=na;this.context=ib;this.get=Sb;this.bit=p%8;this.byteIndex=p>>3;this.byte=M[this.byteIndex++];this.index=0}next(){return this.index<this.length?(8===this.bit&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}class ce{static isNull(M){return M&&M.typeId===nb.Null}static isInt(M){return M&&M.typeId===nb.Int}static isFloat(M){return M&&M.typeId===
nb.Float}static isBinary(M){return M&&M.typeId===nb.Binary}static isUtf8(M){return M&&M.typeId===nb.Utf8}static isBool(M){return M&&M.typeId===nb.Bool}static isDecimal(M){return M&&M.typeId===nb.Decimal}static isDate(M){return M&&M.typeId===nb.Date}static isTime(M){return M&&M.typeId===nb.Time}static isTimestamp(M){return M&&M.typeId===nb.Timestamp}static isInterval(M){return M&&M.typeId===nb.Interval}static isList(M){return M&&M.typeId===nb.List}static isStruct(M){return M&&M.typeId===nb.Struct}static isUnion(M){return M&&
M.typeId===nb.Union}static isFixedSizeBinary(M){return M&&M.typeId===nb.FixedSizeBinary}static isFixedSizeList(M){return M&&M.typeId===nb.FixedSizeList}static isMap(M){return M&&M.typeId===nb.Map}static isDictionary(M){return M&&M.typeId===nb.Dictionary}get typeId(){return nb.NONE}}ce[Symbol.toStringTag]=((yc=ce.prototype).children=null,yc.ArrayType=Array,yc[Symbol.toStringTag]="DataType");class De extends ce{toString(){return"Null"}get typeId(){return nb.Null}}De[Symbol.toStringTag]=De.prototype[Symbol.toStringTag]=
"Null";class Ua extends ce{constructor(M,p){super();this.isSigned=M;this.bitWidth=p}get typeId(){return nb.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:case 64:return this.isSigned?Int32Array:Uint32Array}throw Error(`Unrecognized ${this[Symbol.toStringTag]} type`);}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}Ua[Symbol.toStringTag]=(M=>(M.isSigned=null,M.bitWidth=null,M[Symbol.toStringTag]=
"Int"))(Ua.prototype);class pb extends Ua{constructor(){super(!0,8)}}class Rb extends Ua{constructor(){super(!0,16)}}class ec extends Ua{constructor(){super(!0,32)}}class Sc extends Ua{constructor(){super(!0,64)}}class kd extends Ua{constructor(){super(!1,8)}}class Fd extends Ua{constructor(){super(!1,16)}}class Yd extends Ua{constructor(){super(!1,32)}}class je extends Ua{constructor(){super(!1,64)}}Object.defineProperty(pb.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(Rb.prototype,
"ArrayType",{value:Int16Array});Object.defineProperty(ec.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(Sc.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(kd.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(Fd.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(Yd.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(je.prototype,"ArrayType",{value:Uint32Array});class re extends ce{constructor(M){super();this.precision=M}get typeId(){return nb.Float}get ArrayType(){switch(this.precision){case we.HALF:return Uint16Array;
case we.SINGLE:return Float32Array;case we.DOUBLE:return Float64Array}throw Error(`Unrecognized ${this[Symbol.toStringTag]} type`);}toString(){return"Float"+(this.precision<<5||16)}}re[Symbol.toStringTag]=(M=>(M.precision=null,M[Symbol.toStringTag]="Float"))(re.prototype);class xe extends re{constructor(){super(we.HALF)}}class Af extends re{constructor(){super(we.SINGLE)}}class Qf extends re{constructor(){super(we.DOUBLE)}}Object.defineProperty(xe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(Af.prototype,
"ArrayType",{value:Float32Array});Object.defineProperty(Qf.prototype,"ArrayType",{value:Float64Array});class Hc extends ce{constructor(){super()}get typeId(){return nb.Binary}toString(){return"Binary"}}Hc[Symbol.toStringTag]=(M=>(M.ArrayType=Uint8Array,M[Symbol.toStringTag]="Binary"))(Hc.prototype);class td extends ce{constructor(){super()}get typeId(){return nb.Utf8}toString(){return"Utf8"}}td[Symbol.toStringTag]=(M=>(M.ArrayType=Uint8Array,M[Symbol.toStringTag]="Utf8"))(td.prototype);class id extends ce{constructor(){super()}get typeId(){return nb.Bool}toString(){return"Bool"}}
id[Symbol.toStringTag]=(M=>(M.ArrayType=Uint8Array,M[Symbol.toStringTag]="Bool"))(id.prototype);class ke extends ce{constructor(M,p){super();this.scale=M;this.precision=p}get typeId(){return nb.Decimal}toString(){return`Decimal[${this.precision}e${0<this.scale?"+":""}${this.scale}]`}}ke[Symbol.toStringTag]=(M=>(M.scale=null,M.precision=null,M.ArrayType=Uint32Array,M[Symbol.toStringTag]="Decimal"))(ke.prototype);class Ob extends ce{constructor(M){super();this.unit=M}get typeId(){return nb.Date}toString(){return`Date${32*
(this.unit+1)}<${ue[this.unit]}>`}}Ob[Symbol.toStringTag]=(M=>(M.unit=null,M.ArrayType=Int32Array,M[Symbol.toStringTag]="Date"))(Ob.prototype);class gc extends Ob{constructor(){super(ue.DAY)}}class Ac extends Ob{constructor(){super(ue.MILLISECOND)}}class Uc extends ce{constructor(M,p){super();this.unit=M;this.bitWidth=p}get typeId(){return nb.Time}toString(){return`Time${this.bitWidth}<${sd[this.unit]}>`}}Uc[Symbol.toStringTag]=(M=>(M.unit=null,M.bitWidth=null,M.ArrayType=Int32Array,M[Symbol.toStringTag]=
"Time"))(Uc.prototype);class y extends Uc{constructor(){super(sd.SECOND,32)}}class wa extends Uc{constructor(){super(sd.MILLISECOND,32)}}class fb extends Uc{constructor(){super(sd.MICROSECOND,64)}}class Ib extends Uc{constructor(){super(sd.NANOSECOND,64)}}class kc extends ce{constructor(M,p){super();this.unit=M;this.timezone=p}get typeId(){return nb.Timestamp}toString(){return`Timestamp<${sd[this.unit]}${this.timezone?", "+this.timezone:""}>`}}kc[Symbol.toStringTag]=(M=>(M.unit=null,M.timezone=null,
M.ArrayType=Int32Array,M[Symbol.toStringTag]="Timestamp"))(kc.prototype);class $c extends kc{constructor(M){super(sd.SECOND,M)}}class zd extends kc{constructor(M){super(sd.MILLISECOND,M)}}class rd extends kc{constructor(M){super(sd.MICROSECOND,M)}}class Zd extends kc{constructor(M){super(sd.NANOSECOND,M)}}class ve extends ce{constructor(M){super();this.unit=M}get typeId(){return nb.Interval}toString(){return`Interval<${Fe[this.unit]}>`}}ve[Symbol.toStringTag]=(M=>(M.unit=null,M.ArrayType=Int32Array,
M[Symbol.toStringTag]="Interval"))(ve.prototype);class Pe extends ve{constructor(){super(Fe.DAY_TIME)}}class hf extends ve{constructor(){super(Fe.YEAR_MONTH)}}class eg extends ce{constructor(M){super();this.children=[M]}get typeId(){return nb.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}eg[Symbol.toStringTag]=(M=>(M.children=null,M[Symbol.toStringTag]="List"))(eg.prototype);
class Sf extends ce{constructor(M){super();this.children=M}get typeId(){return nb.Struct}toString(){return`Struct<{${this.children.map(M=>`${M.name}:${M.type}`).join(", ")}}>`}}Sf[Symbol.toStringTag]=(M=>(M.children=null,M[Symbol.toStringTag]="Struct"))(Sf.prototype);class gg extends ce{constructor(M,p,na){super();this.mode=M;this.children=na;this.typeIds=p=Int32Array.from(p);this.typeIdToChildIndex=p.reduce((ib,Sb,wc)=>(ib[Sb]=wc)&&ib||ib,Object.create(null))}get typeId(){return nb.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(M=>
""+M.type).join(" | ")}>`}}gg[Symbol.toStringTag]=(M=>(M.mode=null,M.typeIds=null,M.children=null,M.typeIdToChildIndex=null,M.ArrayType=Int8Array,M[Symbol.toStringTag]="Union"))(gg.prototype);class vf extends gg{constructor(M,p){super(Wd.Dense,M,p)}}class df extends gg{constructor(M,p){super(Wd.Sparse,M,p)}}class Gf extends ce{constructor(M){super();this.byteWidth=M}get typeId(){return nb.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}Gf[Symbol.toStringTag]=(M=>(M.byteWidth=
null,M.ArrayType=Uint8Array,M[Symbol.toStringTag]="FixedSizeBinary"))(Gf.prototype);class ug extends ce{constructor(M,p){super();this.listSize=M;this.children=[p]}get typeId(){return nb.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}ug[Symbol.toStringTag]=(M=>(M.children=null,M.listSize=null,M[Symbol.toStringTag]="FixedSizeList"))(ug.prototype);
class Ng extends ce{constructor(M,p=!1){super();this.children=[M];this.keysSorted=p}get typeId(){return nb.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}toString(){return`Map<{${this.children[0].type.children.map(M=>`${M.name}:${M.type}`).join(", ")}}>`}}Ng[Symbol.toStringTag]=(M=>(M.children=null,M.keysSorted=null,M[Symbol.toStringTag]="Map_"))(Ng.prototype);const Vg=(ch=-1,()=>++ch);var ch;class Mg extends ce{constructor(M,
p,na,ib){super();this.indices=p;this.dictionary=M;this.isOrdered=ib||!1;this.id=null==na?Vg():"number"==typeof na?na:na.low}get typeId(){return nb.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}Mg[Symbol.toStringTag]=(M=>(M.id=null,M.indices=null,M.isOrdered=null,M.dictionary=null,M[Symbol.toStringTag]="Dictionary"))(Mg.prototype);class Ef{constructor(M,
p,na,ib,Sb,wc,Wc){let Hd;this.type=M;this.dictionary=Wc;this.offset=Math.floor(Math.max(p||0,0));this.length=Math.floor(Math.max(na||0,0));this._nullCount=Math.floor(Math.max(ib||0,-1));this.childData=(wc||[]).map(Ud=>Ud instanceof Ef?Ud:Ud.data);Sb instanceof Ef?(this.stride=Sb.stride,this.values=Sb.values,this.typeIds=Sb.typeIds,this.nullBitmap=Sb.nullBitmap,this.valueOffsets=Sb.valueOffsets):(this.stride=W(M),Sb&&((Hd=Sb[0])&&(this.valueOffsets=Hd),(Hd=Sb[1])&&(this.values=Hd),(Hd=Sb[2])&&(this.nullBitmap=
Hd),(Hd=Sb[3])&&(this.typeIds=Hd)))}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let M=0;const {valueOffsets:p,values:na,nullBitmap:ib,typeIds:Sb}=this;return p&&(M+=p.byteLength),na&&(M+=na.byteLength),ib&&(M+=ib.byteLength),Sb&&(M+=Sb.byteLength),this.childData.reduce((wc,Wc)=>wc+Wc.byteLength,M)}get nullCount(){let M,p=this._nullCount;return-1>=p&&(M=this.nullBitmap)&&
(this._nullCount=p=this.length-Z(M,this.offset,this.offset+this.length)),p}clone(M,p=this.offset,na=this.length,ib=this._nullCount,Sb=this,wc=this.childData){return new Ef(M,p,na,ib,Sb,wc,this.dictionary)}slice(M,p){const {stride:na,typeId:ib,childData:Sb}=this,wc=+(0===this._nullCount)-1,Wc=16===ib?na:1,Hd=this._sliceBuffers(M,p,na,ib);return this.clone(this.type,this.offset+M,p,wc,Hd,!Sb.length||this.valueOffsets?Sb:this._sliceChildren(Sb,Wc*M,Wc*p))}_changeLengthAndBackfillNullBitmap(M){if(this.typeId===
nb.Null)return this.clone(this.type,0,M,0);const {length:p,nullCount:na}=this,ib=(new Uint8Array((M+63&-64)>>3)).fill(255,0,p>>3);ib[p>>3]=(1<<p-(-8&p))-1;0<na&&ib.set(r(this.offset,p,this.nullBitmap),0);const Sb=this.buffers;return Sb[ac.VALIDITY]=ib,this.clone(this.type,0,M,na+(M-p),Sb)}_sliceBuffers(M,p,na,ib){let Sb;const {buffers:wc}=this;return(Sb=wc[ac.TYPE])&&(wc[ac.TYPE]=Sb.subarray(M,M+p)),(Sb=wc[ac.OFFSET])&&(wc[ac.OFFSET]=Sb.subarray(M,M+p+1))||(Sb=wc[ac.DATA])&&(wc[ac.DATA]=6===ib?Sb:
Sb.subarray(na*M,na*(M+p))),wc}_sliceChildren(M,p,na){return M.map(ib=>ib.slice(p,na))}static new(M,p,na,ib,Sb,wc,Wc){switch(Sb instanceof Ef?Sb=Sb.buffers:Sb||(Sb=[]),M.typeId){case nb.Null:return Ef.Null(M,p,na);case nb.Int:return Ef.Int(M,p,na,ib||0,Sb[ac.VALIDITY],Sb[ac.DATA]||[]);case nb.Dictionary:return Ef.Dictionary(M,p,na,ib||0,Sb[ac.VALIDITY],Sb[ac.DATA]||[],Wc);case nb.Float:return Ef.Float(M,p,na,ib||0,Sb[ac.VALIDITY],Sb[ac.DATA]||[]);case nb.Bool:return Ef.Bool(M,p,na,ib||0,Sb[ac.VALIDITY],
Sb[ac.DATA]||[]);case nb.Decimal:return Ef.Decimal(M,p,na,ib||0,Sb[ac.VALIDITY],Sb[ac.DATA]||[]);case nb.Date:return Ef.Date(M,p,na,ib||0,Sb[ac.VALIDITY],Sb[ac.DATA]||[]);case nb.Time:return Ef.Time(M,p,na,ib||0,Sb[ac.VALIDITY],Sb[ac.DATA]||[]);case nb.Timestamp:return Ef.Timestamp(M,p,na,ib||0,Sb[ac.VALIDITY],Sb[ac.DATA]||[]);case nb.Interval:return Ef.Interval(M,p,na,ib||0,Sb[ac.VALIDITY],Sb[ac.DATA]||[]);case nb.FixedSizeBinary:return Ef.FixedSizeBinary(M,p,na,ib||0,Sb[ac.VALIDITY],Sb[ac.DATA]||
[]);case nb.Binary:return Ef.Binary(M,p,na,ib||0,Sb[ac.VALIDITY],Sb[ac.OFFSET]||[],Sb[ac.DATA]||[]);case nb.Utf8:return Ef.Utf8(M,p,na,ib||0,Sb[ac.VALIDITY],Sb[ac.OFFSET]||[],Sb[ac.DATA]||[]);case nb.List:return Ef.List(M,p,na,ib||0,Sb[ac.VALIDITY],Sb[ac.OFFSET]||[],(wc||[])[0]);case nb.FixedSizeList:return Ef.FixedSizeList(M,p,na,ib||0,Sb[ac.VALIDITY],(wc||[])[0]);case nb.Struct:return Ef.Struct(M,p,na,ib||0,Sb[ac.VALIDITY],wc||[]);case nb.Map:return Ef.Map(M,p,na,ib||0,Sb[ac.VALIDITY],Sb[ac.OFFSET]||
[],(wc||[])[0]);case nb.Union:return Ef.Union(M,p,na,ib||0,Sb[ac.VALIDITY],Sb[ac.TYPE]||[],Sb[ac.OFFSET]||wc,wc)}throw Error("Unrecognized typeId "+M.typeId);}static Null(M,p,na){return new Ef(M,p,na,0)}static Int(M,p,na,ib,Sb,wc){return new Ef(M,p,na,ib,[void 0,v(M.ArrayType,wc),v(Uint8Array,Sb)])}static Dictionary(M,p,na,ib,Sb,wc,Wc){return new Ef(M,p,na,ib,[void 0,v(M.indices.ArrayType,wc),v(Uint8Array,Sb)],[],Wc)}static Float(M,p,na,ib,Sb,wc){return new Ef(M,p,na,ib,[void 0,v(M.ArrayType,wc),
v(Uint8Array,Sb)])}static Bool(M,p,na,ib,Sb,wc){return new Ef(M,p,na,ib,[void 0,v(M.ArrayType,wc),v(Uint8Array,Sb)])}static Decimal(M,p,na,ib,Sb,wc){return new Ef(M,p,na,ib,[void 0,v(M.ArrayType,wc),v(Uint8Array,Sb)])}static Date(M,p,na,ib,Sb,wc){return new Ef(M,p,na,ib,[void 0,v(M.ArrayType,wc),v(Uint8Array,Sb)])}static Time(M,p,na,ib,Sb,wc){return new Ef(M,p,na,ib,[void 0,v(M.ArrayType,wc),v(Uint8Array,Sb)])}static Timestamp(M,p,na,ib,Sb,wc){return new Ef(M,p,na,ib,[void 0,v(M.ArrayType,wc),v(Uint8Array,
Sb)])}static Interval(M,p,na,ib,Sb,wc){return new Ef(M,p,na,ib,[void 0,v(M.ArrayType,wc),v(Uint8Array,Sb)])}static FixedSizeBinary(M,p,na,ib,Sb,wc){return new Ef(M,p,na,ib,[void 0,v(M.ArrayType,wc),v(Uint8Array,Sb)])}static Binary(M,p,na,ib,Sb,wc,Wc){return new Ef(M,p,na,ib,[v(Int32Array,wc),v(Uint8Array,Wc),v(Uint8Array,Sb)])}static Utf8(M,p,na,ib,Sb,wc,Wc){return new Ef(M,p,na,ib,[v(Int32Array,wc),v(Uint8Array,Wc),v(Uint8Array,Sb)])}static List(M,p,na,ib,Sb,wc,Wc){return new Ef(M,p,na,ib,[v(Int32Array,
wc),void 0,v(Uint8Array,Sb)],Wc?[Wc]:[])}static FixedSizeList(M,p,na,ib,Sb,wc){return new Ef(M,p,na,ib,[void 0,void 0,v(Uint8Array,Sb)],wc?[wc]:[])}static Struct(M,p,na,ib,Sb,wc){return new Ef(M,p,na,ib,[void 0,void 0,v(Uint8Array,Sb)],wc)}static Map(M,p,na,ib,Sb,wc,Wc){return new Ef(M,p,na,ib,[v(Int32Array,wc),void 0,v(Uint8Array,Sb)],Wc?[Wc]:[])}static Union(M,p,na,ib,Sb,wc,Wc,Hd){Sb=[void 0,void 0,v(Uint8Array,Sb),v(M.ArrayType,wc)];return M.mode===Wd.Sparse?new Ef(M,p,na,ib,Sb,Wc):(Sb[ac.OFFSET]=
v(Int32Array,Wc),new Ef(M,p,na,ib,Sb,Hd))}}Ef.prototype.childData=Object.freeze([]);const Sh=(M,p)=>(M*p+63&-64||64)/p;class Dg{constructor(M,p=1){this.buffer=M;this.stride=p;this.BYTES_PER_ELEMENT=M.BYTES_PER_ELEMENT;this.ArrayType=M.constructor;this._resize(this.length=M.length/p|0)}get byteLength(){return this.length*this.stride*this.BYTES_PER_ELEMENT|0}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(M,p){return this}append(M){return this.set(this.length,
M)}reserve(M){if(0<M){this.length+=M;M=this.length*this.stride;const p=this.buffer.length;M>=p&&this._resize(Sh(0===p?1*M:2*M,this.BYTES_PER_ELEMENT))}return this}flush(M=this.length){M=Sh(M*this.stride,this.BYTES_PER_ELEMENT);M=((p,na=0)=>p.length>=na?p.subarray(0,na):R(new p.constructor(na),p,0))(this.buffer,M);return this.clear(),M}clear(){return this.length=0,this._resize(0),this}_resize(M){return this.buffer=R(new this.ArrayType(M),this.buffer)}}Dg.prototype.offset=0;class qg extends Dg{last(){return this.get(this.length-
1)}get(M){return this.buffer[M]}set(M,p){return this.reserve(M-this.length+1),this.buffer[M*this.stride]=p,this}}class Nf extends qg{constructor(M=new Uint8Array(0)){super(M,.125);this.numValid=0}get numInvalid(){return this.length-this.numValid}get(M){return this.buffer[M>>3]>>M%8&1}set(M,p){const {buffer:na}=this.reserve(M-this.length+1),ib=M>>3;M%=8;const Sb=na[ib]>>M&1;return p?0===Sb&&(na[ib]|=1<<M,++this.numValid):1===Sb&&(na[ib]&=~(1<<M),--this.numValid),this}clear(){return this.numValid=0,
super.clear()}}class nh extends qg{constructor(M=new Int32Array(1)){super(M,1)}append(M){return this.set(this.length-1,M)}set(M,p){const na=this.length-1,ib=this.reserve(M-na+1).buffer;return na<M++&&ib.fill(ib[na],na,M),ib[M]=ib[M-1]+p,this}flush(M=this.length-1){return M>this.length&&this.set(M-1,0),super.flush(M+1)}}class si extends Dg{get ArrayType64(){return this._ArrayType64||(this._ArrayType64=this.buffer instanceof Int32Array?pf:bg)}set(M,p){switch(this.reserve(M-this.length+1),typeof p){case "bigint":this.buffer64[M]=
p;break;case "number":this.buffer[M*this.stride]=p;break;default:this.buffer.set(p,M*this.stride)}return this}_resize(M){M=super._resize(M);const p=M.byteLength/(this.BYTES_PER_ELEMENT*this.stride);return zg&&(this.buffer64=new this.ArrayType64(M.buffer,M.byteOffset,p)),M}}class oh{constructor({type:M,nullValues:p}){this.length=0;this.finished=!1;this.type=M;this.children=[];this.nullValues=p;this.stride=W(M);this._nulls=new Nf;p&&0<p.length&&(this._isValid=ja(p))}static new(M){}static throughNode(M){throw Error('"throughNode" not available in this environment');
}static throughDOM(M){throw Error('"throughDOM" not available in this environment');}static throughIterable(M){return function(p){const {queueingStrategy:na="count"}=p,{highWaterMark:ib="bytes"!==na?1E3:16384}=p,Sb="bytes"!==na?"length":"byteLength";return function*(wc){let Wc=0;const Hd=oh.new(p);for(const Ud of wc)Hd.append(Ud)[Sb]>=ib&&++Wc&&(yield Hd.toVector());(0<Hd.finish().length||0===Wc)&&(yield Hd.toVector())}}(M)}static throughAsyncIterable(M){return function(p){const {queueingStrategy:na=
"count"}=p,{highWaterMark:ib="bytes"!==na?1E3:16384}=p,Sb="bytes"!==na?"length":"byteLength";return function(wc){return U(this,arguments,function*(){var Wc;let Hd=0;const Ud=oh.new(p);try{for(var He,zf=X(wc);!(He=yield D(zf.next())).done;)Ud.append(He.value)[Sb]>=ib&&++Hd&&(yield yield D(Ud.toVector()))}catch(Og){var mg={error:Og}}finally{try{He&&!He.done&&(Wc=zf.return)&&(yield D(Wc.call(zf)))}finally{if(mg)throw mg.error;}}(0<Ud.finish().length||0===Hd)&&(yield yield D(Ud.toVector()))})}}(M)}toVector(){return Qc.new(this.flush())}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let M=
0;return this._offsets&&(M+=this._offsets.byteLength),this._values&&(M+=this._values.byteLength),this._nulls&&(M+=this._nulls.byteLength),this._typeIds&&(M+=this._typeIds.byteLength),this.children.reduce((p,na)=>p+na.byteLength,M)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let M=0;return this._offsets&&(M+=this._offsets.reservedByteLength),this._values&&(M+=this._values.reservedByteLength),this._nulls&&(M+=this._nulls.reservedByteLength),this._typeIds&&(M+=this._typeIds.reservedByteLength),
this.children.reduce((p,na)=>p+na.reservedByteLength,M)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(M){return this.set(this.length,M)}isValid(M){return this._isValid(M)}set(M,p){return this.setValid(M,this.isValid(p))&&this.setValue(M,p),this}setValue(M,p){this._setValue(this,M,p)}setValid(M,
p){return this.length=this._nulls.set(M,+p).length,p}addChild(M,p){throw Error(`Cannot append children to non-nested type "${this.type}"`);}getChildAt(M){return this.children[M]||null}flush(){var M=[];const p=this._values,na=this._offsets,ib=this._typeIds,{length:Sb,nullCount:wc}=this;ib?(M[ac.TYPE]=ib.flush(Sb),na&&(M[ac.OFFSET]=na.flush(Sb))):na?(p&&(M[ac.DATA]=p.flush(na.last())),M[ac.OFFSET]=na.flush(Sb)):p&&(M[ac.DATA]=p.flush(Sb));0<wc&&(M[ac.VALIDITY]=this._nulls.flush(Sb));M=Ef.new(this.type,
0,Sb,wc,M,this.children.map(Wc=>Wc.flush()));return this.clear(),M}finish(){return this.finished=!0,this.children.forEach(M=>M.finish()),this}clear(){return this.length=0,this._offsets&&this._offsets.clear(),this._values&&this._values.clear(),this._nulls&&this._nulls.clear(),this._typeIds&&this._typeIds.clear(),this.children.forEach(M=>M.clear()),this}}oh.prototype.length=1;oh.prototype.stride=1;oh.prototype.children=null;oh.prototype.finished=!1;oh.prototype.nullValues=null;oh.prototype._isValid=
()=>!0;class jj extends oh{constructor(M){super(M);this._values=new qg(new this.ArrayType(0),this.stride)}setValue(M,p){const na=this._values;return na.reserve(M-na.length+1),super.setValue(M,p)}}class Ki extends oh{constructor(M){super(M);this._pendingLength=0;this._offsets=new nh}setValue(M,p){const na=this._pending||(this._pending=new Map),ib=na.get(M);ib&&(this._pendingLength-=ib.length);this._pendingLength+=p.length;na.set(M,p)}setValid(M,p){return!!super.setValid(M,p)||((this._pending||(this._pending=
new Map)).set(M,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const M=this._pending,p=this._pendingLength;return this._pendingLength=0,this._pending=void 0,M&&0<M.size&&this._flushPending(M,p),this}}class Bi extends oh{constructor(M){super(M);this._values=new Nf}setValue(M,p){this._values.set(M,+p)}}class Kj extends oh{setValue(M,p){}setValid(M,p){return this.length=
Math.max(M+1,this.length),p}}class rj extends jj{}class vk extends rj{}class gk extends rj{}class qj extends jj{}class vh extends oh{constructor({type:M,nullValues:p,dictionaryHashFunction:na}){super({type:new Mg(M.dictionary,M.indices,M.id,M.isOrdered)});this._nulls=null;this._dictionaryOffset=0;this._keysToIndices=Object.create(null);this.indices=oh.new({type:this.type.indices,nullValues:p});this.dictionary=oh.new({type:this.type.dictionary,nullValues:null});"function"==typeof na&&(this.valueToKey=
na)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(M){return this.indices.isValid(M)}setValid(M,p){const na=this.indices;return p=na.setValid(M,p),
this.length=na.length,p}setValue(M,p){const na=this._keysToIndices,ib=this.valueToKey(p);let Sb=na[ib];return void 0===Sb&&(na[ib]=Sb=this._dictionaryOffset+this.dictionary.append(p).length-1),this.indices.setValue(M,Sb)}flush(){var M=this.type;const p=this._dictionary,na=this.dictionary.toVector();M=this.indices.flush().clone(M);return M.dictionary=p?p.concat(na):na,this.finished||(this._dictionaryOffset+=na.length),this._dictionary=M.dictionary,this.clear(),M}finish(){return this.indices.finish(),
this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(M){return"string"==typeof M?M:""+M}}class Ek extends jj{}const Lj=new Float64Array(1),Lf=new Uint32Array(Lj.buffer);class Ai extends jj{}class wi extends Ai{setValue(M,p){this._values.set(M,Ga(p))}}class uk extends Ai{setValue(M,p){this._values.set(M,p)}}class Yk extends Ai{setValue(M,p){this._values.set(M,p)}}
const Oi=Symbol.for("isArrowBigNum");let Vh,hk;ua.prototype[Oi]=!0;ua.prototype.toJSON=function(){return`"${Vh(this)}"`};ua.prototype.valueOf=function(){return eb(this)};ua.prototype.toString=function(){return Vh(this)};ua.prototype[Symbol.toPrimitive]=function(M="default"){switch(M){case "number":return eb(this);case "default":return hk(this)}return Vh(this)};Object.setPrototypeOf(Fa.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Xa.prototype,Object.create(Uint32Array.prototype));
Object.setPrototypeOf(Sa.prototype,Object.create(Uint32Array.prototype));Object.assign(Fa.prototype,ua.prototype,{constructor:Fa,signed:!0,TypedArray:Int32Array,BigIntArray:pf});Object.assign(Xa.prototype,ua.prototype,{constructor:Xa,signed:!1,TypedArray:Uint32Array,BigIntArray:bg});Object.assign(Sa.prototype,ua.prototype,{constructor:Sa,signed:!0,TypedArray:Uint32Array,BigIntArray:bg});zg?(hk=M=>8===M.byteLength?(new M.BigIntArray(M.buffer,M.byteOffset,1))[0]:Va(M),Vh=M=>8===M.byteLength?""+(new M.BigIntArray(M.buffer,
M.byteOffset,1))[0]:Va(M)):(Vh=Va,hk=Vh);class eh{static new(M,p){switch(p){case !0:return new Fa(M);case !1:return new Xa(M)}switch(M.constructor){case Int8Array:case Int16Array:case Int32Array:case pf:return new Fa(M)}return 16===M.byteLength?new Sa(M):new Xa(M)}static signed(M){return new Fa(M)}static unsigned(M){return new Xa(M)}static decimal(M){return new Sa(M)}constructor(M,p){return eh.new(M,p)}}class ai extends jj{setValue(M,p){this._values.set(M,p)}}class Oj extends ai{}class Ok extends ai{}
class oj extends ai{}class Th extends ai{constructor(M){M.nullValues&&(M.nullValues=M.nullValues.map(Wh));super(M);this._values=new si(new Int32Array(0),2)}get values64(){return this._values.buffer64}isValid(M){return super.isValid(Wh(M))}}class Xi extends ai{}class Xh extends ai{}class Zh extends ai{}class cj extends ai{constructor(M){M.nullValues&&(M.nullValues=M.nullValues.map(Wh));super(M);this._values=new si(new Uint32Array(0),2)}get values64(){return this._values.buffer64}isValid(M){return super.isValid(Wh(M))}}
const Wh=(ni={BigIntArray:pf},M=>(ArrayBuffer.isView(M)&&(ni.buffer=M.buffer,ni.byteOffset=M.byteOffset,ni.byteLength=M.byteLength,M=hk(ni),ni.buffer=null),M));var ni;class Pj extends jj{}class Kh extends Pj{}class Ri extends Pj{}class oi extends Pj{}class lh extends Pj{}class Xj extends jj{}class Oh extends Xj{}class Mh extends Xj{}class ui extends Xj{}class Ti extends Xj{}class Kg extends jj{}class Mj extends Kg{}class Bk extends Kg{}class bk extends Ki{constructor(M){super(M);this._values=new Dg(new Uint8Array(0))}get byteLength(){let M=
this._pendingLength+4*this.length;return this._offsets&&(M+=this._offsets.byteLength),this._values&&(M+=this._values.byteLength),this._nulls&&(M+=this._nulls.byteLength),M}setValue(M,p){return super.setValue(M,v(Uint8Array,p))}_flushPending(M,p){const na=this._offsets;p=this._values.reserve(p).buffer;let ib,Sb=0,wc=0,Wc=0;for([Sb,ib]of M)void 0===ib?na.set(Sb,0):(wc=ib.length,p.set(ib,Wc),na.set(Sb,wc),Wc+=wc)}}class Rj extends Ki{constructor(M){super(M);this._values=new Dg(new Uint8Array(0))}get byteLength(){let M=
this._pendingLength+4*this.length;return this._offsets&&(M+=this._offsets.byteLength),this._values&&(M+=this._values.byteLength),this._nulls&&(M+=this._nulls.byteLength),M}setValue(M,p){return super.setValue(M,Ye.encode(p))}_flushPending(M,p){}}Rj.prototype._flushPending=bk.prototype._flushPending;class Ak{get length(){return this._values.length}get(M){return this._values[M]}clear(){return this._values=null,this}bind(M){return M instanceof Qc?M:(this._values=M,this)}}class Xg{constructor(M=[],p,na){this.fields=
M||[];this.metadata=p||new Map;na||(na=Ra(M));this.dictionaries=na}get [Symbol.toStringTag](){return"Schema"}toString(){return`Schema<{ ${this.fields.map((M,p)=>`${p}: ${M}`).join(", ")} }>`}select(...M){const p=M.reduce((na,ib)=>(na[ib]=!0,na),Object.create(null));return new Xg(this.fields.filter(na=>p[na.name]),this.metadata)}selectAt(...M){return new Xg(M.map(p=>this.fields[p]).filter(Boolean),this.metadata)}assign(...M){var p=M[0]instanceof Xg?M[0]:Array.isArray(M[0])?new Xg(M[0]):new Xg(M);const na=
[...this.fields];M=La(La(new Map,this.metadata),p.metadata);p=p.fields.filter(Sb=>{const wc=na.findIndex(Wc=>Wc.name===Sb.name);return!~wc||(na[wc]=Sb.clone({metadata:La(La(new Map,na[wc].metadata),Sb.metadata)}))&&!1});const ib=Ra(p,new Map);return new Xg([...na,...p],M,new Map([...this.dictionaries,...ib]))}}class ph{constructor(M,p,na=!1,ib){this.name=M;this.type=p;this.nullable=na;this.metadata=ib||new Map}static new(...M){let [p,na,ib,Sb]=M;return M[0]&&"object"==typeof M[0]&&({name:p}=M[0],
void 0===na&&(na=M[0].type),void 0===ib&&(ib=M[0].nullable),void 0===Sb&&(Sb=M[0].metadata)),new ph(""+p,na,ib,Sb)}get typeId(){return this.type.typeId}get [Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...M){let [p,na,ib,Sb]=M;return M[0]&&"object"==typeof M[0]?{name:p=this.name,type:na=this.type,nullable:ib=this.nullable,metadata:Sb=this.metadata}=M[0]:[p=this.name,na=this.type,ib=this.nullable,Sb=this.metadata]=M,ph.new(p,na,ib,Sb)}}Xg.prototype.fields=
null;Xg.prototype.metadata=null;Xg.prototype.dictionaries=null;ph.prototype.type=null;ph.prototype.name=null;ph.prototype.nullable=null;ph.prototype.metadata=null;class xh extends Ki{constructor(M){super(M);this._run=new Ak;this._offsets=new nh}addChild(M,p="0"){if(0<this.numChildren)throw Error("ListBuilder can only have one child.");return this.children[this.numChildren]=M,this.type=new eg(new ph(p,M.type,!0)),this.numChildren-1}clear(){return this._run.clear(),super.clear()}_flushPending(M){const p=
this._run,na=this._offsets,ib=this._setValue;let Sb,wc=0;for([wc,Sb]of M)void 0===Sb?na.set(wc,0):(na.set(wc,Sb.length),ib(this,wc,p.bind(Sb)))}}class ki extends oh{constructor(){super(...arguments);this._run=new Ak}setValue(M,p){super.setValue(M,this._run.bind(p))}addChild(M,p="0"){if(0<this.numChildren)throw Error("FixedSizeListBuilder can only have one child.");const na=this.children.push(M);return this.type=new ug(this.type.listSize,new ph(p,M.type,!0)),na}clear(){return this._run.clear(),super.clear()}}
class Hh extends Ki{set(M,p){return super.set(M,p)}setValue(M,p){p=p instanceof Map?p:new Map(Object.entries(p));const na=this._pending||(this._pending=new Map),ib=na.get(M);ib&&(this._pendingLength-=ib.size);this._pendingLength+=p.size;na.set(M,p)}addChild(M,p=""+this.numChildren){if(0<this.numChildren)throw Error("ListBuilder can only have one child.");return this.children[this.numChildren]=M,this.type=new Ng(new ph(p,M.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(M){const p=
this._offsets,na=this._setValue;M.forEach((ib,Sb)=>{void 0===ib?p.set(Sb,0):(p.set(Sb,ib.size),na(this,Sb,ib))})}}class ri extends oh{addChild(M,p=""+this.numChildren){const na=this.children.push(M);return this.type=new Sf([...this.type.children,new ph(p,M.type,!0)]),na}}class Fi extends oh{constructor(M){super(M);this._typeIds=new qg(new Int8Array(0),1);"function"==typeof M.valueToChildTypeId&&(this._valueToChildTypeId=M.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(M,
p){return this.set(this.length,M,p)}set(M,p,na){return void 0===na&&(na=this._valueToChildTypeId(this,p,M)),this.setValid(M,this.isValid(p))&&this.setValue(M,p,na),this}setValue(M,p,na){this._typeIds.set(M,na);super.setValue(M,p)}addChild(M,p=""+this.children.length){const na=this.children.push(M),{type:{children:ib,mode:Sb,typeIds:wc}}=this;M=[...ib,new ph(p,M.type)];return this.type=new gg(Sb,[...wc,na],M),na}_valueToChildTypeId(M,p,na){throw Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.");
}}class dj extends Fi{}class Yg extends Fi{constructor(M){super(M);this._offsets=new qg(new Int32Array(0))}setValue(M,p,na){return this._offsets.set(M,this.getChildAt(this.type.typeIdToChildIndex[na]).length),super.setValue(M,p,na)}}class xg{visitMany(M,...p){return M.map((na,ib)=>this.visit(na,...p.map(Sb=>Sb[ib])))}visit(...M){return this.getVisitFn(M[0],!1).apply(this,M)}getVisitFn(M,p=!0){return function(na,ib,Sb=!0){let wc=null,Wc=nb.NONE;ib instanceof Ef||ib instanceof Qc?Wc=la(ib.type):ib instanceof
ce?Wc=la(ib):"number"!=typeof(Wc=ib)&&(Wc=nb[ib]);switch(Wc){case nb.Null:wc=na.visitNull;break;case nb.Bool:wc=na.visitBool;break;case nb.Int:wc=na.visitInt;break;case nb.Int8:wc=na.visitInt8||na.visitInt;break;case nb.Int16:wc=na.visitInt16||na.visitInt;break;case nb.Int32:wc=na.visitInt32||na.visitInt;break;case nb.Int64:wc=na.visitInt64||na.visitInt;break;case nb.Uint8:wc=na.visitUint8||na.visitInt;break;case nb.Uint16:wc=na.visitUint16||na.visitInt;break;case nb.Uint32:wc=na.visitUint32||na.visitInt;
break;case nb.Uint64:wc=na.visitUint64||na.visitInt;break;case nb.Float:wc=na.visitFloat;break;case nb.Float16:wc=na.visitFloat16||na.visitFloat;break;case nb.Float32:wc=na.visitFloat32||na.visitFloat;break;case nb.Float64:wc=na.visitFloat64||na.visitFloat;break;case nb.Utf8:wc=na.visitUtf8;break;case nb.Binary:wc=na.visitBinary;break;case nb.FixedSizeBinary:wc=na.visitFixedSizeBinary;break;case nb.Date:wc=na.visitDate;break;case nb.DateDay:wc=na.visitDateDay||na.visitDate;break;case nb.DateMillisecond:wc=
na.visitDateMillisecond||na.visitDate;break;case nb.Timestamp:wc=na.visitTimestamp;break;case nb.TimestampSecond:wc=na.visitTimestampSecond||na.visitTimestamp;break;case nb.TimestampMillisecond:wc=na.visitTimestampMillisecond||na.visitTimestamp;break;case nb.TimestampMicrosecond:wc=na.visitTimestampMicrosecond||na.visitTimestamp;break;case nb.TimestampNanosecond:wc=na.visitTimestampNanosecond||na.visitTimestamp;break;case nb.Time:wc=na.visitTime;break;case nb.TimeSecond:wc=na.visitTimeSecond||na.visitTime;
break;case nb.TimeMillisecond:wc=na.visitTimeMillisecond||na.visitTime;break;case nb.TimeMicrosecond:wc=na.visitTimeMicrosecond||na.visitTime;break;case nb.TimeNanosecond:wc=na.visitTimeNanosecond||na.visitTime;break;case nb.Decimal:wc=na.visitDecimal;break;case nb.List:wc=na.visitList;break;case nb.Struct:wc=na.visitStruct;break;case nb.Union:wc=na.visitUnion;break;case nb.DenseUnion:wc=na.visitDenseUnion||na.visitUnion;break;case nb.SparseUnion:wc=na.visitSparseUnion||na.visitUnion;break;case nb.Dictionary:wc=
na.visitDictionary;break;case nb.Interval:wc=na.visitInterval;break;case nb.IntervalDayTime:wc=na.visitIntervalDayTime||na.visitInterval;break;case nb.IntervalYearMonth:wc=na.visitIntervalYearMonth||na.visitInterval;break;case nb.FixedSizeList:wc=na.visitFixedSizeList;break;case nb.Map:wc=na.visitMap}if("function"==typeof wc)return wc;if(!Sb)return()=>null;throw Error(`Unrecognized type '${nb[Wc]}'`);}(this,M,p)}visitNull(M,...p){return null}visitBool(M,...p){return null}visitInt(M,...p){return null}visitFloat(M,
...p){return null}visitUtf8(M,...p){return null}visitBinary(M,...p){return null}visitFixedSizeBinary(M,...p){return null}visitDate(M,...p){return null}visitTimestamp(M,...p){return null}visitTime(M,...p){return null}visitDecimal(M,...p){return null}visitList(M,...p){return null}visitStruct(M,...p){return null}visitUnion(M,...p){return null}visitDictionary(M,...p){return null}visitInterval(M,...p){return null}visitFixedSizeList(M,...p){return null}visitMap(M,...p){return null}}xg.prototype.visitInt8=
null;xg.prototype.visitInt16=null;xg.prototype.visitInt32=null;xg.prototype.visitInt64=null;xg.prototype.visitUint8=null;xg.prototype.visitUint16=null;xg.prototype.visitUint32=null;xg.prototype.visitUint64=null;xg.prototype.visitFloat16=null;xg.prototype.visitFloat32=null;xg.prototype.visitFloat64=null;xg.prototype.visitDateDay=null;xg.prototype.visitDateMillisecond=null;xg.prototype.visitTimestampSecond=null;xg.prototype.visitTimestampMillisecond=null;xg.prototype.visitTimestampMicrosecond=null;
xg.prototype.visitTimestampNanosecond=null;xg.prototype.visitTimeSecond=null;xg.prototype.visitTimeMillisecond=null;xg.prototype.visitTimeMicrosecond=null;xg.prototype.visitTimeNanosecond=null;xg.prototype.visitDenseUnion=null;xg.prototype.visitSparseUnion=null;xg.prototype.visitIntervalDayTime=null;xg.prototype.visitIntervalYearMonth=null;class vg extends xg{}const ej=(M,p,na,ib)=>{const {[na]:Sb,[na+1]:wc}=p;null!=Sb&&null!=wc&&M.set(ib.subarray(0,wc-Sb),Sb)},Sj=({values:M},p,na)=>{M[p]=na.valueOf()/
864E5|0},ei=({values:M},p,na)=>{p*=2;na=na.valueOf();M[p]=na%4294967296|0;M[p+1]=na/4294967296|0},Lh=({stride:M,values:p},na,ib)=>{p[M*na]=ib},dk=({stride:M,values:p},na,ib)=>{p[M*na]=Ga(ib)},kk=(M,p,na)=>{switch(typeof na){case "bigint":M.values64[p]=na;break;case "number":M.values[p*M.stride]=na;break;default:const {stride:ib,ArrayType:Sb}=M;na=v(Sb,na);M.values.set(na.subarray(0,ib),ib*p)}},sj=({values:M},p,na)=>{p*=2;na/=1E3;M[p]=na%4294967296|0;M[p+1]=na/4294967296|0},mi=({values:M},p,na)=>{p*=
2;M[p]=na%4294967296|0;M[p+1]=na/4294967296|0},Cj=({values:M},p,na)=>{p*=2;M[p]=1E3*na%4294967296|0;M[p+1]=1E3*na/4294967296|0},Ch=({values:M},p,na)=>{p*=2;M[p]=1E6*na%4294967296|0;M[p+1]=1E6*na/4294967296|0},ck=({values:M,stride:p},na,ib)=>{M[p*na]=ib},Ik=({values:M,stride:p},na,ib)=>{M[p*na]=ib},Ej=({values:M},p,na)=>{M.set(na.subarray(0,2),2*p)},Qi=({values:M},p,na)=>{M.set(na.subarray(0,2),2*p)},qk=(M,p,na)=>{const ib=M.getChildAt(M.typeIdToChildIndex[M.typeIds[p]]);ib&&ib.set(M.valueOffsets[p],
na)},Ji=(M,p,na)=>{(M=M.getChildAt(M.typeIdToChildIndex[M.typeIds[p]]))&&M.set(p,na)},lj=({values:M},p,na)=>{M.set(na.subarray(0,2),2*p)},Yj=({values:M},p,na)=>{M[p]=12*na[0]+na[1]%12};vg.prototype.visitBool=({offset:M,values:p},na,ib)=>{M+=na;ib?p[M>>3]|=1<<M%8:p[M>>3]&=~(1<<M%8)};vg.prototype.visitInt=(M,p,na)=>{64>M.type.bitWidth?Lh(M,p,na):kk(M,p,na)};vg.prototype.visitInt8=Lh;vg.prototype.visitInt16=Lh;vg.prototype.visitInt32=Lh;vg.prototype.visitInt64=kk;vg.prototype.visitUint8=Lh;vg.prototype.visitUint16=
Lh;vg.prototype.visitUint32=Lh;vg.prototype.visitUint64=kk;vg.prototype.visitFloat=(M,p,na)=>{M.type.precision!==we.HALF?Lh(M,p,na):dk(M,p,na)};vg.prototype.visitFloat16=dk;vg.prototype.visitFloat32=Lh;vg.prototype.visitFloat64=Lh;vg.prototype.visitUtf8=({values:M,valueOffsets:p},na,ib)=>{ej(M,p,na,Ye.encode(ib))};vg.prototype.visitBinary=({values:M,valueOffsets:p},na,ib)=>ej(M,p,na,ib);vg.prototype.visitFixedSizeBinary=({stride:M,values:p},na,ib)=>{p.set(ib.subarray(0,M),M*na)};vg.prototype.visitDate=
(M,p,na)=>{M.type.unit===ue.DAY?Sj(M,p,na):ei(M,p,na)};vg.prototype.visitDateDay=Sj;vg.prototype.visitDateMillisecond=ei;vg.prototype.visitTimestamp=(M,p,na)=>{switch(M.type.unit){case sd.SECOND:return sj(M,p,na);case sd.MILLISECOND:return mi(M,p,na);case sd.MICROSECOND:return Cj(M,p,na);case sd.NANOSECOND:return Ch(M,p,na)}};vg.prototype.visitTimestampSecond=sj;vg.prototype.visitTimestampMillisecond=mi;vg.prototype.visitTimestampMicrosecond=Cj;vg.prototype.visitTimestampNanosecond=Ch;vg.prototype.visitTime=
(M,p,na)=>{switch(M.type.unit){case sd.SECOND:return ck(M,p,na);case sd.MILLISECOND:return Ik(M,p,na);case sd.MICROSECOND:return Ej(M,p,na);case sd.NANOSECOND:return Qi(M,p,na)}};vg.prototype.visitTimeSecond=ck;vg.prototype.visitTimeMillisecond=Ik;vg.prototype.visitTimeMicrosecond=Ej;vg.prototype.visitTimeNanosecond=Qi;vg.prototype.visitDecimal=({values:M},p,na)=>{M.set(na.subarray(0,4),4*p)};vg.prototype.visitList=(M,p,na)=>{const ib=M.getChildAt(0);M=M.valueOffsets;for(let Sb=-1,wc=M[p],Wc=M[p+
1];wc<Wc;)ib.set(wc++,na.get(++Sb))};vg.prototype.visitStruct=(M,p,na)=>{const ib=na instanceof Map?(Sb=p,wc=na,(Wc,Hd,Ud)=>Wc&&Wc.set(Sb,wc.get(Hd.name))):na instanceof Qc?((Wc,Hd)=>(Ud,He,zf)=>Ud&&Ud.set(Wc,Hd.get(zf)))(p,na):Array.isArray(na)?((Wc,Hd)=>(Ud,He,zf)=>Ud&&Ud.set(Wc,Hd[zf]))(p,na):((Wc,Hd)=>(Ud,He,zf)=>Ud&&Ud.set(Wc,Hd[He.name]))(p,na);var Sb,wc;M.type.children.forEach((Wc,Hd)=>ib(M.getChildAt(Hd),Wc,Hd))};vg.prototype.visitUnion=(M,p,na)=>{M.type.mode===Wd.Dense?qk(M,p,na):Ji(M,p,
na)};vg.prototype.visitDenseUnion=qk;vg.prototype.visitSparseUnion=Ji;vg.prototype.visitDictionary=(M,p,na)=>{p=M.getKey(p);null!==p&&M.setValue(p,na)};vg.prototype.visitInterval=(M,p,na)=>{M.type.unit===Fe.DAY_TIME?lj(M,p,na):Yj(M,p,na)};vg.prototype.visitIntervalDayTime=lj;vg.prototype.visitIntervalYearMonth=Yj;vg.prototype.visitFixedSizeList=(M,p,na)=>{const ib=M.getChildAt(0);({stride:M}=M);for(let Sb=-1,wc=p*M;++Sb<M;)ib.set(wc+Sb,na.get(Sb))};vg.prototype.visitMap=(M,p,na)=>{const ib=M.getChildAt(0);
M=M.valueOffsets;na=na instanceof Map?[...na]:Object.entries(na);for(let Sb=-1,wc=M[p],Wc=M[p+1];wc<Wc;)ib.set(wc++,na[++Sb])};const vj=new vg,Tj=new class extends xg{visitNull(){return Kj}visitBool(){return Bi}visitInt(){return ai}visitInt8(){return Oj}visitInt16(){return Ok}visitInt32(){return oj}visitInt64(){return Th}visitUint8(){return Xi}visitUint16(){return Xh}visitUint32(){return Zh}visitUint64(){return cj}visitFloat(){return Ai}visitFloat16(){return wi}visitFloat32(){return uk}visitFloat64(){return Yk}visitUtf8(){return Rj}visitBinary(){return bk}visitFixedSizeBinary(){return Ek}visitDate(){return rj}visitDateDay(){return vk}visitDateMillisecond(){return gk}visitTimestamp(){return Xj}visitTimestampSecond(){return Oh}visitTimestampMillisecond(){return Mh}visitTimestampMicrosecond(){return ui}visitTimestampNanosecond(){return Ti}visitTime(){return Pj}visitTimeSecond(){return Kh}visitTimeMillisecond(){return Ri}visitTimeMicrosecond(){return oi}visitTimeNanosecond(){return lh}visitDecimal(){return qj}visitList(){return xh}visitStruct(){return ri}visitUnion(){return Fi}visitDenseUnion(){return Yg}visitSparseUnion(){return dj}visitDictionary(){return vh}visitInterval(){return Kg}visitIntervalDayTime(){return Mj}visitIntervalYearMonth(){return Bk}visitFixedSizeList(){return ki}visitMap(){return Hh}};
oh.new=function na(p){const ib=p.type,Sb=new (Tj.getVisitFn(ib)())(p);if(ib.children&&0<ib.children.length){const wc=p.children||[],Wc={nullValues:p.nullValues},Hd=Array.isArray(wc)?(Ud,He)=>wc[He]||Wc:({name:Ud})=>wc[Ud]||Wc;ib.children.forEach((Ud,He)=>{const {type:zf}=Ud;Ud=Hd(Ud,He);Sb.children.push(na(Object.assign(Object.assign({},Ud),{type:zf})))})}return Sb};Object.keys(nb).map(p=>nb[p]).filter(p=>"number"==typeof p&&p!==nb.NONE).forEach(p=>{Tj.visit(p).prototype._setValue=vj.getVisitFn(p)});
Rj.prototype._setValue=vj.visitBinary;class Ag{constructor(){this.bb=null;this.bb_pos=0}__init(p,na){return this.bb_pos=p,this.bb=na,this}static getRootAsFooter(p,na){return(na||new Ag).__init(p.readInt32(p.position())+p.position(),p)}static getSizePrefixedRootAsFooter(p,na){return p.setPosition(p.position()+Ad.SIZE_PREFIX_LENGTH),(na||new Ag).__init(p.readInt32(p.position())+p.position(),p)}version(){const p=this.bb.__offset(this.bb_pos,4);return p?this.bb.readInt16(this.bb_pos+p):Cc.V1}schema(p){const na=
this.bb.__offset(this.bb_pos,6);return na?(p||new Fc).__init(this.bb.__indirect(this.bb_pos+na),this.bb):null}dictionaries(p,na){const ib=this.bb.__offset(this.bb_pos,8);return ib?(na||new ti).__init(this.bb.__vector(this.bb_pos+ib)+24*p,this.bb):null}dictionariesLength(){const p=this.bb.__offset(this.bb_pos,8);return p?this.bb.__vector_len(this.bb_pos+p):0}recordBatches(p,na){const ib=this.bb.__offset(this.bb_pos,10);return ib?(na||new ti).__init(this.bb.__vector(this.bb_pos+ib)+24*p,this.bb):null}recordBatchesLength(){const p=
this.bb.__offset(this.bb_pos,10);return p?this.bb.__vector_len(this.bb_pos+p):0}customMetadata(p,na){const ib=this.bb.__offset(this.bb_pos,12);return ib?(na||new Lb).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+ib)+4*p),this.bb):null}customMetadataLength(){const p=this.bb.__offset(this.bb_pos,12);return p?this.bb.__vector_len(this.bb_pos+p):0}static startFooter(p){p.startObject(5)}static addVersion(p,na){p.addFieldInt16(0,na,Cc.V1)}static addSchema(p,na){p.addFieldOffset(1,na,0)}static addDictionaries(p,
na){p.addFieldOffset(2,na,0)}static startDictionariesVector(p,na){p.startVector(24,na,8)}static addRecordBatches(p,na){p.addFieldOffset(3,na,0)}static startRecordBatchesVector(p,na){p.startVector(24,na,8)}static addCustomMetadata(p,na){p.addFieldOffset(4,na,0)}static createCustomMetadataVector(p,na){p.startVector(4,na.length,4);for(let ib=na.length-1;0<=ib;ib--)p.addOffset(na[ib]);return p.endVector()}static startCustomMetadataVector(p,na){p.startVector(4,na,4)}static endFooter(p){return p.endObject()}static finishFooterBuffer(p,
na){p.finish(na)}static finishSizePrefixedFooterBuffer(p,na){p.finish(na,void 0,!0)}static createFooter(p,na,ib,Sb,wc,Wc){return Ag.startFooter(p),Ag.addVersion(p,na),Ag.addSchema(p,ib),Ag.addDictionaries(p,Sb),Ag.addRecordBatches(p,wc),Ag.addCustomMetadata(p,Wc),Ag.endFooter(p)}}class ti{constructor(){this.bb=null;this.bb_pos=0}__init(p,na){return this.bb_pos=p,this.bb=na,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+
16)}static createBlock(p,na,ib,Sb){return p.prep(8,24),p.writeInt64(Sb),p.pad(4),p.writeInt32(ib),p.writeInt64(na),p.offset()}}var $h=Ad.Long,Eh=Ad.Builder,Ck=Ad.ByteBuffer;class jk{constructor(p,na=Cc.V4,ib,Sb){this.schema=p;this.version=na;ib&&(this._recordBatches=ib);Sb&&(this._dictionaryBatches=Sb)}static decode(p){p=new Ck(v(Uint8Array,p));p=Ag.getRootAsFooter(p);const na=Xg.decode(p.schema());return new Qj(na,p)}static encode(p){const na=new Eh,ib=Xg.encode(na,p.schema);Ag.startRecordBatchesVector(na,
p.numRecordBatches);[...p.recordBatches()].slice().reverse().forEach(wc=>Li.encode(na,wc));const Sb=na.endVector();Ag.startDictionariesVector(na,p.numDictionaries);[...p.dictionaryBatches()].slice().reverse().forEach(wc=>Li.encode(na,wc));p=na.endVector();return Ag.startFooter(na),Ag.addSchema(na,ib),Ag.addVersion(na,Cc.V4),Ag.addRecordBatches(na,Sb),Ag.addDictionaries(na,p),Ag.finishFooterBuffer(na,Ag.endFooter(na)),na.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let p,
na=-1,ib=this.numRecordBatches;++na<ib;)(p=this.getRecordBatch(na))&&(yield p)}*dictionaryBatches(){for(let p,na=-1,ib=this.numDictionaries;++na<ib;)(p=this.getDictionaryBatch(na))&&(yield p)}getRecordBatch(p){return 0<=p&&p<this.numRecordBatches&&this._recordBatches[p]||null}getDictionaryBatch(p){return 0<=p&&p<this.numDictionaries&&this._dictionaryBatches[p]||null}}class Qj extends jk{constructor(p,na){super(p,na.version());this._footer=na}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(p){return 0<=
p&&p<this.numRecordBatches&&(p=this._footer.recordBatches(p))?Li.decode(p):null}getDictionaryBatch(p){return 0<=p&&p<this.numDictionaries&&(p=this._footer.dictionaries(p))?Li.decode(p):null}}class Li{constructor(p,na,ib){this.metaDataLength=p;this.offset="number"==typeof ib?ib:ib.low;this.bodyLength="number"==typeof na?na:na.low}static decode(p){return new Li(p.metaDataLength(),p.bodyLength(),p.offset())}static encode(p,na){const {metaDataLength:ib}=na,Sb=new $h(na.offset,0);na=new $h(na.bodyLength,
0);return ti.createBlock(p,Sb,ib,na)}}class aj extends If{write(p){if(0<(p=v(Uint8Array,p)).byteLength)return super.write(p)}toString(p=!1){return p?$e.decode(this.toUint8Array(!0)):this.toUint8Array(!1).then(qf)}toUint8Array(p=!1){return p?B(this._values)[0]:(()=>u(this,void 0,void 0,function*(){var na;const ib=[];let Sb=0;try{for(var wc,Wc=X(this);!(wc=yield Wc.next()).done;){const Ud=wc.value;ib.push(Ud);Sb+=Ud.byteLength}}catch(Ud){var Hd={error:Ud}}finally{try{wc&&!wc.done&&(na=Wc.return)&&(yield na.call(Wc))}finally{if(Hd)throw Hd.error;
}}return B(ib,Sb)[0]}))()}}class rg{constructor(p){p&&(this.source=new Rk(ed.fromIterable(p)))}[Symbol.iterator](){return this}next(p){return this.source.next(p)}throw(p){return this.source.throw(p)}return(p){return this.source.return(p)}peek(p){return this.source.peek(p)}read(p){return this.source.read(p)}}class mj{constructor(p){p instanceof mj?this.source=p.source:p instanceof aj?this.source=new wj(ed.fromAsyncIterable(p)):Na(p)?this.source=new wj(ed.fromNodeStream(p)):m(p)?this.source=new wj(ed.fromDOMStream(p)):
null!=p&&Object(p)===p&&m(p.body)?this.source=new wj(ed.fromDOMStream(p.body)):sg(p)?this.source=new wj(ed.fromIterable(p)):(Tf(p)||zc(p))&&(this.source=new wj(ed.fromAsyncIterable(p)))}[Symbol.asyncIterator](){return this}next(p){return this.source.next(p)}throw(p){return this.source.throw(p)}return(p){return this.source.return(p)}get closed(){return this.source.closed}cancel(p){return this.source.cancel(p)}peek(p){return this.source.peek(p)}read(p){return this.source.read(p)}}class Rk{constructor(p){this.source=
p}cancel(p){this.return(p)}peek(p){return this.next(p,"peek").value}read(p){return this.next(p,"read").value}next(p,na="read"){return this.source.next({cmd:na,size:p})}throw(p){return Object.create(this.source.throw&&this.source.throw(p)||af)}return(p){return Object.create(this.source.return&&this.source.return(p)||af)}}class wj{constructor(p){this.source=p;this._closedPromise=new Promise(na=>this._closedPromiseResolve=na)}cancel(p){return u(this,void 0,void 0,function*(){yield this.return(p)})}get closed(){return this._closedPromise}read(p){return u(this,
void 0,void 0,function*(){return(yield this.next(p,"read")).value})}peek(p){return u(this,void 0,void 0,function*(){return(yield this.next(p,"peek")).value})}next(p,na="read"){return u(this,void 0,void 0,function*(){return yield this.source.next({cmd:na,size:p})})}throw(p){return u(this,void 0,void 0,function*(){const na=this.source.throw&&(yield this.source.throw(p))||af;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(na)})}return(p){return u(this,
void 0,void 0,function*(){const na=this.source.return&&(yield this.source.return(p))||af;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(na)})}}class Gi extends rg{constructor(p,na){super();this.position=0;this.buffer=v(Uint8Array,p);this.size=void 0===na?this.buffer.byteLength:na}readInt32(p){const {buffer:na,byteOffset:ib}=this.readAt(p,4);return(new DataView(na,ib)).getInt32(0,!0)}seek(p){return this.position=Math.min(p,this.size),
p<this.size}read(p){const {buffer:na,size:ib,position:Sb}=this;return na&&Sb<ib?("number"!=typeof p&&(p=1/0),this.position=Math.min(ib,Sb+Math.min(ib-Sb,p)),na.subarray(Sb,this.position)):null}readAt(p,na){const ib=this.buffer,Sb=Math.min(this.size,p+na);return ib?ib.subarray(p,Sb):new Uint8Array(na)}close(){this.buffer&&(this.buffer=null)}throw(p){return this.close(),{done:!0,value:p}}return(p){return this.close(),{done:!0,value:p}}}class Fj extends mj{constructor(p,na){super();this.position=0;this._handle=
p;"number"==typeof na?this.size=na:this._pending=(()=>u(this,void 0,void 0,function*(){this.size=(yield p.stat()).size;delete this._pending}))()}readInt32(p){return u(this,void 0,void 0,function*(){const {buffer:na,byteOffset:ib}=yield this.readAt(p,4);return(new DataView(na,ib)).getInt32(0,!0)})}seek(p){return u(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(p,this.size),p<this.size})}read(p){return u(this,void 0,void 0,function*(){this._pending&&
(yield this._pending);const {_handle:na,size:ib,position:Sb}=this;if(na&&Sb<ib){"number"!=typeof p&&(p=1/0);let wc=Sb,Wc=0,Hd=0;const Ud=Math.min(ib,wc+Math.min(ib-wc,p)),He=new Uint8Array(Math.max(0,(this.position=Ud)-wc));for(;(wc+=Hd)<Ud&&(Wc+=Hd)<He.byteLength;)({bytesRead:Hd}=yield na.read(He,Wc,He.byteLength-Wc,wc));return He}return null})}readAt(p,na){return u(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const {_handle:ib,size:Sb}=this;if(ib&&p+na<Sb){const wc=new Uint8Array(Math.min(Sb,
p+na)-p);return(yield ib.read(wc,0,na,p)).buffer}return new Uint8Array(na)})}close(){return u(this,void 0,void 0,function*(){const p=this._handle;this._handle=null;p&&(yield p.close())})}throw(p){return u(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:p}})}return(p){return u(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:p}})}}const fj=[1,10,100,1E3,1E4,1E5,1E6,1E7,1E8];class Ph{constructor(p){this.buffer=p}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(p){const na=
new Uint32Array([this.buffer[1]>>>16,65535&this.buffer[1],this.buffer[0]>>>16,65535&this.buffer[0]]);p=new Uint32Array([p.buffer[1]>>>16,65535&p.buffer[1],p.buffer[0]>>>16,65535&p.buffer[0]]);let ib=na[3]*p[3];this.buffer[0]=65535&ib;let Sb=ib>>>16;return ib=na[2]*p[3],Sb+=ib,ib=na[3]*p[2]>>>0,Sb+=ib,this.buffer[0]+=Sb<<16,this.buffer[1]=Sb>>>0<ib?65536:0,this.buffer[1]+=Sb>>>16,this.buffer[1]+=na[1]*p[3]+na[2]*p[2]+na[3]*p[1],this.buffer[1]+=na[0]*p[3]+na[1]*p[2]+na[2]*p[1]+na[3]*p[0]<<16,this}_plus(p){const na=
this.buffer[0]+p.buffer[0]>>>0;this.buffer[1]+=p.buffer[1];na<this.buffer[0]>>>0&&++this.buffer[1];this.buffer[0]=na}lessThan(p){return this.buffer[1]<p.buffer[1]||this.buffer[1]===p.buffer[1]&&this.buffer[0]<p.buffer[0]}equals(p){return this.buffer[1]===p.buffer[1]&&this.buffer[0]==p.buffer[0]}greaterThan(p){return p.lessThan(this)}hex(){return`${ma(this.buffer[1])} ${ma(this.buffer[0])}`}}class sh extends Ph{times(p){return this._times(p),this}plus(p){return this._plus(p),this}static from(p,na=
new Uint32Array(2)){return sh.fromString("string"==typeof p?p:p.toString(),na)}static fromNumber(p,na=new Uint32Array(2)){return sh.fromString(p.toString(),na)}static fromString(p,na=new Uint32Array(2)){const ib=p.length;na=new sh(na);for(let Sb=0;Sb<ib;){const wc=8<ib-Sb?8:ib-Sb,Wc=new sh(new Uint32Array([parseInt(p.substr(Sb,wc),10),0])),Hd=new sh(new Uint32Array([fj[wc],0]));na.times(Hd);na.plus(Wc);Sb+=wc}return na}static convertArray(p){const na=new Uint32Array(2*p.length);for(let ib=-1,Sb=p.length;++ib<
Sb;)sh.from(p[ib],new Uint32Array(na.buffer,na.byteOffset+8*ib,2));return na}static multiply(p,na){return(new sh(new Uint32Array(p.buffer))).times(na)}static add(p,na){return(new sh(new Uint32Array(p.buffer))).plus(na)}}class uh extends Ph{negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],0==this.buffer[0]&&++this.buffer[1],this}times(p){return this._times(p),this}plus(p){return this._plus(p),this}lessThan(p){const na=this.buffer[1]<<0,ib=p.buffer[1]<<0;return na<ib||
na===ib&&this.buffer[0]<p.buffer[0]}static from(p,na=new Uint32Array(2)){return uh.fromString("string"==typeof p?p:p.toString(),na)}static fromNumber(p,na=new Uint32Array(2)){return uh.fromString(p.toString(),na)}static fromString(p,na=new Uint32Array(2)){const ib=p.startsWith("-"),Sb=p.length;na=new uh(na);for(let wc=ib?1:0;wc<Sb;){const Wc=8<Sb-wc?8:Sb-wc,Hd=new uh(new Uint32Array([parseInt(p.substr(wc,Wc),10),0])),Ud=new uh(new Uint32Array([fj[Wc],0]));na.times(Ud);na.plus(Hd);wc+=Wc}return ib?
na.negate():na}static convertArray(p){const na=new Uint32Array(2*p.length);for(let ib=-1,Sb=p.length;++ib<Sb;)uh.from(p[ib],new Uint32Array(na.buffer,na.byteOffset+8*ib,2));return na}static multiply(p,na){return(new uh(new Uint32Array(p.buffer))).times(na)}static add(p,na){return(new uh(new Uint32Array(p.buffer))).plus(na)}}class hi{constructor(p){this.buffer=p}high(){return new uh(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new uh(new Uint32Array(this.buffer.buffer,
this.buffer.byteOffset,2))}negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],0==this.buffer[0]&&++this.buffer[1],0==this.buffer[1]&&++this.buffer[2],0==this.buffer[2]&&++this.buffer[3],this}times(p){const na=new sh(new Uint32Array([this.buffer[3],0])),ib=new sh(new Uint32Array([this.buffer[2],0])),Sb=new sh(new Uint32Array([this.buffer[1],0])),wc=new sh(new Uint32Array([this.buffer[0],0])),Wc=new sh(new Uint32Array([p.buffer[3],
0])),Hd=new sh(new Uint32Array([p.buffer[2],0])),Ud=new sh(new Uint32Array([p.buffer[1],0]));p=new sh(new Uint32Array([p.buffer[0],0]));let He=sh.multiply(wc,p);this.buffer[0]=He.low();const zf=new sh(new Uint32Array([He.high(),0]));He=sh.multiply(Sb,p);zf.plus(He);He=sh.multiply(wc,Ud);zf.plus(He);this.buffer[1]=zf.low();this.buffer[3]=zf.lessThan(He)?1:0;this.buffer[2]=zf.high();return(new sh(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))).plus(sh.multiply(ib,p)).plus(sh.multiply(Sb,
Ud)).plus(sh.multiply(wc,Hd)),this.buffer[3]+=sh.multiply(na,p).plus(sh.multiply(ib,Ud)).plus(sh.multiply(Sb,Hd)).plus(sh.multiply(wc,Wc)).low(),this}plus(p){const na=new Uint32Array(4);return na[3]=this.buffer[3]+p.buffer[3]>>>0,na[2]=this.buffer[2]+p.buffer[2]>>>0,na[1]=this.buffer[1]+p.buffer[1]>>>0,na[0]=this.buffer[0]+p.buffer[0]>>>0,na[0]<this.buffer[0]>>>0&&++na[1],na[1]<this.buffer[1]>>>0&&++na[2],na[2]<this.buffer[2]>>>0&&++na[3],this.buffer[3]=na[3],this.buffer[2]=na[2],this.buffer[1]=na[1],
this.buffer[0]=na[0],this}hex(){return`${ma(this.buffer[3])} ${ma(this.buffer[2])} ${ma(this.buffer[1])} ${ma(this.buffer[0])}`}static multiply(p,na){return(new hi(new Uint32Array(p.buffer))).times(na)}static add(p,na){return(new hi(new Uint32Array(p.buffer))).plus(na)}static from(p,na=new Uint32Array(4)){return hi.fromString("string"==typeof p?p:p.toString(),na)}static fromNumber(p,na=new Uint32Array(4)){return hi.fromString(p.toString(),na)}static fromString(p,na=new Uint32Array(4)){const ib=p.startsWith("-"),
Sb=p.length;na=new hi(na);for(let wc=ib?1:0;wc<Sb;){const Wc=8<Sb-wc?8:Sb-wc,Hd=new hi(new Uint32Array([parseInt(p.substr(wc,Wc),10),0,0,0])),Ud=new hi(new Uint32Array([fj[Wc],0,0,0]));na.times(Ud);na.plus(Hd);wc+=Wc}return ib?na.negate():na}static convertArray(p){const na=new Uint32Array(4*p.length);for(let ib=-1,Sb=p.length;++ib<Sb;)hi.from(p[ib],new Uint32Array(na.buffer,na.byteOffset+16*ib,4));return na}}class ii extends xg{constructor(p,na,ib,Sb){super();this.buffersIndex=this.nodesIndex=-1;
this.bytes=p;this.nodes=na;this.buffers=ib;this.dictionaries=Sb}visit(p){return super.visit(p instanceof ph?p.type:p)}visitNull(p,{length:na}=this.nextFieldNode()){return Ef.Null(p,0,na)}visitBool(p,{length:na,nullCount:ib}=this.nextFieldNode()){return Ef.Bool(p,0,na,ib,this.readNullBitmap(p,ib),this.readData(p))}visitInt(p,{length:na,nullCount:ib}=this.nextFieldNode()){return Ef.Int(p,0,na,ib,this.readNullBitmap(p,ib),this.readData(p))}visitFloat(p,{length:na,nullCount:ib}=this.nextFieldNode()){return Ef.Float(p,
0,na,ib,this.readNullBitmap(p,ib),this.readData(p))}visitUtf8(p,{length:na,nullCount:ib}=this.nextFieldNode()){return Ef.Utf8(p,0,na,ib,this.readNullBitmap(p,ib),this.readOffsets(p),this.readData(p))}visitBinary(p,{length:na,nullCount:ib}=this.nextFieldNode()){return Ef.Binary(p,0,na,ib,this.readNullBitmap(p,ib),this.readOffsets(p),this.readData(p))}visitFixedSizeBinary(p,{length:na,nullCount:ib}=this.nextFieldNode()){return Ef.FixedSizeBinary(p,0,na,ib,this.readNullBitmap(p,ib),this.readData(p))}visitDate(p,
{length:na,nullCount:ib}=this.nextFieldNode()){return Ef.Date(p,0,na,ib,this.readNullBitmap(p,ib),this.readData(p))}visitTimestamp(p,{length:na,nullCount:ib}=this.nextFieldNode()){return Ef.Timestamp(p,0,na,ib,this.readNullBitmap(p,ib),this.readData(p))}visitTime(p,{length:na,nullCount:ib}=this.nextFieldNode()){return Ef.Time(p,0,na,ib,this.readNullBitmap(p,ib),this.readData(p))}visitDecimal(p,{length:na,nullCount:ib}=this.nextFieldNode()){return Ef.Decimal(p,0,na,ib,this.readNullBitmap(p,ib),this.readData(p))}visitList(p,
{length:na,nullCount:ib}=this.nextFieldNode()){return Ef.List(p,0,na,ib,this.readNullBitmap(p,ib),this.readOffsets(p),this.visit(p.children[0]))}visitStruct(p,{length:na,nullCount:ib}=this.nextFieldNode()){return Ef.Struct(p,0,na,ib,this.readNullBitmap(p,ib),this.visitMany(p.children))}visitUnion(p){return p.mode===Wd.Sparse?this.visitSparseUnion(p):this.visitDenseUnion(p)}visitDenseUnion(p,{length:na,nullCount:ib}=this.nextFieldNode()){return Ef.Union(p,0,na,ib,this.readNullBitmap(p,ib),this.readTypeIds(p),
this.readOffsets(p),this.visitMany(p.children))}visitSparseUnion(p,{length:na,nullCount:ib}=this.nextFieldNode()){return Ef.Union(p,0,na,ib,this.readNullBitmap(p,ib),this.readTypeIds(p),this.visitMany(p.children))}visitDictionary(p,{length:na,nullCount:ib}=this.nextFieldNode()){return Ef.Dictionary(p,0,na,ib,this.readNullBitmap(p,ib),this.readData(p.indices),this.readDictionary(p))}visitInterval(p,{length:na,nullCount:ib}=this.nextFieldNode()){return Ef.Interval(p,0,na,ib,this.readNullBitmap(p,ib),
this.readData(p))}visitFixedSizeList(p,{length:na,nullCount:ib}=this.nextFieldNode()){return Ef.FixedSizeList(p,0,na,ib,this.readNullBitmap(p,ib),this.visit(p.children[0]))}visitMap(p,{length:na,nullCount:ib}=this.nextFieldNode()){return Ef.Map(p,0,na,ib,this.readNullBitmap(p,ib),this.readOffsets(p),this.visit(p.children[0]))}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(p,na,ib=this.nextBufferRange()){return 0<na&&this.readData(p,
ib)||new Uint8Array(0)}readOffsets(p,na){return this.readData(p,na)}readTypeIds(p,na){return this.readData(p,na)}readData(p,{length:na,offset:ib}=this.nextBufferRange()){return this.bytes.subarray(ib,ib+na)}readDictionary(p){return this.dictionaries.get(p.id)}}class Gj extends ii{constructor(p,na,ib,Sb){super(new Uint8Array(0),na,ib,Sb);this.sources=p}readNullBitmap(p,na,{offset:ib}=this.nextBufferRange()){return 0>=na?new Uint8Array(0):Y(this.sources[ib])}readOffsets(p,{offset:na}=this.nextBufferRange()){return v(Uint8Array,
v(Int32Array,this.sources[na]))}readTypeIds(p,{offset:na}=this.nextBufferRange()){return v(Uint8Array,v(p.ArrayType,this.sources[na]))}readData(p,{offset:na}=this.nextBufferRange()){const {sources:ib}=this;return ce.isTimestamp(p)||(ce.isInt(p)||ce.isTime(p))&&64===p.bitWidth||ce.isDate(p)&&p.unit===ue.MILLISECOND?v(Uint8Array,uh.convertArray(ib[na])):ce.isDecimal(p)?v(Uint8Array,hi.convertArray(ib[na])):ce.isBinary(p)||ce.isFixedSizeBinary(p)?function(Sb){Sb=Sb.join("");const wc=new Uint8Array(Sb.length/
2);for(let Wc=0;Wc<Sb.length;Wc+=2)wc[Wc>>1]=parseInt(Sb.substr(Wc,2),16);return wc}(ib[na]):ce.isBool(p)?Y(ib[na]):ce.isUtf8(p)?Ye.encode(ib[na].join("")):v(Uint8Array,v(p.ArrayType,ib[na].map(Sb=>+Sb)))}}const Ih=Symbol.for("parent"),nj=Symbol.for("rowIndex"),hj=Symbol.for("keyToIdx"),ji=Symbol.for("idxToVal"),ek=Symbol.for("nodejs.util.inspect.custom");class Uj{constructor(p,na){this[Ih]=p;this.size=na}entries(){return this[Symbol.iterator]()}has(p){return void 0!==this.get(p)}get(p){let na;if(null!=
p){const ib=this[hj]||(this[hj]=new Map);let Sb=ib.get(p);void 0!==Sb?(p=this[ji]||(this[ji]=Array(this.size)),void 0!==(na=p[Sb])||(p[Sb]=na=this.getValue(Sb))):-1<(Sb=this.getIndex(p))&&(ib.set(p,Sb),p=this[ji]||(this[ji]=Array(this.size)),void 0!==(na=p[Sb])||(p[Sb]=na=this.getValue(Sb)))}return na}set(p,na){if(null!=p){const ib=this[hj]||(this[hj]=new Map);let Sb=ib.get(p);if(void 0===Sb&&ib.set(p,Sb=this.getIndex(p)),-1<Sb)(this[ji]||(this[ji]=Array(this.size)))[Sb]=this.setValue(Sb,na)}return this}clear(){throw Error(`Clearing ${this[Symbol.toStringTag]} not supported.`);
}delete(p){throw Error(`Deleting ${this[Symbol.toStringTag]} values not supported.`);}*[Symbol.iterator](){const p=this.keys(),na=this.values(),ib=this[hj]||(this[hj]=new Map),Sb=this[ji]||(this[ji]=Array(this.size));for(let wc,Wc,Hd,Ud,He=0;!(Hd=p.next()).done&&!(Ud=na.next()).done;++He)wc=Hd.value,Wc=Ud.value,Sb[He]=Wc,ib.has(wc)||ib.set(wc,He),yield[wc,Wc]}forEach(p,na){const ib=this.keys(),Sb=this.values(),wc=void 0===na?p:(Ud,He,zf)=>p.call(na,Ud,He,zf),Wc=this[hj]||(this[hj]=new Map),Hd=this[ji]||
(this[ji]=Array(this.size));for(let Ud,He,zf,mg,Og=0;!(zf=ib.next()).done&&!(mg=Sb.next()).done;++Og)Ud=zf.value,He=mg.value,Hd[Og]=He,Wc.has(Ud)||Wc.set(Ud,Og),wc(He,Ud,this)}toArray(){return[...this.values()]}toJSON(){const p={};return this.forEach((na,ib)=>p[ib]=na),p}inspect(){return this.toString()}[ek](){return this.toString()}toString(){const p=[];return this.forEach((na,ib)=>{ib=fa(ib);na=fa(na);p.push(`${ib}: ${na}`)}),`{ ${p.join(", ")} }`}}Uj[Symbol.toStringTag]=(p=>(Object.defineProperties(p,
{size:{writable:!0,enumerable:!1,configurable:!1,value:0},[Ih]:{writable:!0,enumerable:!1,configurable:!1,value:null},[nj]:{writable:!0,enumerable:!1,configurable:!1,value:-1}}),p[Symbol.toStringTag]="Row"))(Uj.prototype);class Jk extends Uj{constructor(p){return super(p,p.length),Fk(this)}keys(){return this[Ih].getChildAt(0)[Symbol.iterator]()}values(){return this[Ih].getChildAt(1)[Symbol.iterator]()}getKey(p){return this[Ih].getChildAt(0).get(p)}getIndex(p){return this[Ih].getChildAt(0).indexOf(p)}getValue(p){return this[Ih].getChildAt(1).get(p)}setValue(p,
na){this[Ih].getChildAt(1).set(p,na)}}class Hj extends Uj{constructor(p){return super(p,p.type.children.length),kj(this)}*keys(){for(const p of this[Ih].type.children)yield p.name}*values(){for(const p of this[Ih].type.children)yield this[p.name]}getKey(p){return this[Ih].type.children[p].name}getIndex(p){return this[Ih].type.children.findIndex(na=>na.name===p)}getValue(p){return this[Ih].getChildAt(p).get(this[nj])}setValue(p,na){return this[Ih].getChildAt(p).set(this[nj],na)}}Object.setPrototypeOf(Uj.prototype,
Map.prototype);const kj=(()=>{const p={enumerable:!0,configurable:!1,get:null,set:null};return na=>{let ib=-1;const Sb=na[hj]||(na[hj]=new Map),wc=Hd=>function(){return this.get(Hd)},Wc=Hd=>function(Ud){return this.set(Hd,Ud)};for(const Hd of na.keys())Sb.set(Hd,++ib),p.get=wc(Hd),p.set=Wc(Hd),Object.prototype.hasOwnProperty.call(na,Hd)||(p.enumerable=!0,Object.defineProperty(na,Hd,p)),Object.prototype.hasOwnProperty.call(na,ib)||(p.enumerable=!1,Object.defineProperty(na,ib,p));return p.get=p.set=
null,na}})(),Fk=(()=>{if("undefined"==typeof Proxy)return kj;const p=Uj.prototype.has,na=Uj.prototype.get,ib=Uj.prototype.set,Sb=Uj.prototype.getKey,wc={isExtensible:()=>!1,deleteProperty:()=>!1,preventExtensions:()=>!0,ownKeys:Wc=>[...Wc.keys()].map(Hd=>""+Hd),has(Wc,Hd){switch(Hd){case "getKey":case "getIndex":case "getValue":case "setValue":case "toArray":case "toJSON":case "inspect":case "constructor":case "isPrototypeOf":case "propertyIsEnumerable":case "toString":case "toLocaleString":case "valueOf":case "size":case "has":case "get":case "set":case "clear":case "delete":case "keys":case "values":case "entries":case "forEach":case "__proto__":case "__defineGetter__":case "__defineSetter__":case "hasOwnProperty":case "__lookupGetter__":case "__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:case Ih:case nj:case ji:case hj:case ek:return!0}return"number"!=
typeof Hd||Wc.has(Hd)||(Hd=Wc.getKey(Hd)),Wc.has(Hd)},get(Wc,Hd,Ud){switch(Hd){case "getKey":case "getIndex":case "getValue":case "setValue":case "toArray":case "toJSON":case "inspect":case "constructor":case "isPrototypeOf":case "propertyIsEnumerable":case "toString":case "toLocaleString":case "valueOf":case "size":case "has":case "get":case "set":case "clear":case "delete":case "keys":case "values":case "entries":case "forEach":case "__proto__":case "__defineGetter__":case "__defineSetter__":case "hasOwnProperty":case "__lookupGetter__":case "__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:case Ih:case nj:case ji:case hj:case ek:return Reflect.get(Wc,
Hd,Ud)}return"number"!=typeof Hd||p.call(Ud,Hd)||(Hd=Sb.call(Ud,Hd)),na.call(Ud,Hd)},set(Wc,Hd,Ud,He){switch(Hd){case Ih:case nj:case ji:case hj:return Reflect.set(Wc,Hd,Ud,He);case "getKey":case "getIndex":case "getValue":case "setValue":case "toArray":case "toJSON":case "inspect":case "constructor":case "isPrototypeOf":case "propertyIsEnumerable":case "toString":case "toLocaleString":case "valueOf":case "size":case "has":case "get":case "set":case "clear":case "delete":case "keys":case "values":case "entries":case "forEach":case "__proto__":case "__defineGetter__":case "__defineSetter__":case "hasOwnProperty":case "__lookupGetter__":case "__lookupSetter__":case Symbol.iterator:case Symbol.toStringTag:return!1}return"number"!=
typeof Hd||p.call(He,Hd)||(Hd=Sb.call(He,Hd)),!!p.call(He,Hd)&&!!ib.call(He,Hd,Ud)}};return Wc=>new Proxy(Wc,wc)})();let wh;const gj=zg?hg(0):0,ik=p=>p!=p,Mi=Array.isArray,Kk=(p,[na,ib],Sb)=>(p[0][Sb]=na,p[1][Sb]=ib,p);class xj{constructor(p){this.chunks=p;this.chunkIndex=0;this.chunkIterator=this.getChunkIterator()}next(){for(;this.chunkIndex<this.chunks.length;){const p=this.chunkIterator.next();if(!p.done)return p;++this.chunkIndex<this.chunks.length&&(this.chunkIterator=this.getChunkIterator())}return{done:!0,
value:null}}getChunkIterator(){return this.chunks[this.chunkIndex][Symbol.iterator]()}[Symbol.iterator](){return this}}class Rh extends Qc{constructor(p,na=[],ib=function(Sb){const wc=new Uint32Array((Sb||[]).length+1);let Wc=wc[0]=0;const Hd=wc.length;for(let Ud=0;++Ud<Hd;)wc[Ud]=Wc+=Sb[Ud-1].length;return wc}(na)){super();this._nullCount=-1;this._type=p;this._chunks=na;this._chunkOffsets=ib;this._length=ib[ib.length-1];this._numChildren=(this._type.children||[]).length}static flatten(...p){return Mb(Qc,
p,[],0)}static concat(...p){p=Rh.flatten(...p);return new Rh(p[0].type,p)}get type(){return this._type}get length(){return this._length}get chunks(){return this._chunks}get typeId(){return this._type.typeId}get VectorName(){return`Chunked<${this._type}>`}get data(){return this._chunks[0]?this._chunks[0].data:null}get ArrayType(){return this._type.ArrayType}get numChildren(){return this._numChildren}get stride(){return this._chunks[0]?this._chunks[0].stride:1}get byteLength(){return this._chunks.reduce((p,
na)=>p+na.byteLength,0)}get nullCount(){let p=this._nullCount;return 0>p&&(this._nullCount=p=this._chunks.reduce((na,{nullCount:ib})=>na+ib,0)),p}get indices(){if(ce.isDictionary(this._type)){if(!this._indices){const p=this._chunks;this._indices=1===p.length?p[0].indices:Rh.concat(...p.map(na=>na.indices))}return this._indices}return null}get dictionary(){return ce.isDictionary(this._type)?this._chunks[this._chunks.length-1].data.dictionary:null}[Symbol.iterator](){return new xj(this._chunks)}clone(p=
this._chunks){return new Rh(this._type,p)}concat(...p){return this.clone(Rh.flatten(this,...p))}slice(p,na){return Da(this,p,na,this._sliceInternal)}getChildAt(p){if(0>p||p>=this._numChildren)return null;const na=this._children||(this._children=[]);let ib,Sb,wc;return(ib=na[p])?ib:(Sb=(this._type.children||[])[p])&&(wc=this._chunks.map(Wc=>Wc.getChildAt(p)).filter(Wc=>null!=Wc),0<wc.length)?na[p]=new Rh(Sb.type,wc):null}search(p,na){const ib=this._chunkOffsets;let Sb=ib.length-1;if(0>p||p>=ib[Sb])return null;
if(1>=Sb)return na?na(this,0,p):[0,p];let wc=0,Wc=0,Hd;do{if(wc+1===Sb)return na?na(this,wc,p-Wc):[wc,p-Wc];Hd=wc+(Sb-wc)/2|0;p>=ib[Hd]?wc=Hd:Sb=Hd}while(p<ib[Sb]&&p>=(Wc=ib[wc]));return null}isValid(p){return!!this.search(p,this.isValidInternal)}get(p){return this.search(p,this.getInternal)}set(p,na){this.search(p,({chunks:ib},Sb,wc)=>ib[Sb].set(wc,na))}indexOf(p,na){return na&&"number"==typeof na?this.search(na,(ib,Sb,wc)=>this.indexOfInternal(ib,Sb,wc,p)):this.indexOfInternal(this,0,Math.max(0,
na||0),p)}toArray(){var {chunks:p}=this;const na=p.length;var ib=this._type.ArrayType;if(0>=na)return new ib(0);if(1>=na)return p[0].toArray();let Sb=0;const wc=Array(na);for(let Wc=-1;++Wc<na;)Sb+=(wc[Wc]=p[Wc].toArray()).length;ib!==wc[0].constructor&&(ib=wc[0].constructor);p=new ib(Sb);ib=ib===Array?vi:Ni;for(let Wc=-1,Hd=0;++Wc<na;)Hd=ib(wc[Wc],p,Hd);return p}getInternal({_chunks:p},na,ib){return p[na].get(ib)}isValidInternal({_chunks:p},na,ib){return p[na].isValid(ib)}indexOfInternal({_chunks:p},
na,ib,Sb){--na;const wc=p.length;var Wc=ib;for(ib=0;++na<wc;){if(~(Wc=p[na].indexOf(Sb,Wc)))return ib+Wc;Wc=0;ib+=p[na].length}return-1}_sliceInternal(p,na,ib){const Sb=[],{chunks:wc,_chunkOffsets:Wc}=p;for(let Hd=-1,Ud=wc.length;++Hd<Ud;){const He=wc[Hd],zf=He.length,mg=Wc[Hd];if(mg>=ib)break;na>=mg+zf||(mg>=na&&mg+zf<=ib?Sb.push(He):Sb.push(He.slice(Math.max(0,na-mg),Math.min(ib-mg,zf))))}return p.clone(Sb)}}const Ni=(p,na,ib)=>(na.set(p,ib),ib+p.length),vi=(p,na,ib)=>{for(let Sb=-1,wc=p.length;++Sb<
wc;)na[ib++]=p[Sb];return ib};class Wf extends Rh{constructor(p,na=[],ib){if(na=Rh.flatten(...na),super(p.type,na,ib),this._field=p,1===na.length&&!(this instanceof Dj))return new Dj(p,na[0],this._chunkOffsets)}static new(...p){let [na,ib,...Sb]=p;"string"==typeof na||na instanceof ph||(ib=na,na="");p=Rh.flatten(Array.isArray(ib)?[...ib,...Sb]:ib instanceof Qc?[ib,...Sb]:[Qc.new(ib,...Sb)]);"string"==typeof na?na=new ph(na,p[0].data.type,!0):!na.nullable&&p.some(({nullCount:wc})=>0<wc)&&(na=na.clone({nullable:!0}));
return new Wf(na,p)}get field(){return this._field}get name(){return this._field.name}get nullable(){return this._field.nullable}get metadata(){return this._field.metadata}clone(p=this._chunks){return new Wf(this._field,p)}getChildAt(p){if(0>p||p>=this.numChildren)return null;const na=this._children||(this._children=[]);let ib,Sb,wc;return(ib=na[p])?ib:(Sb=(this.type.children||[])[p])&&(wc=this._chunks.map(Wc=>Wc.getChildAt(p)).filter(Wc=>null!=Wc),0<wc.length)?na[p]=new Wf(Sb,wc):null}}class Dj extends Wf{constructor(p,
na,ib){super(p,[na],ib);this._chunk=na}search(p,na){return na?na(this,0,p):[0,p]}isValid(p){return this._chunk.isValid(p)}get(p){return this._chunk.get(p)}set(p,na){this._chunk.set(p,na)}indexOf(p,na){return this._chunk.indexOf(p,na)}}var Dk=Ad.Long;const Ci=new class extends xg{visit(p,na){return null==p||null==na?void 0:super.visit(p,na)}visitNull(p,na){return Mc.startNull(na),Mc.endNull(na)}visitInt(p,na){return Xe.startInt(na),Xe.addBitWidth(na,p.bitWidth),Xe.addIsSigned(na,p.isSigned),Xe.endInt(na)}visitFloat(p,
na){return Ed.startFloatingPoint(na),Ed.addPrecision(na,p.precision),Ed.endFloatingPoint(na)}visitBinary(p,na){return og.startBinary(na),og.endBinary(na)}visitBool(p,na){return Uf.startBool(na),Uf.endBool(na)}visitUtf8(p,na){return kf.startUtf8(na),kf.endUtf8(na)}visitDecimal(p,na){return dg.startDecimal(na),dg.addScale(na,p.scale),dg.addPrecision(na,p.precision),dg.endDecimal(na)}visitDate(p,na){return tg.startDate(na),tg.addUnit(na,p.unit),tg.endDate(na)}visitTime(p,na){return fh.startTime(na),
fh.addUnit(na,p.unit),fh.addBitWidth(na,p.bitWidth),fh.endTime(na)}visitTimestamp(p,na){const ib=p.timezone&&na.createString(p.timezone)||void 0;return sb.startTimestamp(na),sb.addUnit(na,p.unit),void 0!==ib&&sb.addTimezone(na,ib),sb.endTimestamp(na)}visitInterval(p,na){return tb.startInterval(na),tb.addUnit(na,p.unit),tb.endInterval(na)}visitList(p,na){return yd.startList(na),yd.endList(na)}visitStruct(p,na){return md.startStruct_(na),md.endStruct_(na)}visitUnion(p,na){Qe.startTypeIdsVector(na,p.typeIds.length);
const ib=Qe.createTypeIdsVector(na,p.typeIds);return Qe.startUnion(na),Qe.addMode(na,p.mode),Qe.addTypeIds(na,ib),Qe.endUnion(na)}visitDictionary(p,na){const ib=this.visit(p.indices,na);return Vb.startDictionaryEncoding(na),Vb.addId(na,new Dk(p.id,0)),Vb.addIsOrdered(na,p.isOrdered),void 0!==ib&&Vb.addIndexType(na,ib),Vb.endDictionaryEncoding(na)}visitFixedSizeBinary(p,na){return kg.startFixedSizeBinary(na),kg.addByteWidth(na,p.byteWidth),kg.endFixedSizeBinary(na)}visitFixedSizeList(p,na){return ne.startFixedSizeList(na),
ne.addListSize(na,p.listSize),ne.endFixedSizeList(na)}visitMap(p,na){return Le.startMap(na),Le.addKeysSorted(na,p.keysSorted),Le.endMap(na)}};var Hi=Ad.Long,wk=Ad.Builder,Di=Ad.ByteBuffer;class Dh{constructor(p,na,ib,Sb){this._version=na;this._headerType=ib;this.body=new Uint8Array(0);Sb&&(this._createHeader=()=>Sb);this._bodyLength="number"==typeof p?p:p.low}static fromJSON(p,na){const ib=new Dh(0,Cc.V4,na);return ib._createHeader=function(Sb,wc){return()=>{switch(wc){case vb.Schema:return Xg.fromJSON(Sb);
case vb.RecordBatch:return bi.fromJSON(Sb);case vb.DictionaryBatch:return wb.fromJSON(Sb)}throw Error(`Unrecognized Message type: { name: ${vb[wc]}, type: ${wc} }`);}}(p,na),ib}static decode(p){p=new Di(v(Uint8Array,p));p=wd.getRootAsMessage(p);var na=p.bodyLength();const ib=p.version(),Sb=p.headerType();na=new Dh(na,ib,Sb);return na._createHeader=function(wc,Wc){return()=>{switch(Wc){case vb.Schema:return Xg.decode(wc.header(new Fc));case vb.RecordBatch:return bi.decode(wc.header(new fd),wc.version());
case vb.DictionaryBatch:return wb.decode(wc.header(new mc),wc.version())}throw Error(`Unrecognized Message type: { name: ${vb[Wc]}, type: ${Wc} }`);}}(p,Sb),na}static encode(p){const na=new wk;let ib=-1;return p.isSchema()?ib=Xg.encode(na,p.header()):p.isRecordBatch()?ib=bi.encode(na,p.header()):p.isDictionaryBatch()&&(ib=wb.encode(na,p.header())),wd.startMessage(na),wd.addVersion(na,Cc.V4),wd.addHeader(na,ib),wd.addHeaderType(na,p.headerType),wd.addBodyLength(na,new Hi(p.bodyLength,0)),wd.finishMessageBuffer(na,
wd.endMessage(na)),na.asUint8Array()}static from(p,na=0){if(p instanceof Xg)return new Dh(0,Cc.V4,vb.Schema,p);if(p instanceof bi)return new Dh(na,Cc.V4,vb.RecordBatch,p);if(p instanceof wb)return new Dh(na,Cc.V4,vb.DictionaryBatch,p);throw Error("Unrecognized Message header: "+p);}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===
vb.Schema}isRecordBatch(){return this.headerType===vb.RecordBatch}isDictionaryBatch(){return this.headerType===vb.DictionaryBatch}}class bi{constructor(p,na,ib){this._nodes=na;this._buffers=ib;this._length="number"==typeof p?p:p.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class wb{constructor(p,na,ib=!1){this._data=p;this._isDelta=ib;this._id="number"==typeof na?na:na.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}
class Yb{constructor(p,na){this.offset="number"==typeof p?p:p.low;this.length="number"==typeof na?na:na.low}}class oc{constructor(p,na){this.length="number"==typeof p?p:p.low;this.nullCount="number"==typeof na?na:na.low}}ph.encode=function(p,na){let ib=-1,Sb=-1,wc=-1;var Wc=na.type;let Hd=na.typeId;ce.isDictionary(Wc)?(Hd=Wc.dictionary.typeId,wc=Ci.visit(Wc,p),Sb=Ci.visit(Wc.dictionary,p)):Sb=Ci.visit(Wc,p);Wc=(Wc.children||[]).map(He=>ph.encode(p,He));Wc=hc.createChildrenVector(p,Wc);const Ud=na.metadata&&
0<na.metadata.size?hc.createCustomMetadataVector(p,[...na.metadata].map(([He,zf])=>{He=p.createString(""+He);zf=p.createString(""+zf);return Lb.startKeyValue(p),Lb.addKey(p,He),Lb.addValue(p,zf),Lb.endKeyValue(p)})):-1;na.name&&(ib=p.createString(na.name));hc.startField(p);hc.addType(p,Sb);hc.addTypeType(p,Hd);hc.addChildren(p,Wc);hc.addNullable(p,!!na.nullable);-1!==ib&&hc.addName(p,ib);-1!==wc&&hc.addDictionary(p,wc);-1!==Ud&&hc.addCustomMetadata(p,Ud);return hc.endField(p)};ph.decode=function(p,
na){let ib,Sb,wc,Wc,Hd,Ud;na&&(Ud=p.dictionary())?na.has(ib=Ud.id().low)?(Wc=(Wc=Ud.indexType())?Eb(Wc):new ec,Hd=new Mg(na.get(ib),Wc,ib,Ud.isOrdered()),Sb=new ph(p.name(),Hd,p.nullable(),Jb(p))):(Wc=(Wc=Ud.indexType())?Eb(Wc):new ec,na.set(ib,wc=Db(p,mb(p,na))),Hd=new Mg(wc,Wc,ib,Ud.isOrdered()),Sb=new ph(p.name(),Hd,p.nullable(),Jb(p))):(wc=Db(p,mb(p,na)),Sb=new ph(p.name(),wc,p.nullable(),Jb(p)));return Sb||null};ph.fromJSON=function(p,na){let ib,Sb,wc,Wc,Hd,Ud;return na&&(Wc=p.dictionary)?na.has(ib=
Wc.id)?(Sb=(Sb=Wc.indexType)?new Ua(Sb.isSigned,Sb.bitWidth):new ec,Ud=new Mg(na.get(ib),Sb,ib,Wc.isOrdered),wc=new ph(p.name,Ud,p.nullable,Hb(p.customMetadata))):(Sb=(Sb=Wc.indexType)?new Ua(Sb.isSigned,Sb.bitWidth):new ec,na.set(ib,Hd=zb(p,xa(p,na))),Ud=new Mg(Hd,Sb,ib,Wc.isOrdered),wc=new ph(p.name,Ud,p.nullable,Hb(p.customMetadata))):(Hd=zb(p,xa(p,na)),wc=new ph(p.name,Hd,p.nullable,Hb(p.customMetadata))),wc||null};Xg.encode=function(p,na){var ib=na.fields.map(Sb=>ph.encode(p,Sb));Fc.startFieldsVector(p,
ib.length);ib=Fc.createFieldsVector(p,ib);na=na.metadata&&0<na.metadata.size?Fc.createCustomMetadataVector(p,[...na.metadata].map(([Sb,wc])=>{Sb=p.createString(""+Sb);wc=p.createString(""+wc);return Lb.startKeyValue(p),Lb.addKey(p,Sb),Lb.addValue(p,wc),Lb.endKeyValue(p)})):-1;Fc.startSchema(p);Fc.addFields(p,ib);Fc.addEndianness(p,tc?rf.Little:rf.Big);-1!==na&&Fc.addCustomMetadata(p,na);return Fc.endSchema(p)};Xg.decode=function(p,na=new Map){const ib=[];for(let Sb,wc=-1,Wc=-1,Hd=p.fieldsLength();++wc<
Hd;)(Sb=p.fields(wc))&&(ib[++Wc]=ph.decode(Sb,na));return new Xg(ib,Jb(p),na)};Xg.fromJSON=function(p,na=new Map){return new Xg(function(ib,Sb){return(ib.fields||[]).filter(Boolean).map(wc=>ph.fromJSON(wc,Sb))}(p,na),Hb(p.customMetadata),na)};bi.encode=function(p,na){var ib=na.nodes||[],Sb=na.buffers||[];fd.startNodesVector(p,ib.length);ib.slice().reverse().forEach(wc=>oc.encode(p,wc));ib=p.endVector();fd.startBuffersVector(p,Sb.length);Sb.slice().reverse().forEach(wc=>Yb.encode(p,wc));Sb=p.endVector();
return fd.startRecordBatch(p),fd.addLength(p,new Hi(na.length,0)),fd.addNodes(p,ib),fd.addBuffers(p,Sb),fd.endRecordBatch(p)};bi.decode=function(p,na=Cc.V4){return new bi(p.length(),function(ib){const Sb=[];for(let wc,Wc=-1,Hd=-1,Ud=ib.nodesLength();++Wc<Ud;)(wc=ib.nodes(Wc))&&(Sb[++Hd]=oc.decode(wc));return Sb}(p),function(ib,Sb){const wc=[];for(let Wc,Hd=-1,Ud=-1,He=ib.buffersLength();++Hd<He;)(Wc=ib.buffers(Hd))&&(Sb<Cc.V4&&(Wc.bb_pos+=8*(Hd+1)),wc[++Ud]=Yb.decode(Wc));return wc}(p,na))};bi.fromJSON=
ra;wb.encode=function(p,na){const ib=bi.encode(p,na.data);return mc.startDictionaryBatch(p),mc.addId(p,new Hi(na.id,0)),mc.addIsDelta(p,na.isDelta),mc.addData(p,ib),mc.endDictionaryBatch(p)};wb.decode=function(p,na=Cc.V4){return new wb(bi.decode(p.data(),na),p.id(),p.isDelta())};wb.fromJSON=function(p){return new wb(ra(p.data),p.id,p.isDelta)};oc.encode=function(p,na){return Yc.createFieldNode(p,new Hi(na.length,0),new Hi(na.nullCount,0))};oc.decode=function(p){return new oc(p.length(),p.nullCount())};
Yb.encode=function(p,na){return dc.createBuffer(p,new Hi(na.offset,0),new Hi(na.length,0))};Yb.decode=function(p){return new Yb(p.offset(),p.length())};const tc=function(){const p=new ArrayBuffer(2);return(new DataView(p)).setInt16(0,256,!0),256===(new Int16Array(p))[0]}();var xc=Ad.ByteBuffer;const qa=p=>`Expected ${vb[p]} Message in stream, but was null or length 0.`,ka=p=>`Header pointer of flatbuffer-encoded ${vb[p]} Message is null or length 0.`,Ja=(p,na)=>`Expected to read ${p} metadata bytes, but only read ${na}.`,
G=(p,na)=>`Expected to read ${p} bytes for message body, but only read ${na}.`;class ca{constructor(p){this.source=p instanceof rg?p:new rg(p)}[Symbol.iterator](){return this}next(){let p;return(p=this.readMetadataLength()).done||-1===p.value&&(p=this.readMetadataLength()).done||(p=this.readMetadata(p.value)).done?af:p}throw(p){return this.source.throw(p)}return(p){return this.source.return(p)}readMessage(p){let na;if((na=this.next()).done)return null;if(null!=p&&na.value.headerType!==p)throw Error(qa(p));
return na.value}readMessageBody(p){if(0>=p)return new Uint8Array(0);const na=v(Uint8Array,this.source.read(p));if(na.byteLength<p)throw Error(G(p,na.byteLength));return 0==na.byteOffset%8&&na.byteOffset+na.byteLength<=na.buffer.byteLength?na:na.slice()}readSchema(p=!1){const na=vb.Schema;var ib=this.readMessage(na);ib=ib&&ib.header();if(p&&!ib)throw Error(ka(na));return ib}readMetadataLength(){var p=this.source.read(4);p=(p=p&&new xc(p))&&p.readInt32(0)||0;return{done:0===p,value:p}}readMetadata(p){const na=
this.source.read(p);if(!na)return af;if(na.byteLength<p)throw Error(Ja(p,na.byteLength));return{done:!1,value:Dh.decode(na)}}}class ya{constructor(p,na){this.source=p instanceof mj?p:Ha(p)?new Fj(p,na):new mj(p)}[Symbol.asyncIterator](){return this}next(){return u(this,void 0,void 0,function*(){let p;return(p=yield this.readMetadataLength()).done||-1===p.value&&(p=yield this.readMetadataLength()).done||(p=yield this.readMetadata(p.value)).done?af:p})}throw(p){return u(this,void 0,void 0,function*(){return yield this.source.throw(p)})}return(p){return u(this,
void 0,void 0,function*(){return yield this.source.return(p)})}readMessage(p){return u(this,void 0,void 0,function*(){let na;if((na=yield this.next()).done)return null;if(null!=p&&na.value.headerType!==p)throw Error(qa(p));return na.value})}readMessageBody(p){return u(this,void 0,void 0,function*(){if(0>=p)return new Uint8Array(0);const na=v(Uint8Array,yield this.source.read(p));if(na.byteLength<p)throw Error(G(p,na.byteLength));return 0==na.byteOffset%8&&na.byteOffset+na.byteLength<=na.buffer.byteLength?
na:na.slice()})}readSchema(p=!1){return u(this,void 0,void 0,function*(){const na=vb.Schema;var ib=yield this.readMessage(na);ib=ib&&ib.header();if(p&&!ib)throw Error(ka(na));return ib})}readMetadataLength(){return u(this,void 0,void 0,function*(){var p=yield this.source.read(4);p=(p=p&&new xc(p))&&p.readInt32(0)||0;return{done:0===p,value:p}})}readMetadata(p){return u(this,void 0,void 0,function*(){const na=yield this.source.read(p);if(!na)return af;if(na.byteLength<p)throw Error(Ja(p,na.byteLength));
return{done:!1,value:Dh.decode(na)}})}}class Ka extends ca{constructor(p){super(new Uint8Array(0));this._schema=!1;this._body=[];this._dictionaryIndex=this._batchIndex=0;this._json=p instanceof jg?p:new jg(p)}next(){var {_json:p}=this;return this._schema?this._dictionaryIndex<p.dictionaries.length?(p=p.dictionaries[this._dictionaryIndex++],this._body=p.data.columns,{done:!1,value:Dh.fromJSON(p,vb.DictionaryBatch)}):this._batchIndex<p.batches.length?(p=p.batches[this._batchIndex++],this._body=p.columns,
{done:!1,value:Dh.fromJSON(p,vb.RecordBatch)}):(this._body=[],af):(this._schema=!0,{done:!1,value:Dh.fromJSON(p.schema,vb.Schema)})}readMessageBody(p){return function Sb(ib){return(ib||[]).reduce((wc,Wc)=>[...wc,...(Wc.VALIDITY&&[Wc.VALIDITY]||[]),...(Wc.TYPE&&[Wc.TYPE]||[]),...(Wc.OFFSET&&[Wc.OFFSET]||[]),...(Wc.DATA&&[Wc.DATA]||[]),...Sb(Wc.children)],[])}(this._body)}readMessage(p){let na;if((na=this.next()).done)return null;if(null!=p&&na.value.headerType!==p)throw Error(qa(p));return na.value}readSchema(){const p=
vb.Schema,na=this.readMessage(p),ib=na&&na.header();if(!na||!ib)throw Error(ka(p));return ib}}const ab=new Uint8Array(6);for(let p=0;6>p;p+=1)ab[p]="ARROW1".charCodeAt(p);const ob=ab.length,rb=ob+4,Fb=2*ob+4;class qb extends xg{compareSchemas(p,na){return p===na||na instanceof p.constructor&&this.compareManyFields(p.fields,na.fields)}compareManyFields(p,na){return p===na||Array.isArray(p)&&Array.isArray(na)&&p.length===na.length&&p.every((ib,Sb)=>this.compareFields(ib,na[Sb]))}compareFields(p,na){return p===
na||na instanceof p.constructor&&p.name===na.name&&p.nullable===na.nullable&&this.visit(p.type,na.type)}}qb.prototype.visitNull=Tc;qb.prototype.visitBool=Tc;qb.prototype.visitInt=ub;qb.prototype.visitInt8=ub;qb.prototype.visitInt16=ub;qb.prototype.visitInt32=ub;qb.prototype.visitInt64=ub;qb.prototype.visitUint8=ub;qb.prototype.visitUint16=ub;qb.prototype.visitUint32=ub;qb.prototype.visitUint64=ub;qb.prototype.visitFloat=Rc;qb.prototype.visitFloat16=Rc;qb.prototype.visitFloat32=Rc;qb.prototype.visitFloat64=
Rc;qb.prototype.visitUtf8=Tc;qb.prototype.visitBinary=Tc;qb.prototype.visitFixedSizeBinary=function(p,na){return p===na||jc(p,na)&&p.byteWidth===na.byteWidth};qb.prototype.visitDate=Gd;qb.prototype.visitDateDay=Gd;qb.prototype.visitDateMillisecond=Gd;qb.prototype.visitTimestamp=Kd;qb.prototype.visitTimestampSecond=Kd;qb.prototype.visitTimestampMillisecond=Kd;qb.prototype.visitTimestampMicrosecond=Kd;qb.prototype.visitTimestampNanosecond=Kd;qb.prototype.visitTime=Vd;qb.prototype.visitTimeSecond=Vd;
qb.prototype.visitTimeMillisecond=Vd;qb.prototype.visitTimeMicrosecond=Vd;qb.prototype.visitTimeNanosecond=Vd;qb.prototype.visitDecimal=Tc;qb.prototype.visitList=function(p,na){return p===na||jc(p,na)&&p.children.length===na.children.length&&Ub.compareManyFields(p.children,na.children)};qb.prototype.visitStruct=function(p,na){return p===na||jc(p,na)&&p.children.length===na.children.length&&Ub.compareManyFields(p.children,na.children)};qb.prototype.visitUnion=ze;qb.prototype.visitDenseUnion=ze;qb.prototype.visitSparseUnion=
ze;qb.prototype.visitDictionary=function(p,na){return p===na||jc(p,na)&&p.id===na.id&&p.isOrdered===na.isOrdered&&Ub.visit(p.indices,na.indices)&&Ub.visit(p.dictionary,na.dictionary)};qb.prototype.visitInterval=ee;qb.prototype.visitIntervalDayTime=ee;qb.prototype.visitIntervalYearMonth=ee;qb.prototype.visitFixedSizeList=function(p,na){return p===na||jc(p,na)&&p.listSize===na.listSize&&p.children.length===na.children.length&&Ub.compareManyFields(p.children,na.children)};qb.prototype.visitMap=function(p,
na){return p===na||jc(p,na)&&p.keysSorted===na.keysSorted&&p.children.length===na.children.length&&Ub.compareManyFields(p.children,na.children)};const Ub=new qb;class Zb extends xg{constructor(){super();this._byteLength=0;this._nodes=[];this._buffers=[];this._bufferRegions=[]}static assemble(...p){var na=new Zb;p=Gb(li,p,[],0);[na=na]=na.visitMany(p);return na}visit(p){if(!ce.isDictionary(p.type)){const {data:na,length:ib,nullCount:Sb}=p;if(2147483647<ib)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");
ce.isNull(p.type)||Bd.call(this,0>=Sb?new Uint8Array(0):r(na.offset,ib,na.nullBitmap));this.nodes.push(new oc(ib,Sb))}return super.visit(p)}visitNull(p){return this}visitDictionary(p){return this.visit(p.indices)}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}Zb.prototype.visitBool=function(p){let na;return p.nullCount>=p.length?Bd.call(this,new Uint8Array(0)):(na=p.values)instanceof Uint8Array?
Bd.call(this,r(p.offset,p.length,na)):Bd.call(this,Y(p))};Zb.prototype.visitInt=Ld;Zb.prototype.visitFloat=Ld;Zb.prototype.visitUtf8=fe;Zb.prototype.visitBinary=fe;Zb.prototype.visitFixedSizeBinary=Ld;Zb.prototype.visitDate=Ld;Zb.prototype.visitTimestamp=Ld;Zb.prototype.visitTime=Ld;Zb.prototype.visitDecimal=Ld;Zb.prototype.visitList=Ee;Zb.prototype.visitStruct=dd;Zb.prototype.visitUnion=function(p){const {type:na,length:ib,typeIds:Sb,valueOffsets:wc}=p;if(Bd.call(this,Sb),na.mode===Wd.Sparse)return dd.call(this,
p);if(na.mode===Wd.Dense){if(0>=p.offset)return Bd.call(this,wc),dd.call(this,p);var Wc=Sb.reduce((zf,mg)=>Math.max(zf,mg),Sb[0]);const Ud=new Int32Array(Wc+1);Wc=(new Int32Array(Wc+1)).fill(-1);var Hd=new Int32Array(ib);const He=A(-wc[0],ib,wc);for(let zf,mg,Og=-1;++Og<ib;)-1===(mg=Wc[zf=Sb[Og]])&&(mg=Wc[zf]=He[zf]),Hd[Og]=He[Og]-mg,++Ud[zf];Bd.call(this,Hd);for(let zf,mg=-1,Og=na.children.length;++mg<Og;)if(zf=p.getChildAt(mg))Hd=na.typeIds[mg],this.visit(zf.slice(Wc[Hd],Math.min(ib,Ud[Hd])))}return this};
Zb.prototype.visitInterval=Ld;Zb.prototype.visitFixedSizeList=Ee;Zb.prototype.visitMap=Ee;class Ec extends xg{visit(p){return null==p?void 0:super.visit(p)}visitNull({typeId:p}){return{name:Ge[p].toLowerCase()}}visitInt({typeId:p,bitWidth:na,isSigned:ib}){return{name:Ge[p].toLowerCase(),bitWidth:na,isSigned:ib}}visitFloat({typeId:p,precision:na}){return{name:Ge[p].toLowerCase(),precision:we[na]}}visitBinary({typeId:p}){return{name:Ge[p].toLowerCase()}}visitBool({typeId:p}){return{name:Ge[p].toLowerCase()}}visitUtf8({typeId:p}){return{name:Ge[p].toLowerCase()}}visitDecimal({typeId:p,
scale:na,precision:ib}){return{name:Ge[p].toLowerCase(),scale:na,precision:ib}}visitDate({typeId:p,unit:na}){return{name:Ge[p].toLowerCase(),unit:ue[na]}}visitTime({typeId:p,unit:na,bitWidth:ib}){return{name:Ge[p].toLowerCase(),unit:sd[na],bitWidth:ib}}visitTimestamp({typeId:p,timezone:na,unit:ib}){return{name:Ge[p].toLowerCase(),unit:sd[ib],timezone:na}}visitInterval({typeId:p,unit:na}){return{name:Ge[p].toLowerCase(),unit:Fe[na]}}visitList({typeId:p}){return{name:Ge[p].toLowerCase()}}visitStruct({typeId:p}){return{name:Ge[p].toLowerCase()}}visitUnion({typeId:p,
mode:na,typeIds:ib}){return{name:Ge[p].toLowerCase(),mode:Wd[na],typeIds:[...ib]}}visitDictionary(p){return this.visit(p.dictionary)}visitFixedSizeBinary({typeId:p,byteWidth:na}){return{name:Ge[p].toLowerCase(),byteWidth:na}}visitFixedSizeList({typeId:p,listSize:na}){return{name:Ge[p].toLowerCase(),listSize:na}}visitMap({typeId:p,keysSorted:na}){return{name:Ge[p].toLowerCase(),keysSorted:na}}}class n extends xg{static assemble(...p){return(new n).visitMany(Wb(li,p,[],0))}visit(p){const {data:na,name:ib,
length:Sb}=p,{offset:wc,nullCount:Wc,nullBitmap:Hd}=na;p=ce.isDictionary(p.type)?p.type.indices:p.type;const Ud=Object.assign([],na.buffers,{[ac.VALIDITY]:void 0});return Object.assign({name:ib,count:Sb,VALIDITY:ce.isNull(p)?void 0:0>=Wc?Array.from({length:Sb},()=>1):[...(new Xd(Hd,wc,Sb,null,ba))]},super.visit(Qc.new(na.clone(p,wc,Sb,0,Ud))))}visitNull(){return{}}visitBool({values:p,offset:na,length:ib}){return{DATA:[...(new Xd(p,na,ib,null,z))]}}visitInt(p){return{DATA:64>p.type.bitWidth?[...p.values]:
[...Dc(p.values,2)]}}visitFloat(p){return{DATA:[...p.values]}}visitUtf8(p){return{DATA:[...p],OFFSET:[...p.valueOffsets]}}visitBinary(p){return{DATA:[...nd(p)],OFFSET:[...p.valueOffsets]}}visitFixedSizeBinary(p){return{DATA:[...nd(p)]}}visitDate(p){return{DATA:p.type.unit===ue.DAY?[...p.values]:[...Dc(p.values,2)]}}visitTimestamp(p){return{DATA:[...Dc(p.values,2)]}}visitTime(p){return{DATA:p.type.unit<sd.MICROSECOND?[...p.values]:[...Dc(p.values,2)]}}visitDecimal(p){return{DATA:[...Dc(p.values,4)]}}visitList(p){return{OFFSET:[...p.valueOffsets],
children:p.type.children.map((na,ib)=>this.visit(new Wf(na,[p.getChildAt(ib)])))}}visitStruct(p){return{children:p.type.children.map((na,ib)=>this.visit(new Wf(na,[p.getChildAt(ib)])))}}visitUnion(p){return{TYPE:[...p.typeIds],OFFSET:p.type.mode===Wd.Dense?[...p.valueOffsets]:void 0,children:p.type.children.map((na,ib)=>this.visit(new Wf(na,[p.getChildAt(ib)])))}}visitInterval(p){return{DATA:[...p.values]}}visitFixedSizeList(p){return{children:p.type.children.map((na,ib)=>this.visit(new Wf(na,[p.getChildAt(ib)])))}}visitMap(p){return{OFFSET:[...p.valueOffsets],
children:p.type.children.map((na,ib)=>this.visit(new Wf(na,[p.getChildAt(ib)])))}}}class Q extends oe{constructor(p){super();this._position=0;this._started=!1;this._sink=new aj;this._schema=null;this._dictionaryBlocks=[];this._recordBatchBlocks=[];this._dictionaryDeltaOffsets=new Map;null!=p&&Object(p)===p||(p={autoDestroy:!0,writeLegacyIpcFormat:!1});this._autoDestroy="boolean"!=typeof p.autoDestroy||p.autoDestroy;this._writeLegacyIpcFormat="boolean"==typeof p.writeLegacyIpcFormat&&p.writeLegacyIpcFormat}static throughNode(p){throw Error('"throughNode" not available in this environment');
}static throughDOM(p,na){throw Error('"throughDOM" not available in this environment');}toString(p=!1){return this._sink.toString(p)}toUint8Array(p=!1){return this._sink.toUint8Array(p)}writeAll(p){return Tf(p)?p.then(na=>this.writeAll(na)):zc(p)?Qd(this,p):jd(this,p)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(p){return this._sink.toDOMStream(p)}toNodeStream(p){return this._sink.toNodeStream(p)}close(){return this.reset()._sink.close()}abort(p){return this.reset()._sink.abort(p)}finish(){return this._autoDestroy?
this.close():this.reset(this._sink,this._schema),this}reset(p=this._sink,na=null){if(p===this._sink||p instanceof aj)this._sink=p;else if(this._sink=new aj,p&&null!=p&&Object(p)===p&&wg(p.abort)&&wg(p.getWriter)&&!(p instanceof oe))this.toDOMStream({type:"bytes"}).pipeTo(p);else{var ib;if(ib=p)ib=null!=p&&Object(p)===p&&wg(p.end)&&wg(p.write)&&"boolean"==typeof p.writable&&!(p instanceof oe);ib&&this.toNodeStream({objectMode:!1}).pipe(p)}return this._started&&this._schema&&this._writeFooter(this._schema),
this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,na&&bd(na,this._schema)||(null===na?(this._position=0,this._schema=null):(this._started=!0,this._schema=na,this._writeSchema(na))),this}write(p){let na=null;if(!this._sink)throw Error("RecordBatchWriter is closed");if(null==p||p instanceof Uh&&!(na=p.schema)||p instanceof li&&!(na=p.schema))return this.finish()&&void 0;if(na&&!bd(na,this._schema)){if(this._started&&this._autoDestroy)return this.close();
this.reset(this._sink,na)}p instanceof li?p instanceof ij||this._writeRecordBatch(p):p instanceof Uh?this.writeAll(p.chunks):sg(p)&&this.writeAll(p)}_writeMessage(p,na=8){var ib=na-1;na=Dh.encode(p);const Sb=na.byteLength,wc=this._writeLegacyIpcFormat?4:8;ib=Sb+wc+ib&~ib;const Wc=ib-Sb-wc;return p.headerType===vb.RecordBatch?this._recordBatchBlocks.push(new Li(ib,p.bodyLength,this._position)):p.headerType===vb.DictionaryBatch&&this._dictionaryBlocks.push(new Li(ib,p.bodyLength,this._position)),this._writeLegacyIpcFormat||
this._write(Int32Array.of(-1)),this._write(Int32Array.of(ib-wc)),0<Sb&&this._write(na),this._writePadding(Wc)}_write(p){this._started&&(p=v(Uint8Array,p))&&0<p.byteLength&&(this._sink.write(p),this._position+=p.byteLength);return this}_writeSchema(p){return this._writeMessage(Dh.from(p))}_writeFooter(p){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(ab)}_writePadding(p){return 0<p?this._write(new Uint8Array(p)):this}_writeRecordBatch(p){const {byteLength:na,
nodes:ib,bufferRegions:Sb,buffers:wc}=Zb.assemble(p);var Wc=new bi(p.length,ib,Sb);Wc=Dh.from(Wc,na);return this._writeDictionaries(p)._writeMessage(Wc)._writeBodyBuffers(wc)}_writeDictionaryBatch(p,na,ib=!1){this._dictionaryDeltaOffsets.set(na,p.length+(this._dictionaryDeltaOffsets.get(na)||0));const {byteLength:Sb,nodes:wc,bufferRegions:Wc,buffers:Hd}=Zb.assemble(p);p=new bi(p.length,wc,Wc);na=new wb(p,na,ib);na=Dh.from(na,Sb);return this._writeMessage(na)._writeBodyBuffers(Hd)}_writeBodyBuffers(p){let na,
ib,Sb;for(let wc=-1,Wc=p.length;++wc<Wc;)(na=p[wc])&&0<(ib=na.byteLength)&&(this._write(na),0<(Sb=(ib+7&-8)-ib)&&this._writePadding(Sb));return this}_writeDictionaries(p){for(let [na,ib]of p.dictionaries)if(p=this._dictionaryDeltaOffsets.get(na)||0,0===p||0<(ib=ib.slice(p)).length){const Sb="chunks"in ib?ib.chunks:[ib];for(const wc of Sb)this._writeDictionaryBatch(wc,na,0<p),p+=wc.length}return this}}class ta extends Q{static writeAll(p,na){const ib=new ta(na);return Tf(p)?p.then(Sb=>ib.writeAll(Sb)):
zc(p)?Qd(ib,p):jd(ib,p)}}class pa extends Q{static writeAll(p){const na=new pa;return Tf(p)?p.then(ib=>na.writeAll(ib)):zc(p)?Qd(na,p):jd(na,p)}constructor(){super();this._autoDestroy=!0}_writeSchema(p){return this._writeMagic()._writePadding(2)}_writeFooter(p){const na=jk.encode(new jk(p,Cc.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(p)._write(na)._write(Int32Array.of(na.byteLength))._writeMagic()}}class Oa extends Q{constructor(){super();this._autoDestroy=!0;this._recordBatches=
[];this._dictionaries=[]}static writeAll(p){return(new Oa).writeAll(p)}_writeMessage(){return this}_writeFooter(p){return this}_writeSchema(p){return this._write('{\n  "schema": '+JSON.stringify({fields:p.fields.map(ae)},null,2))}_writeDictionaries(p){return 0<p.dictionaries.size&&this._dictionaries.push(p),this}_writeDictionaryBatch(p,na,ib=!1){return this._dictionaryDeltaOffsets.set(na,p.length+(this._dictionaryDeltaOffsets.get(na)||0)),this._write(0===this._dictionaryBlocks.length?"    ":",\n    "),
this._write(""+function(Sb,wc,Wc=!1){var Hd=new ph(""+wc,Sb.type,0<Sb.nullCount);Hd=n.assemble(new Wf(Hd,[Sb]));return JSON.stringify({id:wc,isDelta:Wc,data:{count:Sb.length,columns:Hd}},null,2)}(p,na,ib)),this._dictionaryBlocks.push(new Li(0,0,0)),this}_writeRecordBatch(p){return this._writeDictionaries(p),this._recordBatches.push(p),this}close(){if(0<this._dictionaries.length){this._write(',\n  "dictionaries": [\n');for(const na of this._dictionaries)super._writeDictionaries(na);this._write("\n  ]")}if(0<
this._recordBatches.length){for(let na=-1,ib=this._recordBatches.length;++na<ib;)this._write(0===na?',\n  "batches": [\n    ':",\n    "),this._write(""+(p=this._recordBatches[na],JSON.stringify({count:p.length,columns:n.assemble(p)},null,2))),this._recordBatchBlocks.push(new Li(0,0,0));this._write("\n  ]")}var p;return this._schema&&this._write("\n}"),this._dictionaries=[],this._recordBatches=[],super.close()}}const hb=new Uint8Array(0);class yb extends Qc{constructor(p,na){super();this._children=
na;this.numChildren=p.childData.length;this._bindDataAccessors(this.data=p)}get type(){return this.data.type}get typeId(){return this.data.typeId}get length(){return this.data.length}get offset(){return this.data.offset}get stride(){return this.data.stride}get nullCount(){return this.data.nullCount}get byteLength(){return this.data.byteLength}get VectorName(){return nb[this.typeId]+"Vector"}get ArrayType(){return this.type.ArrayType}get values(){return this.data.values}get typeIds(){return this.data.typeIds}get nullBitmap(){return this.data.nullBitmap}get valueOffsets(){return this.data.valueOffsets}get [Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}clone(p,
na=this._children){return Qc.new(p,na)}concat(...p){return Rh.concat(this,...p)}slice(p,na){return Da(this,p,na,this._sliceInternal)}isValid(p){return 0<this.nullCount?(p=this.offset+p,0!==(this.nullBitmap[p>>3]&1<<p%8)):!0}getChildAt(p){return 0>p||p>=this.numChildren?null:(this._children||(this._children=[]))[p]||(this._children[p]=Qc.new(this.data.childData[p]))}toJSON(){return[...this]}_sliceInternal(p,na,ib){return p.clone(p.data.slice(na,ib-na),null)}_bindDataAccessors(p){}}yb.prototype[Symbol.isConcatSpreadable]=
!0;class Kb extends yb{asUtf8(){return Qc.new(this.data.clone(new td))}}class ic extends yb{static from(p){return Sd(()=>new id,p)}}class Bc extends yb{static from(...p){return 2===p.length?Sd(()=>p[1]===ue.DAY?new gc:new Ac,p[0]):Sd(()=>new Ac,p[0])}}class Lc extends Bc{}class gd extends Bc{}class Dd extends yb{}class Jd extends yb{constructor(p){super(p);this.indices=Qc.new(p.clone(this.type.indices))}static from(...p){if(3===p.length){const [na,ib,Sb]=p,wc=new Mg(na.type,ib,null,null);return Qc.new(Ef.Dictionary(wc,
0,Sb.length,0,null,Sb,na))}return Sd(()=>p[0].type,p[0])}get dictionary(){return this.data.dictionary}reverseLookup(p){return this.dictionary.indexOf(p)}getKey(p){return this.indices.get(p)}getValue(p){return this.dictionary.get(p)}setKey(p,na){return this.indices.set(p,na)}setValue(p,na){return this.dictionary.set(p,na)}}Jd.prototype.indices=null;class se extends yb{}class cf extends yb{}class lf extends yb{static from(p){let na=ag(this);if(p instanceof ArrayBuffer||ArrayBuffer.isView(p)){var ib=
lg(p.constructor)||na;if(null===na&&(na=ib),na&&na===ib){ib=new na;const Sb=p.byteLength/ib.ArrayType.BYTES_PER_ELEMENT;if(na!==xe||p.constructor===Uint16Array)return Qc.new(Ef.Float(ib,0,Sb,0,null,p))}}if(na)return Sd(()=>new na,p);if(p instanceof DataView||p instanceof ArrayBuffer)throw new TypeError("Cannot infer float type from instance of "+p.constructor.name);throw new TypeError("Unrecognized FloatVector input");}}class Hf extends lf{toFloat32Array(){return new Float32Array(this)}toFloat64Array(){return new Float64Array(this)}}
class ff extends lf{}class Ff extends lf{}const lg=p=>{switch(p){case Uint16Array:return xe;case Float32Array:return Af;case Float64Array:return Qf;default:return null}},ag=p=>{switch(p){case Hf:return xe;case ff:return Af;case Ff:return Qf;default:return null}};class ig extends yb{}class Mf extends ig{}class cg extends ig{}class Of extends yb{static from(...p){const [na,ib=!1]=p;let Sb=Ve(this,ib);if(na instanceof ArrayBuffer||ArrayBuffer.isView(na))if(p=Ne(na.constructor,ib)||Sb,null===Sb&&(Sb=
p),Sb&&Sb===p){p=new Sb;let wc=na.byteLength/p.ArrayType.BYTES_PER_ELEMENT;return Cd(Sb,na.constructor)&&(wc*=.5),Qc.new(Ef.Int(p,0,wc,0,null,na))}if(Sb)return Sd(()=>new Sb,na);if(na instanceof DataView||na instanceof ArrayBuffer)throw new TypeError("Cannot infer integer type from instance of "+na.constructor.name);throw new TypeError("Unrecognized IntVector input");}}class Fg extends Of{}class Rg extends Of{}class Bg extends Of{}class Eg extends Of{toBigInt64Array(){return v(pf,this.values)}get values64(){return this._values64||
(this._values64=this.toBigInt64Array())}}class xi extends Of{}class rh extends Of{}class ih extends Of{}class Pk extends Of{toBigUint64Array(){return v(bg,this.values)}get values64(){return this._values64||(this._values64=this.toBigUint64Array())}}const Cd=(p,na)=>!(p!==Sc&&p!==je||na!==Int32Array&&na!==Uint32Array),Ne=(p,na)=>{switch(p){case Int8Array:return pb;case Int16Array:return Rb;case Int32Array:return na?Sc:ec;case pf:return Sc;case Uint8Array:return kd;case Uint16Array:return Fd;case Uint32Array:return na?
je:Yd;case bg:return je;default:return null}},Ve=(p,na)=>{switch(p){case Fg:return pb;case Rg:return Rb;case Bg:return na?Sc:ec;case Eg:return Sc;case xi:return kd;case rh:return Fd;case ih:return na?je:Yd;case Pk:return je;default:return null}};class mf extends yb{}class We extends yb{asList(){return Qc.new(this.data.clone(new eg(this.type.children[0])))}bind(p){const na=this.getChildAt(0),{[p]:ib,[p+1]:Sb}=this.valueOffsets;return new Jk(na.slice(ib,Sb))}}class Zf extends yb{}const ng=Symbol.for("rowIndex");
class Cf extends yb{bind(p){var na=this._row||(this._row=new Hj(this));na=Object.create(na);return na[ng]=p,na}}class Cg extends yb{}class pg extends Cg{}class fg extends Cg{}class mh extends Cg{}class Fh extends Cg{}class Gh extends yb{}class th extends Gh{}class yi extends Gh{}class Ui extends Gh{}class Lk extends Gh{}class al extends yb{get typeIdToChildIndex(){return this.data.type.typeIdToChildIndex}}class hl extends al{get valueOffsets(){return this.data.valueOffsets}}class Ol extends al{}class Sk extends yb{static from(p){return Sd(()=>
new td,p)}asBinary(){return Qc.new(this.data.clone(new Hc))}}class ah extends xg{}const tl=(p,na)=>4294967296*p[na+1]+(p[na]>>>0),kl=(p,na,ib)=>{const {[ib]:Sb,[ib+1]:wc}=na;return null!=Sb&&null!=wc?p.subarray(Sb,wc):null},ll=({values:p},na)=>new Date(864E5*p[na]),ml=({values:p},na)=>new Date(tl(p,2*na)),pk=({stride:p,values:na},ib)=>na[p*ib],gl=({stride:p,values:na},ib)=>Ba(na[p*ib]),mk=({stride:p,values:na,type:ib},Sb)=>eh.new(na.subarray(p*Sb,p*(Sb+1)),ib.isSigned),lk=({values:p},na)=>1E3*tl(p,
2*na),Kl=({values:p},na)=>tl(p,2*na),Pl=({values:p},na)=>{na*=2;return p[na+1]/1E3*4294967296+(p[na]>>>0)/1E3},Wi=({values:p},na)=>{na*=2;return p[na+1]/1E6*4294967296+(p[na]>>>0)/1E6},fm=({values:p,stride:na},ib)=>p[na*ib],Vj=({values:p,stride:na},ib)=>p[na*ib],Tk=({values:p},na)=>eh.signed(p.subarray(2*na,2*(na+1))),Mk=({values:p},na)=>eh.signed(p.subarray(2*na,2*(na+1))),nk=(p,na)=>{const ib=p.getChildAt(p.typeIdToChildIndex[p.typeIds[na]]);return ib?ib.get(p.valueOffsets[na]):null},Vi=(p,na)=>
(p=p.getChildAt(p.typeIdToChildIndex[p.typeIds[na]]))?p.get(na):null,Ml=({values:p},na)=>p.subarray(2*na,2*(na+1)),ul=({values:p},na)=>{p=p[na];na=new Int32Array(2);return na[0]=p/12|0,na[1]=p%12|0,na};ah.prototype.visitNull=(p,na)=>null;ah.prototype.visitBool=({offset:p,values:na},ib)=>{p+=ib;return 0!=(na[p>>3]&1<<p%8)};ah.prototype.visitInt=(p,na)=>64>p.type.bitWidth?pk(p,na):mk(p,na);ah.prototype.visitInt8=pk;ah.prototype.visitInt16=pk;ah.prototype.visitInt32=pk;ah.prototype.visitInt64=mk;ah.prototype.visitUint8=
pk;ah.prototype.visitUint16=pk;ah.prototype.visitUint32=pk;ah.prototype.visitUint64=mk;ah.prototype.visitFloat=(p,na)=>p.type.precision!==we.HALF?pk(p,na):gl(p,na);ah.prototype.visitFloat16=gl;ah.prototype.visitFloat32=pk;ah.prototype.visitFloat64=pk;ah.prototype.visitUtf8=({values:p,valueOffsets:na},ib)=>{p=kl(p,na,ib);return null!==p?$e.decode(p):null};ah.prototype.visitBinary=({values:p,valueOffsets:na},ib)=>kl(p,na,ib);ah.prototype.visitFixedSizeBinary=({stride:p,values:na},ib)=>na.subarray(p*
ib,p*(ib+1));ah.prototype.visitDate=(p,na)=>p.type.unit===ue.DAY?ll(p,na):ml(p,na);ah.prototype.visitDateDay=ll;ah.prototype.visitDateMillisecond=ml;ah.prototype.visitTimestamp=(p,na)=>{switch(p.type.unit){case sd.SECOND:return lk(p,na);case sd.MILLISECOND:return Kl(p,na);case sd.MICROSECOND:return Pl(p,na);case sd.NANOSECOND:return Wi(p,na)}};ah.prototype.visitTimestampSecond=lk;ah.prototype.visitTimestampMillisecond=Kl;ah.prototype.visitTimestampMicrosecond=Pl;ah.prototype.visitTimestampNanosecond=
Wi;ah.prototype.visitTime=(p,na)=>{switch(p.type.unit){case sd.SECOND:return fm(p,na);case sd.MILLISECOND:return Vj(p,na);case sd.MICROSECOND:return Tk(p,na);case sd.NANOSECOND:return Mk(p,na)}};ah.prototype.visitTimeSecond=fm;ah.prototype.visitTimeMillisecond=Vj;ah.prototype.visitTimeMicrosecond=Tk;ah.prototype.visitTimeNanosecond=Mk;ah.prototype.visitDecimal=({values:p},na)=>eh.decimal(p.subarray(4*na,4*(na+1)));ah.prototype.visitList=(p,na)=>{const ib=p.getChildAt(0),{valueOffsets:Sb,stride:wc}=
p;return ib.slice(Sb[na*wc],Sb[na*wc+1])};ah.prototype.visitStruct=(p,na)=>p.bind(na);ah.prototype.visitUnion=(p,na)=>p.type.mode===Wd.Dense?nk(p,na):Vi(p,na);ah.prototype.visitDenseUnion=nk;ah.prototype.visitSparseUnion=Vi;ah.prototype.visitDictionary=(p,na)=>p.getValue(p.getKey(na));ah.prototype.visitInterval=(p,na)=>p.type.unit===Fe.DAY_TIME?Ml(p,na):ul(p,na);ah.prototype.visitIntervalDayTime=Ml;ah.prototype.visitIntervalYearMonth=ul;ah.prototype.visitFixedSizeList=(p,na)=>{const ib=p.getChildAt(0);
({stride:p}=p);return ib.slice(na*p,(na+1)*p)};ah.prototype.visitMap=(p,na)=>p.bind(na);const tk=new ah;class hh extends xg{}hh.prototype.visitNull=function(p,na){return null===na&&0<p.length?0:-1};hh.prototype.visitBool=Jc;hh.prototype.visitInt=Jc;hh.prototype.visitInt8=Jc;hh.prototype.visitInt16=Jc;hh.prototype.visitInt32=Jc;hh.prototype.visitInt64=Jc;hh.prototype.visitUint8=Jc;hh.prototype.visitUint16=Jc;hh.prototype.visitUint32=Jc;hh.prototype.visitUint64=Jc;hh.prototype.visitFloat=Jc;hh.prototype.visitFloat16=
Jc;hh.prototype.visitFloat32=Jc;hh.prototype.visitFloat64=Jc;hh.prototype.visitUtf8=Jc;hh.prototype.visitBinary=Jc;hh.prototype.visitFixedSizeBinary=Jc;hh.prototype.visitDate=Jc;hh.prototype.visitDateDay=Jc;hh.prototype.visitDateMillisecond=Jc;hh.prototype.visitTimestamp=Jc;hh.prototype.visitTimestampSecond=Jc;hh.prototype.visitTimestampMillisecond=Jc;hh.prototype.visitTimestampMicrosecond=Jc;hh.prototype.visitTimestampNanosecond=Jc;hh.prototype.visitTime=Jc;hh.prototype.visitTimeSecond=Jc;hh.prototype.visitTimeMillisecond=
Jc;hh.prototype.visitTimeMicrosecond=Jc;hh.prototype.visitTimeNanosecond=Jc;hh.prototype.visitDecimal=Jc;hh.prototype.visitList=Jc;hh.prototype.visitStruct=Jc;hh.prototype.visitUnion=Jc;hh.prototype.visitDenseUnion=ud;hh.prototype.visitSparseUnion=ud;hh.prototype.visitDictionary=Jc;hh.prototype.visitInterval=Jc;hh.prototype.visitIntervalDayTime=Jc;hh.prototype.visitIntervalYearMonth=Jc;hh.prototype.visitFixedSizeList=Jc;hh.prototype.visitMap=Jc;const Jg=new hh;class $g extends xg{}class Ij{constructor(p,
na){this.vector=p;this.getFn=na;this.index=0}next(){return this.index<this.vector.length?{value:this.getFn(this.vector,this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}$g.prototype.visitNull=Zc;$g.prototype.visitBool=Zc;$g.prototype.visitInt=Zc;$g.prototype.visitInt8=Zc;$g.prototype.visitInt16=Zc;$g.prototype.visitInt32=Zc;$g.prototype.visitInt64=Zc;$g.prototype.visitUint8=Zc;$g.prototype.visitUint16=Zc;$g.prototype.visitUint32=Zc;$g.prototype.visitUint64=Zc;$g.prototype.visitFloat=
Zc;$g.prototype.visitFloat16=Zc;$g.prototype.visitFloat32=Zc;$g.prototype.visitFloat64=Zc;$g.prototype.visitUtf8=Zc;$g.prototype.visitBinary=Zc;$g.prototype.visitFixedSizeBinary=Zc;$g.prototype.visitDate=Zc;$g.prototype.visitDateDay=Zc;$g.prototype.visitDateMillisecond=Zc;$g.prototype.visitTimestamp=Zc;$g.prototype.visitTimestampSecond=Zc;$g.prototype.visitTimestampMillisecond=Zc;$g.prototype.visitTimestampMicrosecond=Zc;$g.prototype.visitTimestampNanosecond=Zc;$g.prototype.visitTime=Zc;$g.prototype.visitTimeSecond=
Zc;$g.prototype.visitTimeMillisecond=Zc;$g.prototype.visitTimeMicrosecond=Zc;$g.prototype.visitTimeNanosecond=Zc;$g.prototype.visitDecimal=Zc;$g.prototype.visitList=Zc;$g.prototype.visitStruct=Zc;$g.prototype.visitUnion=Zc;$g.prototype.visitDenseUnion=Zc;$g.prototype.visitSparseUnion=Zc;$g.prototype.visitDictionary=Zc;$g.prototype.visitInterval=Zc;$g.prototype.visitIntervalDayTime=Zc;$g.prototype.visitIntervalYearMonth=Zc;$g.prototype.visitFixedSizeList=Zc;$g.prototype.visitMap=Zc;const ok=new $g;
class Rf extends xg{}Rf.prototype.visitNull=xd;Rf.prototype.visitBool=xd;Rf.prototype.visitInt=xd;Rf.prototype.visitInt8=xd;Rf.prototype.visitInt16=xd;Rf.prototype.visitInt32=xd;Rf.prototype.visitInt64=xd;Rf.prototype.visitUint8=xd;Rf.prototype.visitUint16=xd;Rf.prototype.visitUint32=xd;Rf.prototype.visitUint64=xd;Rf.prototype.visitFloat=xd;Rf.prototype.visitFloat16=xd;Rf.prototype.visitFloat32=xd;Rf.prototype.visitFloat64=xd;Rf.prototype.visitUtf8=xd;Rf.prototype.visitBinary=xd;Rf.prototype.visitFixedSizeBinary=
xd;Rf.prototype.visitDate=xd;Rf.prototype.visitDateDay=xd;Rf.prototype.visitDateMillisecond=xd;Rf.prototype.visitTimestamp=xd;Rf.prototype.visitTimestampSecond=xd;Rf.prototype.visitTimestampMillisecond=xd;Rf.prototype.visitTimestampMicrosecond=xd;Rf.prototype.visitTimestampNanosecond=xd;Rf.prototype.visitTime=xd;Rf.prototype.visitTimeSecond=xd;Rf.prototype.visitTimeMillisecond=xd;Rf.prototype.visitTimeMicrosecond=xd;Rf.prototype.visitTimeNanosecond=xd;Rf.prototype.visitDecimal=xd;Rf.prototype.visitList=
xd;Rf.prototype.visitStruct=xd;Rf.prototype.visitUnion=xd;Rf.prototype.visitDenseUnion=xd;Rf.prototype.visitSparseUnion=xd;Rf.prototype.visitDictionary=xd;Rf.prototype.visitInterval=xd;Rf.prototype.visitIntervalDayTime=xd;Rf.prototype.visitIntervalYearMonth=xd;Rf.prototype.visitFixedSizeList=xd;Rf.prototype.visitMap=xd;const kh=new Rf,sf=(p,na)=>p+na,Pi=p=>"Cannot compute the byte width of variable-width column "+p,fi=new class extends xg{visitNull(p){return 0}visitInt(p){return p.bitWidth/8}visitFloat(p){return p.ArrayType.BYTES_PER_ELEMENT}visitBinary(p){throw Error(Pi(p));
}visitUtf8(p){throw Error(Pi(p));}visitBool(p){return.125}visitDecimal(p){return 16}visitDate(p){return 4*(p.unit+1)}visitTime(p){return p.bitWidth/8}visitTimestamp(p){return p.unit===sd.SECOND?4:8}visitInterval(p){return 4*(p.unit+1)}visitList(p){throw Error(Pi(p));}visitStruct(p){return this.visitFields(p.children).reduce(sf,0)}visitUnion(p){return this.visitFields(p.children).reduce(sf,0)}visitFixedSizeBinary(p){return p.byteWidth}visitFixedSizeList(p){return p.listSize*this.visitFields(p.children).reduce(sf,
0)}visitMap(p){return this.visitFields(p.children).reduce(sf,0)}visitDictionary(p){return this.visit(p.indices)}visitFields(p){return(p||[]).map(na=>this.visit(na.type))}visitSchema(p){return this.visitFields(p.fields).reduce(sf,0)}},Nk=new class extends xg{visitNull(){return Zf}visitBool(){return ic}visitInt(){return Of}visitInt8(){return Fg}visitInt16(){return Rg}visitInt32(){return Bg}visitInt64(){return Eg}visitUint8(){return xi}visitUint16(){return rh}visitUint32(){return ih}visitUint64(){return Pk}visitFloat(){return lf}visitFloat16(){return Hf}visitFloat32(){return ff}visitFloat64(){return Ff}visitUtf8(){return Sk}visitBinary(){return Kb}visitFixedSizeBinary(){return se}visitDate(){return Bc}visitDateDay(){return Lc}visitDateMillisecond(){return gd}visitTimestamp(){return Cg}visitTimestampSecond(){return pg}visitTimestampMillisecond(){return fg}visitTimestampMicrosecond(){return mh}visitTimestampNanosecond(){return Fh}visitTime(){return Gh}visitTimeSecond(){return th}visitTimeMillisecond(){return yi}visitTimeMicrosecond(){return Ui}visitTimeNanosecond(){return Lk}visitDecimal(){return Dd}visitList(){return mf}visitStruct(){return Cf}visitUnion(){return al}visitDenseUnion(){return hl}visitSparseUnion(){return Ol}visitDictionary(){return Jd}visitInterval(){return ig}visitIntervalDayTime(){return Mf}visitIntervalYearMonth(){return cg}visitFixedSizeList(){return cf}visitMap(){return We}};
Qc.new=function(p,...na){return new (Nk.getVisitFn(p)())(p,...na)};Qc.from=function(p){p=Object.assign({nullValues:[null,void 0]},p);const {values:na=[]}=p,ib=l(p,["values"]);return sg(na)?(p=[...oh.throughIterable(ib)(na)],1===p.length?p[0]:Rh.concat(p)):(Sb=>u(this,void 0,void 0,function*(){var wc;const Wc=oh.throughAsyncIterable(ib);try{for(var Hd,Ud=X(Wc(na));!(Hd=yield Ud.next()).done;)Sb.push(Hd.value)}catch(zf){var He={error:zf}}finally{try{Hd&&!Hd.done&&(wc=Ud.return)&&(yield wc.call(Ud))}finally{if(He)throw He.error;
}}return 1===Sb.length?Sb[0]:Rh.concat(Sb)}))([])};yb.prototype.get=function(p){return tk.visit(this,p)};yb.prototype.set=function(p,na){return vj.visit(this,p,na)};yb.prototype.indexOf=function(p,na){return Jg.visit(this,p,na)};yb.prototype.toArray=function(){return kh.visit(this)};yb.prototype.getByteWidth=function(){return fi.visit(this.type)};yb.prototype[Symbol.iterator]=function(){return ok.visit(this)};yb.prototype._bindDataAccessors=function(){const p=this.nullBitmap;p&&0<p.byteLength&&(this.get=
(na=this.get,function(ib){return this.isValid(ib)?na.call(this,ib):null}),this.set=function(ib){return function(Sb,wc){K(this.nullBitmap,this.offset+Sb,null!=wc)&&ib.call(this,Sb,wc)}}(this.set));var na};Object.keys(nb).map(p=>nb[p]).filter(p=>"number"==typeof p).filter(p=>p!==nb.NONE).forEach(p=>{const na=Nk.visit(p);var ib;na.prototype.get=(ib=tk.getVisitFn(p),function(Sb){return ib(this,Sb)});na.prototype.set=Gc(vj.getVisitFn(p));na.prototype.indexOf=Gc(Jg.getVisitFn(p));na.prototype.toArray=$b(kh.getVisitFn(p));
na.prototype.getByteWidth=function(Sb){return function(){return Sb(this.type)}}(fi.getVisitFn(p));na.prototype[Symbol.iterator]=$b(ok.getVisitFn(p))});class Uh extends Rh{constructor(...p){let na=null;p[0]instanceof Xg&&(na=p.shift());p=cb(li,p,[],0);if(!na&&!(na=p[0]&&p[0].schema))throw new TypeError("Table must be initialized with a Schema or at least one RecordBatch");p[0]||(p[0]=new ij(na));super(new Sf(na.fields),p);this._schema=na;this._chunks=p}static empty(p=new Xg([])){return new Uh(p,[])}static from(p){if(!p)return Uh.empty();
if("object"==typeof p){const ib=sg(p.values)?function(Sb){const {type:wc}=Sb;return wc instanceof Sf?Uh.fromStruct(Cf.from(Sb)):null}(p):zc(p.values)?function(Sb){const {type:wc}=Sb;return wc instanceof Sf?Cf.from(Sb).then(Wc=>Uh.fromStruct(Wc)):null}(p):null;if(null!==ib)return ib}let na=gi.from(p);return Tf(na)?(()=>u(this,void 0,void 0,function*(){return yield Uh.from(yield na)}))():na.isSync()&&(na=na.open())?na.schema?new Uh(na.schema,[...na]):Uh.empty():(ib=>u(this,void 0,void 0,function*(){var Sb;
const wc=yield ib,Wc=wc.schema,Hd=[];if(Wc){try{for(var Ud,He=X(wc);!(Ud=yield He.next()).done;)Hd.push(Ud.value)}catch(mg){var zf={error:mg}}finally{try{Ud&&!Ud.done&&(Sb=He.return)&&(yield Sb.call(He))}finally{if(zf)throw zf.error;}}return new Uh(Wc,Hd)}return Uh.empty()}))(na.open())}static fromAsync(p){return u(this,void 0,void 0,function*(){return yield Uh.from(p)})}static fromStruct(p){return Uh.new(p.data.childData,p.type.children)}static new(...p){return new Uh(...(na=(ib=>{const [Sb,wc]=
sa(ib,[[],[]]);return wc.map((Wc,Hd)=>Wc instanceof Wf?Wf.new(Wc.field.clone(Sb[Hd]),Wc):Wc instanceof Qc?Wf.new(Sb[Hd],Wc):Wf.new(Sb[Hd],[]))})(p),te(new Xg(na.map(({field:ib})=>ib)),na)));var na}get schema(){return this._schema}get length(){return this._length}get chunks(){return this._chunks}get numCols(){return this._numChildren}clone(p=this._chunks){return new Uh(this._schema,p)}getColumn(p){return this.getColumnAt(this.getColumnIndex(p))}getColumnAt(p){return this.getChildAt(p)}getColumnIndex(p){return this._schema.fields.findIndex(na=>
na.name===p)}getChildAt(p){if(0>p||p>=this.numChildren)return null;var na,ib=this._schema.fields;const Sb=this._children||(this._children=[]);if(na=Sb[p])return na;if(na=ib[p])if(ib=this._chunks.map(wc=>wc.getChildAt(p)).filter(wc=>null!=wc),0<ib.length)return Sb[p]=new Wf(na,ib);return null}serialize(p,na=!0){return(na?ta:pa).writeAll(this).toUint8Array(!0)}count(){return this._length}select(...p){const na=this._schema.fields.reduce((ib,Sb,wc)=>ib.set(Sb.name,wc),new Map);return this.selectAt(...p.map(ib=>
na.get(ib)).filter(ib=>-1<ib))}selectAt(...p){const na=this._schema.selectAt(...p);return new Uh(na,this._chunks.map(({length:ib,data:{childData:Sb}})=>new li(na,ib,p.map(wc=>Sb[wc]).filter(Boolean))))}assign(p){const na=this._schema.fields,[ib,Sb]=p.schema.fields.reduce((Hd,Ud,He)=>{const [zf,mg]=Hd,Og=na.findIndex(Ah=>Ah.name===Ud.name);return~Og?mg[Og]=He:zf.push(He),Hd},[[],[]]),wc=this._schema.assign(p.schema),Wc=[...na.map((Hd,Ud,He,zf=Sb[Ud])=>void 0===zf?this.getColumnAt(Ud):p.getColumnAt(zf)),
...ib.map(Hd=>p.getColumnAt(Hd))].filter(Boolean);return new Uh(...te(wc,Wc))}}class li extends Cf{constructor(...p){const na=p[0];let ib;if(p[1]instanceof Ef)[,p,ib]=p;else{const Sb=na.fields,[,wc,Wc]=p;p=Ef.Struct(new Sf(Sb),0,wc,0,null,Wc)}super(p,ib);this._schema=na}static from(p){return sg(p.values),Uh.from(p)}static new(...p){const [na,ib]=sa(p,[[],[]]);p=ib.filter(Sb=>Sb instanceof Qc);return new li(...function(Sb,wc,Wc=wc.reduce((Hd,Ud)=>Math.max(Hd,Ud.length),0)){let Hd,Ud,He=-1;const zf=
wc.length;Sb=[...Sb.fields];const mg=[],Og=(Wc+63&-64)>>3;for(;++He<zf;)(Hd=wc[He])&&Hd.length===Wc?mg[He]=Hd:((Ud=Sb[He]).nullable||(Sb[He]=Sb[He].clone({nullable:!0})),mg[He]=Hd?Hd._changeLengthAndBackfillNullBitmap(Wc):Ef.new(Ud.type,0,Wc,Wc,[hb,hb,new Uint8Array(Og),hb]));return[new Xg(Sb),Wc,mg]}(new Xg(na),p.map(Sb=>Sb.data)))}clone(p,na=this._children){return new li(this._schema,p,na)}concat(...p){const na=this._schema;p=Rh.flatten(this,...p);return new Uh(na,p.map(({data:ib})=>new li(na,ib)))}get schema(){return this._schema}get numCols(){return this._schema.fields.length}get dictionaries(){return this._dictionaries||
(this._dictionaries=Yh.collect(this))}select(...p){const na=this._schema.fields.reduce((ib,Sb,wc)=>ib.set(Sb.name,wc),new Map);return this.selectAt(...p.map(ib=>na.get(ib)).filter(ib=>-1<ib))}selectAt(...p){const na=this._schema.selectAt(...p);p=p.map(ib=>this.data.childData[ib]).filter(Boolean);return new li(na,this.length,p)}}class ij extends li{constructor(p){super(p,0,p.fields.map(na=>Ef.new(na.type,0,0,0)))}}class Yh extends xg{constructor(){super(...arguments);this.dictionaries=new Map}static collect(p){return(new Yh).visit(p.data,
new Sf(p.schema.fields)).dictionaries}visit(p,na){return ce.isDictionary(na)?this.visitDictionary(p,na):(p.childData.forEach((ib,Sb)=>this.visit(ib,na.children[Sb].type)),this)}visitDictionary(p,na){p=p.dictionary;return p&&0<p.length&&this.dictionaries.set(na.id,p),this}}class gi extends oe{constructor(p){super();this._impl=p}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?
this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(p){return this._impl.throw(p)}return(p){return this._impl.return(p)}cancel(){return this._impl.cancel()}reset(p){return this._impl.reset(p),this._DOMStream=void 0,this._nodeStream=void 0,this}open(p){p=this._impl.open(p);return Tf(p)?p.then(()=>this):this}readRecordBatch(p){return this._impl.isFile()?
this._impl.readRecordBatch(p):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return ed.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return ed.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(p){throw Error('"throughNode" not available in this environment');}static throughDOM(p,
na){throw Error('"throughDOM" not available in this environment');}static from(p){return p instanceof gi?p:Wa(p)?new Ii(new xl(p)):Ha(p)?function(na){return u(this,void 0,void 0,function*(){const {size:ib}=yield na.stat(),Sb=new Fj(na,ib);return ib>=Fb&&bc(yield Sb.readAt(0,ob+7&-8))?new vl(new sk(Sb)):new bj(new nl(Sb))})}(p):Tf(p)?(()=>u(this,void 0,void 0,function*(){return yield gi.from(yield p)}))():null!=p&&Object(p)===p&&m(p.body)||m(p)||Na(p)||zc(p)?function(na){return u(this,void 0,void 0,
function*(){const ib=yield na.peek(ob+7&-8);return ib&&4<=ib.byteLength?bc(ib)?new Uk(new wl(yield na.read())):new bj(new nl(na)):new bj(new nl(function(){return U(this,arguments,function*(){})}()))})}(new mj(p)):function(na){const ib=na.peek(ob+7&-8);return ib&&4<=ib.byteLength?bc(ib)?new Uk(new wl(na.read())):new Ii(new Nl(na)):new Ii(new Nl(function*(){}()))}(new rg(p))}static readAll(p){return p instanceof gi?p.isSync()?ie(p):Be(p):Wa(p)||ArrayBuffer.isView(p)||sg(p)||null!=p&&Object(p)===p&&
"done"in p&&"value"in p?ie(p):Be(p)}}class Ii extends gi{constructor(p){super(p);this._impl=p}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return U(this,arguments,function*(){yield D(yield*aa(X(this[Symbol.iterator]())))})}}class bj extends gi{constructor(p){super(p);this._impl=p}[Symbol.iterator](){throw Error("AsyncRecordBatchStreamReader is not Iterable");}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class Uk extends Ii{constructor(p){super(p);
this._impl=p}}class vl extends bj{constructor(p){super(p);this._impl=p}}class Zk{constructor(p=new Map){this.closed=!1;this.autoDestroy=!0;this._recordBatchIndex=this._dictionaryIndex=0;this.dictionaries=p}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(p){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=p,this.dictionaries=new Map,this}_loadRecordBatch(p,
na){return new li(this.schema,p.length,this._loadVectors(p,na,this.schema.fields))}_loadDictionaryBatch(p,na){const {id:ib,isDelta:Sb,data:wc}=p,{dictionaries:Wc,schema:Hd}=this;p=Wc.get(ib);if(Sb||!p){const Ud=Hd.dictionaries.get(ib);return p&&Sb?p.concat(Qc.new(this._loadVectors(wc,na,[Ud])[0])):Qc.new(this._loadVectors(wc,na,[Ud])[0])}return p}_loadVectors(p,na,ib){return(new ii(na,p.nodes,p.buffers,this.dictionaries)).visitMany(ib)}}class Nl extends Zk{constructor(p,na){super(na);this._reader=
Wa(p)?new Ka(this._handle=p):new ca(this._handle=p)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(p){return this.closed||(this.autoDestroy=p&&"boolean"==typeof p.autoDestroy?p.autoDestroy:this.autoDestroy,this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(p){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(p):
af}return(p){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(p):af}next(){if(this.closed)return af;for(var p,{_reader:na}=this;p=this._readNextMessageAndValidate();)if(p.isSchema())this.reset(p.header());else{if(p.isRecordBatch()){this._recordBatchIndex++;var ib=p.header();na=na.readMessageBody(p.bodyLength);return{done:!1,value:this._loadRecordBatch(ib,na)}}p.isDictionaryBatch()&&(this._dictionaryIndex++,ib=p.header(),p=na.readMessageBody(p.bodyLength),p=this._loadDictionaryBatch(ib,
p),this.dictionaries.set(ib.id,p))}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new ij(this.schema)}):this.return()}_readNextMessageAndValidate(p){return this._reader.readMessage(p)}}class nl extends Zk{constructor(p,na){super(na);this._reader=new ya(this._handle=p)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return u(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),
this._reader=null,this.dictionaries=null)})}open(p){return u(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=p&&"boolean"==typeof p.autoDestroy?p.autoDestroy:this.autoDestroy,this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(p){return u(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(p):af})}return(p){return u(this,void 0,void 0,function*(){return!this.closed&&
this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(p):af})}next(){return u(this,void 0,void 0,function*(){if(this.closed)return af;for(var p,{_reader:na}=this;p=yield this._readNextMessageAndValidate();)if(p.isSchema())yield this.reset(p.header());else{if(p.isRecordBatch()){this._recordBatchIndex++;var ib=p.header();na=yield na.readMessageBody(p.bodyLength);return{done:!1,value:this._loadRecordBatch(ib,na)}}p.isDictionaryBatch()&&(this._dictionaryIndex++,ib=p.header(),p=yield na.readMessageBody(p.bodyLength),
p=this._loadDictionaryBatch(ib,p),this.dictionaries.set(ib.id,p))}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new ij(this.schema)}):yield this.return()})}_readNextMessageAndValidate(p){return u(this,void 0,void 0,function*(){return yield this._reader.readMessage(p)})}}class wl extends Nl{constructor(p,na){super(p instanceof Gi?p:new Gi(p),na)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?
this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(p){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const na of this._footer.dictionaryBatches())na&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(p)}readRecordBatch(p){if(this.closed)return null;this._footer||this.open();if((p=this._footer&&this._footer.getRecordBatch(p))&&this._handle.seek(p.offset)){var na=this._reader.readMessage(vb.RecordBatch);if(na&&na.isRecordBatch())return p=
na.header(),na=this._reader.readMessageBody(na.bodyLength),this._loadRecordBatch(p,na)}return null}_readDictionaryBatch(p){if((p=this._footer&&this._footer.getDictionaryBatch(p))&&this._handle.seek(p.offset)){var na=this._reader.readMessage(vb.DictionaryBatch);na&&na.isDictionaryBatch()&&(p=na.header(),na=this._reader.readMessageBody(na.bodyLength),na=this._loadDictionaryBatch(p,na),this.dictionaries.set(p.id,na))}}_readFooter(){var {_handle:p}=this;const na=p.size-rb,ib=p.readInt32(na);p=p.readAt(na-
ib,ib);return jk.decode(p)}_readNextMessageAndValidate(p){if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const na=this._footer&&this._footer.getRecordBatch(this._recordBatchIndex);if(na&&this._handle.seek(na.offset))return this._reader.readMessage(p)}return null}}class sk extends nl{constructor(p,...na){const ib="number"!=typeof na[0]?na.shift():void 0;na=na[0]instanceof Map?na.shift():void 0;super(p instanceof Fj?p:new Fj(p,ib),na)}get footer(){return this._footer}get numDictionaries(){return this._footer?
this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(p){const na=Object.create(null,{open:{get:()=>super.open}});return u(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const ib of this._footer.dictionaryBatches())ib&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield na.open.call(this,p)})}readRecordBatch(p){return u(this,
void 0,void 0,function*(){if(this.closed)return null;this._footer||(yield this.open());var na=this._footer&&this._footer.getRecordBatch(p);if(na&&(yield this._handle.seek(na.offset))){var ib=yield this._reader.readMessage(vb.RecordBatch);if(ib&&ib.isRecordBatch())return na=ib.header(),ib=yield this._reader.readMessageBody(ib.bodyLength),this._loadRecordBatch(na,ib)}return null})}_readDictionaryBatch(p){return u(this,void 0,void 0,function*(){var na=this._footer&&this._footer.getDictionaryBatch(p);
if(na&&(yield this._handle.seek(na.offset))){var ib=yield this._reader.readMessage(vb.DictionaryBatch);ib&&ib.isDictionaryBatch()&&(na=ib.header(),ib=yield this._reader.readMessageBody(ib.bodyLength),ib=this._loadDictionaryBatch(na,ib),this.dictionaries.set(na.id,ib))}})}_readFooter(){return u(this,void 0,void 0,function*(){var {_handle:p}=this;p._pending&&(yield p._pending);const na=p.size-rb,ib=yield p.readInt32(na);p=yield p.readAt(na-ib,ib);return jk.decode(p)})}_readNextMessageAndValidate(p){return u(this,
void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const na=this._footer.getRecordBatch(this._recordBatchIndex);if(na&&(yield this._handle.seek(na.offset)))return yield this._reader.readMessage(p)}return null})}}class xl extends Nl{constructor(p,na){super(p,na)}_loadVectors(p,na,ib){return(new Gj(na,p.nodes,p.buffers,this.dictionaries)).visitMany(ib)}}class Yl{constructor(p){this._numChunks=0;this._finished=!1;this._bufferedSize=
0;const {readableStrategy:na,writableStrategy:ib,queueingStrategy:Sb="count"}=p;p=l(p,["readableStrategy","writableStrategy","queueingStrategy"]);this._controller=null;this._builder=oh.new(p);this._getSize="bytes"!==Sb?Wj:yl;({highWaterMark:p="bytes"===Sb?16384:1E3}=Object.assign({},na));const {highWaterMark:wc="bytes"===Sb?16384:1E3}=Object.assign({},ib);this.readable=new ReadableStream({cancel:()=>{this._builder.clear()},pull:Wc=>{this._maybeFlush(this._builder,this._controller=Wc)},start:Wc=>{this._maybeFlush(this._builder,
this._controller=Wc)}},{highWaterMark:p,size:"bytes"!==Sb?Wj:yl});this.writable=new WritableStream({abort:()=>{this._builder.clear()},write:()=>{this._maybeFlush(this._builder,this._controller)},close:()=>{this._maybeFlush(this._builder.finish(),this._controller)}},{highWaterMark:wc,size:Wc=>this._writeValueAndReturnChunkSize(Wc)})}_writeValueAndReturnChunkSize(p){const na=this._bufferedSize;return this._bufferedSize=this._getSize(this._builder.append(p)),this._bufferedSize-na}_maybeFlush(p,na){null!==
na&&(this._bufferedSize>=na.desiredSize&&++this._numChunks&&this._enqueue(na,p.toVector()),p.finished&&((0<p.length||0===this._numChunks)&&++this._numChunks&&this._enqueue(na,p.toVector()),!this._finished&&(this._finished=!0)&&this._enqueue(na,null)))}_enqueue(p,na){this._bufferedSize=0;this._controller=null;null===na?p.close():p.enqueue(na)}}const Wj=p=>p.length,yl=p=>p.byteLength;class $k{eq(p){return p instanceof $k||(p=new dl(p)),new tf(this,p)}le(p){return p instanceof $k||(p=new dl(p)),new Aj(this,
p)}ge(p){return p instanceof $k||(p=new dl(p)),new cl(this,p)}lt(p){return new pl(this.ge(p))}gt(p){return new pl(this.le(p))}ne(p){return new pl(this.eq(p))}}class dl extends $k{constructor(p){super();this.v=p}}class Zl extends $k{constructor(p){super();this.name=p}bind(p){if(!this.colidx){this.colidx=-1;const ib=p.schema.fields;for(let Sb=-1;++Sb<ib.length;)if(ib[Sb].name===this.name){this.colidx=Sb;break}if(0>this.colidx)throw Error(`Failed to bind Col "${this.name}"`);}const na=this.vector=p.getChildAt(this.colidx);
return ib=>na.get(ib)}}class ol{and(...p){return new bh(this,...p)}or(...p){return new yj(this,...p)}not(){return new pl(this)}}class bl extends ol{constructor(p,na){super();this.left=p;this.right=na}bind(p){return this.left instanceof dl?this.right instanceof dl?this._bindLitLit(p,this.left,this.right):this._bindLitCol(p,this.left,this.right):this.right instanceof dl?this._bindColLit(p,this.left,this.right):this._bindColCol(p,this.left,this.right)}}class zl extends ol{constructor(...p){super();this.children=
p}}zl.prototype.children=Object.freeze([]);class bh extends zl{constructor(...p){p=p.reduce((na,ib)=>na.concat(ib instanceof bh?ib.children:ib),[]);super(...p)}bind(p){const na=this.children.map(ib=>ib.bind(p));return(ib,Sb)=>na.every(wc=>wc(ib,Sb))}}class yj extends zl{constructor(...p){p=p.reduce((na,ib)=>na.concat(ib instanceof yj?ib.children:ib),[]);super(...p)}bind(p){const na=this.children.map(ib=>ib.bind(p));return(ib,Sb)=>na.some(wc=>wc(ib,Sb))}}class tf extends bl{_bindLitLit(p,na,ib){const Sb=
na.v==ib.v;return()=>Sb}_bindColCol(p,na,ib){const Sb=na.bind(p),wc=ib.bind(p);return(Wc,Hd)=>Sb(Wc,Hd)==wc(Wc,Hd)}_bindColLit(p,na,ib){const Sb=na.bind(p);if(na.vector instanceof Jd){let wc;const Wc=na.vector;return Wc.dictionary!==this.lastDictionary?(wc=Wc.reverseLookup(ib.v),this.lastDictionary=Wc.dictionary,this.lastKey=wc):wc=this.lastKey,-1===wc?()=>!1:Hd=>Wc.getKey(Hd)===wc}return(wc,Wc)=>Sb(wc,Wc)==ib.v}_bindLitCol(p,na,ib){return this._bindColLit(p,ib,na)}}class Aj extends bl{_bindLitLit(p,
na,ib){const Sb=na.v<=ib.v;return()=>Sb}_bindColCol(p,na,ib){const Sb=na.bind(p),wc=ib.bind(p);return(Wc,Hd)=>Sb(Wc,Hd)<=wc(Wc,Hd)}_bindColLit(p,na,ib){const Sb=na.bind(p);return(wc,Wc)=>Sb(wc,Wc)<=ib.v}_bindLitCol(p,na,ib){const Sb=ib.bind(p);return(wc,Wc)=>na.v<=Sb(wc,Wc)}}class cl extends bl{_bindLitLit(p,na,ib){const Sb=na.v>=ib.v;return()=>Sb}_bindColCol(p,na,ib){const Sb=na.bind(p),wc=ib.bind(p);return(Wc,Hd)=>Sb(Wc,Hd)>=wc(Wc,Hd)}_bindColLit(p,na,ib){const Sb=na.bind(p);return(wc,Wc)=>Sb(wc,
Wc)>=ib.v}_bindLitCol(p,na,ib){const Sb=ib.bind(p);return(wc,Wc)=>na.v>=Sb(wc,Wc)}}class pl extends ol{constructor(p){super();this.child=p}bind(p){const na=this.child.bind(p);return(ib,Sb)=>!na(ib,Sb)}}class zj extends ol{constructor(p,na){super();this.next=p;this.bind_=na}bind(p){return this.bind_(p),this.next}}Uh.prototype.countBy=function(p){return(new Xk(this.chunks)).countBy(p)};Uh.prototype.scan=function(p,na){return(new Xk(this.chunks)).scan(p,na)};Uh.prototype.scanReverse=function(p,na){return(new Xk(this.chunks)).scanReverse(p,
na)};Uh.prototype.filter=function(p){return(new Xk(this.chunks)).filter(p)};class Xk extends Uh{filter(p){return new Vk(this.chunks,p)}scan(p,na){const ib=this.chunks,Sb=ib.length;for(let wc=-1;++wc<Sb;){const Wc=ib[wc];na&&na(Wc);for(let Hd=-1,Ud=Wc.length;++Hd<Ud;)p(Hd,Wc)}}scanReverse(p,na){const ib=this.chunks;for(let Sb=ib.length;0<=--Sb;){const wc=ib[Sb];na&&na(wc);for(let Wc=wc.length;0<=--Wc;)p(Wc,wc)}}countBy(p){const na=this.chunks,ib=na.length;p="string"==typeof p?new Zl(p):p;p.bind(na[ib-
1]);const Sb=p.vector;if(!ce.isDictionary(Sb.type))throw Error("countBy currently only supports dictionary-encoded columns");var wc=Math.ceil(Math.log(Sb.length)/Math.log(256));wc=new (4==wc?Uint32Array:2<=wc?Uint16Array:Uint8Array)(Sb.dictionary.length);for(let Hd=-1;++Hd<ib;){var Wc=na[Hd];p.bind(Wc);const Ud=p.vector.indices;for(let He=-1,zf=Wc.length;++He<zf;)Wc=Ud.get(He),null!==Wc&&wc[Wc]++}return new pj(Sb.dictionary,Of.from(wc))}}class pj extends Uh{constructor(p,na){const ib=new Xg([new ph("values",
p.type),new ph("counts",na.type)]);super(new li(ib,na.length,[p,na]))}toJSON(){const p=this.getColumnAt(0),na=this.getColumnAt(1),ib={};for(let Sb=-1;++Sb<this.length;)ib[p.get(Sb)]=na.get(Sb);return ib}}class Ll{constructor(p,na){this.batches=p;this.predicate=na;this.index=this.batchIndex=0;this.batch=this.batches[this.batchIndex];this.predicateFunc=this.predicate.bind(this.batch)}next(){for(;this.batchIndex<this.batches.length;){for(;this.index<this.batch.length;){if(this.predicateFunc(this.index,
this.batch))return{value:this.batch.get(this.index++)};this.index++}++this.batchIndex<this.batches.length&&(this.index=0,this.batch=this.batches[this.batchIndex],this.predicateFunc=this.predicate.bind(this.batch))}return{done:!0,value:null}}[Symbol.iterator](){return this}}class Vk extends Xk{constructor(p,na){super(p);this._predicate=na}scan(p,na){const ib=this._chunks,Sb=ib.length;for(let wc=-1;++wc<Sb;){const Wc=ib[wc],Hd=this._predicate.bind(Wc);let Ud=!1;for(let He=-1,zf=Wc.length;++He<zf;)Hd(He,
Wc)&&(na&&!Ud&&(na(Wc),Ud=!0),p(He,Wc))}}scanReverse(p,na){const ib=this._chunks;for(let Sb=ib.length;0<=--Sb;){const wc=ib[Sb],Wc=this._predicate.bind(wc);let Hd=!1;for(let Ud=wc.length;0<=--Ud;)Wc(Ud,wc)&&(na&&!Hd&&(na(wc),Hd=!0),p(Ud,wc))}}count(){let p=0;const na=this._chunks,ib=na.length;for(let Sb=-1;++Sb<ib;){const wc=na[Sb],Wc=this._predicate.bind(wc);for(let Hd=-1,Ud=wc.length;++Hd<Ud;)Wc(Hd,wc)&&++p}return p}[Symbol.iterator](){return new Ll(this._chunks,this._predicate)}filter(p){return new Vk(this._chunks,
this._predicate.and(p))}countBy(p){const na=this._chunks,ib=na.length;p="string"==typeof p?new Zl(p):p;p.bind(na[ib-1]);const Sb=p.vector;if(!ce.isDictionary(Sb.type))throw Error("countBy currently only supports dictionary-encoded columns");var wc=Math.ceil(Math.log(Sb.length)/Math.log(256));wc=new (4==wc?Uint32Array:2<=wc?Uint16Array:Uint8Array)(Sb.dictionary.length);for(let Wc=-1;++Wc<ib;){const Hd=na[Wc],Ud=this._predicate.bind(Hd);p.bind(Hd);const He=p.vector.indices;for(let zf=-1,mg=Hd.length;++zf<
mg;){const Og=He.get(zf);null!==Og&&Ud(zf,Hd)&&wc[Og]++}}return new pj(Sb.dictionary,Of.from(wc))}}const Nh=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},$d),cd),hd),ge),od),Ie),{compareSchemas:bd,compareFields:function(p,na){return Ub.compareFields(p,na)},compareTypes:function(p,na){return Ub.visit(p,na)}});h.d(f,"DateUnit",function(){return ue});h.d(f,"IntervalUnit",function(){return Fe});h.d(f,"MessageHeader",function(){return vb});h.d(f,"MetadataVersion",
function(){return Cc});h.d(f,"Precision",function(){return we});h.d(f,"TimeUnit",function(){return sd});h.d(f,"Type",function(){return nb});h.d(f,"UnionMode",function(){return Wd});h.d(f,"BufferType",function(){return ac});h.d(f,"Data",function(){return Ef});h.d(f,"DataType",function(){return ce});h.d(f,"Null",function(){return De});h.d(f,"Bool",function(){return id});h.d(f,"Int",function(){return Ua});h.d(f,"Int8",function(){return pb});h.d(f,"Int16",function(){return Rb});h.d(f,"Int32",function(){return ec});
h.d(f,"Int64",function(){return Sc});h.d(f,"Uint8",function(){return kd});h.d(f,"Uint16",function(){return Fd});h.d(f,"Uint32",function(){return Yd});h.d(f,"Uint64",function(){return je});h.d(f,"Float",function(){return re});h.d(f,"Float16",function(){return xe});h.d(f,"Float32",function(){return Af});h.d(f,"Float64",function(){return Qf});h.d(f,"Utf8",function(){return td});h.d(f,"Binary",function(){return Hc});h.d(f,"FixedSizeBinary",function(){return Gf});h.d(f,"Date_",function(){return Ob});h.d(f,
"DateDay",function(){return gc});h.d(f,"DateMillisecond",function(){return Ac});h.d(f,"Timestamp",function(){return kc});h.d(f,"TimestampSecond",function(){return $c});h.d(f,"TimestampMillisecond",function(){return zd});h.d(f,"TimestampMicrosecond",function(){return rd});h.d(f,"TimestampNanosecond",function(){return Zd});h.d(f,"Time",function(){return Uc});h.d(f,"TimeSecond",function(){return y});h.d(f,"TimeMillisecond",function(){return wa});h.d(f,"TimeMicrosecond",function(){return fb});h.d(f,"TimeNanosecond",
function(){return Ib});h.d(f,"Decimal",function(){return ke});h.d(f,"List",function(){return eg});h.d(f,"Struct",function(){return Sf});h.d(f,"Union",function(){return gg});h.d(f,"DenseUnion",function(){return vf});h.d(f,"SparseUnion",function(){return df});h.d(f,"Dictionary",function(){return Mg});h.d(f,"Interval",function(){return ve});h.d(f,"IntervalDayTime",function(){return Pe});h.d(f,"IntervalYearMonth",function(){return hf});h.d(f,"FixedSizeList",function(){return ug});h.d(f,"Map_",function(){return Ng});
h.d(f,"Table",function(){return Uh});h.d(f,"Column",function(){return Wf});h.d(f,"Schema",function(){return Xg});h.d(f,"Field",function(){return ph});h.d(f,"Visitor",function(){return xg});h.d(f,"Vector",function(){return Qc});h.d(f,"BaseVector",function(){return yb});h.d(f,"BinaryVector",function(){return Kb});h.d(f,"BoolVector",function(){return ic});h.d(f,"Chunked",function(){return Rh});h.d(f,"DateVector",function(){return Bc});h.d(f,"DateDayVector",function(){return Lc});h.d(f,"DateMillisecondVector",
function(){return gd});h.d(f,"DecimalVector",function(){return Dd});h.d(f,"DictionaryVector",function(){return Jd});h.d(f,"FixedSizeBinaryVector",function(){return se});h.d(f,"FixedSizeListVector",function(){return cf});h.d(f,"FloatVector",function(){return lf});h.d(f,"Float16Vector",function(){return Hf});h.d(f,"Float32Vector",function(){return ff});h.d(f,"Float64Vector",function(){return Ff});h.d(f,"IntervalVector",function(){return ig});h.d(f,"IntervalDayTimeVector",function(){return Mf});h.d(f,
"IntervalYearMonthVector",function(){return cg});h.d(f,"IntVector",function(){return Of});h.d(f,"Int8Vector",function(){return Fg});h.d(f,"Int16Vector",function(){return Rg});h.d(f,"Int32Vector",function(){return Bg});h.d(f,"Int64Vector",function(){return Eg});h.d(f,"Uint8Vector",function(){return xi});h.d(f,"Uint16Vector",function(){return rh});h.d(f,"Uint32Vector",function(){return ih});h.d(f,"Uint64Vector",function(){return Pk});h.d(f,"ListVector",function(){return mf});h.d(f,"MapVector",function(){return We});
h.d(f,"NullVector",function(){return Zf});h.d(f,"StructVector",function(){return Cf});h.d(f,"TimestampVector",function(){return Cg});h.d(f,"TimestampSecondVector",function(){return pg});h.d(f,"TimestampMillisecondVector",function(){return fg});h.d(f,"TimestampMicrosecondVector",function(){return mh});h.d(f,"TimestampNanosecondVector",function(){return Fh});h.d(f,"TimeVector",function(){return Gh});h.d(f,"TimeSecondVector",function(){return th});h.d(f,"TimeMillisecondVector",function(){return yi});
h.d(f,"TimeMicrosecondVector",function(){return Ui});h.d(f,"TimeNanosecondVector",function(){return Lk});h.d(f,"UnionVector",function(){return al});h.d(f,"DenseUnionVector",function(){return hl});h.d(f,"SparseUnionVector",function(){return Ol});h.d(f,"Utf8Vector",function(){return Sk});h.d(f,"ByteStream",function(){return rg});h.d(f,"AsyncByteStream",function(){return mj});h.d(f,"AsyncByteQueue",function(){return aj});h.d(f,"RecordBatchReader",function(){return gi});h.d(f,"RecordBatchFileReader",
function(){return Uk});h.d(f,"RecordBatchStreamReader",function(){return Ii});h.d(f,"AsyncRecordBatchFileReader",function(){return vl});h.d(f,"AsyncRecordBatchStreamReader",function(){return bj});h.d(f,"RecordBatchWriter",function(){return Q});h.d(f,"RecordBatchFileWriter",function(){return pa});h.d(f,"RecordBatchStreamWriter",function(){return ta});h.d(f,"RecordBatchJSONWriter",function(){return Oa});h.d(f,"MessageReader",function(){return ca});h.d(f,"AsyncMessageReader",function(){return ya});h.d(f,
"JSONMessageReader",function(){return Ka});h.d(f,"Message",function(){return Dh});h.d(f,"RecordBatch",function(){return li});h.d(f,"DataFrame",function(){return Xk});h.d(f,"FilteredDataFrame",function(){return Vk});h.d(f,"CountByResult",function(){return pj});h.d(f,"predicate",function(){return Je});h.d(f,"util",function(){return Nh});h.d(f,"Builder",function(){return oh});h.d(f,"BinaryBuilder",function(){return bk});h.d(f,"BoolBuilder",function(){return Bi});h.d(f,"DateBuilder",function(){return rj});
h.d(f,"DateDayBuilder",function(){return vk});h.d(f,"DateMillisecondBuilder",function(){return gk});h.d(f,"DecimalBuilder",function(){return qj});h.d(f,"DictionaryBuilder",function(){return vh});h.d(f,"FixedSizeBinaryBuilder",function(){return Ek});h.d(f,"FixedSizeListBuilder",function(){return ki});h.d(f,"FloatBuilder",function(){return Ai});h.d(f,"Float16Builder",function(){return wi});h.d(f,"Float32Builder",function(){return uk});h.d(f,"Float64Builder",function(){return Yk});h.d(f,"IntervalBuilder",
function(){return Kg});h.d(f,"IntervalDayTimeBuilder",function(){return Mj});h.d(f,"IntervalYearMonthBuilder",function(){return Bk});h.d(f,"IntBuilder",function(){return ai});h.d(f,"Int8Builder",function(){return Oj});h.d(f,"Int16Builder",function(){return Ok});h.d(f,"Int32Builder",function(){return oj});h.d(f,"Int64Builder",function(){return Th});h.d(f,"Uint8Builder",function(){return Xi});h.d(f,"Uint16Builder",function(){return Xh});h.d(f,"Uint32Builder",function(){return Zh});h.d(f,"Uint64Builder",
function(){return cj});h.d(f,"ListBuilder",function(){return xh});h.d(f,"MapBuilder",function(){return Hh});h.d(f,"NullBuilder",function(){return Kj});h.d(f,"StructBuilder",function(){return ri});h.d(f,"TimestampBuilder",function(){return Xj});h.d(f,"TimestampSecondBuilder",function(){return Oh});h.d(f,"TimestampMillisecondBuilder",function(){return Mh});h.d(f,"TimestampMicrosecondBuilder",function(){return ui});h.d(f,"TimestampNanosecondBuilder",function(){return Ti});h.d(f,"TimeBuilder",function(){return Pj});
h.d(f,"TimeSecondBuilder",function(){return Kh});h.d(f,"TimeMillisecondBuilder",function(){return Ri});h.d(f,"TimeMicrosecondBuilder",function(){return oi});h.d(f,"TimeNanosecondBuilder",function(){return lh});h.d(f,"UnionBuilder",function(){return Fi});h.d(f,"DenseUnionBuilder",function(){return Yg});h.d(f,"SparseUnionBuilder",function(){return dj});h.d(f,"Utf8Builder",function(){return Rj});ed.toDOMStream=function(p,na){if(zc(p))return function(ib,Sb){function wc(He,zf){return u(this,void 0,void 0,
function*(){let mg,Og,Ah=He.desiredSize||null;for(;!(Og=yield zf.next(Hd?Ah:null)).done;)if(ArrayBuffer.isView(Og.value)&&(mg=v(Uint8Array,Og.value))&&(null!=Ah&&Hd&&(Ah=Ah-mg.byteLength+1),Og.value=mg),He.enqueue(Og.value),null!=Ah&&0>=--Ah)return;He.close()})}let Wc=null;const Hd=Sb&&"bytes"===Sb.type||!1,Ud=Sb&&Sb.highWaterMark||16777216;return new ReadableStream(Object.assign(Object.assign({},Sb),{start(He){return u(this,void 0,void 0,function*(){yield wc(He,Wc||(Wc=ib[Symbol.asyncIterator]()))})},
pull(He){return u(this,void 0,void 0,function*(){Wc?yield wc(He,Wc):He.close()})},cancel(){return u(this,void 0,void 0,function*(){Wc&&Wc.return&&(yield Wc.return());Wc=null})}}),Object.assign({highWaterMark:Hd?Ud:void 0},Sb))}(p,na);if(sg(p))return function(ib,Sb){function wc(He,zf){let mg,Og,Ah=He.desiredSize||null;for(;!(Og=zf.next(Hd?Ah:null)).done;)if(ArrayBuffer.isView(Og.value)&&(mg=v(Uint8Array,Og.value))&&(null!=Ah&&Hd&&(Ah=Ah-mg.byteLength+1),Og.value=mg),He.enqueue(Og.value),null!=Ah&&
0>=--Ah)return;He.close()}let Wc=null;const Hd=Sb&&"bytes"===Sb.type||!1,Ud=Sb&&Sb.highWaterMark||16777216;return new ReadableStream(Object.assign(Object.assign({},Sb),{start(He){wc(He,Wc||(Wc=ib[Symbol.iterator]()))},pull(He){Wc?wc(He,Wc):He.close()},cancel(){Wc&&Wc.return&&Wc.return();Wc=null}}),Object.assign({highWaterMark:Hd?Ud:void 0},Sb))}(p,na);throw Error("toDOMStream() must be called with an Iterable or AsyncIterable");};oh.throughDOM=function(p){return new Yl(p)};gi.throughDOM=uc;Uk.throughDOM=
uc;Ii.throughDOM=uc;Q.throughDOM=Oc;pa.throughDOM=Oc;ta.throughDOM=Oc}])})};
shadow$provide[577]=function(Pa,da,gb,oa){(function(k,f){"object"===typeof oa&&"undefined"!==typeof gb?gb.exports=f(da(576)):"function"===typeof define&&define.amd?define(["./apache-arrow.js"],f):(k="undefined"!==typeof globalThis?globalThis:k||self,k.vega=k.vega||{},k.vega.format=k.vega.format||{},k.vega.format.arrow=f(k.Arrow))})(this,function(k){function f(u){u instanceof k.Table||(u instanceof ArrayBuffer&&(u=new Uint8Array(u)),u=k.Table.from(Array.isArray(u)?u:[u]));var q=u;u=h(q);q=Array(q.length);
for(let D=0,U=q.length;D<U;++D)q[D]=u(D);return q}function h(u){const q={};u.schema.fields.map(D=>D.name).forEach((D,U)=>{const aa=u.getColumnAt(U);q.hasOwnProperty(D)||Object.defineProperty(q,D,{get:function(){return aa.get(this[l])},set:function(){throw Error("Arrow field values can not be overwritten.");},enumerable:!0})});return D=>{const U=Object.create(q);U[l]=D;return U}}const l=Symbol("rowIndex");f.responseType="arrayBuffer";return f})};
'use strict';var T9,W9,Z9,$9,xeb,yeb,zeb,f$,p$,q$,Heb,Ieb,Jeb,veb,Keb,leb,qeb,d$,Leb,g$,k$,ieb,Meb,Neb,heb,m$,oeb,Aeb,Geb,X9,Oeb,Peb,seb,R9,n$,Qeb,V9,U9,Y9,Feb,o$,i$,j$,c$,web,Beb,reb,Eeb,teb,l$,ueb,e$,Reb,Seb,peb,Ceb,h$,b$,Deb,Teb,a$;
$APP.qV=function(a){$APP.l($APP.Ig(eeb))&&($APP.Rw.J($APP.C(["loading arrow..."])),$APP.Tl(eeb,!1),feb.formats("arrow",geb));a=$APP.l($APP.s2.F(a))?a:new $APP.h(null,1,[$APP.s2,a],null);var b=$APP.s2.F(a),c=$APP.go(b,new $APP.J(null,3,5,$APP.M,[$APP.FI,$APP.EJ,$APP.BJ],null));b=$APP.Ti(b)?$APP.O.G($APP.BU(b),heb,new $APP.h(null,1,[ieb,$APP.Es.J($APP.C([jeb,c]))],null)):b;return new $APP.J(null,3,5,$APP.M,[$APP.w_,keb.Vega,$APP.Es.J($APP.C([a,new $APP.h(null,5,[leb,meb,R9,neb,oeb,new $APP.h(null,4,
[peb,!0,$APP.Xt,!0,qeb,!0,reb,!1],null),seb,S9,$APP.s2,b],null)]))],null)};$APP.Dza=function(a){return new $APP.J(null,2,5,$APP.M,[$APP.qV,$APP.Es.J($APP.C([new $APP.h(null,1,[$APP.LR,"vega-lite"],null),a]))],null)};T9=function(a,b){return new $APP.h(null,4,[teb,"https://vega.github.io/schema/vega/v5.json",$APP.FI,a,$APP.EJ,a/b,$APP.y_,new $APP.h(null,4,[$APP.yJ,10,$APP.HJ,55,$APP.bwa,40,$APP.zJ,10],null)],null)};
W9=function(a,b){return new $APP.h(null,1,[$APP.CU,new $APP.J(null,1,5,$APP.M,[new $APP.h(null,2,[$APP.Q,a,ueb,$APP.gr.j($APP.mm,$APP.No.j(function(c){var d=$APP.A.G(c,0,null);c=$APP.A.G(c,1,null);return new $APP.h(null,2,[U9,d,V9,c],null)},b))],null)],null)],null)};
Z9=function(a,b){return new $APP.h(null,1,[X9,new $APP.J(null,2,5,$APP.M,[$APP.Es.J($APP.C([new $APP.h(null,2,[veb,"bottom",Y9,"x"],null),$APP.l(a)?new $APP.h(null,2,[$APP.eV,a,web,30],null):null])),$APP.Es.J($APP.C([new $APP.h(null,2,[veb,"left",Y9,"y"],null),$APP.l(b)?new $APP.h(null,2,[$APP.eV,b,web,45],null):null]))],null)],null)};$9=function(a,b,c){return $APP.y.j(b,$APP.cO)?new $APP.h(null,2,[$APP.CU,a,$APP.T1,$APP.q.F(c)],null):b};
xeb=function(a,b){return new $APP.h(null,1,[a$,new $APP.J(null,2,5,$APP.M,[new $APP.h(null,5,[$APP.Q,"x",$APP.bu,"linear",b$,"width",c$,!1,d$,$9(a,$APP.w(b),"x")],null),new $APP.h(null,6,[$APP.Q,"y",$APP.bu,"linear",b$,"height",e$,!0,c$,!1,d$,$9(a,$APP.yi(b),"y")],null)],null)],null)};yeb=function(a,b,c){return $APP.ti($APP.jm.j(function(d){return d<c&&d>=b},a))};zeb=function(a,b,c,d){b=$APP.ay.G(b,c,d);return $APP.No.j(function(e){return yeb(a,e,e+d)},b)};
f$=function(a){var b=$APP.No.j($APP.Ki,a);b=$APP.pl.j($APP.Es,b);return $APP.Ji($APP.pl.j($APP.Es,a),b)};
p$=function(a){var b=$APP.rl(a);a=$APP.E.G(b,g$,new $APP.J(null,2,5,$APP.M,[$APP.cO,$APP.cO],null));var c=$APP.E.j(b,h$),d=$APP.E.j(b,$APP.CU),e=$APP.E.G(b,i$,1.618),f=$APP.E.G(b,Aeb,!1),k=$APP.E.j(b,$APP.RY),m=$APP.E.G(b,Beb,$APP.q.F($APP.aq())),p=$APP.E.j(b,j$),n=$APP.E.G(b,k$,400),u=$APP.E.G(b,Ceb,70);b=$APP.E.G(b,$APP.A_,1);d=$APP.Ri($APP.w(d))?d:$APP.No.G($APP.us,$APP.ay.F($APP.ti(d)),d);return f$($APP.C([T9(n,e),W9(m,d),$APP.l(f)?new $APP.h(null,1,[l$,new $APP.J(null,1,5,$APP.M,[new $APP.h(null,
3,[$APP.bu,"line",$APP.p2,new $APP.h(null,1,[$APP.CU,m],null),m$,new $APP.h(null,1,[n$,new $APP.h(null,5,[U9,new $APP.h(null,2,[Y9,"x",$APP.T1,"x"],null),V9,new $APP.h(null,2,[Y9,"y",$APP.T1,"y"],null),$APP.jZ,new $APP.h(null,1,[$APP.kB,$APP.l(k)?k:"#FF29D2"],null),Deb,new $APP.h(null,1,[$APP.kB,2],null),Eeb,new $APP.h(null,1,[$APP.kB,b],null)],null)],null)],null)],null)],null):new $APP.h(null,1,[l$,new $APP.J(null,1,5,$APP.M,[new $APP.h(null,3,[$APP.bu,"symbol",$APP.p2,new $APP.h(null,1,[$APP.CU,
m],null),m$,new $APP.h(null,3,[n$,new $APP.h(null,4,[U9,new $APP.h(null,2,[Y9,"x",$APP.T1,"x"],null),V9,new $APP.h(null,2,[Y9,"y",$APP.T1,"y"],null),$APP.iS,new $APP.h(null,1,[$APP.kB,$APP.l(k)?k:"steelblue"],null),Feb,new $APP.h(null,1,[$APP.kB,b],null)],null),$APP.h3,new $APP.h(null,3,[Geb,"circle",$APP.EI,new $APP.h(null,1,[$APP.kB,u],null),$APP.jZ,new $APP.h(null,1,[$APP.kB,"transparent"],null)],null),o$,new $APP.h(null,2,[$APP.EI,new $APP.h(null,1,[$APP.kB,3*u],null),$APP.jZ,new $APP.h(null,
1,[$APP.kB,"white"],null)],null)],null)],null)],null)],null),xeb(m,a),Z9(p,c)]))};q$=function(a){return function(b){return new $APP.J(null,2,5,$APP.M,[$APP.qV,a.F?a.F(b):a.call(null,b)],null)}};Heb=function(a){return $APP.yi(a)};Ieb=function(a){return $APP.Nv.j("",$APP.cm.j(a,$APP.RO.F(function(){return"1fr "})))};Jeb=new $APP.G(null,"normalize","normalize",-1904390051);veb=new $APP.G(null,"orient","orient",1933743565);Keb=new $APP.G(null,"normalise","normalise",-1794807087);
leb=new $APP.G(null,"signalListeners","signalListeners",708658415);qeb=new $APP.G(null,"compiled","compiled",850043082);d$=new $APP.G(null,"domain","domain",1847214937);Leb=new $APP.G(null,"plot-points","plot-points",-1364232040);g$=new $APP.G(null,"plot-range","plot-range",-1426783143);k$=new $APP.G(null,"plot-size","plot-size",1218885548);ieb=new $APP.G(null,"embedOptions","embedOptions",1357117031);Meb=new $APP.G(null,"grid","grid",402978600);Neb=new $APP.G(null,"fill-opacity","fill-opacity",-537571170);
heb=new $APP.G(null,"usermeta","usermeta",1301566533);m$=new $APP.G(null,"encode","encode",-1753429702);oeb=new $APP.G(null,"actions","actions",-812656882);Aeb=new $APP.G(null,"joined","joined",-231861661);Geb=new $APP.G(null,"shape","shape",1190694006);X9=new $APP.G(null,"axes","axes",1970866440);Oeb=new $APP.G(null,"band","band",-770104117);Peb=new $APP.G(null,"categories","categories",178386610);seb=new $APP.G(null,"onParseError","onParseError",1679014536);
R9=new $APP.G(null,"tooltip","tooltip",-1809677058);n$=new $APP.G(null,"enter","enter",1792452624);Qeb=new $APP.G(null,"bins","bins",1670395210);V9=new $APP.G(null,"y","y",-1757859776);U9=new $APP.G(null,"x","x",2099068185);Y9=new $APP.G(null,"scale","scale",-230427353);Feb=new $APP.G(null,"fillOpacity","fillOpacity",619211981);o$=new $APP.G(null,"hover","hover",-341141711);i$=new $APP.G(null,"aspect-ratio","aspect-ratio",1674013504);j$=new $APP.G(null,"x-title","x-title",698054088);
c$=new $APP.G(null,"zero","zero",-858964576);web=new $APP.G(null,"titleOffset","titleOffset",657073414);Beb=new $APP.G(null,"series-name","series-name",-128514906);reb=new $APP.G(null,"editor","editor",-989377770);Eeb=new $APP.G(null,"strokeOpacity","strokeOpacity",-565583263);teb=new $APP.G(null,"$schema","$schema",1635092088);l$=new $APP.G(null,"marks","marks",-1844991497);ueb=new $APP.G(null,"values","values",372645556);e$=new $APP.G(null,"nice","nice",1404040504);
Reb=new $APP.G(null,"interpolate","interpolate",798572493);Seb=new $APP.G(null,"window","window",724519534);peb=new $APP.G(null,"export","export",214356590);Ceb=new $APP.G(null,"symbol-size","symbol-size",-1099583279);h$=new $APP.G(null,"y-title","y-title",220785852);b$=new $APP.G(null,"range","range",1639692286);Deb=new $APP.G(null,"strokeWidth","strokeWidth",-2130848332);Teb=new $APP.G(null,"automatic","automatic",104479799);a$=new $APP.G(null,"scales","scales",-1197224722);$APP.Cd("ui-vega");var jeb=new $APP.h(null,6,[$APP.Q2,"quartz",R9,new $APP.h(null,1,[$APP.Q2,"dark"],null),o$,!0,$APP.FI,600,$APP.EJ,600,$APP.y_,5],null);var feb=$APP.Kq(554,{});var keb=$APP.Kq(574,{});var Ueb=$APP.Kq(575,{});$APP.Kq(576,{});var geb=$APP.Kq(577,{});var eeb=$APP.TQ.F(!0),neb=(new Ueb.Handler).call,r$=function r$(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=1<c.length?new $APP.Xf(c.slice(1),0,null):null;return r$.J(arguments[0],c)};r$.J=function(a,b){return $APP.Rw.J($APP.C(["tooltip: ",$APP.MN.F(b)]))};r$.O=1;r$.ga=function(a){var b=$APP.w(a);a=$APP.x(a);return this.J(b,a)};
var S9=function S9(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=0<c.length?new $APP.Xf(c.slice(0),0,null):null;return S9.J(c)};S9.J=function(a){return $APP.Rw.J($APP.C(["vega spec parse error: ",a]))};S9.O=0;S9.ga=function(a){return this.J($APP.t(a))};var meb=new $APP.h(null,1,[R9,r$],null);var s$=function s$(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=1<c.length?new $APP.Xf(c.slice(1),0,null):null;return s$.J(arguments[0],c)};
s$.J=function(a,b){var c=$APP.q.F($APP.aq());a=$APP.gr.j($APP.mm,$APP.Xz.j(new $APP.J(null,3,5,$APP.M,[a,Beb,c],null),b));a=$APP.pl.j(p$,a);b=new $APP.J(null,2,5,$APP.M,[$APP.cO,$APP.cO],null);c=new $APP.h(null,1,[a$,new $APP.J(null,2,5,$APP.M,[new $APP.h(null,5,[$APP.Q,"x",$APP.bu,"time",b$,"width",c$,!1,d$,$9(c,$APP.w(b),"x")],null),new $APP.h(null,6,[$APP.Q,"y",$APP.bu,"linear",b$,"height",e$,!0,c$,!1,d$,$9(c,$APP.yi(b),"y")],null)],null)],null);return f$($APP.C([a,c]))};s$.O=1;
s$.ga=function(a){var b=$APP.w(a);a=$APP.x(a);return this.J(b,a)};var t$=function t$(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=0<c.length?new $APP.Xf(c.slice(0),0,null):null;return t$.J(c)};
t$.J=function(a){var b=$APP.w(a),c=$APP.rl(b);b=$APP.E.j(c,$APP.FI);var d=$APP.E.j(c,$APP.EJ),e=$APP.E.j(c,$APP.y_),f=$APP.E.j(c,a$);c=$APP.E.j(c,X9);var k=$APP.pl.j($APP.Xz,$APP.No.j($APP.CU,a));a=$APP.pl.j($APP.Xz,$APP.No.j(l$,a));return new $APP.h(null,7,[$APP.FI,b,$APP.EJ,d,$APP.y_,e,a$,f,X9,c,$APP.CU,k,l$,a],null)};t$.O=0;t$.ga=function(a){return this.J($APP.t(a))};$APP.cab=q$(function(a){var b=$APP.rl(a),c=$APP.E.j(b,$APP.IT),d=$APP.E.j(b,Seb);a=$APP.E.G(b,Leb,100);var e=$APP.A.G(d,0,null);d=$APP.A.G(d,1,null);b=$APP.Es.J($APP.C([$APP.wl,b]));a=$APP.ay.G(e,d,(d-e)/a);a=$APP.No.j(function(f){return new $APP.J(null,2,5,$APP.M,[f,c.F?c.F(f):c.call(null,f)],null)},a);$APP.Rw.J($APP.C(["data",a]));return p$($APP.Es.J($APP.C([b,new $APP.h(null,2,[$APP.CU,a,Aeb,!0],null)])))});$APP.X$a=q$(p$);
$APP.Z$a=q$(function(a){var b=$APP.rl(a),c=$APP.E.G(b,g$,new $APP.J(null,2,5,$APP.M,[$APP.cO,$APP.cO],null));a=$APP.E.j(b,h$);var d=$APP.E.G(b,i$,1.618),e=$APP.E.j(b,$APP.RY),f=$APP.E.j(b,j$),k=$APP.E.G(b,k$,400),m=$APP.E.j(b,Peb),p=$APP.E.G(b,$APP.A_,1),n=$APP.E.j(b,ueb);b=$APP.q.F($APP.aq());d=T9(k,d);m=W9(b,$APP.No.G($APP.us,m,n));e=new $APP.h(null,1,[l$,new $APP.J(null,1,5,$APP.M,[new $APP.h(null,3,[$APP.bu,"rect",$APP.p2,new $APP.h(null,1,[$APP.CU,b],null),m$,new $APP.h(null,3,[n$,new $APP.h(null,
4,[U9,new $APP.h(null,2,[Y9,"x",$APP.T1,"x"],null),$APP.FI,new $APP.h(null,3,[Y9,"x",Oeb,1,$APP.Rt,-1],null),V9,new $APP.h(null,2,[Y9,"y",$APP.T1,"y"],null),$APP.R2,new $APP.h(null,2,[Y9,"y",$APP.kB,0],null)],null),$APP.h3,new $APP.h(null,2,[$APP.iS,new $APP.h(null,1,[$APP.kB,$APP.l(e)?e:"steelblue"],null),$APP.A_,new $APP.h(null,1,[$APP.kB,p],null)],null),o$,new $APP.h(null,1,[$APP.iS,new $APP.h(null,1,[$APP.kB,"#FF29D2"],null)],null)],null)],null)],null)],null);c=new $APP.h(null,1,[a$,new $APP.J(null,
2,5,$APP.M,[new $APP.h(null,4,[$APP.Q,"x",$APP.bu,"band",b$,"width",d$,$9(b,$APP.w(c),"x")],null),new $APP.h(null,4,[$APP.Q,"y",b$,"height",e$,!0,d$,$9(b,$APP.yi(c),"y")],null)],null)],null);return f$($APP.C([d,m,e,c,Z9(f,a)]))});
$APP.aab=q$(function(a){var b=$APP.rl(a);a=$APP.E.G(b,g$,new $APP.J(null,2,5,$APP.M,[$APP.cO,$APP.cO],null));var c=$APP.E.j(b,h$),d=$APP.E.j(b,Jeb),e=$APP.E.G(b,Neb,.4),f=$APP.E.j(b,$APP.CU),k=$APP.E.G(b,i$,1.618),m=$APP.E.j(b,$APP.RY),p=$APP.E.j(b,j$),n=$APP.E.G(b,Qeb,Teb),u=$APP.E.G(b,k$,400),z=$APP.E.j(b,Keb);b=$APP.E.G(b,$APP.A_,1);var B=$APP.w(a),H=$APP.y.j(B,$APP.cO)?$APP.pl.j($APP.rW,f):$APP.w(B);B=$APP.y.j(B,$APP.cO)?$APP.pl.j($APP.Zx,f):$APP.yi(B);B+=B;var N=yeb(f,H,B);n=$APP.y.j(n,Teb)?
Math.ceil(1+Math.log(N)/Math.log(2)):n;n=(B-H)/n;var W=1E-15>n?1:n;n=zeb(f,H,B,W);var aa=function(){var ea=$APP.l(d)?d:$APP.l(z)?z:$APP.YH;ea=ea instanceof $APP.G?ea.Aa:null;switch(ea){case "probability":return $APP.ti(f);case "probability-density":return $APP.ti(f)*W;case "count":return 1;default:throw Error(["No matching clause: ",$APP.q.F(ea)].join(""));}}();N=$APP.No.j(function(ea){return ea/aa},n);n=$APP.q.F($APP.aq());H=$APP.No.j($APP.Yt.j($APP.yD,W),$APP.ay.G(H-W,B+W,W));B=$APP.Xz.J(new $APP.J(null,
1,5,$APP.M,[0],null),N,$APP.C([new $APP.J(null,1,5,$APP.M,[0],null)]));H=$APP.No.G($APP.us,H,B);return f$($APP.C([T9(u,k),W9(n,H),new $APP.h(null,1,[l$,new $APP.J(null,1,5,$APP.M,[new $APP.h(null,3,[$APP.bu,"line",$APP.p2,new $APP.h(null,1,[$APP.CU,n],null),m$,new $APP.h(null,1,[n$,new $APP.h(null,8,[U9,new $APP.h(null,2,[Y9,"x",$APP.T1,"x"],null),V9,new $APP.h(null,2,[Y9,"y",$APP.T1,"y"],null),Reb,new $APP.h(null,1,[$APP.kB,"step-before"],null),$APP.iS,new $APP.h(null,1,[$APP.kB,$APP.l(m)?m:"steelblue"],
null),Feb,new $APP.h(null,1,[$APP.kB,e],null),$APP.jZ,new $APP.h(null,1,[$APP.kB,$APP.l(m)?m:"steelblue"],null),Deb,new $APP.h(null,1,[$APP.kB,2],null),Eeb,new $APP.h(null,1,[$APP.kB,b],null)],null)],null)],null)],null)],null),xeb(n,a),Z9(p,c)]))});$APP.fab=q$(s$);$APP.i9=function i9(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=0<c.length?new $APP.Xf(c.slice(0),0,null):null;return i9.J(c)};
$APP.i9.J=function(a){a=$APP.gr.j($APP.mm,$APP.No.j(Heb,a));return new $APP.J(null,2,5,$APP.M,[$APP.qV,$APP.pl.j(t$,a)],null)};$APP.i9.O=0;$APP.i9.ga=function(a){return this.J($APP.t(a))};$APP.h9=function h9(a){for(var c=[],d=arguments.length,e=0;;)if(e<d)c.push(arguments[e]),e+=1;else break;c=1<c.length?new $APP.Xf(c.slice(1),0,null):null;return h9.J(arguments[0],c)};$APP.h9.J=function(a,b){var c=$APP.rl(a);a=$APP.E.G(c,$APP.pBa,2);c=$APP.E.G(c,$APP.vU,"orange");return $APP.gr.j($APP.Ji(new $APP.J(null,2,5,$APP.M,[$APP.zG,new $APP.h(null,1,[$APP.EG,new $APP.h(null,3,[$APP.Q3,Meb,$APP.GZ,Ieb(a),$APP.vU,c],null)],null)],null),new $APP.h(null,1,[$APP.wU,!0],null)),b)};$APP.h9.O=1;
$APP.h9.ga=function(a){var b=$APP.w(a);a=$APP.x(a);return this.J(b,a)};$APP.hf();
}).call(this);